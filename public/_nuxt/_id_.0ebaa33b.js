import{_ as Qo}from"./new-position-title.6b754d1d.js";import{_ as po}from"./token-warning.b2d93305.js";import{_ as Bo}from"./auto-pool-apy-tips.526e3c61.js";import{u as Je,a as P,g as uo,c as Ye,f as xo,s as M,d as Re,p as qo,b as No,T as Be,e as ae,h as en,i as on,j as nn}from"./pool.ab720650.js";import{u as fo,a as wo}from"./sha256.02128697.js";import{u as Ze,a as Do}from"./autoPool.816fea33.js";import{i as lo}from"./import-icon.de3e6c66.js";import{a as Ve,l as b,m as Ke,r as A,q as $e,e as Oe,s as $o,o as d,f as w,h as o,t as Fe,i as Q,v,j as Ue,x as X,u as T,p as Ee,k as We,y as Mo,z as io,c as le,w as Ne,F as ro,M as tn,A as ko,C as Oo,D as Io,E as Co,G as Lo,H as ho,B as Fo,I as _o,b as sn,J as ln}from"./entry.84e1feab.js";import"./decimal.633e31ee.js";import{D as u}from"./decimal.0e8aa3f1.js";import{_ as Uo}from"./assets-card.1b3cfcb6.js";import{_ as Vo}from"./coin-lock.97e224d1.js";import{_ as Eo,a as Wo}from"./auto-pool-remove-modal.45d35eaf.js";import{afterCurrentPrice as co}from"./data.ced32cb5.js";import{V as go}from"./index.7b9fb5ef.js";/* empty css              *//* empty css              */import"./back.c9c898f1.js";import"./swap-setting.46f155a0.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.0216c4d5.js";const an=Ve({components:{AutoPoolApyTips:Bo},setup(){const e=fo(),t=b(()=>e),H=Je(),G=b(()=>H),U=Ze(),D=b(()=>U),m=b(()=>t.value.theme),c=Ke(),I=A();$e(()=>[D.value.positionInfoObj,c.params.id],([s,a])=>{s&&!Ye(s)&&a&&(I.value=s[a],console.log(I.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const h=b(()=>{var s;return(s=I.value)==null?void 0:s.needReverse}),l=s=>{var a;return(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||((a=G.value.tokensObj[s==null?void 0:s.address])==null?void 0:a.logo_url)||(m.value==="default"?lo("/image/coins/unknown.png"):lo("/image/coins/sui-unknown.png"))},n=b(()=>{var s,a;return console.log((s=I==null?void 0:I.value)==null?void 0:s.poolUSD,"##positionInfo?.value?.poolUSD"),(a=I==null?void 0:I.value)==null?void 0:a.poolUSD}),B=b(()=>{var s,a;return D.value.apyObj&&((a=D.value.apyObj[(s=I.value)==null?void 0:s.id])==null?void 0:a.apr)||"--"});return{positionInfo:I,needReverse:h,getCoinIcon:l,tvl:n,apy:B,addCommom:P,getExplorerUrl:uo}}});const Ie=e=>(Ee("data-v-a77dba1b"),e=e(),We(),e),un={class:"auto-pool-v2-info"},rn={class:"pool-info"},dn={class:"left"},vn={class:"coin-a"},mn={alt:""},cn={class:"coin-b"},pn={alt:""},fn={class:"position-name"},yn={key:0,class:"pool-fee"},bn=Ie(()=>o("span",null,"Fee tier",-1)),_n={class:"vault-address"},kn=["href"],hn=Ie(()=>o("span",null,"Vault Address",-1)),gn=Ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),wn=[hn,gn],$n={class:"pool-address"},In=["href"],Cn=Ie(()=>o("span",null,"Pool Address",-1)),An=Ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),Pn=[Cn,An],Sn={class:"apy-and-tvl"},Tn={class:"apy"},Rn=Ie(()=>o("div",{class:"apy-title"},"APY",-1)),qn={class:"apy-text"},Bn={class:"tvl"},Nn=Ie(()=>o("div",{class:"tvl-title"},"TVL",-1)),Dn={class:"tvl-text"},Mn={class:"pool-info h5-pool-info"},On={class:"left"},Ln={class:"coin-a"},Fn={alt:""},Un={class:"coin-b"},Vn={alt:""},En={class:"position-name"},Wn={key:0,class:"pool-fee"},Xn=Ie(()=>o("span",null,"Fee tier",-1)),jn={class:"left"},Gn={class:"vault-address"},Hn=["href"],zn=Ie(()=>o("span",null,"Vault Address",-1)),Yn=Ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),Jn=[zn,Yn],Zn={class:"pool-address"},Kn=["href"],Qn=Ie(()=>o("span",null,"Pool Address",-1)),xn=Ie(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),et=[Qn,xn],ot={class:"apy-and-tvl"},nt={class:"apy"},tt=Ie(()=>o("div",{class:"apy-title"},"APY",-1)),st={class:"apy-text"},lt={class:"tvl"},it=Ie(()=>o("div",{class:"tvl-title"},"TVL",-1)),at={class:"tvl-text"};function ut(e,t,H,G,U,D){var h,l,n,B,s,a,g,r,f,S,N,R,z,y,p,C,V,j,ue,E,$,re,fe,ye,F,Y,ee,oe,_,J,Se,de,Te,Ce,he,De,Xe,je,Qe,xe,ve,me,eo,Ge,He,oo,k,O;const m=po,c=Bo,I=$o("image");return d(),w("div",un,[o("div",rn,[o("div",dn,[o("div",vn,[Fe(o("img",mn,null,512),[[I,e.needReverse?e.getCoinIcon((l=e.positionInfo)==null?void 0:l.token_b):e.getCoinIcon((h=e.positionInfo)==null?void 0:h.token_a)]]),Q(m,{address:e.needReverse?(a=(s=e.positionInfo)==null?void 0:s.token_b)==null?void 0:a.address:(B=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:B.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",cn,[Fe(o("img",pn,null,512),[[I,e.needReverse?e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_a):e.getCoinIcon((g=e.positionInfo)==null?void 0:g.token_b)]]),Q(m,{address:e.needReverse?(R=(N=e.positionInfo)==null?void 0:N.token_a)==null?void 0:R.address:(S=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:S.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",fn,v(e.needReverse?(y=(z=e.positionInfo)==null?void 0:z.token_b)==null?void 0:y.symbol:(C=(p=e.positionInfo)==null?void 0:p.token_a)==null?void 0:C.symbol)+" - "+v(e.needReverse?(j=(V=e.positionInfo)==null?void 0:V.token_a)==null?void 0:j.symbol:(E=(ue=e.positionInfo)==null?void 0:ue.token_b)==null?void 0:E.symbol),1),($=e.positionInfo)!=null&&$.fee?(d(),w("div",yn,[bn,Ue(" "+v(((re=e.positionInfo)==null?void 0:re.fee)*100)+"% ",1)])):X("",!0),o("div",_n,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:T(uo))("poolAddress",(fe=e.positionInfo)==null?void 0:fe.id),target:"_blank"},wn,8,kn)]),o("div",$n,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:T(uo))("poolAddress",(ye=e.positionInfo)==null?void 0:ye.address),target:"_blank"},Pn,8,In)])]),o("div",Sn,[o("div",Tn,[Rn,o("div",qn,[Ue(v(e.apy)+" ",1),Q(c)])]),o("div",Bn,[Nn,o("div",Dn,"$"+v(("addCommom"in e?e.addCommom:T(P))(e.tvl,2)),1)])])]),o("div",Mn,[o("div",On,[o("div",Ln,[Fe(o("img",Fn,null,512),[[I,e.needReverse?e.getCoinIcon((Y=e.positionInfo)==null?void 0:Y.token_b):e.getCoinIcon((F=e.positionInfo)==null?void 0:F.token_a)]]),Q(m,{address:e.needReverse?(J=(_=e.positionInfo)==null?void 0:_.token_b)==null?void 0:J.address:(oe=(ee=e.positionInfo)==null?void 0:ee.token_a)==null?void 0:oe.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Un,[Fe(o("img",Vn,null,512),[[I,e.needReverse?e.getCoinIcon((de=e.positionInfo)==null?void 0:de.token_a):e.getCoinIcon((Se=e.positionInfo)==null?void 0:Se.token_b)]]),Q(m,{address:e.needReverse?(De=(he=e.positionInfo)==null?void 0:he.token_a)==null?void 0:De.address:(Ce=(Te=e.positionInfo)==null?void 0:Te.token_b)==null?void 0:Ce.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",En,v(e.needReverse?(je=(Xe=e.positionInfo)==null?void 0:Xe.token_b)==null?void 0:je.symbol:(xe=(Qe=e.positionInfo)==null?void 0:Qe.token_a)==null?void 0:xe.symbol)+" - "+v(e.needReverse?(me=(ve=e.positionInfo)==null?void 0:ve.token_a)==null?void 0:me.symbol:(Ge=(eo=e.positionInfo)==null?void 0:eo.token_b)==null?void 0:Ge.symbol),1),(He=e.positionInfo)!=null&&He.fee?(d(),w("div",Wn,[Xn,Ue(" "+v(((oo=e.positionInfo)==null?void 0:oo.fee)*100)+"% ",1)])):X("",!0)]),o("div",jn,[o("div",Gn,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:T(uo))("poolAddress",(k=e.positionInfo)==null?void 0:k.id),target:"_blank"},Jn,8,Hn)]),o("div",Zn,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:T(uo))("poolAddress",(O=e.positionInfo)==null?void 0:O.address),target:"_blank"},et,8,Kn)])]),o("div",ot,[o("div",nt,[tt,o("div",st,[Ue(v(e.apy)+" ",1),Q(c)])]),o("div",lt,[it,o("div",at,"$"+v(("addCommom"in e?e.addCommom:T(P))(e.tvl,2)),1)])])])])}const Xo=Oe(an,[["render",ut],["__scopeId","data-v-a77dba1b"]]),rt=Ve({components:{Slider:Mo},setup(){const e=A(!0),t=Je(),H=b(()=>t),G=Ze(),U=b(()=>G),D=Ke(),m=A();$e(()=>[U.value.positionInfoObj,D.params.id],([s,a])=>{s&&!Ye(s)&&a&&(m.value=s[a],console.log(m.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const c=b(()=>{var s;return(s=m.value)==null?void 0:s.needReverse}),I=s=>{var a;return(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||((a=H.value.tokensObj[s==null?void 0:s.address])==null?void 0:a.logo_url)||lo("/image/coins/sui-unknown.png")},h=b(()=>{var f,S,N;const s=(f=m==null?void 0:m.value)==null?void 0:f.price,a=(S=m==null?void 0:m.value)==null?void 0:S.minPrice,g=(N=m==null?void 0:m.value)==null?void 0:N.maxPrice;let r;if(s>=a&&s<=g){const R=new u(a).add(new u(g)).div(2).toNumber();r=s>R?50+new u(s).sub(R).div(R).toNumber():50-new u(s).sub(R).div(R).toNumber()}else s<a?(r=new u(s).sub(new u(a)).mul(100).toNumber()+15,console.log(r,"##result")):s>g&&(r=new u(s).sub(new u(g)).div(new u(g)).mul(100).toNumber()+70+15);return Number(xo(r,0))}),l=b(()=>{var f,S,N,R,z,y,p;const s=e.value?((f=m.value)==null?void 0:f.minPrice)&&M(m==null?void 0:m.value.minPrice,6):((S=m.value)==null?void 0:S.maxPrice)&&M(1/(m==null?void 0:m.value.maxPrice),6),a=e.value?((N=m.value)==null?void 0:N.maxPrice)&&M((R=m.value)==null?void 0:R.maxPrice,6):((z=m.value)==null?void 0:z.minPrice)&&M(1/(m==null?void 0:m.value.minPrice),6),g=(c.value?!e.value:e.value)?Re((y=m.value)==null?void 0:y.price,6):Re(1/((p=m.value)==null?void 0:p.price),6);let r={};return r[s]={label:"Min Price"},r[a]={label:"Max Price"},r[g]={label:"Current Price"},console.log(r,"obj###"),r}),n=b(()=>{var a,g;const s=(c.value?!e.value:e.value)?Re((a=m.value)==null?void 0:a.price,6):Re(1/((g=m.value)==null?void 0:g.price),6);return console.log(s,"result##"),s}),B=b(()=>{var a,g;const s=(c.value?!e.value:e.value)?Re((a=m.value)==null?void 0:a.price,6):Re(1/((g=m.value)==null?void 0:g.price),6);return console.log(s,"result##111"),s});return{direct:e,positionInfo:m,needReverse:c,getCoinIcon:I,decimalUi:Re,addCommom:P,sFixD:M,moveRatio:h,marks:l,currentPrice:n,currentPriceResever:B}}});const yo=e=>(Ee("data-v-45f95109"),e=e(),We(),e),dt={class:"v2-position-range"},vt={class:"position-range-top"},mt=yo(()=>o("div",null,"Position Range",-1)),ct={class:"base-coin"},pt={key:0},ft={alt:""},yt={key:1},bt={alt:""},_t={key:2},kt={key:3},ht=yo(()=>o("p",null,"Base coin",-1)),gt={class:"coin-rate"},wt=yo(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),$t=yo(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),It=[wt,$t],Ct={class:"position-range-bottom"},At={class:"price-range"},Pt={class:"price-range-bg"},St={key:0,class:"min-price"},Tt={key:0},Rt={key:1},qt={key:1,class:"max-price"},Bt={key:0},Nt={key:1},Dt={key:2,class:"current-price"},Mt={key:0,class:"min-price"},Ot={key:0},Lt={key:1},Ft={key:1,class:"max-price"},Ut={key:0},Vt={key:1},Et={key:2,class:"current-price"};function Wt(e,t,H,G,U,D){var h,l,n,B,s,a,g,r,f,S,N,R,z,y,p,C,V,j,ue,E,$,re,fe,ye;const m=po,c=io("Slider"),I=$o("image");return d(),w("div",dt,[o("div",vt,[mt,o("div",ct,[e.needReverse?(d(),w("div",yt,[Fe(o("img",bt,null,512),[[I,e.direct?e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_b):e.getCoinIcon((g=e.positionInfo)==null?void 0:g.token_a)]]),Q(m,{address:e.direct?(R=(N=e.positionInfo)==null?void 0:N.token_b)==null?void 0:R.address:(S=(f=e.positionInfo)==null?void 0:f.token_a)==null?void 0:S.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(d(),w("div",pt,[Fe(o("img",ft,null,512),[[I,e.direct?e.getCoinIcon((h=e.positionInfo)==null?void 0:h.token_a):e.getCoinIcon((l=e.positionInfo)==null?void 0:l.token_b)]]),Q(m,{address:e.direct?(B=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:B.address:(a=(s=e.positionInfo)==null?void 0:s.token_b)==null?void 0:a.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(d(),w("span",kt,v(e.direct?(j=(V=e.positionInfo)==null?void 0:V.token_b)==null?void 0:j.symbol:(E=(ue=e.positionInfo)==null?void 0:ue.token_a)==null?void 0:E.symbol),1)):(d(),w("span",_t,v(e.direct?(y=(z=e.positionInfo)==null?void 0:z.token_a)==null?void 0:y.symbol:(C=(p=e.positionInfo)==null?void 0:p.token_b)==null?void 0:C.symbol),1)),ht,o("div",gt,[o("div",{onClick:t[0]||(t[0]=F=>e.direct=!e.direct)},It)])])]),o("div",Ct,[o("div",At,[o("div",Pt,[e.direct?(d(),le(c,{key:0,value:e.currentPrice,class:"position-slider",step:1e-4,min:Number(("sFixD"in e?e.sFixD:T(M))(($=e.positionInfo)==null?void 0:$.minPrice,6)),max:Number(("sFixD"in e?e.sFixD:T(M))((re=e.positionInfo)==null?void 0:re.maxPrice,6)),marks:e.marks,disabled:!0},{mark:Ne(({label:F})=>{var Y,ee,oe,_,J,Se,de,Te,Ce,he;return[F=="Min Price"?(d(),w("div",St,[o("div",null,v(F),1),e.direct?(d(),w("div",Tt,v(((Y=e.positionInfo)==null?void 0:Y.minPrice)&&("sFixD"in e?e.sFixD:T(M))((ee=e.positionInfo)==null?void 0:ee.minPrice,6)),1)):(d(),w("div",Rt,v(((oe=e.positionInfo)==null?void 0:oe.maxPrice)&&("sFixD"in e?e.sFixD:T(M))(1/((_=e.positionInfo)==null?void 0:_.maxPrice),6)),1))])):X("",!0),F=="Max Price"?(d(),w("div",qt,[o("div",null,v(F),1),e.direct?(d(),w("div",Bt,v(((J=e.positionInfo)==null?void 0:J.maxPrice)&&("sFixD"in e?e.sFixD:T(M))((Se=e.positionInfo)==null?void 0:Se.maxPrice,6)),1)):(d(),w("div",Nt,v(((de=e.positionInfo)==null?void 0:de.minPrice)&&("sFixD"in e?e.sFixD:T(M))(1/((Te=e.positionInfo)==null?void 0:Te.minPrice),6)),1))])):X("",!0),F=="Current Price"?(d(),w("div",Dt,[o("div",null,v(F),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(d(),w(ro,{key:0},[Ue(v(("addCommom"in e?e.addCommom:T(P))(("decimalUi"in e?e.decimalUi:T(Re))((Ce=e.positionInfo)==null?void 0:Ce.price,6))),1)],64)):(d(),w(ro,{key:1},[Ue(v(("addCommom"in e?e.addCommom:T(P))(("decimalUi"in e?e.decimalUi:T(Re))(1/((he=e.positionInfo)==null?void 0:he.price),6))),1)],64))])])):X("",!0)]}),_:1},8,["value","min","max","marks"])):(d(),le(c,{key:1,value:e.currentPriceResever,class:"position-slider",step:null,min:Number(("sFixD"in e?e.sFixD:T(M))(1/((fe=e.positionInfo)==null?void 0:fe.maxPrice),6)),max:Number(("sFixD"in e?e.sFixD:T(M))(1/((ye=e.positionInfo)==null?void 0:ye.minPrice),6)),marks:e.marks,disabled:!0},{mark:Ne(({label:F})=>{var Y,ee,oe,_,J,Se,de,Te,Ce,he;return[F=="Min Price"?(d(),w("div",Mt,[o("div",null,v(F),1),e.direct?(d(),w("div",Ot,v(((Y=e.positionInfo)==null?void 0:Y.minPrice)&&("sFixD"in e?e.sFixD:T(M))((ee=e.positionInfo)==null?void 0:ee.minPrice,6)),1)):(d(),w("div",Lt,v(((oe=e.positionInfo)==null?void 0:oe.maxPrice)&&("sFixD"in e?e.sFixD:T(M))(1/((_=e.positionInfo)==null?void 0:_.maxPrice),6)),1))])):X("",!0),F=="Max Price"?(d(),w("div",Ft,[o("div",null,v(F),1),e.direct?(d(),w("div",Ut,v(((J=e.positionInfo)==null?void 0:J.maxPrice)&&("sFixD"in e?e.sFixD:T(M))((Se=e.positionInfo)==null?void 0:Se.maxPrice,6)),1)):(d(),w("div",Vt,v(((de=e.positionInfo)==null?void 0:de.minPrice)&&("sFixD"in e?e.sFixD:T(M))(1/((Te=e.positionInfo)==null?void 0:Te.minPrice),6)),1))])):X("",!0),F=="Current Price"?(d(),w("div",Et,[o("div",null,v(F),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(d(),w(ro,{key:0},[Ue(v(("addCommom"in e?e.addCommom:T(P))(("decimalUi"in e?e.decimalUi:T(Re))((Ce=e.positionInfo)==null?void 0:Ce.price,6))),1)],64)):(d(),w(ro,{key:1},[Ue(v(("addCommom"in e?e.addCommom:T(P))(("decimalUi"in e?e.decimalUi:T(Re))(1/((he=e.positionInfo)==null?void 0:he.price),6))),1)],64))])])):X("",!0)]}),_:1},8,["value","min","max","marks"]))])])])])}const jo=Oe(rt,[["render",Wt],["__scopeId","data-v-45f95109"]]),Xt=Ve({components:{Modal:tn},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const t=b(()=>{var G,U;const H=M(((G=e.positionInfo)==null?void 0:G.poolUSD)/((U=e.positionInfo)==null?void 0:U.quoteUSD)*100,0);return console.log(H,"Pool Capacity Ratio"),Number(H)});return{sFixD:M,addCommom:P,ratio:t}}});const Ao=e=>(Ee("data-v-992de09d"),e=e(),We(),e),jt=Ao(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Gt={class:"deposit-slider"},Ht={class:"info-block"},zt=Ao(()=>o("div",{class:"leabl"},"Current Deposit：",-1)),Yt={class:"text"},Jt={class:"info-block"},Zt=Ao(()=>o("div",{class:"leabl"},"Max Capacity：",-1)),Kt={class:"text"};function Qt(e,t,H,G,U,D){const m=io("Modal");return d(),le(m,{width:"440px",visible:!0,footer:null,title:"Pool Capacity",onCancel:t[0]||(t[0]=c=>e.$emit("onClose"))},{closeIcon:Ne(()=>[jt]),default:Ne(()=>{var c,I;return[o("div",Gt,[o("div",{class:"current-deposit",style:ko({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",Ht,[zt,o("div",Yt,"$"+v(("addCommom"in e?e.addCommom:T(P))(("sFixD"in e?e.sFixD:T(M))((c=e.positionInfo)==null?void 0:c.poolUSD,2))),1)]),o("div",Jt,[Zt,o("div",Kt,"$"+v(("addCommom"in e?e.addCommom:T(P))(("sFixD"in e?e.sFixD:T(M))((I=e.positionInfo)==null?void 0:I.quoteUSD,2))),1)])]}),_:1})}const Go=Oe(Xt,[["render",Qt],["__scopeId","data-v-992de09d"]]),xt=Ve({components:{AutoPoolV2PoolCapacity:Go},setup(){const e=Je(),t=b(()=>e),H=Ze(),G=b(()=>H),U=Ke(),D=A();$e(()=>[G.value.positionInfoObj,U.params.id],([h,l])=>{console.log(h,"##positionInfoObj"),h&&!Ye(h)&&l&&(D.value=h[l],console.log(D.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const m=b(()=>{var h;return(h=D.value)==null?void 0:h.needReverse}),c=h=>{var l;return console.log(h,"info##"),(h==null?void 0:h.logoURI)||(h==null?void 0:h.logo_url)||((l=t.value.tokensObj[h==null?void 0:h.address])==null?void 0:l.logo_url)||lo("/image/coins/sui-unknown.png")},I=A(!1);return{needReverse:m,positionInfo:D,getCoinIcon:c,addCommom:P,isShowModal:I}}});const es=e=>(Ee("data-v-c6233d3e"),e=e(),We(),e),os={class:"pool-composition"},ns={class:"pool-composition-top"},ts=es(()=>o("span",null,"Pool Composition",-1)),ss={class:"pool-composition-bottom"},ls={class:"token-ratio"},is={class:"before-coin"},as={alt:""},us={class:"after-coin"},rs={alt:""},ds={class:"token-num"},vs={class:"num-box"},ms={class:"num-box"};function cs(e,t,H,G,U,D){var h,l,n,B,s,a,g,r,f,S,N,R,z,y,p,C,V,j,ue,E,$,re,fe,ye,F,Y,ee,oe;const m=po,c=Go,I=$o("image");return d(),w("div",os,[o("div",ns,[ts,o("div",{class:"pool-capacity",onClick:t[0]||(t[0]=_=>e.isShowModal=!0)},"Pool Capacity")]),o("div",ss,[o("div",ls,[o("div",is,[o("div",null,[Q(m,{address:e.needReverse?(B=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:B.address:(l=(h=e.positionInfo)==null?void 0:h.token_a)==null?void 0:l.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),Fe(o("img",as,null,512),[[I,e.needReverse?e.getCoinIcon((a=e.positionInfo)==null?void 0:a.token_b):e.getCoinIcon((s=e.positionInfo)==null?void 0:s.token_a)]])]),o("span",null,v((g=e.positionInfo)==null?void 0:g.poolCoinARatio)+"%",1)]),o("div",us,[o("span",null,v((r=e.positionInfo)==null?void 0:r.poolCoinBRatio)+"%",1),o("div",null,[Fe(o("img",rs,null,512),[[I,e.needReverse?e.getCoinIcon((S=e.positionInfo)==null?void 0:S.token_a):e.getCoinIcon((f=e.positionInfo)==null?void 0:f.token_b)]]),Q(m,{address:e.needReverse?(y=(z=e.positionInfo)==null?void 0:z.token_a)==null?void 0:y.address:(R=(N=e.positionInfo)==null?void 0:N.token_b)==null?void 0:R.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",ds,[o("div",{class:"token-a-bg",style:ko({width:`${(p=e.positionInfo)==null?void 0:p.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:ko({width:`${(C=e.positionInfo)==null?void 0:C.poolCoinBRatio}%`})},null,4),o("div",vs,[o("div",null,v(("addCommom"in e?e.addCommom:T(P))((V=e.positionInfo)==null?void 0:V.poolCoinANum))+" "+v(e.needReverse?($=(E=e.positionInfo)==null?void 0:E.token_b)==null?void 0:$.symbol:(ue=(j=e.positionInfo)==null?void 0:j.token_a)==null?void 0:ue.symbol),1),o("div",null,"$"+v(("addCommom"in e?e.addCommom:T(P))((re=e.positionInfo)==null?void 0:re.poolCoinAUSD)),1)]),o("div",ms,[o("div",null,v(("addCommom"in e?e.addCommom:T(P))((fe=e.positionInfo)==null?void 0:fe.poolCoinBNum))+" "+v(e.needReverse?(ee=(Y=e.positionInfo)==null?void 0:Y.token_a)==null?void 0:ee.symbol:(F=(ye=e.positionInfo)==null?void 0:ye.token_b)==null?void 0:F.symbol),1),o("div",null,"$"+v(("addCommom"in e?e.addCommom:T(P))((oe=e.positionInfo)==null?void 0:oe.poolCoinBUSD)),1)])])]),e.isShowModal?(d(),le(c,{key:0,"position-info":e.positionInfo,onOnClose:t[1]||(t[1]=_=>e.isShowModal=!1)},null,8,["position-info"])):X("",!0)])}const Ho=Oe(xt,[["render",cs],["__scopeId","data-v-c6233d3e"]]),ps=Ve({setup(){const e=Je(),t=b(()=>e),H=Ze(),G=b(()=>H),U=Ke(),D=A();$e(()=>[G.value.positionInfoObj,U.params.id],([l,n])=>{console.log(l,"##positionInfoObj"),l&&!Ye(l)&&n&&(D.value=l[n],console.log(D.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const m=b(()=>{var l;return(l=D.value)==null?void 0:l.needReverse}),c=l=>{var n;return console.log(l,"info##"),(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||((n=t.value.tokensObj[l==null?void 0:l.address])==null?void 0:n.logo_url)||lo("/image/coins/sui-unknown.png")},I=wo(),h=b(()=>I);return{needReverse:m,positionInfo:D,getCoinIcon:c,addCommom:P,wallet:h}}});const vo=e=>(Ee("data-v-c9de826f"),e=e(),We(),e),fs={class:"my-liquidity"},ys={class:"my-liquidity-top"},bs=vo(()=>o("div",null,"My Liquidity",-1)),_s=vo(()=>o("p",null,"My share of pool",-1)),ks={class:"my-liquidity-bottom"},hs={class:"lp-token"},gs=vo(()=>o("div",null,[o("span",null,"LP Token Balance ")],-1)),ws={class:"lp-balance"},$s={class:"token-num-content"},Is={class:"token-num token-a-num"},Cs={class:"logo"},As=["src"],Ps={class:"text"},Ss={class:"lp-logo"},Ts=["src"],Rs=vo(()=>o("div",null,"Pooled Assets",-1)),qs={class:"token-num"},Bs={class:"logo"},Ns=["src"],Ds={class:"text"},Ms=vo(()=>o("div",{class:"token-num-content-bg"},null,-1));function Os(e,t,H,G,U,D){var c,I,h,l,n,B,s,a,g,r,f,S,N,R,z,y,p,C,V,j,ue,E,$,re,fe,ye,F,Y;const m=po;return d(),w("div",fs,[o("div",ys,[bs,o("div",null,[_s,o("p",null,v(e.wallet.connected?(c=e.positionInfo)==null?void 0:c.myShare:"--")+"%",1)])]),o("div",ks,[o("div",hs,[gs,o("div",null,[o("span",ws,v(e.wallet.connected?("addCommom"in e?e.addCommom:T(P))((I=e.positionInfo)==null?void 0:I.myLiquidity):"--")+" LP",1),o("span",null,"$"+v(e.wallet.connected?("addCommom"in e?e.addCommom:T(P))((h=e.positionInfo)==null?void 0:h.myLiquidityUSD):"--"),1)])]),o("div",$s,[o("div",Is,[o("div",Cs,[o("img",{src:e.needReverse?e.getCoinIcon((n=e.positionInfo)==null?void 0:n.token_b):e.getCoinIcon((l=e.positionInfo)==null?void 0:l.token_a),alt:""},null,8,As),Q(m,{address:e.needReverse?(g=(a=e.positionInfo)==null?void 0:a.token_b)==null?void 0:g.address:(s=(B=e.positionInfo)==null?void 0:B.token_a)==null?void 0:s.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",Ps,[o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:T(P))((r=e.positionInfo)==null?void 0:r.amountA):"--")+" "+v(e.needReverse?(R=(N=e.positionInfo)==null?void 0:N.token_b)==null?void 0:R.symbol:(S=(f=e.positionInfo)==null?void 0:f.token_a)==null?void 0:S.symbol),1),o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:T(P))((z=e.positionInfo)==null?void 0:z.myAmountAUSD):"--"),1)])]),o("div",Ss,[o("img",{src:e.getCoinIcon((y=e.positionInfo)==null?void 0:y.lpInfo),alt:""},null,8,Ts),Rs]),o("div",qs,[o("div",Bs,[o("img",{src:e.needReverse?e.getCoinIcon((C=e.positionInfo)==null?void 0:C.token_a):e.getCoinIcon((p=e.positionInfo)==null?void 0:p.token_b),alt:""},null,8,Ns),Q(m,{address:e.needReverse?(E=(ue=e.positionInfo)==null?void 0:ue.token_a)==null?void 0:E.address:(j=(V=e.positionInfo)==null?void 0:V.token_b)==null?void 0:j.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",Ds,[o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:T(P))(($=e.positionInfo)==null?void 0:$.amountB):"--")+" "+v(e.needReverse?(F=(ye=e.positionInfo)==null?void 0:ye.token_a)==null?void 0:F.symbol:(fe=(re=e.positionInfo)==null?void 0:re.token_b)==null?void 0:fe.symbol),1),o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:T(P))((Y=e.positionInfo)==null?void 0:Y.myAmountBUSD):"--"),1)])]),Ms])])])}const zo=Oe(ps,[["render",Os],["__scopeId","data-v-c9de826f"]]),Ls=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const Fs={},Yo=e=>(Ee("data-v-fcbc716b"),e=e(),We(),e),Us={class:"status"},Vs=Yo(()=>o("img",{src:Ls,alt:""},null,-1)),Es=Yo(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),Ws=[Vs,Es];function Xs(e,t){return d(),w("div",Us,Ws)}const Jo=Oe(Fs,[["render",Xs],["__scopeId","data-v-fcbc716b"]]),js=Ve({components:{AutoPoolAddModal:Eo,AutoPoolV2PoolStatus:Jo},setup(){const e=wo(),t=A(!1),H=fo(),G=b(()=>H),U=b(()=>G.value.chainName),D=b(()=>e),m=Ze(),c=b(()=>m),I=Je(),h=b(()=>I),l=A(),n=Ke(),B=A(!1);$e(()=>[c.value.positionInfoObj,n.params.id],([k,O])=>{k&&!Ye(k)&&O&&(l.value=k[O],console.log(l.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const s=b(()=>{var k,O;return console.log((k=l.value)==null?void 0:k.needReverse,"##positionInfo.value?.needReverse"),(O=l.value)==null?void 0:O.needReverse}),a=A(),g=A(),r=A(),f=A(),S=A(!0),N=b(()=>D.value.assets&&a.value&&D.value.assets[a.value.address]?qo(D.value.assets[a.value.address].balance,a.value.decimals):0),R=b(()=>D.value.assets&&g.value&&D.value.assets[g.value.address]?qo(D.value.assets[g.value.address].balance,g.value.decimals):0),z=k=>{k==="fromCoin"?(S.value=!0,r.value=N.value>0?a.value.symbol=="SUI"?new u(Number(N.value)).sub(new u(.05)).lt(new u(0))?"0":new u(Number(N.value)).sub(new u(.05)).toString():String(N.value):""):(S.value=!1,f.value=R.value>0?g.value.symbol=="SUI"?new u(Number(R.value)).sub(new u(.05)).lt(new u(0))?"0":new u(Number(R.value)).sub(new u(.05)).toString():String(R.value):"")},y=k=>{k==="fromCoin"?(S.value=!0,r.value=N.value>0?M(new u(Number(N.value)).div(2).toString(),a.value.decimals).toString():""):(S.value=!1,f.value=R.value>0?M(new u(Number(R.value)).div(2).toString(),g.value.decimals).toString():"")},p=b(()=>U.value?No(U.value):{}),C=b(()=>G.value.slippage),V=A("--"),j=A("--"),ue=k=>{const O=new u(l.value.autoPoolPositionInfo.liquidity),ie=new u(k.toString());if(O.toNumber()>0&&ie.toNumber()>0){const K=ie.add(O);console.log("totalLiquidity:",ie.div(K).mul(100).toString());const Ae=ie.div(K).mul(100).toNumber(),ne=nn(Ae),be=ne==-1?2:ne+2,ce=M(ie.div(K).mul(100).toNumber(),be);console.log(l.value.decimals,"##positionInfo.value.decimal");const _e=new u(1).div(new u(Math.pow(10,l.value.lpInfo.decimals))).toString();console.log(ce,_e,"###288"),Number(ce)<Number(_e)?V.value=`<${_e}`:V.value=ce}else ie.toNumber()>0&&O.toNumber()<=0?V.value="100":V.value="--"},E=k=>{const O=new u(k.toString()),ie=new u(C.value).div(100),K=O.mul(ie),Ae=O.sub(K),ne=go.get_lp_amount_by_liquidity({liquidity:l.value.liquidity,total_supply:l.value.total_supply},Ae),be=new u(Math.pow(10,l.value.lpInfo.decimals)),ce=new u(ne).div(be).toString();j.value=ce},$=A(!1),re=A(!1),fe=A(""),ye=A(),F=async()=>{if(!l.value)return;const k=l.value.autoPoolPositionInfo.tick_lower_index,O=l.value.autoPoolPositionInfo.tick_upper_index,ie=Be.sqrtPriceX64ToTickIndex(new ae(l.value.current_sqrt_price));let K=Be.tickIndexToSqrtPriceX64(k),Ae=Be.tickIndexToSqrtPriceX64(O);ie<k&&(s.value?$.value=!0:re.value=!0),ie>O&&(s.value?re.value=!0:$.value=!0);let ne;if(console.log(r.value||f.value,"#fromCoinAmount.value || toCoinAmount.value"),r.value||f.value){S.value?ne=new u(r.value).mul(Math.pow(10,a.value.decimals)).toString():ne=new u(f.value).mul(Math.pow(10,g.value.decimals)).toString();let be,ce=S.value;if(console.log("执行##"),ve.value||me.value){console.log(s.value?S.value:!S.value,"#needReverse.value?fixedFromCoin.value:!fixedFromCoin.value");const L=await Qe.calculateDepositSwapAmount({lowerTick:k,upperTick:O,curSqrtPrice:new ae(l.value.current_sqrt_price),fix_amount_a:ce,input_amount:ne,coinTypeA:l.value.autoPoolPositionInfo.coin_type_a,coinTypeB:l.value.autoPoolPositionInfo.coin_type_b,clmm_pool:l.value.address,slippage:Number(C.value)/100,decimals:ve.value?a.value.decimals:g.value.decimals});if(console.log(L,"###swapResult"),L){B.value=L.is_exceed,be=new ae(L.afterSqrtPrice),ne=new ae(L.swapOutAmount),ye.value={swap_amount:L.swapInAmount,a2b:ce},ce=!ce;const x=l.value.token_a.decimals,W=l.value.token_b.decimals;co.value=Be.sqrtPriceX64ToPrice(L.afterSqrtPrice,x,W).toString(),console.log(co.value,"##afterCurrentPrice.value");const te=new u(L.swapInAmount).div(new u(Math.pow(10,x))).toString(),ke=new u(L.swapOutAmountLimit).div(new u(Math.pow(10,W))).toString(),pe=s.value?l.value.token_b.symbol:l.value.token_a.symbol,Z=s.value?l.value.token_a.symbol:l.value.token_b.symbol;fe.value=`To deposit ${P(ve.value?r.value:f.value)} ${ve.value?pe:Z},
          ${P(te)} ${ve.value?pe:Z}  will be traded for ${P(ke)} ${ve.value?Z:pe} added to the pool.`}else be=l.value.current_sqrt_price,ne=new ae(ne),co.value=""}else B.value=!1,be=l.value.current_sqrt_price,ne=new ae(ne),co.value="",fe.value="";console.log(ye,"##swapParams");let _e,i,q;if(ie>=k&&ie<=O){const L=p.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:a.value,tokenB:g.value,lowerTick:k,upperTick:O,coinAmount:ne,iscoinA:ce,roundUp:!0,slippage:Number(C.value)/100,curSqrtPrice:new ae(be)});_e=L.liquidityAmount,i=L.tokenMaxA,q=L.tokenMaxB,!ve.value&&!me.value&&(S.value?f.value=Number(q)>0?q:"":r.value=Number(i)>0?i:"")}else ie<O?_e={liquidityAmount:en(K,Ae,ne),tokenMaxA:0,tokenMaxB:f.value}.liquidityAmount:_e={liquidityAmount:on(K,Ae,ne),tokenMaxA:r.value,tokenMaxB:0}.liquidityAmount;console.log(_e.toString(),"liquidityAmount###"),ue(_e),E(_e)}};$e(()=>l.value,k=>{k&&!Ye(k)&&(a.value=k==null?void 0:k.token_a,g.value=k==null?void 0:k.token_b,$.value=!1,re.value=!1,F())},{immediate:!0});const Y=b(()=>h.value.RATES),ee=b(()=>{var k,O,ie,K,Ae,ne,be,ce,_e,i;if((O=Y.value[(k=a.value)==null?void 0:k.address])!=null&&O.price&&((K=Y.value[(ie=g.value)==null?void 0:ie.address])!=null&&K.price)){console.log((ne=Y.value[(Ae=a.value)==null?void 0:Ae.address])==null?void 0:ne.price,"RATES.value[fromCoin.value?.address]?.price");const q=new u(r.value||0).mul(new u((ce=Y.value[(be=a.value)==null?void 0:be.address])==null?void 0:ce.price)),L=new u(f.value||0).mul(new u((i=Y.value[(_e=g.value)==null?void 0:_e.address])==null?void 0:i.price));return Re(q.add(L).toString(),2)}else return"--"});$e(()=>r.value,(k,O)=>{k?F():(V.value="--",f.value="",j.value="--")},{immediate:!0}),$e(()=>f.value,(k,O)=>{k?F():(r.value="",V.value="--",j.value="--")},{immediate:!0});const{t:oe,locale:_}=Oo(),J=b(()=>{const k=Number(r.value)>Number(N.value),O=Number(f.value)>Number(R.value);return!r.value&&!f.value?oe("button.enterAmount"):k?oe("button.insufficientBalance",{name:a.value.symbol}):O?oe("button.insufficientBalance",{name:g.value.symbol}):B.value?oe("button.insufficientLiquidity"):Number(l.value.quoteUSD)>0&&Number(ee.value)>Number(l.value.quoteUSD)?"Exceeds maximum capacity":"Add Liquidity"}),Se=b(()=>{const k=Number(r.value)>Number(N.value),O=Number(f.value)>Number(R.value);return!!(!r.value&&!f.value||k||O||r.value<=0&&f.value<=0||B.value||Ge.value!=="STATUS_RUNNING"||(console.log(ee.value,l.value.quoteUSD,"positionInfo.value.quoteUSD#"),Number(l.value.quoteUSD)>0&&Number(ee.value)>Number(l.value.quoteUSD)))}),de=A(!0),{setIsShowSuccess:Te,setIsShowRejected:Ce,setIsShowWaiting:he,setTransactionDesc:De,setTransactionTxid:Xe,setPositiomNum:je}=H,Qe=Do("Sui"),xe=async()=>{var _e,i;t.value=!1,de.value=!0,Xe("");const k=`${P(r.value)} ${(_e=a.value)==null?void 0:_e.symbol}`,O=`${P(f.value)} ${(i=g.value)==null?void 0:i.symbol}`;De(`Deposit ${r.value>0?k:""} ${f.value>0&&r.value>0?"and":""} ${f.value>0?O:""}`),he(!0);const ie=S.value,K=l.value.autoPoolPositionInfo.tick_lower_index,Ae=l.value.autoPoolPositionInfo.tick_upper_index,ne=Be.sqrtPriceX64ToTickIndex(new ae(l.value.current_sqrt_price));let be;S.value?be=new u(r.value).mul(Math.pow(10,a.value.decimals)).toString():be=new u(f.value).mul(Math.pow(10,g.value.decimals)).toString();const ce=l.value.rewarderInfo.map(q=>q.coinAddress);try{const q={lowerTick:K,upperTick:Ae,coinAmount:be,fix_amount_a:ie,slippage:Number(C.value)/100,curSqrtPrice:new ae(l.value.current_sqrt_price),id:l.value.id,clmm_pool:l.value.autoPoolPositionInfo.pool,lp_token_type:l.value.lp_token_type,coinTypeA:l.value.autoPoolPositionInfo.coin_type_a,coinTypeB:l.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:ce,swapParams:ye.value,isOnlyA:ve.value,isOnlyB:me.value,currentTickIndex:ne},L=await Qe.deposit(q);console.log(L,"===>payloadAdd11111");const x=await D.value.currentWallet.signAndExecuteTransactionBlock(L);let W=p.value.handleTx(x);if(console.log("toAdd###tx###",W),W&&W.hash){Xe(W.hash),he(!1),Te(!0),console.log(l,"===>positionInfo");const te={title:"Supplied",desc:`Deposit ${r.value>0?k:""} ${f.value>0&&r.value>0?"and":""} ${f.value>0?O:""}`,hash:W.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${r.value>0?k:""} ${f.value>0&&r.value>0?"and":""} ${f.value>0?O:""}`};U.value!=="Aptos"&&(te.res=W.res),p.value.showTransitionPending(te),await p.value.watchTransaction(te)&&setTimeout(()=>{m.updatePositionItem(l.value.id),p.value.getAccount(D.value.address)},1e3),je()}else he(!1),Ce(!0);r.value="",f.value="",de.value=!1}catch(q){r.value="",f.value="",console.log("addError###",q),de.value=!1,he(!1),Ce(!0)}},ve=A(!1),me=A(!1),eo=k=>{r.value="",f.value="",fe.value="",k=="only-a"?(ve.value=!ve.value,me.value=!1):(me.value=!me.value,ve.value=!1)},Ge=b(()=>c.value.currentAutoPoolStatus),He=A(),oo=()=>{He.value=window.setInterval(()=>{(r.value||f.value)&&F()},2e4)};return Io(()=>{oo()}),Co(()=>{window.clearInterval(He.value)}),{currentAutoPoolStatus:Ge,wallet:D,positionInfo:l,isShowAddModal:t,needReverse:s,fromCoin:a,toCoin:g,fromCoinAmount:r,toCoinAmount:f,fromCoinBlance:N,toCoinBlance:R,fixedFromCoin:S,maxBtnSelect:z,halfBtnSelect:y,totalAmountUSD:ee,addCommom:P,shareOfPool:V,minimumReceivedLP:j,addLiquidityBtnText:J,addLiquidityBtnDisabled:Se,toAdd:xe,showToCoinLock:re,showFromCoinLock:$,isOnlyA:ve,isOnlyB:me,onlyToken:eo,onlyText:fe}}});const ao=e=>(Ee("data-v-5c595870"),e=e(),We(),e),Gs={class:"auto-pool-add"},Hs={class:"auto-pool-add-content"},zs={class:"liquidity-action-tab"},Ys=ao(()=>o("div",{class:"increase tab-active"},"Add",-1)),Js={class:"only-token"},Zs=ao(()=>o("div",null,"Deposit Amounts",-1)),Ks={key:0},Qs={key:0},xs={key:0,class:"card-item"},el={key:1,class:"card-item"},ol=ao(()=>o("span",null,"Pool Closed",-1)),nl={class:"add-info"},tl={key:0,class:"only-text"},sl={class:"total-amount"},ll=ao(()=>o("span",null,"Total Amount",-1)),il={class:"total-amount"},al=ao(()=>o("span",null,"Share of Pool",-1)),ul={class:"total-amount"},rl=ao(()=>o("span",null,"Minimum Received LP",-1));function dl(e,t,H,G,U,D){var n,B,s,a,g,r,f,S,N,R,z,y,p;const m=Uo,c=Vo,I=io("AutoPoolV2PoolStatus"),h=Fo,l=Eo;return d(),w("div",Gs,[o("div",Hs,[o("div",zs,[Ys,o("div",{class:"remove",onClick:t[0]||(t[0]=Lo(C=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",Js,[Zs,o("div",null,[o("div",{class:"only-a",onClick:t[1]||(t[1]=C=>e.onlyToken("only-a"))},[o("p",null,[e.isOnlyA?(d(),w("span",Ks)):X("",!0)]),o("span",null,v(e.needReverse?(a=(s=e.positionInfo)==null?void 0:s.token_b)==null?void 0:a.symbol:(B=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:B.symbol)+" only",1)]),o("div",{class:"only-b",onClick:t[2]||(t[2]=C=>e.onlyToken("only-b"))},[o("p",null,[e.isOnlyB?(d(),w("span",Qs)):X("",!0)]),o("span",null,v(e.needReverse?(S=(f=e.positionInfo)==null?void 0:f.token_a)==null?void 0:S.symbol:(r=(g=e.positionInfo)==null?void 0:g.token_b)==null?void 0:r.symbol)+" only",1)])])]),o("div",{class:ho(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(d(),w("div",xs,[Q(m,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[3]||(t[3]=C=>e.fromCoinAmount=C),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[4]||(t[4]=C=>e.maxBtnSelect("fromCoin")),onOnHalf:t[5]||(t[5]=C=>e.halfBtnSelect("fromCoin")),onOnInput:t[6]||(t[6]=C=>{e.fromCoinAmount=C}),onOnFocus:t[7]||(t[7]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(d(),le(c,{key:0})):X("",!0)])):X("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(d(),w("div",el,[Q(m,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[8]||(t[8]=C=>e.toCoinAmount=C),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[9]||(t[9]=C=>e.maxBtnSelect("toCoin")),onOnHalf:t[10]||(t[10]=C=>e.halfBtnSelect("toCoin")),onOnInput:t[11]||(t[11]=C=>{e.toCoinAmount=C}),onOnFocus:t[12]||(t[12]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(d(),le(c,{key:0})):X("",!0)])):X("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(d(),le(I,{key:0})):X("",!0),(N=e.positionInfo)!=null&&N.is_pause?(d(),le(h,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:Ne(()=>[ol]),_:1})):e.wallet.connected?(d(),le(h,{key:2,class:"big-btn liquidity-btn",disabled:e.addLiquidityBtnDisabled,onClick:t[13]||(t[13]=C=>e.isShowAddModal=!0)},{default:Ne(()=>[o("span",null,v(e.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(d(),le(h,{key:3,class:"big-btn liquidity-btn",onClick:t[14]||(t[14]=C=>e.wallet.setIsShowWalletModal(!0))},{default:Ne(()=>[o("span",null,v(e.$t("button.connectWallet")),1)]),_:1})),o("div",nl,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount||e.isOnlyB&&e.toCoinAmount)?(d(),w("div",tl,v(e.onlyText),1)):X("",!0),o("div",sl,[ll,o("span",null,"$"+v(("addCommom"in e?e.addCommom:T(P))(e.totalAmountUSD)),1)]),o("div",il,[al,o("span",null,v(e.shareOfPool)+"%",1)]),o("div",ul,[rl,o("span",null,v(("addCommom"in e?e.addCommom:T(P))(e.minimumReceivedLP))+" "+v(e.needReverse?(R=e.toCoin)==null?void 0:R.symbol:(z=e.fromCoin)==null?void 0:z.symbol)+"-"+v(e.needReverse?(y=e.fromCoin)==null?void 0:y.symbol:(p=e.toCoin)==null?void 0:p.symbol),1)])]),e.isShowAddModal?(d(),le(l,{key:4,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:t[15]||(t[15]=C=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):X("",!0)])}const vl=Oe(js,[["render",dl],["__scopeId","data-v-5c595870"]]),ml=Ve({components:{AutoPoolRemoveModal:Wo,AutoPoolV2PoolStatus:Jo},setup(){const e=wo(),t=b(()=>e),H=fo(),G=b(()=>H),U=b(()=>G.value.slippage),D=b(()=>G.value.chainName),m=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],c=A(25),I=Ke(),h=Ze(),l=b(()=>h),n=b(()=>(console.log(l.value.positionInfoObj[I.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),l.value.positionInfoObj[I.params.id])),B=b(()=>{var i;return(i=n.value)==null?void 0:i.needReverse}),s=A(),a=A(),g=A(!1),r=A(),f=b(()=>{var i;return(i=n.value)==null?void 0:i.myLiquidity}),S=A(!0),N=b(()=>D.value?No(D.value):{}),R=A(),z=Do("Sui"),y=A(""),p=A(""),C=A("--"),V=A(!1),j=A(!1),ue=A(),E=A(!0),$=A(),re=Je(),fe=b(()=>re),ye=b(()=>fe.value.RATES),F=async()=>{if(S.value||!n.value)return;const i=n.value.autoPoolPositionInfo.tick_lower_index,q=n.value.autoPoolPositionInfo.tick_upper_index,L=Be.sqrtPriceX64ToTickIndex(new ae(n.value.current_sqrt_price));L<i&&(B.value?V.value=!0:j.value=!0),L>q&&(B.value?j.value=!0:V.value=!0);let x;if(console.log(y.value||p.value,"#fromCoinAmount.value || toCoinAmount.value"),y.value||p.value){E.value?x=new u(y.value).mul(Math.pow(10,s.value.decimals)).toString():x=new u(p.value).mul(Math.pow(10,a.value.decimals)).toString();let W,te=E.value;if(_.value||J.value){const se=await z.calculateRemoveSwapAmount({lowerTick:i,upperTick:q,curSqrtPrice:new ae(n.value.current_sqrt_price),fix_amount_a:te,receiveAmount:x,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:0,decimals:_.value?s.value.decimals:a.value.decimals});if(console.log(se,"###swapResult"),se){R.value=se.is_exceed,x=new ae(se.swapOutAmount),W=n.value.current_sqrt_price,ue.value={swap_amount:se.swapInAmount,liquidity:se.liquidity,a2b:!te},te=!te;const Me=n.value.token_a.decimals,ze=n.value.token_b.decimals,we=new u(se.swapInAmount).div(new u(Math.pow(10,Me))).toString(),no=new u(se.swapOutAmountLimit).div(new u(Math.pow(10,ze))).toString(),ge=B.value?n.value.token_b.symbol:n.value.token_a.symbol,Pe=B.value?n.value.token_a.symbol:n.value.token_b.symbol;$.value=y.value==K.value||p.value==K.value?`To withdraw ${P(_.value?y.value:p.value)} ${_.value?ge:Pe},
          ${P(_.value?n.value.amountB:n.value.amountA)} ${_.value?Pe:ge} 
           in the pool will be traded for ${we} ${_.value?ge:Pe}`:`To withdraw ${P(_.value?y.value:p.value)} ${_.value?ge:Pe},
          ${P(we)} ${_.value?Pe:ge}  in the pool will be traded for ${P(no)} ${_.value?ge:Pe}`}else W=n.value.current_sqrt_price,x=new ae(x),$.value=""}else R.value=!1,W=n.value.current_sqrt_price,x=new ae(x);console.log(W,"##curSqrtPrice"),console.log("执行了吗##");const{liquidityAmount:ke,tokenMaxA:pe,tokenMaxB:Z}=N.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:s.value,tokenB:a.value,lowerTick:i,upperTick:q,coinAmount:x,iscoinA:te,roundUp:!1,slippage:Number(U.value)/100,curSqrtPrice:new ae(W)});if(console.log(n.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(Z.toString(),pe.toString(),n.value,"###323"),!_.value&&!J.value&&(E.value?p.value=Number(Z)>0?Z:"":y.value=Number(pe)>0?pe:""),(_.value||J.value)&&(y.value==K.value||p.value==K.value)){r.value=n.value.myLiquidity;const se=new u(100);C.value=new u(n.value.myLiquidity).mul(new u(Math.pow(10,n.value.lpInfo.decimals))).toString(),Y.value=ke.toString(),c.value=se.toNumber()}else{const se=go.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},ke.toString());r.value=new u(se).div(new u(Math.pow(10,n.value.lpInfo.decimals))).toString();const Me=new u(r.value).div(new u(f.value)).mul(100);console.log(r.value,f.value,"####lpBalance.value"),C.value=se,Y.value=ke.toString(),c.value=Me.toNumber()}}},Y=A(),ee=b(()=>{var i;return(i=n==null?void 0:n.value)==null?void 0:i.amountA}),oe=b(()=>{var i;return(i=n==null?void 0:n.value)==null?void 0:i.amountB}),_=A(!1),J=A(!1),Se=b(()=>{var te,ke,pe,Z;const i=(ke=ye.value[(te=s==null?void 0:s.value)==null?void 0:te.address])==null?void 0:ke.price,q=(Z=ye.value[(pe=a==null?void 0:a.value)==null?void 0:pe.address])==null?void 0:Z.price;console.log(i,q,y.value,p.value,"####totalWithdraw");let L=y.value!=="--"&&y.value!==""?y.value:0,x=p.value!=="--"&&p.value!==""?p.value:0,W;return i&&q&&(_.value||J.value?W=new u(_.value?L:x).mul(new u(_.value?i:q)).toString():(W=new u(L).mul(new u(i)).add(new u(x).mul(new u(q))).toString(),console.log(W,"result##"))),W>0&&W<.01?"<$0.01":`$${P(M(W,2))}`}),de=async i=>{var Me,ze,we,no,ge,Pe,bo,Po,So,To;if(!S.value)return;S.value=!0,(ze=(Me=n.value)==null?void 0:Me.token_a)==null||ze.decimals,(no=(we=n.value)==null?void 0:we.token_b)==null||no.decimals;const q=(ge=n.value)==null?void 0:ge.tick_lower_index,L=(Pe=n.value)==null?void 0:Pe.tick_upper_index;Be.tickIndexToSqrtPriceX64(q),Be.tickIndexToSqrtPriceX64(L);const x=(Po=(bo=n.value)==null?void 0:bo.autoPoolPositionInfo)==null?void 0:Po.tick_lower_index,W=(To=(So=n.value)==null?void 0:So.autoPoolPositionInfo)==null?void 0:To.tick_upper_index,te=Be.sqrtPriceX64ToTickIndex(new ae(n.value.current_sqrt_price));te<x&&(B.value?V.value=!0:j.value=!0),te>W&&(B.value?j.value=!0:V.value=!0);let ke="",pe,Z;console.log(i.value,"##item.value"),console.log(Z,"##coinAmount");let se=E.value;if(console.log("执行##"),_.value||J.value&&!V.value&&!j.value){if(_.value){const Le=new u(K.value).mul(Math.pow(10,s.value.decimals)).mul(i.value).toString();console.log(Le,"##amount"),Z=M(Le,0),y.value=M(new u(K.value).mul(i.value).toString(),s.value.decimals)}if(J.value){const Le=new u(K.value).mul(i.value).mul(Math.pow(10,a.value.decimals)).toString();Z=M(Le,0),p.value=M(new u(K.value).mul(i.value).toString(),a.value.decimals)}console.log(y.value,"##fromCoinAmount.value");const qe=await z.calculateRemoveSwapAmount({lowerTick:q,upperTick:L,curSqrtPrice:new ae(n.value.current_sqrt_price),fix_amount_a:se,receiveAmount:Z,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:0,decimals:_.value?s.value.decimals:a.value.decimals});if(console.log(qe,"###swapResult536"),qe){R.value=qe.is_exceed,Z=new ae(qe.swapOutAmount),n.value.current_sqrt_price,ue.value={swap_amount:qe.swapInAmount,liquidity:qe.liquidity,a2b:!se},se=!se;const Le=n.value.token_a.decimals,Zo=n.value.token_b.decimals,Ko=new u(qe.swapInAmount).div(new u(Math.pow(10,Le))).toString(),Ro=new u(qe.swapOutAmountLimit).div(new u(Math.pow(10,Zo))).toString(),to=B.value?n.value.token_b.symbol:n.value.token_a.symbol,so=B.value?n.value.token_a.symbol:n.value.token_b.symbol;$.value=i.value==1?`To withdraw ${P(_.value?y.value:p.value)} ${_.value?to:so},
          ${P(_.value?n.value.amountB:n.value.amountA)} ${_.value?so:to}  in the pool will be traded for ${P(Ro)} ${_.value?to:so}`:`To withdraw ${P(_.value?y.value:p.value)} ${_.value?to:so},
          ${P(Ko)} ${_.value?so:to}  in the pool will be traded for ${P(Ro)} ${_.value?to:so}`,ke=qe.liquidity}else n.value.current_sqrt_price,Z=new ae(Z),$.value="";console.log(pe,"result###"),C.value=new u(n.value.myLiquidity).mul(new u(i.value)).toString(),console.log(n.value,n.value.liquidity,ke,C.value,"###positionInfo.value.liquidity"),console.log(C.value,"##lpTokenAmount.value"),r.value=new u(C.value),Y.value=ke}else{R.value=!1;const qe=new u(ee.value).mul(Math.pow(10,s.value.decimals)).mul(i.value).toString();Z=M(qe,0),y.value=M(new u(ee.value).mul(i.value).toString(),s.value.decimals);const Le=new u(oe.value).mul(i.value).mul(Math.pow(10,a.value.decimals)).toString();Z=M(Le,0),p.value=M(new u(oe.value).mul(i.value).toString(),a.value.decimals),n.value.current_sqrt_price,Z=new ae(Z),i.value!==1?pe=new u(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(i.value).toString():pe=new u(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),r.value=new u(pe).div(Math.pow(10,n.value.lpInfo.decimals)),ke=go.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},pe),C.value=M(pe,0),Y.value=M(ke,0),console.log(ke,"###newLiquidity525")}};$e(c,_o((i,q)=>{i!==q&&(Number(i)>100?c.value=100:i&&n.value?(console.log("687===>"),c.value=i,de({value:c.value/100})):(y.value="",p.value=""))},300)),$e(()=>y.value,_o((i,q)=>{i?F():(p.value="",c.value=0)},500),{immediate:!0}),$e(()=>p.value,_o((i,q)=>{i?F():(y.value="",c.value=0)},500),{immediate:!0});const Te=sn(),{setIsShowSuccess:Ce,setIsShowRejected:he,setIsShowWaiting:De,setTransactionDesc:Xe,setTransactionTxid:je,setPositiomNum:Qe,setTransactionDescText:xe}=H,ve=A(!1),{t:me}=Oo(),eo=async()=>{var Me,ze;ve.value=!0,je("");const i=Number(y.value)>0?`${P(y.value,s.value.decimals)} ${s.value.symbol}`:"",q=Number(p.value)>0?`${P(p.value,a.value.decimals)} ${a.value.symbol}`:"";console.log(i,q,"###transactionDescTo"),Xe(me("tips.removeLiquidiyText",{from:B.value?q:i,and:Number(y.value)>0&&Number(p.value)>0?"and":"",to:B.value?i:q})),De(!0);const L=me("modal.removeLiquidityText2");xe(L);const x=n.value.autoPoolPositionInfo.tick_lower_index,W=n.value.autoPoolPositionInfo.tick_upper_index,te=Be.tickIndexToSqrtPriceX64(x),ke=Be.tickIndexToSqrtPriceX64(W),pe=n.value.rewarderInfo.map(we=>we.coinAddress);console.log(C.value,"##lpTokenAmount.value431");let Z;E.value?Z=new u(y.value).mul(Math.pow(10,s.value.decimals)).toString():Z=new u(p.value).mul(Math.pow(10,a.value.decimals)).toString(),console.log();const se={lowerSqrtPrice:te,upperSqrtPrice:ke,lpTokenAmount:C.value,liquidity:Y.value,curSqrtPrice:new ae(n.value.object.current_sqrt_price),slippage:Number(U.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.pool,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:pe,swapParams:ue.value,fix_amount_a:E.value,isOnlyA:!V.value&&!j.value?_.value:!1,isOnlyB:!j.value&&!V.value?J.value:!1,lowerTick:x,upperTick:W,receiveAmount:Z,sliderVal:c.value,positionInfo:n.value};try{const we=await z.remove(se);console.log(we,"移除流动性payload");const no=await t.value.currentWallet.signAndExecuteTransactionBlock(we);let ge=N.value.handleTx(no);if(console.log("0331###remove###tx####",ge),ge&&ge.hash){je(ge.hash),De(!1),Ce(!0);const Pe={title:me("common.removeLiquidity"),desc:"",hash:ge.hash,descTransactions:`Remove ${i} ${Number(y.value)>0&&Number(p.value)>0?"and":""} ${q} from the pool`,sender:t.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${y.value} ${(Me=s.value)==null?void 0:Me.symbol} and ${p.value} ${(ze=a.value)==null?void 0:ze.symbol}`};Pe.res=ge.res,N.value.showTransitionPending(Pe),await N.value.watchTransaction(Pe)&&(y.value="",p.value="",r.value="",c.value=0,setTimeout(()=>{h.updatePositionItem(n.value.id),N.value.getAccount(t.value.address)},1e3),Number(c.value)==100&&I.name=="auto-pool-detail"&&Te.push("/pool/auto"))}else De(!1),he(!0);ve.value=!1}catch(we){console.log("Remove error",we),ve.value=!1,De(!1),he(!0)}};$e(()=>n.value,(i,q)=>{i&&!Ye(i)&&(s.value=i==null?void 0:i.token_a,a.value=i==null?void 0:i.token_b,console.log("触发###"),(!q||q&&q.address!==i.address)&&(c.value=c.value>0?c.value:25,de({value:c.value/100})))},{immediate:!0});const Ge=b(()=>{const i=Number(r.value)>Number(f.value);return!y.value&&!p.value||!r.value||r.value<=0||!y.value&&_.value||!p.value&&J.value?me("button.enterAmount"):i?"Invalid Amount":R.value?me("button.insufficientLiquidity"):me("button.remove")}),He=b(()=>{const i=Number(r.value)>Number(f.value);return!!(!y.value&&!p.value||Number(y.value)<=0&&_.value||Number(p.value)<=0&&J.value||!r.value||r.value<=0||i||R.value||be.value!=="STATUS_RUNNING")}),oo=i=>(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||lo("/image/coins/sui-unknown.png"),k=i=>{y.value="",p.value="",S.value=!0,$.value="",i=="only-a"?(_.value=!_.value,J.value=!1,E.value=!0):(J.value=!J.value,_.value=!1,E.value=!1)},O=i=>{S.value=!0,c.value=100,i==="fromCoin"?E.value=!0:E.value=!1},ie=i=>{S.value=!0,c.value=50,i==="fromCoin"?E.value=!0:E.value=!1},K=A(),Ae=async()=>{E.value;const i=n.value.token_a.decimals,q=n.value.token_b.decimals,L=_.value?oe.value:ee.value;console.log(L,"###receiveAmount");const x=_.value?a.value.address===n.value.token_a.address:s.value.address===n.value.token_a.address;if(_.value||J.value){console.log(L,"##receiveAmount");let W=await N.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:x,byAmountIn:!0,amount:L});console.log(W,W.estimatedAmountOut,i,q,"##preSwapRes");const te=new u(W.estimatedAmountOut);K.value=te.sub(te.mul(Number(U.value)/100)).add(new u(_.value?ee.value:oe.value)).toString(),console.log(K.value,"###onlyTokenBalance.value"),de({value:c.value/100})}};$e(()=>[_.value,J.value,ee.value,oe.value],([i,q])=>{i||q?Ae():de({value:c.value/100})},{immediate:!0});const ne=i=>`${i}%`,be=b(()=>l.value.currentAutoPoolStatus),ce=A(),_e=()=>{ce.value=window.setInterval(()=>{(y.value||p.value)&&!S.value?F():de({value:c.value/100})},2e4)};return Io(()=>{_e()}),Co(()=>{window.clearInterval(ce.value)}),{removeLiquidityBtnText:Ge,removeLiquidityBtnDisabled:He,wallet:t,ratioArr:m,positionInfo:n,isShowRemoveModal:g,needReverse:B,fromCoin:s,toCoin:a,lpAmount:r,lpBalance:f,sliderVal:c,sFixD:M,isSlider:S,fromCoinAmount:y,toCoinAmount:p,setPercent:de,toRemove:eo,addCommom:P,getCoinIcon:oo,isOnlyA:_,isOnlyB:J,onlyToken:k,fixedFromCoin:E,maxBtnSelect:O,halfBtnSelect:ie,fromCoinBlance:ee,toCoinBlance:oe,showFromCoinLock:V,showToCoinLock:j,removeText:$,onlyTokenBalance:K,totalWithdraw:Se,formatter:ne,currentAutoPoolStatus:be}}});const mo=e=>(Ee("data-v-80ff9a2a"),e=e(),We(),e),cl={class:"auto-pool-add"},pl={class:"auto-pool-add-content"},fl={class:"liquidity-action-tab"},yl=mo(()=>o("div",{class:"remove tab-active"},"Remove",-1)),bl={key:0,class:"only-token"},_l=mo(()=>o("div",null,"Deposit Amounts",-1)),kl={key:0},hl={key:0},gl={key:0,class:"card-item"},wl={key:1,class:"card-item"},$l={class:"remove-ratio"},Il={class:"remove-ratio-select"},Cl={key:0,class:"ratio"},Al={key:1,class:"ratio"},Pl={class:"ratio-list"},Sl=["onClick"],Tl=mo(()=>o("span",null,"Pool Closed",-1)),Rl={key:4,class:"remove-info"},ql={key:0,class:"remove-text total-amount"},Bl={class:"total-amount"},Nl=mo(()=>o("span",null,"Total Withdraw",-1)),Dl={class:"total-amount"},Ml=mo(()=>o("span",null,"LP Burn Amount",-1)),Ol={key:0},Ll={key:1};function Fl(e,t,H,G,U,D){var B,s,a,g,r,f,S,N,R,z,y,p,C,V,j,ue,E;const m=Uo,c=Vo,I=Mo,h=io("AutoPoolV2PoolStatus"),l=Fo,n=Wo;return d(),w("div",cl,[o("div",pl,[o("div",fl,[o("div",{class:"increase",onClick:t[0]||(t[0]=Lo($=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),yl]),!e.showFromCoinLock&&!e.showToCoinLock?(d(),w("div",bl,[_l,o("div",null,[o("div",{class:"only-a",onClick:t[1]||(t[1]=$=>e.onlyToken("only-a"))},[o("p",null,[e.isOnlyA?(d(),w("span",kl)):X("",!0)]),o("span",null,v(e.needReverse?(g=(a=e.positionInfo)==null?void 0:a.token_b)==null?void 0:g.symbol:(s=(B=e.positionInfo)==null?void 0:B.token_a)==null?void 0:s.symbol)+" only",1)]),o("div",{class:"only-b",onClick:t[2]||(t[2]=$=>e.onlyToken("only-b"))},[o("p",null,[e.isOnlyB?(d(),w("span",hl)):X("",!0)]),o("span",null,v(e.needReverse?(N=(S=e.positionInfo)==null?void 0:S.token_a)==null?void 0:N.symbol:(f=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:f.symbol)+" only",1)])])])):X("",!0),o("div",{class:ho(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(d(),w("div",gl,[Q(m,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[3]||(t[3]=$=>e.fromCoinAmount=$),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:t[4]||(t[4]=$=>e.maxBtnSelect("fromCoin")),onOnHalf:t[5]||(t[5]=$=>e.halfBtnSelect("fromCoin")),onOnInput:t[6]||(t[6]=$=>{e.isSlider=!1,e.fromCoinAmount=$}),onOnFocus:t[7]||(t[7]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(d(),le(c,{key:0})):X("",!0)])):X("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(d(),w("div",wl,[Q(m,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[8]||(t[8]=$=>e.toCoinAmount=$),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:t[9]||(t[9]=$=>e.maxBtnSelect("toCoin")),onOnHalf:t[10]||(t[10]=$=>e.halfBtnSelect("toCoin")),onOnInput:t[11]||(t[11]=$=>{e.isSlider=!1,e.toCoinAmount=$}),onOnFocus:t[12]||(t[12]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(d(),le(c,{key:0})):X("",!0)])):X("",!0)],2),o("div",$l,[o("div",Il,[Number(e.lpBalance)>=Number(e.lpAmount)?(d(),w("div",Cl,v(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:T(M))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:T(M))(e.sliderVal,2))+"% ",1)):(d(),w("div",Al,"--")),o("div",Pl,[(d(!0),w(ro,null,ln(e.ratioArr,($,re)=>(d(),w("div",{key:re,class:ho(["ratio-item",e.sliderVal==$.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=$.value}},v($.name),11,Sl))),128))])]),Q(I,{value:e.sliderVal,"onUpdate:value":t[13]||(t[13]=$=>e.sliderVal=$),"tip-formatter":e.formatter,onChange:t[14]||(t[14]=$=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(d(),le(h,{key:0})):X("",!0),(R=e.positionInfo)!=null&&R.is_pause?(d(),le(l,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:Ne(()=>[Tl]),_:1})):e.wallet.connected?(d(),le(l,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:t[15]||(t[15]=$=>e.toRemove())},{default:Ne(()=>[o("span",null,v(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(d(),le(l,{key:3,class:"big-btn liquidity-btn",onClick:t[16]||(t[16]=$=>e.wallet.setIsShowWalletModal(!0))},{default:Ne(()=>[o("span",null,v(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?X("",!0):(d(),w("div",Rl,[e.removeText&&(e.isOnlyA&&e.fromCoinAmount||e.isOnlyB&&e.toCoinAmount)?(d(),w("div",ql,v(e.removeText),1)):X("",!0),o("div",Bl,[Nl,o("span",null,v(e.totalWithdraw),1)]),o("div",Dl,[Ml,e.fromCoinAmount||e.toCoinAmount?(d(),w("span",Ol,v(("addCommom"in e?e.addCommom:T(P))(e.lpAmount))+" "+v(e.needReverse?(z=e.toCoin)==null?void 0:z.symbol:(y=e.fromCoin)==null?void 0:y.symbol)+"-"+v(e.needReverse?(p=e.fromCoin)==null?void 0:p.symbol:(C=e.toCoin)==null?void 0:C.symbol),1)):(d(),w("span",Ll,"0 "+v(e.needReverse?(V=e.toCoin)==null?void 0:V.symbol:(j=e.fromCoin)==null?void 0:j.symbol)+"-"+v(e.needReverse?(ue=e.fromCoin)==null?void 0:ue.symbol:(E=e.toCoin)==null?void 0:E.symbol),1))])])),e.isShowRemoveModal?(d(),le(n,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:t[17]||(t[17]=$=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):X("",!0)])}const Ul=Oe(ml,[["render",Fl],["__scopeId","data-v-80ff9a2a"]]),Vl=Ve({components:{AutoPoolV2Info:Xo,AutoPoolV2PositionRange:jo,AutoPoolV2PoolComposition:Ho,AutoPoolV2PoolLiquidity:zo,AutoPoolV2PoolAdd:vl,AutoPoolV2PoolRemove:Ul},setup(){const e=Ze();Je();const t=fo();b(()=>t);const H=()=>{e.getAutoPoolAPY(),e.getVault(U.params.id)},G=A(),U=Ke();$e(()=>U.query.action,c=>{c&&(G.value=c)},{immediate:!0});const D=A(),m=()=>{D.value=window.setInterval(()=>{e.getVault(U.params.id)},6e4)};return Io(()=>{console.log(U,"route##"),m()}),Co(()=>{window.clearInterval(D.value)}),{clickRefresh:H,currentTab:G}}});const El={class:"auto-pool-detail-v2"},Wl={class:"detail-top"},Xl={class:"detail-bottom pc-detail"},jl={class:"detail-bottom-left"},Gl={class:"detail-bottom-right"},Hl={class:"h5-detail"};function zl(e,t,H,G,U,D){const m=Qo,c=Xo,I=jo,h=Ho,l=zo,n=io("AutoPoolV2PoolAdd"),B=io("AutoPoolV2PoolRemove");return d(),w("div",El,[o("div",Wl,[Q(m,{onClickRefresh:e.clickRefresh},null,8,["onClickRefresh"]),Q(c)]),o("div",Xl,[o("div",jl,[Q(I),Q(h),Q(l)]),o("div",Gl,[e.currentTab=="add"?(d(),le(n,{key:0,onChangeCurrentTab:t[0]||(t[0]=s=>e.currentTab="remove")})):(d(),le(B,{key:1,onChangeCurrentTab:t[1]||(t[1]=s=>e.currentTab="add")}))])]),o("div",Hl,[e.currentTab=="add"?(d(),le(n,{key:0,onChangeCurrentTab:t[2]||(t[2]=s=>e.currentTab="remove")})):(d(),le(B,{key:1,onChangeCurrentTab:t[3]||(t[3]=s=>e.currentTab="add")})),Q(I),Q(h),Q(l)])])}const ki=Oe(Vl,[["render",zl],["__scopeId","data-v-7345b955"]]);export{ki as default};
