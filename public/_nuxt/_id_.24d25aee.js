import{_ as Le}from"./new-position-title.1a0fa3ad.js";import{_ as ve}from"./token-warning.971d9059.js";import{_ as he}from"./auto-pool-apy-tips.05284f72.js";import{u as Go,a as $,g as le,c as Xo,f as De,d as ee,s as G,p as be,b as ke,T as So,e as oo,h as Ue,i as Fe,j as Ve}from"./pool.3a9b2758.js";import{u as me,a as fe}from"./sha256.334e45a8.js";import{u as Ho,a as ge}from"./autoPool.9c5eea3b.js";import{i as te}from"./import-icon.de3e6c66.js";import{a as Do,l as b,m as zo,r as C,q as $o,e as No,s as ye,o as v,f as T,h as e,t as Oo,i as Y,v as d,j as re,x as eo,u as M,p as Uo,k as Fo,y as ne,M as Ee,z as ie,c as so,w as Lo,A as $e,C as we,D as ce,B as Ie,E as We,b as je,F as Xe,G as Ge,H as He,I as ze,J as Ye}from"./entry.46186212.js";import"./decimal.633e31ee.js";import{D as i}from"./decimal.0e8aa3f1.js";import{_ as Ce}from"./assets-card.5c794b8a.js";import{_ as Ae}from"./coin-lock.22fffcf4.js";import{_ as Pe,a as Se}from"./auto-pool-remove-modal.8c139d14.js";import{afterCurrentPrice as de}from"./data.9b2fa4a2.js";import{V as pe}from"./index.bd4a0260.js";/* empty css              *//* empty css              */import"./back.28e653a7.js";import"./swap-setting.03ce7be6.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.a454e602.js";const Je=Do({components:{AutoPoolApyTips:he},setup(){const o=me(),s=b(()=>o),H=Go(),W=b(()=>H),j=Ho(),S=b(()=>j),_=b(()=>s.value.theme),p=zo(),A=C();$o(()=>[S.value.positionInfoObj,p.params.id],([a,u])=>{a&&!Xo(a)&&u&&(A.value=a[u],console.log(A.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const f=b(()=>{var a;return(a=A.value)==null?void 0:a.needReverse}),t=a=>{var u;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((u=W.value.tokensObj[a==null?void 0:a.address])==null?void 0:u.logo_url)||(_.value==="default"?te("/image/coins/unknown.png"):te("/image/coins/sui-unknown.png"))},n=b(()=>{var a,u;return S.value.apyObj&&((u=S.value.apyObj[(a=A.value)==null?void 0:a.id])==null?void 0:u.tvl)||"--"}),I=b(()=>{var a,u;return S.value.apyObj&&((u=S.value.apyObj[(a=A.value)==null?void 0:a.id])==null?void 0:u.apr)||"--"});return{positionInfo:A,needReverse:f,getCoinIcon:t,tvl:n,apy:I,addCommom:$,getExplorerUrl:le}}});const wo=o=>(Uo("data-v-204ed24b"),o=o(),Fo(),o),Ze={class:"auto-pool-v2-info"},Ke={class:"pool-info"},Qe={class:"left"},xe={class:"coin-a"},on={alt:""},en={class:"coin-b"},nn={alt:""},tn={class:"position-name"},sn={key:0,class:"pool-fee"},ln=wo(()=>e("span",null,"Fee tier",-1)),an={class:"vault-address"},un=["href"],rn=wo(()=>e("span",null,"Vault Address",-1)),dn=wo(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),vn=[rn,dn],mn={class:"pool-address"},cn=["href"],pn=wo(()=>e("span",null,"Pool Address",-1)),fn=wo(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),yn=[pn,fn],_n={class:"apy-and-tvl"},bn={class:"apy"},hn=wo(()=>e("div",{class:"apy-title"},"APY",-1)),kn={class:"apy-text"},gn={class:"tvl"},$n=wo(()=>e("div",{class:"tvl-title"},"TVL",-1)),wn={class:"tvl-text"},In={class:"pool-info h5-pool-info"},Cn={class:"left"},An={class:"coin-a"},Pn={alt:""},Sn={class:"coin-b"},Tn={alt:""},Rn={class:"position-name"},qn={key:0,class:"pool-fee"},Bn=wo(()=>e("span",null,"Fee tier",-1)),Nn={class:"left"},Mn={class:"vault-address"},On=["href"],Ln=wo(()=>e("span",null,"Vault Address",-1)),Dn=wo(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),Un=[Ln,Dn],Fn={class:"pool-address"},Vn=["href"],En=wo(()=>e("span",null,"Pool Address",-1)),Wn=wo(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),jn=[En,Wn],Xn={class:"apy-and-tvl"},Gn={class:"apy"},Hn=wo(()=>e("div",{class:"apy-title"},"APY",-1)),zn={class:"apy-text"},Yn={class:"tvl"},Jn=wo(()=>e("div",{class:"tvl-title"},"TVL",-1)),Zn={class:"tvl-text"};function Kn(o,s,H,W,j,S){var f,t,n,I,a,u,R,r,m,q,L,D,x,y,c,w,U,E,no,F,k,to,vo,mo,co,J,ko,lo,g,Z,qo,Io,Yo,Vo,To,Bo,Eo,Wo,Jo,Zo,po,io,Ko,jo,h,B,K,fo;const _=ve,p=he,A=ye("image");return v(),T("div",Ze,[e("div",Ke,[e("div",Qe,[e("div",xe,[Oo(e("img",on,null,512),[[A,o.needReverse?o.getCoinIcon((t=o.positionInfo)==null?void 0:t.token_b):o.getCoinIcon((f=o.positionInfo)==null?void 0:f.token_a)]]),Y(_,{address:o.needReverse?(u=(a=o.positionInfo)==null?void 0:a.token_b)==null?void 0:u.address:(I=(n=o.positionInfo)==null?void 0:n.token_a)==null?void 0:I.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",en,[Oo(e("img",nn,null,512),[[A,o.needReverse?o.getCoinIcon((r=o.positionInfo)==null?void 0:r.token_a):o.getCoinIcon((R=o.positionInfo)==null?void 0:R.token_b)]]),Y(_,{address:o.needReverse?(D=(L=o.positionInfo)==null?void 0:L.token_a)==null?void 0:D.address:(q=(m=o.positionInfo)==null?void 0:m.token_b)==null?void 0:q.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",tn,d(o.needReverse?(y=(x=o.positionInfo)==null?void 0:x.token_b)==null?void 0:y.symbol:(w=(c=o.positionInfo)==null?void 0:c.token_a)==null?void 0:w.symbol)+" - "+d(o.needReverse?(E=(U=o.positionInfo)==null?void 0:U.token_a)==null?void 0:E.symbol:(F=(no=o.positionInfo)==null?void 0:no.token_b)==null?void 0:F.symbol),1),(k=o.positionInfo)!=null&&k.fee?(v(),T("div",sn,[ln,re(" "+d(((to=o.positionInfo)==null?void 0:to.fee)*100)+"% ",1)])):eo("",!0),e("div",an,[e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:M(le))("poolAddress",(vo=o.positionInfo)==null?void 0:vo.id),target:"_blank"},vn,8,un)]),e("div",mn,[e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:M(le))("poolAddress",(mo=o.positionInfo)==null?void 0:mo.address),target:"_blank"},yn,8,cn)])]),e("div",_n,[e("div",bn,[hn,e("div",kn,[re(d(o.apy)+" ",1),Y(p)])]),e("div",gn,[$n,e("div",wn,"$"+d(("addCommom"in o?o.addCommom:M($))(o.tvl,2)),1)])])]),e("div",In,[e("div",Cn,[e("div",An,[Oo(e("img",Pn,null,512),[[A,o.needReverse?o.getCoinIcon((J=o.positionInfo)==null?void 0:J.token_b):o.getCoinIcon((co=o.positionInfo)==null?void 0:co.token_a)]]),Y(_,{address:o.needReverse?(Z=(g=o.positionInfo)==null?void 0:g.token_b)==null?void 0:Z.address:(lo=(ko=o.positionInfo)==null?void 0:ko.token_a)==null?void 0:lo.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Sn,[Oo(e("img",Tn,null,512),[[A,o.needReverse?o.getCoinIcon((Io=o.positionInfo)==null?void 0:Io.token_a):o.getCoinIcon((qo=o.positionInfo)==null?void 0:qo.token_b)]]),Y(_,{address:o.needReverse?(Bo=(To=o.positionInfo)==null?void 0:To.token_a)==null?void 0:Bo.address:(Vo=(Yo=o.positionInfo)==null?void 0:Yo.token_b)==null?void 0:Vo.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Rn,d(o.needReverse?(Wo=(Eo=o.positionInfo)==null?void 0:Eo.token_b)==null?void 0:Wo.symbol:(Zo=(Jo=o.positionInfo)==null?void 0:Jo.token_a)==null?void 0:Zo.symbol)+" - "+d(o.needReverse?(io=(po=o.positionInfo)==null?void 0:po.token_a)==null?void 0:io.symbol:(jo=(Ko=o.positionInfo)==null?void 0:Ko.token_b)==null?void 0:jo.symbol),1),(h=o.positionInfo)!=null&&h.fee?(v(),T("div",qn,[Bn,re(" "+d(((B=o.positionInfo)==null?void 0:B.fee)*100)+"% ",1)])):eo("",!0)]),e("div",Nn,[e("div",Mn,[e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:M(le))("poolAddress",(K=o.positionInfo)==null?void 0:K.id),target:"_blank"},Un,8,On)]),e("div",Fn,[e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:M(le))("poolAddress",(fo=o.positionInfo)==null?void 0:fo.address),target:"_blank"},jn,8,Vn)])]),e("div",Xn,[e("div",Gn,[Hn,e("div",zn,[re(d(o.apy)+" ",1),Y(p)])]),e("div",Yn,[Jn,e("div",Zn,"$"+d(("addCommom"in o?o.addCommom:M($))(o.tvl,2)),1)])])])])}const Te=No(Je,[["render",Kn],["__scopeId","data-v-204ed24b"]]),Qn=Do({setup(){const o=C(!0),s=Go(),H=b(()=>s),W=Ho(),j=b(()=>W),S=zo(),_=C();$o(()=>[j.value.positionInfoObj,S.params.id],([t,n])=>{t&&!Xo(t)&&n&&(_.value=t[n],console.log(_.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const p=b(()=>{var t;return(t=_.value)==null?void 0:t.needReverse}),A=t=>{var n;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((n=H.value.tokensObj[t==null?void 0:t.address])==null?void 0:n.logo_url)||te("/image/coins/sui-unknown.png")},f=b(()=>{var u,R,r;const t=(u=_==null?void 0:_.value)==null?void 0:u.price,n=(R=_==null?void 0:_.value)==null?void 0:R.minPrice,I=(r=_==null?void 0:_.value)==null?void 0:r.maxPrice;let a;if(t>=n&&t<=I){const m=new i(n).add(new i(I)).div(2).toNumber();a=t>m?50+new i(t).sub(m).div(m).toNumber():50-new i(t).sub(m).div(m).toNumber()}else t<n?(a=new i(t).sub(new i(n)).mul(100).toNumber()+15,console.log(a,"##result")):t>I&&(a=new i(t).sub(new i(I)).div(new i(I)).mul(100).toNumber()+70+15);return Number(De(a,0))});return{direct:o,positionInfo:_,needReverse:p,getCoinIcon:A,decimalUi:ee,addCommom:$,sFixD:G,moveRatio:f}}}),xn=""+globalThis.__publicAssetsURL("sui-image/icon_currentprice@2x.png");const Mo=o=>(Uo("data-v-4a250835"),o=o(),Fo(),o),ot={class:"v2-position-range"},et={class:"position-range-top"},nt=Mo(()=>e("div",null,"Position Range",-1)),tt={class:"base-coin"},st={key:0},lt={alt:""},it={key:1},at={alt:""},ut={key:2},rt={key:3},dt=Mo(()=>e("p",null,"Base coin",-1)),vt={class:"coin-rate"},mt=Mo(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),ct=Mo(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),pt=[mt,ct],ft={class:"position-range-bottom"},yt=Mo(()=>e("div",{class:"current-price-title"},"Current Price",-1)),_t={key:0,class:"current-price-text"},bt={key:1,class:"current-price-text"},ht=Mo(()=>e("div",{class:"current-price-title"},"Current Price",-1)),kt={key:0,class:"current-price-text"},gt={key:1,class:"current-price-text"},$t={class:"price-range"},wt=Mo(()=>e("div",{class:"price-range-bg"},[e("div",{class:"price-range-border"})],-1)),It={class:"min-price"},Ct=Mo(()=>e("div",null,"Min Price",-1)),At={key:0},Pt={key:1},St={class:"max-price"},Tt=Mo(()=>e("div",null,"Max Price",-1)),Rt={key:0},qt={key:1};function Bt(o,s,H,W,j,S){var A,f,t,n,I,a,u,R,r,m,q,L,D,x,y,c,w,U,E,no,F,k,to,vo,mo,co,J,ko,lo,g,Z,qo;const _=ve,p=ye("image");return v(),T("div",ot,[e("div",et,[nt,e("div",tt,[o.needReverse?(v(),T("div",it,[Oo(e("img",at,null,512),[[p,o.direct?o.getCoinIcon((R=o.positionInfo)==null?void 0:R.token_b):o.getCoinIcon((u=o.positionInfo)==null?void 0:u.token_a)]]),Y(_,{address:o.direct?(L=(q=o.positionInfo)==null?void 0:q.token_b)==null?void 0:L.address:(m=(r=o.positionInfo)==null?void 0:r.token_a)==null?void 0:m.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(v(),T("div",st,[Oo(e("img",lt,null,512),[[p,o.direct?o.getCoinIcon((A=o.positionInfo)==null?void 0:A.token_a):o.getCoinIcon((f=o.positionInfo)==null?void 0:f.token_b)]]),Y(_,{address:o.direct?(n=(t=o.positionInfo)==null?void 0:t.token_a)==null?void 0:n.address:(a=(I=o.positionInfo)==null?void 0:I.token_b)==null?void 0:a.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),o.needReverse?(v(),T("span",rt,d(o.direct?(U=(w=o.positionInfo)==null?void 0:w.token_b)==null?void 0:U.symbol:(no=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:no.symbol),1)):(v(),T("span",ut,d(o.direct?(x=(D=o.positionInfo)==null?void 0:D.token_a)==null?void 0:x.symbol:(c=(y=o.positionInfo)==null?void 0:y.token_b)==null?void 0:c.symbol),1)),dt,e("div",vt,[e("div",{onClick:s[0]||(s[0]=Io=>o.direct=!o.direct)},pt)])])]),e("div",ft,[e("div",{class:"current-price",style:ne({left:`${o.moveRatio>40&&o.moveRatio-60?o.moveRatio:o.moveRatio>92?92:o.moveRatio<=13?10:o.moveRatio-13}%`})},[yt,(o.needReverse?!o.direct:o.direct)?(v(),T("div",_t,d(("addCommom"in o?o.addCommom:M($))(("decimalUi"in o?o.decimalUi:M(ee))((F=o.positionInfo)==null?void 0:F.price,6))),1)):(v(),T("div",bt,d(("addCommom"in o?o.addCommom:M($))(("decimalUi"in o?o.decimalUi:M(ee))(1/((k=o.positionInfo)==null?void 0:k.price),6))),1))],4),e("div",{class:"current-price h5-current-price",style:ne({left:`${o.moveRatio>40&&o.moveRatio-60?o.moveRatio:o.moveRatio>92?92:o.moveRatio<=23?0:o.moveRatio-13}%`})},[ht,(o.needReverse?!o.direct:o.direct)?(v(),T("div",kt,d(("addCommom"in o?o.addCommom:M($))(("decimalUi"in o?o.decimalUi:M(ee))((to=o.positionInfo)==null?void 0:to.price,6))),1)):(v(),T("div",gt,d(("addCommom"in o?o.addCommom:M($))(("decimalUi"in o?o.decimalUi:M(ee))(1/((vo=o.positionInfo)==null?void 0:vo.price),6))),1))],4),e("div",$t,[wt,e("img",{style:ne({left:`${o.moveRatio}%`}),src:xn,alt:""},null,4),e("div",It,[Ct,o.direct?(v(),T("div",At,d(((mo=o.positionInfo)==null?void 0:mo.minPrice)&&("sFixD"in o?o.sFixD:M(G))((co=o.positionInfo)==null?void 0:co.minPrice,6)),1)):(v(),T("div",Pt,d(((J=o.positionInfo)==null?void 0:J.maxPrice)&&("sFixD"in o?o.sFixD:M(G))(1/((ko=o.positionInfo)==null?void 0:ko.maxPrice),6)),1))]),e("div",St,[Tt,o.direct?(v(),T("div",Rt,d(((lo=o.positionInfo)==null?void 0:lo.maxPrice)&&("sFixD"in o?o.sFixD:M(G))((g=o.positionInfo)==null?void 0:g.maxPrice,6)),1)):(v(),T("div",qt,d(((Z=o.positionInfo)==null?void 0:Z.minPrice)&&("sFixD"in o?o.sFixD:M(G))(1/((qo=o.positionInfo)==null?void 0:qo.minPrice),6)),1))])])])])}const Re=No(Qn,[["render",Bt],["__scopeId","data-v-4a250835"]]),Nt=Do({components:{Modal:Ee},props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const s=b(()=>{var W,j;const H=G(((W=o.positionInfo)==null?void 0:W.poolUSD)/((j=o.positionInfo)==null?void 0:j.quoteUSD)*100,0);return console.log(H,"Pool Capacity Ratio"),Number(H)});return{sFixD:G,addCommom:$,ratio:s}}});const _e=o=>(Uo("data-v-f08bb90d"),o=o(),Fo(),o),Mt=_e(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ot={class:"deposit-slider"},Lt={class:"info-block"},Dt=_e(()=>e("div",{class:"leabl"},"Current Deposit：",-1)),Ut={class:"text"},Ft={class:"info-block"},Vt=_e(()=>e("div",{class:"leabl"},"Max Capacity：",-1)),Et={class:"text"};function Wt(o,s,H,W,j,S){const _=ie("Modal");return v(),so(_,{width:"440px",visible:!0,footer:null,title:"Pool Capacity",onCancel:s[0]||(s[0]=p=>o.$emit("onClose"))},{closeIcon:Lo(()=>[Mt]),default:Lo(()=>{var p,A;return[e("div",Ot,[e("div",{class:"current-deposit",style:ne({width:`${o.ratio>100?100:o.ratio}%`})},null,4)]),e("div",Lt,[Dt,e("div",Ut,"$"+d(("addCommom"in o?o.addCommom:M($))(("sFixD"in o?o.sFixD:M(G))((p=o.positionInfo)==null?void 0:p.poolUSD,4))),1)]),e("div",Ft,[Vt,e("div",Et,"$"+d(("addCommom"in o?o.addCommom:M($))(("sFixD"in o?o.sFixD:M(G))((A=o.positionInfo)==null?void 0:A.quoteUSD,4))),1)])]}),_:1})}const qe=No(Nt,[["render",Wt],["__scopeId","data-v-f08bb90d"]]),jt=Do({components:{AutoPoolV2PoolCapacity:qe},setup(){const o=Go(),s=b(()=>o),H=Ho(),W=b(()=>H),j=zo(),S=C();$o(()=>[W.value.positionInfoObj,j.params.id],([f,t])=>{console.log(f,"##positionInfoObj"),f&&!Xo(f)&&t&&(S.value=f[t],console.log(S.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const _=b(()=>{var f;return(f=S.value)==null?void 0:f.needReverse}),p=f=>{var t;return console.log(f,"info##"),(f==null?void 0:f.logoURI)||(f==null?void 0:f.logo_url)||((t=s.value.tokensObj[f==null?void 0:f.address])==null?void 0:t.logo_url)||te("/image/coins/sui-unknown.png")},A=C(!1);return{needReverse:_,positionInfo:S,getCoinIcon:p,addCommom:$,isShowModal:A}}});const Xt=o=>(Uo("data-v-c6233d3e"),o=o(),Fo(),o),Gt={class:"pool-composition"},Ht={class:"pool-composition-top"},zt=Xt(()=>e("span",null,"Pool Composition",-1)),Yt={class:"pool-composition-bottom"},Jt={class:"token-ratio"},Zt={class:"before-coin"},Kt={alt:""},Qt={class:"after-coin"},xt={alt:""},os={class:"token-num"},es={class:"num-box"},ns={class:"num-box"};function ts(o,s,H,W,j,S){var f,t,n,I,a,u,R,r,m,q,L,D,x,y,c,w,U,E,no,F,k,to,vo,mo,co,J,ko,lo;const _=ve,p=qe,A=ye("image");return v(),T("div",Gt,[e("div",Ht,[zt,e("div",{class:"pool-capacity",onClick:s[0]||(s[0]=g=>o.isShowModal=!0)},"Pool Capacity")]),e("div",Yt,[e("div",Jt,[e("div",Zt,[e("div",null,[Y(_,{address:o.needReverse?(I=(n=o.positionInfo)==null?void 0:n.token_b)==null?void 0:I.address:(t=(f=o.positionInfo)==null?void 0:f.token_a)==null?void 0:t.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),Oo(e("img",Kt,null,512),[[A,o.needReverse?o.getCoinIcon((u=o.positionInfo)==null?void 0:u.token_b):o.getCoinIcon((a=o.positionInfo)==null?void 0:a.token_a)]])]),e("span",null,d((R=o.positionInfo)==null?void 0:R.poolCoinARatio)+"%",1)]),e("div",Qt,[e("span",null,d((r=o.positionInfo)==null?void 0:r.poolCoinBRatio)+"%",1),e("div",null,[Oo(e("img",xt,null,512),[[A,o.needReverse?o.getCoinIcon((q=o.positionInfo)==null?void 0:q.token_a):o.getCoinIcon((m=o.positionInfo)==null?void 0:m.token_b)]]),Y(_,{address:o.needReverse?(y=(x=o.positionInfo)==null?void 0:x.token_a)==null?void 0:y.address:(D=(L=o.positionInfo)==null?void 0:L.token_b)==null?void 0:D.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),e("div",os,[e("div",{class:"token-a-bg",style:ne({width:`${(c=o.positionInfo)==null?void 0:c.poolCoinARatio}%`})},null,4),e("div",{class:"token-b-bg",style:ne({width:`${(w=o.positionInfo)==null?void 0:w.poolCoinBRatio}%`})},null,4),e("div",es,[e("div",null,d(("addCommom"in o?o.addCommom:M($))((U=o.positionInfo)==null?void 0:U.poolCoinANum))+" "+d(o.needReverse?(k=(F=o.positionInfo)==null?void 0:F.token_b)==null?void 0:k.symbol:(no=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:no.symbol),1),e("div",null,"$"+d(("addCommom"in o?o.addCommom:M($))((to=o.positionInfo)==null?void 0:to.poolCoinAUSD)),1)]),e("div",ns,[e("div",null,d(("addCommom"in o?o.addCommom:M($))((vo=o.positionInfo)==null?void 0:vo.poolCoinBNum))+" "+d(o.needReverse?(ko=(J=o.positionInfo)==null?void 0:J.token_a)==null?void 0:ko.symbol:(co=(mo=o.positionInfo)==null?void 0:mo.token_b)==null?void 0:co.symbol),1),e("div",null,"$"+d(("addCommom"in o?o.addCommom:M($))((lo=o.positionInfo)==null?void 0:lo.poolCoinBUSD)),1)])])]),o.isShowModal?(v(),so(p,{key:0,"position-info":o.positionInfo,onOnClose:s[1]||(s[1]=g=>o.isShowModal=!1)},null,8,["position-info"])):eo("",!0)])}const Be=No(jt,[["render",ts],["__scopeId","data-v-c6233d3e"]]),ss=Do({setup(){const o=Go(),s=b(()=>o),H=Ho(),W=b(()=>H),j=zo(),S=C();$o(()=>[W.value.positionInfoObj,j.params.id],([t,n])=>{console.log(t,"##positionInfoObj"),t&&!Xo(t)&&n&&(S.value=t[n],console.log(S.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const _=b(()=>{var t;return(t=S.value)==null?void 0:t.needReverse}),p=t=>{var n;return console.log(t,"info##"),(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((n=s.value.tokensObj[t==null?void 0:t.address])==null?void 0:n.logo_url)||te("/image/coins/sui-unknown.png")},A=fe(),f=b(()=>A);return{needReverse:_,positionInfo:S,getCoinIcon:p,addCommom:$,wallet:f}}});const ae=o=>(Uo("data-v-c9de826f"),o=o(),Fo(),o),ls={class:"my-liquidity"},is={class:"my-liquidity-top"},as=ae(()=>e("div",null,"My Liquidity",-1)),us=ae(()=>e("p",null,"My share of pool",-1)),rs={class:"my-liquidity-bottom"},ds={class:"lp-token"},vs=ae(()=>e("div",null,[e("span",null,"LP Token Balance ")],-1)),ms={class:"lp-balance"},cs={class:"token-num-content"},ps={class:"token-num token-a-num"},fs={class:"logo"},ys=["src"],_s={class:"text"},bs={class:"lp-logo"},hs=["src"],ks=ae(()=>e("div",null,"Pooled Assets",-1)),gs={class:"token-num"},$s={class:"logo"},ws=["src"],Is={class:"text"},Cs=ae(()=>e("div",{class:"token-num-content-bg"},null,-1));function As(o,s,H,W,j,S){var p,A,f,t,n,I,a,u,R,r,m,q,L,D,x,y,c,w,U,E,no,F,k,to,vo,mo,co,J;const _=ve;return v(),T("div",ls,[e("div",is,[as,e("div",null,[us,e("p",null,d(o.wallet.connected?(p=o.positionInfo)==null?void 0:p.myShare:"--")+"%",1)])]),e("div",rs,[e("div",ds,[vs,e("div",null,[e("span",ms,d(o.wallet.connected?("addCommom"in o?o.addCommom:M($))((A=o.positionInfo)==null?void 0:A.myLiquidity):"--")+" LP",1),e("span",null,"$"+d(o.wallet.connected?("addCommom"in o?o.addCommom:M($))((f=o.positionInfo)==null?void 0:f.myLiquidityUSD):"--"),1)])]),e("div",cs,[e("div",ps,[e("div",fs,[e("img",{src:o.needReverse?o.getCoinIcon((n=o.positionInfo)==null?void 0:n.token_b):o.getCoinIcon((t=o.positionInfo)==null?void 0:t.token_a),alt:""},null,8,ys),Y(_,{address:o.needReverse?(R=(u=o.positionInfo)==null?void 0:u.token_b)==null?void 0:R.address:(a=(I=o.positionInfo)==null?void 0:I.token_a)==null?void 0:a.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),e("div",_s,[e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:M($))((r=o.positionInfo)==null?void 0:r.amountA):"--")+" "+d(o.needReverse?(D=(L=o.positionInfo)==null?void 0:L.token_b)==null?void 0:D.symbol:(q=(m=o.positionInfo)==null?void 0:m.token_a)==null?void 0:q.symbol),1),e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:M($))((x=o.positionInfo)==null?void 0:x.myAmountAUSD):"--"),1)])]),e("div",bs,[e("img",{src:o.getCoinIcon((y=o.positionInfo)==null?void 0:y.lpInfo),alt:""},null,8,hs),ks]),e("div",gs,[e("div",$s,[e("img",{src:o.needReverse?o.getCoinIcon((w=o.positionInfo)==null?void 0:w.token_a):o.getCoinIcon((c=o.positionInfo)==null?void 0:c.token_b),alt:""},null,8,ws),Y(_,{address:o.needReverse?(F=(no=o.positionInfo)==null?void 0:no.token_a)==null?void 0:F.address:(E=(U=o.positionInfo)==null?void 0:U.token_b)==null?void 0:E.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),e("div",Is,[e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:M($))((k=o.positionInfo)==null?void 0:k.amountB):"--")+" "+d(o.needReverse?(co=(mo=o.positionInfo)==null?void 0:mo.token_a)==null?void 0:co.symbol:(vo=(to=o.positionInfo)==null?void 0:to.token_b)==null?void 0:vo.symbol),1),e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:M($))((J=o.positionInfo)==null?void 0:J.myAmountBUSD):"--"),1)])]),Cs])])])}const Ne=No(ss,[["render",As],["__scopeId","data-v-c9de826f"]]),Ps=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const Ss={},Me=o=>(Uo("data-v-fcbc716b"),o=o(),Fo(),o),Ts={class:"status"},Rs=Me(()=>e("img",{src:Ps,alt:""},null,-1)),qs=Me(()=>e("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),Bs=[Rs,qs];function Ns(o,s){return v(),T("div",Ts,Bs)}const Oe=No(Ss,[["render",Ns],["__scopeId","data-v-fcbc716b"]]),Ms=Do({components:{AutoPoolAddModal:Pe,AutoPoolV2PoolStatus:Oe},setup(){const o=fe(),s=C(!1),H=me(),W=b(()=>H),j=b(()=>W.value.chainName),S=b(()=>o),_=Ho(),p=b(()=>_),A=Go(),f=b(()=>A),t=C(),n=zo(),I=C(!1);$o(()=>[p.value.positionInfoObj,n.params.id],([h,B])=>{h&&!Xo(h)&&B&&(t.value=h[B],console.log(t.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const a=b(()=>{var h,B;return console.log((h=t.value)==null?void 0:h.needReverse,"##positionInfo.value?.needReverse"),(B=t.value)==null?void 0:B.needReverse}),u=C(),R=C(),r=C(),m=C(),q=C(!0),L=b(()=>S.value.assets&&u.value&&S.value.assets[u.value.address]?be(S.value.assets[u.value.address].balance,u.value.decimals):0),D=b(()=>S.value.assets&&R.value&&S.value.assets[R.value.address]?be(S.value.assets[R.value.address].balance,R.value.decimals):0),x=h=>{h==="fromCoin"?(q.value=!0,r.value=L.value>0?u.value.symbol=="SUI"?new i(Number(L.value)).sub(new i(.05)).lt(new i(0))?"0":new i(Number(L.value)).sub(new i(.05)).toString():String(L.value):""):(q.value=!1,m.value=D.value>0?R.value.symbol=="SUI"?new i(Number(D.value)).sub(new i(.05)).lt(new i(0))?"0":new i(Number(D.value)).sub(new i(.05)).toString():String(D.value):"")},y=h=>{h==="fromCoin"?(q.value=!0,r.value=L.value>0?G(new i(Number(L.value)).div(2).toString(),u.value.decimals).toString():""):(q.value=!1,m.value=D.value>0?G(new i(Number(D.value)).div(2).toString(),R.value.decimals).toString():"")},c=b(()=>j.value?ke(j.value):{}),w=b(()=>W.value.slippage),U=C("--"),E=C("--"),no=h=>{const B=new i(t.value.autoPoolPositionInfo.liquidity),K=new i(h.toString());if(B.toNumber()>0&&K.toNumber()>0){const fo=K.add(B);console.log("totalLiquidity:",K.div(fo).mul(100).toString());const Co=K.div(fo).mul(100).toNumber(),O=Ve(Co),_o=O==-1?2:O+2,yo=G(K.div(fo).mul(100).toNumber(),_o);console.log(t.value.decimals,"##positionInfo.value.decimal");const ao=new i(1).div(new i(Math.pow(10,t.value.lpInfo.decimals))).toString();console.log(yo,ao,"###288"),Number(yo)<Number(ao)?U.value=`<${ao}`:U.value=yo}else K.toNumber()>0&&B.toNumber()<=0?U.value="100":U.value="--"},F=h=>{const B=new i(h.toString()),K=new i(w.value).div(100),fo=B.mul(K),Co=B.sub(fo),O=pe.get_lp_amount_by_liquidity({liquidity:t.value.liquidity,total_supply:t.value.total_supply},Co),_o=new i(Math.pow(10,t.value.lpInfo.decimals)),yo=new i(O).div(_o).toString();E.value=yo},k=C(!1),to=C(!1),vo=C(""),mo=C(),co=async()=>{if(!t.value)return;const h=t.value.autoPoolPositionInfo.tick_lower_index,B=t.value.autoPoolPositionInfo.tick_upper_index,K=So.sqrtPriceX64ToTickIndex(new oo(t.value.current_sqrt_price));let fo=So.tickIndexToSqrtPriceX64(h),Co=So.tickIndexToSqrtPriceX64(B);K<h&&(a.value?k.value=!0:to.value=!0),K>B&&(a.value?to.value=!0:k.value=!0);let O;if(console.log(r.value||m.value,"#fromCoinAmount.value || toCoinAmount.value"),r.value||m.value){q.value?O=new i(r.value).mul(Math.pow(10,u.value.decimals)).toString():O=new i(m.value).mul(Math.pow(10,R.value.decimals)).toString();let _o,yo=q.value;if(console.log("执行##"),po.value||io.value){console.log(a.value?q.value:!q.value,"#needReverse.value?fixedFromCoin.value:!fixedFromCoin.value");const N=await Jo.calculateDepositSwapAmount({lowerTick:h,upperTick:B,curSqrtPrice:new oo(t.value.current_sqrt_price),fix_amount_a:yo,input_amount:O,coinTypeA:t.value.autoPoolPositionInfo.coin_type_a,coinTypeB:t.value.autoPoolPositionInfo.coin_type_b,clmm_pool:t.value.address});if(console.log(N,"###swapResult"),N){I.value=N.is_exceed,_o=new oo(N.afterSqrtPrice),O=new oo(N.swapOutAmount),mo.value={swap_amount:N.swapInAmount,a2b:yo},yo=!yo;const Q=t.value.token_a.decimals,V=t.value.token_b.decimals;de.value=So.sqrtPriceX64ToPrice(N.afterSqrtPrice,Q,V).toString(),console.log(de.value,"##afterCurrentPrice.value");const uo=new i(N.swapInAmount).div(new i(Math.pow(10,Q))).toString(),bo=new i(N.swapOutAmount).div(new i(Math.pow(10,V))).toString(),ro=a.value?t.value.token_b.symbol:t.value.token_a.symbol,z=a.value?t.value.token_a.symbol:t.value.token_b.symbol;vo.value=`To deposit ${$(po.value?r.value:m.value)} ${po.value?ro:z},
          ${$(uo)} ${po.value?ro:z}  will be traded for ${$(bo)} ${po.value?z:ro} added to the pool.`}else _o=t.value.current_sqrt_price,O=new oo(O),de.value=""}else I.value=!1,_o=t.value.current_sqrt_price,O=new oo(O),de.value="",vo.value="";console.log(mo,"##swapParams");let ao,l,P;if(K>=h&&K<=B){const N=c.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:u.value,tokenB:R.value,lowerTick:h,upperTick:B,coinAmount:O,iscoinA:yo,roundUp:!0,slippage:Number(w.value)/100,curSqrtPrice:new oo(_o)});ao=N.liquidityAmount,l=N.tokenMaxA,P=N.tokenMaxB,!po.value&&!io.value&&(q.value?m.value=Number(P)>0?P:"":r.value=Number(l)>0?l:"")}else K<B?ao={liquidityAmount:Ue(fo,Co,O),tokenMaxA:0,tokenMaxB:m.value}.liquidityAmount:ao={liquidityAmount:Fe(fo,Co,O),tokenMaxA:r.value,tokenMaxB:0}.liquidityAmount;console.log(ao.toString(),"liquidityAmount###"),no(ao),F(ao)}};$o(()=>t.value,h=>{h&&!Xo(h)&&(u.value=h==null?void 0:h.token_a,R.value=h==null?void 0:h.token_b,k.value=!1,to.value=!1,co())},{immediate:!0});const J=b(()=>f.value.RATES),ko=b(()=>{var h,B,K,fo,Co,O,_o,yo,ao,l;if((B=J.value[(h=u.value)==null?void 0:h.address])!=null&&B.price&&((fo=J.value[(K=R.value)==null?void 0:K.address])!=null&&fo.price)){console.log((O=J.value[(Co=u.value)==null?void 0:Co.address])==null?void 0:O.price,"RATES.value[fromCoin.value?.address]?.price");const P=new i(r.value||0).mul(new i((yo=J.value[(_o=u.value)==null?void 0:_o.address])==null?void 0:yo.price)),N=new i(m.value||0).mul(new i((l=J.value[(ao=R.value)==null?void 0:ao.address])==null?void 0:l.price));return ee(P.add(N).toString(),2)}else return"--"});$o(()=>r.value,(h,B)=>{h?co():(U.value="--",m.value="",E.value="--")},{immediate:!0}),$o(()=>m.value,(h,B)=>{h?co():(r.value="",U.value="--",E.value="--")},{immediate:!0});const{t:lo,locale:g}=$e(),Z=b(()=>{const h=Number(r.value)>Number(L.value),B=Number(m.value)>Number(D.value);return!r.value&&!m.value?lo("button.enterAmount"):h?lo("button.insufficientBalance",{name:u.value.symbol}):B?lo("button.insufficientBalance",{name:R.value.symbol}):I.value?lo("button.insufficientLiquidity"):"Add Liquidity"}),qo=b(()=>{const h=Number(r.value)>Number(L.value),B=Number(m.value)>Number(D.value);return!!(!r.value&&!m.value||h||B||r.value<=0&&m.value<=0||I.value||jo.value!=="STATUS_RUNNING")}),Io=C(!0),{setIsShowSuccess:Yo,setIsShowRejected:Vo,setIsShowWaiting:To,setTransactionDesc:Bo,setTransactionTxid:Eo,setPositiomNum:Wo}=H,Jo=ge("Sui"),Zo=async()=>{var ao,l;s.value=!1,Io.value=!0,Eo("");const h=`${$(r.value)} ${(ao=u.value)==null?void 0:ao.symbol}`,B=`${$(m.value)} ${(l=R.value)==null?void 0:l.symbol}`;Bo(`Deposit ${r.value>0?h:""} ${m.value>0&&r.value>0?"and":""} ${m.value>0?B:""}`),To(!0);const K=q.value,fo=t.value.autoPoolPositionInfo.tick_lower_index,Co=t.value.autoPoolPositionInfo.tick_upper_index,O=So.sqrtPriceX64ToTickIndex(new oo(t.value.current_sqrt_price));let _o;q.value?_o=new i(r.value).mul(Math.pow(10,u.value.decimals)).toString():_o=new i(m.value).mul(Math.pow(10,R.value.decimals)).toString();const yo=t.value.rewarderInfo.map(P=>P.coinAddress);try{const P={lowerTick:fo,upperTick:Co,coinAmount:_o,fix_amount_a:K,slippage:Number(w.value)/100,curSqrtPrice:new oo(t.value.current_sqrt_price),id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.pool,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coin_type_a,coinTypeB:t.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:yo,swapParams:mo.value,isOnlyA:po.value,isOnlyB:io.value,currentTickIndex:O},N=await Jo.deposit(P);console.log(N,"===>payloadAdd11111");const Q=await S.value.currentWallet.signAndExecuteTransactionBlock(N);let V=c.value.handleTx(Q);if(console.log("toAdd###tx###",V),V&&V.hash){Eo(V.hash),To(!1),Yo(!0),console.log(t,"===>positionInfo");const uo={title:"Supplied",desc:`Deposit ${r.value>0?h:""} ${m.value>0&&r.value>0?"and":""} ${m.value>0?B:""}`,hash:V.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${r.value>0?h:""} ${m.value>0&&r.value>0?"and":""} ${m.value>0?B:""}`};j.value!=="Aptos"&&(uo.res=V.res),c.value.showTransitionPending(uo),await c.value.watchTransaction(uo)&&setTimeout(()=>{_.updatePositionItem(t.value.id),c.value.getAccount(S.value.address)},1e3),Wo()}else To(!1),Vo(!0);r.value="",m.value="",Io.value=!1}catch(P){r.value="",m.value="",console.log("addError###",P),Io.value=!1,To(!1),Vo(!0)}},po=C(!1),io=C(!1),Ko=h=>{r.value="",m.value="",vo.value="",h=="only-a"?(po.value=!po.value,io.value=!1):(io.value=!io.value,po.value=!1)},jo=b(()=>p.value.currentAutoPoolStatus);return{currentAutoPoolStatus:jo,wallet:S,positionInfo:t,isShowAddModal:s,needReverse:a,fromCoin:u,toCoin:R,fromCoinAmount:r,toCoinAmount:m,fromCoinBlance:L,toCoinBlance:D,fixedFromCoin:q,maxBtnSelect:x,halfBtnSelect:y,totalAmountUSD:ko,addCommom:$,shareOfPool:U,minimumReceivedLP:E,addLiquidityBtnText:Z,addLiquidityBtnDisabled:qo,toAdd:Zo,showToCoinLock:to,showFromCoinLock:k,isOnlyA:po,isOnlyB:io,onlyToken:Ko,onlyText:vo}}});const se=o=>(Uo("data-v-d7b51e87"),o=o(),Fo(),o),Os={class:"auto-pool-add"},Ls={class:"auto-pool-add-content"},Ds={class:"liquidity-action-tab"},Us=se(()=>e("div",{class:"increase tab-active"},"Add",-1)),Fs={class:"only-token"},Vs=se(()=>e("div",null,"Deposit Amounts",-1)),Es={key:0},Ws={key:0},js={key:0,class:"card-item"},Xs={key:1,class:"card-item"},Gs=se(()=>e("span",null,"Pool Closed",-1)),Hs={class:"add-info"},zs={key:0,class:"only-text"},Ys={class:"total-amount"},Js=se(()=>e("span",null,"Total Amount",-1)),Zs={class:"total-amount"},Ks=se(()=>e("span",null,"Share of Pool",-1)),Qs={class:"total-amount"},xs=se(()=>e("span",null,"Minimum Received LP",-1));function ol(o,s,H,W,j,S){var n,I,a,u,R,r,m,q,L,D,x,y,c;const _=Ce,p=Ae,A=ie("AutoPoolV2PoolStatus"),f=Ie,t=Pe;return v(),T("div",Os,[e("div",Ls,[e("div",Ds,[Us,e("div",{class:"remove",onClick:s[0]||(s[0]=we(w=>o.$emit("changeCurrentTab"),["stop"]))},"Remove")]),e("div",Fs,[Vs,e("div",null,[e("div",{class:"only-a",onClick:s[1]||(s[1]=w=>o.onlyToken("only-a"))},[e("p",null,[o.isOnlyA?(v(),T("span",Es)):eo("",!0)]),e("span",null,d(o.needReverse?(u=(a=o.positionInfo)==null?void 0:a.token_b)==null?void 0:u.symbol:(I=(n=o.positionInfo)==null?void 0:n.token_a)==null?void 0:I.symbol)+" only",1)]),e("div",{class:"only-b",onClick:s[2]||(s[2]=w=>o.onlyToken("only-b"))},[e("p",null,[o.isOnlyB?(v(),T("span",Ws)):eo("",!0)]),e("span",null,d(o.needReverse?(q=(m=o.positionInfo)==null?void 0:m.token_a)==null?void 0:q.symbol:(r=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:r.symbol)+" only",1)])])]),e("div",{class:ce(o.needReverse?"card-container reverse":"card-container")},[(o.needReverse?!o.isOnlyA:!o.isOnlyB)?(v(),T("div",js,[Y(_,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":s[3]||(s[3]=w=>o.fromCoinAmount=w),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[4]||(s[4]=w=>o.maxBtnSelect("fromCoin")),onOnHalf:s[5]||(s[5]=w=>o.halfBtnSelect("fromCoin")),onOnInput:s[6]||(s[6]=w=>{o.fromCoinAmount=w}),onOnFocus:s[7]||(s[7]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock&&!o.isOnlyA?(v(),so(p,{key:0})):eo("",!0)])):eo("",!0),(o.needReverse?!o.isOnlyB:!o.isOnlyA)?(v(),T("div",Xs,[Y(_,{modelValue:o.toCoinAmount,"onUpdate:modelValue":s[8]||(s[8]=w=>o.toCoinAmount=w),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[9]||(s[9]=w=>o.maxBtnSelect("toCoin")),onOnHalf:s[10]||(s[10]=w=>o.halfBtnSelect("toCoin")),onOnInput:s[11]||(s[11]=w=>{o.toCoinAmount=w}),onOnFocus:s[12]||(s[12]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock&&!o.isOnlyB?(v(),so(p,{key:0})):eo("",!0)])):eo("",!0)],2)]),o.currentAutoPoolStatus=="STATUS_REBALANCING"?(v(),so(A,{key:0})):eo("",!0),(L=o.positionInfo)!=null&&L.is_pause?(v(),so(f,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:Lo(()=>[Gs]),_:1})):o.wallet.connected?(v(),so(f,{key:2,class:"big-btn liquidity-btn",disabled:o.addLiquidityBtnDisabled,onClick:s[13]||(s[13]=w=>o.isShowAddModal=!0)},{default:Lo(()=>[e("span",null,d(o.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(v(),so(f,{key:3,class:"big-btn liquidity-btn",onClick:s[14]||(s[14]=w=>o.wallet.setIsShowWalletModal(!0))},{default:Lo(()=>[e("span",null,d(o.$t("button.connectWallet")),1)]),_:1})),e("div",Hs,[o.onlyText?(v(),T("div",zs,d(o.onlyText),1)):eo("",!0),e("div",Ys,[Js,e("span",null,"$"+d(("addCommom"in o?o.addCommom:M($))(o.totalAmountUSD)),1)]),e("div",Zs,[Ks,e("span",null,d(o.shareOfPool)+"%",1)]),e("div",Qs,[xs,e("span",null,d(("addCommom"in o?o.addCommom:M($))(o.minimumReceivedLP))+" "+d(o.needReverse?(D=o.toCoin)==null?void 0:D.symbol:(x=o.fromCoin)==null?void 0:x.symbol)+"-"+d(o.needReverse?(y=o.fromCoin)==null?void 0:y.symbol:(c=o.toCoin)==null?void 0:c.symbol),1)])]),o.isShowAddModal?(v(),so(t,{key:4,"pool-info":o.positionInfo,"from-coin":o.needReverse?o.positionInfo.token_b:o.positionInfo.token_a,"to-coin":o.needReverse?o.positionInfo.token_a:o.positionInfo.token_b,"from-coin-amount":o.needReverse?o.toCoinAmount:o.fromCoinAmount,"to-coin-amount":o.needReverse?o.fromCoinAmount:o.toCoinAmount,"total-amount":o.totalAmountUSD,"share-of-pool":o.shareOfPool,"minimum-received-l-p":o.minimumReceivedLP,"is-only-a":o.isOnlyA,"is-only-b":o.isOnlyB,onOnClose:s[15]||(s[15]=w=>o.isShowAddModal=!1),onToAdd:o.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):eo("",!0)])}const el=No(Ms,[["render",ol],["__scopeId","data-v-d7b51e87"]]),nl=Do({components:{AutoPoolRemoveModal:Se,AutoPoolV2PoolStatus:Oe},setup(){const o=fe(),s=b(()=>o),H=me(),W=b(()=>H),j=b(()=>W.value.slippage),S=b(()=>W.value.chainName),_=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],p=C(25),A=zo(),f=Ho(),t=b(()=>f),n=b(()=>(console.log(t.value.positionInfoObj[A.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),t.value.positionInfoObj[A.params.id])),I=b(()=>{var l;return(l=n.value)==null?void 0:l.needReverse}),a=C(),u=C(),R=C(!1),r=C(),m=b(()=>{var l;return(l=n.value)==null?void 0:l.myLiquidity}),q=C(!0),L=b(()=>S.value?ke(S.value):{}),D=C(),x=ge("Sui"),y=C(""),c=C(""),w=C("--"),U=C(!1),E=C(!1),no=C(),F=C(!0),k=C(),to=Go(),vo=b(()=>to),mo=b(()=>vo.value.RATES),co=async()=>{if(q.value||!n.value)return;const l=n.value.autoPoolPositionInfo.tick_lower_index,P=n.value.autoPoolPositionInfo.tick_upper_index,N=So.sqrtPriceX64ToTickIndex(new oo(n.value.current_sqrt_price));N<l&&(I.value?U.value=!0:E.value=!0),N>P&&(I.value?E.value=!0:U.value=!0);let Q;if(console.log(y.value||c.value,"#fromCoinAmount.value || toCoinAmount.value"),y.value||c.value){F.value?Q=new i(y.value).mul(Math.pow(10,a.value.decimals)).toString():Q=new i(c.value).mul(Math.pow(10,u.value.decimals)).toString();let V,uo=F.value;if(g.value||Z.value){const X=await x.calculateRemoveSwapAmount({lowerTick:l,upperTick:P,curSqrtPrice:new oo(n.value.current_sqrt_price),fix_amount_a:uo,receiveAmount:Q,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address});if(console.log(X,"###swapResult"),X){D.value=X.is_exceed,Q=new oo(X.swapOutAmount),V=n.value.current_sqrt_price,no.value={swap_amount:X.swapInAmount,liquidity:X.liquidity,a2b:!uo},uo=!uo;const Qo=n.value.token_a.decimals,xo=n.value.token_b.decimals,Po=new i(X.swapInAmount).div(new i(Math.pow(10,Qo))).toString(),Ao=new i(X.swapOutAmount).div(new i(Math.pow(10,xo))).toString(),go=I.value?n.value.token_b.symbol:n.value.token_a.symbol,oe=I.value?n.value.token_a.symbol:n.value.token_b.symbol;k.value=y.value==O.value||c.value==O.value?`To withdraw ${$(g.value?y.value:c.value)} ${g.value?go:oe},
          ${$(g.value?n.value.amountB:n.value.amountA)} ${g.value?oe:go} 
           in the pool will be traded for ${Po} ${g.value?go:oe}`:`To withdraw ${$(g.value?y.value:c.value)} ${g.value?go:oe},
          ${$(Po)} ${g.value?oe:go}  in the pool will be traded for ${$(Ao)} ${g.value?go:oe}`}else V=n.value.current_sqrt_price,Q=new oo(Q),k.value=""}else D.value=!1,V=n.value.current_sqrt_price,Q=new oo(Q);console.log(V,"##curSqrtPrice"),console.log("执行了吗##");const{liquidityAmount:bo,tokenMaxA:ro,tokenMaxB:z}=L.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:a.value,tokenB:u.value,lowerTick:l,upperTick:P,coinAmount:Q,iscoinA:uo,roundUp:!1,slippage:Number(j.value)/100,curSqrtPrice:new oo(V)});console.log(n.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(z.toString(),ro.toString(),n.value,"###323"),!g.value&&!Z.value&&(F.value?c.value=Number(z)>0?z:"":y.value=Number(ro)>0?ro:"");const Ro=pe.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},bo.toString());r.value=new i(Ro).div(new i(Math.pow(10,n.value.lpInfo.decimals))).toString(),console.log(Ro,r.value,m.value,"####392");const ho=(g.value||Z.value)&&(y.value==O.value||c.value==O.value)?new i(100):new i(r.value).div(new i(m.value)).mul(100);console.log(ho.toString(),"ratio##"),w.value=g.value||Z.value&&(y.value==O.value||c.value==O.value)?n.value.myLiquidity:r.value,J.value=bo.toString(),p.value=ho.toNumber()}},J=C(),ko=b(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountA}),lo=b(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountB}),g=C(!1),Z=C(!1),qo=b(()=>{var uo,bo,ro,z;const l=(bo=mo.value[(uo=a==null?void 0:a.value)==null?void 0:uo.address])==null?void 0:bo.price,P=(z=mo.value[(ro=u==null?void 0:u.value)==null?void 0:ro.address])==null?void 0:z.price;console.log(l,P,y.value,c.value,"####totalWithdraw");let N=y.value!=="--"&&y.value!==""?y.value:0,Q=c.value!=="--"&&c.value!==""?c.value:0,V;return l&&P&&(g.value||Z.value?V=new i(g.value?N:Q).mul(new i(g.value?l:P)).toString():(V=new i(N).mul(new i(l)).add(new i(Q).mul(new i(P))).toString(),console.log(V,"result##"))),V>0&&V<.01?"<$0.01":`$${$(G(V,2))}`}),Io=async l=>{if(!q.value)return;q.value=!0,n.value.token_a.decimals,n.value.token_b.decimals;const P=n.value.tick_lower_index,N=n.value.tick_upper_index;So.tickIndexToSqrtPriceX64(P),So.tickIndexToSqrtPriceX64(N);const Q=n.value.autoPoolPositionInfo.tick_lower_index,V=n.value.autoPoolPositionInfo.tick_upper_index,uo=So.sqrtPriceX64ToTickIndex(new oo(n.value.current_sqrt_price));uo<Q&&(I.value?U.value=!0:E.value=!0),uo>V&&(I.value?E.value=!0:U.value=!0);let bo="",ro,z;console.log(l.value,"##item.value"),console.log(z,"##coinAmount");let Ro=F.value;if(console.log("执行##"),g.value||Z.value&&!U.value&&!E.value){if(g.value){const X=new i(O.value).mul(Math.pow(10,a.value.decimals)).mul(l.value).toString();console.log(X,"##amount"),z=G(X,0),y.value=G(new i(O.value).mul(l.value).toString(),a.value.decimals)}if(Z.value){const X=new i(O.value).mul(l.value).mul(Math.pow(10,u.value.decimals)).toString();z=G(X,0),c.value=G(new i(O.value).mul(l.value).toString(),u.value.decimals)}const ho=await x.calculateRemoveSwapAmount({lowerTick:P,upperTick:N,curSqrtPrice:new oo(n.value.current_sqrt_price),fix_amount_a:Ro,receiveAmount:z,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address});if(console.log(ho,"###swapResult"),ho){D.value=ho.is_exceed,z=new oo(ho.swapOutAmount),n.value.current_sqrt_price,no.value={swap_amount:ho.swapInAmount,liquidity:ho.liquidity,a2b:!Ro},Ro=!Ro;const X=n.value.token_a.decimals,Qo=n.value.token_b.decimals,xo=new i(ho.swapInAmount).div(new i(Math.pow(10,X))).toString(),Po=new i(ho.swapOutAmount).div(new i(Math.pow(10,Qo))).toString(),Ao=I.value?n.value.token_b.symbol:n.value.token_a.symbol,go=I.value?n.value.token_a.symbol:n.value.token_b.symbol;k.value=l.value==1?`To withdraw ${$(g.value?y.value:c.value)} ${g.value?Ao:go},
          ${$(g.value?n.value.amountB:n.value.amountA)} ${g.value?go:Ao}  in the pool will be traded for ${$(xo)} ${g.value?Ao:go}`:`To withdraw ${$(g.value?y.value:c.value)} ${g.value?Ao:go},
          ${$(Po)} ${g.value?go:Ao}  in the pool will be traded for ${$(xo)} ${g.value?Ao:go}`,bo=ho.liquidity}else n.value.current_sqrt_price,z=new oo(z),k.value="";console.log(ro,"result###"),w.value=G(new i(n.value.myLiquidity).mul(new i(l.value)).toString(),0),console.log(n.value,n.value.liquidity,bo,w.value,"###positionInfo.value.liquidity"),console.log(w.value,"##lpTokenAmount.value"),r.value=new i(w.value),J.value=bo}else{D.value=!1;const ho=new i(ko.value).mul(Math.pow(10,a.value.decimals)).mul(l.value).toString();z=G(ho,0),y.value=G(new i(ko.value).mul(l.value).toString(),a.value.decimals);const X=new i(lo.value).mul(l.value).mul(Math.pow(10,u.value.decimals)).toString();z=G(X,0),c.value=G(new i(lo.value).mul(l.value).toString(),u.value.decimals),n.value.current_sqrt_price,z=new oo(z),l.value!==1?ro=new i(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(l.value).toString():ro=new i(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),r.value=new i(ro).div(Math.pow(10,n.value.lpInfo.decimals)),bo=pe.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},ro),w.value=G(ro,0),J.value=G(bo,0),console.log(bo,"###newLiquidity525")}};$o(p,We((l,P)=>{l!==P&&(Number(l)>100?p.value=100:l&&n.value?(console.log("687===>"),p.value=l,Io({value:p.value/100})):(y.value="",c.value=""))},300)),$o(()=>y.value,(l,P)=>{l?co():(c.value="",p.value=0)},{immediate:!0}),$o(()=>c.value,(l,P)=>{l?co():(y.value="",p.value=0)},{immediate:!0});const Yo=je(),{setIsShowSuccess:Vo,setIsShowRejected:To,setIsShowWaiting:Bo,setTransactionDesc:Eo,setTransactionTxid:Wo,setPositiomNum:Jo,setTransactionDescText:Zo}=H,po=C(!1),{t:io}=$e(),Ko=async()=>{var Ro,ho;po.value=!0,Wo("");const l=Number(y.value)>0?`${$(y.value,a.value.decimals)} ${a.value.symbol}`:"",P=Number(c.value)>0?`${$(c.value,u.value.decimals)} ${u.value.symbol}`:"";console.log(l,P,"###transactionDescTo"),Eo(io("tips.removeLiquidiyText",{from:I.value?P:l,and:Number(y.value)>0&&Number(c.value)>0?"and":"",to:I.value?l:P})),Bo(!0);const N=io("modal.removeLiquidityText2");Zo(N);const Q=n.value.autoPoolPositionInfo.tick_lower_index,V=n.value.autoPoolPositionInfo.tick_upper_index,uo=So.tickIndexToSqrtPriceX64(Q),bo=So.tickIndexToSqrtPriceX64(V),ro=n.value.rewarderInfo.map(X=>X.coinAddress);console.log(J.value,w.value,"##liquidityVal.value");let z;F.value?z=new i(y.value).mul(Math.pow(10,a.value.decimals)).toString():z=new i(c.value).mul(Math.pow(10,u.value.decimals)).toString();try{console.log(w.value,J.value,n.value.object.current_sqrt_price,"698##");const X={lowerSqrtPrice:uo,upperSqrtPrice:bo,lpTokenAmount:new oo(w.value),liquidity:new oo(J.value),curSqrtPrice:new oo(n.value.object.current_sqrt_price),slippage:Number(j.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.pool,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:ro,swapParams:no.value,fix_amount_a:F.value,isOnlyA:!U.value&&!E.value?g.value:!1,isOnlyB:!E.value&&!U.value?Z.value:!1,lowerTick:Q,upperTick:V,receiveAmount:z,sliderVal:p.value},Qo=await x.remove(X);console.log(Qo,"移除流动性payload");const xo=await s.value.currentWallet.signAndExecuteTransactionBlock(Qo);let Po=L.value.handleTx(xo);if(console.log("0331###remove###tx####",Po),Po&&Po.hash){Wo(Po.hash),Bo(!1),Vo(!0);const Ao={title:io("common.removeLiquidity"),desc:"",hash:Po.hash,descTransactions:`Remove ${l} ${Number(y.value)>0&&Number(c.value)>0?"and":""} ${P} from the pool`,sender:s.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${y.value} ${(Ro=a.value)==null?void 0:Ro.symbol} and ${c.value} ${(ho=u.value)==null?void 0:ho.symbol}`};Ao.res=Po.res,L.value.showTransitionPending(Ao),await L.value.watchTransaction(Ao)&&(y.value="",c.value="",r.value="",p.value=0,setTimeout(()=>{f.updatePositionItem(n.value.id),L.value.getAccount(s.value.address)},1e3),Number(p.value)==100&&A.name=="auto-pool-detail"&&Yo.push("/pool/auto"))}else Bo(!1),To(!0);po.value=!1}catch(X){console.log("Remove error",X),po.value=!1,Bo(!1),To(!0)}};$o(()=>n.value,(l,P)=>{l&&!Xo(l)&&(a.value=l==null?void 0:l.token_a,u.value=l==null?void 0:l.token_b,console.log("触发###"),(!P||P&&P.address!==l.address)&&(p.value=p.value>0?p.value:25,Io({value:p.value/100})))},{immediate:!0});const jo=b(()=>{const l=Number(r.value)>Number(m.value);return!y.value&&!c.value||!r.value||r.value<=0||!y.value&&g.value||!c.value&&Z.value?io("button.enterAmount"):l?"Invalid Amount":D.value?io("button.insufficientLiquidity"):io("button.remove")}),h=b(()=>{const l=Number(r.value)>Number(m.value);return!!(!y.value&&!c.value||Number(y.value)<=0&&g.value||Number(c.value)<=0&&Z.value||!r.value||r.value<=0||l||D.value||ao.value!=="STATUS_RUNNING")}),B=l=>(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||te("/image/coins/sui-unknown.png"),K=l=>{y.value="",c.value="",q.value=!0,k.value="",l=="only-a"?(g.value=!g.value,Z.value=!1,F.value=!0):(Z.value=!Z.value,g.value=!1,F.value=!1)},fo=l=>{q.value=!0,p.value=100,l==="fromCoin"?F.value=!0:F.value=!1},Co=l=>{q.value=!0,p.value=50,l==="fromCoin"?F.value=!0:F.value=!1},O=C(),_o=async()=>{F.value;const l=n.value.token_a.decimals,P=n.value.token_b.decimals,N=g.value?lo.value:ko.value;console.log(N,"###receiveAmount");const Q=a.value.address===n.value.token_a.address&&u.value.address===n.value.token_b.address?0:1;if(g.value||Z.value){console.log(N,"##receiveAmount");let V=await L.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:Q==1,byAmountIn:!0,amount:N});console.log(V,V.estimatedAmountOut,l,P,"##preSwapRes"),O.value=new i(V.estimatedAmountOut).add(new i(g.value?ko.value:lo.value)).toString(),console.log(O.value,"###onlyTokenBalance.value"),Io({value:p.value/100})}};$o(()=>[g.value,Z.value],([l,P])=>{l||P?_o():Io({value:p.value/100})},{immediate:!0});const yo=l=>`${l}%`,ao=b(()=>t.value.currentAutoPoolStatus);return{removeLiquidityBtnText:jo,removeLiquidityBtnDisabled:h,wallet:s,ratioArr:_,positionInfo:n,isShowRemoveModal:R,needReverse:I,fromCoin:a,toCoin:u,lpAmount:r,lpBalance:m,sliderVal:p,sFixD:G,isSlider:q,fromCoinAmount:y,toCoinAmount:c,setPercent:Io,toRemove:Ko,addCommom:$,getCoinIcon:B,isOnlyA:g,isOnlyB:Z,onlyToken:K,fixedFromCoin:F,maxBtnSelect:fo,halfBtnSelect:Co,fromCoinBlance:ko,toCoinBlance:lo,showFromCoinLock:U,showToCoinLock:E,removeText:k,onlyTokenBalance:O,totalWithdraw:qo,formatter:yo,currentAutoPoolStatus:ao}}});const ue=o=>(Uo("data-v-eef2adc3"),o=o(),Fo(),o),tl={class:"auto-pool-add"},sl={class:"auto-pool-add-content"},ll={class:"liquidity-action-tab"},il=ue(()=>e("div",{class:"remove tab-active"},"Remove",-1)),al={key:0,class:"only-token"},ul=ue(()=>e("div",null,"Deposit Amounts",-1)),rl={key:0},dl={key:0},vl={key:0,class:"card-item"},ml={key:1,class:"card-item"},cl={class:"remove-ratio"},pl={class:"remove-ratio-select"},fl={key:0,class:"ratio"},yl={key:1,class:"ratio"},_l={class:"ratio-list"},bl=["onClick"],hl=ue(()=>e("span",null,"Pool Closed",-1)),kl={key:4,class:"remove-info"},gl={key:0,class:"remove-text total-amount"},$l={class:"total-amount"},wl=ue(()=>e("span",null,"Total Withdraw",-1)),Il={class:"total-amount"},Cl=ue(()=>e("span",null,"LP Burn Amount",-1)),Al={key:0},Pl={key:1};function Sl(o,s,H,W,j,S){var I,a,u,R,r,m,q,L,D,x,y,c,w,U,E,no,F;const _=Ce,p=Ae,A=He,f=ie("AutoPoolV2PoolStatus"),t=Ie,n=Se;return v(),T("div",tl,[e("div",sl,[e("div",ll,[e("div",{class:"increase",onClick:s[0]||(s[0]=we(k=>o.$emit("changeCurrentTab"),["stop"]))},"Add"),il]),!o.showFromCoinLock&&!o.showToCoinLock?(v(),T("div",al,[ul,e("div",null,[e("div",{class:"only-a",onClick:s[1]||(s[1]=k=>o.onlyToken("only-a"))},[e("p",null,[o.isOnlyA?(v(),T("span",rl)):eo("",!0)]),e("span",null,d(o.needReverse?(R=(u=o.positionInfo)==null?void 0:u.token_b)==null?void 0:R.symbol:(a=(I=o.positionInfo)==null?void 0:I.token_a)==null?void 0:a.symbol)+" only",1)]),e("div",{class:"only-b",onClick:s[2]||(s[2]=k=>o.onlyToken("only-b"))},[e("p",null,[o.isOnlyB?(v(),T("span",dl)):eo("",!0)]),e("span",null,d(o.needReverse?(L=(q=o.positionInfo)==null?void 0:q.token_a)==null?void 0:L.symbol:(m=(r=o.positionInfo)==null?void 0:r.token_b)==null?void 0:m.symbol)+" only",1)])])])):eo("",!0),e("div",{class:ce(o.needReverse?"card-container reverse":"card-container")},[(o.needReverse?!o.isOnlyA:!o.isOnlyB)?(v(),T("div",vl,[Y(_,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":s[3]||(s[3]=k=>o.fromCoinAmount=k),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.isOnlyA?o.onlyTokenBalance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[4]||(s[4]=k=>o.maxBtnSelect("fromCoin")),onOnHalf:s[5]||(s[5]=k=>o.halfBtnSelect("fromCoin")),onOnInput:s[6]||(s[6]=k=>{o.isSlider=!1,o.fromCoinAmount=k}),onOnFocus:s[7]||(s[7]=()=>{o.isSlider=!1,o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock?(v(),so(p,{key:0})):eo("",!0)])):eo("",!0),(o.needReverse?!o.isOnlyB:!o.isOnlyA)?(v(),T("div",ml,[Y(_,{modelValue:o.toCoinAmount,"onUpdate:modelValue":s[8]||(s[8]=k=>o.toCoinAmount=k),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.isOnlyB?o.onlyTokenBalance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[9]||(s[9]=k=>o.maxBtnSelect("toCoin")),onOnHalf:s[10]||(s[10]=k=>o.halfBtnSelect("toCoin")),onOnInput:s[11]||(s[11]=k=>{o.isSlider=!1,o.toCoinAmount=k}),onOnFocus:s[12]||(s[12]=()=>{o.isSlider=!1,o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock?(v(),so(p,{key:0})):eo("",!0)])):eo("",!0)],2),e("div",cl,[e("div",pl,[Number(o.lpBalance)>=Number(o.lpAmount)?(v(),T("div",fl,d(o.sliderVal>0&&Number(("sFixD"in o?o.sFixD:M(G))(o.sliderVal,2))<.01?"<0.01":("sFixD"in o?o.sFixD:M(G))(o.sliderVal,2))+"% ",1)):(v(),T("div",yl,"--")),e("div",_l,[(v(!0),T(Xe,null,Ge(o.ratioArr,(k,to)=>(v(),T("div",{key:to,class:ce(["ratio-item",o.sliderVal==k.value?"ratio-item-active":""]),onClick:()=>{o.isSlider=!0,o.sliderVal=k.value}},d(k.name),11,bl))),128))])]),Y(A,{value:o.sliderVal,"onUpdate:value":s[13]||(s[13]=k=>o.sliderVal=k),"tip-formatter":o.formatter,onChange:s[14]||(s[14]=k=>o.isSlider=!0)},null,8,["value","tip-formatter"])])]),o.currentAutoPoolStatus=="STATUS_REBALANCING"?(v(),so(f,{key:0})):eo("",!0),(D=o.positionInfo)!=null&&D.is_pause?(v(),so(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:Lo(()=>[hl]),_:1})):o.wallet.connected?(v(),so(t,{key:2,class:"big-btn liquidity-btn",disabled:o.removeLiquidityBtnDisabled,onClick:s[15]||(s[15]=k=>o.toRemove())},{default:Lo(()=>[e("span",null,d(o.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(v(),so(t,{key:3,class:"big-btn liquidity-btn",onClick:s[16]||(s[16]=k=>o.wallet.setIsShowWalletModal(!0))},{default:Lo(()=>[e("span",null,d(o.$t("button.connectWallet")),1)]),_:1})),o.removeLiquidityBtnDisabled?eo("",!0):(v(),T("div",kl,[o.removeText&&(o.isOnlyA&&o.fromCoinAmount||o.isOnlyB&&o.toCoinAmount)?(v(),T("div",gl,d(o.removeText),1)):eo("",!0),e("div",$l,[wl,e("span",null,d(o.totalWithdraw),1)]),e("div",Il,[Cl,o.fromCoinAmount||o.toCoinAmount?(v(),T("span",Al,d(("addCommom"in o?o.addCommom:M($))(o.lpAmount))+" "+d(o.needReverse?(x=o.toCoin)==null?void 0:x.symbol:(y=o.fromCoin)==null?void 0:y.symbol)+"-"+d(o.needReverse?(c=o.fromCoin)==null?void 0:c.symbol:(w=o.toCoin)==null?void 0:w.symbol),1)):(v(),T("span",Pl,"0 "+d(o.needReverse?(U=o.toCoin)==null?void 0:U.symbol:(E=o.fromCoin)==null?void 0:E.symbol)+"-"+d(o.needReverse?(no=o.fromCoin)==null?void 0:no.symbol:(F=o.toCoin)==null?void 0:F.symbol),1))])])),o.isShowRemoveModal?(v(),so(n,{key:5,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,onOnClose:s[17]||(s[17]=k=>o.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):eo("",!0)])}const Tl=No(nl,[["render",Sl],["__scopeId","data-v-eef2adc3"]]),Rl=Do({components:{AutoPoolV2Info:Te,AutoPoolV2PositionRange:Re,AutoPoolV2PoolComposition:Be,AutoPoolV2PoolLiquidity:Ne,AutoPoolV2PoolAdd:el,AutoPoolV2PoolRemove:Tl},setup(){const o=Ho(),s=Go(),H=me(),W=b(()=>H),j=()=>{o.getAutoPoolAPY(),o.getAutoPoolList(),s.setPoolConfigList(W.value.chainName,W.value.filterCoinsObj)},S=C(),_=zo();$o(()=>_.query.action,f=>{f&&(S.value=f)},{immediate:!0});const p=C(),A=()=>{p.value=window.setInterval(()=>{o.getVault(_.params.id)},6e4)};return ze(()=>{console.log(_,"route##"),A()}),Ye(()=>{window.clearInterval(p.value)}),{clickRefresh:j,currentTab:S}}});const ql={class:"auto-pool-detail-v2"},Bl={class:"detail-top"},Nl={class:"detail-bottom pc-detail"},Ml={class:"detail-bottom-left"},Ol={class:"detail-bottom-right"},Ll={class:"h5-detail"};function Dl(o,s,H,W,j,S){const _=Le,p=Te,A=Re,f=Be,t=Ne,n=ie("AutoPoolV2PoolAdd"),I=ie("AutoPoolV2PoolRemove");return v(),T("div",ql,[e("div",Bl,[Y(_,{onClickRefresh:o.clickRefresh},null,8,["onClickRefresh"]),Y(p)]),e("div",Nl,[e("div",Ml,[Y(A),Y(f),Y(t)]),e("div",Ol,[o.currentTab=="add"?(v(),so(n,{key:0,onChangeCurrentTab:s[0]||(s[0]=a=>o.currentTab="remove")})):(v(),so(I,{key:1,onChangeCurrentTab:s[1]||(s[1]=a=>o.currentTab="add")}))]),e("div",Ll,[o.currentTab=="add"?(v(),so(n,{key:0,onChangeCurrentTab:s[2]||(s[2]=a=>o.currentTab="remove")})):(v(),so(I,{key:1,onChangeCurrentTab:s[3]||(s[3]=a=>o.currentTab="add")})),Y(A),Y(f),Y(t)])])])}const ri=No(Rl,[["render",Dl],["__scopeId","data-v-283e0515"]]);export{ri as default};
