import{j as Gt,n as vt,d as pe,e as ht,u as It,a as Ie,c as Ae,s as ft,T as nt,F as Jt,b as je,l as Ct,p as _t}from"./pool.b53c6670.js";import{a as at,r as N,l as B,H as At,q as Be,e as rt,o as F,f as V,t as Lt,N as Qt,h as s,O as gt,v as ce,u as ge,x as oe,c as Je,p as Nt,k as qt,S as Mt,y as $t,m as wt,K as Bt,s as Yt,F as pt,E as Pt,i as ze,A as ct,w as bt,j as Ft,P as Vt,b as eo,B as to}from"./entry.4f648195.js";/* empty css              */import{s as st,m as oo,l as no,b as io,a as ao}from"./transform.c672907f.js";import{D as a}from"./decimal.0bdeb344.js";import{u as yt,a as ro}from"./sha256.ef37954e.js";import{d as Rt,_ as Ot,c as Ut,a as xt,b as lo}from"./new-liquidity-title.62dcfd23.js";import{i as kt}from"./import-icon.de3e6c66.js";/* empty css              */import{positionError as et,fromCoin as w,toCoin as k,tickList as Ve,minPrice as $,maxPrice as T,currentPrice as tt,currentPriceReverse as it,direction as Le,currentPriceTab as H,defaultMinPrice as dt,defaultMaxPrice as mt,toggle as jt,isInputTotalAmount as De,priceConfigObj as Ye,fromCoinAmount as y,toCoinAmount as C,fixedFromCoin as ye,resetTickList as Tt,resetData as so}from"./data.276fb330.js";import{_ as uo}from"./coin-lock.fc5925d4.js";import{_ as co}from"./farms-auto-stake.50c02383.js";import{_ as mo}from"./coin-select.170bbad2.js";import{_ as vo}from"./viewDetail.4466fef5.js";import{a as fo}from"./new-add-or-create.b853d3fc.js";import{u as go}from"./notifi.21c0fdac.js";import{_ as po,a as bo}from"./icon-Add-Liquidity_2x.0acb06cb.js";import"./img-lock_2x.a28135f4.js";import"./lock.c9e84426.js";/* empty css              *//* empty css              */import"./token-warning.d112955e.js";import"./swap-setting.0af1bf4d.js";/* empty css              */import"./icon-error_2x.955eabb3.js";import"./img-lock_2x.b0ce6b80.js";import"./farms.69d54ffd.js";import"./img-no-Positions_2x.672037eb.js";import"./status-block.974cdf03.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./useWhale.ed374d87.js";function St(e,v,he){const de=new a(10).pow(v-he);return new a(1.0001).pow(e).mul(de)}const ko=at({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""},zoom:{type:Number,default:1}},setup(e,v){const he=N(""),de=N(""),R=B(()=>{var n,r,d,E,O,J;return console.log(e.poolInfo,"===>props.poolInfo"),(n=e.poolInfo)!=null&&n.current_sqrt_price&&((r=e.poolInfo)!=null&&r.coinA.decimals)&&((d=e.poolInfo)!=null&&d.coinB.decimals)?i.sqrtPriceX64ToPrice((E=e.poolInfo)==null?void 0:E.current_sqrt_price,(O=e.poolInfo)==null?void 0:O.coinA.decimals,(J=e.poolInfo)==null?void 0:J.coinB.decimals).toString():"0"}),_e=B(()=>{let n=0;return e.direction?n=(Number(e.minPrice)/Number(R.value)-1)*100:n=(Number(e.minPrice)/Number(1/Number(R.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),x=B(()=>{let n=0;return e.direction?n=(Number(e.maxPrice)/Number(R.value)-1)*100:n=(Number(e.maxPrice)/Number(1/Number(R.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),X=yt(),S=B(()=>X),ee=B(()=>S.value.chainName?ht(S.value.chainName):{}),{TickMath:i,getNearestTickByTick:I}=ee.value,ne=(n=[])=>{let r=6;const d=Math.abs(Number(n[0])-Number(n[n.length-1]));return d>=6?r=0:d>=1?r=1:d>=.1?r=2:d>=.01?r=3:d>=.001?r=4:d>=1e-4?r=5:d>=1e-5?r=6:d>=1e-6?r=7:d>=1e-7&&(r=8),r},Pe=(n,r=1)=>{if(n&&n.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const d=Number(e.poolInfo.current_tick_index);console.log("0117###dataProcessing###currentTick###",d),console.log("0117###dataProcessing###props.poolInfo###",e.poolInfo),console.log("0117###dataProcessing###minPrice###",e.minPrice),console.log("0117###dataProcessing###maxPrice###",e.maxPrice),console.log("0117###dataProcessing###poolInfo###",e.poolInfo);let E=d+100*r,O=d-100*r,J,se;if(e.maxPrice==="∞")se=ee.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?se=i.priceToTickIndex(new a(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):se=i.priceToTickIndex(new a(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{se=443636}if(e.minPrice==="0")J=ee.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?J=i.priceToTickIndex(new a(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):J=i.priceToTickIndex(new a(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{J=-443636}let we=0;if(e.currentPriceTab!=="full range"){if(d>=J&&d<=se){const _=d-J,ie=se-d;we=Math.max(Math.abs(_),Math.abs(ie))}else d<J?we=Math.abs(se-d):we=Math.abs(d-J);E=d+we+100*r,O=d-we-100*r}else{const _=(Math.abs(d)>5e3,2e4);E=d+_*r,O=d-_*r}O<-443636&&(O=-443636),E>443636&&(E=443636);const b=new a(n.liquidity).div(Math.pow(10,8)).toString(),P=e.tickList;console.log("0117####drawChart####tick_info_array####",P);const q=[],be=[];let h={};for(let _=0;_<P.length;_++){if(h=P[_],h.index<=d&&h.index>=O){if(q.length<1&&_!==0){const ie=P[_-1];q.unshift({...ie,index:O,source:"left"})}q.unshift(h)}else if(h.index>d&&h.index<=E&&(be.push(h),q.length<1&&_!==0)){const ie=P[_-1];q.push({...ie,index:O,source:"left"})}if(h.index>E){const ie=P[_];if(be.push({...ie,index:E,source:"right"}),q.length<1&&_!==0){const Qe=P[_-1];q.push({...Qe,index:O,source:"left"})}break}}let A="0";for(let _=q.length-1;_>=0;_--)A=new a(A).plus(new a(q[_].liquidityNet.toString()).div(Math.pow(10,8))).toString(),q[_].liquityAmount=A;let D=b;for(let _=0;_<be.length;_++)D=new a(D).plus(new a(be[_].liquidityNet.toString()).div(Math.pow(10,8))).toString(),be[_].liquityAmount=D;let W=[];const L=P&&P.length>0?{index:d,liquityAmount:Number(b)}:{index:d,liquityAmount:0};(q.length>0||be.length>0)&&(W=[...q.reverse(),L,...be],e.direction||(W=W.reverse()));const Re=[];P.forEach(_=>{Re.push({..._,liquidityGross:_.liquidityGross.toString(),liquidityNet:_.liquidityNet.toString()})}),console.log("0117####drawChart####testTickInfoArray####",Re),console.log("0117####drawChart####currentLiquity####",b),console.log(W,"###chartData"),f(W,O,E,J,se,d)}};let Ce=N(!1);const te=N(!1);At(()=>{const n=document.body.clientWidth;te.value=!0,n<750?Ce.value=!1:Ce.value=!0,window.onresize=()=>{document.body.clientWidth<750?Ce.value=!1:Ce.value=!0,console.log("这里执行了吗"),Pe(e.poolInfo,e.zoom)}});const f=(n,r,d,E,O,J)=>{console.log("0117####drawChart####chartData####",n),console.log("0117####drawChart####tickMin####",r),console.log("0117####drawChart####tickMax####",d),console.log("0117####drawChart####minPriceTick####",E),console.log("0117####drawChart####maxPriceTick####",O),console.log("0117####drawChart####currentTick####",J),console.log("0117####drawChart####props.direction####",e.direction),console.log("0518###newd3###props.before7dContractPriceLowest###",e.before7dContractPriceLowest),console.log("0518###newd3###props.before7dContractPriceHighest###",e.before7dContractPriceHighest);let se,we;e.direction?(se=e.before7dContractPriceLowest?i.priceToTickIndex(new a(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",we=e.before7dContractPriceHighest?i.priceToTickIndex(new a(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(se=e.before7dContractPriceLowest?i.priceToTickIndex(new a(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",we=e.before7dContractPriceHighest?i.priceToTickIndex(new a(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const b={top:30,right:35,bottom:20,left:80};let P,q;Ce.value?(P=460-b.left-b.right,q=205-b.top-b.bottom):(P=340-b.left-b.right,q=205-b.top-b.bottom);const be=d-r,h=parseInt(String(be/4));let A=[r+h/4,r+h,r+2*h,d-h,d-h/4];const D=r,W=d,L=P/(W-D);e.currentPriceTab==="full range"&&(A=[r,r+2*h,d]),console.log("0117####drawChart####xArr####",A),console.log("0117####drawChart####utickMin####",D),console.log("0117####drawChart####utickMax####",W),console.log("0117####drawChart####unit####",L);const Re=A.map(l=>e.direction?St(l,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new a(1).div(St(l,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),_=ne(Re);st("#chart").selectAll("*").remove();const ie=st("#chart").attr("width",P+b.left+b.right).attr("height",q+b.top+b.bottom).append("g").attr("transform",`translate(${b.left},${b.right})`),Qe=oo(n,function(l){return Number(Math.abs(l.liquityAmount))})||0,Ne=no().range([0,q]).domain([Qe,0]);io().rangeRound([0,P]).padding(.1);const ot=ie.append("g").attr("id","barsBox").selectAll("rect").data(n).enter().append("rect");S.value.theme=="default"?ot.attr("x",function(l,u){return u===0?0:e.direction?Math.abs(l.index-D)*L:Math.abs(W-l.index)*L}).attr("y",function(l,u){return e.direction?u===n.length-1?0:Ne(l.liquityAmount):u===n.length-1?0:Ne(n[u+1].liquityAmount)}).attr("width",function(l,u){return u===0&&n.length===1&&l.liquityAmount>0?P:(e.direction,u!==n.length-1?Math.abs(n[u+1].index-l.index)*L:0)}).attr("height",function(l,u){return u===0&&n.length===1&&l.liquityAmount>0?q:e.direction?u===n.length-1?0:q-Ne(l.liquityAmount):u===n.length-1?0:q-Ne(n[u+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):ot.attr("x",function(l,u){return u===0?0:e.direction?Math.abs(l.index-D)*L:Math.abs(W-l.index)*L}).attr("y",function(l,u){return e.direction?u===n.length-1?0:Ne(Math.abs(l.liquityAmount)):u===n.length-1?0:Ne(Math.abs(n[u+1].liquityAmount))}).attr("width",function(l,u){return u===0&&n.length===1&&l.liquityAmount>0?P:(e.direction,u!==n.length-1?Math.abs(n[u+1].index-l.index)*L:0)}).attr("height",function(l,u){if(u===0&&n.length===1&&l.liquityAmount>0)return q;if(e.direction)return u===n.length-1?0:Number(l.liquityAmount)?q-Ne(Math.abs(l.liquityAmount)):0;{if(u===n.length-1)return 0;const $e=q-Ne(Math.abs(n[u+1].liquityAmount));return Number(n[u+1].liquityAmount)?$e:0}}).attr("fill",function(l,u){return"#417494"}).attr("class","bars").attr("stroke-width",1).attr("stroke",function(l,u){return"#417494"});const t=ie.append("g");t.append("line").attr("x1",0).attr("y1",155).attr("x2",P).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const m=t.append("g");let g=0;if(e.direction){for(let l=0;l<A.length;l++){const u=pe(Re[l],_)||"0";console.log("0423####price####",u),Re.push(u);const $e=Math.abs(A[l]-D)*L;let ue=0;for(let ve=0;ve<u.length;ve++)u[ve]==="1"?ue+=4.02:u[ve]==="."?ue+=2.64:u[ve]==="7"?ue+=5.48:ue+=6;console.log($e,"x=>>>"),m.append("text").text(u).attr("x",$e-ue/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}g=Math.abs(J-D)*L}else{for(let l=A.length-1;l>=0;l--){const u=pe(Re[l],_)||0;Re.push(u);const $e=Math.abs(A[l]-W)*L;let ue=0;for(let ve=0;ve<u.length;ve++)u[ve]==="1"?ue+=4.02:u[ve]==="."?ue+=2.64:u[ve]==="7"?ue+=5.48:ue+=6;m.append("text").text(u).attr("x",$e-ue/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}g=Math.abs(J-W)*L}console.log(J,W,L,"######currentPricePositon"),(S.value.theme=="default"?ie.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):ie.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+g+", 0)");let Q,j,me,Oe;e.direction?(Q=E<D?-100:parseInt(String(Math.abs(E-D)*L)),j=O<D?-100:parseInt(String(Math.abs(O-D)*L)),me=se<D?-100:Math.abs(se-D)*L,Oe=we<D?-100:Math.abs(we-D)*L):(j=E<D?-100:Math.abs(W-E)*L,Q=O<D?-100:Math.abs(W-O)*L,Oe=se>W?-100:Math.abs(W-se)*L,me=we>W?-100:Math.abs(W-we)*L),e.minPrice==="0"&&(Q=0),e.maxPrice==="∞"&&(j=P),console.log(Q,"==>minPriceTickX"),Ce.value,he.value=P-Q+87+"px",de.value=j+98+"px",se&&me<P&&ie.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+me+", 0)"),we&&Oe<P&&ie.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+Oe+", 0)");const qe=ie.append("g").attr("id","left-handle"),Me=ie.append("g").attr("id","right-handle");S.value.theme=="default"?(qe.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),qe.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),qe.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),qe.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),Me.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Me.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),Me.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),Me.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(qe.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),qe.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),qe.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),qe.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),Me.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Me.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),Me.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),Me.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),console.log("0525###d3###select###minPriceTickX###",Q),console.log("0525###d3###select###maxPriceTickX###",j),qe.attr("transform","translate("+Q+", 0)"),Me.attr("transform","translate("+j+", 0)");const Fe=ao().extent([[0,0],[P,q]]).handleSize(30).on("end",Ze);ie.append("g").attr("class","brush").call(Fe).call(Fe.move,[Q,j]);function Ze(l){if(!l.sourceEvent||!l.selection)return;qe.attr("transform","translate("+l.selection[0]+", 0)"),Me.attr("transform","translate("+l.selection[1]+", 0)"),Ce.value,he.value=P-l.selection[0]+87+"px",de.value=l.selection[1]+74+"px";let u,$e;console.log("0525###d3###select###e.selection[0]###",l.selection[0]),console.log("0525###d3###select###e.selection[0]###",l.selection[1]),console.log("0525###d3###select###props.direction###",e.direction),console.log("0525###d3###select###width###",P),console.log("0525###d3###select###unit###",L),console.log("0525###d3###select###utickMin###",D),console.log("0525###d3###select###utickMax###",W),console.log("0525###d3###select###props.poolInfo###",e.poolInfo);let ue=0,ve=0;e.direction?(ue=I(parseInt(String(l.selection[0]/L+D)),Number(e.poolInfo.tickSpacing)),u=i.tickIndexToPrice(ue,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),ve=I(parseInt(String(l.selection[1]/L+D)),Number(e.poolInfo.tickSpacing)),$e=i.tickIndexToPrice(ve,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),console.log("1114###d3###select###minTick###",ue),console.log("1114###d3###select###maxTick###",ve),console.log("1114###d3###select###minPrice###",u),console.log("1114###d3###select###maxPrice###",$e)):(ve=I(W-l.selection[0]/L,Number(e.poolInfo.tickSpacing)),u=1/i.tickIndexToPrice(ve,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),ue=I(W-l.selection[1]/L,Number(e.poolInfo.tickSpacing)),$e=1/i.tickIndexToPrice(ue,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),v.emit("onChangeMinPrice",String(pe(String(u),6))),v.emit("onChangeMaxPrice",String(pe(String($e),6)))}S.value.theme=="default"?st(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):st(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632"),console.log("画完了##")};return N(""),Be(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab,e.zoom,e.tickList],([n,r,d,E,O,J])=>{console.log(n,r,d,d>r,O,"poolInfo && minPrice && maxPrice && (maxPrice > minPrice)"),n&&r&&d&&(n!=null&&n.liquidity)&&(E!=="Custom"||console.log("绘制"),Pe(n,O))},{immediate:!0}),console.log(e,"props===>"),{store:S,loading:te,rangeSizeLower:_e,rangeSizeUpper:x,rangeSizeLowerPosition:he,rangeSizeUpperPosition:de,decimalFormat:Gt,numberformat:vt}}});const ho=e=>(Nt("data-v-60bd7ae2"),e=e(),qt(),e),wo={class:"chart-box"},yo={class:"chart"},Co=ho(()=>s("svg",{id:"chart"},null,-1));function _o(e,v,he,de,R,_e){const x=Mt;return F(),V("div",wo,[Lt(s("div",yo,[e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="∞"?(F(),V("div",{key:0,class:"range-size range-size-lower",style:gt({right:e.rangeSizeLowerPosition})},ce(("numberformat"in e?e.numberformat:ge(vt))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):oe("",!0),e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="∞"?(F(),V("div",{key:1,class:"range-size range-size-upper",style:gt({left:e.rangeSizeUpperPosition})},ce(("numberformat"in e?e.numberformat:ge(vt))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):oe("",!0),Co],512),[[Qt,!e.chartLoading]]),e.chartLoading?(F(),Je(x,{key:0})):oe("",!0)])}const zt=rt(ko,[["render",_o],["__scopeId","data-v-60bd7ae2"]]),Po=at({props:{lever:{type:String,default:""}},setup(){return{}}});const To=e=>(Nt("data-v-619778e2"),e=e(),qt(),e),So={class:"lever"},Io=To(()=>s("div",{class:"lever-title"},"Leverage",-1)),Ao={class:"lever-text"};function Lo(e,v,he,de,R,_e){return F(),V("div",So,[Io,s("div",Ao,ce(e.lever),1)])}const No=rt(Po,[["render",Lo],["__scopeId","data-v-619778e2"]]),qo=at({components:{NewLiquidityD3Chart:zt,NewLiquidityPrice:Rt},setup(){const{t:e,locale:v}=$t(),he=N("liquidity"),de=yt(),R=B(()=>de),_e=B(()=>R.value.chainName),x=It(),X=B(()=>x),S=B(()=>R.value.chainName?ht(R.value.chainName):{});At(()=>{et.value=!1});const ee=wt(),i=B(()=>{let t=null;for(let m=0;m<X.value.poolConfigList.length;m++){const g=X.value.poolConfigList[m];g.address==ee.query.poolAddress&&(t=g)}return console.log(t,"===>basePoolInfo"),t}),I=B(()=>{let t=null;for(const m in X.value.poolsObj){const g=X.value.poolsObj[m];g.address==ee.query.poolAddress&&(console.log(g,"p===>"),t=g)}return t}),ne=N(),Pe=N(!0),Ce=async(t,m)=>{if(console.log(Pe.value,"==>chartLoading.value"),Pe.value=!0,m){Ve.value=[],f.value=[];const g=t.token_a.decimals,M=t.token_b.decimals;console.log(t,"pool===>1111"),console.log("poolPrice###pool.current_tick_index####",t.current_tick_index);const Q=nt.tickIndexToPrice(t.current_tick_index,g,M);console.log("poolPrice###",Q.toString()),tt.value=nt.sqrtPriceX64ToPrice(t==null?void 0:t.current_sqrt_price,g,M).toString(),console.log(tt.value,"##currentPrice.value"),it.value=new a(1).div(nt.sqrtPriceX64ToPrice(t==null?void 0:t.current_sqrt_price,g,M)).toString(),console.log(it.value,"##currentPriceReverse.value"),w.value=t.needReverse?t.token_b:t.token_a,k.value=t.needReverse?t.token_a:t.token_b,ne.value=t.needReverse,t.token_a.address.toLowerCase()===w.value.address.toLowerCase()&&t.token_b.address.toLowerCase()===k.value.address.toLowerCase()?Le.value=!0:Le.value=!1,console.log(t,"187===>"),console.log(t,"###pool===>");let j={poolAddress:t.address,coinTypeA:t.coin_a_address,coinTypeB:t.coin_b_address};const me=await S.value.getTicks(j);Ve.value=me?S.value.getTickDataFromUrlData(me):[],console.log(Ve.value,"===>chartLoadingtickList.value"),Pe.value=!1,r(t)}},te=t=>{const m=t.token_a.decimals,g=t.token_b.decimals;console.log(t,"pool===>1111"),console.log("poolPrice###pool.current_tick_index####",t.current_tick_index),tt.value=nt.sqrtPriceX64ToPrice(t==null?void 0:t.current_sqrt_price,m,g).toString(),it.value=new a(1).div(nt.sqrtPriceX64ToPrice(t==null?void 0:t.current_sqrt_price,m,g)).toString()},f=N([]),n=N(),r=t=>{const m=t.token_a.decimals,g=t.token_b.decimals;let M=X.value.poolPriceConfigObj&&X.value.poolPriceConfigObj[t.address]&&X.value.poolPriceConfigObj[t.address].recommend_ranges||{};const Q=X.value.poolPriceConfigObj&&X.value.poolPriceConfigObj[t.address]&&X.value.poolPriceConfigObj[t.address].type||"";console.log(M,"===>priceConfigList");let j,me;const Oe=Jt(t.current_tick_index,t.tickSpacing);n.value=t.current_tick_index,console.log(Oe,t.tickSpacing,"==>pool.tickSpacing"),j=Oe-Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3),me=Oe+Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3);const qe=S.value.TickMath.tickIndexToPrice(j,m,g).toString(),Me=S.value.TickMath.tickIndexToPrice(me,m,g).toString();M["full range"]={lower:S.value.TickUtil.getMinIndex(Number(I.value.tickSpacing)),upper:S.value.TickUtil.getMaxIndex(Number(I.value.tickSpacing))},M.custom={lower:j,upper:me,minPrice:qe,maxPrice:Me};const Fe=[];for(let Ze in M)M[Ze]&&(console.log(Ze,"j==>"),Fe.push({...M[Ze],key:Ze}));console.log(Fe,"priceList"),console.log(t,"###pool.type 504"),Q&&Fe&&Fe.length>2?t.isSelfBuilt?H.value="custom":Q=="stable"?H.value="suggested":H.value="passive":H.value="custom",f.value=Fe,Ye.value=M,O({key:H.value,...M[H.value]})},d=N(""),E=N(""),O=t=>{console.log("priceTab====>",t),console.log("priceTab###poolInfo###",I.value),H.value=t.key.toLowerCase();const m=I.value.token_a.decimals,g=I.value.token_b.decimals,{lower:M,upper:Q}=t;De.value=!1;const j=S.value.TickMath.tickIndexToPrice(M,m,g).toString(),me=S.value.TickMath.tickIndexToPrice(Q,m,g).toString();if(t.key=="full range"){d.value=M,E.value=Q,J();return}console.log(Le.value,"===>direct.value"),Le.value?(dt.value=String(j),$.value=String(j),mt.value=String(me),T.value=String(me),d.value=M,E.value=Q):(dt.value=String(1/Number(me)),$.value=String(1/Number(me)),mt.value=String(1/Number(j)),T.value=String(1/Number(j)),d.value=S.value.TickMath.priceToTickIndex(new a(1/Number(me)),m,g),E.value=S.value.TickMath.priceToTickIndex(new a(1/Number(j)),m,g)),console.log($.value,T.value,"===>111")},J=t=>{$.value="0",T.value="∞"};Be(()=>I.value,(t,m)=>{console.log(m,"===>oldVal"),console.log(t,"===>newVal"),(!m&&t&&!Ae(t)||m&&t&&m.address!==t.address)&&(console.log("池子信息"),Ce(t,!m||t.address!==m.address)),t&&!Ae(t)&&te(t)},{immediate:!0}),Bt(()=>{w.value=N(),k.value=N(),Ve.value=[]}),Be(()=>[i.value,I.value,X.value.recommendRangesObj],(t,m)=>{var g,M;console.log(t,"===>newValue369"),console.log(m,"===>oldValue369"),(!m||t[0]&&t[1]&&t[2]&&!Ae(t[0])&&!Ae(t[1]&&!Ae(t[2]))||((g=t[0])==null?void 0:g.address)!==((M=m[0])==null?void 0:M.address))&&t[0]&&t[2]&&!Ae(t[0])&&!Ae(t[2])&&(console.log(t[0],t[2],"======>374"),x.setSinglePool(t[0],t[2],_e.value))},{immediate:!0,deep:!0});const se=t=>{if(_e.value=="Sui")switch(t){case"passive":return"/sui-image/icon_ conservative@2x.png";case"active":return"/sui-image/icon_active@2x.png";case"full range":return"/sui-image/icon_fullrange@2x.png";case"custom":return"/sui-image/icon_costom@2x.png";case"suggested":return"/sui-image/icon_stabel@2x.png"}else switch(t){case"passive":return"/image/icon_ conservative@2x.png";case"active":return"/image/icon_active@2x.png";case"full range":return"/image/icon_fullrange@2x.png";case"custom":return"/image/icon_costom@2x.png";case"suggested":return"/image/icon_stabel@2x.png"}},we=t=>{switch(t){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"full range":return e("newAdd.fullRange");case"custom":return e("newAdd.custom")}},b=t=>{var g,M;const m=X.value.poolPriceConfigObj&&X.value.poolPriceConfigObj[(g=I.value)==null?void 0:g.address]&&X.value.poolPriceConfigObj[(M=I.value)==null?void 0:M.address].type||"";if(console.log(m,t,"==>poolType"),f.value.length>2)if(m=="unstable")switch(t){case"active":return{top:"35%"};case"passive":return{top:"10%"};case"full range":return{top:"60%"};case"custom":return{top:"85%"}}else switch(t){case"suggested":return{top:"23%"};case"full range":return{top:"48%"};case"custom":return{top:"73%"}}else if(m=="unstable")switch(t){case"active":return{top:"35%"};case"passive":return{top:"10%"};case"full range":return{top:"60%"};case"custom":return{top:"85%"}}else switch(t){case"full range":return{top:"35%"};case"custom":return{top:"60%"}}},P=N(1),q=()=>{const t=P.value/2;P.value=t},be=()=>{const t=P.value*2;P.value=t};console.log(f.value,"==>priceTablList");const h=B(()=>{var t,m,g;return!I.value||Ae(R.value.addressHistTokens)||!R.value.addressHistTokens[(t=I.value)==null?void 0:t.poolAddress]?null:Object.fromEntries((g=R.value.addressHistTokens[(m=I.value)==null?void 0:m.poolAddress])==null?void 0:g.data.map(M=>[M.key,M.value]))}),A=N(30),D=N("30D"),W=B(()=>Le.value?h.value&&pe(A.value==7?h.value.before_7_d_contract_price_lowest:A.value==24?h.value.before_24_h_contract_price_lowest:h.value.before_30_d_contract_price_lowest,6)||0:h.value&&pe(new a(1).div(A.value==7?h.value.before_7_d_contract_price_highest:A.value==24?h.value.before_24_h_contract_price_highest:h.value.before_30_d_contract_price_highest).toString(),6)||0),L=B(()=>Le.value?h.value&&pe(A.value==7?h.value.before_7_d_contract_price_highest:A.value==24?h.value.before_24_h_contract_price_highest:h.value.before_30_d_contract_price_highest,6)||0:(h.value&&pe(1/Number(A.value==7?h.value.before_7_d_contract_price_lowest:A.value==24?h.value.before_24_h_contract_price_lowest:h.value.before_30_d_contract_price_lowest),6))==1/0?0:h.value&&pe(1/Number(A.value==7?h.value.before_7_d_contract_price_lowest:A.value==24?h.value.before_24_h_contract_price_lowest:h.value.before_30_d_contract_price_lowest),6)||0),Re=B(()=>{const t=Number($.value),m=Number(T.value);if($.value=="0"&&T.value=="∞"||H.value=="full range")return"1x";if($.value==T.value||H.value=="full range")return"--";if($.value&&T.value&&$.value!=="0"&&T.value!=="∞"){const g=ft(1/(1-Number((t/m)**.25)),2);return Number(g)>0?g+"x":"--"}else return 1}),_=B(()=>{var t,m,g,M,Q,j;return((t=w.value)==null?void 0:t.isSelfBuilt)||((m=k.value)==null?void 0:m.isSelfBuilt)||((M=X.value.tokensObj[(g=w.value)==null?void 0:g.address])==null?void 0:M.isSelfBuilt)||((j=X.value.tokensObj[(Q=k.value)==null?void 0:Q.address])==null?void 0:j.isSelfBuilt)}),ie=(t,m)=>{console.log(t,"####0731 priceRangeChangeMin"),t!==$.value&&H.value=="full range"?(console.log(f.value,"===>priceTablList"),O({key:"custom",...f.value.custom})):H.value!=="full range"&&H.value!=="custom"?(H.value="custom",$.value=t):$.value=t},Qe=(t,m)=>{console.log(t,"###priceRangeChangeMax maxPirce"),t!==T.value&&H.value=="full range"?O({key:"custom",...f.value.custom}):H.value!=="full range"&&H.value!=="custom"?(H.value="custom",t=="0"?T.value="∞":T.value=t):t=="0"?T.value="∞":T.value=t};return console.log($.value,T.value,"683==>"),Be(()=>[$.value,T.value],([t,m])=>{console.log(t,m,"minmax new-liquidity-left")},{deep:!0,immediate:!0}),{positionError:et,getCoinIcon:t=>{var m;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((m=X.value.tokensObj[t==null?void 0:t.address])==null?void 0:m.logo_url)||(R.value.theme==="default"?kt("/image/coins/unknown.png"):kt("/image/coins/sui-unknown.png"))},chainName:_e,store:R,currentTab:he,currentPrice:tt,currentPriceReverse:it,fromCoin:w,toCoin:k,direction:Le,needReverse:ne,addCommom:Ie,decimalUi:pe,priceTablList:f,currentPriceTab:H,sliderStyle:b,poolInfo:I,tickList:Ve,getPriceTabImage:se,getPriceTabText:we,defaultMinPrice:dt,defaultMaxPrice:mt,minPrice:$,maxPrice:T,currentTick:n,chartLoading:Pe,zoomOut:q,zoomIn:be,zoom:P,priceTab:O,before7dContractPriceLowest:W,before7dContractPriceHighest:L,aprRewardsTime:D,lever:Re,aprRewardsParameter:A,isSelfBuilt:_,priceRangeChangeMin:ie,priceRangeChangeMax:Qe,toggle:jt,getPirceTabTips:t=>{switch(t){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"full range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"custom":return e("newAdd.customTips")}},timeList:[{label:"24H",value:24},{label:"7D",value:7},{label:"30D",value:30}]}}});const Mo={class:"new-liquidity-left"},$o=s("span",{class:"selectRange"},"Select Range",-1),Bo={class:"price-info"},Fo={class:"left"},Ro={class:"base-coin"},Oo={class:"base-coin-title"},Uo=s("span",null,"Base coin",-1),xo=s("svg",{class:"icon icon-up","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_up1"})],-1),jo=s("svg",{class:"icon icon-down","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_down1"})],-1),zo=[xo,jo],Ho={class:"base-coin-bottom"},Xo={alt:""},Eo={class:"current-price"},Do=s("div",{class:"current-price-title"},"Current Price",-1),Wo={key:0,class:"from-pre-to"},Zo={class:"right"},Ko={class:"price-range"},Go={class:"left"},Jo={class:"price-slider"},Qo={class:"slider"},Yo=s("div",{class:"slider-ratio-content"},null,-1),Vo=[Yo],en={class:"price-tab-list"},tn=["onClick"],on=["src"],nn={class:"right"},an={class:"price-zoom"},rn={class:"current-price"},ln=s("div",{class:"current-price-title"},"Current Price",-1),sn={key:0,class:"from-pre-to"},un={class:"price-zoom-right"},cn={class:"leverage"},dn=s("div",{class:"left"},null,-1),mn={class:"right"},vn={class:"right-time"},fn={key:0,class:"day-7-price-range"},gn=s("i",null,null,-1),pn={class:"gray"},bn={class:"time-list"},kn=["onClick"],hn={class:"right-price-h5"},wn={class:"apr-leverage"},yn={key:0,class:"position-tips"},Cn=["src"],_n={class:"error"};function Pn(e,v,he,de,R,_e){var I,ne,Pe,Ce,te,f,n;const x=Vt,X=zt,S=No,ee=Rt,i=Yt("image");return F(),V("div",Mo,[$o,s("div",Bo,[s("div",Fo,[s("div",Ro,[s("div",Oo,[Uo,s("div",{class:"change-price",onClick:v[0]||(v[0]=(...r)=>e.toggle&&e.toggle(...r))},zo)]),s("div",Ho,[Lt(s("img",Xo,null,512),[[i,e.getCoinIcon(e.fromCoin)]]),s("span",null,ce((I=e.fromCoin)==null?void 0:I.symbol),1)])]),s("div",Eo,[Do,s("div",null,[s("span",null,ce(e.poolInfo?e.direction?("addCommom"in e?e.addCommom:ge(Ie))(("decimalUi"in e?e.decimalUi:ge(pe))(e.currentPrice,6)):("addCommom"in e?e.addCommom:ge(Ie))(("decimalUi"in e?e.decimalUi:ge(pe))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(F(),V("span",Wo,ce((ne=e.toCoin)==null?void 0:ne.symbol)+" per "+ce((Pe=e.fromCoin)==null?void 0:Pe.symbol),1)):oe("",!0)])])]),s("div",Zo,[e.currentTab=="liquidity"?(F(),V("div",{key:0,class:"zoom-out",onClick:v[1]||(v[1]=(...r)=>e.zoomOut&&e.zoomOut(...r))}," + ")):oe("",!0),e.currentTab=="liquidity"?(F(),V("div",{key:1,class:"zoom-in",onClick:v[2]||(v[2]=(...r)=>e.zoomIn&&e.zoomIn(...r))}," - ")):oe("",!0)])]),s("div",Ko,[s("div",Go,[s("div",Jo,[s("div",Qo,[s("div",{class:"slider-ratio",style:gt(e.sliderStyle(e.currentPriceTab))},Vo,4)])]),s("div",en,[(F(!0),V(pt,null,Pt(e.priceTablList,r=>(F(),V("div",{key:r.key,class:ct(["price-tab-item",e.currentPriceTab==r.key?"price-tab-item-active":""]),onClick:d=>e.priceTab(r)},[ze(x,{placement:"bottom","arrow-point-at-center":""},{title:bt(()=>[Ft(ce(e.getPirceTabTips(r.key)),1)]),default:bt(()=>[s("img",{src:e.getPriceTabImage(r.key),alt:""},null,8,on),s("span",null,ce(e.getPriceTabText(r.key)),1)]),_:2},1024)],10,tn))),128))])]),s("div",nn,[s("div",an,[s("div",rn,[ln,s("div",null,[s("span",null,ce(e.poolInfo?e.direction&&!e.needReverse?("addCommom"in e?e.addCommom:ge(Ie))(("decimalUi"in e?e.decimalUi:ge(pe))(e.currentPrice,6)):("addCommom"in e?e.addCommom:ge(Ie))(("decimalUi"in e?e.decimalUi:ge(pe))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(F(),V("span",sn,ce(e.direction&&!e.needReverse?`${(Ce=e.fromCoin)==null?void 0:Ce.symbol} per ${(te=e.toCoin)==null?void 0:te.symbol}`:`${(f=e.toCoin)==null?void 0:f.symbol} per ${(n=e.fromCoin)==null?void 0:n.symbol}`),1)):oe("",!0)])]),s("div",un,[e.currentTab=="liquidity"?(F(),V("div",{key:0,class:"zoom-out",onClick:v[3]||(v[3]=(...r)=>e.zoomOut&&e.zoomOut(...r))}," + ")):oe("",!0),e.currentTab=="liquidity"?(F(),V("div",{key:1,class:"zoom-in",onClick:v[4]||(v[4]=(...r)=>e.zoomIn&&e.zoomIn(...r))}," - ")):oe("",!0)])]),e.poolInfo?(F(),Je(X,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direction,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,zoom:e.zoom,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","zoom","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):oe("",!0)])]),s("div",cn,[dn,s("div",mn,[s("div",vn,[e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(F(),V("div",fn,[gn,s("span",pn,ce(e.aprRewardsParameter==7?"7D":e.aprRewardsParameter==24?"24H":"30D")+" Price Range",1),s("span",null,ce(("addCommom"in e?e.addCommom:ge(Ie))(("decimalUi"in e?e.decimalUi:ge(pe))(e.before7dContractPriceLowest,6)))+" - "+ce(("addCommom"in e?e.addCommom:ge(Ie))(("decimalUi"in e?e.decimalUi:ge(pe))(e.before7dContractPriceHighest,6))),1)])):oe("",!0),s("div",bn,[(F(!0),V(pt,null,Pt(e.timeList,r=>(F(),V("div",{key:r.value,class:ct(["time-item",r.value==e.aprRewardsParameter?"time-item-active":""]),onClick:d=>e.aprRewardsParameter=r.value},ce(r.label),11,kn))),128))])]),s("div",hn,[s("span",null,ce(("addCommom"in e?e.addCommom:ge(Ie))(("decimalUi"in e?e.decimalUi:ge(pe))(e.before7dContractPriceLowest,6)))+" - "+ce(("addCommom"in e?e.addCommom:ge(Ie))(("decimalUi"in e?e.decimalUi:ge(pe))(e.before7dContractPriceHighest,6))),1)])])]),s("div",{class:ct(["apr-and-price",e.positionError&&e.poolInfo?"padding-apr-and-price":""])},[s("div",wn,[ze(S,{lever:e.lever},null,8,["lever"])]),ze(ee,{min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direction,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["min","max","from-coin","to-coin","direct","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice"]),e.positionError&&e.poolInfo?(F(),V("div",yn,[s("img",{src:("importIcon"in e?e.importIcon:ge(kt))("/image/icon-tips-error@2x.png"),alt:""},null,8,Cn),s("p",_n,ce(e.$t("tips.positionError")),1)])):oe("",!0)],2)])}const Ht=rt(qo,[["render",Pn]]),Tn=at({components:{NewLiquidityTitle:Ot,NewLiquidityAssetsCard:Ut,NewLiquidityDepositRatio:xt},setup(){const{t:e,locale:v}=$t(),he=yt(),de=B(()=>he),R=B(()=>de.value.chainName),_e=It(),x=B(()=>_e),X=ro(),S=B(()=>X),ee=wt(),i=B(()=>{let o=null;for(const c in x.value.poolsObj){const p=x.value.poolsObj[c];p.address==ee.query.poolAddress&&(console.log(p,"p===>"),o=p)}return o}),I=N(!1),ne=N(!1),Pe=B(()=>de.value.theme),Ce=async(o,c)=>{w.value=o.needReverse?o.token_b:o.token_a,k.value=o.needReverse?o.token_a:o.token_b,y.value="",C.value=""},te=B(()=>S.value.assets&&w.value&&S.value.assets[w.value.address]?_t(S.value.assets[w.value.address].balance,w.value.decimals):"0"),f=B(()=>S.value.assets&&k.value&&S.value.assets[k.value.address]?_t(S.value.assets[k.value.address].balance,k.value.decimals):"0"),n=o=>{o==="fromCoin"?(ye.value=!0,R.value==="Aptos"?y.value=Number(te.value)>0?w.value.symbol=="APT"?new a(Number(te.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(te.value)).sub(new a(.1)).toString():String(te.value):"":y.value=Number(te.value)>0?w.value.symbol=="SUI"?new a(Number(te.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(te.value)).sub(new a(.05)).toString():String(te.value):""):(ye.value=!1,R.value==="Aptos"?C.value=Number(f.value)>0?k.value.symbol=="APT"?new a(Number(f.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(f.value)).sub(new a(.1)).toString():String(f.value):"":C.value=Number(f.value)>0?k.value.symbol=="SUI"?new a(Number(f.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(f.value)).sub(new a(.05)).toString():String(f.value):"")},r=o=>{o==="fromCoin"?(ye.value=!0,y.value=Number(te.value)>0?ft(new a(Number(te.value)).div(2).toString(),w.value.decimals).toString():""):(ye.value=!1,C.value=Number(f.value)>0?ft(new a(Number(f.value)).div(2).toString(),k.value.decimals).toString():"")},d=N(),E=N(),O=N(),J=N(!1),se=o=>{var c,p,re,U;d.value=o,o==="fromCoin"?(E.value=((c=k.value)==null?void 0:c.address)||"",O.value=ee.query.actions=="new-position"?(p=w.value)==null?void 0:p.address:i.value.needReverse?i.value.token_b.address:i.value.token_a.address):(E.value=((re=w.value)==null?void 0:re.address)||"",O.value=ee.query.actions=="new-position"?(U=k.value)==null?void 0:U.address:i.value.needReverse?i.value.token_a.address:i.value.token_b.address),J.value=!0,console.log(J.value,"==>showCoinSelect.value ")},we=o=>{var re,U,ae,le,Y,G,Z,ke;const c=i.value.needReverse?i.value.token_b:i.value.token_a,p=i.value.needReverse?i.value.token_a:i.value.token_b;d.value==="fromCoin"?(((re=w.value)==null?void 0:re.address)===(c==null?void 0:c.address)||!((U=w.value)!=null&&U.address)?(k.value&&o.address.toLowerCase()===((ae=k)==null?void 0:ae.value.address.toLowerCase())&&(k.value=null),w.value=o):(w.value&&o.address.toLowerCase()===((le=w)==null?void 0:le.value.address.toLowerCase())&&(w.value=null),k.value=o),ee.query.action||(ee.query.fee="")):((Y=k.value)==null?void 0:Y.address)===(p==null?void 0:p.address)||!((G=k.value)!=null&&G.address)?(w.value&&o.address.toLowerCase()===((Z=w)==null?void 0:Z.value.address.toLowerCase())&&(w.value=null),k.value=o):(k.value&&o.address.toLowerCase()===((ke=k)==null?void 0:ke.value.address.toLowerCase())&&(k.value=null),w.value=o),J.value=!1},b=B(()=>de.value.chainName?ht(de.value.chainName):{}),P=B(()=>de.value.slippage),q=N(),be=async()=>{var Se,fe,xe,Xe;if(De.value)return console.log("跳出"),!1;if(!$.value&&!T.value)return!1;if(!y.value&&!C.value&&!$.value&&!T.value)return;const o=i.value||{};if(Ae(o))return;const{TickUtil:c,TickMath:p,getNearestTickByTick:re}=b.value,U=o==null?void 0:o.token_a.decimals,ae=o==null?void 0:o.token_b.decimals;let le,Y,G,Z,ke,Te,He,Ke,Ue=o==null?void 0:o.current_tick_index,z;if(o.token_a.address.toLowerCase()===w.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===k.value.address.toLowerCase()?z=!0:z=!1,$.value==="0"&&T.value==="∞")G=c.getMinIndex(Number(o.tickSpacing)),Z=c.getMaxIndex(Number(o.tickSpacing)),ke=p.tickIndexToSqrtPriceX64(G),Te=p.tickIndexToSqrtPriceX64(Z),console.log(G,Z,"#######updateAmounts 513");else if(H.value=="custom"){console.log(z,"===>directs1866"),z?(le=$.value,Y=T.value):(le=T.value!=="∞"?new a(1).div(T.value).toString():1/0,Y=new a(1).div($.value).toString());try{He=new a(le).equals(new a(0))?-443636:p.priceToTickIndex(new a(le),U,ae)}catch{He=-443636}try{Ke=p.priceToTickIndex(new a(Y),U,ae)}catch{Ke=443636}console.log("1113###updateAmounts###min###",le),console.log("1113###updateAmounts###max###",Y),console.log("1113###updateAmounts###minTick###",He),console.log("1113###updateAmounts###maxTick###",Ke),G=re(He,Number(o.tickSpacing),!0),Z=re(Ke,Number(o.tickSpacing),!0),console.log("1113###updateAmounts###tick_lower###",G),console.log("1113###updateAmounts###tick_upper###",Z);try{ke=p.priceToSqrtPriceX64(new a(le),U,ae)}catch{(Y===1/0||Y==="∞")&&(ke=p.tickIndexToSqrtPriceX64(c.getMinIndex(Number(o.tickSpacing))))}try{Te=p.priceToSqrtPriceX64(new a(Y),U,ae)}catch{console.log("0523###test###max###",Y),(Y===1/0||Y==="∞")&&(console.log("0523###test###max###11111"),Te=p.tickIndexToSqrtPriceX64(c.getMaxIndex(Number(o.tickSpacing))))}console.log("0518###pre###tick_lower###",G,Z,Ue),console.log("0518###pre###tick_upper###",Z)}else G=(Se=Ye.value[H.value])==null?void 0:Se.lower,Z=(fe=Ye.value[H.value])==null?void 0:fe.upper,ke=p.tickIndexToSqrtPriceX64(G),Te=p.tickIndexToSqrtPriceX64(Z);if(console.log("1116###updateAmounts###tick_lower####",G),console.log("1116###updateAmounts###tick_upper####",Z),console.log("1116###updateAmounts###currentTickIndex####",Ue),T.value!=="∞"&&G>=Z){I.value=!0,y.value="",ne.value=!0,C.value="";return}if(console.log(Z,Ue,G,"1922"),T.value==="∞"||Ue>=G&&Ue<Z){I.value=!1,ne.value=!1;let K;if(y.value||C.value){if(ye.value){const ut=new a(y.value).mul(Math.pow(10,w.value.decimals)).toString();K=new je(ut)}else{const ut=new a(C.value).mul(Math.pow(10,k.value.decimals)).toString();K=new je(ut)}console.log(z,"======>directs"),p.tickIndexToSqrtPriceX64(i.value.current_tick_index);const{liquidityAmount:We,tokenMaxA:Ee,tokenMaxB:Ge,tokenMaxAOrigin:Zt,tokenMaxBOrigin:Kt}=b.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:o.token_a,tokenB:o.token_b,lowerTick:G,upperTick:Z,coinAmount:K,iscoinA:z?ye.value:!ye.value,roundUp:!0,slippage:Number(P.value)/100,curSqrtPrice:new je(i.value.current_sqrt_price)});q.value={liquidityAmount:We,tokenMaxA:Ee,tokenMaxB:Ge,tokenMaxAOrigin:Zt,tokenMaxBOrigin:Kt},console.log(Ee,Ge,"preAdd"),z?ye.value?C.value=Number(Ge)>0?Ge:"":y.value=Number(Ee)>0?Ee:"":ye.value?C.value=Ee:y.value=Ge}}else if(Ue>=Z){if(z?y.value="":C.value="",I.value=z,ne.value=!z,y.value||C.value){let K;if(z){const We=new a(C.value).mul(Math.pow(10,(xe=k.value)==null?void 0:xe.decimals)).toString();K=new je(We),q.value={liquidityAmount:b.value.estimateLiquidityForCoinB(ke,Te,K),tokenMaxA:0,tokenMaxB:C.value}}else{const We=new a(y.value).mul(Math.pow(10,(Xe=w.value)==null?void 0:Xe.decimals)).toString();K=new je(We),q.value={liquidityAmount:b.value.estimateLiquidityForCoinB(ke,Te,K),tokenMaxA:0,tokenMaxB:y.value}}}}else if(Ue<G){if(I.value=!z,ne.value=z,z?C.value="":y.value="",y.value||C.value){let K;if(z){const We=new a(y.value).mul(Math.pow(10,w.value.decimals)).toString();K=new je(We),q.value={liquidityAmount:b.value.estimateLiquidityForCoinA(ke,Te,K),tokenMaxA:y.value,tokenMaxB:0}}else{const We=new a(C.value).mul(Math.pow(10,k.value.decimals)).toString();K=new je(We),q.value={liquidityAmount:b.value.estimateLiquidityForCoinA(ke,Te,K),tokenMaxA:C.value,tokenMaxB:0}}}}else I.value=!0,y.value="",ne.value=!0,C.value=""};Be(()=>i.value,(o,c)=>{console.log(c,"===>oldVal"),console.log(o,"===>newVal"),(!c&&o&&!Ae(o)||c&&o&&c.address!==o.address)&&(console.log("池子信息"),Ce(o,!c||o.address!==c.address)),o&&!Ae(o)&&be()},{immediate:!0}),Be(y,(o,c)=>{console.log(y,"===>fromCoinAmount"),o==""&&ye.value&&(C.value=""),o&&ye.value&&!De.value&&be()}),Be(C,(o,c)=>{console.log(o,"===>>>>newValsda"),o==""&&!ye.value&&(y.value=""),o&&!ye.value&&!De.value&&be()}),Be(()=>Le.value,(o,c)=>{be()}),Be(()=>[w.value,k.value],([o,c])=>{o&&c&&(I.value=!1,ne.value=!1)});const h=N("--"),A=B(()=>x.value.RATES),D=()=>{const o=A.value&&A.value[w.value.address]&&A.value[w.value.address].price,c=A.value&&A.value[k.value.address]&&A.value[k.value.address].price;if(o&&c){const p=new a(y.value>0?y.value:0).mul(o),re=new a(C.value>0?C.value:0).mul(c),U=p.add(re).toNumber();h.value=U>0&&U<.01?"<$0.01":"$"+Ie(U,2)}else h.value="--"};Be(()=>[y.value,C.value,De.value],([o,c,p])=>{(o||c)&&!p?D():(!o||!c)&&!p&&(h.value="--")},{immediate:!0}),Be(()=>h,o=>{console.log(o,"71911111")},{immediate:!0});const W=N(),L=async()=>{var z,Se;if(!$.value&&!T.value)return!1;if(!y.value&&!C.value&&!$.value&&!T.value)return;const o=i.value;if(Ae(o))return;const{TickUtil:c,TickMath:p,getNearestTickByTick:re}=b.value,U=o==null?void 0:o.token_a.decimals,ae=o==null?void 0:o.token_b.decimals;let le,Y,G,Z,ke,Te,He;if(o.token_a.address.toLowerCase()===w.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===k.value.address.toLowerCase()?He=!0:He=!1,$.value==="0"&&T.value==="∞")G=c.getMinIndex(Number(o.tickSpacing)),Z=c.getMaxIndex(Number(o.tickSpacing));else if(H.value=="custom"){He?(le=Number($.value),Y=Number(T.value)):(le=new a(1).div(T.value).toString(),Y=new a(1).div($.value).toString());try{ke=le==0?-443636:p.priceToTickIndex(new a(le),U,ae)}catch{ke=-443636}try{Te=p.priceToTickIndex(new a(Y),U,ae)}catch{Te=443636}G=re(ke,Number(o.tickSpacing),!0),Z=re(Te,Number(o.tickSpacing),!0)}else G=(z=Ye.value[H.value])==null?void 0:z.lower,Z=(Se=Ye.value[H.value])==null?void 0:Se.upper;const Ke=A.value[o==null?void 0:o.token_a.address].price,Ue=A.value[o==null?void 0:o.token_b.address].price;Le.value?new je(o.current_sqrt_price):new je(1/o.current_sqrt_price),console.log(Le.value,"===>direction.value"),console.log(o,"poolInfos===>"),console.log(G,Z,"####tick_lower tick_upper 889"),console.log(h.value,"liquidityTotalAmount.value");try{const{amountA:fe,amountB:xe,tokenAmountsInfo:Xe}=await b.value.estCoinAmountsFromTotalAmount({lowerTick:G,upperTick:Z,decimalsA:U,decimalsB:ae,curSqrtPrice:new je(o.current_sqrt_price),totalAmount:h.value.replace(/[^\d.]/g,""),tokenPriceA:Ke,tokenPriceB:Ue});console.log(fe,xe,"###estCoinAmountsFromTotalAmount 844"),console.log(o.needReverse,Le.value,"===>849"),W.value=Xe,o.needReverse?Le.value?(y.value=fe,C.value=xe):(y.value=xe,C.value=fe):(y.value=fe,C.value=xe)}catch(fe){console.log(fe,"e===>")}};Be([$,T],([o,c])=>{console.log(o,c,"==>minPrice,maxPrice"),De.value?De.value&&L():be(),c!=="∞"&&Number(o)!==0&&Number(c)!==0&&Number(o)>=Number(c)?et.value=!0:et.value=!1,Number(o)==0&&Number(c)==0&&tt.value&&(et.value=!0,console.log("价格区间错误"))},{deep:!0,immediate:!0});const Re=o=>{console.log(o,"e");const c=o.replace(/[^\d.]/g,""),p="$"+Ie(c);De.value=!0,h.value=p,c>0?L():(y.value="",C.value="")},_=N(!1),{setTransactionTxid:ie,setTransactionDesc:Qe,setIsShowWaiting:Ne,setIsShowSuccess:lt,setPositiomNum:ot,setIsShowRejected:t}=he,m=go(),g=B(()=>x.value.currentPositionInfo),M=N(!1),Q=N(!0),j=N(),me=o=>{console.log(o,"getFarmsPoolInfo:"),j.value=o,o||(Q.value=!1)},Oe=async o=>{var ke,Te,He,Ke,Ue;console.log(i.value,"===> poolInfo.value"),console.log(j.value,"##farmPoolInfo"),_.value=!1,x.value.currentPositionInfo={},ie(""),Qe(e("tips.increaseLiquiditySuccess",{from:I.value?"":`${Ie(y.value)} ${(ke=w.value)==null?void 0:ke.symbol}`,and:!I.value&&!ne.value?"and":"",to:ne.value?"":`${Ie(C.value)} ${(Te=k.value)==null?void 0:Te.symbol}`})),Ne(!0);const c=Le.value?ye.value:!ye.value;let p,re,U,ae,le,Y;const G=i.value.token_a.decimals,Z=i.value.token_b.decimals;if($.value==="0"&&T.value==="∞")U=b.value.TickUtil.getMinIndex(Number(i.value.tickSpacing)),ae=b.value.TickUtil.getMaxIndex(Number(i.value.tickSpacing));else if(H.value=="custom"){Le.value?(p=$.value,re=T.value):(p=new a(1).div(T.value).toString(),re=new a(1).div($.value).toString()),console.log("0519###toAdd###min###",p),console.log("0519###toAdd###max###",re),console.log("0519###toAdd###minPrice.value###",$.value),console.log("0519###toAdd###maxPrice.value###",T.value);try{le=p==0?b.value.TickUtil.getMinIndex(Number(i.value.tickSpacing)):b.value.TickMath.priceToTickIndex(new a(p),G,Z)}catch{le=b.value.TickUtil.getMinIndex(Number(i.value.tickSpacing))}try{Y=b.value.TickMath.priceToTickIndex(new a(re),G,Z)}catch{Y=b.value.TickUtil.getMaxIndex(Number(i.value.tickSpacing))}U=b.value.getNearestTickByTick(le,Number(i.value.tickSpacing),!0),ae=b.value.getNearestTickByTick(Y,Number(i.value.tickSpacing),!0)}else U=Ye.value[H.value].lower,ae=Ye.value[H.value].upper;console.log(U,ae,"####tick_lower tick_upper 889"),console.log(i.value,"==>poolInfo.value.curSqrtPrice"),console.log("1202###Add###tick_lower####",U),console.log("1202###Add###tick_upper####",ae),console.log("1202###Add###poolInfo.value####",i.value);try{let z;De.value?z=await b.value.getCreateAddLiquidityPayload({pool:i.value,curSqrtPrice:new je(i.value.current_sqrt_price),tickLower:U,tickUpper:ae,slippage:Number(P.value)/100,tokenAmounts:W.value}):z=await b.value.getAddLiquidityTransactionPayload({pool:{poolAddress:i.value.poolAddress,token_a:i.value.token_a,token_b:i.value.token_b},amount:ye.value?y.value:C.value,fix_amount_a:c,tick_lower:U,tick_upper:ae,index:0,slippage:Number(P.value)/100,roundUp:!0,collect_fee:!1,curSqrtPrice:new je(i.value.current_sqrt_price),farmPoolInfo:j.value}),console.log(z,"payload===?");let Se;if(R.value==="Aptos")Se=await S.value.currentWallet.signAndSubmitTransaction(z);else{const fe=await S.value.currentWallet.signAndExecuteTransactionBlock(z);Se=b.value.handleTx(fe)}if(console.log("0410###tx###",Se),Se&&Se.hash){ie(Se.hash),Ne(!1),lt(!0);let fe;i.value.needReverse?i.value.token_a.address.toLowerCase()===w.value.address.toLowerCase()&&i.value.token_b.address.toLowerCase()===k.value.address.toLowerCase()?fe=!1:fe=!0:i.value.token_a.address.toLowerCase()===w.value.address.toLowerCase()&&i.value.token_b.address.toLowerCase()===k.value.address.toLowerCase()?fe=!0:fe=!1,console.log(fe,"===>directs");const xe={title:"Supplied",desc:e("tips.addLiquiditySuccessText",{from:I.value?"":`${Ie(y.value)} ${(He=w.value)==null?void 0:He.symbol}`,and:!I.value&&!ne.value?"and":"",to:ne.value?"":`${Ie(C.value)} ${(Ke=k.value)==null?void 0:Ke.symbol}`}),hash:Se.hash,tit:"Position Created",icon:"icon-icon-Position-Created"};R.value!=="Aptos"&&(xe.res=Se.res),b.value.showTransitionPending(xe),console.log(xe,"toAdd params###");const Xe=await b.value.watchTransaction(xe,!0);if(Xe.status){if(lt(!1),x.value.setCurrentPositionLoading(!0),M.value=!0,console.log(Xe.nftInfo,"===> watchInfo.nftInfo"),R.value==="Aptos"){if(await x.value.setCurrentPositionInfo(Xe.nftInfo[0].data.id.creator,Xe.nftInfo[0].data.id.collection,Xe.nftInfo[0].data.name,R.value),o)try{await m.subscribePosition({pool_address:g.value.poolAddress,position_index:g.value.index},g.value.nftHash)}catch(K){console.log(K,"e")}}else{const K=Xe.nftInfo,We=await Ct(2e3);if((Ue=j.value)!=null&&Ue.isAutoStake){let Ee;Se.res.events.forEach(Ge=>{Ge.type.indexOf("::pool::DepositEvent")>-1&&(Ee=Ge.parsedJson.wrapped_position)}),console.log(Ee,"###farmPositionId"),await x.value.setCurrentPositionInfo("","","","Sui",Ee,"farming")}else await x.value.setCurrentPositionInfo(K==null?void 0:K.pool,"","",R.value,K==null?void 0:K.position);if(await Ct(1e3),console.log("0529###nftInfo###",K),console.log("0529###currentPositionInfo.value.index###",g.value.index),o)try{await m.subscribePosition({pool_address:g.value.poolAddress,position_index:g.value.index},g.value.nftHash)}catch(Ee){console.log(Ee)}}setTimeout(()=>{_e.updateCurrentPools(i.value.poolAddress,R.value),b.value.getAccount(S.value.address)},3e3),setTimeout(async()=>{Tt(b,i)},3e3)}ot()}else Ne(!1),t(!0);y.value="",C.value=""}catch(z){y.value="",C.value="",console.log("0330###Add liquidity Error###",z),Ne(!1),t(!0)}},qe=B(()=>!y.value&&!C.value?(console.log("addLiquidityBtnDisabled11111"),!0):Number(y.value)>Number(te.value)||Number(C.value)>Number(f.value)?(console.log("addLiquidityBtnDisabled22222"),!0):Fe.value!==e("button.addLiquidity")&&Fe.value!==e("newAdd.preview")?(console.log("addLiquidityBtnDisabled33333###",Fe.value),!0):i.value&&i.value&&i.value.is_pause?(console.log("addLiquidityBtnDisabled44444"),!0):Number(y.value)<=0&&Number(C.value)<=0||!I.value&&Number(y.value)==0||!ne.value&&Number(C.value)==0),Me=B(()=>!w.value||!k.value),Fe=B(()=>i.value&&i.value.is_pause?"Pool Closed":!w.value||!k.value||Me.value?e("modal.selectTokenModalTitle"):Number(y.value)>Number(te.value)?e("button.insufficientBalance",{name:w.value.symbol}):Number(C.value)>Number(f.value)?e("button.insufficientBalance",{name:k.value.symbol}):!Number(y.value)&&!Number(C.value)?e("button.enterAmount"):T.value!=="∞"&&Number($.value)>=Number(T.value)?e("newAdd.invalidRange"):e("button.addLiquidity")),Ze=N({}),l=N({}),u=N(!1),$e=(o,c)=>{console.log(d.value,"===>currentCoinKey.value"),console.log(o);const p=localStorage.getItem(o.address);console.log(x.value.tokensObj,"===>pools.value.tokensObj"),console.log(p,"===>coinLocak"),x.value.tokensObj&&x.value.tokensObj[o.address]&&x.value.tokensObj[o.address].isSelfBuilt&&!p&&(c=="fromCoin"&&(Ze.value=o),c=="toCoin"&&(l.value=o),u.value=!0)};Be(()=>[w.value,k.value],([o,c])=>{o&&!Ae(o)&&$e(o,"fromCoin"),c&&!Ae(c)&&$e(c,"toCoin")},{immediate:!0});const ue=eo(),ve=()=>{R.value!=="Aptos"?ue.push("/pool/list"):ue.push("/pools")},Et=o=>{De.value,Oe(o)},Dt=()=>{ee.query.action!=="create-pool"&&ee.query.actions!=="new-position"&&(Tt(b,i),be(),_e.updateCurrentPools(i.value.poolAddress,R.value)),_e.setPoolConfigList(R.value,de.value.filterCoinsObj)},Wt=B(()=>{var p,re,U,ae,le,Y;const o=(U=A.value[(re=(p=w)==null?void 0:p.value)==null?void 0:re.address])==null?void 0:U.price,c=(Y=A.value[(le=(ae=k)==null?void 0:ae.value)==null?void 0:le.address])==null?void 0:Y.price;return!!(o&&c)});return Be(()=>[ee,x.value.tokensObj],([o,c])=>{var p;c&&!Ae(c)&&(k.value||(k.value=x.value.tokensObj[(p=o==null?void 0:o.query)==null?void 0:p.toCoin]))},{immediate:!0,deep:!0}),{positionError:et,decimalUi:pe,poolInfo:i,fromCoinAmount:y,toCoinAmount:C,fromCoin:w,toCoin:k,theme:Pe,showFromCoinLock:I,showToCoinLock:ne,fromCoinBlance:te,toCoinBlance:f,maxBtnSelect:n,halfBtnSelect:r,fixedFromCoin:ye,openCoinSelect:se,currentCoinKey:d,existingCoins:E,lastSelectCoin:O,showCoinSelect:J,onCoinSelect:we,liquidityTotalAmount:h,toggle:jt,onInput:Re,isInputTotalAmount:De,isViewDetail:M,addLiquidityBtnDisabled:qe,addLiquidityBtnText:Fe,isShowTokenWarning:u,chainName:R,closeTokenWarning:ve,warningFromCoin:Ze,warningToCoin:l,isShowLiquidityModal:_,currentPrice:tt,currentPriceReverse:it,currentPriceTab:H,minPrice:$,maxPrice:T,toAdd:Oe,direction:Le,wallet:S,getAddLiquidityType:Et,clickRefresh:Dt,isShowtotalAmount:Wt,isAutoStakeFarming:Q,farmPoolInfo:j,getFarmsPoolInfo:me}}});const Sn={class:"new-liquidity-right"},In={class:"deposit-title"},An={class:"card-container"},Ln={key:0,class:"lock"},Nn={class:"card-item"},qn={class:"card-item"},Mn={key:0,class:"total-amount"},$n=s("span",null,"Total Amount",-1);function Bn(e,v,he,de,R,_e){const x=Ot,X=lo,S=Ut,ee=uo,i=xt,I=co,ne=to,Pe=mo,Ce=vo,te=fo;return F(),V("div",Sn,[s("div",In,[ze(x,{"pool-info":e.poolInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"])]),s("div",An,[e.positionError?(F(),V("div",Ln,[ze(X)])):oe("",!0),s("div",Nn,[ze(S,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":v[0]||(v[0]=f=>e.fromCoinAmount=f),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:v[1]||(v[1]=f=>e.maxBtnSelect("fromCoin")),onOnHalf:v[2]||(v[2]=f=>e.halfBtnSelect("fromCoin")),onOnInput:v[3]||(v[3]=f=>{e.fromCoinAmount=f,e.fixedFromCoin=!0,e.isInputTotalAmount=!1}),onOnSelect:v[4]||(v[4]=f=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.positionError?(F(),Je(ee,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):oe("",!0)]),s("div",qn,[ze(S,{modelValue:e.toCoinAmount,"onUpdate:modelValue":v[5]||(v[5]=f=>e.toCoinAmount=f),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:v[6]||(v[6]=f=>e.maxBtnSelect("toCoin")),onOnHalf:v[7]||(v[7]=f=>e.halfBtnSelect("toCoin")),onOnInput:v[8]||(v[8]=f=>{e.toCoinAmount=f,e.fixedFromCoin=!1,e.isInputTotalAmount=!1}),onOnSelect:v[9]||(v[9]=f=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.positionError?(F(),Je(ee,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):oe("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme=="default"?(F(),V("img",{key:1,class:"add",src:po,alt:"",onClick:v[10]||(v[10]=(...f)=>e.toggle&&e.toggle(...f))})):oe("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme!=="default"?(F(),V("img",{key:2,class:"add",src:bo,alt:"",onClick:v[11]||(v[11]=(...f)=>e.toggle&&e.toggle(...f))})):oe("",!0)]),e.isShowtotalAmount?(F(),V("div",Mn,[$n,s("span",null,ce(e.liquidityTotalAmount)+" ",1)])):oe("",!0),ze(i,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"fixed-from-coin":e.fixedFromCoin,"is-input-total-amount":e.isInputTotalAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price-tab":e.currentPriceTab,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","fixed-from-coin","is-input-total-amount","min-price","max-price","current-price-tab","current-price","current-price-reverse"]),e.chainName=="Sui"?(F(),Je(I,{key:1,"pool-info":e.poolInfo,"is-active":!e.showFromCoinLock&&!e.showFromCoinLock,"is-auto-stake-farming":e.isAutoStakeFarming,onSendFarmsPoolInfo:e.getFarmsPoolInfo},null,8,["pool-info","is-active","is-auto-stake-farming","onSendFarmsPoolInfo"])):oe("",!0),ze(ne,{class:"add-liquidity-btn",disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,onClick:v[12]||(v[12]=f=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:bt(()=>[Ft(ce(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),e.showCoinSelect?(F(),Je(Pe,{key:2,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:v[13]||(v[13]=f=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):oe("",!0),e.isViewDetail?(F(),Je(Ce,{key:3,"pool-info":e.poolInfo,"farm-pool-info":e.farmPoolInfo,onOnClose:v[14]||(v[14]=f=>e.isViewDetail=!1)},null,8,["pool-info","farm-pool-info"])):oe("",!0),e.isShowLiquidityModal?(F(),Je(te,{key:4,"pool-info":e.poolInfo,title:e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direction,"is-increase":!1,onToAdd:e.getAddLiquidityType,onOnClose:v[15]||(v[15]=f=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onToAdd"])):oe("",!0)])}const Xt=rt(Tn,[["render",Bn]]),Fn=at({components:{NewLiquidityLeft:Ht,NewLiquidityRight:Xt},setup(){Bt(()=>{so()});const e=wt();return{tickList:Ve,route:e}}});const Rn={key:0,class:"loading-spin-liquidity loading-global"},On={class:"privide-liquidity"};function Un(e,v,he,de,R,_e){var ee,i;const x=Mt,X=Ht,S=Xt;return F(),V(pt,null,[!e.tickList&&((i=(ee=e.route)==null?void 0:ee.query)!=null&&i.poolAddress)?(F(),V("div",Rn,[ze(x)])):oe("",!0),s("div",On,[ze(X),ze(S)])],64)}const bi=rt(Fn,[["render",Un],["__scopeId","data-v-fc58011a"]]);export{bi as default};
