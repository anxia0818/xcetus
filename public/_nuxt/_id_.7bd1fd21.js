import{_ as rn}from"./back.7de7f631.js";import{_ as dn}from"./refresh-icon.a4c4b74b.js";import{a as je,a1 as Ho,y as Ao,r as $,af as vn,e as Ve,Q as to,o as l,c as Z,w as ue,h as o,i as F,j as Ue,v,f as y,F as Ye,E as co,A as Te,x as z,ag as mn,I as cn,B as Co,p as Xe,k as ze,H as po,K as Po,l as h,q as _e,b as To,m as eo,s as qo,t as Ee,u as P,P as Eo,G as Wo,O as $o,D as vo,C as pn,L as fn,z as jo,M as Xo,S as gn}from"./entry.58564c79.js";/* empty css              */import{a as yn,b as bn,_ as kn}from"./icon-error_2x.98c7676c.js";import{u as Qe,a as zo}from"./autoPool.fc5df0fa.js";import{u as oo,c as Ke,a as D,g as Io,d as Le,s as R,T as We,b as ce,p as Vo,e as Go,f as hn,V as So}from"./pool.a1941d40.js";import{_ as fo}from"./token-warning.dbbd8992.js";import{_ as Yo}from"./auto-pool-apy-tips.99697542.js";/* empty css              */import{u as go,a as yo}from"./sha256.21b2e963.js";import{i as ro}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as Ko}from"./assets-card.e3418ff7.js";import{_ as Qo}from"./coin-lock.8b1b4da2.js";import{_ as Zo,a as Jo}from"./auto-pool-remove-modal.ecc1fe2c.js";/* empty css              */import{D as u}from"./decimal.0bdeb344.js";/* empty css              */import{u as _n}from"./swapRouter.74d71317.js";/* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.6929bf4d.js";const wn=je({components:{Modal:Ho},setup(e,s){const{t:G,locale:Y}=Ao(),B=Qe(),T=["0.1","0.5","1"],m=$(B.slippage||.1),{setSlippage:q}=B,I=vn();console.log(m.value,"slippage.value");const a=$(!1);function t(n,d){a.value=!1,m.value=d}function C(){q(m.value),s.emit("onClose",!1)}return{settingArr:T,changeActiveIndex:t,confirm:C,emit:I,slippage:m,t:G,isInput:a,inputChange:n=>{const d=new RegExp(/[^\d^\.]+/g);n.target.value=n.target.value.replace(d,""),m.value=n.target.value}}}});const xo=e=>(Xe("data-v-c5b99de4"),e=e(),ze(),e),$n=xo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),In={class:"setting-container"},Sn={class:"title"},An=xo(()=>o("img",{src:kn,alt:""},null,-1)),Cn={class:"tag-list"},Pn={key:0,src:yn,alt:""},Tn={key:1,src:bn,alt:""},qn={class:"footer"};function Nn(e,s,G,Y,B,T){const m=mn,q=cn,I=Co,a=to("Modal");return l(),Z(a,{title:"Settings",class:"setting",centered:"",visible:!0,width:"400px",onCancel:s[3]||(s[3]=t=>e.$emit("onClose"))},{closeIcon:ue(()=>[$n]),footer:ue(()=>[o("div",qn,[F(I,{type:"cancel",class:"cancel-btn cancel-btn-new",onClick:s[2]||(s[2]=t=>e.$emit("onClose"))},{default:ue(()=>[Ue(v(e.$t("button.cancel")),1)]),_:1}),F(I,{class:"confirmbtn",disabled:Number(e.slippage)==0||Number(e.slippage)>1||Number(e.slippage)<.01,onClick:e.confirm},{default:ue(()=>[Ue(v(e.$t("button.confirm")),1)]),_:1},8,["disabled","onClick"])])]),default:ue(()=>[o("div",In,[o("div",Sn,[An,o("span",null,v(e.$t("modal.slippageTolerance")),1)]),o("div",Cn,[(l(!0),y(Ye,null,co(e.settingArr,(t,C)=>(l(),Z(m,{key:C,class:Te(!e.isInput&&t==e.slippage?"tag-active":""),onClick:f=>e.changeActiveIndex(C,t)},{default:ue(()=>[Ue(v(t)+"% ",1)]),_:2},1032,["class","onClick"]))),128)),F(m,{class:Te(["input-tag",e.isInput?"tag-active":""]),onClick:s[1]||(s[1]=t=>e.isInput=!0)},{default:ue(()=>[F(q,{value:e.slippage,"onUpdate:value":s[0]||(s[0]=t=>e.slippage=t),placeholder:"",suffix:"%",class:Te(["slippage-input",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-input-waring":Number(e.slippage)>1?"slippage-input-error":""]),onChange:e.inputChange},null,8,["value","class","onChange"])]),_:1},8,["class"])])]),Number(e.slippage)>.5&&Number(e.slippage)<1||Number(e.slippage)>1?(l(),y("div",{key:0,class:Te(["slippage-hint",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-hint-waring":Number(e.slippage)>1?"slippage-hint-error":""])},[Number(e.slippage)>.5&&1>=Number(e.slippage)?(l(),y("img",Pn)):z("",!0),Number(e.slippage)>1?(l(),y("img",Tn)):z("",!0),o("p",null,v(Number(e.slippage)>.5&&1>=Number(e.slippage)?e.$t("tips.slippageTolerance2"):Number(e.slippage)>1?e.$t("tips.slippageTolerance1"):""),1)],2)):z("",!0)]),_:1})}const Rn=Ve(wn,[["render",Nn],["__scopeId","data-v-c5b99de4"]]),Bn=je({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,s){const G=$(!1),Y=$(null),B=$(0);let T=$(!1);const m=$(20);oo();const q=Qe(),I=$(!1);po(()=>{}),Po(()=>{clearInterval(Y.value)});const a=()=>{T.value=!1,Y.value=setInterval(()=>{var r;I.value||B.value<m.value&&(B.value+=1,B.value===m.value&&((r=e==null?void 0:e.poolInfo)!=null&&r.address&&f(),B.value=0))},1e3)},t=h(()=>q.slippage),C=()=>{s.emit("clearAll")},f=()=>{T.value||(T.value=!0,B.value=0,s.emit("clickRefresh"),setTimeout(()=>{T.value=!1},1e3))};_e(()=>e.poolInfo,r=>{r&&!Y.value&&a()},{immediate:!0});const n=To(),d=eo();return console.log(d,"route"),{refresh:T,clickRefresh:f,isShowSwapSetting:G,countdown:B,autoRefreshTime:m,slippage:t,clearAll:C,checkNullObj:Ke,router:n,route:d}}});const Dn=e=>(Xe("data-v-71491a33"),e=e(),ze(),e),Ln={class:"title"},Un={class:"left"},On=Dn(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Mn={key:0,class:"deposit-progress"};function Fn(e,s,G,Y,B,T){const m=rn,q=dn,I=Rn;return l(),y("div",Ln,[o("div",Un,[F(m)]),o("div",{class:Te(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[o("div",{class:"slippage-icon",onClick:s[0]||(s[0]=a=>e.isShowSwapSetting=!0)},[On,o("span",null,v(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(l(),y("div",Mn,[F(q,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):z("",!0)],2),e.isShowSwapSetting?(l(),Z(I,{key:0,onOnClose:s[1]||(s[1]=a=>e.isShowSwapSetting=!1)})):z("",!0)])}const Vn=Ve(Bn,[["render",Fn],["__scopeId","data-v-71491a33"]]),Hn=je({components:{AutoPoolApyTips:Yo},setup(){const e=go(),s=h(()=>e),G=oo(),Y=h(()=>G),B=Qe(),T=h(()=>B),m=h(()=>s.value.theme),q=eo(),I=$();_e(()=>[T.value.positionInfoObj,q.params.id],([d,r])=>{d&&!Ke(d)&&r&&(I.value=d[r],console.log(I.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const a=h(()=>{var d;return(d=I.value)==null?void 0:d.needReverse}),t=d=>{var r;return(d==null?void 0:d.logoURI)||(d==null?void 0:d.logo_url)||((r=Y.value.tokensObj[d==null?void 0:d.address])==null?void 0:r.logo_url)||(m.value==="default"?ro("/image/coins/unknown.png"):ro("/image/coins/sui-unknown.png"))},C=h(()=>{var d,r;return console.log((d=I==null?void 0:I.value)==null?void 0:d.poolUSD,"##positionInfo?.value?.poolUSD"),(r=I==null?void 0:I.value)==null?void 0:r.poolUSD}),f=h(()=>{var d,r;return T.value.apyObj&&((r=T.value.apyObj[(d=I.value)==null?void 0:d.id])==null?void 0:r.apr)||"--"}),n=h(()=>s.value.currentExplorer);return{positionInfo:I,needReverse:a,getCoinIcon:t,tvl:C,apy:f,addCommom:D,getExplorerUrl:Io,currentExplorer:n}}});const Fe=e=>(Xe("data-v-d4b397f3"),e=e(),ze(),e),En={class:"auto-pool-v2-info"},Wn={class:"pool-info"},jn={class:"left"},Xn={class:"coin-a"},zn={alt:""},Gn={class:"coin-b"},Yn={alt:""},Kn={class:"position-name"},Qn={key:0,class:"pool-fee"},Zn=Fe(()=>o("span",null,"Fee tier",-1)),Jn={class:"vault-address"},xn=["href"],et=Fe(()=>o("span",null,"Vault Address",-1)),ot=Fe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),nt=[et,ot],tt={class:"apy-and-tvl"},st={class:"apy"},it=Fe(()=>o("div",{class:"apy-title"},"APY",-1)),lt={class:"apy-text"},at={class:"reward-coin"},ut=Fe(()=>o("div",{class:"reward"},"Rewards",-1)),rt={class:"right"},dt={alt:""},vt={class:"tvl"},mt=Fe(()=>o("div",{class:"tvl-title"},"TVL",-1)),ct={class:"tvl-text"},pt={class:"pool-info h5-pool-info"},ft={class:"left"},gt={class:"coin-a"},yt={alt:""},bt={class:"coin-b"},kt={alt:""},ht={class:"position-name"},_t={key:0,class:"pool-fee"},wt=Fe(()=>o("span",null,"Fee tier",-1)),$t={class:"left"},It={class:"vault-address"},St=["href"],At=Fe(()=>o("span",null,"Vault Address",-1)),Ct=Fe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Pt=[At,Ct],Tt={class:"apy-and-tvl"},qt={class:"apy"},Nt=Fe(()=>o("div",{class:"apy-title"},"APY",-1)),Rt={class:"apy-text"},Bt={class:"reward-coin"},Dt=Fe(()=>o("div",{class:"reward"},"Rewards",-1)),Lt={class:"right"},Ut={alt:""},Ot={class:"tvl"},Mt=Fe(()=>o("div",{class:"tvl-title"},"TVL",-1)),Ft={class:"tvl-text"};function Vt(e,s,G,Y,B,T){var t,C,f,n,d,r,b,S,p,_,O,W,ee,re,te,w,k,K,se,ie,de,j,oe,ge,ye,ve,A,L,pe,le,fe,g,J,Ce,ke,Oe,qe,Re,we,Pe,no,so,io,Ge,Ne,lo;const m=fo,q=Yo,I=Eo,a=qo("image");return l(),y("div",En,[o("div",Wn,[o("div",jn,[o("div",Xn,[Ee(o("img",zn,null,512),[[a,e.needReverse?e.getCoinIcon((C=e.positionInfo)==null?void 0:C.token_b):e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_a)]]),F(m,{address:e.needReverse?(r=(d=e.positionInfo)==null?void 0:d.token_b)==null?void 0:r.address:(n=(f=e.positionInfo)==null?void 0:f.token_a)==null?void 0:n.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Gn,[Ee(o("img",Yn,null,512),[[a,e.needReverse?e.getCoinIcon((S=e.positionInfo)==null?void 0:S.token_a):e.getCoinIcon((b=e.positionInfo)==null?void 0:b.token_b)]]),F(m,{address:e.needReverse?(W=(O=e.positionInfo)==null?void 0:O.token_a)==null?void 0:W.address:(_=(p=e.positionInfo)==null?void 0:p.token_b)==null?void 0:_.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Kn,v(e.needReverse?(re=(ee=e.positionInfo)==null?void 0:ee.token_b)==null?void 0:re.symbol:(w=(te=e.positionInfo)==null?void 0:te.token_a)==null?void 0:w.symbol)+" - "+v(e.needReverse?(K=(k=e.positionInfo)==null?void 0:k.token_a)==null?void 0:K.symbol:(ie=(se=e.positionInfo)==null?void 0:se.token_b)==null?void 0:ie.symbol),1),(de=e.positionInfo)!=null&&de.fee?(l(),y("div",Qn,[Zn,Ue(" "+v(((j=e.positionInfo)==null?void 0:j.fee)*100)+"% ",1)])):z("",!0),o("div",Jn,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:P(Io))(e.currentExplorer,"poolAddress",(oe=e.positionInfo)==null?void 0:oe.id),target:"_blank"},nt,8,xn)])]),o("div",tt,[o("div",st,[it,o("div",lt,[Ue(v(e.apy)+" ",1),F(q)])]),o("div",at,[ut,F(I,{"overlay-class-name":"reward-coin-tips"},{title:ue(()=>[Ue("Rewards will be auto harvested and compounded to your position.")]),default:ue(()=>{var He;return[o("div",rt,[(l(!0),y(Ye,null,co((He=e.positionInfo)==null?void 0:He.rewardList,Me=>(l(),y("div",{key:Me,class:"coin-a"},[Ee(o("img",dt,null,512),[[a,e.getCoinIcon({address:Me})]]),F(m,{address:Me,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1})]),o("div",vt,[mt,o("div",ct,"$"+v(("addCommom"in e?e.addCommom:P(D))(e.tvl,2)),1)])])]),o("div",pt,[o("div",ft,[o("div",gt,[Ee(o("img",yt,null,512),[[a,e.needReverse?e.getCoinIcon((ye=e.positionInfo)==null?void 0:ye.token_b):e.getCoinIcon((ge=e.positionInfo)==null?void 0:ge.token_a)]]),F(m,{address:e.needReverse?(pe=(L=e.positionInfo)==null?void 0:L.token_b)==null?void 0:pe.address:(A=(ve=e.positionInfo)==null?void 0:ve.token_a)==null?void 0:A.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",bt,[Ee(o("img",kt,null,512),[[a,e.needReverse?e.getCoinIcon((fe=e.positionInfo)==null?void 0:fe.token_a):e.getCoinIcon((le=e.positionInfo)==null?void 0:le.token_b)]]),F(m,{address:e.needReverse?(ke=(Ce=e.positionInfo)==null?void 0:Ce.token_a)==null?void 0:ke.address:(J=(g=e.positionInfo)==null?void 0:g.token_b)==null?void 0:J.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",ht,v(e.needReverse?(qe=(Oe=e.positionInfo)==null?void 0:Oe.token_b)==null?void 0:qe.symbol:(we=(Re=e.positionInfo)==null?void 0:Re.token_a)==null?void 0:we.symbol)+" - "+v(e.needReverse?(no=(Pe=e.positionInfo)==null?void 0:Pe.token_a)==null?void 0:no.symbol:(io=(so=e.positionInfo)==null?void 0:so.token_b)==null?void 0:io.symbol),1),(Ge=e.positionInfo)!=null&&Ge.fee?(l(),y("div",_t,[wt,Ue(" "+v(((Ne=e.positionInfo)==null?void 0:Ne.fee)*100)+"% ",1)])):z("",!0)]),o("div",$t,[o("div",It,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:P(Io))(e.currentExplorer,"poolAddress",(lo=e.positionInfo)==null?void 0:lo.id),target:"_blank"},Pt,8,St)])]),o("div",Tt,[o("div",qt,[Nt,o("div",Rt,[Ue(v(e.apy)+" ",1),F(q)])]),o("div",Bt,[Dt,F(I,{"overlay-class-name":"reward-coin-tips"},{title:ue(()=>[Ue("Rewards will be auto harvested and compounded to your position.")]),default:ue(()=>{var He;return[o("div",Lt,[(l(!0),y(Ye,null,co((He=e.positionInfo)==null?void 0:He.rewardList,Me=>(l(),y("div",{key:Me,class:"coin-a"},[Ee(o("img",Ut,null,512),[[a,e.getCoinIcon({address:Me})]]),F(m,{address:Me,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1})]),o("div",Ot,[Mt,o("div",Ft,"$"+v(("addCommom"in e?e.addCommom:P(D))(e.tvl,2)),1)])])])])}const en=Ve(Hn,[["render",Vt],["__scopeId","data-v-d4b397f3"]]),Ht=je({components:{Slider:Wo},setup(){const e=$(!0),s=oo(),G=h(()=>s),Y=Qe(),B=h(()=>Y),T=eo(),m=$();_e(()=>[B.value.positionInfoObj,T.params.id],([f,n])=>{f&&!Ke(f)&&n&&(m.value=f[n],console.log(m.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const q=h(()=>{var f;return(f=m.value)==null?void 0:f.needReverse}),I=f=>{var n;return(f==null?void 0:f.logoURI)||(f==null?void 0:f.logo_url)||((n=G.value.tokensObj[f==null?void 0:f.address])==null?void 0:n.logo_url)||ro("/image/coins/sui-unknown.png")},a=h(()=>{var b,S,p,_,O,W,ee;const f=e.value?((b=m.value)==null?void 0:b.minPrice)&&R(m==null?void 0:m.value.minPrice,6):((S=m.value)==null?void 0:S.maxPrice)&&R(1/(m==null?void 0:m.value.maxPrice),6),n=e.value?((p=m.value)==null?void 0:p.maxPrice)&&R((_=m.value)==null?void 0:_.maxPrice,6):((O=m.value)==null?void 0:O.minPrice)&&R(1/(m==null?void 0:m.value.minPrice),6),d=(q.value?!e.value:e.value)?R((W=m.value)==null?void 0:W.price,6):R(1/((ee=m.value)==null?void 0:ee.price),6);let r={};return r[f]={label:"Min Price"},r[n]={label:"Max Price"},d>f&&d<n?r[d]={label:"Current Price"}:d<f?r[Number(f)+1e-9]={label:"Current Price"}:d>n&&(r[Number(n)-1e-9]={label:"Current Price"}),console.log(r,"obj###"),r}),t=h(()=>{var n,d;const f=(q.value?!e.value:e.value)?Le((n=m.value)==null?void 0:n.price,6):Le(1/((d=m.value)==null?void 0:d.price),6);return console.log(f,"result##"),f}),C=h(()=>{var n,d;const f=(q.value?!e.value:e.value)?Le((n=m.value)==null?void 0:n.price,6):Le(1/((d=m.value)==null?void 0:d.price),6);return console.log(f,"result##111"),f});return{direct:e,positionInfo:m,needReverse:q,getCoinIcon:I,decimalUi:Le,addCommom:D,sFixD:R,marks:a,currentPrice:t,currentPriceResever:C}}});const bo=e=>(Xe("data-v-794c305c"),e=e(),ze(),e),Et={class:"v2-position-range"},Wt={class:"position-range-top"},jt=bo(()=>o("div",null,"Position Range",-1)),Xt={class:"base-coin"},zt={key:0},Gt={alt:""},Yt={key:1},Kt={alt:""},Qt={key:2},Zt={key:3},Jt=bo(()=>o("p",null,"Base coin",-1)),xt={class:"coin-rate"},es=bo(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),os=bo(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ns=[es,os],ts={class:"position-range-bottom"},ss={class:"price-range"},is={class:"price-range-bg"},ls={key:0,class:"min-price"},as={key:0},us={key:1},rs={key:1,class:"max-price"},ds={key:0},vs={key:1},ms={key:0,class:"min-price"},cs={key:0},ps={key:1},fs={key:1,class:"max-price"},gs={key:0},ys={key:1};function bs(e,s,G,Y,B,T){var a,t,C,f,n,d,r,b,S,p,_,O,W,ee,re,te,w,k,K,se,ie,de,j,oe,ge,ye,ve,A;const m=fo,q=to("Slider"),I=qo("image");return l(),y("div",Et,[o("div",Wt,[jt,o("div",Xt,[e.needReverse?(l(),y("div",Yt,[Ee(o("img",Kt,null,512),[[I,e.direct?e.getCoinIcon((b=e.positionInfo)==null?void 0:b.token_b):e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_a)]]),F(m,{address:e.direct?(O=(_=e.positionInfo)==null?void 0:_.token_b)==null?void 0:O.address:(p=(S=e.positionInfo)==null?void 0:S.token_a)==null?void 0:p.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(l(),y("div",zt,[Ee(o("img",Gt,null,512),[[I,e.direct?e.getCoinIcon((a=e.positionInfo)==null?void 0:a.token_a):e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_b)]]),F(m,{address:e.direct?(f=(C=e.positionInfo)==null?void 0:C.token_a)==null?void 0:f.address:(d=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:d.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(l(),y("span",Zt,v(e.direct?(k=(w=e.positionInfo)==null?void 0:w.token_b)==null?void 0:k.symbol:(se=(K=e.positionInfo)==null?void 0:K.token_a)==null?void 0:se.symbol),1)):(l(),y("span",Qt,v(e.direct?(ee=(W=e.positionInfo)==null?void 0:W.token_a)==null?void 0:ee.symbol:(te=(re=e.positionInfo)==null?void 0:re.token_b)==null?void 0:te.symbol),1)),Jt,o("div",xt,[o("div",{onClick:s[0]||(s[0]=L=>e.direct=!e.direct)},ns)])])]),o("div",ts,[o("div",ss,[o("div",is,[e.direct?(l(),Z(q,{key:0,value:e.currentPrice,class:Te(["position-slider",e.currentPrice<Number(("sFixD"in e?e.sFixD:P(R))((ie=e.positionInfo)==null?void 0:ie.minPrice,6))||e.currentPrice>Number(("sFixD"in e?e.sFixD:P(R))((de=e.positionInfo)==null?void 0:de.maxPrice,6))?"hide-handler":""]),step:null,marks:e.marks,disabled:!0,min:Number(("decimalUi"in e?e.decimalUi:P(Le))((j=e.positionInfo)==null?void 0:j.minPrice,6)),max:Number(("decimalUi"in e?e.decimalUi:P(Le))((oe=e.positionInfo)==null?void 0:oe.maxPrice,6))},{mark:ue(({label:L})=>{var pe,le,fe,g,J,Ce,ke,Oe,qe,Re,we,Pe;return[L=="Min Price"?(l(),y("div",ls,[o("div",null,v(L),1),e.direct?(l(),y("div",as,v(((pe=e.positionInfo)==null?void 0:pe.minPrice)&&("sFixD"in e?e.sFixD:P(R))((le=e.positionInfo)==null?void 0:le.minPrice,6)),1)):(l(),y("div",us,v(((fe=e.positionInfo)==null?void 0:fe.maxPrice)&&("sFixD"in e?e.sFixD:P(R))(1/((g=e.positionInfo)==null?void 0:g.maxPrice),6)),1))])):z("",!0),L=="Max Price"?(l(),y("div",rs,[o("div",null,v(L),1),e.direct?(l(),y("div",ds,v(((J=e.positionInfo)==null?void 0:J.maxPrice)&&("sFixD"in e?e.sFixD:P(R))((Ce=e.positionInfo)==null?void 0:Ce.maxPrice,6)),1)):(l(),y("div",vs,v(((ke=e.positionInfo)==null?void 0:ke.minPrice)&&("sFixD"in e?e.sFixD:P(R))(1/((Oe=e.positionInfo)==null?void 0:Oe.minPrice),6)),1))])):z("",!0),L=="Current Price"?(l(),y("div",{key:2,class:Te(["current-price",e.currentPrice<Number(("sFixD"in e?e.sFixD:P(R))((qe=e.positionInfo)==null?void 0:qe.minPrice,6))?"current-price-left":e.currentPrice>Number(("sFixD"in e?e.sFixD:P(R))((Re=e.positionInfo)==null?void 0:Re.maxPrice,6))?"current-price-right":""])},[o("div",null,v(L),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(l(),y(Ye,{key:0},[Ue(v(("addCommom"in e?e.addCommom:P(D))(("decimalUi"in e?e.decimalUi:P(Le))((we=e.positionInfo)==null?void 0:we.price,6))),1)],64)):(l(),y(Ye,{key:1},[Ue(v(("addCommom"in e?e.addCommom:P(D))(("decimalUi"in e?e.decimalUi:P(Le))(1/((Pe=e.positionInfo)==null?void 0:Pe.price),6))),1)],64))])],2)):z("",!0)]}),_:1},8,["value","class","marks","min","max"])):(l(),Z(q,{key:1,value:e.currentPriceResever,class:Te(["position-slider",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:P(R))(1/((ge=e.positionInfo)==null?void 0:ge.maxPrice),6))||e.currentPriceResever>Number(("sFixD"in e?e.sFixD:P(R))(1/((ye=e.positionInfo)==null?void 0:ye.minPrice),6))?"hide-handler":""]),step:null,min:Number(("decimalUi"in e?e.decimalUi:P(Le))(1/((ve=e.positionInfo)==null?void 0:ve.maxPrice),6)),max:Number(("decimalUi"in e?e.decimalUi:P(Le))(1/((A=e.positionInfo)==null?void 0:A.minPrice),6)),marks:e.marks,disabled:!0},{mark:ue(({label:L})=>{var pe,le,fe,g,J,Ce,ke,Oe,qe,Re,we,Pe;return[L=="Min Price"?(l(),y("div",ms,[o("div",null,v(L),1),e.direct?(l(),y("div",cs,v(((pe=e.positionInfo)==null?void 0:pe.minPrice)&&("sFixD"in e?e.sFixD:P(R))((le=e.positionInfo)==null?void 0:le.minPrice,6)),1)):(l(),y("div",ps,v(((fe=e.positionInfo)==null?void 0:fe.maxPrice)&&("sFixD"in e?e.sFixD:P(R))(1/((g=e.positionInfo)==null?void 0:g.maxPrice),6)),1))])):z("",!0),L=="Max Price"?(l(),y("div",fs,[o("div",null,v(L),1),e.direct?(l(),y("div",gs,v(((J=e.positionInfo)==null?void 0:J.maxPrice)&&("sFixD"in e?e.sFixD:P(R))((Ce=e.positionInfo)==null?void 0:Ce.maxPrice,6)),1)):(l(),y("div",ys,v(((ke=e.positionInfo)==null?void 0:ke.minPrice)&&("sFixD"in e?e.sFixD:P(R))(1/((Oe=e.positionInfo)==null?void 0:Oe.minPrice),6)),1))])):z("",!0),L=="Current Price"?(l(),y("div",{key:2,class:Te(["current-price current-price-direct",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:P(R))(1/((qe=e.positionInfo)==null?void 0:qe.maxPrice),6))?"current-price-left":e.currentPriceResever>Number(("sFixD"in e?e.sFixD:P(R))(1/((Re=e.positionInfo)==null?void 0:Re.minPrice),6))?"current-price-right":""])},[o("div",null,v(L),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(l(),y(Ye,{key:0},[Ue(v(("addCommom"in e?e.addCommom:P(D))(("decimalUi"in e?e.decimalUi:P(Le))((we=e.positionInfo)==null?void 0:we.price,6))),1)],64)):(l(),y(Ye,{key:1},[Ue(v(("addCommom"in e?e.addCommom:P(D))(("decimalUi"in e?e.decimalUi:P(Le))(1/((Pe=e.positionInfo)==null?void 0:Pe.price),6))),1)],64))])],2)):z("",!0)]}),_:1},8,["value","class","min","max","marks"]))])])])])}const on=Ve(Ht,[["render",bs],["__scopeId","data-v-794c305c"]]),ks=je({components:{Modal:Ho},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const s=h(()=>{var Y,B;const G=Math.ceil(((Y=e.positionInfo)==null?void 0:Y.poolUSD)/((B=e.positionInfo)==null?void 0:B.quoteUSD)*100);return console.log(G,"Pool Capacity Ratio"),Number(G)});return{sFixD:R,addCommom:D,ratio:s}}});const No=e=>(Xe("data-v-78a51262"),e=e(),ze(),e),hs=No(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),_s={class:"deposit-slider"},ws={class:"info-block"},$s=No(()=>o("div",{class:"leabl"},"Current Deposit：",-1)),Is={class:"text"},Ss={class:"info-block"},As=No(()=>o("div",{class:"leabl"},"Max Capacity：",-1)),Cs={class:"text"};function Ps(e,s,G,Y,B,T){const m=to("Modal");return l(),Z(m,{width:"440px",visible:!0,footer:null,title:"Vault Capacity",onCancel:s[0]||(s[0]=q=>e.$emit("onClose"))},{closeIcon:ue(()=>[hs]),default:ue(()=>{var q,I,a,t;return[o("div",_s,[o("div",{class:"current-deposit",style:$o({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",ws,[$s,o("div",Is,v(("addCommom"in e?e.addCommom:P(D))(("sFixD"in e?e.sFixD:P(R))((q=e.positionInfo)==null?void 0:q.currentDeposit,2)))+" "+v((I=e.positionInfo)==null?void 0:I.quoteCoinInfo.symbol),1)]),o("div",Ss,[As,o("div",Cs,v(("addCommom"in e?e.addCommom:P(D))(("sFixD"in e?e.sFixD:P(R))((a=e.positionInfo)==null?void 0:a.quoteUSD,2)))+" "+v((t=e.positionInfo)==null?void 0:t.quoteCoinInfo.symbol),1)])]}),_:1})}const nn=Ve(ks,[["render",Ps],["__scopeId","data-v-78a51262"]]),Ts=je({components:{AutoPoolV2PoolCapacity:nn},setup(){const e=oo(),s=h(()=>e),G=Qe(),Y=h(()=>G),B=eo(),T=$();_e(()=>[Y.value.positionInfoObj,B.params.id],([a,t])=>{console.log(a,"##positionInfoObj"),a&&!Ke(a)&&t&&(T.value=a[t],console.log(T.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const m=h(()=>{var a;return(a=T.value)==null?void 0:a.needReverse}),q=a=>{var t;return console.log(a,"info##"),(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((t=s.value.tokensObj[a==null?void 0:a.address])==null?void 0:t.logo_url)||ro("/image/coins/sui-unknown.png")},I=$(!1);return{needReverse:m,positionInfo:T,getCoinIcon:q,addCommom:D,isShowModal:I}}});const qs=e=>(Xe("data-v-ad8a33e9"),e=e(),ze(),e),Ns={class:"pool-composition"},Rs={class:"pool-composition-top"},Bs=qs(()=>o("span",null,"Vault Composition",-1)),Ds={class:"pool-composition-bottom"},Ls={class:"token-ratio"},Us={class:"before-coin"},Os={alt:""},Ms={class:"after-coin"},Fs={alt:""},Vs={class:"token-num"},Hs={class:"num-box"},Es={class:"num-box"};function Ws(e,s,G,Y,B,T){var a,t,C,f,n,d,r,b,S,p,_,O,W,ee,re,te,w,k,K,se,ie,de,j,oe,ge,ye,ve,A,L;const m=fo,q=nn,I=qo("image");return l(),y("div",Ns,[o("div",Rs,[Bs,Number((a=e.positionInfo)==null?void 0:a.quoteUSD)>0?(l(),y("div",{key:0,class:"pool-capacity",onClick:s[0]||(s[0]=pe=>e.isShowModal=!0)},"Vault Capacity")):z("",!0)]),o("div",Ds,[o("div",Ls,[o("div",Us,[o("div",null,[F(m,{address:e.needReverse?(n=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:n.address:(C=(t=e.positionInfo)==null?void 0:t.token_a)==null?void 0:C.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),Ee(o("img",Os,null,512),[[I,e.needReverse?e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_b):e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_a)]])]),o("span",null,v((b=e.positionInfo)==null?void 0:b.poolCoinARatio)+"%",1)]),o("div",Ms,[o("span",null,v((S=e.positionInfo)==null?void 0:S.poolCoinBRatio)+"%",1),o("div",null,[Ee(o("img",Fs,null,512),[[I,e.needReverse?e.getCoinIcon((_=e.positionInfo)==null?void 0:_.token_a):e.getCoinIcon((p=e.positionInfo)==null?void 0:p.token_b)]]),F(m,{address:e.needReverse?(re=(ee=e.positionInfo)==null?void 0:ee.token_a)==null?void 0:re.address:(W=(O=e.positionInfo)==null?void 0:O.token_b)==null?void 0:W.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",Vs,[o("div",{class:"token-a-bg",style:$o({width:`${(te=e.positionInfo)==null?void 0:te.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:$o({width:`${(w=e.positionInfo)==null?void 0:w.poolCoinBRatio}%`})},null,4),o("div",Hs,[o("div",null,v(("addCommom"in e?e.addCommom:P(D))((k=e.positionInfo)==null?void 0:k.poolCoinANum))+" "+v(e.needReverse?(de=(ie=e.positionInfo)==null?void 0:ie.token_b)==null?void 0:de.symbol:(se=(K=e.positionInfo)==null?void 0:K.token_a)==null?void 0:se.symbol),1),o("div",null,"$"+v(("addCommom"in e?e.addCommom:P(D))((j=e.positionInfo)==null?void 0:j.poolCoinAUSD)),1)]),o("div",Es,[o("div",null,v(("addCommom"in e?e.addCommom:P(D))((oe=e.positionInfo)==null?void 0:oe.poolCoinBNum))+" "+v(e.needReverse?(A=(ve=e.positionInfo)==null?void 0:ve.token_a)==null?void 0:A.symbol:(ye=(ge=e.positionInfo)==null?void 0:ge.token_b)==null?void 0:ye.symbol),1),o("div",null,"$"+v(("addCommom"in e?e.addCommom:P(D))((L=e.positionInfo)==null?void 0:L.poolCoinBUSD)),1)])])]),e.isShowModal?(l(),Z(q,{key:0,"position-info":e.positionInfo,onOnClose:s[1]||(s[1]=pe=>e.isShowModal=!1)},null,8,["position-info"])):z("",!0)])}const tn=Ve(Ts,[["render",Ws],["__scopeId","data-v-ad8a33e9"]]),js=je({setup(){const e=oo(),s=h(()=>e),G=Qe(),Y=h(()=>G),B=eo(),T=$();_e(()=>[Y.value.positionInfoObj,B.params.id],([t,C])=>{console.log(t,"##positionInfoObj"),t&&!Ke(t)&&C&&(T.value=t[C],console.log(T.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const m=h(()=>{var t;return(t=T.value)==null?void 0:t.needReverse}),q=t=>{var C;return console.log(t,"info##"),(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((C=s.value.tokensObj[t==null?void 0:t.address])==null?void 0:C.logo_url)||ro("/image/coins/sui-unknown.png")},I=yo(),a=h(()=>I);return{needReverse:m,positionInfo:T,getCoinIcon:q,addCommom:D,wallet:a}}});const mo=e=>(Xe("data-v-61c3efe6"),e=e(),ze(),e),Xs={class:"my-liquidity"},zs={class:"my-liquidity-top"},Gs=mo(()=>o("div",null,"My Liquidity",-1)),Ys=mo(()=>o("p",null,"My share of pool",-1)),Ks={class:"my-liquidity-bottom"},Qs={class:"lp-token"},Zs=mo(()=>o("div",null,[o("span",null,"LP Token Balance ")],-1)),Js={class:"lp-balance"},xs={class:"token-num-content"},ei={class:"token-num token-a-num"},oi={class:"logo"},ni=["src"],ti={class:"text"},si={class:"lp-logo"},ii=["src"],li=mo(()=>o("div",null,"Pooled Assets",-1)),ai={class:"token-num"},ui={class:"logo"},ri=["src"],di={class:"text"},vi=mo(()=>o("div",{class:"token-num-content-bg"},null,-1));function mi(e,s,G,Y,B,T){var q,I,a,t,C,f,n,d,r,b,S,p,_,O,W,ee,re,te,w,k,K,se,ie,de,j,oe,ge,ye,ve;const m=fo;return l(),y("div",Xs,[o("div",zs,[Gs,o("div",null,[Ys,o("p",null,v(e.wallet.connected?(q=e.positionInfo)==null?void 0:q.myShare:"--")+"%",1)])]),o("div",Ks,[o("div",Qs,[Zs,o("div",null,[o("span",Js,v(e.wallet.connected?("addCommom"in e?e.addCommom:P(D))((I=e.positionInfo)==null?void 0:I.myLiquidity):"--")+" LP",1),o("span",null,v(e.wallet.connected?((a=e.positionInfo)==null?void 0:a.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in e?e.addCommom:P(D))((t=e.positionInfo)==null?void 0:t.myLiquidityUSD)}`:"<$0.01":"--"),1)])]),o("div",xs,[o("div",ei,[o("div",oi,[o("img",{src:e.needReverse?e.getCoinIcon((f=e.positionInfo)==null?void 0:f.token_b):e.getCoinIcon((C=e.positionInfo)==null?void 0:C.token_a),alt:""},null,8,ni),F(m,{address:e.needReverse?(b=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:b.address:(d=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:d.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",ti,[o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:P(D))((S=e.positionInfo)==null?void 0:S.amountA):"--")+" "+v(e.needReverse?(W=(O=e.positionInfo)==null?void 0:O.token_b)==null?void 0:W.symbol:(_=(p=e.positionInfo)==null?void 0:p.token_a)==null?void 0:_.symbol),1),o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:P(D))((ee=e.positionInfo)==null?void 0:ee.myAmountAUSD):"--"),1)])]),o("div",si,[o("img",{src:e.getCoinIcon((re=e.positionInfo)==null?void 0:re.lpInfo),alt:""},null,8,ii),li]),o("div",ai,[o("div",ui,[o("img",{src:e.needReverse?e.getCoinIcon((w=e.positionInfo)==null?void 0:w.token_a):e.getCoinIcon((te=e.positionInfo)==null?void 0:te.token_b),alt:""},null,8,ri),F(m,{address:e.needReverse?(ie=(se=e.positionInfo)==null?void 0:se.token_a)==null?void 0:ie.address:(K=(k=e.positionInfo)==null?void 0:k.token_b)==null?void 0:K.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",di,[o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:P(D))((de=e.positionInfo)==null?void 0:de.amountB):"--")+" "+v(e.needReverse?(ye=(ge=e.positionInfo)==null?void 0:ge.token_a)==null?void 0:ye.symbol:(oe=(j=e.positionInfo)==null?void 0:j.token_b)==null?void 0:oe.symbol),1),o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:P(D))((ve=e.positionInfo)==null?void 0:ve.myAmountBUSD):"--"),1)])]),vi])])])}const sn=Ve(js,[["render",mi],["__scopeId","data-v-61c3efe6"]]),ci=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const pi={},ln=e=>(Xe("data-v-fcbc716b"),e=e(),ze(),e),fi={class:"status"},gi=ln(()=>o("img",{src:ci,alt:""},null,-1)),yi=ln(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),bi=[gi,yi];function ki(e,s){return l(),y("div",fi,bi)}const an=Ve(pi,[["render",ki],["__scopeId","data-v-fcbc716b"]]),hi=je({components:{AutoPoolAddModal:Zo,AutoPoolV2PoolStatus:an},setup(){const e=yo(),s=$(!1),G=go(),Y=h(()=>G),B=h(()=>Y.value.chainName),T=h(()=>e),m=Qe(),q=h(()=>m),I=oo(),a=h(()=>I),t=$(),C=eo(),f=$(!1),n=$(!1);_e(()=>[q.value.positionInfoObj,C.params.id],([c,V])=>{c&&!Ke(c)&&V&&(t.value=c[V],console.log(t.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const d=h(()=>{var c,V;return console.log((c=t.value)==null?void 0:c.needReverse,"##positionInfo.value?.needReverse"),(V=t.value)==null?void 0:V.needReverse}),r=$(),b=$(),S=$(),p=$(),_=$(!0),O=h(()=>T.value.assets&&r.value&&T.value.assets[r.value.address]?Vo(T.value.assets[r.value.address].balance,r.value.decimals):0),W=h(()=>T.value.assets&&b.value&&T.value.assets[b.value.address]?Vo(T.value.assets[b.value.address].balance,b.value.decimals):0),ee=c=>{c==="fromCoin"?(_.value=!0,S.value=O.value>0?r.value.symbol=="SUI"?new u(Number(O.value)).sub(new u(.05)).lt(new u(0))?"0":new u(Number(O.value)).sub(new u(.05)).toString():String(O.value):""):(_.value=!1,p.value=W.value>0?b.value.symbol=="SUI"?new u(Number(W.value)).sub(new u(.05)).lt(new u(0))?"0":new u(Number(W.value)).sub(new u(.05)).toString():String(W.value):"")},re=c=>{c==="fromCoin"?(_.value=!0,S.value=O.value>0?R(new u(Number(O.value)).div(2).toString(),r.value.decimals).toString():""):(_.value=!1,p.value=W.value>0?R(new u(Number(W.value)).div(2).toString(),b.value.decimals).toString():"")},te=h(()=>B.value?Go(B.value):{}),w=h(()=>q.value.slippage),k=$("--"),K=$("--"),se=c=>{const V=new u(t.value.autoPoolPositionInfo.liquidity),me=new u(c.toString());if(V.toNumber()>0&&me.toNumber()>0){const U=me.add(V);console.log("totalLiquidity:",me.div(U).mul(100).toString());const $e=me.div(U).mul(100).toNumber(),be=hn($e),i=be==-1?2:be+2,N=R(me.div(U).mul(100).toNumber(),i);console.log(t.value.decimals,"##positionInfo.value.decimal");const ne=new u(1).div(new u(Math.pow(10,t.value.lpInfo.decimals))).toString();console.log(N,ne,"###288"),Number(N)<Number(ne)?k.value=`<${ne}`:k.value=N}else me.toNumber()>0&&V.toNumber()<=0?k.value="100":k.value="--"},ie=c=>{if(t.value.total_supply==0){K.value="";return}const V=new u(c.toString()),me=new u(w.value).div(100);console.log(me.toString(),"#slippageNum");const U=So.get_lp_amount_by_liquidity({liquidity:t.value.liquidity,total_supply:t.value.total_supply},c.toString()),$e=new u(Math.pow(10,t.value.lpInfo.decimals)),be=new u(U).div($e).toString(),i=new u(be).mul(me);console.log(U,i.toString(),"###409");const N=new u(be).sub(i);console.log(N.toString(),"##minLp"),console.log(V.toString(),U,be,"lpDecimalNum##"),K.value=R(N.toString(),t.value.decimals)},de=$(!1),j=$(!1),oe=$(""),ge=$(),ye=$(!1),ve=$(!1),A=$(!1),L=$(!1),pe=async()=>{if(console.log(A.value,L.value,"isOnlyA.value||isOnlyB.value"),console.log(t.value,"positionInfo.value###432"),!t.value)return;if(console.log(S.value,p.value,"####updateAmounts"),t.value.supportHaedalStake&&L.value&&p.value<10){ve.value=!0;return}n.value=!1,ye.value=!0;const c=t.value.autoPoolPositionInfo.tick_lower_index,V=t.value.autoPoolPositionInfo.tick_upper_index,me=We.sqrtPriceX64ToTickIndex(new ce(t.value.current_sqrt_price));We.tickIndexToSqrtPriceX64(c),We.tickIndexToSqrtPriceX64(V),me<c&&(d.value?de.value=!0:j.value=!0),me>V&&(d.value?j.value=!0:de.value=!0);let U;if(console.log(S.value||p.value,"#fromCoinAmount.value || toCoinAmount.value"),S.value||p.value){_.value?U=new u(S.value).mul(Math.pow(10,r.value.decimals)).toString():U=new u(p.value).mul(Math.pow(10,b.value.decimals)).toString();let $e,be=_.value;if(console.log("执行##"),console.log(me,c,V,"###520"),A.value||L.value){const H=new u(1);if(console.log(H.toString(),U,"decimalNum###"),new u(U).lte(H))return n.value=!0,!1;console.log(d.value?_.value:!_.value,"#needReverse.value?fixedFromCoin.value:!fixedFromCoin.value"),console.log(U,"##coinAmount"),console.log("1106###needReverse.value####",d.value),console.log("1106###calculateDepositSwapAmount###params###",{lowerTick:c,upperTick:V,curSqrtPrice:new ce(t.value.current_sqrt_price),fix_amount_a:be,input_amount:U,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number(w.value)/100,decimals:A.value?r.value.decimals:b.value.decimals,use_Haedal_stake:t.value.supportHaedalStake&&L.value,shouldRequestStake:!1});let M;try{M=await Ge.calculateDepositSwapAmount({lowerTick:c,upperTick:V,curSqrtPrice:new ce(t.value.current_sqrt_price),fix_amount_a:be,input_amount:U,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number(w.value)/100,decimals:A.value?r.value.decimals:b.value.decimals,request_id:U,staking_id:t.value.supportHaedalStake&&(L.value&&!t.value.isTokenA||A.value&&t.value.isTokenA)?t.value.staking_id:"",shouldRequestStake:!1})}catch(ae){console.log("calculateDepositSwapAmount",ae)}if(console.log(M,"###swapResult"),console.log("1106###calculateDepositSwapAmount###result###",M),M=="HaedalStakeSuiAmountError"){f.value=!1,ve.value=!0;return}else if(M){if(M.request_id!==U)return;ve.value=!1,f.value=t.value.supportHaedalStake?!1:M.is_exceed,$e=new ce(M.afterSqrtPrice),U=M.fixAmountA===be?new ce(new u(U).sub(M.swapInAmount).toString()):new ce(M.swapOutAmount),ge.value={swap_amount:M.swapInAmount,route_obj:M.route_obj,a2b:be,input_amount:U,staking_id:M.staking_id},be=M.fixAmountA;const ae=t.value.token_a.decimals,X=t.value.token_b.decimals,E=new u(M.swapInAmount).div(new u(Math.pow(10,ae))).toString(),x=R(new u(M.swapOutAmountLimit).div(new u(Math.pow(10,X))).toString(),X),Ie=d.value?t.value.token_b.symbol:t.value.token_a.symbol,he=d.value?t.value.token_a.symbol:t.value.token_b.symbol,Se=`To deposit ${D(A.value?S.value:p.value)} ${A.value?Ie:he},
            ${D(E)} ${A.value?Ie:he}  will be traded for ${D(x)} ${A.value?he:Ie} added to the pool.`,Je=`By depositing ${p.value} ${he}, ${D(x)} ${he} will be converted to ${Ie} via Haedal 
            liquid staking and added to the pool together.`;oe.value=t.value.supportHaedalStake&&L.value?Je:Se}else $e=t.value.current_sqrt_price,U=new ce(U)}else f.value=!1,$e=t.value.current_sqrt_price,U=new ce(U),oe.value="";console.log(ge,"##swapParams");let i,N,ne;const Q=te.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:r.value,tokenB:b.value,lowerTick:c,upperTick:V,coinAmount:U,iscoinA:be,roundUp:!0,slippage:Number(w.value)/100,curSqrtPrice:new ce($e)});console.log("amount#",Q),i=Q.liquidityAmount,N=Q.tokenMaxA,ne=Q.tokenMaxB,!A.value&&!L.value&&(_.value?p.value=Number(ne)>0?ne:"":S.value=Number(N)>0?N:""),console.log(i.toString(),"liquidityAmount###"),se(i),ie(i),ye.value=!1}};_e(()=>t.value,c=>{c&&!Ke(c)&&(r.value=c==null?void 0:c.token_a,b.value=c==null?void 0:c.token_b,de.value=!1,j.value=!1,pe())},{immediate:!0});const le=h(()=>a.value.RATES),fe=h(()=>{var c,V,me,U,$e,be,i,N,ne,Q;if((V=le.value[(c=r.value)==null?void 0:c.address])!=null&&V.price&&((U=le.value[(me=b.value)==null?void 0:me.address])!=null&&U.price)){console.log((be=le.value[($e=r.value)==null?void 0:$e.address])==null?void 0:be.price,"RATES.value[fromCoin.value?.address]?.price");const H=new u(S.value||0).mul(new u((N=le.value[(i=r.value)==null?void 0:i.address])==null?void 0:N.price)),M=new u(p.value||0).mul(new u((Q=le.value[(ne=b.value)==null?void 0:ne.address])==null?void 0:Q.price));return H.add(M).toNumber()}else return"--"});_e(()=>S.value,vo((c,V)=>{console.log(c,"##newVal"),c?pe():(k.value="--",p.value="",K.value="--")},500),{immediate:!0}),_e(()=>p.value,vo((c,V)=>{c?pe():(S.value="",k.value="--",K.value="--")},500),{immediate:!0});const{t:g,locale:J}=Ao(),Ce=h(()=>{var c,V;if(A.value||L.value){const me=A.value?S.value:p.value,U=A.value?r.value:b.value;if((c=le.value[U==null?void 0:U.address])!=null&&c.price)return new u(me||0).mul(new u((V=le.value[U==null?void 0:U.address])==null?void 0:V.price)).toNumber()}return 0}),ke=h(()=>{const c=Number(S.value)>Number(O.value),V=Number(p.value)>Number(W.value);return!S.value&&!p.value?g("button.enterAmount"):t.value.supportHaedalStake&&L.value&&p.value<10?"Minimum deposit 10 SUI":c?g("button.insufficientBalance",{name:r.value.symbol}):V?g("button.insufficientBalance",{name:b.value.symbol}):f.value?g("button.insufficientLiquidity"):Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(fe.value)>Number(t.value.remainingTokenUSD)?"Exceeded the max capacity":n.value?g("button.enterAmount"):(console.log(Ce.value),"Add Liquidity")}),Oe=h(()=>{const c=Number(S.value)>Number(O.value),V=Number(p.value)>Number(W.value);return!!(!S.value&&!p.value||c||V||S.value<=0&&p.value<=0||f.value||He.value!=="STATUS_RUNNING"||(console.log(fe.value,t.value.quoteUSD,"positionInfo.value.quoteUSD#"),Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(fe.value)>Number(t.value.remainingTokenUSD))||n.value||t.value.supportHaedalStake&&!L.value&&Ce.value>1e4||!t.value.supportHaedalStake&&Ce.value>1e4||ve.value||t.value.supportHaedalStake&&L.value&&p.value<10)}),qe=$(!0),{setIsShowSuccess:Re,setIsShowRejected:we,setIsShowWaiting:Pe,setTransactionDesc:no,setTransactionTxid:so,setPositiomNum:io}=G,Ge=zo("Sui"),Ne=async()=>{var ne,Q;s.value=!1,qe.value=!0,so("");const c=`${D(S.value)} ${(ne=r.value)==null?void 0:ne.symbol}`,V=`${D(p.value)} ${(Q=b.value)==null?void 0:Q.symbol}`;no(`Deposit ${S.value>0?c:""} ${p.value>0&&S.value>0?"and":""} ${p.value>0?V:""}`),Pe(!0);const me=_.value,U=t.value.autoPoolPositionInfo.tick_lower_index,$e=t.value.autoPoolPositionInfo.tick_upper_index,be=We.sqrtPriceX64ToTickIndex(new ce(t.value.current_sqrt_price));let i;_.value?i=new u(S.value).mul(Math.pow(10,r.value.decimals)).toString():i=new u(p.value).mul(Math.pow(10,b.value.decimals)).toString();const N=t.value.rewarderInfo.map(H=>H.coinAddress);console.log("1109###deposit###positionInfo###",t);try{const H={lowerTick:U,upperTick:$e,coinAmount:i,fix_amount_a:me,slippage:Number(w.value)/100,curSqrtPrice:new ce(t.value.current_sqrt_price),id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:N,swapParams:ge.value,isOnlyA:A.value,isOnlyB:L.value,currentTickIndex:be,decimal_b:t.value.coinB.decimals,request_id:i,staking_id:t.value.supportHaedalStake&&(L.value&&!t.value.isTokenA||A.value&&t.value.isTokenA)?t.value.staking_id:"",shouldRequestStake:t.value.supportHaedalStake&&L.value,farming_pool:t.value.autoPoolPositionInfo.pool_id};console.log("1106###deposit###params###",H);const M=await Ge.deposit(H);console.log(M,"===>payloadAdd11111");const ae=await te.value.signAndExecuteTransactionBlock(T.value.currentWallet,M);let X=te.value.handleTx(ae);if(console.log("toAdd###tx###",X),X&&X.hash){so(X.hash),Pe(!1),Re(!0),console.log(t,"===>positionInfo");const E={title:"Supplied",desc:`Deposit ${S.value>0?c:""} ${p.value>0&&S.value>0?"and":""} ${p.value>0?V:""}`,hash:X.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${S.value>0?c:""} ${p.value>0&&S.value>0?"and":""} ${p.value>0?V:""}`,isOnlyToken:A.value||L.value,isOnlyTokenInfo:A.value?r.value:b.value};B.value!=="Aptos"&&(E.res=X.res),te.value.showTransitionPending(E),await te.value.watchTransaction(E)&&setTimeout(()=>{m.updatePositionItem(t.value.id),te.value.getAccount(T.value.address)},1e3),io()}else Pe(!1),we(!0);S.value="",p.value="",qe.value=!1}catch(H){S.value="",p.value="",console.log("addError###",H),qe.value=!1,Pe(!1),we(!0)}},lo=c=>{S.value="",p.value="",oe.value="",ve.value=!1,c=="only-a-b"?(A.value=!1,L.value=!1):c=="only-a"?(A.value=!0,L.value=!1):(L.value=!0,A.value=!1)},He=h(()=>q.value.currentAutoPoolStatus),Me=$(),ho=()=>{Me.value=window.setInterval(()=>{(S.value||p.value)&&pe()},2e4)};po(()=>{ho()}),Po(()=>{window.clearInterval(Me.value)});const _o=pn(fn,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0});return{currentAutoPoolStatus:He,wallet:T,positionInfo:t,isShowAddModal:s,needReverse:d,fromCoin:r,toCoin:b,fromCoinAmount:S,toCoinAmount:p,fromCoinBlance:O,toCoinBlance:W,fixedFromCoin:_,maxBtnSelect:ee,halfBtnSelect:re,totalAmountUSD:fe,addCommom:D,shareOfPool:k,minimumReceivedLP:K,addLiquidityBtnText:ke,addLiquidityBtnDisabled:Oe,toAdd:Ne,showToCoinLock:j,showFromCoinLock:de,isOnlyA:A,isOnlyB:L,onlyToken:lo,onlyText:oe,onlyTokenUSD:Ce,calculateLoading:ye,indicator:_o,depositTokenTips:"You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",depositHaedalTokenTips:"When you deposit in only SUI tokens, a part of your SUI amount will be converted to haSUI via Haedal liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved."}}});const Ze=e=>(Xe("data-v-e1f77953"),e=e(),ze(),e),_i={class:"auto-pool-add"},wi={class:"auto-pool-add-content"},$i={class:"liquidity-action-tab"},Ii=Ze(()=>o("div",{class:"increase tab-active"},"Add",-1)),Si={class:"only-token"},Ai=Ze(()=>o("div",null,"Deposit Amounts",-1)),Ci=Ze(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),Pi=Ze(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),Ti={key:0,class:"card-item"},qi={key:1,class:"card-item"},Ni=Ze(()=>o("span",null,"Pool Closed",-1)),Ri={key:0,class:"add-info"},Bi={key:0,class:"only-text"},Di={class:"total-amount"},Li=Ze(()=>o("span",null,"Total Amount",-1)),Ui={key:0},Oi={class:"total-amount"},Mi=Ze(()=>o("span",null,"Share of Pool",-1)),Fi={key:0},Vi={class:"total-amount"},Hi=Ze(()=>o("span",null,"Minimum Received LP",-1)),Ei={key:0},Wi={key:1,class:"add-info only-add-info"},ji=Ze(()=>o("div",{class:"only-text"},"Single-asset deposit can't be higher than $10,000 at a time.",-1)),Xi=[ji];function zi(e,s,G,Y,B,T){var n,d,r,b,S,p,_,O,W,ee,re,te,w,k,K,se,ie,de,j,oe,ge,ye,ve;const m=Eo,q=Ko,I=Qo,a=to("AutoPoolV2PoolStatus"),t=Co,C=Xo,f=Zo;return l(),y("div",_i,[o("div",wi,[o("div",$i,[Ii,o("div",{class:"remove",onClick:s[0]||(s[0]=jo(A=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",Si,[Ai,o("div",null,[o("div",{class:Te(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:s[1]||(s[1]=A=>e.onlyToken("only-a-b"))},[o("span",null,v(e.needReverse?(b=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:b.symbol:(d=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:d.symbol)+" + "+v(e.needReverse?(O=(_=e.positionInfo)==null?void 0:_.token_a)==null?void 0:O.symbol:(p=(S=e.positionInfo)==null?void 0:S.token_b)==null?void 0:p.symbol),1)],2),o("div",{class:Te(["only-a",e.isOnlyA?"active-only":""]),onClick:s[2]||(s[2]=A=>e.onlyToken("only-a"))},[o("span",null,v(e.needReverse?(te=(re=e.positionInfo)==null?void 0:re.token_b)==null?void 0:te.symbol:(ee=(W=e.positionInfo)==null?void 0:W.token_a)==null?void 0:ee.symbol)+" only",1),F(m,{placement:"bottom","arrow-point-at-center":""},{title:ue(()=>[o("span",null,v(e.depositTokenTips),1)]),default:ue(()=>[Ci]),_:1})],2),o("div",{class:Te(["only-b",e.isOnlyB?"active-only":""]),onClick:s[3]||(s[3]=A=>e.onlyToken("only-b"))},[o("span",null,v(e.needReverse?(se=(K=e.positionInfo)==null?void 0:K.token_a)==null?void 0:se.symbol:(k=(w=e.positionInfo)==null?void 0:w.token_b)==null?void 0:k.symbol)+" only",1),F(m,{placement:"bottom","arrow-point-at-center":""},{title:ue(()=>[o("span",null,v(e.positionInfo.supportHaedalStake?e.depositHaedalTokenTips:e.depositTokenTips),1)]),default:ue(()=>[Pi]),_:1})],2)])]),o("div",{class:Te(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(l(),y("div",Ti,[F(q,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":s[4]||(s[4]=A=>e.fromCoinAmount=A),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[5]||(s[5]=A=>e.maxBtnSelect("fromCoin")),onOnHalf:s[6]||(s[6]=A=>e.halfBtnSelect("fromCoin")),onOnInput:s[7]||(s[7]=A=>{e.fromCoinAmount=A}),onOnFocus:s[8]||(s[8]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(l(),Z(I,{key:0})):z("",!0)])):z("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(l(),y("div",qi,[F(q,{modelValue:e.toCoinAmount,"onUpdate:modelValue":s[9]||(s[9]=A=>e.toCoinAmount=A),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[10]||(s[10]=A=>e.maxBtnSelect("toCoin")),onOnHalf:s[11]||(s[11]=A=>e.halfBtnSelect("toCoin")),onOnInput:s[12]||(s[12]=A=>{e.toCoinAmount=A}),onOnFocus:s[13]||(s[13]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(l(),Z(I,{key:0})):z("",!0)])):z("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(l(),Z(a,{key:0})):z("",!0),(ie=e.positionInfo)!=null&&ie.is_pause?(l(),Z(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:ue(()=>[Ni]),_:1})):e.wallet.connected?(l(),Z(t,{key:2,class:"big-btn liquidity-btn",disabled:e.addLiquidityBtnDisabled,onClick:s[14]||(s[14]=A=>e.isShowAddModal=!0)},{default:ue(()=>[o("span",null,v(e.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(l(),Z(t,{key:3,class:"big-btn liquidity-btn",onClick:s[15]||(s[15]=A=>e.wallet.setIsShowWalletModal(!0))},{default:ue(()=>[o("span",null,v(e.$t("button.connectWallet")),1)]),_:1})),(((de=e.positionInfo)==null?void 0:de.quoteUSD)==0||Number((j=e.positionInfo)==null?void 0:j.remainingTokenUSD)>Number(e.totalAmountUSD))&&(Number(e.fromCoinAmount)>0||Number(e.toCoinAmount)>0)?(l(),y(Ye,{key:4},[e.positionInfo.supportHaedalStake&&e.isOnlyB||e.onlyTokenUSD<=1e4?(l(),y("div",Ri,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount>0||e.isOnlyB&&e.toCoinAmount>0)?(l(),y("div",Bi,v(e.onlyText),1)):z("",!0),o("div",Di,[Li,e.calculateLoading?(l(),Z(C,{key:1,paragraph:!1,active:""})):(l(),y("span",Ui,v(Number(e.totalAmountUSD)>0&&Number(e.totalAmountUSD)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:P(D))(e.totalAmountUSD,2)}`),1))]),o("div",Oi,[Mi,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(l(),y("span",Fi,v(e.shareOfPool)+"%",1)):(l(),Z(C,{key:1,paragraph:!1,active:""}))]),o("div",Vi,[Hi,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(l(),y("span",Ei,v(("addCommom"in e?e.addCommom:P(D))(e.minimumReceivedLP))+" "+v(e.needReverse?(oe=e.toCoin)==null?void 0:oe.symbol:(ge=e.fromCoin)==null?void 0:ge.symbol)+"-"+v(e.needReverse?(ye=e.fromCoin)==null?void 0:ye.symbol:(ve=e.toCoin)==null?void 0:ve.symbol),1)):(l(),Z(C,{key:1,paragraph:!1,active:""}))])])):e.positionInfo.supportHaedalStake&&!e.isOnlyB&&e.onlyTokenUSD>1e4||!e.positionInfo.supportHaedalStake&&e.onlyTokenUSD>1e4?(l(),y("div",Wi,Xi)):z("",!0)],64)):z("",!0),e.isShowAddModal?(l(),Z(f,{key:5,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:s[16]||(s[16]=A=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):z("",!0)])}const Gi=Ve(hi,[["render",zi],["__scopeId","data-v-e1f77953"]]),Yi=je({components:{AutoPoolRemoveModal:Jo,AutoPoolV2PoolStatus:an},setup(){const e=yo(),s=h(()=>e),G=go(),Y=h(()=>G),B=h(()=>f.value.slippage),T=h(()=>Y.value.chainName),m=_n(),q=h(()=>m),I=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],a=$(25),t=eo(),C=Qe(),f=h(()=>C),n=h(()=>(console.log(f.value.positionInfoObj[t.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),f.value.positionInfoObj[t.params.id])),d=h(()=>{var i;return(i=n.value)==null?void 0:i.needReverse}),r=$(),b=$(),S=$(!1),p=$(),_=h(()=>{var i;return(i=n.value)==null?void 0:i.myLiquidity}),O=$(!0),W=h(()=>T.value?Go(T.value):{}),ee=$(),re=$(),te=zo("Sui"),w=$(""),k=$(""),K=$("--"),se=$(!1),ie=$(!1),de=$(),j=$(!0),oe=$(),ge=oo(),ye=h(()=>ge),ve=h(()=>ye.value.RATES),A=$(!1),L=async()=>{if(O.value||!n.value||n.value.positionLiquidity==0)return;re.value=!1,A.value=!0;const i=n.value.autoPoolPositionInfo.tick_lower_index,N=n.value.autoPoolPositionInfo.tick_upper_index,ne=We.sqrtPriceX64ToTickIndex(new ce(n.value.current_sqrt_price));ne<i&&(d.value?se.value=!0:ie.value=!0),ne>N&&(d.value?ie.value=!0:se.value=!0);let Q;if(console.log(w.value||k.value,"#fromCoinAmount.value || toCoinAmount.value"),w.value||k.value){j.value?Q=new u(w.value).mul(Math.pow(10,r.value.decimals)).toString():Q=new u(k.value).mul(Math.pow(10,b.value.decimals)).toString();let H,M=j.value;if(g.value||J.value){g.value?Number(w.value)/Number(c.value):Number(k.value)/Number(c.value);const x=await te.calculateRemoveSwapAmount({lowerTick:i,upperTick:N,curSqrtPrice:new ce(n.value.current_sqrt_price),fix_amount_a:M,receiveAmount:Q,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(B.value)/100,decimals:g.value?r.value.decimals:b.value.decimals,liquidity:w.value==c.value||k.value==c.value?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:Q});if(console.log(x,"###swapResult"),x){if(x.request_id!==Q)return;ee.value=x.is_exceed,Q=new ce(x.swapOutAmount),H=n.value.current_sqrt_price,de.value={swap_amount:x.swapInAmount,liquidity:x.liquidity,a2b:!M,route_obj:x.route_obj},M=!M;const Ie=n.value.token_a.decimals,he=n.value.token_b.decimals,Se=new u(x.swapInAmount).div(new u(Math.pow(10,Ie))).toString(),Je=R(new u(x.swapOutAmountLimit).div(new u(Math.pow(10,he))).toString(),he),Ae=d.value?n.value.token_b.symbol:n.value.token_a.symbol,Be=d.value?n.value.token_a.symbol:n.value.token_b.symbol;oe.value=w.value==c.value||k.value==c.value?`To withdraw ${D(g.value?w.value:k.value)} ${g.value?Ae:Be},
          ${D(g.value?n.value.amountB:n.value.amountA)} ${g.value?Be:Ae} 
           in the pool will be traded for ${Se} ${g.value?Ae:Be}`:`To withdraw ${D(g.value?w.value:k.value)} ${g.value?Ae:Be},
          ${D(Se)} ${g.value?Be:Ae}  in the pool will be traded for ${D(Je)} ${g.value?Ae:Be}`}else{re.value=!0,oe.value="";return}}else ee.value=!1,H=n.value.current_sqrt_price,Q=new ce(Q);console.log(H,"##curSqrtPrice"),console.log("执行了吗##");const{liquidityAmount:ae,tokenMaxA:X,tokenMaxB:E}=W.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:r.value,tokenB:b.value,lowerTick:i,upperTick:N,coinAmount:Q,iscoinA:M,roundUp:!1,slippage:Number(B.value)/100,curSqrtPrice:new ce(H)});if(console.log(n.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(E.toString(),X.toString(),n.value,"###323"),!g.value&&!J.value&&(j.value?k.value=Number(E)>0?E:"":w.value=Number(X)>0?X:""),(g.value||J.value)&&(Number(w.value)>=Number(c.value)||Number(k.value)>=Number(c.value))){console.log("执行这里了吗"),p.value=n.value.myLiquidity;const x=new u(100);K.value=new u(n.value.myLiquidity).mul(new u(Math.pow(10,n.value.lpInfo.decimals))).toString(),pe.value=ae.toString(),a.value=x.toNumber()}else{console.log("执行这里了吗1");const x=So.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},ae.toString()),Ie=new u(x).div(new u(Math.pow(10,n.value.lpInfo.decimals))).toString();console.log(Ie,_.value,ae.toString(),n.value.liquidity,n.value.total_supply,"##lpBalance.value");const he=new u(Ie).div(new u(_.value)).mul(100);console.log(Ie,_.value,he.toNumber(),"lp##"),p.value=new u(_.value).mul(he.div(100)).toString(),K.value=x,pe.value=ae.toString(),a.value=he.toNumber()}A.value=!1}},pe=$(),le=h(()=>{var i;return(i=n==null?void 0:n.value)==null?void 0:i.amountA}),fe=h(()=>{var i;return(i=n==null?void 0:n.value)==null?void 0:i.amountB}),g=$(!1),J=$(!1),Ce=h(()=>{var M,ae,X,E;const i=(ae=ve.value[(M=r==null?void 0:r.value)==null?void 0:M.address])==null?void 0:ae.price,N=(E=ve.value[(X=b==null?void 0:b.value)==null?void 0:X.address])==null?void 0:E.price;console.log(i,N,w.value,k.value,"####totalWithdraw");let ne=w.value!=="--"&&w.value!==""?w.value:0,Q=k.value!=="--"&&k.value!==""?k.value:0,H;return i&&N&&(g.value||J.value?H=new u(g.value?ne:Q).mul(new u(g.value?i:N)).toString():(H=new u(ne).mul(new u(i)).add(new u(Q).mul(new u(N))).toString(),console.log(H,"result##"))),H>0&&H<.01?"<$0.01":`$${D(R(H,2))}`}),ke=async i=>{var Ie,he,Se,Je,Ae,Be,wo,Do,Lo,Uo,Oo;if(!O.value)return;O.value=!0,re.value=!1,(he=(Ie=n.value)==null?void 0:Ie.token_a)==null||he.decimals,(Je=(Se=n.value)==null?void 0:Se.token_b)==null||Je.decimals;const N=(Ae=n.value)==null?void 0:Ae.tick_lower_index,ne=(Be=n.value)==null?void 0:Be.tick_upper_index;We.tickIndexToSqrtPriceX64(N),We.tickIndexToSqrtPriceX64(ne);const Q=(Do=(wo=n.value)==null?void 0:wo.autoPoolPositionInfo)==null?void 0:Do.tick_lower_index,H=(Uo=(Lo=n.value)==null?void 0:Lo.autoPoolPositionInfo)==null?void 0:Uo.tick_upper_index,M=We.sqrtPriceX64ToTickIndex(new ce((Oo=n==null?void 0:n.value)==null?void 0:Oo.current_sqrt_price));M<Q&&(d.value?se.value=!0:ie.value=!0),M>H&&(d.value?ie.value=!0:se.value=!0);let ae="",X,E;console.log(i.value,"##item.value"),console.log(E,"##coinAmount");let x=j.value;if(console.log("执行##"),g.value||J.value&&!se.value&&!ie.value){if(g.value){const xe=new u(c.value).mul(Math.pow(10,r.value.decimals)).mul(i.value).toString();console.log(xe,"##amount"),E=R(xe,0),w.value=R(new u(c.value).mul(i.value).toString(),r.value.decimals)}if(J.value){const xe=new u(c.value).mul(i.value).mul(Math.pow(10,b.value.decimals)).toString();E=R(xe,0),k.value=R(new u(c.value).mul(i.value).toString(),b.value.decimals)}console.log(w.value,"##fromCoinAmount.value");const De=await te.calculateRemoveSwapAmount({lowerTick:N,upperTick:ne,curSqrtPrice:new ce(n.value.current_sqrt_price),fix_amount_a:x,receiveAmount:E,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(B.value)/100,decimals:g.value?r.value.decimals:b.value.decimals,liquidity:i.value==1?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:E});if(console.log(De,"###swapResult536"),De){if(De.request_id!==E)return;ee.value=De.is_exceed,E=new ce(De.swapOutAmount),n.value.current_sqrt_price,de.value={swap_amount:De.swapInAmount,liquidity:De.liquidity,route_obj:De.route_obj,a2b:!x},x=!x;const xe=n.value.token_a.decimals,Mo=n.value.token_b.decimals,un=new u(De.swapInAmount).div(new u(Math.pow(10,xe))).toString(),Fo=R(new u(De.swapOutAmountLimit).div(new u(Math.pow(10,Mo))).toString(),Mo),ao=d.value?n.value.token_b.symbol:n.value.token_a.symbol,uo=d.value?n.value.token_a.symbol:n.value.token_b.symbol;oe.value=i.value==1?`To withdraw ${D(g.value?w.value:k.value)} ${g.value?ao:uo},
          ${D(g.value?n.value.amountB:n.value.amountA)} ${g.value?uo:ao}  in the pool will be traded for ${D(Fo)} ${g.value?ao:uo}`:`To withdraw ${D(g.value?w.value:k.value)} ${g.value?ao:uo},
          ${D(un)} ${g.value?uo:ao}  in the pool will be traded for ${D(Fo)} ${g.value?ao:uo}`,ae=De.liquidity}else n.value.current_sqrt_price,E=new ce(E),oe.value="",re.value=!0;console.log(X,"result###"),K.value=new u(n.value.myLiquidity).mul(new u(i.value)).toString(),console.log(n.value,n.value.liquidity,ae,K.value,"###positionInfo.value.liquidity"),console.log(K.value,"##lpTokenAmount.value"),p.value=new u(K.value),pe.value=ae}else{ee.value=!1;const De=new u(le.value).mul(Math.pow(10,r.value.decimals)).mul(i.value).toString();E=R(De,0),w.value=R(new u(le.value).mul(i.value).toString(),r.value.decimals);const xe=new u(fe.value).mul(i.value).mul(Math.pow(10,b.value.decimals)).toString();E=R(xe,0),k.value=R(new u(fe.value).mul(i.value).toString(),b.value.decimals),n.value.current_sqrt_price,E=new ce(E),i.value!==1?X=new u(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(i.value).toString():X=new u(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),p.value=new u(X).div(Math.pow(10,n.value.lpInfo.decimals)),ae=So.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},X),K.value=R(X,0),pe.value=R(ae,0),console.log(ae,"###newLiquidity525")}};_e(a,vo((i,N)=>{i!==N&&(Number(i)>100?a.value=100:i&&n.value?(console.log("687===>"),a.value=i,ke({value:a.value/100})):(w.value="",k.value=""))},300)),_e(()=>w.value,vo((i,N)=>{i?L():!g.value&&!J.value&&(k.value="",a.value=0)},500),{immediate:!0}),_e(()=>k.value,vo((i,N)=>{i?L():!g.value&&!J.value&&(w.value="",a.value=0)},500),{immediate:!0});const Oe=To(),{setIsShowSuccess:qe,setIsShowRejected:Re,setIsShowWaiting:we,setTransactionDesc:Pe,setTransactionTxid:no,setPositiomNum:so,setTransactionDescText:io}=G,Ge=$(!1),{t:Ne}=Ao(),lo=async()=>{var Ie,he;Ge.value=!0,no("");const i=Number(w.value)>0?`${D(w.value,r.value.decimals)} ${r.value.symbol}`:"",N=Number(k.value)>0?`${D(k.value,b.value.decimals)} ${b.value.symbol}`:"";console.log(i,N,"###transactionDescTo"),Pe(Ne("tips.removeLiquidiyText",{from:d.value?N:i,and:Number(w.value)>0&&Number(k.value)>0?"and":"",to:d.value?i:N})),we(!0);const ne=Ne("modal.removeLiquidityText2");io(ne);const Q=n.value.autoPoolPositionInfo.tick_lower_index,H=n.value.autoPoolPositionInfo.tick_upper_index,M=We.tickIndexToSqrtPriceX64(Q),ae=We.tickIndexToSqrtPriceX64(H),X=n.value.rewarderInfo.map(Se=>Se.coinAddress);console.log(K.value,"##lpTokenAmount.value431");let E;j.value?E=new u(w.value).mul(Math.pow(10,r.value.decimals)).toString():E=new u(k.value).mul(Math.pow(10,b.value.decimals)).toString(),console.log();const x={lowerSqrtPrice:M,upperSqrtPrice:ae,lpTokenAmount:K.value,liquidity:pe.value,curSqrtPrice:new ce(n.value.object.current_sqrt_price),slippage:Number(B.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:X,swapParams:de.value,fix_amount_a:j.value,isOnlyA:!se.value&&!ie.value?g.value:!1,isOnlyB:!ie.value&&!se.value?J.value:!1,lowerTick:Q,upperTick:H,receiveAmount:E,sliderVal:a.value,positionInfo:n.value,maxLiquidity:n.value.positionLiquidity,farming_pool:n.value.autoPoolPositionInfo.pool_id};try{const Se=await te.remove(x);console.log(Se,"移除流动性payload");const Je=await W.value.signAndExecuteTransactionBlock(s.value.currentWallet,Se);let Ae=W.value.handleTx(Je);if(console.log("0331###remove###tx####",Ae),Ae&&Ae.hash){no(Ae.hash),we(!1),qe(!0);const Be={title:Ne("common.removeLiquidity"),desc:"",hash:Ae.hash,descTransactions:`Remove ${i} ${Number(w.value)>0&&Number(k.value)>0?"and":""} ${N} from the pool`,sender:s.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${w.value} ${(Ie=r.value)==null?void 0:Ie.symbol} and ${k.value} ${(he=b.value)==null?void 0:he.symbol}`};Be.res=Ae.res,W.value.showTransitionPending(Be),await W.value.watchTransaction(Be)&&(w.value="",k.value="",p.value="",a.value=0,setTimeout(()=>{C.updatePositionItem(n.value.id),W.value.getAccount(s.value.address)},1e3),Number(a.value)==100&&t.name=="auto-pool-detail"&&Oe.push("/vaults"))}else we(!1),Re(!0);Ge.value=!1}catch(Se){console.log("Remove error",Se),Ge.value=!1,we(!1),Re(!0)}};_e(()=>n.value,(i,N)=>{i&&!Ke(i)&&(r.value=i==null?void 0:i.token_a,b.value=i==null?void 0:i.token_b,console.log("触发###"),(!N||N&&N.address!==i.address)&&(a.value=a.value>0?a.value:25,ke({value:a.value/100})),N&&N.current_sqrt_price!==i.current_sqrt_price&&(O.value?ke({value:a.value/100}):L()))},{immediate:!0});const He=h(()=>{if(n.value.positionLiquidity==0)return"Insufficient LP Amount";const i=Number(p.value)>Number(_.value);return!w.value&&!k.value||!p.value||p.value<=0||!w.value&&g.value||!k.value&&J.value?Ne("button.enterAmount"):i?"Invalid Amount":ee.value?Ne("button.insufficientLiquidity"):re.value?Ne("button.enterAmount"):(console.log(w.value,c.value,k.value,"856##"),g.value&&Number(w.value)>Number(c.value)||J.value&&Number(k.value)>Number(c.value)?"Invalid Amount":Ne("button.remove"))}),Me=h(()=>{var N;if(((N=n==null?void 0:n.value)==null?void 0:N.positionLiquidity)==0)return!0;const i=Number(p.value)>Number(_.value);return!!(!w.value&&!k.value||Number(w.value)<=0&&g.value||Number(k.value)<=0&&J.value||!p.value||p.value<=0||i||ee.value||U.value!=="STATUS_RUNNING"||re.value||g.value&&Number(w.value)>Number(c.value)||J.value&&Number(k.value)>Number(c.value))}),ho=i=>(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||ro("/image/coins/sui-unknown.png"),_o=i=>{w.value="",k.value="",O.value=!0,oe.value="",i=="only-a"?(g.value=!g.value,J.value=!1,j.value=!0):(J.value=!J.value,g.value=!1,j.value=!1)},Ro=i=>{O.value=!0,a.value=100,i==="fromCoin"?j.value=!0:j.value=!1},Bo=i=>{O.value=!0,a.value=50,i==="fromCoin"?j.value=!0:j.value=!1},c=$(),V=async()=>{const i=n.value.token_a.decimals,N=n.value.token_b.decimals,ne=new u(le.value).mul(new u(Math.pow(10,i))).toNumber(),Q=new u(fe.value).mul(new u(Math.pow(10,N))).toNumber(),H=g.value?Q:ne,M=g.value?b.value.address===n.value.token_a.address:r.value.address===n.value.token_a.address;try{const ae=await q.value.swapRouterContract.getSwapRouter(g.value?b:r,g.value?r:b,H,!0,Number(B.value)/100,"",void 0,[{pool_id:n.value.address,tick_lower:n.value.autoPoolPositionInfo.tick_lower_index,tick_upper:n.value.autoPoolPositionInfo.tick_upper_index,delta_liquidity:Number(n.value.positionLiquidity),is_increase:!1}]),X=new u(ae.amountOut);c.value=X.sub(X.mul(Number(B.value)/100)).add(new u(g.value?le.value:fe.value)).toString()}catch{if(g.value||J.value){console.log(H,"##receiveAmount");let X=await W.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:M,byAmountIn:!0,amount:H});console.log(X,X.estimatedAmountOut,i,N,"##preSwapRes");const E=new u(X.estimatedAmountOut);c.value=E.sub(E.mul(Number(B.value)/100)).add(new u(g.value?le.value:fe.value)).toString(),console.log("转换之后数量:",X.estimatedAmountOut),console.log("转换之后滑点数量:",E.mul(Number(B.value)/100).toNumber()),console.log("原有数量减滑点数量:",E.sub(E.mul(Number(B.value)/100)).toNumber()),console.log("fromCoin原有数量:",le.value),console.log(c.value,"###onlyTokenBalance.value"),g.value?w.value=R(new u(c.value).mul(a.value/100).toString(),r.value.decimals):k.value=R(new u(c.value).mul(a.value/100).toString(),b.value.decimals),ke({value:a.value/100})}}ke({value:a.value/100})};_e(()=>[g.value,J.value,le.value,fe.value],([i,N])=>{i||N?V():ke({value:a.value/100})},{immediate:!0});const me=i=>`${i}%`,U=h(()=>f.value.currentAutoPoolStatus),$e=$(),be=()=>{$e.value=window.setInterval(()=>{(w.value||k.value)&&!O.value?L():ke({value:a.value/100})},2e4)};return po(()=>{be()}),Po(()=>{window.clearInterval($e.value)}),{removeLiquidityBtnText:He,removeLiquidityBtnDisabled:Me,wallet:s,ratioArr:I,positionInfo:n,isShowRemoveModal:S,needReverse:d,fromCoin:r,toCoin:b,lpAmount:p,lpBalance:_,sliderVal:a,sFixD:R,isSlider:O,fromCoinAmount:w,toCoinAmount:k,setPercent:ke,toRemove:lo,addCommom:D,getCoinIcon:ho,isOnlyA:g,isOnlyB:J,onlyToken:_o,fixedFromCoin:j,maxBtnSelect:Ro,halfBtnSelect:Bo,fromCoinBlance:le,toCoinBlance:fe,showFromCoinLock:se,showToCoinLock:ie,removeText:oe,onlyTokenBalance:c,totalWithdraw:Ce,formatter:me,currentAutoPoolStatus:U,calculateLoading:A}}});const ko=e=>(Xe("data-v-4ed85d29"),e=e(),ze(),e),Ki={class:"auto-pool-add"},Qi={class:"auto-pool-add-content"},Zi={class:"liquidity-action-tab"},Ji=ko(()=>o("div",{class:"remove tab-active"},"Remove",-1)),xi={key:0,class:"card-item"},el={key:1,class:"card-item"},ol={class:"remove-ratio"},nl={class:"remove-ratio-select"},tl={key:0,class:"ratio"},sl={key:1,class:"ratio"},il={class:"ratio-list"},ll=["onClick"],al=ko(()=>o("span",null,"Pool Closed",-1)),ul={key:4,class:"remove-info"},rl={key:0,class:"remove-text total-amount"},dl={class:"total-amount"},vl=ko(()=>o("span",null,"Total Withdraw",-1)),ml={key:0},cl={class:"total-amount"},pl=ko(()=>o("span",null,"LP Burn Amount",-1)),fl={key:0};function gl(e,s,G,Y,B,T){var n,d,r,b,S,p;const m=Ko,q=Qo,I=Wo,a=to("AutoPoolV2PoolStatus"),t=Co,C=Xo,f=Jo;return l(),y("div",Ki,[o("div",Qi,[o("div",Zi,[o("div",{class:"increase",onClick:s[0]||(s[0]=jo(_=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),Ji]),o("div",{class:Te(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(l(),y("div",xi,[F(m,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":s[1]||(s[1]=_=>e.fromCoinAmount=_),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:s[2]||(s[2]=_=>e.maxBtnSelect("fromCoin")),onOnHalf:s[3]||(s[3]=_=>e.halfBtnSelect("fromCoin")),onOnInput:s[4]||(s[4]=_=>{e.isSlider=!1,e.fromCoinAmount=_}),onOnFocus:s[5]||(s[5]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(l(),Z(q,{key:0})):z("",!0)])):z("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(l(),y("div",el,[F(m,{modelValue:e.toCoinAmount,"onUpdate:modelValue":s[6]||(s[6]=_=>e.toCoinAmount=_),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:s[7]||(s[7]=_=>e.maxBtnSelect("toCoin")),onOnHalf:s[8]||(s[8]=_=>e.halfBtnSelect("toCoin")),onOnInput:s[9]||(s[9]=_=>{e.isSlider=!1,e.toCoinAmount=_}),onOnFocus:s[10]||(s[10]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(l(),Z(q,{key:0})):z("",!0)])):z("",!0)],2),o("div",ol,[o("div",nl,[Number(e.lpBalance)>=Number(e.lpAmount)?(l(),y("div",tl,v(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:P(R))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:P(R))(e.sliderVal,2))+"% ",1)):(l(),y("div",sl,"--")),o("div",il,[(l(!0),y(Ye,null,co(e.ratioArr,(_,O)=>(l(),y("div",{key:O,class:Te(["ratio-item",e.sliderVal==_.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=_.value}},v(_.name),11,ll))),128))])]),F(I,{value:e.sliderVal,"onUpdate:value":s[11]||(s[11]=_=>e.sliderVal=_),"tip-formatter":e.formatter,onChange:s[12]||(s[12]=_=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(l(),Z(a,{key:0})):z("",!0),(n=e.positionInfo)!=null&&n.is_pause?(l(),Z(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:ue(()=>[al]),_:1})):e.wallet&&e.wallet.address?(l(),Z(t,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:s[13]||(s[13]=_=>e.toRemove())},{default:ue(()=>[o("span",null,v(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(l(),Z(t,{key:3,class:"big-btn liquidity-btn",onClick:s[14]||(s[14]=_=>e.wallet.setIsShowWalletModal(!0))},{default:ue(()=>[o("span",null,v(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?z("",!0):(l(),y("div",ul,[e.removeText&&(e.isOnlyA&&Number(e.fromCoinAmount)>0||e.isOnlyB&&Number(e.toCoinAmount)>0)?(l(),y("div",rl,v(e.removeText),1)):z("",!0),o("div",dl,[vl,e.calculateLoading?(l(),Z(C,{key:1,paragraph:!1,active:""})):(l(),y("span",ml,v(e.totalWithdraw),1))]),o("div",cl,[pl,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(l(),y("span",fl,v(("addCommom"in e?e.addCommom:P(D))(("sFixD"in e?e.sFixD:P(R))(e.lpAmount,(d=e.positionInfo)==null?void 0:d.decimals)))+" "+v(e.needReverse?(r=e.toCoin)==null?void 0:r.symbol:(b=e.fromCoin)==null?void 0:b.symbol)+"-"+v(e.needReverse?(S=e.fromCoin)==null?void 0:S.symbol:(p=e.toCoin)==null?void 0:p.symbol),1)):(l(),Z(C,{key:1,paragraph:!1,active:""}))])])),e.isShowRemoveModal?(l(),Z(f,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:s[15]||(s[15]=_=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):z("",!0)])}const yl=Ve(Yi,[["render",gl],["__scopeId","data-v-4ed85d29"]]),bl=je({components:{AutoPoolV2Info:en,AutoPoolV2PositionRange:on,AutoPoolV2PoolComposition:tn,AutoPoolV2PoolLiquidity:sn,AutoPoolV2PoolAdd:Gi,AutoPoolV2PoolRemove:yl},setup(){const e=Qe();oo();const s=go(),G=h(()=>s),Y=h(()=>e),B=eo(),T=$();_e(()=>[Y.value.positionInfoObj,B.params.id],([C,f])=>{C&&!Ke(C)&&f&&(T.value=C[f],console.log(T.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const m=async()=>{console.log("重新获取数据"),e.getAutoPoolAPY(),e.getVault(B.params.id,"refresh")},q=$();_e(()=>B.query.action,C=>{C&&(q.value=C)},{immediate:!0}),po(()=>{e.getAutoPoolList(),e.getVault(B.params.id,!1)}),h(()=>G.value.chainName),To();const I=yo(),a=h(()=>I);_e(()=>a.value.address,C=>{C||e.logout()},{immediate:!0});const t=h(()=>Y.value.autoPoolLoading);return{clickRefresh:m,currentTab:q,positionInfo:T,autoPoolLoading:t}}});const kl={class:"auto-pool-detail-v2"},hl={class:"detail-top"},_l={class:"detail-bottom pc-detail"},wl={class:"detail-bottom-left"},$l={class:"detail-bottom-right"},Il={class:"h5-detail"},Sl={key:0,class:"loading-global"};function Al(e,s,G,Y,B,T){const m=Vn,q=en,I=on,a=tn,t=sn,C=to("AutoPoolV2PoolAdd"),f=to("AutoPoolV2PoolRemove"),n=gn;return l(),y("div",kl,[o("div",hl,[F(m,{"pool-info":e.positionInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"]),F(q)]),o("div",_l,[o("div",wl,[F(I),F(a),F(t)]),o("div",$l,[e.currentTab=="deposit"?(l(),Z(C,{key:0,onChangeCurrentTab:s[0]||(s[0]=d=>e.currentTab="remove")})):(l(),Z(f,{key:1,onChangeCurrentTab:s[1]||(s[1]=d=>e.currentTab="deposit")}))])]),o("div",Il,[e.currentTab=="deposit"?(l(),Z(C,{key:0,onChangeCurrentTab:s[2]||(s[2]=d=>e.currentTab="remove")})):(l(),Z(f,{key:1,onChangeCurrentTab:s[3]||(s[3]=d=>e.currentTab="deposit")})),F(I),F(a),F(t)]),e.autoPoolLoading?(l(),y("div",Sl,[F(n)])):z("",!0)])}const Ql=Ve(bl,[["render",Al],["__scopeId","data-v-8108a44b"]]);export{Ql as default};
