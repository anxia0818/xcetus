import{_ as Ve}from"./new-position-title.d967fffc.js";import{_ as me}from"./token-warning.dda03de2.js";import{_ as we}from"./auto-pool-apy-tips.5766db23.js";import{u as zo,a as $,g as ie,c as Ho,f as Ee,d as ne,s as H,p as $e,b as Ie,T as To,e as We,h as Xe,i as je}from"./pool.b1feead7.js";import{u as ce,a as be,b as no}from"./sha256.ee9044af.js";import{u as Yo,a as Ce}from"./autoPool.c7cad58f.js";import{i as se}from"./import-icon.de3e6c66.js";import{a as Do,l as _,m as Jo,r as g,q as Io,e as No,s as _e,o as m,f as T,h as e,t as Oo,i as z,v as d,j as de,x as oo,u as M,p as Uo,k as Fo,y as te,M as Ge,z as ae,c as ao,w as Lo,A as Ae,C as he,D as ke,E as Pe,F as fe,B as Se,G as pe,b as He,H as ze,I as Ye,J as Je}from"./entry.675cf4fd.js";import"./decimal.633e31ee.js";import{D as i}from"./decimal.0e8aa3f1.js";import{_ as Te}from"./assets-card.c55a3560.js";import{_ as Re}from"./coin-lock.96443196.js";import{_ as qe,a as Be}from"./auto-pool-remove-modal.d4f73506.js";import{afterCurrentPrice as ve}from"./data.22eb4a15.js";import{V as ye}from"./index.e17c4065.js";/* empty css              *//* empty css              */import"./back.f29b7b7d.js";import"./swap-setting.029751f2.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.1bd79b85.js";const Ze=Do({components:{AutoPoolApyTips:we},setup(){const o=ce(),s=_(()=>o),X=zo(),E=_(()=>X),W=Yo(),S=_(()=>W),b=_(()=>s.value.theme),c=Jo(),A=g();Io(()=>[S.value.positionInfoObj,c.params.id],([a,u])=>{a&&!Ho(a)&&u&&(A.value=a[u],console.log(A.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const f=_(()=>{var a;return(a=A.value)==null?void 0:a.needReverse}),t=a=>{var u;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((u=E.value.tokensObj[a==null?void 0:a.address])==null?void 0:u.logo_url)||(b.value==="default"?se("/image/coins/unknown.png"):se("/image/coins/sui-unknown.png"))},n=_(()=>{var a,u;return S.value.apyObj&&((u=S.value.apyObj[(a=A.value)==null?void 0:a.id])==null?void 0:u.tvl)||"--"}),C=_(()=>{var a,u;return S.value.apyObj&&((u=S.value.apyObj[(a=A.value)==null?void 0:a.id])==null?void 0:u.apr)||"--"});return{positionInfo:A,needReverse:f,getCoinIcon:t,tvl:n,apy:C,addCommom:$,getExplorerUrl:ie}}});const Co=o=>(Uo("data-v-204ed24b"),o=o(),Fo(),o),Ke={class:"auto-pool-v2-info"},Qe={class:"pool-info"},xe={class:"left"},on={class:"coin-a"},en={alt:""},nn={class:"coin-b"},tn={alt:""},sn={class:"position-name"},ln={key:0,class:"pool-fee"},an=Co(()=>e("span",null,"Fee tier",-1)),un={class:"vault-address"},rn=["href"],dn=Co(()=>e("span",null,"Vault Address",-1)),vn=Co(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),mn=[dn,vn],cn={class:"pool-address"},pn=["href"],fn=Co(()=>e("span",null,"Pool Address",-1)),yn=Co(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),bn=[fn,yn],_n={class:"apy-and-tvl"},hn={class:"apy"},kn=Co(()=>e("div",{class:"apy-title"},"APY",-1)),gn={class:"apy-text"},$n={class:"tvl"},wn=Co(()=>e("div",{class:"tvl-title"},"TVL",-1)),In={class:"tvl-text"},Cn={class:"pool-info h5-pool-info"},An={class:"left"},Pn={class:"coin-a"},Sn={alt:""},Tn={class:"coin-b"},Rn={alt:""},qn={class:"position-name"},Bn={key:0,class:"pool-fee"},Nn=Co(()=>e("span",null,"Fee tier",-1)),Mn={class:"left"},On={class:"vault-address"},Ln=["href"],Dn=Co(()=>e("span",null,"Vault Address",-1)),Un=Co(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),Fn=[Dn,Un],Vn={class:"pool-address"},En=["href"],Wn=Co(()=>e("span",null,"Pool Address",-1)),Xn=Co(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),jn=[Wn,Xn],Gn={class:"apy-and-tvl"},Hn={class:"apy"},zn=Co(()=>e("div",{class:"apy-title"},"APY",-1)),Yn={class:"apy-text"},Jn={class:"tvl"},Zn=Co(()=>e("div",{class:"tvl-title"},"TVL",-1)),Kn={class:"tvl-text"};function Qn(o,s,X,E,W,S){var f,t,n,C,a,u,q,r,v,R,O,L,J,y,p,w,D,V,to,U,k,so,co,po,lo,Z,ko,io,I,K,qo,wo,Zo,Vo,Ro,Bo,Eo,Wo,Ko,Qo,fo,uo,xo,Xo,jo,oe,h,B;const b=me,c=we,A=_e("image");return m(),T("div",Ke,[e("div",Qe,[e("div",xe,[e("div",on,[Oo(e("img",en,null,512),[[A,o.needReverse?o.getCoinIcon((t=o.positionInfo)==null?void 0:t.token_b):o.getCoinIcon((f=o.positionInfo)==null?void 0:f.token_a)]]),z(b,{address:o.needReverse?(u=(a=o.positionInfo)==null?void 0:a.token_b)==null?void 0:u.address:(C=(n=o.positionInfo)==null?void 0:n.token_a)==null?void 0:C.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",nn,[Oo(e("img",tn,null,512),[[A,o.needReverse?o.getCoinIcon((r=o.positionInfo)==null?void 0:r.token_a):o.getCoinIcon((q=o.positionInfo)==null?void 0:q.token_b)]]),z(b,{address:o.needReverse?(L=(O=o.positionInfo)==null?void 0:O.token_a)==null?void 0:L.address:(R=(v=o.positionInfo)==null?void 0:v.token_b)==null?void 0:R.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",sn,d(o.needReverse?(y=(J=o.positionInfo)==null?void 0:J.token_b)==null?void 0:y.symbol:(w=(p=o.positionInfo)==null?void 0:p.token_a)==null?void 0:w.symbol)+" - "+d(o.needReverse?(V=(D=o.positionInfo)==null?void 0:D.token_a)==null?void 0:V.symbol:(U=(to=o.positionInfo)==null?void 0:to.token_b)==null?void 0:U.symbol),1),(k=o.positionInfo)!=null&&k.fee?(m(),T("div",ln,[an,de(" "+d(((so=o.positionInfo)==null?void 0:so.fee)*100)+"% ",1)])):oo("",!0),e("div",un,[e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:M(ie))("poolAddress",(co=o.positionInfo)==null?void 0:co.id),target:"_blank"},mn,8,rn)]),e("div",cn,[e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:M(ie))("poolAddress",(po=o.positionInfo)==null?void 0:po.address),target:"_blank"},bn,8,pn)])]),e("div",_n,[e("div",hn,[kn,e("div",gn,[de(d(o.apy)+" ",1),z(c)])]),e("div",$n,[wn,e("div",In,"$"+d(("addCommom"in o?o.addCommom:M($))(o.tvl,2)),1)])])]),e("div",Cn,[e("div",An,[e("div",Pn,[Oo(e("img",Sn,null,512),[[A,o.needReverse?o.getCoinIcon((Z=o.positionInfo)==null?void 0:Z.token_b):o.getCoinIcon((lo=o.positionInfo)==null?void 0:lo.token_a)]]),z(b,{address:o.needReverse?(K=(I=o.positionInfo)==null?void 0:I.token_b)==null?void 0:K.address:(io=(ko=o.positionInfo)==null?void 0:ko.token_a)==null?void 0:io.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Tn,[Oo(e("img",Rn,null,512),[[A,o.needReverse?o.getCoinIcon((wo=o.positionInfo)==null?void 0:wo.token_a):o.getCoinIcon((qo=o.positionInfo)==null?void 0:qo.token_b)]]),z(b,{address:o.needReverse?(Bo=(Ro=o.positionInfo)==null?void 0:Ro.token_a)==null?void 0:Bo.address:(Vo=(Zo=o.positionInfo)==null?void 0:Zo.token_b)==null?void 0:Vo.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",qn,d(o.needReverse?(Wo=(Eo=o.positionInfo)==null?void 0:Eo.token_b)==null?void 0:Wo.symbol:(Qo=(Ko=o.positionInfo)==null?void 0:Ko.token_a)==null?void 0:Qo.symbol)+" - "+d(o.needReverse?(uo=(fo=o.positionInfo)==null?void 0:fo.token_a)==null?void 0:uo.symbol:(Xo=(xo=o.positionInfo)==null?void 0:xo.token_b)==null?void 0:Xo.symbol),1),(jo=o.positionInfo)!=null&&jo.fee?(m(),T("div",Bn,[Nn,de(" "+d(((oe=o.positionInfo)==null?void 0:oe.fee)*100)+"% ",1)])):oo("",!0)]),e("div",Mn,[e("div",On,[e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:M(ie))("poolAddress",(h=o.positionInfo)==null?void 0:h.id),target:"_blank"},Fn,8,Ln)]),e("div",Vn,[e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:M(ie))("poolAddress",(B=o.positionInfo)==null?void 0:B.address),target:"_blank"},jn,8,En)])]),e("div",Gn,[e("div",Hn,[zn,e("div",Yn,[de(d(o.apy)+" ",1),z(c)])]),e("div",Jn,[Zn,e("div",Kn,"$"+d(("addCommom"in o?o.addCommom:M($))(o.tvl,2)),1)])])])])}const Ne=No(Ze,[["render",Qn],["__scopeId","data-v-204ed24b"]]),xn=Do({setup(){const o=g(!0),s=zo(),X=_(()=>s),E=Yo(),W=_(()=>E),S=Jo(),b=g();Io(()=>[W.value.positionInfoObj,S.params.id],([t,n])=>{t&&!Ho(t)&&n&&(b.value=t[n],console.log(b.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const c=_(()=>{var t;return(t=b.value)==null?void 0:t.needReverse}),A=t=>{var n;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((n=X.value.tokensObj[t==null?void 0:t.address])==null?void 0:n.logo_url)||se("/image/coins/sui-unknown.png")},f=_(()=>{var u,q,r;const t=(u=b==null?void 0:b.value)==null?void 0:u.price,n=(q=b==null?void 0:b.value)==null?void 0:q.minPrice,C=(r=b==null?void 0:b.value)==null?void 0:r.maxPrice;let a;if(t>=n&&t<=C){const v=new i(n).add(new i(C)).div(2).toNumber();a=t>v?50+new i(t).sub(v).div(v).toNumber():50-new i(t).sub(v).div(v).toNumber()}else t<n?(a=new i(t).sub(new i(n)).mul(100).toNumber()+15,console.log(a,"##result")):t>C&&(a=new i(t).sub(new i(C)).div(new i(C)).mul(100).toNumber()+70+15);return Number(Ee(a,0))});return{direct:o,positionInfo:b,needReverse:c,getCoinIcon:A,decimalUi:ne,addCommom:$,sFixD:H,moveRatio:f}}}),ot=""+globalThis.__publicAssetsURL("sui-image/icon_currentprice@2x.png");const Mo=o=>(Uo("data-v-4a250835"),o=o(),Fo(),o),et={class:"v2-position-range"},nt={class:"position-range-top"},tt=Mo(()=>e("div",null,"Position Range",-1)),st={class:"base-coin"},lt={key:0},it={alt:""},at={key:1},ut={alt:""},rt={key:2},dt={key:3},vt=Mo(()=>e("p",null,"Base coin",-1)),mt={class:"coin-rate"},ct=Mo(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),pt=Mo(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ft=[ct,pt],yt={class:"position-range-bottom"},bt=Mo(()=>e("div",{class:"current-price-title"},"Current Price",-1)),_t={key:0,class:"current-price-text"},ht={key:1,class:"current-price-text"},kt=Mo(()=>e("div",{class:"current-price-title"},"Current Price",-1)),gt={key:0,class:"current-price-text"},$t={key:1,class:"current-price-text"},wt={class:"price-range"},It=Mo(()=>e("div",{class:"price-range-bg"},[e("div",{class:"price-range-border"})],-1)),Ct={class:"min-price"},At=Mo(()=>e("div",null,"Min Price",-1)),Pt={key:0},St={key:1},Tt={class:"max-price"},Rt=Mo(()=>e("div",null,"Max Price",-1)),qt={key:0},Bt={key:1};function Nt(o,s,X,E,W,S){var A,f,t,n,C,a,u,q,r,v,R,O,L,J,y,p,w,D,V,to,U,k,so,co,po,lo,Z,ko,io,I,K,qo;const b=me,c=_e("image");return m(),T("div",et,[e("div",nt,[tt,e("div",st,[o.needReverse?(m(),T("div",at,[Oo(e("img",ut,null,512),[[c,o.direct?o.getCoinIcon((q=o.positionInfo)==null?void 0:q.token_b):o.getCoinIcon((u=o.positionInfo)==null?void 0:u.token_a)]]),z(b,{address:o.direct?(O=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:O.address:(v=(r=o.positionInfo)==null?void 0:r.token_a)==null?void 0:v.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(m(),T("div",lt,[Oo(e("img",it,null,512),[[c,o.direct?o.getCoinIcon((A=o.positionInfo)==null?void 0:A.token_a):o.getCoinIcon((f=o.positionInfo)==null?void 0:f.token_b)]]),z(b,{address:o.direct?(n=(t=o.positionInfo)==null?void 0:t.token_a)==null?void 0:n.address:(a=(C=o.positionInfo)==null?void 0:C.token_b)==null?void 0:a.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),o.needReverse?(m(),T("span",dt,d(o.direct?(D=(w=o.positionInfo)==null?void 0:w.token_b)==null?void 0:D.symbol:(to=(V=o.positionInfo)==null?void 0:V.token_a)==null?void 0:to.symbol),1)):(m(),T("span",rt,d(o.direct?(J=(L=o.positionInfo)==null?void 0:L.token_a)==null?void 0:J.symbol:(p=(y=o.positionInfo)==null?void 0:y.token_b)==null?void 0:p.symbol),1)),vt,e("div",mt,[e("div",{onClick:s[0]||(s[0]=wo=>o.direct=!o.direct)},ft)])])]),e("div",yt,[e("div",{class:"current-price",style:te({left:`${o.moveRatio>40&&o.moveRatio-60?o.moveRatio:o.moveRatio>92?92:o.moveRatio<=13?10:o.moveRatio-13}%`})},[bt,(o.needReverse?!o.direct:o.direct)?(m(),T("div",_t,d(("addCommom"in o?o.addCommom:M($))(("decimalUi"in o?o.decimalUi:M(ne))((U=o.positionInfo)==null?void 0:U.price,6))),1)):(m(),T("div",ht,d(("addCommom"in o?o.addCommom:M($))(("decimalUi"in o?o.decimalUi:M(ne))(1/((k=o.positionInfo)==null?void 0:k.price),6))),1))],4),e("div",{class:"current-price h5-current-price",style:te({left:`${o.moveRatio>40&&o.moveRatio-60?o.moveRatio:o.moveRatio>92?92:o.moveRatio<=23?0:o.moveRatio-13}%`})},[kt,(o.needReverse?!o.direct:o.direct)?(m(),T("div",gt,d(("addCommom"in o?o.addCommom:M($))(("decimalUi"in o?o.decimalUi:M(ne))((so=o.positionInfo)==null?void 0:so.price,6))),1)):(m(),T("div",$t,d(("addCommom"in o?o.addCommom:M($))(("decimalUi"in o?o.decimalUi:M(ne))(1/((co=o.positionInfo)==null?void 0:co.price),6))),1))],4),e("div",wt,[It,e("img",{style:te({left:`${o.moveRatio}%`}),src:ot,alt:""},null,4),e("div",Ct,[At,o.direct?(m(),T("div",Pt,d(((po=o.positionInfo)==null?void 0:po.minPrice)&&("sFixD"in o?o.sFixD:M(H))((lo=o.positionInfo)==null?void 0:lo.minPrice,6)),1)):(m(),T("div",St,d(((Z=o.positionInfo)==null?void 0:Z.maxPrice)&&("sFixD"in o?o.sFixD:M(H))(1/((ko=o.positionInfo)==null?void 0:ko.maxPrice),6)),1))]),e("div",Tt,[Rt,o.direct?(m(),T("div",qt,d(((io=o.positionInfo)==null?void 0:io.maxPrice)&&("sFixD"in o?o.sFixD:M(H))((I=o.positionInfo)==null?void 0:I.maxPrice,6)),1)):(m(),T("div",Bt,d(((K=o.positionInfo)==null?void 0:K.minPrice)&&("sFixD"in o?o.sFixD:M(H))(1/((qo=o.positionInfo)==null?void 0:qo.minPrice),6)),1))])])])])}const Me=No(xn,[["render",Nt],["__scopeId","data-v-4a250835"]]),Mt=Do({components:{Modal:Ge},props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const s=_(()=>{var E,W;const X=H(((E=o.positionInfo)==null?void 0:E.poolUSD)/((W=o.positionInfo)==null?void 0:W.quoteUSD)*100,0);return console.log(X,"Pool Capacity Ratio"),Number(X)});return{sFixD:H,addCommom:$,ratio:s}}});const ge=o=>(Uo("data-v-f08bb90d"),o=o(),Fo(),o),Ot=ge(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Lt={class:"deposit-slider"},Dt={class:"info-block"},Ut=ge(()=>e("div",{class:"leabl"},"Current Deposit：",-1)),Ft={class:"text"},Vt={class:"info-block"},Et=ge(()=>e("div",{class:"leabl"},"Max Capacity：",-1)),Wt={class:"text"};function Xt(o,s,X,E,W,S){const b=ae("Modal");return m(),ao(b,{width:"440px",visible:!0,footer:null,title:"Pool Capacity",onCancel:s[0]||(s[0]=c=>o.$emit("onClose"))},{closeIcon:Lo(()=>[Ot]),default:Lo(()=>{var c,A;return[e("div",Lt,[e("div",{class:"current-deposit",style:te({width:`${o.ratio>100?100:o.ratio}%`})},null,4)]),e("div",Dt,[Ut,e("div",Ft,"$"+d(("addCommom"in o?o.addCommom:M($))(("sFixD"in o?o.sFixD:M(H))((c=o.positionInfo)==null?void 0:c.poolUSD,4))),1)]),e("div",Vt,[Et,e("div",Wt,"$"+d(("addCommom"in o?o.addCommom:M($))(("sFixD"in o?o.sFixD:M(H))((A=o.positionInfo)==null?void 0:A.quoteUSD,4))),1)])]}),_:1})}const Oe=No(Mt,[["render",Xt],["__scopeId","data-v-f08bb90d"]]),jt=Do({components:{AutoPoolV2PoolCapacity:Oe},setup(){const o=zo(),s=_(()=>o),X=Yo(),E=_(()=>X),W=Jo(),S=g();Io(()=>[E.value.positionInfoObj,W.params.id],([f,t])=>{console.log(f,"##positionInfoObj"),f&&!Ho(f)&&t&&(S.value=f[t],console.log(S.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const b=_(()=>{var f;return(f=S.value)==null?void 0:f.needReverse}),c=f=>{var t;return console.log(f,"info##"),(f==null?void 0:f.logoURI)||(f==null?void 0:f.logo_url)||((t=s.value.tokensObj[f==null?void 0:f.address])==null?void 0:t.logo_url)||se("/image/coins/sui-unknown.png")},A=g(!1);return{needReverse:b,positionInfo:S,getCoinIcon:c,addCommom:$,isShowModal:A}}});const Gt=o=>(Uo("data-v-c6233d3e"),o=o(),Fo(),o),Ht={class:"pool-composition"},zt={class:"pool-composition-top"},Yt=Gt(()=>e("span",null,"Pool Composition",-1)),Jt={class:"pool-composition-bottom"},Zt={class:"token-ratio"},Kt={class:"before-coin"},Qt={alt:""},xt={class:"after-coin"},os={alt:""},es={class:"token-num"},ns={class:"num-box"},ts={class:"num-box"};function ss(o,s,X,E,W,S){var f,t,n,C,a,u,q,r,v,R,O,L,J,y,p,w,D,V,to,U,k,so,co,po,lo,Z,ko,io;const b=me,c=Oe,A=_e("image");return m(),T("div",Ht,[e("div",zt,[Yt,e("div",{class:"pool-capacity",onClick:s[0]||(s[0]=I=>o.isShowModal=!0)},"Pool Capacity")]),e("div",Jt,[e("div",Zt,[e("div",Kt,[e("div",null,[z(b,{address:o.needReverse?(C=(n=o.positionInfo)==null?void 0:n.token_b)==null?void 0:C.address:(t=(f=o.positionInfo)==null?void 0:f.token_a)==null?void 0:t.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),Oo(e("img",Qt,null,512),[[A,o.needReverse?o.getCoinIcon((u=o.positionInfo)==null?void 0:u.token_b):o.getCoinIcon((a=o.positionInfo)==null?void 0:a.token_a)]])]),e("span",null,d((q=o.positionInfo)==null?void 0:q.poolCoinARatio)+"%",1)]),e("div",xt,[e("span",null,d((r=o.positionInfo)==null?void 0:r.poolCoinBRatio)+"%",1),e("div",null,[Oo(e("img",os,null,512),[[A,o.needReverse?o.getCoinIcon((R=o.positionInfo)==null?void 0:R.token_a):o.getCoinIcon((v=o.positionInfo)==null?void 0:v.token_b)]]),z(b,{address:o.needReverse?(y=(J=o.positionInfo)==null?void 0:J.token_a)==null?void 0:y.address:(L=(O=o.positionInfo)==null?void 0:O.token_b)==null?void 0:L.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),e("div",es,[e("div",{class:"token-a-bg",style:te({width:`${(p=o.positionInfo)==null?void 0:p.poolCoinARatio}%`})},null,4),e("div",{class:"token-b-bg",style:te({width:`${(w=o.positionInfo)==null?void 0:w.poolCoinBRatio}%`})},null,4),e("div",ns,[e("div",null,d(("addCommom"in o?o.addCommom:M($))((D=o.positionInfo)==null?void 0:D.poolCoinANum))+" "+d(o.needReverse?(k=(U=o.positionInfo)==null?void 0:U.token_b)==null?void 0:k.symbol:(to=(V=o.positionInfo)==null?void 0:V.token_a)==null?void 0:to.symbol),1),e("div",null,"$"+d(("addCommom"in o?o.addCommom:M($))((so=o.positionInfo)==null?void 0:so.poolCoinAUSD)),1)]),e("div",ts,[e("div",null,d(("addCommom"in o?o.addCommom:M($))((co=o.positionInfo)==null?void 0:co.poolCoinBNum))+" "+d(o.needReverse?(ko=(Z=o.positionInfo)==null?void 0:Z.token_a)==null?void 0:ko.symbol:(lo=(po=o.positionInfo)==null?void 0:po.token_b)==null?void 0:lo.symbol),1),e("div",null,"$"+d(("addCommom"in o?o.addCommom:M($))((io=o.positionInfo)==null?void 0:io.poolCoinBUSD)),1)])])]),o.isShowModal?(m(),ao(c,{key:0,"position-info":o.positionInfo,onOnClose:s[1]||(s[1]=I=>o.isShowModal=!1)},null,8,["position-info"])):oo("",!0)])}const Le=No(jt,[["render",ss],["__scopeId","data-v-c6233d3e"]]),ls=Do({setup(){const o=zo(),s=_(()=>o),X=Yo(),E=_(()=>X),W=Jo(),S=g();Io(()=>[E.value.positionInfoObj,W.params.id],([t,n])=>{console.log(t,"##positionInfoObj"),t&&!Ho(t)&&n&&(S.value=t[n],console.log(S.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const b=_(()=>{var t;return(t=S.value)==null?void 0:t.needReverse}),c=t=>{var n;return console.log(t,"info##"),(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((n=s.value.tokensObj[t==null?void 0:t.address])==null?void 0:n.logo_url)||se("/image/coins/sui-unknown.png")},A=be(),f=_(()=>A);return{needReverse:b,positionInfo:S,getCoinIcon:c,addCommom:$,wallet:f}}});const ue=o=>(Uo("data-v-c9de826f"),o=o(),Fo(),o),is={class:"my-liquidity"},as={class:"my-liquidity-top"},us=ue(()=>e("div",null,"My Liquidity",-1)),rs=ue(()=>e("p",null,"My share of pool",-1)),ds={class:"my-liquidity-bottom"},vs={class:"lp-token"},ms=ue(()=>e("div",null,[e("span",null,"LP Token Balance ")],-1)),cs={class:"lp-balance"},ps={class:"token-num-content"},fs={class:"token-num token-a-num"},ys={class:"logo"},bs=["src"],_s={class:"text"},hs={class:"lp-logo"},ks=["src"],gs=ue(()=>e("div",null,"Pooled Assets",-1)),$s={class:"token-num"},ws={class:"logo"},Is=["src"],Cs={class:"text"},As=ue(()=>e("div",{class:"token-num-content-bg"},null,-1));function Ps(o,s,X,E,W,S){var c,A,f,t,n,C,a,u,q,r,v,R,O,L,J,y,p,w,D,V,to,U,k,so,co,po,lo,Z;const b=me;return m(),T("div",is,[e("div",as,[us,e("div",null,[rs,e("p",null,d(o.wallet.connected?(c=o.positionInfo)==null?void 0:c.myShare:"--")+"%",1)])]),e("div",ds,[e("div",vs,[ms,e("div",null,[e("span",cs,d(o.wallet.connected?("addCommom"in o?o.addCommom:M($))((A=o.positionInfo)==null?void 0:A.myLiquidity):"--")+" LP",1),e("span",null,"$"+d(o.wallet.connected?("addCommom"in o?o.addCommom:M($))((f=o.positionInfo)==null?void 0:f.myLiquidityUSD):"--"),1)])]),e("div",ps,[e("div",fs,[e("div",ys,[e("img",{src:o.needReverse?o.getCoinIcon((n=o.positionInfo)==null?void 0:n.token_b):o.getCoinIcon((t=o.positionInfo)==null?void 0:t.token_a),alt:""},null,8,bs),z(b,{address:o.needReverse?(q=(u=o.positionInfo)==null?void 0:u.token_b)==null?void 0:q.address:(a=(C=o.positionInfo)==null?void 0:C.token_a)==null?void 0:a.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),e("div",_s,[e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:M($))((r=o.positionInfo)==null?void 0:r.amountA):"--")+" "+d(o.needReverse?(L=(O=o.positionInfo)==null?void 0:O.token_b)==null?void 0:L.symbol:(R=(v=o.positionInfo)==null?void 0:v.token_a)==null?void 0:R.symbol),1),e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:M($))((J=o.positionInfo)==null?void 0:J.myAmountAUSD):"--"),1)])]),e("div",hs,[e("img",{src:o.getCoinIcon((y=o.positionInfo)==null?void 0:y.lpInfo),alt:""},null,8,ks),gs]),e("div",$s,[e("div",ws,[e("img",{src:o.needReverse?o.getCoinIcon((w=o.positionInfo)==null?void 0:w.token_a):o.getCoinIcon((p=o.positionInfo)==null?void 0:p.token_b),alt:""},null,8,Is),z(b,{address:o.needReverse?(U=(to=o.positionInfo)==null?void 0:to.token_a)==null?void 0:U.address:(V=(D=o.positionInfo)==null?void 0:D.token_b)==null?void 0:V.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),e("div",Cs,[e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:M($))((k=o.positionInfo)==null?void 0:k.amountB):"--")+" "+d(o.needReverse?(lo=(po=o.positionInfo)==null?void 0:po.token_a)==null?void 0:lo.symbol:(co=(so=o.positionInfo)==null?void 0:so.token_b)==null?void 0:co.symbol),1),e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:M($))((Z=o.positionInfo)==null?void 0:Z.myAmountBUSD):"--"),1)])]),As])])])}const De=No(ls,[["render",Ps],["__scopeId","data-v-c9de826f"]]),Ss=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const Ts={},Ue=o=>(Uo("data-v-fcbc716b"),o=o(),Fo(),o),Rs={class:"status"},qs=Ue(()=>e("img",{src:Ss,alt:""},null,-1)),Bs=Ue(()=>e("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),Ns=[qs,Bs];function Ms(o,s){return m(),T("div",Rs,Ns)}const Fe=No(Ts,[["render",Ms],["__scopeId","data-v-fcbc716b"]]),Os=Do({components:{AutoPoolAddModal:qe,AutoPoolV2PoolStatus:Fe},setup(){const o=be(),s=g(!1),X=ce(),E=_(()=>X),W=_(()=>E.value.chainName),S=_(()=>o),b=Yo(),c=_(()=>b),A=zo(),f=_(()=>A),t=g(),n=Jo(),C=g(!1);Io(()=>[c.value.positionInfoObj,n.params.id],([h,B])=>{h&&!Ho(h)&&B&&(t.value=h[B],console.log(t.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const a=_(()=>{var h,B;return console.log((h=t.value)==null?void 0:h.needReverse,"##positionInfo.value?.needReverse"),(B=t.value)==null?void 0:B.needReverse}),u=g(),q=g(),r=g(),v=g(),R=g(!0),O=_(()=>S.value.assets&&u.value&&S.value.assets[u.value.address]?$e(S.value.assets[u.value.address].balance,u.value.decimals):0),L=_(()=>S.value.assets&&q.value&&S.value.assets[q.value.address]?$e(S.value.assets[q.value.address].balance,q.value.decimals):0),J=h=>{h==="fromCoin"?(R.value=!0,r.value=O.value>0?u.value.symbol=="SUI"?new i(Number(O.value)).sub(new i(.05)).lt(new i(0))?"0":new i(Number(O.value)).sub(new i(.05)).toString():String(O.value):""):(R.value=!1,v.value=L.value>0?q.value.symbol=="SUI"?new i(Number(L.value)).sub(new i(.05)).lt(new i(0))?"0":new i(Number(L.value)).sub(new i(.05)).toString():String(L.value):"")},y=h=>{h==="fromCoin"?(R.value=!0,r.value=O.value>0?H(new i(Number(O.value)).div(2).toString(),u.value.decimals).toString():""):(R.value=!1,v.value=L.value>0?H(new i(Number(L.value)).div(2).toString(),q.value.decimals).toString():"")},p=_(()=>W.value?Ie(W.value):{}),w=_(()=>E.value.slippage),D=g("--"),V=g("--"),to=h=>{const B=new i(t.value.autoPoolPositionInfo.liquidity),eo=new i(h.toString());if(B.toNumber()>0&&eo.toNumber()>0){const G=eo.add(B);console.log("totalLiquidity:",eo.div(G).mul(100).toString());const Ao=eo.div(G).mul(100).toNumber(),Q=je(Ao),yo=Q==-1?2:Q+2,ro=H(eo.div(G).mul(100).toNumber(),yo);console.log(t.value.decimals,"##positionInfo.value.decimal");const bo=new i(1).div(new i(Math.pow(10,t.value.lpInfo.decimals))).toString();console.log(ro,bo,"###288"),Number(ro)<Number(bo)?D.value=`<${bo}`:D.value=ro}else eo.toNumber()>0&&B.toNumber()<=0?D.value="100":D.value="--"},U=h=>{const B=new i(h.toString()),eo=new i(w.value).div(100),G=B.mul(eo),Ao=B.sub(G),Q=ye.get_lp_amount_by_liquidity({liquidity:t.value.liquidity,total_supply:t.value.total_supply},Ao),yo=new i(Math.pow(10,t.value.lpInfo.decimals)),ro=new i(Q).div(yo).toString();V.value=ro},k=g(!1),so=g(!1),co=g(""),po=g(),lo=async()=>{if(!t.value)return;const h=t.value.autoPoolPositionInfo.tick_lower_index,B=t.value.autoPoolPositionInfo.tick_upper_index,eo=To.sqrtPriceX64ToTickIndex(new no(t.value.current_sqrt_price));let G=To.tickIndexToSqrtPriceX64(h),Ao=To.tickIndexToSqrtPriceX64(B);eo<h&&(a.value?k.value=!0:so.value=!0),eo>B&&(a.value?so.value=!0:k.value=!0);let Q;if(console.log(r.value||v.value,"#fromCoinAmount.value || toCoinAmount.value"),r.value||v.value){R.value?Q=new i(r.value).mul(Math.pow(10,u.value.decimals)).toString():Q=new i(v.value).mul(Math.pow(10,q.value.decimals)).toString();let yo,ro=R.value;if(console.log("执行##"),fo.value||uo.value){console.log(a.value?R.value:!R.value,"#needReverse.value?fixedFromCoin.value:!fixedFromCoin.value");const N=await Ko.calculateDepositSwapAmount({lowerTick:h,upperTick:B,curSqrtPrice:new no(t.value.current_sqrt_price),fix_amount_a:ro,input_amount:Q,coinTypeA:t.value.autoPoolPositionInfo.coin_type_a,coinTypeB:t.value.autoPoolPositionInfo.coin_type_b,clmm_pool:t.value.address});if(console.log(N,"###swapResult"),N){C.value=N.is_exceed,yo=new no(N.afterSqrtPrice),Q=new no(N.swapOutAmount),po.value={swap_amount:N.swapInAmount,a2b:ro},ro=!ro;const Y=t.value.token_a.decimals,F=t.value.token_b.decimals;ve.value=To.sqrtPriceX64ToPrice(N.afterSqrtPrice,Y,F).toString(),console.log(ve.value,"##afterCurrentPrice.value");const vo=new i(N.swapInAmount).div(new i(Math.pow(10,Y))).toString(),_o=new i(N.swapOutAmount).div(new i(Math.pow(10,F))).toString(),mo=a.value?t.value.token_b.symbol:t.value.token_a.symbol,j=a.value?t.value.token_a.symbol:t.value.token_b.symbol;co.value=`To deposit ${$(fo.value?r.value:v.value)} ${fo.value?mo:j},
          ${$(vo)} ${fo.value?mo:j}  will be traded for ${$(_o)} ${fo.value?j:mo} added to the pool.`}else yo=t.value.current_sqrt_price,Q=new no(Q),ve.value=""}else C.value=!1,yo=t.value.current_sqrt_price,Q=new no(Q),ve.value="",co.value="";console.log(po,"##swapParams");let bo,l,P;if(eo>=h&&eo<=B){const N=p.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:u.value,tokenB:q.value,lowerTick:h,upperTick:B,coinAmount:Q,iscoinA:ro,roundUp:!0,slippage:Number(w.value)/100,curSqrtPrice:new no(yo)});bo=N.liquidityAmount,l=N.tokenMaxA,P=N.tokenMaxB,!fo.value&&!uo.value&&(R.value?v.value=Number(P)>0?P:"":r.value=Number(l)>0?l:"")}else eo<B?bo={liquidityAmount:We(G,Ao,Q),tokenMaxA:0,tokenMaxB:v.value}.liquidityAmount:bo={liquidityAmount:Xe(G,Ao,Q),tokenMaxA:r.value,tokenMaxB:0}.liquidityAmount;console.log(bo.toString(),"liquidityAmount###"),to(bo),U(bo)}};Io(()=>t.value,h=>{h&&!Ho(h)&&(u.value=h==null?void 0:h.token_a,q.value=h==null?void 0:h.token_b,k.value=!1,so.value=!1,lo())},{immediate:!0});const Z=_(()=>f.value.RATES),ko=_(()=>{var h,B,eo,G,Ao,Q,yo,ro,bo,l;if((B=Z.value[(h=u.value)==null?void 0:h.address])!=null&&B.price&&((G=Z.value[(eo=q.value)==null?void 0:eo.address])!=null&&G.price)){console.log((Q=Z.value[(Ao=u.value)==null?void 0:Ao.address])==null?void 0:Q.price,"RATES.value[fromCoin.value?.address]?.price");const P=new i(r.value||0).mul(new i((ro=Z.value[(yo=u.value)==null?void 0:yo.address])==null?void 0:ro.price)),N=new i(v.value||0).mul(new i((l=Z.value[(bo=q.value)==null?void 0:bo.address])==null?void 0:l.price));return ne(P.add(N).toString(),2)}else return"--"});Io(()=>r.value,(h,B)=>{h?lo():(D.value="--",v.value="",V.value="--")},{immediate:!0}),Io(()=>v.value,(h,B)=>{h?lo():(r.value="",D.value="--",V.value="--")},{immediate:!0});const{t:io,locale:I}=Ae(),K=_(()=>{const h=Number(r.value)>Number(O.value),B=Number(v.value)>Number(L.value);return!r.value&&!v.value?io("button.enterAmount"):h?io("button.insufficientBalance",{name:u.value.symbol}):B?io("button.insufficientBalance",{name:q.value.symbol}):C.value?io("button.insufficientLiquidity"):"Add Liquidity"}),qo=_(()=>{const h=Number(r.value)>Number(O.value),B=Number(v.value)>Number(L.value);return!!(!r.value&&!v.value||h||B||r.value<=0&&v.value<=0||C.value||Xo.value!=="STATUS_RUNNING")}),wo=g(!0),{setIsShowSuccess:Zo,setIsShowRejected:Vo,setIsShowWaiting:Ro,setTransactionDesc:Bo,setTransactionTxid:Eo,setPositiomNum:Wo}=X,Ko=Ce("Sui"),Qo=async()=>{var bo,l;s.value=!1,wo.value=!0,Eo("");const h=`${$(r.value)} ${(bo=u.value)==null?void 0:bo.symbol}`,B=`${$(v.value)} ${(l=q.value)==null?void 0:l.symbol}`;Bo(`Deposit ${r.value>0?h:""} ${v.value>0&&r.value>0?"and":""} ${v.value>0?B:""}`),Ro(!0);const eo=R.value,G=t.value.autoPoolPositionInfo.tick_lower_index,Ao=t.value.autoPoolPositionInfo.tick_upper_index,Q=To.sqrtPriceX64ToTickIndex(new no(t.value.current_sqrt_price));let yo;R.value?yo=new i(r.value).mul(Math.pow(10,u.value.decimals)).toString():yo=new i(v.value).mul(Math.pow(10,q.value.decimals)).toString();const ro=t.value.rewarderInfo.map(P=>P.coinAddress);try{const P={lowerTick:G,upperTick:Ao,coinAmount:yo,fix_amount_a:eo,slippage:Number(w.value)/100,curSqrtPrice:new no(t.value.current_sqrt_price),id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.pool,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coin_type_a,coinTypeB:t.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:ro,swapParams:po.value,isOnlyA:fo.value,isOnlyB:uo.value,currentTickIndex:Q},N=await Ko.deposit(P);console.log(N,"===>payloadAdd11111");const Y=await S.value.currentWallet.signAndExecuteTransactionBlock(N);let F=p.value.handleTx(Y);if(console.log("toAdd###tx###",F),F&&F.hash){Eo(F.hash),Ro(!1),Zo(!0),console.log(t,"===>positionInfo");const vo={title:"Supplied",desc:`Deposit ${r.value>0?h:""} ${v.value>0&&r.value>0?"and":""} ${v.value>0?B:""}`,hash:F.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${r.value>0?h:""} ${v.value>0&&r.value>0?"and":""} ${v.value>0?B:""}`};W.value!=="Aptos"&&(vo.res=F.res),p.value.showTransitionPending(vo),await p.value.watchTransaction(vo)&&setTimeout(()=>{b.updatePositionItem(t.value.id),p.value.getAccount(S.value.address)},1e3),Wo()}else Ro(!1),Vo(!0);r.value="",v.value="",wo.value=!1}catch(P){r.value="",v.value="",console.log("addError###",P),wo.value=!1,Ro(!1),Vo(!0)}},fo=g(!1),uo=g(!1),xo=h=>{r.value="",v.value="",co.value="",h=="only-a"?(fo.value=!fo.value,uo.value=!1):(uo.value=!uo.value,fo.value=!1)},Xo=_(()=>c.value.currentAutoPoolStatus),jo=g(),oe=()=>{jo.value=window.setInterval(()=>{(r.value||v.value)&&lo()},2e4)};return he(()=>{oe()}),ke(()=>{window.clearInterval(jo.value)}),{currentAutoPoolStatus:Xo,wallet:S,positionInfo:t,isShowAddModal:s,needReverse:a,fromCoin:u,toCoin:q,fromCoinAmount:r,toCoinAmount:v,fromCoinBlance:O,toCoinBlance:L,fixedFromCoin:R,maxBtnSelect:J,halfBtnSelect:y,totalAmountUSD:ko,addCommom:$,shareOfPool:D,minimumReceivedLP:V,addLiquidityBtnText:K,addLiquidityBtnDisabled:qo,toAdd:Qo,showToCoinLock:so,showFromCoinLock:k,isOnlyA:fo,isOnlyB:uo,onlyToken:xo,onlyText:co}}});const le=o=>(Uo("data-v-8570416b"),o=o(),Fo(),o),Ls={class:"auto-pool-add"},Ds={class:"auto-pool-add-content"},Us={class:"liquidity-action-tab"},Fs=le(()=>e("div",{class:"increase tab-active"},"Add",-1)),Vs={class:"only-token"},Es=le(()=>e("div",null,"Deposit Amounts",-1)),Ws={key:0},Xs={key:0},js={key:0,class:"card-item"},Gs={key:1,class:"card-item"},Hs=le(()=>e("span",null,"Pool Closed",-1)),zs={class:"add-info"},Ys={key:0,class:"only-text"},Js={class:"total-amount"},Zs=le(()=>e("span",null,"Total Amount",-1)),Ks={class:"total-amount"},Qs=le(()=>e("span",null,"Share of Pool",-1)),xs={class:"total-amount"},ol=le(()=>e("span",null,"Minimum Received LP",-1));function el(o,s,X,E,W,S){var n,C,a,u,q,r,v,R,O,L,J,y,p;const b=Te,c=Re,A=ae("AutoPoolV2PoolStatus"),f=Se,t=qe;return m(),T("div",Ls,[e("div",Ds,[e("div",Us,[Fs,e("div",{class:"remove",onClick:s[0]||(s[0]=Pe(w=>o.$emit("changeCurrentTab"),["stop"]))},"Remove")]),e("div",Vs,[Es,e("div",null,[e("div",{class:"only-a",onClick:s[1]||(s[1]=w=>o.onlyToken("only-a"))},[e("p",null,[o.isOnlyA?(m(),T("span",Ws)):oo("",!0)]),e("span",null,d(o.needReverse?(u=(a=o.positionInfo)==null?void 0:a.token_b)==null?void 0:u.symbol:(C=(n=o.positionInfo)==null?void 0:n.token_a)==null?void 0:C.symbol)+" only",1)]),e("div",{class:"only-b",onClick:s[2]||(s[2]=w=>o.onlyToken("only-b"))},[e("p",null,[o.isOnlyB?(m(),T("span",Xs)):oo("",!0)]),e("span",null,d(o.needReverse?(R=(v=o.positionInfo)==null?void 0:v.token_a)==null?void 0:R.symbol:(r=(q=o.positionInfo)==null?void 0:q.token_b)==null?void 0:r.symbol)+" only",1)])])]),e("div",{class:fe(o.needReverse?"card-container reverse":"card-container")},[(o.needReverse?!o.isOnlyA:!o.isOnlyB)?(m(),T("div",js,[z(b,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":s[3]||(s[3]=w=>o.fromCoinAmount=w),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[4]||(s[4]=w=>o.maxBtnSelect("fromCoin")),onOnHalf:s[5]||(s[5]=w=>o.halfBtnSelect("fromCoin")),onOnInput:s[6]||(s[6]=w=>{o.fromCoinAmount=w}),onOnFocus:s[7]||(s[7]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock&&!o.isOnlyA?(m(),ao(c,{key:0})):oo("",!0)])):oo("",!0),(o.needReverse?!o.isOnlyB:!o.isOnlyA)?(m(),T("div",Gs,[z(b,{modelValue:o.toCoinAmount,"onUpdate:modelValue":s[8]||(s[8]=w=>o.toCoinAmount=w),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[9]||(s[9]=w=>o.maxBtnSelect("toCoin")),onOnHalf:s[10]||(s[10]=w=>o.halfBtnSelect("toCoin")),onOnInput:s[11]||(s[11]=w=>{o.toCoinAmount=w}),onOnFocus:s[12]||(s[12]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock&&!o.isOnlyB?(m(),ao(c,{key:0})):oo("",!0)])):oo("",!0)],2)]),o.currentAutoPoolStatus=="STATUS_REBALANCING"?(m(),ao(A,{key:0})):oo("",!0),(O=o.positionInfo)!=null&&O.is_pause?(m(),ao(f,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:Lo(()=>[Hs]),_:1})):o.wallet.connected?(m(),ao(f,{key:2,class:"big-btn liquidity-btn",disabled:o.addLiquidityBtnDisabled,onClick:s[13]||(s[13]=w=>o.isShowAddModal=!0)},{default:Lo(()=>[e("span",null,d(o.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(m(),ao(f,{key:3,class:"big-btn liquidity-btn",onClick:s[14]||(s[14]=w=>o.wallet.setIsShowWalletModal(!0))},{default:Lo(()=>[e("span",null,d(o.$t("button.connectWallet")),1)]),_:1})),e("div",zs,[o.onlyText?(m(),T("div",Ys,d(o.onlyText),1)):oo("",!0),e("div",Js,[Zs,e("span",null,"$"+d(("addCommom"in o?o.addCommom:M($))(o.totalAmountUSD)),1)]),e("div",Ks,[Qs,e("span",null,d(o.shareOfPool)+"%",1)]),e("div",xs,[ol,e("span",null,d(("addCommom"in o?o.addCommom:M($))(o.minimumReceivedLP))+" "+d(o.needReverse?(L=o.toCoin)==null?void 0:L.symbol:(J=o.fromCoin)==null?void 0:J.symbol)+"-"+d(o.needReverse?(y=o.fromCoin)==null?void 0:y.symbol:(p=o.toCoin)==null?void 0:p.symbol),1)])]),o.isShowAddModal?(m(),ao(t,{key:4,"pool-info":o.positionInfo,"from-coin":o.needReverse?o.positionInfo.token_b:o.positionInfo.token_a,"to-coin":o.needReverse?o.positionInfo.token_a:o.positionInfo.token_b,"from-coin-amount":o.needReverse?o.toCoinAmount:o.fromCoinAmount,"to-coin-amount":o.needReverse?o.fromCoinAmount:o.toCoinAmount,"total-amount":o.totalAmountUSD,"share-of-pool":o.shareOfPool,"minimum-received-l-p":o.minimumReceivedLP,"is-only-a":o.isOnlyA,"is-only-b":o.isOnlyB,onOnClose:s[15]||(s[15]=w=>o.isShowAddModal=!1),onToAdd:o.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):oo("",!0)])}const nl=No(Os,[["render",el],["__scopeId","data-v-8570416b"]]),tl=Do({components:{AutoPoolRemoveModal:Be,AutoPoolV2PoolStatus:Fe},setup(){const o=be(),s=_(()=>o),X=ce(),E=_(()=>X),W=_(()=>E.value.slippage),S=_(()=>E.value.chainName),b=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],c=g(25),A=Jo(),f=Yo(),t=_(()=>f),n=_(()=>(console.log(t.value.positionInfoObj[A.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),t.value.positionInfoObj[A.params.id])),C=_(()=>{var l;return(l=n.value)==null?void 0:l.needReverse}),a=g(),u=g(),q=g(!1),r=g(),v=_(()=>{var l;return(l=n.value)==null?void 0:l.myLiquidity}),R=g(!0),O=_(()=>S.value?Ie(S.value):{}),L=g(),J=Ce("Sui"),y=g(""),p=g(""),w=g("--"),D=g(!1),V=g(!1),to=g(),U=g(!0),k=g(),so=zo(),co=_(()=>so),po=_(()=>co.value.RATES),lo=async()=>{if(R.value||!n.value)return;const l=n.value.autoPoolPositionInfo.tick_lower_index,P=n.value.autoPoolPositionInfo.tick_upper_index,N=To.sqrtPriceX64ToTickIndex(new no(n.value.current_sqrt_price));N<l&&(C.value?D.value=!0:V.value=!0),N>P&&(C.value?V.value=!0:D.value=!0);let Y;if(console.log(y.value||p.value,"#fromCoinAmount.value || toCoinAmount.value"),y.value||p.value){U.value?Y=new i(y.value).mul(Math.pow(10,a.value.decimals)).toString():Y=new i(p.value).mul(Math.pow(10,u.value.decimals)).toString();let F,vo=U.value;if(I.value||K.value){const x=await J.calculateRemoveSwapAmount({lowerTick:l,upperTick:P,curSqrtPrice:new no(n.value.current_sqrt_price),fix_amount_a:vo,receiveAmount:Y,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address});if(console.log(x,"###swapResult"),x){L.value=x.is_exceed,Y=new no(x.swapOutAmount),F=n.value.current_sqrt_price,to.value={swap_amount:x.swapInAmount,liquidity:x.liquidity,a2b:!vo},vo=!vo;const ho=n.value.token_a.decimals,Po=n.value.token_b.decimals,So=new i(x.swapInAmount).div(new i(Math.pow(10,ho))).toString(),ee=new i(x.swapOutAmount).div(new i(Math.pow(10,Po))).toString(),$o=C.value?n.value.token_b.symbol:n.value.token_a.symbol,go=C.value?n.value.token_a.symbol:n.value.token_b.symbol;k.value=y.value==G.value||p.value==G.value?`To withdraw ${$(I.value?y.value:p.value)} ${I.value?$o:go},
          ${$(I.value?n.value.amountB:n.value.amountA)} ${I.value?go:$o} 
           in the pool will be traded for ${So} ${I.value?$o:go}`:`To withdraw ${$(I.value?y.value:p.value)} ${I.value?$o:go},
          ${$(So)} ${I.value?go:$o}  in the pool will be traded for ${$(ee)} ${I.value?$o:go}`}else F=n.value.current_sqrt_price,Y=new no(Y),k.value=""}else L.value=!1,F=n.value.current_sqrt_price,Y=new no(Y);console.log(F,"##curSqrtPrice"),console.log("执行了吗##");const{liquidityAmount:_o,tokenMaxA:mo,tokenMaxB:j}=O.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:a.value,tokenB:u.value,lowerTick:l,upperTick:P,coinAmount:Y,iscoinA:vo,roundUp:!1,slippage:Number(W.value)/100,curSqrtPrice:new no(F)});if(console.log(n.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(j.toString(),mo.toString(),n.value,"###323"),!I.value&&!K.value&&(U.value?p.value=Number(j)>0?j:"":y.value=Number(mo)>0?mo:""),(I.value||K.value)&&(y.value==G.value||p.value==G.value)){r.value=n.value.myLiquidity;const x=new i(100);w.value=new i(n.value.myLiquidity).mul(new i(Math.pow(10,n.value.lpInfo.decimals))).toString(),Z.value=_o.toString(),c.value=x.toNumber()}else{const x=ye.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},_o.toString());r.value=new i(x).div(new i(Math.pow(10,n.value.lpInfo.decimals))).toString();const ho=new i(r.value).div(new i(v.value)).mul(100);console.log(x,v.value,"####lpBalance.value"),w.value=x,Z.value=_o.toString(),c.value=ho.toNumber()}}},Z=g(),ko=_(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountA}),io=_(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountB}),I=g(!1),K=g(!1),qo=_(()=>{var vo,_o,mo,j;const l=(_o=po.value[(vo=a==null?void 0:a.value)==null?void 0:vo.address])==null?void 0:_o.price,P=(j=po.value[(mo=u==null?void 0:u.value)==null?void 0:mo.address])==null?void 0:j.price;console.log(l,P,y.value,p.value,"####totalWithdraw");let N=y.value!=="--"&&y.value!==""?y.value:0,Y=p.value!=="--"&&p.value!==""?p.value:0,F;return l&&P&&(I.value||K.value?F=new i(I.value?N:Y).mul(new i(I.value?l:P)).toString():(F=new i(N).mul(new i(l)).add(new i(Y).mul(new i(P))).toString(),console.log(F,"result##"))),F>0&&F<.01?"<$0.01":`$${$(H(F,2))}`}),wo=async l=>{if(!R.value)return;R.value=!0,n.value.token_a.decimals,n.value.token_b.decimals;const P=n.value.tick_lower_index,N=n.value.tick_upper_index;To.tickIndexToSqrtPriceX64(P),To.tickIndexToSqrtPriceX64(N);const Y=n.value.autoPoolPositionInfo.tick_lower_index,F=n.value.autoPoolPositionInfo.tick_upper_index,vo=To.sqrtPriceX64ToTickIndex(new no(n.value.current_sqrt_price));vo<Y&&(C.value?D.value=!0:V.value=!0),vo>F&&(C.value?V.value=!0:D.value=!0);let _o="",mo,j;console.log(l.value,"##item.value"),console.log(j,"##coinAmount");let x=U.value;if(console.log("执行##"),I.value||K.value&&!D.value&&!V.value){if(I.value){const Po=new i(G.value).mul(Math.pow(10,a.value.decimals)).mul(l.value).toString();console.log(Po,"##amount"),j=H(Po,0),y.value=H(new i(G.value).mul(l.value).toString(),a.value.decimals)}if(K.value){const Po=new i(G.value).mul(l.value).mul(Math.pow(10,u.value.decimals)).toString();j=H(Po,0),p.value=H(new i(G.value).mul(l.value).toString(),u.value.decimals)}const ho=await J.calculateRemoveSwapAmount({lowerTick:P,upperTick:N,curSqrtPrice:new no(n.value.current_sqrt_price),fix_amount_a:x,receiveAmount:j,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address});if(console.log(ho,"###swapResult"),ho){L.value=ho.is_exceed,j=new no(ho.swapOutAmount),n.value.current_sqrt_price,to.value={swap_amount:ho.swapInAmount,liquidity:ho.liquidity,a2b:!x},x=!x;const Po=n.value.token_a.decimals,So=n.value.token_b.decimals,ee=new i(ho.swapInAmount).div(new i(Math.pow(10,Po))).toString(),$o=new i(ho.swapOutAmount).div(new i(Math.pow(10,So))).toString(),go=C.value?n.value.token_b.symbol:n.value.token_a.symbol,Go=C.value?n.value.token_a.symbol:n.value.token_b.symbol;k.value=l.value==1?`To withdraw ${$(I.value?y.value:p.value)} ${I.value?go:Go},
          ${$(I.value?n.value.amountB:n.value.amountA)} ${I.value?Go:go}  in the pool will be traded for ${$(ee)} ${I.value?go:Go}`:`To withdraw ${$(I.value?y.value:p.value)} ${I.value?go:Go},
          ${$($o)} ${I.value?Go:go}  in the pool will be traded for ${$(ee)} ${I.value?go:Go}`,_o=ho.liquidity}else n.value.current_sqrt_price,j=new no(j),k.value="";console.log(mo,"result###"),w.value=new i(n.value.myLiquidity).mul(new i(l.value)).toString(),console.log(n.value,n.value.liquidity,_o,w.value,"###positionInfo.value.liquidity"),console.log(w.value,"##lpTokenAmount.value"),r.value=new i(w.value),Z.value=_o}else{L.value=!1;const ho=new i(ko.value).mul(Math.pow(10,a.value.decimals)).mul(l.value).toString();j=H(ho,0),y.value=H(new i(ko.value).mul(l.value).toString(),a.value.decimals);const Po=new i(io.value).mul(l.value).mul(Math.pow(10,u.value.decimals)).toString();j=H(Po,0),p.value=H(new i(io.value).mul(l.value).toString(),u.value.decimals),n.value.current_sqrt_price,j=new no(j),l.value!==1?mo=new i(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(l.value).toString():mo=new i(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),r.value=new i(mo).div(Math.pow(10,n.value.lpInfo.decimals)),_o=ye.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},mo),w.value=mo,Z.value=H(_o,0),console.log(_o,"###newLiquidity525")}};Io(c,pe((l,P)=>{l!==P&&(Number(l)>100?c.value=100:l&&n.value?(console.log("687===>"),c.value=l,wo({value:c.value/100})):(y.value="",p.value=""))},300)),Io(()=>y.value,pe((l,P)=>{l?lo():(p.value="",c.value=0)},500),{immediate:!0}),Io(()=>p.value,pe((l,P)=>{l?lo():(y.value="",c.value=0)},500),{immediate:!0});const Zo=He(),{setIsShowSuccess:Vo,setIsShowRejected:Ro,setIsShowWaiting:Bo,setTransactionDesc:Eo,setTransactionTxid:Wo,setPositiomNum:Ko,setTransactionDescText:Qo}=X,fo=g(!1),{t:uo}=Ae(),xo=async()=>{var ho,Po;fo.value=!0,Wo("");const l=Number(y.value)>0?`${$(y.value,a.value.decimals)} ${a.value.symbol}`:"",P=Number(p.value)>0?`${$(p.value,u.value.decimals)} ${u.value.symbol}`:"";console.log(l,P,"###transactionDescTo"),Eo(uo("tips.removeLiquidiyText",{from:C.value?P:l,and:Number(y.value)>0&&Number(p.value)>0?"and":"",to:C.value?l:P})),Bo(!0);const N=uo("modal.removeLiquidityText2");Qo(N);const Y=n.value.autoPoolPositionInfo.tick_lower_index,F=n.value.autoPoolPositionInfo.tick_upper_index,vo=To.tickIndexToSqrtPriceX64(Y),_o=To.tickIndexToSqrtPriceX64(F),mo=n.value.rewarderInfo.map(So=>So.coinAddress);console.log(w.value,"##lpTokenAmount.value431");let j;U.value?j=new i(y.value).mul(Math.pow(10,a.value.decimals)).toString():j=new i(p.value).mul(Math.pow(10,u.value.decimals)).toString(),console.log();const x={lowerSqrtPrice:vo,upperSqrtPrice:_o,lpTokenAmount:w.value,liquidity:Z.value,curSqrtPrice:new no(n.value.object.current_sqrt_price),slippage:Number(W.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.pool,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:mo,swapParams:to.value,fix_amount_a:U.value,isOnlyA:!D.value&&!V.value?I.value:!1,isOnlyB:!V.value&&!D.value?K.value:!1,lowerTick:Y,upperTick:F,receiveAmount:j,sliderVal:c.value,positionInfo:n.value};try{const So=await J.remove(x);console.log(So,"移除流动性payload");const ee=await s.value.currentWallet.signAndExecuteTransactionBlock(So);let $o=O.value.handleTx(ee);if(console.log("0331###remove###tx####",$o),$o&&$o.hash){Wo($o.hash),Bo(!1),Vo(!0);const go={title:uo("common.removeLiquidity"),desc:"",hash:$o.hash,descTransactions:`Remove ${l} ${Number(y.value)>0&&Number(p.value)>0?"and":""} ${P} from the pool`,sender:s.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${y.value} ${(ho=a.value)==null?void 0:ho.symbol} and ${p.value} ${(Po=u.value)==null?void 0:Po.symbol}`};go.res=$o.res,O.value.showTransitionPending(go),await O.value.watchTransaction(go)&&(y.value="",p.value="",r.value="",c.value=0,setTimeout(()=>{f.updatePositionItem(n.value.id),O.value.getAccount(s.value.address)},1e3),Number(c.value)==100&&A.name=="auto-pool-detail"&&Zo.push("/pool/auto"))}else Bo(!1),Ro(!0);fo.value=!1}catch(So){console.log("Remove error",So),fo.value=!1,Bo(!1),Ro(!0)}};Io(()=>n.value,(l,P)=>{l&&!Ho(l)&&(a.value=l==null?void 0:l.token_a,u.value=l==null?void 0:l.token_b,console.log("触发###"),(!P||P&&P.address!==l.address)&&(c.value=c.value>0?c.value:25,wo({value:c.value/100})))},{immediate:!0});const Xo=_(()=>{const l=Number(r.value)>Number(v.value);return!y.value&&!p.value||!r.value||r.value<=0||!y.value&&I.value||!p.value&&K.value?uo("button.enterAmount"):l?"Invalid Amount":L.value?uo("button.insufficientLiquidity"):uo("button.remove")}),jo=_(()=>{console.log(r.value.toString(),v.value,"##lpBalance.value");const l=Number(r.value)>Number(v.value);return!!(!y.value&&!p.value||(console.log(1111),Number(y.value)<=0&&I.value||Number(p.value)<=0&&K.value)||(console.log(2222),!r.value||r.value<=0)||(console.log(3333),l)||(console.log(4444),L.value)||(console.log(5555),yo.value!=="STATUS_RUNNING"))}),oe=l=>(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||se("/image/coins/sui-unknown.png"),h=l=>{y.value="",p.value="",R.value=!0,k.value="",l=="only-a"?(I.value=!I.value,K.value=!1,U.value=!0):(K.value=!K.value,I.value=!1,U.value=!1)},B=l=>{R.value=!0,c.value=100,l==="fromCoin"?U.value=!0:U.value=!1},eo=l=>{R.value=!0,c.value=50,l==="fromCoin"?U.value=!0:U.value=!1},G=g(),Ao=async()=>{U.value;const l=n.value.token_a.decimals,P=n.value.token_b.decimals,N=I.value?io.value:ko.value;console.log(N,"###receiveAmount");const Y=a.value.address===n.value.token_a.address&&u.value.address===n.value.token_b.address?0:1;if(I.value||K.value){console.log(N,"##receiveAmount");let F=await O.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:Y==1,byAmountIn:!0,amount:N});console.log(F,F.estimatedAmountOut,l,P,"##preSwapRes"),G.value=new i(F.estimatedAmountOut).add(new i(I.value?ko.value:io.value)).toString(),console.log(G.value,"###onlyTokenBalance.value"),wo({value:c.value/100})}};Io(()=>[I.value,K.value,ko.value,io.value],([l,P])=>{l||P?Ao():wo({value:c.value/100})},{immediate:!0});const Q=l=>`${l}%`,yo=_(()=>t.value.currentAutoPoolStatus),ro=g(),bo=()=>{ro.value=window.setInterval(()=>{(y.value||p.value)&&!R.value?lo():wo({value:c.value/100})},2e4)};return he(()=>{bo()}),ke(()=>{window.clearInterval(ro.value)}),{removeLiquidityBtnText:Xo,removeLiquidityBtnDisabled:jo,wallet:s,ratioArr:b,positionInfo:n,isShowRemoveModal:q,needReverse:C,fromCoin:a,toCoin:u,lpAmount:r,lpBalance:v,sliderVal:c,sFixD:H,isSlider:R,fromCoinAmount:y,toCoinAmount:p,setPercent:wo,toRemove:xo,addCommom:$,getCoinIcon:oe,isOnlyA:I,isOnlyB:K,onlyToken:h,fixedFromCoin:U,maxBtnSelect:B,halfBtnSelect:eo,fromCoinBlance:ko,toCoinBlance:io,showFromCoinLock:D,showToCoinLock:V,removeText:k,onlyTokenBalance:G,totalWithdraw:qo,formatter:Q,currentAutoPoolStatus:yo}}});const re=o=>(Uo("data-v-8079dbc7"),o=o(),Fo(),o),sl={class:"auto-pool-add"},ll={class:"auto-pool-add-content"},il={class:"liquidity-action-tab"},al=re(()=>e("div",{class:"remove tab-active"},"Remove",-1)),ul={key:0,class:"only-token"},rl=re(()=>e("div",null,"Deposit Amounts",-1)),dl={key:0},vl={key:0},ml={key:0,class:"card-item"},cl={key:1,class:"card-item"},pl={class:"remove-ratio"},fl={class:"remove-ratio-select"},yl={key:0,class:"ratio"},bl={key:1,class:"ratio"},_l={class:"ratio-list"},hl=["onClick"],kl=re(()=>e("span",null,"Pool Closed",-1)),gl={key:4,class:"remove-info"},$l={key:0,class:"remove-text total-amount"},wl={class:"total-amount"},Il=re(()=>e("span",null,"Total Withdraw",-1)),Cl={class:"total-amount"},Al=re(()=>e("span",null,"LP Burn Amount",-1)),Pl={key:0},Sl={key:1};function Tl(o,s,X,E,W,S){var C,a,u,q,r,v,R,O,L,J,y,p,w,D,V,to,U;const b=Te,c=Re,A=Je,f=ae("AutoPoolV2PoolStatus"),t=Se,n=Be;return m(),T("div",sl,[e("div",ll,[e("div",il,[e("div",{class:"increase",onClick:s[0]||(s[0]=Pe(k=>o.$emit("changeCurrentTab"),["stop"]))},"Add"),al]),!o.showFromCoinLock&&!o.showToCoinLock?(m(),T("div",ul,[rl,e("div",null,[e("div",{class:"only-a",onClick:s[1]||(s[1]=k=>o.onlyToken("only-a"))},[e("p",null,[o.isOnlyA?(m(),T("span",dl)):oo("",!0)]),e("span",null,d(o.needReverse?(q=(u=o.positionInfo)==null?void 0:u.token_b)==null?void 0:q.symbol:(a=(C=o.positionInfo)==null?void 0:C.token_a)==null?void 0:a.symbol)+" only",1)]),e("div",{class:"only-b",onClick:s[2]||(s[2]=k=>o.onlyToken("only-b"))},[e("p",null,[o.isOnlyB?(m(),T("span",vl)):oo("",!0)]),e("span",null,d(o.needReverse?(O=(R=o.positionInfo)==null?void 0:R.token_a)==null?void 0:O.symbol:(v=(r=o.positionInfo)==null?void 0:r.token_b)==null?void 0:v.symbol)+" only",1)])])])):oo("",!0),e("div",{class:fe(o.needReverse?"card-container reverse":"card-container")},[(o.needReverse?!o.isOnlyA:!o.isOnlyB)?(m(),T("div",ml,[z(b,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":s[3]||(s[3]=k=>o.fromCoinAmount=k),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.isOnlyA?o.onlyTokenBalance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[4]||(s[4]=k=>o.maxBtnSelect("fromCoin")),onOnHalf:s[5]||(s[5]=k=>o.halfBtnSelect("fromCoin")),onOnInput:s[6]||(s[6]=k=>{o.isSlider=!1,o.fromCoinAmount=k}),onOnFocus:s[7]||(s[7]=()=>{o.isSlider=!1,o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock?(m(),ao(c,{key:0})):oo("",!0)])):oo("",!0),(o.needReverse?!o.isOnlyB:!o.isOnlyA)?(m(),T("div",cl,[z(b,{modelValue:o.toCoinAmount,"onUpdate:modelValue":s[8]||(s[8]=k=>o.toCoinAmount=k),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.isOnlyB?o.onlyTokenBalance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[9]||(s[9]=k=>o.maxBtnSelect("toCoin")),onOnHalf:s[10]||(s[10]=k=>o.halfBtnSelect("toCoin")),onOnInput:s[11]||(s[11]=k=>{o.isSlider=!1,o.toCoinAmount=k}),onOnFocus:s[12]||(s[12]=()=>{o.isSlider=!1,o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock?(m(),ao(c,{key:0})):oo("",!0)])):oo("",!0)],2),e("div",pl,[e("div",fl,[Number(o.lpBalance)>=Number(o.lpAmount)?(m(),T("div",yl,d(o.sliderVal>0&&Number(("sFixD"in o?o.sFixD:M(H))(o.sliderVal,2))<.01?"<0.01":("sFixD"in o?o.sFixD:M(H))(o.sliderVal,2))+"% ",1)):(m(),T("div",bl,"--")),e("div",_l,[(m(!0),T(ze,null,Ye(o.ratioArr,(k,so)=>(m(),T("div",{key:so,class:fe(["ratio-item",o.sliderVal==k.value?"ratio-item-active":""]),onClick:()=>{o.isSlider=!0,o.sliderVal=k.value}},d(k.name),11,hl))),128))])]),z(A,{value:o.sliderVal,"onUpdate:value":s[13]||(s[13]=k=>o.sliderVal=k),"tip-formatter":o.formatter,onChange:s[14]||(s[14]=k=>o.isSlider=!0)},null,8,["value","tip-formatter"])])]),o.currentAutoPoolStatus=="STATUS_REBALANCING"?(m(),ao(f,{key:0})):oo("",!0),(L=o.positionInfo)!=null&&L.is_pause?(m(),ao(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:Lo(()=>[kl]),_:1})):o.wallet.connected?(m(),ao(t,{key:2,class:"big-btn liquidity-btn",disabled:o.removeLiquidityBtnDisabled,onClick:s[15]||(s[15]=k=>o.toRemove())},{default:Lo(()=>[e("span",null,d(o.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(m(),ao(t,{key:3,class:"big-btn liquidity-btn",onClick:s[16]||(s[16]=k=>o.wallet.setIsShowWalletModal(!0))},{default:Lo(()=>[e("span",null,d(o.$t("button.connectWallet")),1)]),_:1})),o.removeLiquidityBtnDisabled?oo("",!0):(m(),T("div",gl,[o.removeText&&(o.isOnlyA&&o.fromCoinAmount||o.isOnlyB&&o.toCoinAmount)?(m(),T("div",$l,d(o.removeText),1)):oo("",!0),e("div",wl,[Il,e("span",null,d(o.totalWithdraw),1)]),e("div",Cl,[Al,o.fromCoinAmount||o.toCoinAmount?(m(),T("span",Pl,d(("addCommom"in o?o.addCommom:M($))(o.lpAmount))+" "+d(o.needReverse?(J=o.toCoin)==null?void 0:J.symbol:(y=o.fromCoin)==null?void 0:y.symbol)+"-"+d(o.needReverse?(p=o.fromCoin)==null?void 0:p.symbol:(w=o.toCoin)==null?void 0:w.symbol),1)):(m(),T("span",Sl,"0 "+d(o.needReverse?(D=o.toCoin)==null?void 0:D.symbol:(V=o.fromCoin)==null?void 0:V.symbol)+"-"+d(o.needReverse?(to=o.fromCoin)==null?void 0:to.symbol:(U=o.toCoin)==null?void 0:U.symbol),1))])])),o.isShowRemoveModal?(m(),ao(n,{key:5,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,onOnClose:s[17]||(s[17]=k=>o.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):oo("",!0)])}const Rl=No(tl,[["render",Tl],["__scopeId","data-v-8079dbc7"]]),ql=Do({components:{AutoPoolV2Info:Ne,AutoPoolV2PositionRange:Me,AutoPoolV2PoolComposition:Le,AutoPoolV2PoolLiquidity:De,AutoPoolV2PoolAdd:nl,AutoPoolV2PoolRemove:Rl},setup(){const o=Yo(),s=zo(),X=ce(),E=_(()=>X),W=()=>{o.getAutoPoolAPY(),o.getAutoPoolList(),s.setPoolConfigList(E.value.chainName,E.value.filterCoinsObj)},S=g(),b=Jo();Io(()=>b.query.action,f=>{f&&(S.value=f)},{immediate:!0});const c=g(),A=()=>{c.value=window.setInterval(()=>{o.getVault(b.params.id)},6e4)};return he(()=>{console.log(b,"route##"),A()}),ke(()=>{window.clearInterval(c.value)}),{clickRefresh:W,currentTab:S}}});const Bl={class:"auto-pool-detail-v2"},Nl={class:"detail-top"},Ml={class:"detail-bottom pc-detail"},Ol={class:"detail-bottom-left"},Ll={class:"detail-bottom-right"},Dl={class:"h5-detail"};function Ul(o,s,X,E,W,S){const b=Ve,c=Ne,A=Me,f=Le,t=De,n=ae("AutoPoolV2PoolAdd"),C=ae("AutoPoolV2PoolRemove");return m(),T("div",Bl,[e("div",Nl,[z(b,{onClickRefresh:o.clickRefresh},null,8,["onClickRefresh"]),z(c)]),e("div",Ml,[e("div",Ol,[z(A),z(f),z(t)]),e("div",Ll,[o.currentTab=="add"?(m(),ao(n,{key:0,onChangeCurrentTab:s[0]||(s[0]=a=>o.currentTab="remove")})):(m(),ao(C,{key:1,onChangeCurrentTab:s[1]||(s[1]=a=>o.currentTab="add")}))])]),e("div",Dl,[o.currentTab=="add"?(m(),ao(n,{key:0,onChangeCurrentTab:s[2]||(s[2]=a=>o.currentTab="remove")})):(m(),ao(C,{key:1,onChangeCurrentTab:s[3]||(s[3]=a=>o.currentTab="add")})),z(A),z(f),z(t)])])}const di=No(ql,[["render",Ul],["__scopeId","data-v-00d0740c"]]);export{di as default};
