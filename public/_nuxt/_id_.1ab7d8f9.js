import{_ as Ve}from"./new-position-title.7702eab0.js";import{_ as me}from"./token-warning.b3eabf8c.js";import{_ as we}from"./auto-pool-apy-tips.0fc34286.js";import{u as zo,a as I,g as ie,c as Ho,f as Ee,d as ne,s as G,p as $e,b as Ie,T as To,e as We,h as Xe,i as je}from"./pool.91033fd9.js";import{u as ce,a as be,b as no}from"./sha256.78d1c217.js";import{u as Yo,a as Ce}from"./autoPool.06ed9c8b.js";import{i as se}from"./import-icon.de3e6c66.js";import{a as Do,l as y,m as Jo,r as w,q as Io,e as No,s as _e,o as m,f as P,h as e,t as Lo,i as z,v as d,j as de,x,u as M,p as Uo,k as Fo,y as te,M as Ge,z as ae,c as uo,w as Oo,A as Ae,C as he,D as ke,E as Se,F as fe,B as Pe,G as pe,b as He,H as ze,I as Ye,J as Je}from"./entry.eee48297.js";import"./decimal.633e31ee.js";import{D as i}from"./decimal.0e8aa3f1.js";import{_ as Te}from"./assets-card.257ad1d4.js";import{_ as Re}from"./coin-lock.0e0cf5ab.js";import{_ as qe,a as Be}from"./auto-pool-remove-modal.9965f833.js";import{afterCurrentPrice as ve}from"./data.08042b34.js";import{V as ye}from"./index.9914e763.js";/* empty css              *//* empty css              */import"./back.064cda53.js";import"./swap-setting.82c725ff.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.ae285032.js";const Ze=Do({components:{AutoPoolApyTips:we},setup(){const o=ce(),s=y(()=>o),X=zo(),W=y(()=>X),D=Yo(),T=y(()=>D),_=y(()=>s.value.theme),c=Jo(),g=w();Io(()=>[T.value.positionInfoObj,c.params.id],([a,u])=>{a&&!Ho(a)&&u&&(g.value=a[u],console.log(g.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const h=y(()=>{var a;return(a=g.value)==null?void 0:a.needReverse}),t=a=>{var u;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((u=W.value.tokensObj[a==null?void 0:a.address])==null?void 0:u.logo_url)||(_.value==="default"?se("/image/coins/unknown.png"):se("/image/coins/sui-unknown.png"))},n=y(()=>{var a,u;return console.log((a=g==null?void 0:g.value)==null?void 0:a.poolUSD,"##positionInfo?.value?.poolUSD"),(u=g==null?void 0:g.value)==null?void 0:u.poolUSD}),A=y(()=>{var a,u;return T.value.apyObj&&((u=T.value.apyObj[(a=g.value)==null?void 0:a.id])==null?void 0:u.apr)||"--"});return{positionInfo:g,needReverse:h,getCoinIcon:t,tvl:n,apy:A,addCommom:I,getExplorerUrl:ie}}});const Co=o=>(Uo("data-v-a9af5c11"),o=o(),Fo(),o),Ke={class:"auto-pool-v2-info"},Qe={class:"pool-info"},xe={class:"left"},on={class:"coin-a"},en={alt:""},nn={class:"coin-b"},tn={alt:""},sn={class:"position-name"},ln={key:0,class:"pool-fee"},an=Co(()=>e("span",null,"Fee tier",-1)),un={class:"vault-address"},rn=["href"],dn=Co(()=>e("span",null,"Vault Address",-1)),vn=Co(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),mn=[dn,vn],cn={class:"pool-address"},pn=["href"],fn=Co(()=>e("span",null,"Pool Address",-1)),yn=Co(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),bn=[fn,yn],_n={class:"apy-and-tvl"},hn={class:"apy"},kn=Co(()=>e("div",{class:"apy-title"},"APY",-1)),gn={class:"apy-text"},$n={class:"tvl"},wn=Co(()=>e("div",{class:"tvl-title"},"TVL",-1)),In={class:"tvl-text"},Cn={class:"pool-info h5-pool-info"},An={class:"left"},Sn={class:"coin-a"},Pn={alt:""},Tn={class:"coin-b"},Rn={alt:""},qn={class:"position-name"},Bn={key:0,class:"pool-fee"},Nn=Co(()=>e("span",null,"Fee tier",-1)),Mn={class:"left"},Ln={class:"vault-address"},On=["href"],Dn=Co(()=>e("span",null,"Vault Address",-1)),Un=Co(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),Fn=[Dn,Un],Vn={class:"pool-address"},En=["href"],Wn=Co(()=>e("span",null,"Pool Address",-1)),Xn=Co(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),jn=[Wn,Xn],Gn={class:"apy-and-tvl"},Hn={class:"apy"},zn=Co(()=>e("div",{class:"apy-title"},"APY",-1)),Yn={class:"apy-text"},Jn={class:"tvl"},Zn=Co(()=>e("div",{class:"tvl-title"},"TVL",-1)),Kn={class:"tvl-text"};function Qn(o,s,X,W,D,T){var h,t,n,A,a,u,q,r,v,R,L,O,J,f,p,$,U,E,to,F,k,so,po,fo,lo,Z,io,ao,C,K,qo,wo,Zo,Vo,Ro,Bo,Eo,Wo,Ko,Qo,yo,ro,xo,Xo,jo,oe,b,B;const _=me,c=we,g=_e("image");return m(),P("div",Ke,[e("div",Qe,[e("div",xe,[e("div",on,[Lo(e("img",en,null,512),[[g,o.needReverse?o.getCoinIcon((t=o.positionInfo)==null?void 0:t.token_b):o.getCoinIcon((h=o.positionInfo)==null?void 0:h.token_a)]]),z(_,{address:o.needReverse?(u=(a=o.positionInfo)==null?void 0:a.token_b)==null?void 0:u.address:(A=(n=o.positionInfo)==null?void 0:n.token_a)==null?void 0:A.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",nn,[Lo(e("img",tn,null,512),[[g,o.needReverse?o.getCoinIcon((r=o.positionInfo)==null?void 0:r.token_a):o.getCoinIcon((q=o.positionInfo)==null?void 0:q.token_b)]]),z(_,{address:o.needReverse?(O=(L=o.positionInfo)==null?void 0:L.token_a)==null?void 0:O.address:(R=(v=o.positionInfo)==null?void 0:v.token_b)==null?void 0:R.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",sn,d(o.needReverse?(f=(J=o.positionInfo)==null?void 0:J.token_b)==null?void 0:f.symbol:($=(p=o.positionInfo)==null?void 0:p.token_a)==null?void 0:$.symbol)+" - "+d(o.needReverse?(E=(U=o.positionInfo)==null?void 0:U.token_a)==null?void 0:E.symbol:(F=(to=o.positionInfo)==null?void 0:to.token_b)==null?void 0:F.symbol),1),(k=o.positionInfo)!=null&&k.fee?(m(),P("div",ln,[an,de(" "+d(((so=o.positionInfo)==null?void 0:so.fee)*100)+"% ",1)])):x("",!0),e("div",un,[e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:M(ie))("poolAddress",(po=o.positionInfo)==null?void 0:po.id),target:"_blank"},mn,8,rn)]),e("div",cn,[e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:M(ie))("poolAddress",(fo=o.positionInfo)==null?void 0:fo.address),target:"_blank"},bn,8,pn)])]),e("div",_n,[e("div",hn,[kn,e("div",gn,[de(d(o.apy)+" ",1),z(c)])]),e("div",$n,[wn,e("div",In,"$"+d(("addCommom"in o?o.addCommom:M(I))(o.tvl,2)),1)])])]),e("div",Cn,[e("div",An,[e("div",Sn,[Lo(e("img",Pn,null,512),[[g,o.needReverse?o.getCoinIcon((Z=o.positionInfo)==null?void 0:Z.token_b):o.getCoinIcon((lo=o.positionInfo)==null?void 0:lo.token_a)]]),z(_,{address:o.needReverse?(K=(C=o.positionInfo)==null?void 0:C.token_b)==null?void 0:K.address:(ao=(io=o.positionInfo)==null?void 0:io.token_a)==null?void 0:ao.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Tn,[Lo(e("img",Rn,null,512),[[g,o.needReverse?o.getCoinIcon((wo=o.positionInfo)==null?void 0:wo.token_a):o.getCoinIcon((qo=o.positionInfo)==null?void 0:qo.token_b)]]),z(_,{address:o.needReverse?(Bo=(Ro=o.positionInfo)==null?void 0:Ro.token_a)==null?void 0:Bo.address:(Vo=(Zo=o.positionInfo)==null?void 0:Zo.token_b)==null?void 0:Vo.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",qn,d(o.needReverse?(Wo=(Eo=o.positionInfo)==null?void 0:Eo.token_b)==null?void 0:Wo.symbol:(Qo=(Ko=o.positionInfo)==null?void 0:Ko.token_a)==null?void 0:Qo.symbol)+" - "+d(o.needReverse?(ro=(yo=o.positionInfo)==null?void 0:yo.token_a)==null?void 0:ro.symbol:(Xo=(xo=o.positionInfo)==null?void 0:xo.token_b)==null?void 0:Xo.symbol),1),(jo=o.positionInfo)!=null&&jo.fee?(m(),P("div",Bn,[Nn,de(" "+d(((oe=o.positionInfo)==null?void 0:oe.fee)*100)+"% ",1)])):x("",!0)]),e("div",Mn,[e("div",Ln,[e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:M(ie))("poolAddress",(b=o.positionInfo)==null?void 0:b.id),target:"_blank"},Fn,8,On)]),e("div",Vn,[e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:M(ie))("poolAddress",(B=o.positionInfo)==null?void 0:B.address),target:"_blank"},jn,8,En)])]),e("div",Gn,[e("div",Hn,[zn,e("div",Yn,[de(d(o.apy)+" ",1),z(c)])]),e("div",Jn,[Zn,e("div",Kn,"$"+d(("addCommom"in o?o.addCommom:M(I))(o.tvl,2)),1)])])])])}const Ne=No(Ze,[["render",Qn],["__scopeId","data-v-a9af5c11"]]),xn=Do({setup(){const o=w(!0),s=zo(),X=y(()=>s),W=Yo(),D=y(()=>W),T=Jo(),_=w();Io(()=>[D.value.positionInfoObj,T.params.id],([t,n])=>{t&&!Ho(t)&&n&&(_.value=t[n],console.log(_.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const c=y(()=>{var t;return(t=_.value)==null?void 0:t.needReverse}),g=t=>{var n;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((n=X.value.tokensObj[t==null?void 0:t.address])==null?void 0:n.logo_url)||se("/image/coins/sui-unknown.png")},h=y(()=>{var u,q,r;const t=(u=_==null?void 0:_.value)==null?void 0:u.price,n=(q=_==null?void 0:_.value)==null?void 0:q.minPrice,A=(r=_==null?void 0:_.value)==null?void 0:r.maxPrice;let a;if(t>=n&&t<=A){const v=new i(n).add(new i(A)).div(2).toNumber();a=t>v?50+new i(t).sub(v).div(v).toNumber():50-new i(t).sub(v).div(v).toNumber()}else t<n?(a=new i(t).sub(new i(n)).mul(100).toNumber()+15,console.log(a,"##result")):t>A&&(a=new i(t).sub(new i(A)).div(new i(A)).mul(100).toNumber()+70+15);return Number(Ee(a,0))});return{direct:o,positionInfo:_,needReverse:c,getCoinIcon:g,decimalUi:ne,addCommom:I,sFixD:G,moveRatio:h}}}),ot=""+globalThis.__publicAssetsURL("sui-image/icon_currentprice@2x.png");const Mo=o=>(Uo("data-v-4a250835"),o=o(),Fo(),o),et={class:"v2-position-range"},nt={class:"position-range-top"},tt=Mo(()=>e("div",null,"Position Range",-1)),st={class:"base-coin"},lt={key:0},it={alt:""},at={key:1},ut={alt:""},rt={key:2},dt={key:3},vt=Mo(()=>e("p",null,"Base coin",-1)),mt={class:"coin-rate"},ct=Mo(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),pt=Mo(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ft=[ct,pt],yt={class:"position-range-bottom"},bt=Mo(()=>e("div",{class:"current-price-title"},"Current Price",-1)),_t={key:0,class:"current-price-text"},ht={key:1,class:"current-price-text"},kt=Mo(()=>e("div",{class:"current-price-title"},"Current Price",-1)),gt={key:0,class:"current-price-text"},$t={key:1,class:"current-price-text"},wt={class:"price-range"},It=Mo(()=>e("div",{class:"price-range-bg"},[e("div",{class:"price-range-border"})],-1)),Ct={class:"min-price"},At=Mo(()=>e("div",null,"Min Price",-1)),St={key:0},Pt={key:1},Tt={class:"max-price"},Rt=Mo(()=>e("div",null,"Max Price",-1)),qt={key:0},Bt={key:1};function Nt(o,s,X,W,D,T){var g,h,t,n,A,a,u,q,r,v,R,L,O,J,f,p,$,U,E,to,F,k,so,po,fo,lo,Z,io,ao,C,K,qo;const _=me,c=_e("image");return m(),P("div",et,[e("div",nt,[tt,e("div",st,[o.needReverse?(m(),P("div",at,[Lo(e("img",ut,null,512),[[c,o.direct?o.getCoinIcon((q=o.positionInfo)==null?void 0:q.token_b):o.getCoinIcon((u=o.positionInfo)==null?void 0:u.token_a)]]),z(_,{address:o.direct?(L=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:L.address:(v=(r=o.positionInfo)==null?void 0:r.token_a)==null?void 0:v.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(m(),P("div",lt,[Lo(e("img",it,null,512),[[c,o.direct?o.getCoinIcon((g=o.positionInfo)==null?void 0:g.token_a):o.getCoinIcon((h=o.positionInfo)==null?void 0:h.token_b)]]),z(_,{address:o.direct?(n=(t=o.positionInfo)==null?void 0:t.token_a)==null?void 0:n.address:(a=(A=o.positionInfo)==null?void 0:A.token_b)==null?void 0:a.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),o.needReverse?(m(),P("span",dt,d(o.direct?(U=($=o.positionInfo)==null?void 0:$.token_b)==null?void 0:U.symbol:(to=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:to.symbol),1)):(m(),P("span",rt,d(o.direct?(J=(O=o.positionInfo)==null?void 0:O.token_a)==null?void 0:J.symbol:(p=(f=o.positionInfo)==null?void 0:f.token_b)==null?void 0:p.symbol),1)),vt,e("div",mt,[e("div",{onClick:s[0]||(s[0]=wo=>o.direct=!o.direct)},ft)])])]),e("div",yt,[e("div",{class:"current-price",style:te({left:`${o.moveRatio>40&&o.moveRatio-60?o.moveRatio:o.moveRatio>92?92:o.moveRatio<=13?10:o.moveRatio-13}%`})},[bt,(o.needReverse?!o.direct:o.direct)?(m(),P("div",_t,d(("addCommom"in o?o.addCommom:M(I))(("decimalUi"in o?o.decimalUi:M(ne))((F=o.positionInfo)==null?void 0:F.price,6))),1)):(m(),P("div",ht,d(("addCommom"in o?o.addCommom:M(I))(("decimalUi"in o?o.decimalUi:M(ne))(1/((k=o.positionInfo)==null?void 0:k.price),6))),1))],4),e("div",{class:"current-price h5-current-price",style:te({left:`${o.moveRatio>40&&o.moveRatio-60?o.moveRatio:o.moveRatio>92?92:o.moveRatio<=23?0:o.moveRatio-13}%`})},[kt,(o.needReverse?!o.direct:o.direct)?(m(),P("div",gt,d(("addCommom"in o?o.addCommom:M(I))(("decimalUi"in o?o.decimalUi:M(ne))((so=o.positionInfo)==null?void 0:so.price,6))),1)):(m(),P("div",$t,d(("addCommom"in o?o.addCommom:M(I))(("decimalUi"in o?o.decimalUi:M(ne))(1/((po=o.positionInfo)==null?void 0:po.price),6))),1))],4),e("div",wt,[It,e("img",{style:te({left:`${o.moveRatio}%`}),src:ot,alt:""},null,4),e("div",Ct,[At,o.direct?(m(),P("div",St,d(((fo=o.positionInfo)==null?void 0:fo.minPrice)&&("sFixD"in o?o.sFixD:M(G))((lo=o.positionInfo)==null?void 0:lo.minPrice,6)),1)):(m(),P("div",Pt,d(((Z=o.positionInfo)==null?void 0:Z.maxPrice)&&("sFixD"in o?o.sFixD:M(G))(1/((io=o.positionInfo)==null?void 0:io.maxPrice),6)),1))]),e("div",Tt,[Rt,o.direct?(m(),P("div",qt,d(((ao=o.positionInfo)==null?void 0:ao.maxPrice)&&("sFixD"in o?o.sFixD:M(G))((C=o.positionInfo)==null?void 0:C.maxPrice,6)),1)):(m(),P("div",Bt,d(((K=o.positionInfo)==null?void 0:K.minPrice)&&("sFixD"in o?o.sFixD:M(G))(1/((qo=o.positionInfo)==null?void 0:qo.minPrice),6)),1))])])])])}const Me=No(xn,[["render",Nt],["__scopeId","data-v-4a250835"]]),Mt=Do({components:{Modal:Ge},props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const s=y(()=>{var W,D;const X=G(((W=o.positionInfo)==null?void 0:W.poolUSD)/((D=o.positionInfo)==null?void 0:D.quoteUSD)*100,0);return console.log(X,"Pool Capacity Ratio"),Number(X)});return{sFixD:G,addCommom:I,ratio:s}}});const ge=o=>(Uo("data-v-f08bb90d"),o=o(),Fo(),o),Lt=ge(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ot={class:"deposit-slider"},Dt={class:"info-block"},Ut=ge(()=>e("div",{class:"leabl"},"Current Deposit：",-1)),Ft={class:"text"},Vt={class:"info-block"},Et=ge(()=>e("div",{class:"leabl"},"Max Capacity：",-1)),Wt={class:"text"};function Xt(o,s,X,W,D,T){const _=ae("Modal");return m(),uo(_,{width:"440px",visible:!0,footer:null,title:"Pool Capacity",onCancel:s[0]||(s[0]=c=>o.$emit("onClose"))},{closeIcon:Oo(()=>[Lt]),default:Oo(()=>{var c,g;return[e("div",Ot,[e("div",{class:"current-deposit",style:te({width:`${o.ratio>100?100:o.ratio}%`})},null,4)]),e("div",Dt,[Ut,e("div",Ft,"$"+d(("addCommom"in o?o.addCommom:M(I))(("sFixD"in o?o.sFixD:M(G))((c=o.positionInfo)==null?void 0:c.poolUSD,4))),1)]),e("div",Vt,[Et,e("div",Wt,"$"+d(("addCommom"in o?o.addCommom:M(I))(("sFixD"in o?o.sFixD:M(G))((g=o.positionInfo)==null?void 0:g.quoteUSD,4))),1)])]}),_:1})}const Le=No(Mt,[["render",Xt],["__scopeId","data-v-f08bb90d"]]),jt=Do({components:{AutoPoolV2PoolCapacity:Le},setup(){const o=zo(),s=y(()=>o),X=Yo(),W=y(()=>X),D=Jo(),T=w();Io(()=>[W.value.positionInfoObj,D.params.id],([h,t])=>{console.log(h,"##positionInfoObj"),h&&!Ho(h)&&t&&(T.value=h[t],console.log(T.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const _=y(()=>{var h;return(h=T.value)==null?void 0:h.needReverse}),c=h=>{var t;return console.log(h,"info##"),(h==null?void 0:h.logoURI)||(h==null?void 0:h.logo_url)||((t=s.value.tokensObj[h==null?void 0:h.address])==null?void 0:t.logo_url)||se("/image/coins/sui-unknown.png")},g=w(!1);return{needReverse:_,positionInfo:T,getCoinIcon:c,addCommom:I,isShowModal:g}}});const Gt=o=>(Uo("data-v-c6233d3e"),o=o(),Fo(),o),Ht={class:"pool-composition"},zt={class:"pool-composition-top"},Yt=Gt(()=>e("span",null,"Pool Composition",-1)),Jt={class:"pool-composition-bottom"},Zt={class:"token-ratio"},Kt={class:"before-coin"},Qt={alt:""},xt={class:"after-coin"},os={alt:""},es={class:"token-num"},ns={class:"num-box"},ts={class:"num-box"};function ss(o,s,X,W,D,T){var h,t,n,A,a,u,q,r,v,R,L,O,J,f,p,$,U,E,to,F,k,so,po,fo,lo,Z,io,ao;const _=me,c=Le,g=_e("image");return m(),P("div",Ht,[e("div",zt,[Yt,e("div",{class:"pool-capacity",onClick:s[0]||(s[0]=C=>o.isShowModal=!0)},"Pool Capacity")]),e("div",Jt,[e("div",Zt,[e("div",Kt,[e("div",null,[z(_,{address:o.needReverse?(A=(n=o.positionInfo)==null?void 0:n.token_b)==null?void 0:A.address:(t=(h=o.positionInfo)==null?void 0:h.token_a)==null?void 0:t.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),Lo(e("img",Qt,null,512),[[g,o.needReverse?o.getCoinIcon((u=o.positionInfo)==null?void 0:u.token_b):o.getCoinIcon((a=o.positionInfo)==null?void 0:a.token_a)]])]),e("span",null,d((q=o.positionInfo)==null?void 0:q.poolCoinARatio)+"%",1)]),e("div",xt,[e("span",null,d((r=o.positionInfo)==null?void 0:r.poolCoinBRatio)+"%",1),e("div",null,[Lo(e("img",os,null,512),[[g,o.needReverse?o.getCoinIcon((R=o.positionInfo)==null?void 0:R.token_a):o.getCoinIcon((v=o.positionInfo)==null?void 0:v.token_b)]]),z(_,{address:o.needReverse?(f=(J=o.positionInfo)==null?void 0:J.token_a)==null?void 0:f.address:(O=(L=o.positionInfo)==null?void 0:L.token_b)==null?void 0:O.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),e("div",es,[e("div",{class:"token-a-bg",style:te({width:`${(p=o.positionInfo)==null?void 0:p.poolCoinARatio}%`})},null,4),e("div",{class:"token-b-bg",style:te({width:`${($=o.positionInfo)==null?void 0:$.poolCoinBRatio}%`})},null,4),e("div",ns,[e("div",null,d(("addCommom"in o?o.addCommom:M(I))((U=o.positionInfo)==null?void 0:U.poolCoinANum))+" "+d(o.needReverse?(k=(F=o.positionInfo)==null?void 0:F.token_b)==null?void 0:k.symbol:(to=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:to.symbol),1),e("div",null,"$"+d(("addCommom"in o?o.addCommom:M(I))((so=o.positionInfo)==null?void 0:so.poolCoinAUSD)),1)]),e("div",ts,[e("div",null,d(("addCommom"in o?o.addCommom:M(I))((po=o.positionInfo)==null?void 0:po.poolCoinBNum))+" "+d(o.needReverse?(io=(Z=o.positionInfo)==null?void 0:Z.token_a)==null?void 0:io.symbol:(lo=(fo=o.positionInfo)==null?void 0:fo.token_b)==null?void 0:lo.symbol),1),e("div",null,"$"+d(("addCommom"in o?o.addCommom:M(I))((ao=o.positionInfo)==null?void 0:ao.poolCoinBUSD)),1)])])]),o.isShowModal?(m(),uo(c,{key:0,"position-info":o.positionInfo,onOnClose:s[1]||(s[1]=C=>o.isShowModal=!1)},null,8,["position-info"])):x("",!0)])}const Oe=No(jt,[["render",ss],["__scopeId","data-v-c6233d3e"]]),ls=Do({setup(){const o=zo(),s=y(()=>o),X=Yo(),W=y(()=>X),D=Jo(),T=w();Io(()=>[W.value.positionInfoObj,D.params.id],([t,n])=>{console.log(t,"##positionInfoObj"),t&&!Ho(t)&&n&&(T.value=t[n],console.log(T.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const _=y(()=>{var t;return(t=T.value)==null?void 0:t.needReverse}),c=t=>{var n;return console.log(t,"info##"),(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((n=s.value.tokensObj[t==null?void 0:t.address])==null?void 0:n.logo_url)||se("/image/coins/sui-unknown.png")},g=be(),h=y(()=>g);return{needReverse:_,positionInfo:T,getCoinIcon:c,addCommom:I,wallet:h}}});const ue=o=>(Uo("data-v-c9de826f"),o=o(),Fo(),o),is={class:"my-liquidity"},as={class:"my-liquidity-top"},us=ue(()=>e("div",null,"My Liquidity",-1)),rs=ue(()=>e("p",null,"My share of pool",-1)),ds={class:"my-liquidity-bottom"},vs={class:"lp-token"},ms=ue(()=>e("div",null,[e("span",null,"LP Token Balance ")],-1)),cs={class:"lp-balance"},ps={class:"token-num-content"},fs={class:"token-num token-a-num"},ys={class:"logo"},bs=["src"],_s={class:"text"},hs={class:"lp-logo"},ks=["src"],gs=ue(()=>e("div",null,"Pooled Assets",-1)),$s={class:"token-num"},ws={class:"logo"},Is=["src"],Cs={class:"text"},As=ue(()=>e("div",{class:"token-num-content-bg"},null,-1));function Ss(o,s,X,W,D,T){var c,g,h,t,n,A,a,u,q,r,v,R,L,O,J,f,p,$,U,E,to,F,k,so,po,fo,lo,Z;const _=me;return m(),P("div",is,[e("div",as,[us,e("div",null,[rs,e("p",null,d(o.wallet.connected?(c=o.positionInfo)==null?void 0:c.myShare:"--")+"%",1)])]),e("div",ds,[e("div",vs,[ms,e("div",null,[e("span",cs,d(o.wallet.connected?("addCommom"in o?o.addCommom:M(I))((g=o.positionInfo)==null?void 0:g.myLiquidity):"--")+" LP",1),e("span",null,"$"+d(o.wallet.connected?("addCommom"in o?o.addCommom:M(I))((h=o.positionInfo)==null?void 0:h.myLiquidityUSD):"--"),1)])]),e("div",ps,[e("div",fs,[e("div",ys,[e("img",{src:o.needReverse?o.getCoinIcon((n=o.positionInfo)==null?void 0:n.token_b):o.getCoinIcon((t=o.positionInfo)==null?void 0:t.token_a),alt:""},null,8,bs),z(_,{address:o.needReverse?(q=(u=o.positionInfo)==null?void 0:u.token_b)==null?void 0:q.address:(a=(A=o.positionInfo)==null?void 0:A.token_a)==null?void 0:a.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),e("div",_s,[e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:M(I))((r=o.positionInfo)==null?void 0:r.amountA):"--")+" "+d(o.needReverse?(O=(L=o.positionInfo)==null?void 0:L.token_b)==null?void 0:O.symbol:(R=(v=o.positionInfo)==null?void 0:v.token_a)==null?void 0:R.symbol),1),e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:M(I))((J=o.positionInfo)==null?void 0:J.myAmountAUSD):"--"),1)])]),e("div",hs,[e("img",{src:o.getCoinIcon((f=o.positionInfo)==null?void 0:f.lpInfo),alt:""},null,8,ks),gs]),e("div",$s,[e("div",ws,[e("img",{src:o.needReverse?o.getCoinIcon(($=o.positionInfo)==null?void 0:$.token_a):o.getCoinIcon((p=o.positionInfo)==null?void 0:p.token_b),alt:""},null,8,Is),z(_,{address:o.needReverse?(F=(to=o.positionInfo)==null?void 0:to.token_a)==null?void 0:F.address:(E=(U=o.positionInfo)==null?void 0:U.token_b)==null?void 0:E.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),e("div",Cs,[e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:M(I))((k=o.positionInfo)==null?void 0:k.amountB):"--")+" "+d(o.needReverse?(lo=(fo=o.positionInfo)==null?void 0:fo.token_a)==null?void 0:lo.symbol:(po=(so=o.positionInfo)==null?void 0:so.token_b)==null?void 0:po.symbol),1),e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:M(I))((Z=o.positionInfo)==null?void 0:Z.myAmountBUSD):"--"),1)])]),As])])])}const De=No(ls,[["render",Ss],["__scopeId","data-v-c9de826f"]]),Ps=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const Ts={},Ue=o=>(Uo("data-v-fcbc716b"),o=o(),Fo(),o),Rs={class:"status"},qs=Ue(()=>e("img",{src:Ps,alt:""},null,-1)),Bs=Ue(()=>e("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),Ns=[qs,Bs];function Ms(o,s){return m(),P("div",Rs,Ns)}const Fe=No(Ts,[["render",Ms],["__scopeId","data-v-fcbc716b"]]),Ls=Do({components:{AutoPoolAddModal:qe,AutoPoolV2PoolStatus:Fe},setup(){const o=be(),s=w(!1),X=ce(),W=y(()=>X),D=y(()=>W.value.chainName),T=y(()=>o),_=Yo(),c=y(()=>_),g=zo(),h=y(()=>g),t=w(),n=Jo(),A=w(!1);Io(()=>[c.value.positionInfoObj,n.params.id],([b,B])=>{b&&!Ho(b)&&B&&(t.value=b[B],console.log(t.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const a=y(()=>{var b,B;return console.log((b=t.value)==null?void 0:b.needReverse,"##positionInfo.value?.needReverse"),(B=t.value)==null?void 0:B.needReverse}),u=w(),q=w(),r=w(),v=w(),R=w(!0),L=y(()=>T.value.assets&&u.value&&T.value.assets[u.value.address]?$e(T.value.assets[u.value.address].balance,u.value.decimals):0),O=y(()=>T.value.assets&&q.value&&T.value.assets[q.value.address]?$e(T.value.assets[q.value.address].balance,q.value.decimals):0),J=b=>{b==="fromCoin"?(R.value=!0,r.value=L.value>0?u.value.symbol=="SUI"?new i(Number(L.value)).sub(new i(.05)).lt(new i(0))?"0":new i(Number(L.value)).sub(new i(.05)).toString():String(L.value):""):(R.value=!1,v.value=O.value>0?q.value.symbol=="SUI"?new i(Number(O.value)).sub(new i(.05)).lt(new i(0))?"0":new i(Number(O.value)).sub(new i(.05)).toString():String(O.value):"")},f=b=>{b==="fromCoin"?(R.value=!0,r.value=L.value>0?G(new i(Number(L.value)).div(2).toString(),u.value.decimals).toString():""):(R.value=!1,v.value=O.value>0?G(new i(Number(O.value)).div(2).toString(),q.value.decimals).toString():"")},p=y(()=>D.value?Ie(D.value):{}),$=y(()=>W.value.slippage),U=w("--"),E=w("--"),to=b=>{const B=new i(t.value.autoPoolPositionInfo.liquidity),eo=new i(b.toString());if(B.toNumber()>0&&eo.toNumber()>0){const H=eo.add(B);console.log("totalLiquidity:",eo.div(H).mul(100).toString());const Ao=eo.div(H).mul(100).toNumber(),Q=je(Ao),bo=Q==-1?2:Q+2,vo=G(eo.div(H).mul(100).toNumber(),bo);console.log(t.value.decimals,"##positionInfo.value.decimal");const _o=new i(1).div(new i(Math.pow(10,t.value.lpInfo.decimals))).toString();console.log(vo,_o,"###288"),Number(vo)<Number(_o)?U.value=`<${_o}`:U.value=vo}else eo.toNumber()>0&&B.toNumber()<=0?U.value="100":U.value="--"},F=b=>{const B=new i(b.toString()),eo=new i($.value).div(100),H=B.mul(eo),Ao=B.sub(H),Q=ye.get_lp_amount_by_liquidity({liquidity:t.value.liquidity,total_supply:t.value.total_supply},Ao),bo=new i(Math.pow(10,t.value.lpInfo.decimals)),vo=new i(Q).div(bo).toString();E.value=vo},k=w(!1),so=w(!1),po=w(""),fo=w(),lo=async()=>{if(!t.value)return;const b=t.value.autoPoolPositionInfo.tick_lower_index,B=t.value.autoPoolPositionInfo.tick_upper_index,eo=To.sqrtPriceX64ToTickIndex(new no(t.value.current_sqrt_price));let H=To.tickIndexToSqrtPriceX64(b),Ao=To.tickIndexToSqrtPriceX64(B);eo<b&&(a.value?k.value=!0:so.value=!0),eo>B&&(a.value?so.value=!0:k.value=!0);let Q;if(console.log(r.value||v.value,"#fromCoinAmount.value || toCoinAmount.value"),r.value||v.value){R.value?Q=new i(r.value).mul(Math.pow(10,u.value.decimals)).toString():Q=new i(v.value).mul(Math.pow(10,q.value.decimals)).toString();let bo,vo=R.value;if(console.log("执行##"),yo.value||ro.value){console.log(a.value?R.value:!R.value,"#needReverse.value?fixedFromCoin.value:!fixedFromCoin.value");const N=await Ko.calculateDepositSwapAmount({lowerTick:b,upperTick:B,curSqrtPrice:new no(t.value.current_sqrt_price),fix_amount_a:vo,input_amount:Q,coinTypeA:t.value.autoPoolPositionInfo.coin_type_a,coinTypeB:t.value.autoPoolPositionInfo.coin_type_b,clmm_pool:t.value.address,slippage:Number($.value)/100});if(console.log(N,"###swapResult"),N){A.value=N.is_exceed,bo=new no(N.afterSqrtPrice),Q=new no(N.swapOutAmount),fo.value={swap_amount:N.swapInAmount,a2b:vo},vo=!vo;const Y=t.value.token_a.decimals,V=t.value.token_b.decimals;ve.value=To.sqrtPriceX64ToPrice(N.afterSqrtPrice,Y,V).toString(),console.log(ve.value,"##afterCurrentPrice.value");const mo=new i(N.swapInAmount).div(new i(Math.pow(10,Y))).toString(),ho=new i(N.swapOutAmount).div(new i(Math.pow(10,V))).toString(),co=a.value?t.value.token_b.symbol:t.value.token_a.symbol,j=a.value?t.value.token_a.symbol:t.value.token_b.symbol;po.value=`To deposit ${I(yo.value?r.value:v.value)} ${yo.value?co:j},
          ${I(mo)} ${yo.value?co:j}  will be traded for ${I(ho)} ${yo.value?j:co} added to the pool.`}else bo=t.value.current_sqrt_price,Q=new no(Q),ve.value=""}else A.value=!1,bo=t.value.current_sqrt_price,Q=new no(Q),ve.value="",po.value="";console.log(fo,"##swapParams");let _o,l,S;if(eo>=b&&eo<=B){const N=p.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:u.value,tokenB:q.value,lowerTick:b,upperTick:B,coinAmount:Q,iscoinA:vo,roundUp:!0,slippage:Number($.value)/100,curSqrtPrice:new no(bo)});_o=N.liquidityAmount,l=N.tokenMaxA,S=N.tokenMaxB,!yo.value&&!ro.value&&(R.value?v.value=Number(S)>0?S:"":r.value=Number(l)>0?l:"")}else eo<B?_o={liquidityAmount:We(H,Ao,Q),tokenMaxA:0,tokenMaxB:v.value}.liquidityAmount:_o={liquidityAmount:Xe(H,Ao,Q),tokenMaxA:r.value,tokenMaxB:0}.liquidityAmount;console.log(_o.toString(),"liquidityAmount###"),to(_o),F(_o)}};Io(()=>t.value,b=>{b&&!Ho(b)&&(u.value=b==null?void 0:b.token_a,q.value=b==null?void 0:b.token_b,k.value=!1,so.value=!1,lo())},{immediate:!0});const Z=y(()=>h.value.RATES),io=y(()=>{var b,B,eo,H,Ao,Q,bo,vo,_o,l;if((B=Z.value[(b=u.value)==null?void 0:b.address])!=null&&B.price&&((H=Z.value[(eo=q.value)==null?void 0:eo.address])!=null&&H.price)){console.log((Q=Z.value[(Ao=u.value)==null?void 0:Ao.address])==null?void 0:Q.price,"RATES.value[fromCoin.value?.address]?.price");const S=new i(r.value||0).mul(new i((vo=Z.value[(bo=u.value)==null?void 0:bo.address])==null?void 0:vo.price)),N=new i(v.value||0).mul(new i((l=Z.value[(_o=q.value)==null?void 0:_o.address])==null?void 0:l.price));return ne(S.add(N).toString(),2)}else return"--"});Io(()=>r.value,(b,B)=>{b?lo():(U.value="--",v.value="",E.value="--")},{immediate:!0}),Io(()=>v.value,(b,B)=>{b?lo():(r.value="",U.value="--",E.value="--")},{immediate:!0});const{t:ao,locale:C}=Ae(),K=y(()=>{const b=Number(r.value)>Number(L.value),B=Number(v.value)>Number(O.value);return!r.value&&!v.value?ao("button.enterAmount"):b?ao("button.insufficientBalance",{name:u.value.symbol}):B?ao("button.insufficientBalance",{name:q.value.symbol}):A.value?ao("button.insufficientLiquidity"):Number(io.value)>Number(t.value.quoteUSD)?"Exceeds maximum capacity":"Add Liquidity"}),qo=y(()=>{const b=Number(r.value)>Number(L.value),B=Number(v.value)>Number(O.value);return!!(!r.value&&!v.value||b||B||r.value<=0&&v.value<=0||A.value||Xo.value!=="STATUS_RUNNING"||(console.log(io.value,t.value.quoteUSD,"positionInfo.value.quoteUSD#"),Number(io.value)>Number(t.value.quoteUSD)))}),wo=w(!0),{setIsShowSuccess:Zo,setIsShowRejected:Vo,setIsShowWaiting:Ro,setTransactionDesc:Bo,setTransactionTxid:Eo,setPositiomNum:Wo}=X,Ko=Ce("Sui"),Qo=async()=>{var _o,l;s.value=!1,wo.value=!0,Eo("");const b=`${I(r.value)} ${(_o=u.value)==null?void 0:_o.symbol}`,B=`${I(v.value)} ${(l=q.value)==null?void 0:l.symbol}`;Bo(`Deposit ${r.value>0?b:""} ${v.value>0&&r.value>0?"and":""} ${v.value>0?B:""}`),Ro(!0);const eo=R.value,H=t.value.autoPoolPositionInfo.tick_lower_index,Ao=t.value.autoPoolPositionInfo.tick_upper_index,Q=To.sqrtPriceX64ToTickIndex(new no(t.value.current_sqrt_price));let bo;R.value?bo=new i(r.value).mul(Math.pow(10,u.value.decimals)).toString():bo=new i(v.value).mul(Math.pow(10,q.value.decimals)).toString();const vo=t.value.rewarderInfo.map(S=>S.coinAddress);try{const S={lowerTick:H,upperTick:Ao,coinAmount:bo,fix_amount_a:eo,slippage:Number($.value)/100,curSqrtPrice:new no(t.value.current_sqrt_price),id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.pool,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coin_type_a,coinTypeB:t.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:vo,swapParams:fo.value,isOnlyA:yo.value,isOnlyB:ro.value,currentTickIndex:Q},N=await Ko.deposit(S);console.log(N,"===>payloadAdd11111");const Y=await T.value.currentWallet.signAndExecuteTransactionBlock(N);let V=p.value.handleTx(Y);if(console.log("toAdd###tx###",V),V&&V.hash){Eo(V.hash),Ro(!1),Zo(!0),console.log(t,"===>positionInfo");const mo={title:"Supplied",desc:`Deposit ${r.value>0?b:""} ${v.value>0&&r.value>0?"and":""} ${v.value>0?B:""}`,hash:V.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${r.value>0?b:""} ${v.value>0&&r.value>0?"and":""} ${v.value>0?B:""}`};D.value!=="Aptos"&&(mo.res=V.res),p.value.showTransitionPending(mo),await p.value.watchTransaction(mo)&&setTimeout(()=>{_.updatePositionItem(t.value.id),p.value.getAccount(T.value.address)},1e3),Wo()}else Ro(!1),Vo(!0);r.value="",v.value="",wo.value=!1}catch(S){r.value="",v.value="",console.log("addError###",S),wo.value=!1,Ro(!1),Vo(!0)}},yo=w(!1),ro=w(!1),xo=b=>{r.value="",v.value="",po.value="",b=="only-a"?(yo.value=!yo.value,ro.value=!1):(ro.value=!ro.value,yo.value=!1)},Xo=y(()=>c.value.currentAutoPoolStatus),jo=w(),oe=()=>{jo.value=window.setInterval(()=>{(r.value||v.value)&&lo()},2e4)};return he(()=>{oe()}),ke(()=>{window.clearInterval(jo.value)}),{currentAutoPoolStatus:Xo,wallet:T,positionInfo:t,isShowAddModal:s,needReverse:a,fromCoin:u,toCoin:q,fromCoinAmount:r,toCoinAmount:v,fromCoinBlance:L,toCoinBlance:O,fixedFromCoin:R,maxBtnSelect:J,halfBtnSelect:f,totalAmountUSD:io,addCommom:I,shareOfPool:U,minimumReceivedLP:E,addLiquidityBtnText:K,addLiquidityBtnDisabled:qo,toAdd:Qo,showToCoinLock:so,showFromCoinLock:k,isOnlyA:yo,isOnlyB:ro,onlyToken:xo,onlyText:po}}});const le=o=>(Uo("data-v-49ed963c"),o=o(),Fo(),o),Os={class:"auto-pool-add"},Ds={class:"auto-pool-add-content"},Us={class:"liquidity-action-tab"},Fs=le(()=>e("div",{class:"increase tab-active"},"Add",-1)),Vs={class:"only-token"},Es=le(()=>e("div",null,"Deposit Amounts",-1)),Ws={key:0},Xs={key:0},js={key:0,class:"card-item"},Gs={key:1,class:"card-item"},Hs=le(()=>e("span",null,"Pool Closed",-1)),zs={class:"add-info"},Ys={key:0,class:"only-text"},Js={class:"total-amount"},Zs=le(()=>e("span",null,"Total Amount",-1)),Ks={class:"total-amount"},Qs=le(()=>e("span",null,"Share of Pool",-1)),xs={class:"total-amount"},ol=le(()=>e("span",null,"Minimum Received LP",-1));function el(o,s,X,W,D,T){var n,A,a,u,q,r,v,R,L,O,J,f,p;const _=Te,c=Re,g=ae("AutoPoolV2PoolStatus"),h=Pe,t=qe;return m(),P("div",Os,[e("div",Ds,[e("div",Us,[Fs,e("div",{class:"remove",onClick:s[0]||(s[0]=Se($=>o.$emit("changeCurrentTab"),["stop"]))},"Remove")]),e("div",Vs,[Es,e("div",null,[e("div",{class:"only-a",onClick:s[1]||(s[1]=$=>o.onlyToken("only-a"))},[e("p",null,[o.isOnlyA?(m(),P("span",Ws)):x("",!0)]),e("span",null,d(o.needReverse?(u=(a=o.positionInfo)==null?void 0:a.token_b)==null?void 0:u.symbol:(A=(n=o.positionInfo)==null?void 0:n.token_a)==null?void 0:A.symbol)+" only",1)]),e("div",{class:"only-b",onClick:s[2]||(s[2]=$=>o.onlyToken("only-b"))},[e("p",null,[o.isOnlyB?(m(),P("span",Xs)):x("",!0)]),e("span",null,d(o.needReverse?(R=(v=o.positionInfo)==null?void 0:v.token_a)==null?void 0:R.symbol:(r=(q=o.positionInfo)==null?void 0:q.token_b)==null?void 0:r.symbol)+" only",1)])])]),e("div",{class:fe(o.needReverse?"card-container reverse":"card-container")},[(o.needReverse?!o.isOnlyA:!o.isOnlyB)?(m(),P("div",js,[z(_,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":s[3]||(s[3]=$=>o.fromCoinAmount=$),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[4]||(s[4]=$=>o.maxBtnSelect("fromCoin")),onOnHalf:s[5]||(s[5]=$=>o.halfBtnSelect("fromCoin")),onOnInput:s[6]||(s[6]=$=>{o.fromCoinAmount=$}),onOnFocus:s[7]||(s[7]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock&&!o.isOnlyA?(m(),uo(c,{key:0})):x("",!0)])):x("",!0),(o.needReverse?!o.isOnlyB:!o.isOnlyA)?(m(),P("div",Gs,[z(_,{modelValue:o.toCoinAmount,"onUpdate:modelValue":s[8]||(s[8]=$=>o.toCoinAmount=$),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[9]||(s[9]=$=>o.maxBtnSelect("toCoin")),onOnHalf:s[10]||(s[10]=$=>o.halfBtnSelect("toCoin")),onOnInput:s[11]||(s[11]=$=>{o.toCoinAmount=$}),onOnFocus:s[12]||(s[12]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock&&!o.isOnlyB?(m(),uo(c,{key:0})):x("",!0)])):x("",!0)],2)]),o.currentAutoPoolStatus=="STATUS_REBALANCING"?(m(),uo(g,{key:0})):x("",!0),(L=o.positionInfo)!=null&&L.is_pause?(m(),uo(h,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:Oo(()=>[Hs]),_:1})):o.wallet.connected?(m(),uo(h,{key:2,class:"big-btn liquidity-btn",disabled:o.addLiquidityBtnDisabled,onClick:s[13]||(s[13]=$=>o.isShowAddModal=!0)},{default:Oo(()=>[e("span",null,d(o.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(m(),uo(h,{key:3,class:"big-btn liquidity-btn",onClick:s[14]||(s[14]=$=>o.wallet.setIsShowWalletModal(!0))},{default:Oo(()=>[e("span",null,d(o.$t("button.connectWallet")),1)]),_:1})),e("div",zs,[o.onlyText?(m(),P("div",Ys,d(o.onlyText),1)):x("",!0),e("div",Js,[Zs,e("span",null,"$"+d(("addCommom"in o?o.addCommom:M(I))(o.totalAmountUSD)),1)]),e("div",Ks,[Qs,e("span",null,d(o.shareOfPool)+"%",1)]),e("div",xs,[ol,e("span",null,d(("addCommom"in o?o.addCommom:M(I))(o.minimumReceivedLP))+" "+d(o.needReverse?(O=o.toCoin)==null?void 0:O.symbol:(J=o.fromCoin)==null?void 0:J.symbol)+"-"+d(o.needReverse?(f=o.fromCoin)==null?void 0:f.symbol:(p=o.toCoin)==null?void 0:p.symbol),1)])]),o.isShowAddModal?(m(),uo(t,{key:4,"pool-info":o.positionInfo,"from-coin":o.needReverse?o.positionInfo.token_b:o.positionInfo.token_a,"to-coin":o.needReverse?o.positionInfo.token_a:o.positionInfo.token_b,"from-coin-amount":o.needReverse?o.toCoinAmount:o.fromCoinAmount,"to-coin-amount":o.needReverse?o.fromCoinAmount:o.toCoinAmount,"total-amount":o.totalAmountUSD,"share-of-pool":o.shareOfPool,"minimum-received-l-p":o.minimumReceivedLP,"is-only-a":o.isOnlyA,"is-only-b":o.isOnlyB,onOnClose:s[15]||(s[15]=$=>o.isShowAddModal=!1),onToAdd:o.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):x("",!0)])}const nl=No(Ls,[["render",el],["__scopeId","data-v-49ed963c"]]),tl=Do({components:{AutoPoolRemoveModal:Be,AutoPoolV2PoolStatus:Fe},setup(){const o=be(),s=y(()=>o),X=ce(),W=y(()=>X),D=y(()=>W.value.slippage),T=y(()=>W.value.chainName),_=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],c=w(25),g=Jo(),h=Yo(),t=y(()=>h),n=y(()=>(console.log(t.value.positionInfoObj[g.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),t.value.positionInfoObj[g.params.id])),A=y(()=>{var l;return(l=n.value)==null?void 0:l.needReverse}),a=w(),u=w(),q=w(!1),r=w(),v=y(()=>{var l;return(l=n.value)==null?void 0:l.myLiquidity}),R=w(!0),L=y(()=>T.value?Ie(T.value):{}),O=w(),J=Ce("Sui"),f=w(""),p=w(""),$=w("--"),U=w(!1),E=w(!1),to=w(),F=w(!0),k=w(),so=zo(),po=y(()=>so),fo=y(()=>po.value.RATES),lo=async()=>{if(R.value||!n.value)return;const l=n.value.autoPoolPositionInfo.tick_lower_index,S=n.value.autoPoolPositionInfo.tick_upper_index,N=To.sqrtPriceX64ToTickIndex(new no(n.value.current_sqrt_price));N<l&&(A.value?U.value=!0:E.value=!0),N>S&&(A.value?E.value=!0:U.value=!0);let Y;if(console.log(f.value||p.value,"#fromCoinAmount.value || toCoinAmount.value"),f.value||p.value){F.value?Y=new i(f.value).mul(Math.pow(10,a.value.decimals)).toString():Y=new i(p.value).mul(Math.pow(10,u.value.decimals)).toString();let V,mo=F.value;if(C.value||K.value){const oo=await J.calculateRemoveSwapAmount({lowerTick:l,upperTick:S,curSqrtPrice:new no(n.value.current_sqrt_price),fix_amount_a:mo,receiveAmount:Y,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(D.value)/100});if(console.log(oo,"###swapResult"),oo){O.value=oo.is_exceed,Y=new no(oo.swapOutAmount),V=n.value.current_sqrt_price,to.value={swap_amount:oo.swapInAmount,liquidity:oo.liquidity,a2b:!mo},mo=!mo;const ko=n.value.token_a.decimals,So=n.value.token_b.decimals,Po=new i(oo.swapInAmount).div(new i(Math.pow(10,ko))).toString(),ee=new i(oo.swapOutAmount).div(new i(Math.pow(10,So))).toString(),$o=A.value?n.value.token_b.symbol:n.value.token_a.symbol,go=A.value?n.value.token_a.symbol:n.value.token_b.symbol;k.value=f.value==H.value||p.value==H.value?`To withdraw ${I(C.value?f.value:p.value)} ${C.value?$o:go},
          ${I(C.value?n.value.amountB:n.value.amountA)} ${C.value?go:$o} 
           in the pool will be traded for ${Po} ${C.value?$o:go}`:`To withdraw ${I(C.value?f.value:p.value)} ${C.value?$o:go},
          ${I(Po)} ${C.value?go:$o}  in the pool will be traded for ${I(ee)} ${C.value?$o:go}`}else V=n.value.current_sqrt_price,Y=new no(Y),k.value=""}else O.value=!1,V=n.value.current_sqrt_price,Y=new no(Y);console.log(V,"##curSqrtPrice"),console.log("执行了吗##");const{liquidityAmount:ho,tokenMaxA:co,tokenMaxB:j}=L.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:a.value,tokenB:u.value,lowerTick:l,upperTick:S,coinAmount:Y,iscoinA:mo,roundUp:!1,slippage:Number(D.value)/100,curSqrtPrice:new no(V)});if(console.log(n.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(j.toString(),co.toString(),n.value,"###323"),!C.value&&!K.value&&(F.value?p.value=Number(j)>0?j:"":f.value=Number(co)>0?co:""),(C.value||K.value)&&(f.value==H.value||p.value==H.value)){r.value=n.value.myLiquidity;const oo=new i(100);$.value=new i(n.value.myLiquidity).mul(new i(Math.pow(10,n.value.lpInfo.decimals))).toString(),Z.value=ho.toString(),c.value=oo.toNumber()}else{const oo=ye.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},ho.toString());r.value=new i(oo).div(new i(Math.pow(10,n.value.lpInfo.decimals))).toString();const ko=new i(r.value).div(new i(v.value)).mul(100);console.log(r.value,v.value,"####lpBalance.value"),$.value=oo,Z.value=ho.toString(),c.value=ko.toNumber()}}},Z=w(),io=y(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountA}),ao=y(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountB}),C=w(!1),K=w(!1),qo=y(()=>{var mo,ho,co,j;const l=(ho=fo.value[(mo=a==null?void 0:a.value)==null?void 0:mo.address])==null?void 0:ho.price,S=(j=fo.value[(co=u==null?void 0:u.value)==null?void 0:co.address])==null?void 0:j.price;console.log(l,S,f.value,p.value,"####totalWithdraw");let N=f.value!=="--"&&f.value!==""?f.value:0,Y=p.value!=="--"&&p.value!==""?p.value:0,V;return l&&S&&(C.value||K.value?V=new i(C.value?N:Y).mul(new i(C.value?l:S)).toString():(V=new i(N).mul(new i(l)).add(new i(Y).mul(new i(S))).toString(),console.log(V,"result##"))),V>0&&V<.01?"<$0.01":`$${I(G(V,2))}`}),wo=async l=>{if(!R.value)return;R.value=!0,n.value.token_a.decimals,n.value.token_b.decimals;const S=n.value.tick_lower_index,N=n.value.tick_upper_index;To.tickIndexToSqrtPriceX64(S),To.tickIndexToSqrtPriceX64(N);const Y=n.value.autoPoolPositionInfo.tick_lower_index,V=n.value.autoPoolPositionInfo.tick_upper_index,mo=To.sqrtPriceX64ToTickIndex(new no(n.value.current_sqrt_price));mo<Y&&(A.value?U.value=!0:E.value=!0),mo>V&&(A.value?E.value=!0:U.value=!0);let ho="",co,j;console.log(l.value,"##item.value"),console.log(j,"##coinAmount");let oo=F.value;if(console.log("执行##"),C.value||K.value&&!U.value&&!E.value){if(C.value){const So=new i(H.value).mul(Math.pow(10,a.value.decimals)).mul(l.value).toString();console.log(So,"##amount"),j=G(So,0),f.value=G(new i(H.value).mul(l.value).toString(),a.value.decimals)}if(K.value){const So=new i(H.value).mul(l.value).mul(Math.pow(10,u.value.decimals)).toString();j=G(So,0),p.value=G(new i(H.value).mul(l.value).toString(),u.value.decimals)}const ko=await J.calculateRemoveSwapAmount({lowerTick:S,upperTick:N,curSqrtPrice:new no(n.value.current_sqrt_price),fix_amount_a:oo,receiveAmount:j,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(D.value)/100});if(console.log(ko,"###swapResult"),ko){O.value=ko.is_exceed,j=new no(ko.swapOutAmount),n.value.current_sqrt_price,to.value={swap_amount:ko.swapInAmount,liquidity:ko.liquidity,a2b:!oo},oo=!oo;const So=n.value.token_a.decimals,Po=n.value.token_b.decimals,ee=new i(ko.swapInAmount).div(new i(Math.pow(10,So))).toString(),$o=new i(ko.swapOutAmount).div(new i(Math.pow(10,Po))).toString(),go=A.value?n.value.token_b.symbol:n.value.token_a.symbol,Go=A.value?n.value.token_a.symbol:n.value.token_b.symbol;k.value=l.value==1?`To withdraw ${I(C.value?f.value:p.value)} ${C.value?go:Go},
          ${I(C.value?n.value.amountB:n.value.amountA)} ${C.value?Go:go}  in the pool will be traded for ${I(ee)} ${C.value?go:Go}`:`To withdraw ${I(C.value?f.value:p.value)} ${C.value?go:Go},
          ${I($o)} ${C.value?Go:go}  in the pool will be traded for ${I(ee)} ${C.value?go:Go}`,ho=ko.liquidity}else n.value.current_sqrt_price,j=new no(j),k.value="";console.log(co,"result###"),$.value=new i(n.value.myLiquidity).mul(new i(l.value)).toString(),console.log(n.value,n.value.liquidity,ho,$.value,"###positionInfo.value.liquidity"),console.log($.value,"##lpTokenAmount.value"),r.value=new i($.value),Z.value=ho}else{O.value=!1;const ko=new i(io.value).mul(Math.pow(10,a.value.decimals)).mul(l.value).toString();j=G(ko,0),f.value=G(new i(io.value).mul(l.value).toString(),a.value.decimals);const So=new i(ao.value).mul(l.value).mul(Math.pow(10,u.value.decimals)).toString();j=G(So,0),p.value=G(new i(ao.value).mul(l.value).toString(),u.value.decimals),n.value.current_sqrt_price,j=new no(j),l.value!==1?co=new i(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(l.value).toString():co=new i(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),r.value=new i(co).div(Math.pow(10,n.value.lpInfo.decimals)),ho=ye.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},co),$.value=G(co,0),Z.value=G(ho,0),console.log(ho,"###newLiquidity525")}};Io(c,pe((l,S)=>{l!==S&&(Number(l)>100?c.value=100:l&&n.value?(console.log("687===>"),c.value=l,wo({value:c.value/100})):(f.value="",p.value=""))},300)),Io(()=>f.value,pe((l,S)=>{l?lo():(p.value="",c.value=0)},500),{immediate:!0}),Io(()=>p.value,pe((l,S)=>{l?lo():(f.value="",c.value=0)},500),{immediate:!0});const Zo=He(),{setIsShowSuccess:Vo,setIsShowRejected:Ro,setIsShowWaiting:Bo,setTransactionDesc:Eo,setTransactionTxid:Wo,setPositiomNum:Ko,setTransactionDescText:Qo}=X,yo=w(!1),{t:ro}=Ae(),xo=async()=>{var ko,So;yo.value=!0,Wo("");const l=Number(f.value)>0?`${I(f.value,a.value.decimals)} ${a.value.symbol}`:"",S=Number(p.value)>0?`${I(p.value,u.value.decimals)} ${u.value.symbol}`:"";console.log(l,S,"###transactionDescTo"),Eo(ro("tips.removeLiquidiyText",{from:A.value?S:l,and:Number(f.value)>0&&Number(p.value)>0?"and":"",to:A.value?l:S})),Bo(!0);const N=ro("modal.removeLiquidityText2");Qo(N);const Y=n.value.autoPoolPositionInfo.tick_lower_index,V=n.value.autoPoolPositionInfo.tick_upper_index,mo=To.tickIndexToSqrtPriceX64(Y),ho=To.tickIndexToSqrtPriceX64(V),co=n.value.rewarderInfo.map(Po=>Po.coinAddress);console.log($.value,"##lpTokenAmount.value431");let j;F.value?j=new i(f.value).mul(Math.pow(10,a.value.decimals)).toString():j=new i(p.value).mul(Math.pow(10,u.value.decimals)).toString(),console.log();const oo={lowerSqrtPrice:mo,upperSqrtPrice:ho,lpTokenAmount:$.value,liquidity:Z.value,curSqrtPrice:new no(n.value.object.current_sqrt_price),slippage:Number(D.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.pool,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:co,swapParams:to.value,fix_amount_a:F.value,isOnlyA:!U.value&&!E.value?C.value:!1,isOnlyB:!E.value&&!U.value?K.value:!1,lowerTick:Y,upperTick:V,receiveAmount:j,sliderVal:c.value,positionInfo:n.value};try{const Po=await J.remove(oo);console.log(Po,"移除流动性payload");const ee=await s.value.currentWallet.signAndExecuteTransactionBlock(Po);let $o=L.value.handleTx(ee);if(console.log("0331###remove###tx####",$o),$o&&$o.hash){Wo($o.hash),Bo(!1),Vo(!0);const go={title:ro("common.removeLiquidity"),desc:"",hash:$o.hash,descTransactions:`Remove ${l} ${Number(f.value)>0&&Number(p.value)>0?"and":""} ${S} from the pool`,sender:s.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${f.value} ${(ko=a.value)==null?void 0:ko.symbol} and ${p.value} ${(So=u.value)==null?void 0:So.symbol}`};go.res=$o.res,L.value.showTransitionPending(go),await L.value.watchTransaction(go)&&(f.value="",p.value="",r.value="",c.value=0,setTimeout(()=>{h.updatePositionItem(n.value.id),L.value.getAccount(s.value.address)},1e3),Number(c.value)==100&&g.name=="auto-pool-detail"&&Zo.push("/pool/auto"))}else Bo(!1),Ro(!0);yo.value=!1}catch(Po){console.log("Remove error",Po),yo.value=!1,Bo(!1),Ro(!0)}};Io(()=>n.value,(l,S)=>{l&&!Ho(l)&&(a.value=l==null?void 0:l.token_a,u.value=l==null?void 0:l.token_b,console.log("触发###"),(!S||S&&S.address!==l.address)&&(c.value=c.value>0?c.value:25,wo({value:c.value/100})))},{immediate:!0});const Xo=y(()=>{const l=Number(r.value)>Number(v.value);return!f.value&&!p.value||!r.value||r.value<=0||!f.value&&C.value||!p.value&&K.value?ro("button.enterAmount"):l?"Invalid Amount":O.value?ro("button.insufficientLiquidity"):ro("button.remove")}),jo=y(()=>{console.log(r.value.toString(),v.value,"##lpBalance.value");const l=Number(r.value)>Number(v.value);return!!(!f.value&&!p.value||(console.log(1111),Number(f.value)<=0&&C.value||Number(p.value)<=0&&K.value)||(console.log(2222),!r.value||r.value<=0)||(console.log(3333),l)||(console.log(4444),O.value)||(console.log(5555),bo.value!=="STATUS_RUNNING"))}),oe=l=>(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||se("/image/coins/sui-unknown.png"),b=l=>{f.value="",p.value="",R.value=!0,k.value="",l=="only-a"?(C.value=!C.value,K.value=!1,F.value=!0):(K.value=!K.value,C.value=!1,F.value=!1)},B=l=>{R.value=!0,c.value=100,l==="fromCoin"?F.value=!0:F.value=!1},eo=l=>{R.value=!0,c.value=50,l==="fromCoin"?F.value=!0:F.value=!1},H=w(),Ao=async()=>{F.value;const l=n.value.token_a.decimals,S=n.value.token_b.decimals,N=C.value?ao.value:io.value;console.log(N,"###receiveAmount");const Y=a.value.address===n.value.token_a.address&&u.value.address===n.value.token_b.address?0:1;if(C.value||K.value){console.log(N,"##receiveAmount");let V=await L.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:Y==1,byAmountIn:!0,amount:N});console.log(V,V.estimatedAmountOut,l,S,"##preSwapRes"),H.value=new i(V.estimatedAmountOut).add(new i(C.value?io.value:ao.value)).toString(),console.log(H.value,"###onlyTokenBalance.value"),wo({value:c.value/100})}};Io(()=>[C.value,K.value,io.value,ao.value],([l,S])=>{l||S?Ao():wo({value:c.value/100})},{immediate:!0});const Q=l=>`${l}%`,bo=y(()=>t.value.currentAutoPoolStatus),vo=w(),_o=()=>{vo.value=window.setInterval(()=>{(f.value||p.value)&&!R.value?lo():wo({value:c.value/100})},2e4)};return he(()=>{_o()}),ke(()=>{window.clearInterval(vo.value)}),{removeLiquidityBtnText:Xo,removeLiquidityBtnDisabled:jo,wallet:s,ratioArr:_,positionInfo:n,isShowRemoveModal:q,needReverse:A,fromCoin:a,toCoin:u,lpAmount:r,lpBalance:v,sliderVal:c,sFixD:G,isSlider:R,fromCoinAmount:f,toCoinAmount:p,setPercent:wo,toRemove:xo,addCommom:I,getCoinIcon:oe,isOnlyA:C,isOnlyB:K,onlyToken:b,fixedFromCoin:F,maxBtnSelect:B,halfBtnSelect:eo,fromCoinBlance:io,toCoinBlance:ao,showFromCoinLock:U,showToCoinLock:E,removeText:k,onlyTokenBalance:H,totalWithdraw:qo,formatter:Q,currentAutoPoolStatus:bo}}});const re=o=>(Uo("data-v-8dbdd2f0"),o=o(),Fo(),o),sl={class:"auto-pool-add"},ll={class:"auto-pool-add-content"},il={class:"liquidity-action-tab"},al=re(()=>e("div",{class:"remove tab-active"},"Remove",-1)),ul={key:0,class:"only-token"},rl=re(()=>e("div",null,"Deposit Amounts",-1)),dl={key:0},vl={key:0},ml={key:0,class:"card-item"},cl={key:1,class:"card-item"},pl={class:"remove-ratio"},fl={class:"remove-ratio-select"},yl={key:0,class:"ratio"},bl={key:1,class:"ratio"},_l={class:"ratio-list"},hl=["onClick"],kl=re(()=>e("span",null,"Pool Closed",-1)),gl={key:4,class:"remove-info"},$l={key:0,class:"remove-text total-amount"},wl={class:"total-amount"},Il=re(()=>e("span",null,"Total Withdraw",-1)),Cl={class:"total-amount"},Al=re(()=>e("span",null,"LP Burn Amount",-1)),Sl={key:0},Pl={key:1};function Tl(o,s,X,W,D,T){var A,a,u,q,r,v,R,L,O,J,f,p,$,U,E,to,F;const _=Te,c=Re,g=Je,h=ae("AutoPoolV2PoolStatus"),t=Pe,n=Be;return m(),P("div",sl,[e("div",ll,[e("div",il,[e("div",{class:"increase",onClick:s[0]||(s[0]=Se(k=>o.$emit("changeCurrentTab"),["stop"]))},"Add"),al]),!o.showFromCoinLock&&!o.showToCoinLock?(m(),P("div",ul,[rl,e("div",null,[e("div",{class:"only-a",onClick:s[1]||(s[1]=k=>o.onlyToken("only-a"))},[e("p",null,[o.isOnlyA?(m(),P("span",dl)):x("",!0)]),e("span",null,d(o.needReverse?(q=(u=o.positionInfo)==null?void 0:u.token_b)==null?void 0:q.symbol:(a=(A=o.positionInfo)==null?void 0:A.token_a)==null?void 0:a.symbol)+" only",1)]),e("div",{class:"only-b",onClick:s[2]||(s[2]=k=>o.onlyToken("only-b"))},[e("p",null,[o.isOnlyB?(m(),P("span",vl)):x("",!0)]),e("span",null,d(o.needReverse?(L=(R=o.positionInfo)==null?void 0:R.token_a)==null?void 0:L.symbol:(v=(r=o.positionInfo)==null?void 0:r.token_b)==null?void 0:v.symbol)+" only",1)])])])):x("",!0),e("div",{class:fe(o.needReverse?"card-container reverse":"card-container")},[(o.needReverse?!o.isOnlyA:!o.isOnlyB)?(m(),P("div",ml,[z(_,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":s[3]||(s[3]=k=>o.fromCoinAmount=k),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.isOnlyA?o.onlyTokenBalance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[4]||(s[4]=k=>o.maxBtnSelect("fromCoin")),onOnHalf:s[5]||(s[5]=k=>o.halfBtnSelect("fromCoin")),onOnInput:s[6]||(s[6]=k=>{o.isSlider=!1,o.fromCoinAmount=k}),onOnFocus:s[7]||(s[7]=()=>{o.isSlider=!1,o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock?(m(),uo(c,{key:0})):x("",!0)])):x("",!0),(o.needReverse?!o.isOnlyB:!o.isOnlyA)?(m(),P("div",cl,[z(_,{modelValue:o.toCoinAmount,"onUpdate:modelValue":s[8]||(s[8]=k=>o.toCoinAmount=k),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.isOnlyB?o.onlyTokenBalance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[9]||(s[9]=k=>o.maxBtnSelect("toCoin")),onOnHalf:s[10]||(s[10]=k=>o.halfBtnSelect("toCoin")),onOnInput:s[11]||(s[11]=k=>{o.isSlider=!1,o.toCoinAmount=k}),onOnFocus:s[12]||(s[12]=()=>{o.isSlider=!1,o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock?(m(),uo(c,{key:0})):x("",!0)])):x("",!0)],2),e("div",pl,[e("div",fl,[Number(o.lpBalance)>=Number(o.lpAmount)?(m(),P("div",yl,d(o.sliderVal>0&&Number(("sFixD"in o?o.sFixD:M(G))(o.sliderVal,2))<.01?"<0.01":("sFixD"in o?o.sFixD:M(G))(o.sliderVal,2))+"% ",1)):(m(),P("div",bl,"--")),e("div",_l,[(m(!0),P(ze,null,Ye(o.ratioArr,(k,so)=>(m(),P("div",{key:so,class:fe(["ratio-item",o.sliderVal==k.value?"ratio-item-active":""]),onClick:()=>{o.isSlider=!0,o.sliderVal=k.value}},d(k.name),11,hl))),128))])]),z(g,{value:o.sliderVal,"onUpdate:value":s[13]||(s[13]=k=>o.sliderVal=k),"tip-formatter":o.formatter,onChange:s[14]||(s[14]=k=>o.isSlider=!0)},null,8,["value","tip-formatter"])])]),o.currentAutoPoolStatus=="STATUS_REBALANCING"?(m(),uo(h,{key:0})):x("",!0),(O=o.positionInfo)!=null&&O.is_pause?(m(),uo(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:Oo(()=>[kl]),_:1})):o.wallet.connected?(m(),uo(t,{key:2,class:"big-btn liquidity-btn",disabled:o.removeLiquidityBtnDisabled,onClick:s[15]||(s[15]=k=>o.toRemove())},{default:Oo(()=>[e("span",null,d(o.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(m(),uo(t,{key:3,class:"big-btn liquidity-btn",onClick:s[16]||(s[16]=k=>o.wallet.setIsShowWalletModal(!0))},{default:Oo(()=>[e("span",null,d(o.$t("button.connectWallet")),1)]),_:1})),o.removeLiquidityBtnDisabled?x("",!0):(m(),P("div",gl,[o.removeText&&(o.isOnlyA&&o.fromCoinAmount||o.isOnlyB&&o.toCoinAmount)?(m(),P("div",$l,d(o.removeText),1)):x("",!0),e("div",wl,[Il,e("span",null,d(o.totalWithdraw),1)]),e("div",Cl,[Al,o.fromCoinAmount||o.toCoinAmount?(m(),P("span",Sl,d(("addCommom"in o?o.addCommom:M(I))(o.lpAmount))+" "+d(o.needReverse?(J=o.toCoin)==null?void 0:J.symbol:(f=o.fromCoin)==null?void 0:f.symbol)+"-"+d(o.needReverse?(p=o.fromCoin)==null?void 0:p.symbol:($=o.toCoin)==null?void 0:$.symbol),1)):(m(),P("span",Pl,"0 "+d(o.needReverse?(U=o.toCoin)==null?void 0:U.symbol:(E=o.fromCoin)==null?void 0:E.symbol)+"-"+d(o.needReverse?(to=o.fromCoin)==null?void 0:to.symbol:(F=o.toCoin)==null?void 0:F.symbol),1))])])),o.isShowRemoveModal?(m(),uo(n,{key:5,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,onOnClose:s[17]||(s[17]=k=>o.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):x("",!0)])}const Rl=No(tl,[["render",Tl],["__scopeId","data-v-8dbdd2f0"]]),ql=Do({components:{AutoPoolV2Info:Ne,AutoPoolV2PositionRange:Me,AutoPoolV2PoolComposition:Oe,AutoPoolV2PoolLiquidity:De,AutoPoolV2PoolAdd:nl,AutoPoolV2PoolRemove:Rl},setup(){const o=Yo();zo();const s=ce();y(()=>s);const X=()=>{o.getAutoPoolAPY(),o.getVault(D.params.id)},W=w(),D=Jo();Io(()=>D.query.action,c=>{c&&(W.value=c)},{immediate:!0});const T=w(),_=()=>{T.value=window.setInterval(()=>{o.getVault(D.params.id)},6e4)};return he(()=>{console.log(D,"route##"),_()}),ke(()=>{window.clearInterval(T.value)}),{clickRefresh:X,currentTab:W}}});const Bl={class:"auto-pool-detail-v2"},Nl={class:"detail-top"},Ml={class:"detail-bottom pc-detail"},Ll={class:"detail-bottom-left"},Ol={class:"detail-bottom-right"},Dl={class:"h5-detail"};function Ul(o,s,X,W,D,T){const _=Ve,c=Ne,g=Me,h=Oe,t=De,n=ae("AutoPoolV2PoolAdd"),A=ae("AutoPoolV2PoolRemove");return m(),P("div",Bl,[e("div",Nl,[z(_,{onClickRefresh:o.clickRefresh},null,8,["onClickRefresh"]),z(c)]),e("div",Ml,[e("div",Ll,[z(g),z(h),z(t)]),e("div",Ol,[o.currentTab=="add"?(m(),uo(n,{key:0,onChangeCurrentTab:s[0]||(s[0]=a=>o.currentTab="remove")})):(m(),uo(A,{key:1,onChangeCurrentTab:s[1]||(s[1]=a=>o.currentTab="add")}))])]),e("div",Dl,[o.currentTab=="add"?(m(),uo(n,{key:0,onChangeCurrentTab:s[2]||(s[2]=a=>o.currentTab="remove")})):(m(),uo(A,{key:1,onChangeCurrentTab:s[3]||(s[3]=a=>o.currentTab="add")})),z(g),z(h),z(t)])])}const di=No(ql,[["render",Ul],["__scopeId","data-v-77f29cb0"]]);export{di as default};
