import{_ as Re}from"./new-position-title.9d5c3dbe.js";import{_ as ie}from"./token-warning.796bce93.js";import{_ as ye}from"./auto-pool-apy-tips.a85ebfd2.js";import{u as Do,a as L,g as oe,c as Mo,d as le,s as yo,p as pe,b as _e,T as To,e as E,f as qe}from"./pool.cba66722.js";import{u as ae,a as me}from"./sha256.0ac155a0.js";import{u as Uo,a as be}from"./autoPool.ff990bde.js";import{i as Go}from"./import-icon.de3e6c66.js";import{a as Fo,l as p,m as Vo,r as $,q as ho,e as Eo,s as ce,o as _,f as O,h as e,t as qo,i as W,v as d,j as se,x as ro,u as U,p as Zo,k as Jo,y as re,z as ke,A as ge,C as de,c as _o,w as Yo,B as he,D as Be,b as Oe,F as Ne,E as Le,G as Me,H as fe}from"./entry.4414a18f.js";import{afterCurrentPrice as ee}from"./data.707f7dd3.js";import"./decimal.633e31ee.js";import{D as a}from"./decimal.0e8aa3f1.js";import{_ as we}from"./assets-card.2d4cf1ce.js";import{_ as Ie}from"./coin-lock.2bd43a40.js";import{_ as $e,a as Ce}from"./auto-pool-remove-modal.5e8d8cad.js";import{V as ve}from"./index.27fb2275.js";/* empty css              *//* empty css              */import"./back.fda47ac4.js";import"./swap-setting.c0f33e0d.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.3bf033aa.js";const De=Fo({components:{AutoPoolApyTips:ye},setup(){const o=ae(),s=p(()=>o),J=Do(),j=p(()=>J),X=Uo(),C=p(()=>X),I=p(()=>s.value.theme),b=Vo(),r=$();ho(()=>[C.value.positionInfoObj,b.params.id],([i,u])=>{i&&!Mo(i)&&u&&(r.value=i[u],console.log(r.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const A=p(()=>{var i;return(i=r.value)==null?void 0:i.needReverse}),t=i=>{var u;return(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((u=j.value.tokensObj[i==null?void 0:i.address])==null?void 0:u.logo_url)||(I.value==="default"?Go("/image/coins/unknown.png"):Go("/image/coins/sui-unknown.png"))},n=p(()=>{var i,u;return C.value.apyObj&&((u=C.value.apyObj[(i=r.value)==null?void 0:i.id])==null?void 0:u.tvl)||"--"}),k=p(()=>{var i,u;return C.value.apyObj&&((u=C.value.apyObj[(i=r.value)==null?void 0:i.id])==null?void 0:u.apr)||"--"});return{positionInfo:r,needReverse:A,getCoinIcon:t,tvl:n,apy:k,addCommom:L,getExplorerUrl:oe}}});const wo=o=>(Zo("data-v-c5a991ac"),o=o(),Jo(),o),Ue={class:"auto-pool-v2-info"},Fe={class:"pool-info"},Ve={class:"left"},Ee={class:"coin-a"},We={alt:""},je={class:"coin-b"},Xe={alt:""},He={class:"position-name"},ze={key:0,class:"pool-fee"},Ye=wo(()=>e("span",null,"Fee tier",-1)),Ge={class:"vault-address"},Ze=wo(()=>e("span",null,"Vault Address",-1)),Je=["href"],Ke=wo(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),Qe=[Ke],xe={class:"pool-address"},on=wo(()=>e("span",null,"Pool Address",-1)),en=["href"],nn=wo(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),tn=[nn],sn={class:"apy-and-tvl"},ln={class:"apy"},an=wo(()=>e("div",{class:"apy-title"},"APY",-1)),un={class:"apy-text"},rn={class:"tvl"},dn=wo(()=>e("div",{class:"tvl-title"},"TVL",-1)),vn={class:"tvl-text"},mn={class:"pool-info h5-pool-info"},cn={class:"left"},pn={class:"coin-a"},fn={alt:""},yn={class:"coin-b"},_n={alt:""},bn={class:"position-name"},kn={key:0,class:"pool-fee"},gn=wo(()=>e("span",null,"Fee tier",-1)),hn={class:"left"},wn={class:"vault-address"},In=wo(()=>e("span",null,"Vault Address",-1)),$n=["href"],Cn=wo(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),An=[Cn],Pn={class:"pool-address"},Sn=wo(()=>e("span",null,"Pool Address",-1)),Tn=["href"],Rn=wo(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),qn=[Rn],Bn={class:"apy-and-tvl"},On={class:"apy"},Nn=wo(()=>e("div",{class:"apy-title"},"APY",-1)),Ln={class:"apy-text"},Mn={class:"tvl"},Dn=wo(()=>e("div",{class:"tvl-title"},"TVL",-1)),Un={class:"tvl-text"};function Fn(o,s,J,j,X,C){var A,t,n,k,i,u,y,v,S,P,T,H,g,f,h,q,M,eo,B,m,z,so,lo,io,Y,vo,bo,D,mo,Wo,Io,jo,Oo,$o,Po,No,Lo,Xo,Ho,ao,co,Qo,c,R,Q,V,uo,no;const I=ie,b=ye,r=ce("image");return _(),O("div",Ue,[e("div",Fe,[e("div",Ve,[e("div",Ee,[qo(e("img",We,null,512),[[r,o.needReverse?o.getCoinIcon((t=o.positionInfo)==null?void 0:t.token_b):o.getCoinIcon((A=o.positionInfo)==null?void 0:A.token_a)]]),W(I,{address:o.needReverse?(u=(i=o.positionInfo)==null?void 0:i.token_b)==null?void 0:u.address:(k=(n=o.positionInfo)==null?void 0:n.token_a)==null?void 0:k.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",je,[qo(e("img",Xe,null,512),[[r,o.needReverse?o.getCoinIcon((v=o.positionInfo)==null?void 0:v.token_a):o.getCoinIcon((y=o.positionInfo)==null?void 0:y.token_b)]]),W(I,{address:o.needReverse?(H=(T=o.positionInfo)==null?void 0:T.token_a)==null?void 0:H.address:(P=(S=o.positionInfo)==null?void 0:S.token_b)==null?void 0:P.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",He,d(o.needReverse?(f=(g=o.positionInfo)==null?void 0:g.token_b)==null?void 0:f.symbol:(q=(h=o.positionInfo)==null?void 0:h.token_a)==null?void 0:q.symbol)+" - "+d(o.needReverse?(eo=(M=o.positionInfo)==null?void 0:M.token_a)==null?void 0:eo.symbol:(m=(B=o.positionInfo)==null?void 0:B.token_b)==null?void 0:m.symbol),1),(z=o.positionInfo)!=null&&z.fee?(_(),O("div",ze,[Ye,se(" "+d(((so=o.positionInfo)==null?void 0:so.fee)*100)+"% ",1)])):ro("",!0),e("div",Ge,[Ze,e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:U(oe))("poolAddress",(lo=o.positionInfo)==null?void 0:lo.id),target:"_blank"},Qe,8,Je)]),e("div",xe,[on,e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:U(oe))("poolAddress",(io=o.positionInfo)==null?void 0:io.address),target:"_blank"},tn,8,en)])]),e("div",sn,[e("div",ln,[an,e("div",un,[se(d(o.apy)+" ",1),W(b)])]),e("div",rn,[dn,e("div",vn,"$"+d(("addCommom"in o?o.addCommom:U(L))(o.tvl,2)),1)])])]),e("div",mn,[e("div",cn,[e("div",pn,[qo(e("img",fn,null,512),[[r,o.needReverse?o.getCoinIcon((vo=o.positionInfo)==null?void 0:vo.token_b):o.getCoinIcon((Y=o.positionInfo)==null?void 0:Y.token_a)]]),W(I,{address:o.needReverse?(Wo=(mo=o.positionInfo)==null?void 0:mo.token_b)==null?void 0:Wo.address:(D=(bo=o.positionInfo)==null?void 0:bo.token_a)==null?void 0:D.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",yn,[qo(e("img",_n,null,512),[[r,o.needReverse?o.getCoinIcon((jo=o.positionInfo)==null?void 0:jo.token_a):o.getCoinIcon((Io=o.positionInfo)==null?void 0:Io.token_b)]]),W(I,{address:o.needReverse?(No=(Po=o.positionInfo)==null?void 0:Po.token_a)==null?void 0:No.address:($o=(Oo=o.positionInfo)==null?void 0:Oo.token_b)==null?void 0:$o.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",bn,d(o.needReverse?(Xo=(Lo=o.positionInfo)==null?void 0:Lo.token_b)==null?void 0:Xo.symbol:(ao=(Ho=o.positionInfo)==null?void 0:Ho.token_a)==null?void 0:ao.symbol)+" - "+d(o.needReverse?(Qo=(co=o.positionInfo)==null?void 0:co.token_a)==null?void 0:Qo.symbol:(R=(c=o.positionInfo)==null?void 0:c.token_b)==null?void 0:R.symbol),1),(Q=o.positionInfo)!=null&&Q.fee?(_(),O("div",kn,[gn,se(" "+d(((V=o.positionInfo)==null?void 0:V.fee)*100)+"% ",1)])):ro("",!0)]),e("div",hn,[e("div",wn,[In,e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:U(oe))("poolAddress",(uo=o.positionInfo)==null?void 0:uo.id),target:"_blank"},An,8,$n)]),e("div",Pn,[Sn,e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:U(oe))("poolAddress",(no=o.positionInfo)==null?void 0:no.address),target:"_blank"},qn,8,Tn)])]),e("div",Bn,[e("div",On,[Nn,e("div",Ln,[se(d(o.apy)+" ",1),W(b)])]),e("div",Mn,[Dn,e("div",Un,"$"+d(("addCommom"in o?o.addCommom:U(L))(o.tvl,2)),1)])])])])}const Ae=Eo(De,[["render",Fn],["__scopeId","data-v-c5a991ac"]]),Vn=Fo({setup(){const o=$(!0),s=Do(),J=p(()=>s),j=Uo(),X=p(()=>j),C=Vo(),I=$();ho(()=>[X.value.positionInfoObj,C.params.id],([t,n])=>{t&&!Mo(t)&&n&&(I.value=t[n],console.log(I.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const b=p(()=>{var t;return(t=I.value)==null?void 0:t.needReverse}),r=t=>{var n;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((n=J.value.tokensObj[t==null?void 0:t.address])==null?void 0:n.logo_url)||Go("/image/coins/sui-unknown.png")},A=p(()=>{var k;const t=(k=I==null?void 0:I.value)==null?void 0:k.price,n=ee.value;return t&&n?50+new a(n).sub(new a(t)).div(new a(t)).mul(100).toNumber():50});return{direct:o,positionInfo:I,needReverse:b,getCoinIcon:r,decimalUi:le,addCommom:L,sFixD:yo,moveRatio:A}}}),En=""+globalThis.__publicAssetsURL("sui-image/icon_currentprice@2x.png");const Bo=o=>(Zo("data-v-73e1fd26"),o=o(),Jo(),o),Wn={class:"v2-position-range"},jn={class:"position-range-top"},Xn=Bo(()=>e("div",null,"Position Range",-1)),Hn={class:"base-coin"},zn={key:0},Yn={alt:""},Gn={key:1},Zn={alt:""},Jn={key:2},Kn={key:3},Qn=Bo(()=>e("p",null,"Base coin",-1)),xn={class:"coin-rate"},ot=Bo(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),et=Bo(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),nt=[ot,et],tt={class:"position-range-bottom"},st={class:"current-price"},lt=Bo(()=>e("div",{class:"current-price-title"},"Current Price",-1)),it={key:0,class:"current-price-text"},at={key:1,class:"current-price-text"},ut={class:"price-range"},rt=Bo(()=>e("div",{class:"price-range-bg"},[e("div",{class:"price-range-border"})],-1)),dt={class:"min-price"},vt=Bo(()=>e("div",null,"Min Price",-1)),mt={class:"max-price"},ct=Bo(()=>e("div",null,"Max Price",-1));function pt(o,s,J,j,X,C){var r,A,t,n,k,i,u,y,v,S,P,T,H,g,f,h,q,M,eo,B,m,z,so,lo,io,Y;const I=ie,b=ce("image");return _(),O("div",Wn,[e("div",jn,[Xn,e("div",Hn,[o.needReverse?(_(),O("div",Gn,[qo(e("img",Zn,null,512),[[b,o.direct?o.getCoinIcon((y=o.positionInfo)==null?void 0:y.token_b):o.getCoinIcon((u=o.positionInfo)==null?void 0:u.token_a)]]),W(I,{address:o.direct?(T=(P=o.positionInfo)==null?void 0:P.token_b)==null?void 0:T.address:(S=(v=o.positionInfo)==null?void 0:v.token_a)==null?void 0:S.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(_(),O("div",zn,[qo(e("img",Yn,null,512),[[b,o.direct?o.getCoinIcon((r=o.positionInfo)==null?void 0:r.token_a):o.getCoinIcon((A=o.positionInfo)==null?void 0:A.token_b)]]),W(I,{address:o.direct?(n=(t=o.positionInfo)==null?void 0:t.token_a)==null?void 0:n.address:(i=(k=o.positionInfo)==null?void 0:k.token_b)==null?void 0:i.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),o.needReverse?(_(),O("span",Kn,d(o.direct?(M=(q=o.positionInfo)==null?void 0:q.token_b)==null?void 0:M.symbol:(B=(eo=o.positionInfo)==null?void 0:eo.token_a)==null?void 0:B.symbol),1)):(_(),O("span",Jn,d(o.direct?(g=(H=o.positionInfo)==null?void 0:H.token_a)==null?void 0:g.symbol:(h=(f=o.positionInfo)==null?void 0:f.token_b)==null?void 0:h.symbol),1)),Qn,e("div",xn,[e("div",{onClick:s[0]||(s[0]=vo=>o.direct=!o.direct)},nt)])])]),e("div",tt,[e("div",st,[lt,(o.needReverse?!o.direct:o.direct)?(_(),O("div",it,d(("addCommom"in o?o.addCommom:U(L))(("decimalUi"in o?o.decimalUi:U(le))((m=o.positionInfo)==null?void 0:m.price,6))),1)):(_(),O("div",at,d(("addCommom"in o?o.addCommom:U(L))(("decimalUi"in o?o.decimalUi:U(le))(1/((z=o.positionInfo)==null?void 0:z.price),6))),1))]),e("div",ut,[rt,e("img",{style:re({left:`${o.moveRatio}%`}),src:En,alt:""},null,4),e("div",dt,[vt,e("div",null,d(((so=o.positionInfo)==null?void 0:so.minPrice)&&("sFixD"in o?o.sFixD:U(yo))((lo=o.positionInfo)==null?void 0:lo.minPrice,6)),1)]),e("div",mt,[ct,e("div",null,d(((io=o.positionInfo)==null?void 0:io.maxPrice)&&("sFixD"in o?o.sFixD:U(yo))((Y=o.positionInfo)==null?void 0:Y.maxPrice,6)),1)])])])])}const Pe=Eo(Vn,[["render",pt],["__scopeId","data-v-73e1fd26"]]),ft=Fo({setup(){const o=Do(),s=p(()=>o),J=Uo(),j=p(()=>J),X=Vo(),C=$();return ho(()=>[j.value.positionInfoObj,X.params.id],([r,A])=>{console.log(r,"##positionInfoObj"),r&&!Mo(r)&&A&&(C.value=r[A],console.log(C.value,"##positionInfo.value"))},{immediate:!0,deep:!0}),{needReverse:p(()=>{var r;return(r=C.value)==null?void 0:r.needReverse}),positionInfo:C,getCoinIcon:r=>{var A;return console.log(r,"info##"),(r==null?void 0:r.logoURI)||(r==null?void 0:r.logo_url)||((A=s.value.tokensObj[r==null?void 0:r.address])==null?void 0:A.logo_url)||Go("/image/coins/sui-unknown.png")},addCommom:L}}});const yt=o=>(Zo("data-v-0bdfedc0"),o=o(),Jo(),o),_t={class:"pool-composition"},bt=yt(()=>e("div",{class:"pool-composition-top"},"Pool Composition",-1)),kt={class:"pool-composition-bottom"},gt={class:"token-ratio"},ht={class:"before-coin"},wt={alt:""},It={class:"after-coin"},$t={alt:""},Ct={class:"token-num"},At={class:"num-box"},Pt={class:"num-box"};function St(o,s,J,j,X,C){var r,A,t,n,k,i,u,y,v,S,P,T,H,g,f,h,q,M,eo,B,m,z,so,lo,io,Y,vo,bo;const I=ie,b=ce("image");return _(),O("div",_t,[bt,e("div",kt,[e("div",gt,[e("div",ht,[e("div",null,[W(I,{address:o.needReverse?(n=(t=o.positionInfo)==null?void 0:t.token_b)==null?void 0:n.address:(A=(r=o.positionInfo)==null?void 0:r.token_a)==null?void 0:A.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),qo(e("img",wt,null,512),[[b,o.needReverse?o.getCoinIcon((i=o.positionInfo)==null?void 0:i.token_b):o.getCoinIcon((k=o.positionInfo)==null?void 0:k.token_a)]])]),e("span",null,d((u=o.positionInfo)==null?void 0:u.poolCoinARatio)+"%",1)]),e("div",It,[e("span",null,d((y=o.positionInfo)==null?void 0:y.poolCoinBRatio)+"%",1),e("div",null,[qo(e("img",$t,null,512),[[b,o.needReverse?o.getCoinIcon((S=o.positionInfo)==null?void 0:S.token_a):o.getCoinIcon((v=o.positionInfo)==null?void 0:v.token_b)]]),W(I,{address:o.needReverse?(g=(H=o.positionInfo)==null?void 0:H.token_a)==null?void 0:g.address:(T=(P=o.positionInfo)==null?void 0:P.token_b)==null?void 0:T.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),e("div",Ct,[e("div",{class:"token-a-bg",style:re({width:`${(f=o.positionInfo)==null?void 0:f.poolCoinARatio}%`})},null,4),e("div",{class:"token-b-bg",style:re({width:`${(h=o.positionInfo)==null?void 0:h.poolCoinBRatio}%`})},null,4),e("div",At,[e("div",null,d(("addCommom"in o?o.addCommom:U(L))((q=o.positionInfo)==null?void 0:q.poolCoinANum))+" "+d(o.needReverse?(m=(B=o.positionInfo)==null?void 0:B.token_b)==null?void 0:m.symbol:(eo=(M=o.positionInfo)==null?void 0:M.token_a)==null?void 0:eo.symbol),1),e("div",null,"$"+d(("addCommom"in o?o.addCommom:U(L))((z=o.positionInfo)==null?void 0:z.poolCoinAUSD)),1)]),e("div",Pt,[e("div",null,d(("addCommom"in o?o.addCommom:U(L))((so=o.positionInfo)==null?void 0:so.poolCoinBNum))+" "+d(o.needReverse?(vo=(Y=o.positionInfo)==null?void 0:Y.token_a)==null?void 0:vo.symbol:(io=(lo=o.positionInfo)==null?void 0:lo.token_b)==null?void 0:io.symbol),1),e("div",null,"$"+d(("addCommom"in o?o.addCommom:U(L))((bo=o.positionInfo)==null?void 0:bo.poolCoinBUSD)),1)])])])])}const Se=Eo(ft,[["render",St],["__scopeId","data-v-0bdfedc0"]]),Tt=Fo({setup(){const o=Do(),s=p(()=>o),J=Uo(),j=p(()=>J),X=Vo(),C=$();ho(()=>[j.value.positionInfoObj,X.params.id],([t,n])=>{console.log(t,"##positionInfoObj"),t&&!Mo(t)&&n&&(C.value=t[n],console.log(C.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const I=p(()=>{var t;return(t=C.value)==null?void 0:t.needReverse}),b=t=>{var n;return console.log(t,"info##"),(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((n=s.value.tokensObj[t==null?void 0:t.address])==null?void 0:n.logo_url)||Go("/image/coins/sui-unknown.png")},r=me(),A=p(()=>r);return{needReverse:I,positionInfo:C,getCoinIcon:b,addCommom:L,wallet:A}}});const ne=o=>(Zo("data-v-0b578037"),o=o(),Jo(),o),Rt={class:"my-liquidity"},qt={class:"my-liquidity-top"},Bt=ne(()=>e("div",null,"My Liquidity",-1)),Ot=ne(()=>e("p",null,"My share of pool",-1)),Nt={class:"my-liquidity-bottom"},Lt={class:"lp-token"},Mt=ne(()=>e("div",null,[e("span",null,"LP Token Balance ")],-1)),Dt={class:"lp-balance"},Ut={class:"token-num-content"},Ft={class:"token-num token-a-num"},Vt={class:"logo"},Et=["src"],Wt={class:"text"},jt={class:"lp-logo"},Xt=["src"],Ht=ne(()=>e("div",null,"Pooled Assets",-1)),zt={class:"token-num"},Yt={class:"logo"},Gt=["src"],Zt={class:"text"},Jt=ne(()=>e("div",{class:"token-num-content-bg"},null,-1));function Kt(o,s,J,j,X,C){var b,r,A,t,n,k,i,u,y,v,S,P,T,H,g,f,h,q,M,eo,B,m,z,so,lo,io,Y,vo;const I=ie;return _(),O("div",Rt,[e("div",qt,[Bt,e("div",null,[Ot,e("p",null,d(o.wallet.connected?(b=o.positionInfo)==null?void 0:b.myShare:"--")+"%",1)])]),e("div",Nt,[e("div",Lt,[Mt,e("div",null,[e("span",Dt,d(o.wallet.connected?("addCommom"in o?o.addCommom:U(L))((r=o.positionInfo)==null?void 0:r.myLiquidity):"--")+" LP",1),e("span",null,"$"+d(o.wallet.connected?("addCommom"in o?o.addCommom:U(L))((A=o.positionInfo)==null?void 0:A.myLiquidityUSD):"--"),1)])]),e("div",Ut,[e("div",Ft,[e("div",Vt,[e("img",{src:o.needReverse?o.getCoinIcon((n=o.positionInfo)==null?void 0:n.token_b):o.getCoinIcon((t=o.positionInfo)==null?void 0:t.token_a),alt:""},null,8,Et),W(I,{address:o.needReverse?(y=(u=o.positionInfo)==null?void 0:u.token_b)==null?void 0:y.address:(i=(k=o.positionInfo)==null?void 0:k.token_a)==null?void 0:i.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),e("div",Wt,[e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:U(L))((v=o.positionInfo)==null?void 0:v.amountA):"--")+" "+d(o.needReverse?(H=(T=o.positionInfo)==null?void 0:T.token_b)==null?void 0:H.symbol:(P=(S=o.positionInfo)==null?void 0:S.token_a)==null?void 0:P.symbol),1),e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:U(L))((g=o.positionInfo)==null?void 0:g.myAmountAUSD):"--"),1)])]),e("div",jt,[e("img",{src:o.getCoinIcon((f=o.positionInfo)==null?void 0:f.lpInfo),alt:""},null,8,Xt),Ht]),e("div",zt,[e("div",Yt,[e("img",{src:o.needReverse?o.getCoinIcon((q=o.positionInfo)==null?void 0:q.token_a):o.getCoinIcon((h=o.positionInfo)==null?void 0:h.token_b),alt:""},null,8,Gt),W(I,{address:o.needReverse?(m=(B=o.positionInfo)==null?void 0:B.token_a)==null?void 0:m.address:(eo=(M=o.positionInfo)==null?void 0:M.token_b)==null?void 0:eo.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),e("div",Zt,[e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:U(L))((z=o.positionInfo)==null?void 0:z.amountB):"--")+" "+d(o.needReverse?(Y=(io=o.positionInfo)==null?void 0:io.token_a)==null?void 0:Y.symbol:(lo=(so=o.positionInfo)==null?void 0:so.token_b)==null?void 0:lo.symbol),1),e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:U(L))((vo=o.positionInfo)==null?void 0:vo.myAmountBUSD):"--"),1)])]),Jt])])])}const Te=Eo(Tt,[["render",Kt],["__scopeId","data-v-0b578037"]]),Qt=Fo({components:{AutoPoolAddModal:$e},setup(){const o=me(),s=$(!1),J=ae(),j=p(()=>J),X=p(()=>j.value.chainName),C=p(()=>o),I=Uo(),b=p(()=>I),r=Do(),A=p(()=>r),t=$(),n=Vo();ho(()=>[b.value.positionInfoObj,n.params.id],([c,R])=>{c&&!Mo(c)&&R&&(t.value=c[R],console.log(t.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const k=p(()=>{var c,R;return console.log((c=t.value)==null?void 0:c.needReverse,"##positionInfo.value?.needReverse"),(R=t.value)==null?void 0:R.needReverse}),i=$(),u=$(),y=$(),v=$(),S=$(!0),P=p(()=>C.value.assets&&i.value&&C.value.assets[i.value.address]?pe(C.value.assets[i.value.address].balance,i.value.decimals):0),T=p(()=>C.value.assets&&u.value&&C.value.assets[u.value.address]?pe(C.value.assets[u.value.address].balance,u.value.decimals):0),H=c=>{c==="fromCoin"?(S.value=!0,y.value=P.value>0?i.value.symbol=="SUI"?new a(Number(P.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(P.value)).sub(new a(.05)).toString():String(P.value):""):(S.value=!1,v.value=T.value>0?u.value.symbol=="SUI"?new a(Number(T.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(T.value)).sub(new a(.05)).toString():String(T.value):"")},g=c=>{c==="fromCoin"?(S.value=!0,y.value=P.value>0?yo(new a(Number(P.value)).div(2).toString(),i.value.decimals).toString():""):(S.value=!1,v.value=T.value>0?yo(new a(Number(T.value)).div(2).toString(),u.value.decimals).toString():"")},f=p(()=>X.value?_e(X.value):{}),h=p(()=>j.value.slippage),q=$("--"),M=$("--"),eo=c=>{const R=new a(t.value.autoPoolPositionInfo.liquidity),Q=new a(c.toString());if(R.toNumber()>0&&Q.toNumber()>0){const V=Q.add(R);console.log("totalLiquidity:",Q.div(V).mul(100).toString());const uo=Q.div(V).mul(100).toNumber(),no=qe(uo),x=no==-1?2:no+2,po=yo(Q.div(V).mul(100).toNumber(),x);console.log(t.value.decimals,"##positionInfo.value.decimal");const go=new a(1).div(new a(Math.pow(10,t.value.lpInfo.decimals))).toString();console.log(po,go,"###288"),Number(po)<Number(go)?q.value=`<${go}`:q.value=po}else Q.toNumber()>0&&R.toNumber()<=0?q.value="100":q.value="--"},B=c=>{const R=new a(c.toString()),Q=new a(h.value).div(100),V=R.mul(Q),uo=R.sub(V),no=ve.get_lp_amount_by_liquidity({liquidity:t.value.liquidity,total_supply:t.value.total_supply},uo),x=new a(Math.pow(10,t.value.lpInfo.decimals)),po=new a(no).div(x).toString();M.value=po},m=$(!1),z=$(!1),so=$(""),lo=$(),io=async()=>{if(!t.value)return;const c=t.value.autoPoolPositionInfo.tick_lower_index,R=t.value.autoPoolPositionInfo.tick_upper_index,Q=To.sqrtPriceX64ToTickIndex(new E(t.value.current_sqrt_price));Q<c&&(k.value?m.value=!0:z.value=!0),Q>R&&(k.value?z.value=!0:m.value=!0);let V;if(console.log(y.value||v.value,"#fromCoinAmount.value || toCoinAmount.value"),y.value||v.value){S.value?V=new a(y.value).mul(Math.pow(10,i.value.decimals)).toString():V=new a(v.value).mul(Math.pow(10,u.value.decimals)).toString();let uo,no=S.value;if(console.log("执行##"),ao.value||co.value&&m.value&&z.value){console.log(k.value?S.value:!S.value,"#needReverse.value?fixedFromCoin.value:!fixedFromCoin.value");const l=await Xo.calculateDepositSwapAmount({lowerTick:c,upperTick:R,curSqrtPrice:new E(t.value.current_sqrt_price),fix_amount_a:no,input_amount:V,coinTypeA:t.value.autoPoolPositionInfo.coin_type_a,coinTypeB:t.value.autoPoolPositionInfo.coin_type_b,clmm_pool:t.value.address});if(console.log(l,"###swapResult"),l){uo=new E(l.afterSqrtPrice),V=new E(l.swapOutAmount),lo.value={swap_amount:l.swapInAmount,a2b:no},no=!no;const w=t.value.token_a.decimals,G=t.value.token_b.decimals;ee.value=To.sqrtPriceX64ToPrice(l.afterSqrtPrice,w,G).toString(),console.log(ee.value,"##afterCurrentPrice.value");const Z=new a(l.swapInAmount).div(new a(Math.pow(10,w))).toString(),N=new a(l.swapOutAmount).div(new a(Math.pow(10,G))).toString(),oo=k.value?t.value.token_b.symbol:t.value.token_a.symbol,to=k.value?t.value.token_a.symbol:t.value.token_b.symbol;so.value=`To deposit ${ao.value?y.value:v.value} ${ao.value?oo:to},
          ${Z} ${ao.value?oo:to}  will be traded for ${N} ${ao.value?to:oo} added to the pool.`}else uo=t.value.current_sqrt_price,V=new E(V),ee.value=""}else uo=t.value.current_sqrt_price,V=new E(V),ee.value="",so.value="";console.log(lo,"##swapParams");const{liquidityAmount:x,tokenMaxA:po,tokenMaxB:go}=f.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:i.value,tokenB:u.value,lowerTick:c,upperTick:R,coinAmount:V,iscoinA:no,roundUp:!0,slippage:Number(h.value)/100,curSqrtPrice:new E(uo)});console.log(t.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(go.toString(),po.toString(),t.value,"###323"),!ao.value&&!co.value&&(S.value?v.value=Number(go)>0?go:"":y.value=Number(po)>0?po:""),eo(x),B(x)}};ho(()=>t.value,c=>{c&&!Mo(c)&&(i.value=c==null?void 0:c.token_a,u.value=c==null?void 0:c.token_b,m.value=!1,z.value=!1,io())},{immediate:!0});const Y=p(()=>A.value.RATES),vo=p(()=>{var c,R,Q,V,uo,no,x,po,go,l;if((R=Y.value[(c=i.value)==null?void 0:c.address])!=null&&R.price&&((V=Y.value[(Q=u.value)==null?void 0:Q.address])!=null&&V.price)){console.log((no=Y.value[(uo=i.value)==null?void 0:uo.address])==null?void 0:no.price,"RATES.value[fromCoin.value?.address]?.price");const w=new a(y.value||0).mul(new a((po=Y.value[(x=i.value)==null?void 0:x.address])==null?void 0:po.price)),G=new a(v.value||0).mul(new a((l=Y.value[(go=u.value)==null?void 0:go.address])==null?void 0:l.price));return le(w.add(G).toString(),2)}else return"--"});ho(()=>y.value,(c,R)=>{c?io():(q.value="--",v.value="",M.value="--")},{immediate:!0}),ho(()=>v.value,(c,R)=>{c?io():(y.value="",q.value="--",M.value="--")},{immediate:!0});const{t:bo,locale:D}=ke(),mo=p(()=>{const c=Number(y.value)>Number(P.value),R=Number(v.value)>Number(T.value);return!y.value&&!v.value?bo("button.enterAmount"):c?bo("button.insufficientBalance",{name:i.value.symbol}):R?bo("button.insufficientBalance",{name:u.value.symbol}):"Add Liquidity"}),Wo=p(()=>{const c=Number(y.value)>Number(P.value),R=Number(v.value)>Number(T.value);return!!(!y.value&&!v.value||c||R||y.value<=0&&v.value<=0)}),Io=$(!0),{setIsShowSuccess:jo,setIsShowRejected:Oo,setIsShowWaiting:$o,setTransactionDesc:Po,setTransactionTxid:No,setPositiomNum:Lo}=J,Xo=be("Sui"),Ho=async()=>{var go,l;s.value=!1,Io.value=!0,No("");const c=`${L(y.value)} ${(go=i.value)==null?void 0:go.symbol}`,R=`${L(v.value)} ${(l=u.value)==null?void 0:l.symbol}`;Po(`Deposit ${y.value>0?c:""} ${v.value>0&&y.value>0?"and":""} ${v.value>0?R:""}`),$o(!0);const Q=S.value,V=t.value.autoPoolPositionInfo.tick_lower_index,uo=t.value.autoPoolPositionInfo.tick_upper_index,no=To.sqrtPriceX64ToTickIndex(new E(t.value.current_sqrt_price));let x;S.value?x=new a(y.value).mul(Math.pow(10,i.value.decimals)).toString():x=new a(v.value).mul(Math.pow(10,u.value.decimals)).toString();const po=t.value.rewarderInfo.map(w=>w.coinAddress);try{const w={lowerTick:V,upperTick:uo,coinAmount:x,fix_amount_a:Q,slippage:Number(h.value)/100,curSqrtPrice:new E(t.value.current_sqrt_price),id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.pool,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coin_type_a,coinTypeB:t.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:po,swapParams:lo.value,isOnlyA:!m.value&&!z.value?ao.value:!1,isOnlyB:!z.value&&!m.value?co.value:!1,currentTickIndex:no},G=await Xo.deposit(w);console.log(G,"===>payloadAdd11111");const Z=await C.value.currentWallet.signAndExecuteTransactionBlock(G);let N=f.value.handleTx(Z);if(console.log("toAdd###tx###",N),N&&N.hash){No(N.hash),$o(!1),jo(!0),console.log(t,"===>positionInfo");const oo={title:"Supplied",desc:`Deposit ${y.value>0?c:""} ${v.value>0&&y.value>0?"and":""} ${v.value>0?R:""}`,hash:N.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${y.value>0?c:""} ${v.value>0&&y.value>0?"and":""} ${v.value>0?R:""}`};X.value!=="Aptos"&&(oo.res=N.res),f.value.showTransitionPending(oo),await f.value.watchTransaction(oo)&&setTimeout(()=>{I.updatePositionItem(t.value.id),f.value.getAccount(C.value.address)},1e3),Lo()}else $o(!1),Oo(!0);y.value="",v.value="",Io.value=!1}catch(w){y.value="",v.value="",console.log("addError###",w),Io.value=!1,$o(!1),Oo(!0)}},ao=$(!1),co=$(!1);return{wallet:C,positionInfo:t,isShowAddModal:s,needReverse:k,fromCoin:i,toCoin:u,fromCoinAmount:y,toCoinAmount:v,fromCoinBlance:P,toCoinBlance:T,fixedFromCoin:S,maxBtnSelect:H,halfBtnSelect:g,totalAmountUSD:vo,addCommom:L,shareOfPool:q,minimumReceivedLP:M,addLiquidityBtnText:mo,addLiquidityBtnDisabled:Wo,toAdd:Ho,showToCoinLock:z,showFromCoinLock:m,isOnlyA:ao,isOnlyB:co,onlyToken:c=>{y.value="",v.value="",so.value="",c=="only-a"?(ao.value=!ao.value,co.value=!1):(co.value=!co.value,ao.value=!1)},onlyText:so}}});const Ko=o=>(Zo("data-v-db4296be"),o=o(),Jo(),o),xt={class:"auto-pool-add"},os={class:"auto-pool-add-content"},es={class:"liquidity-action-tab"},ns=Ko(()=>e("div",{class:"increase tab-active"},"Add",-1)),ts={class:"only-token"},ss=Ko(()=>e("div",null,"Deposit Amounts",-1)),ls={key:0},is={key:0},as={key:0,class:"card-item"},us={key:1,class:"card-item"},rs=Ko(()=>e("span",null,"Pool Closed",-1)),ds={class:"add-info"},vs={key:0,class:"only-text"},ms={class:"total-amount"},cs=Ko(()=>e("span",null,"Total Amount",-1)),ps={class:"total-amount"},fs=Ko(()=>e("span",null,"Share of Pool",-1)),ys={class:"total-amount"},_s=Ko(()=>e("span",null,"Minimum Received LP",-1));function bs(o,s,J,j,X,C){var t,n,k,i,u,y,v,S,P,T,H,g,f;const I=we,b=Ie,r=he,A=$e;return _(),O("div",xt,[e("div",os,[e("div",es,[ns,e("div",{class:"remove",onClick:s[0]||(s[0]=ge(h=>o.$emit("changeCurrentTab"),["stop"]))},"Remove")]),e("div",ts,[ss,e("div",null,[e("div",{class:"only-a",onClick:s[1]||(s[1]=h=>o.onlyToken("only-a"))},[e("p",null,[o.isOnlyA?(_(),O("span",ls)):ro("",!0)]),e("span",null,d(o.needReverse?(i=(k=o.positionInfo)==null?void 0:k.token_b)==null?void 0:i.symbol:(n=(t=o.positionInfo)==null?void 0:t.token_a)==null?void 0:n.symbol)+" only",1)]),e("div",{class:"only-b",onClick:s[2]||(s[2]=h=>o.onlyToken("only-b"))},[e("p",null,[o.isOnlyB?(_(),O("span",is)):ro("",!0)]),e("span",null,d(o.needReverse?(S=(v=o.positionInfo)==null?void 0:v.token_a)==null?void 0:S.symbol:(y=(u=o.positionInfo)==null?void 0:u.token_b)==null?void 0:y.symbol)+" only",1)])])]),e("div",{class:de(o.needReverse?"card-container reverse":"card-container")},[(o.needReverse?!o.isOnlyA:!o.isOnlyB)?(_(),O("div",as,[W(I,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":s[3]||(s[3]=h=>o.fromCoinAmount=h),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[4]||(s[4]=h=>o.maxBtnSelect("fromCoin")),onOnHalf:s[5]||(s[5]=h=>o.halfBtnSelect("fromCoin")),onOnInput:s[6]||(s[6]=h=>{o.fromCoinAmount=h}),onOnFocus:s[7]||(s[7]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock?(_(),_o(b,{key:0})):ro("",!0)])):ro("",!0),(o.needReverse?!o.isOnlyB:!o.isOnlyA)?(_(),O("div",us,[W(I,{modelValue:o.toCoinAmount,"onUpdate:modelValue":s[8]||(s[8]=h=>o.toCoinAmount=h),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[9]||(s[9]=h=>o.maxBtnSelect("toCoin")),onOnHalf:s[10]||(s[10]=h=>o.halfBtnSelect("toCoin")),onOnInput:s[11]||(s[11]=h=>{o.toCoinAmount=h}),onOnFocus:s[12]||(s[12]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock?(_(),_o(b,{key:0})):ro("",!0)])):ro("",!0)],2)]),(P=o.positionInfo)!=null&&P.is_pause?(_(),_o(r,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:Yo(()=>[rs]),_:1})):o.wallet.connected?(_(),_o(r,{key:1,class:"big-btn liquidity-btn",disabled:o.addLiquidityBtnDisabled,onClick:s[13]||(s[13]=h=>o.isShowAddModal=!0)},{default:Yo(()=>[e("span",null,d(o.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(_(),_o(r,{key:2,class:"big-btn liquidity-btn",onClick:s[14]||(s[14]=h=>o.wallet.setIsShowWalletModal(!0))},{default:Yo(()=>[e("span",null,d(o.$t("button.connectWallet")),1)]),_:1})),e("div",ds,[o.onlyText?(_(),O("div",vs,d(o.onlyText),1)):ro("",!0),e("div",ms,[cs,e("span",null,"$"+d(("addCommom"in o?o.addCommom:U(L))(o.totalAmountUSD)),1)]),e("div",ps,[fs,e("span",null,d(o.shareOfPool)+"%",1)]),e("div",ys,[_s,e("span",null,d(("addCommom"in o?o.addCommom:U(L))(o.minimumReceivedLP))+" "+d(o.needReverse?(T=o.toCoin)==null?void 0:T.symbol:(H=o.fromCoin)==null?void 0:H.symbol)+"-"+d(o.needReverse?(g=o.fromCoin)==null?void 0:g.symbol:(f=o.toCoin)==null?void 0:f.symbol),1)])]),o.isShowAddModal?(_(),_o(A,{key:3,"pool-info":o.positionInfo,"from-coin":o.needReverse?o.positionInfo.token_b:o.positionInfo.token_a,"to-coin":o.needReverse?o.positionInfo.token_a:o.positionInfo.token_b,"from-coin-amount":o.needReverse?o.toCoinAmount:o.fromCoinAmount,"to-coin-amount":o.needReverse?o.fromCoinAmount:o.toCoinAmount,"total-amount":o.totalAmountUSD,"share-of-pool":o.shareOfPool,"minimum-received-l-p":o.minimumReceivedLP,"is-only-a":o.isOnlyA,"is-only-b":o.isOnlyB,onOnClose:s[15]||(s[15]=h=>o.isShowAddModal=!1),onToAdd:o.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):ro("",!0)])}const ks=Eo(Qt,[["render",bs],["__scopeId","data-v-db4296be"]]),gs=Fo({components:{AutoPoolRemoveModal:Ce},setup(){const o=me(),s=p(()=>o),J=ae(),j=p(()=>J),X=p(()=>j.value.slippage),C=p(()=>j.value.chainName),I=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],b=$(25),r=Vo(),A=Uo(),t=p(()=>A),n=p(()=>(console.log(t.value.positionInfoObj[r.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),t.value.positionInfoObj[r.params.id])),k=p(()=>{var l;return(l=n.value)==null?void 0:l.needReverse}),i=$(),u=$(),y=$(!1),v=$(),S=p(()=>{var l;return(l=n.value)==null?void 0:l.myLiquidity}),P=$(!0),T=p(()=>C.value?_e(C.value):{}),H=be("Sui"),g=$(""),f=$(""),h=$("--"),q=$(!1),M=$(!1),eo=$(),B=$(!0),m=$(),z=Do(),so=p(()=>z),lo=p(()=>so.value.RATES),io=async()=>{if(P.value||!n.value)return;const l=n.value.autoPoolPositionInfo.tick_lower_index,w=n.value.autoPoolPositionInfo.tick_upper_index,G=To.sqrtPriceX64ToTickIndex(new E(n.value.current_sqrt_price));console.log(G,l,w,"###277"),G<l&&(k.value?q.value=!0:M.value=!0),G>w&&(k.value?M.value=!0:q.value=!0);let Z;if(console.log(g.value||f.value,"#fromCoinAmount.value || toCoinAmount.value"),g.value||f.value){B.value?Z=new a(g.value).mul(Math.pow(10,i.value.decimals)).toString():Z=new a(f.value).mul(Math.pow(10,u.value.decimals)).toString();let N,oo=B.value;if(console.log("执行##"),D.value||mo.value&&q.value&&M.value){const F=await H.calculateRemoveSwapAmount({lowerTick:l,upperTick:w,curSqrtPrice:new E(n.value.current_sqrt_price),fix_amount_a:oo,receiveAmount:Z,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address});if(console.log(F,"###swapResult"),F){N=new E(F.afterSqrtPrice),Z=new E(F.swapOutAmount),eo.value={swap_amount:F.swapInAmount,liquidity:F.liquidity,a2b:!oo},oo=!oo;const zo=n.value.token_a.decimals,xo=n.value.token_b.decimals,Ao=new a(F.swapInAmount).div(new a(Math.pow(10,zo))).toString(),So=new a(F.swapOutAmount).div(new a(Math.pow(10,xo))).toString(),Ro=k.value?n.value.token_b.symbol:n.value.token_a.symbol,ue=k.value?n.value.token_a.symbol:n.value.token_b.symbol;m.value=`To withdraw ${D.value?g.value:f.value} ${D.value?Ro:ue}, 
          ${So} ${D.value?ue:Ro}  in the pool will be traded for ${Ao} ${D.value?Ro:ue}`}else N=n.value.current_sqrt_price,Z=new E(Z),m.value=""}else N=n.value.current_sqrt_price,Z=new E(Z);console.log("执行了吗##");const{liquidityAmount:to,tokenMaxA:ko,tokenMaxB:K}=T.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:i.value,tokenB:u.value,lowerTick:l,upperTick:w,coinAmount:Z,iscoinA:oo,roundUp:!1,slippage:Number(X.value)/100,curSqrtPrice:new E(N)});console.log(n.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(K.toString(),ko.toString(),n.value,"###323"),!D.value&&!mo.value&&(B.value?f.value=Number(K)>0?K:"":g.value=Number(ko)>0?ko:"");const Co=ve.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},to.toString());v.value=new a(Co).div(new a(Math.pow(10,n.value.lpInfo.decimals))).toString();const fo=new a(v.value).div(new a(S.value)).mul(100);h.value=Co,Y.value=to.toString(),b.value=fo.toNumber()}},Y=$(),vo=p(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountA}),bo=p(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountB}),D=$(!1),mo=$(!1),Wo=p(()=>{var oo,to,ko,K;const l=(to=lo.value[(oo=i==null?void 0:i.value)==null?void 0:oo.address])==null?void 0:to.price,w=(K=lo.value[(ko=u==null?void 0:u.value)==null?void 0:ko.address])==null?void 0:K.price;console.log(l,w,g.value,f.value,"####totalWithdraw");let G=g.value!=="--"&&g.value!==""?g.value:0,Z=f.value!=="--"&&f.value!==""?f.value:0,N;return l&&w&&(D.value||mo.value?N=new a(D.value?G:Z).mul(new a(D.value?l:w)).toString():(N=new a(G).mul(new a(l)).add(new a(Z).mul(new a(w))).toString(),console.log(N,"result##"))),N>0&&N<.01?"<$0.01":`$${L(yo(N,2))}`}),Io=async l=>{if(!P.value)return;P.value=!0,n.value.token_a.decimals,n.value.token_b.decimals;const w=n.value.tick_lower_index,G=n.value.tick_upper_index;To.tickIndexToSqrtPriceX64(w),To.tickIndexToSqrtPriceX64(G);const Z=n.value.autoPoolPositionInfo.tick_lower_index,N=n.value.autoPoolPositionInfo.tick_upper_index,oo=To.sqrtPriceX64ToTickIndex(new E(n.value.current_sqrt_price));oo<Z&&(k.value?q.value=!0:M.value=!0),oo>N&&(k.value?M.value=!0:q.value=!0);let to="",ko,K;console.log(l.value,"##item.value"),console.log(K,"##coinAmount");let Co=B.value;if(console.log("执行##"),D.value||mo.value){if(D.value){const F=new a(x.value).mul(Math.pow(10,i.value.decimals)).mul(l.value).toString();console.log(F,"##amount"),K=yo(F,0),g.value=new a(x.value).mul(l.value).toString()}if(mo.value){const F=new a(x.value).mul(l.value).mul(Math.pow(10,u.value.decimals)).toString();K=yo(F,0),f.value=new a(x.value).mul(l.value).toString()}const fo=await H.calculateRemoveSwapAmount({lowerTick:w,upperTick:G,curSqrtPrice:new E(n.value.current_sqrt_price),fix_amount_a:Co,receiveAmount:K,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address});if(console.log(fo,"###swapResult"),fo){new E(fo.afterSqrtPrice),K=new E(fo.swapOutAmount),eo.value={swap_amount:fo.swapInAmount,liquidity:fo.liquidity,a2b:!Co},Co=!Co;const F=n.value.token_a.decimals,zo=n.value.token_b.decimals,xo=new a(fo.swapInAmount).div(new a(Math.pow(10,F))).toString(),Ao=new a(fo.swapOutAmount).div(new a(Math.pow(10,zo))).toString(),So=k.value?n.value.token_b.symbol:n.value.token_a.symbol,Ro=k.value?n.value.token_a.symbol:n.value.token_b.symbol;m.value=`To withdraw ${D.value?g.value:f.value} ${D.value?So:Ro}, 
          ${Ao} ${D.value?Ro:So}  in the pool will be traded for ${xo} ${D.value?So:Ro}`,to=fo.liquidity}else n.value.current_sqrt_price,K=new E(K),m.value="";console.log(ko,"result###"),h.value=new a(n.value.myLiquidity).mul(new a(l.value)).toString(),console.log(n.value,n.value.liquidity,to,h.value,"###positionInfo.value.liquidity"),v.value=new a(h.value),Y.value=to}else{const fo=new a(vo.value).mul(Math.pow(10,i.value.decimals)).mul(l.value).toString();K=yo(fo,0),g.value=new a(vo.value).mul(l.value).toString();const F=new a(bo.value).mul(l.value).mul(Math.pow(10,u.value.decimals)).toString();K=yo(F,0),f.value=new a(bo.value).mul(l.value).toString(),n.value.current_sqrt_price,K=new E(K),l.value!==1?ko=new a(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(l.value).toString():ko=new a(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),v.value=new a(ko).div(Math.pow(10,n.value.lpInfo.decimals)),to=ve.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},ko),h.value=yo(ko,0),Y.value=yo(to,0),console.log(to,"###newLiquidity525")}};ho(b,Be((l,w)=>{l!==w&&(Number(l)>100?b.value=100:l&&n.value?(console.log("687===>"),b.value=l,Io({value:b.value/100})):(g.value="",f.value=""))},300)),ho(()=>g.value,(l,w)=>{l?io():f.value=""},{immediate:!0}),ho(()=>f.value,(l,w)=>{l?io():g.value=""},{immediate:!0});const jo=Oe(),{setIsShowSuccess:Oo,setIsShowRejected:$o,setIsShowWaiting:Po,setTransactionDesc:No,setTransactionTxid:Lo,setPositiomNum:Xo,setTransactionDescText:Ho}=J,ao=$(!1),{t:co}=ke(),Qo=async()=>{var Co,fo;ao.value=!0,Lo("");const l=Number(g.value)>0?`${L(g.value,i.value.decimals)} ${i.value.symbol}`:"",w=Number(f.value)>0?`${L(f.value,u.value.decimals)} ${u.value.symbol}`:"";console.log(l,w,"###transactionDescTo"),No(co("tips.removeLiquidiyText",{from:k.value?w:l,and:Number(g.value)>0&&Number(f.value)>0?"and":"",to:k.value?l:w})),Po(!0);const G=co("modal.removeLiquidityText2");Ho(G);const Z=n.value.autoPoolPositionInfo.tick_lower_index,N=n.value.autoPoolPositionInfo.tick_upper_index,oo=To.tickIndexToSqrtPriceX64(Z),to=To.tickIndexToSqrtPriceX64(N),ko=n.value.rewarderInfo.map(F=>F.coinAddress);console.log(Y.value,h.value,"##liquidityVal.value");let K;B.value?K=new a(g.value).mul(Math.pow(10,i.value.decimals)).toString():K=new a(f.value).mul(Math.pow(10,u.value.decimals)).toString();try{const F={lowerSqrtPrice:oo,upperSqrtPrice:to,lpTokenAmount:new E(h.value),liquidity:new E(Y.value),curSqrtPrice:new E(n.value.object.current_sqrt_price),slippage:Number(X.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.pool,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:ko,swapParams:eo.value,fix_amount_a:B.value,isOnlyA:!q.value&&!M.value?D.value:!1,isOnlyB:!M.value&&!q.value?mo.value:!1,lowerTick:Z,upperTick:N,receiveAmount:K},zo=await H.remove(F);console.log(zo,"移除流动性payload");const xo=await s.value.currentWallet.signAndExecuteTransactionBlock(zo);let Ao=T.value.handleTx(xo);if(console.log("0331###remove###tx####",Ao),Ao&&Ao.hash){Lo(Ao.hash),Po(!1),Oo(!0);const So={title:co("common.removeLiquidity"),desc:"",hash:Ao.hash,descTransactions:`Remove ${l} ${Number(g.value)>0&&Number(f.value)>0?"and":""} ${w} from the pool`,sender:s.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${g.value} ${(Co=i.value)==null?void 0:Co.symbol} and ${f.value} ${(fo=u.value)==null?void 0:fo.symbol}`};So.res=Ao.res,T.value.showTransitionPending(So),await T.value.watchTransaction(So)&&(g.value="",f.value="",v.value="",b.value=0,setTimeout(()=>{A.updatePositionItem(n.value.id),T.value.getAccount(s.value.address)},1e3),Number(b.value)==100&&r.name=="auto-pool-detail"&&jo.push("/pool/auto"))}else Po(!1),$o(!0);ao.value=!1}catch(F){console.log("Remove error",F),ao.value=!1,Po(!1),$o(!0)}};ho(()=>n.value,(l,w)=>{l&&!Mo(l)&&(i.value=l==null?void 0:l.token_a,u.value=l==null?void 0:l.token_b,console.log("触发###"),(!w||w&&w.address!==l.address)&&Io({value:b.value/100}))},{immediate:!0});const c=p(()=>{const l=Number(v.value)>Number(S.value);return!v.value||v.value<=0?co("button.enterAmount"):l?"Invalid Amount":co("button.remove")}),R=p(()=>!1),Q=l=>(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||Go("/image/coins/sui-unknown.png"),V=l=>{g.value="",f.value="",P.value=!0,m.value="",l=="only-a"?(D.value=!D.value,mo.value=!1,B.value=!0):(mo.value=!mo.value,D.value=!1,B.value=!1)},uo=l=>{P.value=!0,b.value=100,l==="fromCoin"?B.value=!0:B.value=!1},no=l=>{P.value=!0,b.value=50,l==="fromCoin"?B.value=!0:B.value=!1},x=$(),po=async()=>{B.value;const l=n.value.token_a.decimals,w=n.value.token_b.decimals,G=D.value?bo.value:vo.value;console.log(G,"###receiveAmount");const Z=i.value.address===n.value.token_a.address&&u.value.address===n.value.token_b.address?0:1;if(D.value||mo.value){console.log(G,"##receiveAmount");let N=await T.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:Z==0,byAmountIn:!0,amount:G});console.log(N,N.estimatedAmountOut,l,w,"##preSwapRes"),x.value=new a(N.estimatedAmountOut).add(new a(D.value?vo.value:bo.value)).toString(),console.log(x.value,"###onlyTokenBalance.value"),Io({value:b.value/100})}};return ho(()=>[D.value,mo.value],([l,w])=>{l||w?po():Io({value:b.value/100})},{immediate:!0}),{removeLiquidityBtnText:c,removeLiquidityBtnDisabled:R,wallet:s,ratioArr:I,positionInfo:n,isShowRemoveModal:y,needReverse:k,fromCoin:i,toCoin:u,lpAmount:v,lpBalance:S,sliderVal:b,sFixD:yo,isSlider:P,fromCoinAmount:g,toCoinAmount:f,setPercent:Io,toRemove:Qo,addCommom:L,getCoinIcon:Q,isOnlyA:D,isOnlyB:mo,onlyToken:V,fixedFromCoin:B,maxBtnSelect:uo,halfBtnSelect:no,fromCoinBlance:vo,toCoinBlance:bo,showFromCoinLock:q,showToCoinLock:M,removeText:m,onlyTokenBalance:x,totalWithdraw:Wo,formatter:l=>`${l}%`}}});const te=o=>(Zo("data-v-86455c85"),o=o(),Jo(),o),hs={class:"auto-pool-add"},ws={class:"auto-pool-add-content"},Is={class:"liquidity-action-tab"},$s=te(()=>e("div",{class:"remove tab-active"},"Remove",-1)),Cs={class:"only-token"},As=te(()=>e("div",null,"Deposit Amounts",-1)),Ps={key:0},Ss={key:0},Ts={key:0,class:"card-item"},Rs={key:1,class:"card-item"},qs={class:"remove-ratio"},Bs={class:"remove-ratio-select"},Os={key:0,class:"ratio"},Ns={key:1,class:"ratio"},Ls={class:"ratio-list"},Ms=["onClick"],Ds=te(()=>e("span",null,"Pool Closed",-1)),Us={class:"remove-info"},Fs={key:0,class:"remove-text total-amount"},Vs={class:"total-amount"},Es=te(()=>e("span",null,"Total Withdraw",-1)),Ws={class:"total-amount"},js=te(()=>e("span",null,"LP Burn Amount",-1)),Xs={key:0},Hs={key:1};function zs(o,s,J,j,X,C){var n,k,i,u,y,v,S,P,T,H,g,f,h,q,M,eo,B;const I=we,b=Ie,r=Me,A=he,t=Ce;return _(),O("div",hs,[e("div",ws,[e("div",Is,[e("div",{class:"increase",onClick:s[0]||(s[0]=ge(m=>o.$emit("changeCurrentTab"),["stop"]))},"Add"),$s]),e("div",Cs,[As,e("div",null,[e("div",{class:"only-a",onClick:s[1]||(s[1]=m=>o.onlyToken("only-a"))},[e("p",null,[o.isOnlyA?(_(),O("span",Ps)):ro("",!0)]),e("span",null,d(o.needReverse?(u=(i=o.positionInfo)==null?void 0:i.token_b)==null?void 0:u.symbol:(k=(n=o.positionInfo)==null?void 0:n.token_a)==null?void 0:k.symbol)+" only",1)]),e("div",{class:"only-b",onClick:s[2]||(s[2]=m=>o.onlyToken("only-b"))},[e("p",null,[o.isOnlyB?(_(),O("span",Ss)):ro("",!0)]),e("span",null,d(o.needReverse?(P=(S=o.positionInfo)==null?void 0:S.token_a)==null?void 0:P.symbol:(v=(y=o.positionInfo)==null?void 0:y.token_b)==null?void 0:v.symbol)+" only",1)])])]),e("div",{class:de(o.needReverse?"card-container reverse":"card-container")},[(o.needReverse?!o.isOnlyA:!o.isOnlyB)?(_(),O("div",Ts,[W(I,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":s[3]||(s[3]=m=>o.fromCoinAmount=m),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.isOnlyA?o.onlyTokenBalance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,"amount-leabl":"Available",onOnMax:s[4]||(s[4]=m=>o.maxBtnSelect("fromCoin")),onOnHalf:s[5]||(s[5]=m=>o.halfBtnSelect("fromCoin")),onOnInput:s[6]||(s[6]=m=>{o.isSlider=!1,o.fromCoinAmount=m}),onOnFocus:s[7]||(s[7]=()=>{o.isSlider=!1,o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock?(_(),_o(b,{key:0})):ro("",!0)])):ro("",!0),(o.needReverse?!o.isOnlyB:!o.isOnlyA)?(_(),O("div",Rs,[W(I,{modelValue:o.toCoinAmount,"onUpdate:modelValue":s[8]||(s[8]=m=>o.toCoinAmount=m),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.isOnlyB?o.onlyTokenBalance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,"amount-leabl":"Available",onOnMax:s[9]||(s[9]=m=>o.maxBtnSelect("toCoin")),onOnHalf:s[10]||(s[10]=m=>o.halfBtnSelect("toCoin")),onOnInput:s[11]||(s[11]=m=>{o.isSlider=!1,o.toCoinAmount=m}),onOnFocus:s[12]||(s[12]=()=>{o.isSlider=!1,o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock?(_(),_o(b,{key:0})):ro("",!0)])):ro("",!0)],2),e("div",qs,[e("div",Bs,[Number(o.lpBalance)>=Number(o.lpAmount)?(_(),O("div",Os,d(o.sliderVal>0&&Number(("sFixD"in o?o.sFixD:U(yo))(o.sliderVal,2))<.01?"<0.01":("sFixD"in o?o.sFixD:U(yo))(o.sliderVal,2))+"% ",1)):(_(),O("div",Ns,"--")),e("div",Ls,[(_(!0),O(Ne,null,Le(o.ratioArr,(m,z)=>(_(),O("div",{key:z,class:de(["ratio-item",o.sliderVal==m.value?"ratio-item-active":""]),onClick:()=>{o.isSlider=!0,o.sliderVal=m.value}},d(m.name),11,Ms))),128))])]),W(r,{value:o.sliderVal,"onUpdate:value":s[13]||(s[13]=m=>o.sliderVal=m),"tip-formatter":o.formatter},null,8,["value","tip-formatter"])])]),(T=o.positionInfo)!=null&&T.is_pause?(_(),_o(A,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:Yo(()=>[Ds]),_:1})):o.wallet.connected?(_(),_o(A,{key:1,class:"big-btn liquidity-btn",disabled:o.removeLiquidityBtnDisabled,onClick:s[14]||(s[14]=m=>o.toRemove())},{default:Yo(()=>[e("span",null,d(o.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(_(),_o(A,{key:2,class:"big-btn liquidity-btn",onClick:s[15]||(s[15]=m=>o.wallet.setIsShowWalletModal(!0))},{default:Yo(()=>[e("span",null,d(o.$t("button.connectWallet")),1)]),_:1})),e("div",Us,[o.removeText&&(o.isOnlyA||o.isOnlyB)?(_(),O("div",Fs,d(o.removeText),1)):ro("",!0),e("div",Vs,[Es,e("span",null,d(o.totalWithdraw),1)]),e("div",Ws,[js,o.fromCoinAmount||o.toCoinAmount?(_(),O("span",Xs,d(("addCommom"in o?o.addCommom:U(L))(o.lpAmount))+" "+d(o.needReverse?(H=o.toCoin)==null?void 0:H.symbol:(g=o.fromCoin)==null?void 0:g.symbol)+"-"+d(o.needReverse?(f=o.fromCoin)==null?void 0:f.symbol:(h=o.toCoin)==null?void 0:h.symbol),1)):(_(),O("span",Hs,d(("addCommom"in o?o.addCommom:U(L))(o.lpAmount))+" "+d(o.needReverse?(q=o.toCoin)==null?void 0:q.symbol:(M=o.fromCoin)==null?void 0:M.symbol)+"-"+d(o.needReverse?(eo=o.fromCoin)==null?void 0:eo.symbol:(B=o.toCoin)==null?void 0:B.symbol),1))])]),o.isShowRemoveModal?(_(),_o(t,{key:3,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,onOnClose:s[16]||(s[16]=m=>o.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):ro("",!0)])}const Ys=Eo(gs,[["render",zs],["__scopeId","data-v-86455c85"]]),Gs=Fo({components:{AutoPoolV2Info:Ae,AutoPoolV2PositionRange:Pe,AutoPoolV2PoolComposition:Se,AutoPoolV2PoolLiquidity:Te,AutoPoolV2PoolAdd:ks,AutoPoolV2PoolRemove:Ys},setup(){const o=Uo(),s=Do(),J=ae(),j=p(()=>J),X=()=>{o.getAutoPoolAPY(),o.getAutoPoolList(),s.setPoolConfigList(j.value.chainName,j.value.filterCoinsObj)},C=$(),I=Vo();return ho(()=>I.query.action,b=>{b&&(C.value=b)},{immediate:!0}),{clickRefresh:X,currentTab:C}}});const Zs={class:"auto-pool-detail-v2"},Js={class:"detail-top"},Ks={class:"detail-bottom pc-detail"},Qs={class:"detail-bottom-left"},xs={class:"detail-bottom-right"},ol={class:"h5-detail"};function el(o,s,J,j,X,C){const I=Re,b=Ae,r=Pe,A=Se,t=Te,n=fe("AutoPoolV2PoolAdd"),k=fe("AutoPoolV2PoolRemove");return _(),O("div",Zs,[e("div",Js,[W(I,{onClickRefresh:o.clickRefresh},null,8,["onClickRefresh"]),W(b)]),e("div",Ks,[e("div",Qs,[W(r),W(A),W(t)]),e("div",xs,[o.currentTab=="add"?(_(),_o(n,{key:0,onChangeCurrentTab:s[0]||(s[0]=i=>o.currentTab="remove")})):(_(),_o(k,{key:1,onChangeCurrentTab:s[1]||(s[1]=i=>o.currentTab="add")}))])]),e("div",ol,[o.currentTab=="add"?(_(),_o(n,{key:0,onChangeCurrentTab:s[2]||(s[2]=i=>o.currentTab="remove")})):(_(),_o(k,{key:1,onChangeCurrentTab:s[3]||(s[3]=i=>o.currentTab="add")})),W(r),W(A),W(t)])])}const Pl=Eo(Gs,[["render",el],["__scopeId","data-v-b226cf01"]]);export{Pl as default};
