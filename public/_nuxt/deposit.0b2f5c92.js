import{_ as Nt}from"./back.fadb6a7e.js";import{_ as qt}from"./refresh-icon.586493e0.js";import{_ as Lt}from"./swap-setting.2d0b9201.js";import{u as po,a as Mt,c as In}from"./sha256.743615b9.js";import{u as bn,c as Ao,a as An,d as _e,b as gn,n as Sn,e as oo,t as Tn,p as xn,s as xo,f as Po,g as et}from"./pool.73654337.js";import{a as mo,r as g,y as kn,C as Rt,m as Z,D as we,b as st,e as fo,o as r,f as p,h as a,v,i as ge,z as ye,c as ve,x as w,p as Vo,k as Ko,q as Nn,t as co,j as We,I as ut,E as dt,w as De,S as Ut,u as Ae,B as ct,G as Ot,H as ot,F as No,s as en,J as vt,M as Bt,K as _t,l as Ft,L as $n,N as jt}from"./entry.529755dd.js";import{i as Xe}from"./import-icon.de3e6c66.js";import{_ as Dt}from"./assets-card.4c4fae88.js";import{_ as nt,a as tt,b as Wt}from"./icon-Add-Liquidity_2x.09e3193d.js";import{_ as Ht,a as Et,b as zt,c as Xt}from"./new-add-or-create.30bf4f08.js";import{_ as Vt}from"./network-tips.aa3b4237.js";/* empty css              *//* empty css              */import{D as h}from"./decimal.0e8aa3f1.js";import{g as at,t as lt}from"./tick.505fdad3.js";import{s as fn,m as Kt,l as Zt,b as Gt,a as Jt}from"./transform.c672907f.js";import{_ as Qt}from"./apr-tab.eb44dfa3.js";import{_ as Yt}from"./token-warning.e27aec4d.js";import{_ as xt}from"./apr-tips.e321caad.js";/* empty css              */import{p as ea}from"./precision.a7a6c57b.js";import{_ as oa}from"./coin-select.ce8b8c18.js";import{_ as na}from"./viewDetail.67748296.js";import{_ as ta}from"./token-warning-modal.3c86f0e5.js";/* empty css              */import{a as aa,s as la}from"./poolFee.fc11ddd4.js";import{u as ia}from"./notifi.23ae4b8b.js";import{_ as pt}from"./icon-selected_3x.09e9a6f0.js";/* empty css              *//* empty css              */import"./status-block.93b6bfa4.js";import"./index.a41aac23.js";import"./img-no-Positions_2x.7bd42ba7.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./useWhale.6db30493.js";import"./index.9322a2fe.js";const ra=mo({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,n){const D=g(!1),E=g(null),_=g(0),Y=g(20),G=bn(),le=po(),X=g(!1);kn(()=>{}),Rt(()=>{clearInterval(E.value)});const x=()=>{E.value=setInterval(()=>{var A;X.value||_.value<Y.value&&(_.value+=1,_.value===Y.value&&((A=e==null?void 0:e.poolInfo)!=null&&A.poolAddress&&G.updateCurrentPools(e.poolInfo.poolAddress,le.chainName),_.value=0))},1e3)},ee=Z(()=>le.slippage),W=()=>{n.emit("clearAll")},se=()=>{_.value=0,n.emit("clickRefresh")};we(()=>e.poolInfo,A=>{A&&!E.value&&x()},{immediate:!0});const $e=st();return{clickRefresh:se,isShowSwapSetting:D,countdown:_,autoRefreshTime:Y,slippage:ee,clearAll:W,checkNullObj:Ao,router:$e}}});const sa=e=>(Vo("data-v-f484e6e0"),e=e(),Ko(),e),ua={class:"title"},da={class:"left"},ca=sa(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),va={class:"deposit-progress"};function pa(e,n,D,E,_,Y){var X,x;const G=qt,le=Lt;return r(),p("div",ua,[a("div",da,[a("span",null,v(e.poolInfo?e.$t("common.concentratedLiquidity"):(x=(X=e.$route)==null?void 0:X.query)!=null&&x.action?e.$t("newAdd.createClmmPool"):e.$t("common.concentratedLiquidity")),1)]),a("div",{class:ye(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[a("div",{class:"slippage-icon",onClick:n[0]||(n[0]=ee=>e.isShowSwapSetting=!0)},[ca,a("span",null,v(e.slippage)+"%",1)]),a("div",va,[ge(G,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])],2),e.isShowSwapSetting?(r(),ve(le,{key:0,onOnClose:n[1]||(n[1]=ee=>e.isShowSwapSetting=!1)})):w("",!0)])}const ma=fo(ra,[["render",pa],["__scopeId","data-v-f484e6e0"]]);const fa=mo({props:{coinIcon:{type:String,default:""},coin:{type:Object,default:()=>({})}},setup(e){const n=po(),D=Z(()=>n),E=g(""),_=g(""),Y=g(""),G=bn(),le=Z(()=>G),X=g(""),x=W=>{var se;X.value=(W==null?void 0:W.logoURI)||(W==null?void 0:W.logo_url)||((se=le.value.tokensObj[W==null?void 0:W.address])==null?void 0:se.logo_url)||(D.value.theme==="default"?Xe("/image/coins/unknown.png"):Xe("/image/coins/sui-unknown.png"))};we(()=>[e.coin,le.value.tokensObj],([W,se])=>{var $e;W?(_.value=se&&se[W.address]&&(($e=se[W.address])==null?void 0:$e.labels),E.value=W.name,Y.value=W.symbol,x(W)):(_.value="",E.value="",Y.value="")},{immediate:!0,deep:!0});const ee=Z(()=>{var W,se,$e;return e.coinIcon||(($e=(se=le==null?void 0:le.value)==null?void 0:se.tokensObj[(W=e.coin)==null?void 0:W.address])==null?void 0:$e.logo_url)||(D.value.theme==="default"?Xe("/image/coins/unknown.png"):Xe("/image/coins/sui-unknown.png"))});return{store:D,importIcon:Xe,coinName:E,coinLabels:_,coinSymbol:Y,currentIcon:ee,coinLogo:X,getCoinIcon:x}}}),ga=e=>(Vo("data-v-5feb3574"),e=e(),Ko(),e),ba={class:"coin-block"},ka={class:"coin-info"},ha={class:"symbol"},Ca={key:0,class:"name"},ya={key:0,class:"label"},wa=ga(()=>a("div",null,[a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon_on"})])],-1));function Pa(e,n,D,E,_,Y){const G=Nn("image");return r(),p("div",ba,[a("div",null,[co(a("img",null,null,512),[[G,e.coinLogo]]),a("div",ka,[a("div",ha,v(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinName?(r(),p("div",Ca,[We(v(e.coin.name)+" ",1),e.store.theme=="default"?(r(),p("span",ya,v(e.coinLabels?`(${e.coinLabels})`:""),1)):w("",!0)])):w("",!0)])]),wa])}const Ia=fo(fa,[["render",Pa],["__scopeId","data-v-5feb3574"]]),Ta=mo({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})},showfromCoinLock:{type:Boolean,default:!1},showtoCoinLock:{type:Boolean,default:!1}},setup(){const e=po();return{storeIndex:Z(()=>e)}}});const $a={class:"create-pool-lock"},Sa={key:0,src:Ht,alt:""},Aa={key:1,src:Et,alt:""};function Na(e,n,D,E,_,Y){return r(),p("div",$a,[a("div",null,[e.storeIndex.theme=="default"?(r(),p("img",Sa)):(r(),p("img",Aa))])])}const qa=fo(Ta,[["render",Na],["__scopeId","data-v-5d070e17"]]),La=mo({props:{clickClear:{type:Boolean,default:!1},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},intPrice:{type:String,default:""}},setup(e,n){const D=g("");return{inpValue:D,changecurrentPrice:_=>{var G;console.log(_.target.value,"e.target.value"),console.log((G=e.fromCoin)==null?void 0:G.decimals,"==>props.fromCoin?.decimals");const Y=new RegExp("[^\\d-]*(\\d*(?:\\.\\d*)?).*$");_.target.value=_.target.value.replace(Y,"$1"),D.value=_.target.value,console.log(D.value,"===>inpValue.value"),n.emit("changecurrentPrice",D.value)}}}});const Ma={class:"set-init-price"},Ra={class:"init-price-tips"};function Ua(e,n,D,E,_,Y){var le,X,x,ee;const G=ut;return r(),p("div",Ma,[ge(G,{type:"text",placeholder:"0.0",value:e.intPrice,disabled:!((X=(le=e.$route)==null?void 0:le.query)!=null&&X.fee),onChange:e.changecurrentPrice},null,8,["value","disabled","onChange"]),a("div",Ra,v((x=e.toCoin)==null?void 0:x.symbol)+" per "+v((ee=e.fromCoin)==null?void 0:ee.symbol),1)])}const Oa=fo(La,[["render",Ua],["__scopeId","data-v-9e71be9e"]]),Ba=mo({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},emits:["onInput"],setup(e,n){const D=g(""),E=g("");let _=g(""),Y=g("");const G=dt(),le=po(),X=Z(()=>le),x=Z(()=>X.value.chainName?An(X.value.chainName):{}),ee=()=>{if(!(Number.isNaN(D.value)||Number(D.value)!==0&&!D.value||!e.poolInfo.tickSpacing))try{const f=at(new h(D.value.toString()),Number(A.value.tickSpacing)),H=lt(f+Number(A.value.tickSpacing));if(e.pType=="Min"&&Number(H.toString())>=Number(Y.value.toString()))return;const T=H.toString();n.emit("onInput",T)}catch{n.emit("onInput","")}},W=()=>{try{if(Number.isNaN(D.value)||!D.value||!e.poolInfo.tickSpacing)return;const f=at(new h(D.value),Number(A.value.tickSpacing)),H=lt(f-Number(A.value.tickSpacing)),T=H.toString();if(e.pType=="Max"&&Number(H)<=Number(_.value))return;n.emit("onInput",T)}catch{n.emit("onInput","")}},se=f=>{let H=f.toString().replace(/[^\d.]/g,"");const T=/^\d+(\.\d+)?$/;H.split(".").length>2&&!T.exec(H)&&(H=H.substr(0,H.length-1)),E.value=String(H),console.log(H,"v===>")},$e=f=>{var z,ue,Se,pe;const{TickUtil:H,TickMath:T,getNearestTickByTick:k}=x.value;console.log("0519###onBlur###event###",f);const l=f.target.value;console.log("0519###onBlur###value###",l);let c;if(l==="0"){c=-443636,n.emit("onInput","0");return}else{const F=T.priceToTickIndex(new h(l),(z=A.value.token_a)==null?void 0:z.decimals,(ue=A.value.token_b)==null?void 0:ue.decimals);console.log("0519###onBlur###t###",F),c=k(Number(F),Number(A.value.tickSpacing))}console.log("0519###onBlur###tick###",c);const R=T.tickIndexToPrice(new h(c),(Se=A.value.token_a)==null?void 0:Se.decimals,(pe=A.value.token_b)==null?void 0:pe.decimals);console.log("0519###onBlur###price###",R.toString()),n.emit("onInput",R.toString())};we(()=>e.defaultMinPrice,(f,H)=>{f!==H&&(console.log(e.defaultMinPrice,"props.defaultMinPrice===>"),_.value=e.defaultMinPrice,console.log(_.value,"props.minPrice.value===>"))},{immediate:!0}),we(()=>e.defaultMaxPrice,(f,H)=>{f!==H&&(Y.value=e.defaultMaxPrice)},{immediate:!0}),we(()=>E.value,f=>{console.log(f,"=sdajlaksjdkldas")},{immediate:!0}),we(()=>[e.inputValue,G.query.action],([f])=>{if(console.log(f,"==>newValue"),f&&f!=="0"&&f!=="∞"){D.value=f;const T=f.toString().split(".")[1];E.value=f!=="0"&&f!=="∞"&&T&&T.length>6?_e(f.toString(),6):f.toString()}else(f=="0"||f=="∞"||G.query.action)&&(E.value=f);console.log(E.value,"===> oValue.value")},{immediate:!0});const A=g({});we(()=>e.poolInfo,(f,H)=>{f&&(A.value=f)},{immediate:!0});const no=g("");return we(()=>e.currentPriceTab,f=>{no.value=f},{immediate:!0}),console.log(e,"props=======>"),{addPrice:ee,minusPrice:W,oValue:E,changeValue:se,isDisabled:no,route:G,onBlur:$e}}});const _a={class:"set-price-item"},Fa={class:"title"},ja={class:"input-box"},Da={class:"minus-btn"},Wa=["disabled"],Ha={class:"plus-btn"};function Ea(e,n,D,E,_,Y){const G=ut,le=Ut;return r(),p("div",_a,[a("div",Fa,v(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),ge(le,{loading:e.loading,active:"",paragraph:!1},{default:De(()=>[a("div",ja,[a("a",Da,[a("div",{class:ye(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:n[0]||(n[0]=(...X)=>e.minusPrice&&e.minusPrice(...X))},null,10,Wa)]),ge(G,{id:"pValu",value:e.oValue,"onUpdate:value":n[1]||(n[1]=X=>e.oValue=X),disabled:e.route.query.action&&!e.intPrice,autocomplete:"off",placeholder:"0",onChange:n[2]||(n[2]=X=>e.changeValue(X.target.value)),onBlur:n[3]||(n[3]=X=>e.onBlur(X))},null,8,["value","disabled"]),a("a",Ha,[a("div",{class:ye(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"addDis":"add"),onClick:n[4]||(n[4]=(...X)=>e.addPrice&&e.addPrice(...X))},null,2)])])]),_:1},8,["loading"]),a("p",{class:ye(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},v(e.toCoin&&e.toCoin.symbol)+" per "+v(e.fromCoin&&e.fromCoin.symbol),3)])}const it=fo(Ba,[["render",Ea],["__scopeId","data-v-782725c6"]]),za=mo({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},setup(e,n){let D=g(""),E=g(""),_=g(),Y=g(!1),G=g(!1);const le=g({}),X=po(),x=Z(()=>X);kn(()=>{D.value=e.min,E.value=e.max}),we(()=>e.currentPriceTab,(f,H)=>{f!==H&&(_.value=e.currentPriceTab)},{immediate:!0}),we(()=>e.min,(f,H)=>{f!==H&&(D.value=f,console.log(e.min,"===> props.min"))}),we(()=>e.max,(f,H)=>{f!==H&&(E.value=f)}),we(()=>e.poolInfo,(f,H)=>{f&&(le.value=f)},{immediate:!0});const ee=g("");we(()=>e.intPrice,f=>{console.log(e.intPrice,"===>props.intPrice"),ee.value=f},{immediate:!0,deep:!0});const W=f=>{console.log(f,"val===>123"),D.value=f,n.emit("onChangeMinPrice",f)},se=f=>{E.value=f,n.emit("onChangeMaxPrice",f)};we(Y,(f,H)=>{f!==H&&n.emit("onChangeFullRange",f)});const $e=()=>{D.value=e.defaultMinPrice,E.value=e.defaultMaxPrice,G.value=!1,Y.value=!1},A=()=>{G.value=!1,D.value="0",E.value="∞"};return we(Y,(f,H)=>{f!==H&&n.emit("onChangeFullRange",f)}),{store:x,changeMinPrice:W,changeMaxPrice:se,importIcon:Xe,resetPrice:$e,changeShowUnderStand:()=>{Y.value=!Y.value,Y.value?G.value=!0:$e(),G.value||(D.value=e.defaultMinPrice,E.value=e.defaultMaxPrice)},showUnderStand:G,minPrice:D,maxPrice:E,understand:A,isRadio:Y,initPirce:ee}}});const Xa={class:"set-price"},Va={class:"card-container"},Ka={key:0,class:"card"},Za=["src"],Ga={key:1,class:"understand"},Ja={class:"left"},Qa={class:"right"};function Ya(e,n,D,E,_,Y){const G=it,le=it,X=ct;return r(),p("div",Xa,[a("div",Va,[e.showUnderStand?(r(),p("div",Ga,[a("div",Ja,[a("p",null,v(e.$t("common.lowerEfficiency")),1),a("p",null,v(e.$t("common.lowerEfficiencyTips")),1)]),a("div",Qa,[ge(X,{onClick:e.understand},{default:De(()=>[We(v(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(r(),p("div",Ka,[ge(G,{value:e.minPrice,"onUpdate:value":n[0]||(n[0]=x=>e.minPrice=x),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,"int-price":e.initPirce,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","int-price","onOnInput","onAddValue","onDelValue"]),ge(le,{value:e.maxPrice,"onUpdate:value":n[1]||(n[1]=x=>e.maxPrice=x),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"int-price":e.initPirce,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","int-price","current-price-tab","onOnInput","onAddValue","onDelValue"]),a("img",{src:("importIcon"in e?e.importIcon:Ae(Xe))("/image/lmg-line@2x.png"),alt:""},null,8,Za)]))])])}const xa=fo(za,[["render",Ya],["__scopeId","data-v-d07618c3"]]);function rt(e,n,D){const E=new h(10).pow(n-D);return new h(1.0001).pow(e).mul(E)}const el=mo({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""}},setup(e,n){const D=g(1),E=g(""),_=g(""),Y=Z(()=>{var l,c,R;return W.sqrtPriceX64ToPrice((l=e.poolInfo)==null?void 0:l.current_sqrt_price,(c=e.poolInfo)==null?void 0:c.coinA.decimals,(R=e.poolInfo)==null?void 0:R.coinB.decimals).toString()}),G=Z(()=>{let l=0;return e.direction?l=(Number(e.minPrice)/Number(Y.value)-1)*100:l=(Number(e.minPrice)/Number(1/Number(Y.value))-1)*100,l=l>0&&l<.1?.1:l,l=l<0&&l>-.1?-.1:l,l}),le=Z(()=>{let l=0;return e.direction?l=(Number(e.maxPrice)/Number(Y.value)-1)*100:l=(Number(e.maxPrice)/Number(1/Number(Y.value))-1)*100,l=l>0&&l<.1?.1:l,l=l<0&&l>-.1?-.1:l,l}),X=po(),x=Z(()=>X),ee=Z(()=>x.value.chainName?An(x.value.chainName):{}),{TickMath:W,getNearestTickByTick:se}=ee.value,$e=()=>{const l=D.value/2;D.value=l,f(e.poolInfo,l)},A=()=>{const l=D.value*2;D.value=l,f(e.poolInfo,l)},no=(l=[])=>{let c=6;const R=Math.abs(Number(l[0])-Number(l[l.length-1]));return R>=6?c=0:R>=1?c=1:R>=.1?c=2:R>=.01?c=3:R>=.001?c=4:R>=1e-4?c=5:R>=1e-5?c=6:R>=1e-6?c=7:R>=1e-7&&(c=8),c},f=(l,c=1)=>{if(l&&l.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){console.log(e.poolInfo,"==>props.poolInfo");const R=Number(e.poolInfo.current_tick_index);console.log("0117###dataProcessing###currentTick###",R),console.log("0117###dataProcessing###props.poolInfo###",e.poolInfo),console.log("0117###dataProcessing###minPrice###",e.minPrice),console.log("0117###dataProcessing###maxPrice###",e.maxPrice),console.log("0117###dataProcessing###poolInfo###",e.poolInfo);let z=R+100*c,ue=R-100*c,Se,pe;if(e.maxPrice==="∞")pe=ee.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?pe=W.priceToTickIndex(new h(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):pe=W.priceToTickIndex(new h(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{pe=443636}if(e.minPrice==="0")Se=ee.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?Se=W.priceToTickIndex(new h(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):Se=W.priceToTickIndex(new h(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{Se=-443636}let F=0;if(e.currentPriceTab!=="full range"){if(R>=Se&&R<=pe){const oe=R-Se,L=pe-R;F=Math.max(Math.abs(oe),Math.abs(L))}else R<Se?F=Math.abs(pe-R):F=Math.abs(R-Se);z=R+F+100*c,ue=R-F-100*c,console.log(c,R,"===>zooms")}else{const oe=(Math.abs(R)>5e3,2e4);z=R+oe*c,ue=R-oe*c}ue<-443636&&(ue=-443636),z>443636&&(z=443636),console.log(ue,z,"===>201");const ae=new h(l.liquidity).div(Math.pow(10,8)).toString();console.log(ae,"==>currentLiquity");const V=e.tickList;console.log("0117####drawChart####tick_info_array####",V);const te=[],Oe=[];let J={};for(let oe=0;oe<V.length;oe++){if(J=V[oe],J.index<=R&&J.index>=ue){if(te.length<1&&oe!==0){const L=V[oe-1];te.unshift({...L,index:ue})}te.unshift(J)}else if(J.index>R&&J.index<=z&&(Oe.push(J),te.length<1&&oe!==0)){const L=V[oe-1];te.push({...L,index:ue})}if(J.index>z){const L=V[oe];if(Oe.push({...L,index:z}),te.length<1&&oe!==0){const Io=V[oe-1];te.push({...Io,index:ue})}break}}console.log(R,ue,z,"===>currentTick");let Pe="0";for(let oe=te.length-1;oe>=0;oe--)Pe=new h(Pe).plus(new h(te[oe].liquidityNet.toString()).div(Math.pow(10,8))).toString(),te[oe].liquityAmount=Pe;let de=ae;for(let oe=0;oe<Oe.length;oe++)de=new h(de).plus(new h(Oe[oe].liquidityNet.toString()).div(Math.pow(10,8))).toString(),Oe[oe].liquityAmount=de;console.log(te.length,Oe.length,"leftArray");let Ne=[];const ie=V&&V.length>0?{index:R,liquityAmount:Number(ae)}:{index:R,liquityAmount:0};(te.length>0||Oe.length>0)&&(console.log([ie,...Oe],"279===>"),Ne=[...te.reverse(),ie,...Oe],e.direction||(Ne=Ne.reverse()));const ze=[];V.forEach(oe=>{ze.push({...oe,liquidityGross:oe.liquidityGross.toString(),liquidityNet:oe.liquidityNet.toString()})}),console.log("0117####drawChart####testTickInfoArray####",ze),console.log("0117####drawChart####currentLiquity####",ae),console.log(Ne,"===>chartData"),T(Ne,ue,z,Se,pe,R)}};let H=g(!1);kn(()=>{document.body.clientWidth<750?H.value=!1:H.value=!0,window.onresize=()=>{document.body.clientWidth<750?H.value=!1:H.value=!0,f(e.poolInfo,D.value)}});const T=(l,c,R,z,ue,Se)=>{console.log("0117####drawChart####chartData####",l),console.log("0117####drawChart####tickMin####",c),console.log("0117####drawChart####tickMax####",R),console.log("0117####drawChart####minPriceTick####",z),console.log("0117####drawChart####maxPriceTick####",ue),console.log("0117####drawChart####currentTick####",Se),console.log("0117####drawChart####props.direction####",e.direction),console.log("0518###newd3###props.before7dContractPriceLowest###",e.before7dContractPriceLowest),console.log("0518###newd3###props.before7dContractPriceHighest###",e.before7dContractPriceHighest);let pe,F;e.direction?(pe=e.before7dContractPriceLowest&&Number(e.before7dContractPriceLowest)>0?W.priceToTickIndex(new h(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",F=e.before7dContractPriceHighest&&Number(e.before7dContractPriceHighest)>0?W.priceToTickIndex(new h(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(pe=e.before7dContractPriceLowest&&Number(e.before7dContractPriceLowest)>0?W.priceToTickIndex(new h(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",F=e.before7dContractPriceHighest&&Number(e.before7dContractPriceHighest)>0?W.priceToTickIndex(new h(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const ae={top:30,right:35,bottom:20,left:55};let V,te;H.value?(V=460-ae.left-ae.right,te=205-ae.top-ae.bottom):(V=340-ae.left-ae.right,te=205-ae.top-ae.bottom);const Oe=R-c,J=parseInt(String(Oe/4));let Pe=[c+J/4,c+J,c+2*J,R-J,R-J/4];const de=c,Ne=R,ie=V/(Ne-de);e.currentPriceTab==="full range"&&(Pe=[c,c+2*J,R]),console.log("0117####drawChart####xArr####",Pe),console.log("0117####drawChart####utickMin####",de),console.log("0117####drawChart####utickMax####",Ne),console.log("0117####drawChart####unit####",ie);const ze=Pe.map(M=>e.direction?rt(M,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new h(1).div(rt(M,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),oe=no(ze);fn("#chart").selectAll("*").remove();const L=fn("#chart").attr("width",V+ae.left+ae.right).attr("height",te+ae.top+ae.bottom).append("g").attr("transform",`translate(${ae.left},${ae.right})`),Io=Kt(l,function(M){return Number(Math.abs(M.liquityAmount))})||0,q=Zt().range([0,te]).domain([Io,0]);Gt().rangeRound([0,V]).padding(.1);const qo=L.append("g").attr("id","barsBox").selectAll("rect").data(l).enter().append("rect");x.value.theme=="default"?qo.attr("x",function(M,P){return P===0?0:e.direction?Math.abs(M.index-de)*ie:Math.abs(Ne-M.index)*ie}).attr("y",function(M,P){return e.direction?P===l.length-1?0:q(M.liquityAmount):P===l.length-1?0:q(l[P+1].liquityAmount)}).attr("width",function(M,P){return P===0&&l.length===1&&M.liquityAmount>0?V:(e.direction,P!==l.length-1?Math.abs(l[P+1].index-M.index)*ie:0)}).attr("height",function(M,P){return P===0&&l.length===1&&M.liquityAmount>0?te:e.direction?P===l.length-1?0:te-q(M.liquityAmount):P===l.length-1?0:te-q(l[P+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):qo.attr("x",function(M,P){return P===0?0:e.direction?Math.abs(M.index-de)*ie:Math.abs(Ne-M.index)*ie}).attr("y",function(M,P){return e.direction?P===l.length-1?0:q(Math.abs(M.liquityAmount)):P===l.length-1?0:q(Math.abs(l[P+1].liquityAmount))}).attr("width",function(M,P){return P===0&&l.length===1&&M.liquityAmount>0?V:(e.direction,P!==l.length-1?Math.abs(l[P+1].index-M.index)*ie:0)}).attr("height",function(M,P){if(P===0&&l.length===1&&M.liquityAmount>0)return te;if(e.direction)return P===l.length-1?0:Number(M.liquityAmount)?te-q(Math.abs(M.liquityAmount)):0;{if(P===l.length-1)return 0;const Ve=te-q(Math.abs(l[P+1].liquityAmount));return Number(l[P+1].liquityAmount)?Ve:0}}).attr("fill","#407497").attr("class","bars").attr("stroke-width",1).attr("stroke","#407497");const Lo=L.append("g");Lo.append("line").attr("x1",0).attr("y1",155).attr("x2",V).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const go=Lo.append("g");let To=0;if(e.direction){for(let M=0;M<Pe.length;M++){const P=_e(ze[M],oe)||"0";console.log("0423####price####",P),ze.push(P);const Ve=Math.abs(Pe[M]-de)*ie;let Le=0;for(let be=0;be<P.length;be++)P[be]==="1"?Le+=4.02:P[be]==="."?Le+=2.64:P[be]==="7"?Le+=5.48:Le+=6;console.log(Ve,"x=>>>"),go.append("text").text(P).attr("x",Ve-Le/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}To=Math.abs(Se-de)*ie}else{for(let M=Pe.length-1;M>=0;M--){const P=_e(ze[M],oe)||0;ze.push(P);const Ve=Math.abs(Pe[M]-Ne)*ie;let Le=0;for(let be=0;be<P.length;be++)P[be]==="1"?Le+=4.02:P[be]==="."?Le+=2.64:P[be]==="7"?Le+=5.48:Le+=6;go.append("text").text(P).attr("x",Ve-Le/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}To=Math.abs(Se-Ne)*ie}(x.value.theme=="default"?L.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):L.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+To+", 0)");let Ge,He,bo,ko;e.direction?(console.log("0525###d3###select###minPriceTick###",z),console.log("0525###d3###select###maxPriceTick###",ue),console.log("0525###d3###select###props.minPrice###",e.minPrice),console.log("0525###d3###select###props.maxPrice###",e.maxPrice),Ge=z<de?-100:parseInt(String(Math.abs(z-de)*ie)),He=ue<de?-100:parseInt(String(Math.abs(ue-de)*ie)),bo=pe<de?-100:Math.abs(pe-de)*ie,ko=F<de?-100:Math.abs(F-de)*ie):(He=z<de?-100:Math.abs(Ne-z)*ie,Ge=ue<de?-100:Math.abs(Ne-ue)*ie,ko=pe<de?-100:Math.abs(Ne-pe)*ie,bo=F<de?-100:Math.abs(Ne-F)*ie),e.minPrice==="0"&&(Ge=0),e.maxPrice==="∞"&&(He=V),H.value?E.value=V-Ge+60+"px":E.value=V-Ge+52+"px",_.value=He+74+"px",pe&&bo<V&&L.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+bo+", 0)"),F&&ko<V&&L.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+ko+", 0)");const Je=L.append("g").attr("id","left-handle"),Be=L.append("g").attr("id","right-handle");x.value.theme=="default"?(Je.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Je.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),Je.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),Je.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),Be.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Be.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),Be.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),Be.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(Je.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Je.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),Je.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),Je.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),Be.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Be.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),Be.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),Be.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),console.log("0525###d3###select###minPriceTickX###",Ge),console.log("0525###d3###select###maxPriceTickX###",He),Je.attr("transform","translate("+Ge+", 0)"),Be.attr("transform","translate("+He+", 0)");const Mo=Jt().extent([[0,0],[V,te]]).handleSize(30).on("end",jo);L.append("g").attr("class","brush").call(Mo).call(Mo.move,[Ge,He]);function jo(M){if(!M.sourceEvent||!M.selection)return;Je.attr("transform","translate("+M.selection[0]+", 0)"),Be.attr("transform","translate("+M.selection[1]+", 0)"),H.value?E.value=V-M.selection[0]+60+"px":E.value=V-M.selection[0]+52+"px",_.value=M.selection[1]+74+"px";let P,Ve;console.log("0525###d3###select###e.selection[0]###",M.selection[0]),console.log("0525###d3###select###e.selection[0]###",M.selection[1]),console.log("0525###d3###select###props.direction###",e.direction),console.log("0525###d3###select###width###",V),console.log("0525###d3###select###unit###",ie),console.log("0525###d3###select###utickMin###",de),console.log("0525###d3###select###utickMax###",Ne),console.log("0525###d3###select###props.poolInfo###",e.poolInfo);let Le=0,be=0;e.direction?(Le=se(parseInt(String(M.selection[0]/ie+de)),Number(e.poolInfo.tickSpacing)),P=W.tickIndexToPrice(Le,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),be=se(parseInt(String(M.selection[1]/ie+de)),Number(e.poolInfo.tickSpacing)),Ve=W.tickIndexToPrice(be,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),console.log("0525###d3###select###minTick###",Le),console.log("0525###d3###select###maxTick###",be),console.log("0525###d3###select###minPrice###",P),console.log("0525###d3###select###maxPrice###",Ve)):(be=se(Ne-M.selection[0]/ie,Number(e.poolInfo.tickSpacing)),P=1/W.tickIndexToPrice(be,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),Le=se(Ne-M.selection[1]/ie,Number(e.poolInfo.tickSpacing)),Ve=1/W.tickIndexToPrice(Le,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),n.emit("onChangeMinPrice",String(_e(String(P),6))),n.emit("onChangeMaxPrice",String(_e(String(Ve),6)))}x.value.theme=="default"?fn(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):fn(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632")};g(""),we(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab],([l,c,R,z])=>{console.log(l,c,R,R>c,"poolInfo && minPrice && maxPrice && (maxPrice > minPrice)"),l&&c&&R&&f(l,D.value)},{immediate:!0});const k=g(!0);return we(()=>e.chartLoading,(l,c)=>{l!==c&&(k.value=l)},{immediate:!0,deep:!0}),{store:x,loading:k,zoomOut:$e,zoomIn:A,rangeSizeLower:G,rangeSizeUpper:le,rangeSizeLowerPosition:E,rangeSizeUpperPosition:_,decimalFormat:gn,numberformat:Sn}}});const ol=e=>(Vo("data-v-beaf2b95"),e=e(),Ko(),e),nl={class:"chart-box"},tl={class:"chart"},al={class:"zoom"},ll=ol(()=>a("svg",{id:"chart"},null,-1));function il(e,n,D,E,_,Y){return r(),p("div",nl,[co(a("div",tl,[a("div",al,[a("div",{class:"amplification",onClick:n[0]||(n[0]=(...G)=>e.zoomOut&&e.zoomOut(...G))}),a("div",{class:"narrow",onClick:n[1]||(n[1]=(...G)=>e.zoomIn&&e.zoomIn(...G))})]),e.currentPriceTab!=="full range"?(r(),p("div",{key:0,class:"range-size range-size-lower",style:ot({right:e.rangeSizeLowerPosition})},v(("numberformat"in e?e.numberformat:Ae(Sn))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):w("",!0),e.currentPriceTab!=="full range"?(r(),p("div",{key:1,class:"range-size range-size-upper",style:ot({left:e.rangeSizeUpperPosition})},v(("numberformat"in e?e.numberformat:Ae(Sn))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):w("",!0),ll],512),[[Ot,!e.loading]])])}const rl=fo(el,[["render",il],["__scopeId","data-v-beaf2b95"]]),sl=mo({props:{poolInfo:{type:Object,default:()=>({})},aprRewardsParameter:{type:Number,default:30},label:{type:Boolean,default:!0}},setup(e,n){const D=g(""),E=g(""),_=g(""),Y=po(),G=Z(()=>Y);console.log(e,"props124====>");const le=bn(),X=Z(()=>le),x=(k,l)=>k&&l?ea.plus(Tn(k),Tn(l)):k>0?k:0,ee=k=>{let l=0;return k&&k.forEach(c=>{l+=Tn(String(c))}),String(l)},W=g([]),se=g([]),$e=g(""),A=g(""),no=g(!0);we(()=>[G.value.newTopPoolsObj,e.poolInfo,X.value.tokensObj,e.aprRewardsParameter],async([k,l,c])=>{var R;if(k&&l&&c){const z=k[l==null?void 0:l.poolAddress];if(z){console.log(z,"===>stats"),D.value=z&&z.apr_7day&&z.apr_7day.replace("%","")||"0",A.value=ee(z&&z.rewarder_apr),$e.value=x(z&&z.apr_7day,z&&ee(z.rewarder_apr)),console.log(e.poolInfo,"===>props.poolInfo"),console.log($e.value,"===> rewardApr.value"),E.value=oo(z.tvl_in_usd,2),_.value=oo(z.vol_in_usd_24h,2);const ue=l&&e.poolInfo.rewarder_infos||[],Se=[];for(let F=0;F<ue.length;F++){const ae=ue[F];if(c[ae.coinAddress]){const V=c[ae.coinAddress].decimals,te=gn(ae.emissionsEveryDay/Math.pow(10,V),4),Oe=Number(te)>0?oo(te):te,J=gn(Number(te)*((R=X.value.RATES[ae.coinAddress])==null?void 0:R.price),4);Se.push({...ae,logoUrl:c[ae.coinAddress].logoURI,day:Oe,dayUSD:J,symbol:c[ae.coinAddress].symbol,rewarder_display:l&&l[`rewarder_display${F+1}`]?l[`rewarder_display${F+1}`]:!1})}}console.log(Se,"mockArr206===>"),W.value=Se.filter(F=>F.rewarder_display);const pe=[];Se.forEach((F,ae)=>{c[F.coinAddress]&&pe.push({...F,symbol:c[F.coinAddress].symbol,rewarderApr:z.rewarder_apr[ae]&&z.rewarder_apr[ae].replace("%","")})}),se.value=pe.filter(F=>F.rewarder_display)}else D.value="0",E.value="--",_.value="--",$e.value=="0";console.log(se.value,"===>rewarderArr.value"),no.value=!1}},{immediate:!0,deep:!0});const f=()=>{n.emit("reviseValue")},H=k=>{var l;return(k==null?void 0:k.logoURI)||(k==null?void 0:k.logo_url)||((l=X.value.tokensObj[k==null?void 0:k.address])==null?void 0:l.logo_url)||(G.value.theme==="default"?Xe("/image/coins/unknown.png"):Xe("/image/coins/sui-unknown.png"))},T=Z(()=>X.value.tokensWarningObj);return console.log(T.value,"==>tokensObj"),console.log(e.poolInfo,"props.poolInfo====>"),{tokensWarningObj:T,rewarderInfo:W,rewarderArr:se,rewardApr:$e,rewardAprList:A,apr:D,liquidityTvl:E,vol24:_,addCommom:oo,reviseValue:f,loading:no,getCoinIcon:H,store:Y}}});const hn=e=>(Vo("data-v-5035ed5d"),e=e(),Ko(),e),ul={key:0,class:"pool-info"},dl=hn(()=>a("use",{"xlink:href":"#icon-icon_on"},null,-1)),cl=[dl],vl={key:0,class:"info-block-container"},pl={class:"info-block"},ml={class:"coin-tips"},fl={class:"left"},gl={alt:""},bl={class:"address"},kl=hn(()=>a("use",{"xlink:href":"#icon-icon-copy"},null,-1)),hl=[kl],Cl={class:"info-block"},yl={class:"coin-tips"},wl={class:"left"},Pl={alt:""},Il={class:"address"},Tl=hn(()=>a("use",{"xlink:href":"#icon-icon-copy"},null,-1)),$l=[Tl],Sl={class:"info-block"},Al={class:"leabl"},Nl={class:"text"},ql={class:"apr-hover-content"},Ll={class:"info-block"},Ml={class:"leabl"},Rl={class:"text"},Ul={class:"info-block"},Ol={class:"leabl"},Bl={class:"text"},_l={class:"info-block"},Fl={class:"leabl"},jl={class:"text"},Dl={key:1,class:"pool-rewards-info"},Wl={class:"rewards-list-all"},Hl=hn(()=>a("div",{class:"icon-sign"},null,-1)),El={alt:""},zl={class:"rewards-value"};function Xl(e,n,D,E,_,Y){const G=Yt,le=xt,X=vt,x=Nn("image");return e.poolInfo?(r(),p("div",ul,[e.loading?(r(),ve(X,{key:1})):(r(),p(No,{key:0},[a("div",{class:ye(e.label?"pool-info-border pool-info-title":"pool-info-title")},[We(v(e.$t("newAdd.poolInfo"))+" ",1),(r(),p("svg",{class:ye(e.label?"show-icon icon":"icon"),"aria-hidden":"true",onClick:n[0]||(n[0]=ee=>e.reviseValue())},cl,2))],2),e.label?(r(),p("div",vl,[a("div",pl,[a("div",ml,[a("div",fl,[co(a("img",gl,null,512),[[x,e.getCoinIcon(e.poolInfo.needReverse?e.poolInfo.token_b:e.poolInfo.token_a)]]),a("div",bl,v(e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address),1),ge(G,{address:e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address,"style-params":{width:"12px",height:"12px",left:"10px",bottom:"0px"}},null,8,["address"]),(r(),p("svg",{class:"icon","aria-hidden":"true",onClick:n[1]||(n[1]=ee=>e.store.copy(e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address))},hl))])])]),a("div",Cl,[a("div",yl,[a("div",wl,[co(a("img",Pl,null,512),[[x,e.getCoinIcon(e.poolInfo.needReverse?e.poolInfo.token_a:e.poolInfo.token_b)]]),a("div",Il,v(e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address),1),ge(G,{address:e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address,"style-params":{width:"12px",height:"12px",left:"10px",bottom:"0px"}},null,8,["address"]),(r(),p("svg",{class:"icon","aria-hidden":"true",onClick:n[2]||(n[2]=ee=>e.store.copy(e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address))},$l))])])]),a("div",Sl,[a("div",Al,v(e.$t("common.apr")),1),a("div",Nl,[We(v(e.poolInfo.is_display_rewarder?e.rewardApr>0&&e.rewardApr<.01?"<0.01":("addCommom"in e?e.addCommom:Ae(oo))(e.rewardApr,2):e.apr>0&&e.apr<.01?"<0.01":("addCommom"in e?e.addCommom:Ae(oo))(e.apr,2))+"% ",1),a("div",ql,[ge(le,{"l-item":{apr:e.apr,aprTotal:e.rewardApr,rewarder_apr:e.rewardAprList,is_display_rewarder:e.poolInfo.is_display_rewarder},"rewarder-info":e.rewarderArr},null,8,["l-item","rewarder-info"])])])]),a("div",Ll,[a("div",Ml,v(e.$t("common.liquidity")),1),a("div",Rl,"$"+v(e.liquidityTvl),1)]),a("div",Ul,[a("div",Ol,v(e.$t("common.volume24h")),1),a("div",Bl,"$"+v(e.vol24),1)]),a("div",_l,[a("div",Fl,v(e.$t("newAdd.tickSpacing")),1),a("div",jl,v(e.poolInfo&&e.poolInfo.tick_spacing),1)])])):w("",!0),e.poolInfo.is_display_rewarder&&e.label&&e.rewarderInfo&&e.rewarderInfo.length>0?(r(),p("div",Dl,[We(v("Farming Rewards")+" "),a("div",Wl,[(r(!0),p(No,null,en(e.rewarderInfo,ee=>(r(),p("div",{key:ee,class:ye(["rewards-list",ee.day==0?"rewards-none":""])},[Hl,co(a("img",El,null,512),[[x,ee.logoUrl]]),a("div",zl,[a("p",null,v(ee.day)+" "+v(ee.symbol)+" / "+v(e.$t("newAdd.day"))+" ",1)])],2))),128))])])):w("",!0)],64))])):w("",!0)}const Vl=fo(sl,[["render",Xl],["__scopeId","data-v-5035ed5d"]]),Kl=mo({components:{Modal:Bt},setup(){const e=po(),n=Z(()=>e);return{importIcon:Xe,store:n}}}),Zl=""+new URL("img-Creat-success_2x.b6f0a395.png",import.meta.url).href,Gl=""+new URL("img-Creat-success.9734ad6f.png",import.meta.url).href;const Jl=e=>(Vo("data-v-d7a9ceb3"),e=e(),Ko(),e),Ql=Jl(()=>a("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Yl={class:"create-success-container"},xl={key:0,src:Zl,alt:""},ei={key:1,src:Gl,alt:""},oi={class:"waiting-title"};function ni(e,n,D,E,_,Y){const G=_t("Modal");return r(),ve(G,{visible:!0,class:"",centered:"",title:"",width:"400px",footer:null,onCancel:n[0]||(n[0]=le=>e.$emit("onClose"))},{closeIcon:De(()=>[Ql]),default:De(()=>[a("div",Yl,[e.store.theme=="default"?(r(),p("img",xl)):(r(),p("img",ei)),a("p",oi,v(e.$t("newAdd.createPoolSuccessText")),1)])]),_:1})}const ti=fo(Kl,[["render",ni],["__scopeId","data-v-d7a9ceb3"]]),ai=mo({setup(){let e=g(!1);const{t:n,locale:D}=Ft(),E=Mt(),_=Z(()=>E),Y=po(),G=g(0),le=g(!1),X=g(!1),x=g(!1),ee=g("fromCoin"),W=g(""),se=g(""),$e=g(!1),A=g(!0),no=g(!1),f=g(!0),H=g(!1),T=g(""),k=g(""),l=g(""),c=g(""),R=g(""),z=g(""),ue=g(!1),Se=g(!1),pe=g(!1),F=g(""),ae=g(0),V=g(!0),te=g(!1),Oe=g([]),J=g(""),Pe=g(30),de=g("30D"),Ne=g("Estimated APR"),ie=g([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),ze=g(!0),oe=po(),L=Z(()=>oe),Io=Z(()=>{var o;return!!((o=d==null?void 0:d.query)!=null&&o.action&&(!i.value||!s.value||!F.value))}),q=Z(()=>L.value.chainName?An(L.value.chainName):{}),to=Z(()=>{var o;return(o=L.value)==null?void 0:o.filterCreatePoolCoin}),qo=o=>{console.log(o,"====>>>>item",o.num,Pe.value),Ye.updateCurrentPools($.value.poolAddress,L.value.chainName),de.value=o.time,Pe.value=o.num},Lo=()=>{console.log("reviseValue==>"),ze.value=!ze.value},go=g([]),To=()=>{G.value=0,d.query.action!=="create-pool"&&d.query.actions!=="new-position"&&(Qo(),so(),Ye.updateCurrentPools($.value.poolAddress,L.value.chainName)),Ye.setPoolConfigList(mn.value,L.value.filterCoinsObj)},Zo=Z(()=>Number(l.value)>0&&Number(c.value)>0&&Number(l.value)>Number(c.value)),Ge=o=>{no.value=o,l.value="0",c.value="∞"},He=Z(()=>{if(N.value.poolConfigList&&i.value&&s.value){const o=N.value.poolConfigList.filter(u=>{var b,y,C,S;return u.token_a.address.toUpperCase()===((b=i.value.address)==null?void 0:b.toUpperCase())&&u.token_b.address.toUpperCase()===((y=s.value.address)==null?void 0:y.toUpperCase())||u.token_b.address.toUpperCase()===((C=i.value.address)==null?void 0:C.toUpperCase())&&u.token_a.address.toUpperCase()===((S=s.value.address)==null?void 0:S.toUpperCase())});console.log(o,"===>info");const t=[];return o.forEach(u=>{t.push(Number(u.fee))}),console.log(t,"===>>result"),t}else return[]}),bo=o=>{const t={};let u=new h(0);o.forEach(U=>{u=u.add(new h(U.object.liquidity))});const b=[];let y=new h(0);o.forEach(U=>{const O=new h(U.object.liquidity),j=O.gt(0)?new h(O).div(u).mul(100).toString():0,B=xo(j,2);y=y.plus(B);const K=B.split(".");b.push({value:B,int:K[0],decimal:K[1],fee:U.fee})});let C=new h(100).minus(y).toNumber();const S=b.sort((U,O)=>Number(O.decimal)-Number(U.decimal));if(C)for(let U=0;U<S.length&&C;U++)S[U].value=new h(S[U].value).plus(.01).toString(),C=new h(C).minus(.01).toNumber();return o.forEach(U=>{var j;const O=(j=S.find(B=>U.fee===B.fee))==null?void 0:j.value;t[U.fee]={rateText:(O>0&&O<.01?"<0.01":O==0?0:xo(O,2))+"% select",rate:O}}),t},ko=Z(()=>{if(N.value.poolConfigList&&i.value&&s.value){const o=N.value.poolConfigList.filter(u=>{var C,S,U,O;const b=u.coin_a_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":u.coin_a_address,y=u.coin_b_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":u.coin_b_address;return console.log(u,"p===>1334"),b.toUpperCase()===((C=i.value.address)==null?void 0:C.toUpperCase())&&y.toUpperCase()===((S=s.value.address)==null?void 0:S.toUpperCase())||y.toUpperCase()===((U=i.value.address)==null?void 0:U.toUpperCase())&&b.toUpperCase()===((O=s.value.address)==null?void 0:O.toUpperCase())});return bo(o)}}),Je=Z(()=>[{label:.01+"% "+n("common.feeTier"),title:.01+"% ",fee:1e-4,text:n("newAdd.bestVeryStablePairs")},{label:.05+"% "+n("common.feeTier"),title:.05+"% ",fee:5e-4,text:n("newAdd.bestStablePairs")},L.value.chainName=="Aptos"?{label:.2+"% "+n("common.feeTier"),title:.2+"% ",fee:.002,text:n("newAdd.bestMostPairs")}:{label:.25+"% "+n("common.feeTier"),title:.25+"% ",fee:.0025,text:n("newAdd.bestMostPairs")},L.value.chainName=="Aptos"?{label:.6+"% "+n("common.feeTier"),title:.6+"% ",fee:.006,text:n("newAdd.besteExoticPairs")}:{label:"1% "+n("common.feeTier"),title:"1% ",fee:.01,text:n("newAdd.besteExoticPairs")}]),Be=Z(()=>Y.slippage),Mo=Z(()=>!i.value||!s.value),jo=Z(()=>{var o,t;return!T.value&&!k.value?(console.log("addLiquidityBtnDisabled11111"),!0):Number(T.value)>Number(Ke.value)||Number(k.value)>Number(Ze.value)?(console.log("addLiquidityBtnDisabled22222"),!0):M.value!==n("button.addLiquidity")&&M.value!==n("newAdd.preview")?(console.log("addLiquidityBtnDisabled33333###",M.value),!0):$.value&&$.value&&$.value.is_pause?(console.log("addLiquidityBtnDisabled44444"),!0):(o=d==null?void 0:d.query)!=null&&o.action&&!I.value&&!((t=I.value)!=null&&t.currentPrice)?(console.log("addLiquidityBtnDisabled55555"),!0):!!(Number(T.value)<=0&&Number(k.value)<=0||!ke.value&&Number(T.value)==0||!he.value&&Number(k.value)==0||pe.value)}),M=Z(()=>{var o,t,u;return $.value&&$.value.is_pause?"Pool Closed":!i.value||!s.value?n("modal.selectTokenModalTitle"):mn.value=="Sui"&&!He.value.includes(1e-4)&&!He.value.includes(5e-4)&&!He.value.includes(.0025)&&!He.value.includes(.01)&&!to.value[i==null?void 0:i.value.address]&&!to.value[(o=s.value)==null?void 0:o.address]?"Invalid Pool":(d.query.action||d.query.actions)&&!F.value&&In[L.value.chainName].hasCreatePool?(console.log("addLiquidityBtnDisabled11111"),"Select fee tier"):Mo.value?n("modal.selectTokenModalTitle"):!In[L.value.chainName].hasCreatePool&&!$.value?n("button.poolNotFound"):Number(T.value)>Number(Ke.value)?n("button.insufficientBalance",{name:i.value.symbol}):Number(k.value)>Number(Ze.value)?n("button.insufficientBalance",{name:s.value.symbol}):H.value?n("modal.selectTokenModalTitle"):(console.log($.value,"==>poolInfo.value"),console.log(!$.value&&((t=d==null?void 0:d.query)==null?void 0:t.action),"===>!poolInfo.value && route?.query?.action"),!$.value&&i.value&&s.value&&((u=d==null?void 0:d.query)==null?void 0:u.action)=="create-pool"?n("newAdd.preview"):!Number(T.value)&&!Number(k.value)?n("button.enterAmount"):c.value!=="∞"&&Number(l.value)>=Number(c.value)?n("newAdd.invalidRange"):n("button.addLiquidity"))}),P=Z(()=>{var o,t,u;return!$.value||Ao(L.value.addressHistTokens)||!L.value.addressHistTokens[(o=$.value)==null?void 0:o.poolAddress]?null:Object.fromEntries((u=L.value.addressHistTokens[(t=$.value)==null?void 0:t.poolAddress])==null?void 0:u.data.map(b=>[b.key,b.value]))}),Ve=Z(()=>A.value?P.value&&_e(Pe.value==7?P.value.before_7_d_contract_price_lowest:Pe.value==24?P.value.before_24_h_contract_price_lowest:P.value.before_30_d_contract_price_lowest,6)||0:P.value&&_e(new h(1).div(Pe.value==7?P.value.before_7_d_contract_price_highest:Pe.value==24?P.value.before_24_h_contract_price_highest:P.value.before_30_d_contract_price_highest).toString(),6)||0),Le=Z(()=>A.value?P.value&&_e(Pe.value==7?P.value.before_7_d_contract_price_highest:Pe.value==24?P.value.before_24_h_contract_price_highest:P.value.before_30_d_contract_price_highest,6)||0:(P.value&&_e(1/Number(Pe.value==7?P.value.before_7_d_contract_price_lowest:Pe.value==24?P.value.before_24_h_contract_price_lowest:P.value.before_30_d_contract_price_lowest),6))==1/0?0:P.value&&_e(1/Number(Pe.value==7?P.value.before_7_d_contract_price_lowest:Pe.value==24?P.value.before_24_h_contract_price_lowest:P.value.before_30_d_contract_price_lowest),6)||0),be=st(),i=g(),s=g();kn(()=>{document.body.clientWidth<750?(ze.value=!1,e.value=!1):(ze.value=!0,e.value=!0)});const on=o=>{var t,u;if((t=$.value)==null||t.token_a.decimals,(u=$.value)==null||u.token_b.decimals,console.log(o,"value1830===>"),d.query.action&&Fo.value&&o!==l.value){wn();return}o!==l.value&&J.value=="full range"?(dn({key:"custom",...ao.value.custom}),console.log(ao.value.custom.min,"priceConfigObj.value[custom].min")):(J.value!=="full range"&&J.value!=="custom"&&(J.value="custom"),l.value=o)},nn=o=>{if(d.query.action&&Fo.value&&o!==c.value){wn();return}o!==c.value&&J.value=="full range"?dn({key:"custom",...ao.value.custom}):(J.value!=="full range"&&J.value!=="custom"&&(J.value="custom"),c.value=o)},tn=()=>{var t;if(d.query.action)A.value=!A.value,I.value&&pn(_e(new h(1).div(I.value.currentPrice).toString(),(t=s==null?void 0:s.value)==null?void 0:t.decimals));else if(V.value=!0,V.value=!1,A.value=!A.value,l.value!==""&&c.value!==""&&l.value!=="0"&&c.value!=="∞"){const u=l.value,b=c.value;l.value=new h(1).div(b).toString(),c.value=new h(1).div(u).toString();const y=R.value,C=z.value;R.value=new h(1).div(C).toString(),z.value=new h(1).div(y).toString(),te.value=!1}const o=i.value;i.value=s.value,s.value=o,f.value?T.value=k.value:k.value=T.value};we([l,c],([o,t])=>{console.log(o,t,"==>minPrice,maxPrice"),Number(o)!==0&&Number(t)!==0&&so(),t!=="∞"&&Number(o)!==0&&Number(t)!==0&&Number(o)>=Number(t)?pe.value=!0:pe.value=!1,Number(o)==0&&Number(t)==0&&Fe.value&&(pe.value=!0,console.log("价格区间错误"))});const Ro=g(!1),Uo=g(!1),an=o=>{var t,u,b,y,C,S,U,O,j;ee.value=o,o==="fromCoin"?(W.value=((t=s.value)==null?void 0:t.address)||"",se.value=d.query.action=="create-pool"||d.query.actions=="new-position"||!$.value?(u=i.value)==null?void 0:u.address:$.value.needReverse?$.value.token_b.address:$.value.token_a.address,((b=d==null?void 0:d.query)==null?void 0:b.action)=="create-pool"&&((y=d==null?void 0:d.query)==null?void 0:y.from)==="pool"?Uo.value=!0:Uo.value=!1,Ro.value=!1):(W.value=((C=i.value)==null?void 0:C.address)||"",se.value=d.query.action=="create-pool"||d.query.actions=="new-position"||!$.value?(S=s.value)==null?void 0:S.address:$.value.needReverse?$.value.token_a.address:$.value.token_b.address,((U=d==null?void 0:d.query)==null?void 0:U.action)=="create-pool"&&((O=d==null?void 0:d.query)==null?void 0:O.from)==="pool"&&!to[(j=i.value)==null?void 0:j.address]?(console.log("0515###这里这里##fromCoin.value###",i.value),Ro.value=!0):Ro.value=!1,Uo.value=!1),$e.value=!0},Ie=g(null),Te=g(null),Go=g({}),Jo=g({}),ln=o=>{var b,y,C,S;H.value=!1;const t=$.value?$.value.needReverse?$.value.token_b:$.value.token_a:Ie.value,u=$.value?$.value.needReverse?$.value.token_a:$.value.token_b:Te.value;ee.value==="fromCoin"?(((b=i.value)==null?void 0:b.address)===(t==null?void 0:t.address)||!((y=i.value)!=null&&y.address)?(s.value&&o.address.toLowerCase()===(s==null?void 0:s.value.address.toLowerCase())&&(s.value=null,Te.value=null,F.value=""),i.value=o):(i.value&&o.address.toLowerCase()===(i==null?void 0:i.value.address.toLowerCase())&&(i.value=null,Ie.value=null,F.value=""),s.value=o),Ie.value=o,d.query.action||(d.query.fee="")):(((C=s.value)==null?void 0:C.address)===(u==null?void 0:u.address)||!((S=s.value)!=null&&S.address)?(i.value&&o.address.toLowerCase()===(i==null?void 0:i.value.address.toLowerCase())&&(i.value=null,Ie.value=null,F.value=""),s.value=o):(s.value&&o.address.toLowerCase()===(s==null?void 0:s.value.address.toLowerCase())&&(s.value=null,Te.value=null,F.value=""),i.value=o),Te.value=o,d.query.action||(d.query.fee="")),pn(""),$e.value=!1},rn=o=>{o==="fromCoin"?(f.value=!0,L.value.chainName==="Aptos"?T.value=Number(Ke.value)>0?i.value.symbol=="APT"?new h(Number(Ke.value)).sub(new h(.1)).lt(new h(0))?"0":new h(Number(Ke.value)).sub(new h(.1)).toString():String(Ke.value):"":T.value=Number(Ke.value)>0?i.value.symbol=="SUI"?new h(Number(Ke.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(Ke.value)).sub(new h(.05)).toString():String(Ke.value):""):(f.value=!1,L.value.chainName==="Aptos"?k.value=Number(Ze.value)>0?s.value.symbol=="APT"?new h(Number(Ze.value)).sub(new h(.1)).lt(new h(0))?"0":new h(Number(Ze.value)).sub(new h(.1)).toString():String(Ze.value):"":k.value=Number(Ze.value)>0?s.value.symbol=="SUI"?new h(Number(Ze.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(Ze.value)).sub(new h(.05)).toString():String(Ze.value):"")},sn=o=>{o==="fromCoin"?(f.value=!0,T.value=Number(Ke.value)>0?xo(new h(Number(Ke.value)).div(2).toString(),i.value.decimals).toString():""):(f.value=!1,k.value=Number(Ze.value)>0?xo(new h(Number(Ze.value)).div(2).toString(),s.value.decimals).toString():"")};we(T,(o,t)=>{console.log(T,"===>fromCoinAmount"),o==""&&f.value&&(k.value=""),o&&f.value&&so()}),we(k,(o,t)=>{console.log(o,"===>>>>newValsda"),o==""&&!f.value&&(T.value=""),o&&!f.value&&so()});const un=()=>{i.value=null,s.value=null,l.value="0",c.value="0",T.value="",k.value="",H.value=!0,F.value="",ue.value=!1,ke.value=!0,he.value=!0,V.value=!1},io=g(!1),{setIsShowSuccess:ho,setIsShowRejected:Co,setIsShowWaiting:Qe,setTransactionDesc:Do,setTransactionTxid:yo,setPositiomNum:Wo}=Y,d=dt(),Ye=bn(),$o=Z(()=>In[L.value.chainName].hasCreatePool);we(()=>[F.value,d.query.action,i.value,s.value,d.query.actions,$o.value],([o,t,u,b,y,C])=>{!o&&(t=="create-pool"||y=="new-position")&&u&&b&&C?(ue.value=!0,V.value=!1):(!u||!b)&&(ue.value=!1)},{immediate:!0});const N=Z(()=>Ye);we(()=>N.value.tokens,async o=>{if(o&&o.length>0){const t=o;if(d&&d.query&&d.query.tokena&&(console.log("0410###deposite###watch###route.query.tokena####",d.query.tokena),d.query.tokena)){const u=await q.value.getTokenBySymbol(t,d.query.tokena);i.value=u,Ie.value=u}if(d&&d.query&&d.query.tokenb&&d.query.tokenb){const u=await q.value.getTokenBySymbol(t,d.query.tokenb);s.value=u,Te.value=u}}},{immediate:!0});const wo=g({}),ke=g(!1),he=g(!1),Ho=g(),Eo=g(),Fe=g(),ro=g(),so=async()=>{var Me,ce,xe,Re,me,Ue;if(!l.value&&!c.value)return!1;if(!T.value&&!k.value&&!l.value&&!c.value)return;console.log($.value,"==》poolInfo.value");const o=$.value?$.value:I.value;if(console.log(o,"===>poolInfos"),Ao(o))return;console.log("添加流动性预计算=====>");const{TickUtil:t,TickMath:u,getNearestTickByTick:b}=q.value,y=o==null?void 0:o.token_a.decimals,C=o==null?void 0:o.token_b.decimals;let S,U,O,j,B,K,re,Ce,ne=o.current_tick_index,Q;if(o.token_a.address.toLowerCase()===i.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===s.value.address.toLowerCase()?Q=!0:Q=!1,console.log(Q,"=====>directs"),console.log("currentTickIndex####",ne),console.log("currentTickIndex####",ne),console.log("currentTickIndex####",ne),l.value==="0"&&c.value==="∞")O=t.getMinIndex(Number(o.tickSpacing)),j=t.getMaxIndex(Number(o.tickSpacing)),B=u.tickIndexToSqrtPriceX64(O),K=u.tickIndexToSqrtPriceX64(j);else if(J.value=="custom"||d.query.action){console.log(Q,"===>directs1866"),Q?(S=Number(l.value),U=Number(c.value)):(S=new h(1).div(c.value).toString(),U=new h(1).div(l.value).toString()),console.log("0518###pre###directs###",Q),console.log("0518###pre###minPrice###",l.value),console.log("0518###pre###maxPrice###",c.value),console.log("0518###pre###poolInfos###",o),console.log("0518###pre###decimalsA###",y),console.log("0518###pre###decimalsB###",C),console.log("0518###pre###currentTickIndex###",ne),console.log(S,U,"min max1875"),console.log(l.value,c.value,"===>maxPrice.value");try{re=S==0?-443636:u.priceToTickIndex(new h(S),y,C)}catch{re=-443636}try{Ce=u.priceToTickIndex(new h(U),y,C)}catch{Ce=443636}O=b(re,Number(o.tickSpacing)),j=b(Ce,Number(o.tickSpacing)),console.log("0523####min####",S),console.log("0523####max####",U),B=u.priceToSqrtPriceX64(new h(S),y,C);try{K=u.priceToSqrtPriceX64(new h(U),y,C)}catch{console.log("0523###test###max###",U),U===1/0&&(console.log("0523###test###max###11111"),K=u.tickIndexToSqrtPriceX64(t.getMaxIndex(Number(o.tickSpacing))))}console.log(O,"===>tick_lower"),console.log(j,"===>tick_upper"),console.log("0518###pre###tick_lower###",O,j,ne),console.log("0518###pre###tick_upper###",j)}else O=(Me=ao.value[J.value])==null?void 0:Me.lower,j=(ce=ao.value[J.value])==null?void 0:ce.upper,B=u.tickIndexToSqrtPriceX64(O),K=u.tickIndexToSqrtPriceX64(j);if(c.value!=="∞"&&O>=j){ke.value=!0,T.value="",he.value=!0,k.value="";return}if(console.log(j,ne,O,"1922"),c.value==="∞"||ne>=O&&ne<=j){ke.value=!1,he.value=!1;let qe;if(T.value||k.value){if(f.value){const uo=new h(T.value).mul(Math.pow(10,i.value.decimals)).toString();qe=new Po(uo)}else{const uo=new h(k.value).mul(Math.pow(10,s.value.decimals)).toString();qe=new Po(uo)}console.log(Q,"======>directs");const{liquidityAmount:fe,tokenMaxA:eo,tokenMaxB:Ee,tokenMaxAOrigin:je,tokenMaxBOrigin:vo}=q.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:o.token_a,tokenB:o.token_b,lowerTick:O,upperTick:j,coinAmount:qe,iscoinA:Q?f.value:!f.value,roundUp:!0,slippage:Number(Be.value)/100,curSqrtPrice:new Po(o.current_sqrt_price)});wo.value={liquidityAmount:fe,tokenMaxA:eo,tokenMaxB:Ee,tokenMaxAOrigin:je,tokenMaxBOrigin:vo},console.log(eo,Ee,"preAdd"),Q?f.value?k.value=Number(Ee)>0?Ee:"":T.value=Number(eo)>0?eo:"":f.value?k.value=eo:T.value=Ee}}else if(ne>j){if(Q?T.value="":k.value="",ke.value=Q,he.value=!Q,(xe=d==null?void 0:d.query)!=null&&xe.action&&(ke.value=!0,he.value=!0),T.value||k.value){let qe;if(Q){const fe=new h(k.value).mul(Math.pow(10,(Re=s.value)==null?void 0:Re.decimals)).toString();qe=new Po(fe),wo.value={liquidityAmount:q.value.estimateLiquidityForCoinB(B,K,qe),tokenMaxA:0,tokenMaxB:k.value}}else{const fe=new h(T.value).mul(Math.pow(10,(me=i.value)==null?void 0:me.decimals)).toString();qe=new Po(fe),wo.value={liquidityAmount:q.value.estimateLiquidityForCoinB(B,K,qe),tokenMaxA:0,tokenMaxB:T.value}}}}else if(ne<O){if(ke.value=!Q,he.value=Q,(Ue=d==null?void 0:d.query)!=null&&Ue.action&&(ke.value=!0,he.value=!0),Q?k.value="":T.value="",T.value||k.value){let qe;if(Q){const fe=new h(T.value).mul(Math.pow(10,i.value.decimals)).toString();qe=new Po(fe),console.log(B,"minPriceX64===>"),console.log(K,"maxPriceX64===>maxPriceX64"),console.log(fe,"===>amount"),wo.value={liquidityAmount:q.value.estimateLiquidityForCoinA(B,K,qe),tokenMaxA:T.value,tokenMaxB:0}}else{const fe=new h(k.value).mul(Math.pow(10,s.value.decimals)).toString();qe=new Po(fe),wo.value={liquidityAmount:q.value.estimateLiquidityForCoinA(B,K,qe),tokenMaxA:k.value,tokenMaxB:0}}}}else ke.value=!0,T.value="",he.value=!0,k.value=""},Oo=g(0);we(()=>{var o;return(o=d.query)==null?void 0:o.fee},o=>{o&&(Oo.value=o,F.value=Number(o)*100+"% "+n("common.feeTier"))},{immediate:!0,deep:!0});const zo=Z(()=>{var y,C,S,U,O;const o=(y=d==null?void 0:d.query)==null?void 0:y.fee,t=(C=d==null?void 0:d.query)==null?void 0:C.tokena,u=(S=d==null?void 0:d.query)==null?void 0:S.tokenb;let b=null;console.log("0501###basePoolInfo###tokena###",t),console.log("0501###basePoolInfo###tokenb###",u),console.log("0501###basePoolInfo###fromCoin###",(U=i==null?void 0:i.value)==null?void 0:U.address),console.log("0501###basePoolInfo###toCoin###",(O=s==null?void 0:s.value)==null?void 0:O.address),console.log("0501###basePoolInfo###fee###",o),console.log(N.value.poolConfigList,"===>pools.value.poolConfigList");for(let j=0;j<N.value.poolConfigList.length;j++){const B=N.value.poolConfigList[j];console.log(B,"p===>"),!t||!u?b={}:(B.token_a.address.toUpperCase()===(t==null?void 0:t.toUpperCase())&&B.token_b.address.toUpperCase()===(u==null?void 0:u.toUpperCase())||B.token_b.address.toUpperCase()===(t==null?void 0:t.toUpperCase())&&B.token_a.address.toUpperCase()===(u==null?void 0:u.toUpperCase()))&&(b=B)}return console.log("0501###baseInfo###",b),b}),$=Z(()=>{var t,u,b,y,C,S,U,O,j,B,K,re,Ce;const o=(t=d==null?void 0:d.query)==null?void 0:t.fee;if(i.value&&s.value){let ne=null;if(o)for(const Me in N.value.poolsObj){const ce=N.value.poolsObj[Me];(ce.token_a.address.toUpperCase()===((b=(u=i==null?void 0:i.value)==null?void 0:u.address)==null?void 0:b.toUpperCase())&&ce.token_b.address.toUpperCase()===((C=(y=s==null?void 0:s.value)==null?void 0:y.address)==null?void 0:C.toUpperCase())&&Number(ce.fee)==Number(Oo.value)||ce.token_b.address.toUpperCase()===((S=i==null?void 0:i.value.address)==null?void 0:S.toUpperCase())&&ce.token_a.address.toUpperCase()===((O=(U=s==null?void 0:s.value)==null?void 0:U.address)==null?void 0:O.toUpperCase())&&Number(ce.fee)==Number(Oo.value))&&(ne=ce)}const Q=[];if(!((j=d==null?void 0:d.query)!=null&&j.action)&&(!o||!ne)){for(const Me in N.value.poolsObj){const ce=N.value.poolsObj[Me];(ce.token_a.address.toUpperCase()===((B=i==null?void 0:i.value.address)==null?void 0:B.toUpperCase())&&ce.token_b.address.toUpperCase()===((K=s.value.address)==null?void 0:K.toUpperCase())||ce.token_b.address.toUpperCase()===((re=i==null?void 0:i.value.address)==null?void 0:re.toUpperCase())&&ce.token_a.address.toUpperCase()===((Ce=s.value.address)==null?void 0:Ce.toUpperCase()))&&Q.push(ce)}console.log(Q,"result2408===>"),Q&&Q.length>0&&(ne=Q.sort((Me,ce)=>{const xe=Me.coinAmountA+Me.coinAmountB;return ce.coinAmountA+ce.coinAmountB-xe})[0]),console.log(Q,"result===>2351")}return ne&&!Ao(ne)?(console.log(ne,"info===>"),ne):null}return null}),m=Z(()=>{var b,y;const o=(b=i==null?void 0:i.value)==null?void 0:b.address,t=(y=s==null?void 0:s.value)==null?void 0:y.address;let u=null;for(let C=0;C<N.value.poolConfigList.length;C++){const S=N.value.poolConfigList[C];!o||!t?u={}:(S.token_a.address.toUpperCase()===(o==null?void 0:o.toUpperCase())&&S.token_b.address.toUpperCase()===(t==null?void 0:t.toUpperCase())||S.token_b.address.toUpperCase()===(o==null?void 0:o.toUpperCase())&&S.token_a.address.toUpperCase()===(t==null?void 0:t.toUpperCase()))&&(u=S)}return console.log("0501###baseInfo###",u),u});we(()=>[zo.value,$.value,N.value.recommendRangesObj],(o,t)=>{var u,b,y,C,S;o[0]&&!o[1]&&o[2]&&!Ao(o[2])&&(!t||o[0]&&((u=o[0])==null?void 0:u.address)!==t[0]&&((b=t[0])!=null&&b.address))&&(y=o[0])!=null&&y.address&&!((C=d==null?void 0:d.query)!=null&&C.action)&&Ye.setSinglePool(o[0],o[2][(S=o[0])==null?void 0:S.address],L.value.chainName)},{immediate:!0,deep:!0});const ao=g({}),Bo=async(o,t)=>{var u,b,y,C;if(console.log("deposit##poolInfoWatch###value####",o),o){const{TickMath:S,getNearestTickByTick:U}=q.value;t&&(V.value=!0,ke.value=!1,he.value=!1),o.token_a.address.toLowerCase()===i.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===s.value.address.toLowerCase()?A.value=!0:A.value=!1,te.value=!0;const O=o.token_a.decimals,j=o.token_b.decimals;F.value=o.fee*100+"% "+n("common.feeTier");const B=o.current_tick_index;Fe.value=S.sqrtPriceX64ToPrice(o.current_sqrt_price,O,j).toString(),ro.value=new h(1).div(new h(Fe.value)).toString();const K=await q.value.getTicks(o);if(console.log(K,"result====>"),Oe.value=K?q.value.getTickDataFromUrlData(K):[],t){let re=N.value.poolPriceConfigObj&&N.value.poolPriceConfigObj[o.address]&&N.value.poolPriceConfigObj[o.address].recommend_ranges||{};const Ce=N.value.poolPriceConfigObj&&N.value.poolPriceConfigObj[o.address]&&N.value.poolPriceConfigObj[o.address].type||"",ne=B-Number(Ce=="unstable"?Number(o.tickSpacing)*2:Number(o.tickSpacing)*3),Q=B+Number(Ce=="unstable"?Number(o.tickSpacing)*2:Number(o.tickSpacing)*3),Me=(b=(u=$==null?void 0:$.value)==null?void 0:u.token_a)==null?void 0:b.decimals,ce=(C=(y=$==null?void 0:$.value)==null?void 0:y.token_b)==null?void 0:C.decimals,xe=q.value.TickMath.tickIndexToPrice(ne,Me,ce).toString(),Re=q.value.TickMath.tickIndexToPrice(Q,Me,ce).toString();re["full range"]={lower:-443636,upper:443636},re.custom={lower:ne,upper:Q,minPrice:xe,maxPrice:Re};const me=[];for(let Ue in re)re[Ue]&&me.push({...re[Ue],key:Ue});go.value=me,Ce?o.isSelfBuilt?J.value="custom":Ce=="stable"?J.value="suggested":J.value="passive":J.value="custom",ao.value=re,dn({key:J.value,...re[J.value]}),console.log(go,"===>currentPriceTabList")}V.value=!1}else V.value=!1},Xo=Z(()=>Ye.getPoolInfoSuccess);we(()=>$.value,(o,t)=>{var u,b,y,C,S,U,O,j,B,K,re,Ce;console.log("0419###poolInfo###watch###",o),console.log("0419###poolInfo###pools.value.poolsObj###",N.value.poolsObj),o&&o.current_sqrt_price?((!t||o.poolAddress!==t.poolAddress||o.current_sqrt_price!==t.current_sqrt_price)&&Bo(o,!t||o.poolAddress!==t.poolAddress),(d==null?void 0:d.name)=="deposit"&&be.push(`/deposit?poolAddress=${o==null?void 0:o.address}&tokena=${(u=i==null?void 0:i.value)==null?void 0:u.address}&tokenb=${(b=s==null?void 0:s.value)==null?void 0:b.address}&fee=${o==null?void 0:o.fee}`)):((y=d==null?void 0:d.query)==null?void 0:y.actions)=="new-position"||(!m.value&&$o.value&&((C=i==null?void 0:i.value)!=null&&C.address||(S=s==null?void 0:s.value)!=null&&S.address)?(F.value="",l.value="0",c.value="∞",ke.value=!1,he.value=!1,V.value=!1,Fe.value="",ro.value="",console.log("0501####333333",i==null?void 0:i.value),(d==null?void 0:d.name)=="deposit"&&be.push(`/deposit?action=create-pool&tokena=${(U=i==null?void 0:i.value)==null?void 0:U.address}&tokenb=${(O=s==null?void 0:s.value)==null?void 0:O.address}&from=${(j=d==null?void 0:d.query)==null?void 0:j.from}`)):$o.value&&!o&&!((B=d==null?void 0:d.query)!=null&&B.action)&&Xo.value&&!zo.value?(F.value="",l.value="0",c.value="∞",ke.value=!1,he.value=!1,V.value=!1,Fe.value="",ro.value="",console.log("0501####222222"),(d==null?void 0:d.name)=="deposit"&&be.push(`/deposit?action=create-pool&tokena=${(K=i==null?void 0:i.value)==null?void 0:K.address}&tokenb=${(re=s==null?void 0:s.value)==null?void 0:re.address}&from=${(Ce=d==null?void 0:d.query)==null?void 0:Ce.from}`)):(ke.value=!1,he.value=!1,V.value=!1,Fe.value="",ro.value="")),console.log(!zo.value,"===>getPoolInfoSuccess.value&& !basePoolInfo.value")},{immediate:!0});const Ke=Z(()=>_.value.assets&&i.value&&_.value.assets[i.value.address]?xn(_.value.assets[i.value.address].balance,i.value.decimals):"0"),Ze=Z(()=>_.value.assets&&s.value&&_.value.assets[s.value.address]?xn(_.value.assets[s.value.address].balance,s.value.decimals):"0"),Qo=async()=>{console.log("0412###resetTickList####");const o=await q.value.getTicks($.value);console.log("0412###resetTickList###result####",o);const t=o?q.value.getTickDataFromUrlData(o):[];Oe.value=t,console.log("0412###resetTickList###tickList####",t)},Cn=ia(),_o=Z(()=>N.value.currentPositionInfo),gt=async o=>{var B,K,re,Ce,ne,Q,Me,ce,xe,Re;console.log($.value,"===> poolInfo.value"),io.value=!1,N.value.currentPositionInfo={},yo(""),Do(n("tips.increaseLiquiditySuccess",{from:ke.value?"":`${T.value} ${(B=i.value)==null?void 0:B.symbol}`,and:!ke.value&&!he.value?"and":"",to:he.value?"":`${k.value} ${(K=s.value)==null?void 0:K.symbol}`})),Qe(!0);const t=A.value?f.value:!f.value;let u,b,y,C,S,U;const O=$.value.token_a.decimals,j=$.value.token_b.decimals;if(l.value==="0"&&c.value==="∞")y=q.value.TickUtil.getMinIndex(Number($.value.tickSpacing)),C=q.value.TickUtil.getMaxIndex(Number($.value.tickSpacing));else if(J.value=="custom"){A.value?(u=Number(l.value),b=Number(c.value)):(u=new h(1).div(c.value).toString(),b=new h(1).div(l.value).toString()),console.log("0519###toAdd###min###",u),console.log("0519###toAdd###max###",b),console.log("0519###toAdd###minPrice.value###",l.value),console.log("0519###toAdd###maxPrice.value###",c.value);try{S=u==0?q.value.TickUtil.getMinIndex(Number($.value.tickSpacing)):q.value.TickMath.priceToTickIndex(new h(u),O,j)}catch{S=q.value.TickUtil.getMinIndex(Number($.value.tickSpacing))}try{U=q.value.TickMath.priceToTickIndex(new h(b),O,j)}catch{U=q.value.TickUtil.getMaxIndex(Number($.value.tickSpacing))}y=q.value.getNearestTickByTick(S,Number($.value.tickSpacing)),C=q.value.getNearestTickByTick(U,Number($.value.tickSpacing))}else y=ao.value[J.value].lower,C=ao.value[J.value].upper;console.log(y,C,"add3155"),console.log($.value,"==>poolInfo.value.curSqrtPrice");try{const me=await q.value.getAddLiquidityTransactionPayload({pool:{poolAddress:$.value.poolAddress,token_a:$.value.token_a,token_b:$.value.token_b},amount:f.value?T.value:k.value,fix_amount_a:t,tick_lower:y,tick_upper:C,index:0,slippage:Number(Be.value)/100,roundUp:!0,collect_fee:!1,curSqrtPrice:new Po($.value.current_sqrt_price)});let Ue;if(L.value.chainName==="Aptos")Ue=await _.value.currentWallet.signAndSubmitTransaction(me);else{const qe=await _.value.currentWallet.signAndExecuteTransactionBlock(me);Ue=q.value.handleTx(qe)}if(console.log("0410###tx###",Ue),Ue&&Ue.hash){yo(Ue.hash),Qe(!1),ho(!0);const qe=qn();let fe;$.value.needReverse?$.value.token_a.address.toLowerCase()===i.value.address.toLowerCase()&&$.value.token_b.address.toLowerCase()===s.value.address.toLowerCase()?fe=!1:fe=!0:$.value.token_a.address.toLowerCase()===i.value.address.toLowerCase()&&$.value.token_b.address.toLowerCase()===s.value.address.toLowerCase()?fe=!0:fe=!1,console.log(fe,"===>directs");const eo={title:"Supplied",desc:n("tips.addLiquiditySuccessText",{from:ke.value?"":`${T.value} ${(re=i.value)==null?void 0:re.symbol}`,and:!ke.value&&!he.value?"and":"",to:he.value?"":`${k.value} ${(Ce=s.value)==null?void 0:Ce.symbol}`}),hash:Ue.hash,tit:"Position Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:fe?(ne=i.value)==null?void 0:ne.address:(Q=s.value)==null?void 0:Q.address,numa:fe?T.value:k.value,logoa:fe?N.value.tokensObj&&i.value&&i.value.address&&N.value.tokensObj[i.value.address]&&N.value.tokensObj[i.value.address].logoURI:N.value.tokensObj&&s.value&&s.value.address&&N.value.tokensObj[s.value.address]&&N.value.tokensObj[s.value.address].logoURI,tokenb:fe?(ce=s.value)==null?void 0:ce.address:(Me=i.value)==null?void 0:Me.address,numb:fe?k.value:T.value,logob:fe?N.value.tokensObj&&s.value&&s.value.address&&N.value.tokensObj[s.value.address]&&N.value.tokensObj[s.value.address].logoURI:N.value.tokensObj&&i.value&&i.value.address&&N.value.tokensObj[i.value.address]&&N.value.tokensObj[i.value.address].logoURI},text:`Deopsit ${ke.value?"":`${T.value} ${(xe=i.value)==null?void 0:xe.symbol}`} ${!ke.value&&!he.value?"and":""} ${he.value?"":`${k.value} ${(Re=s.value)==null?void 0:Re.symbol}`}`};L.value.chainName!=="Aptos"&&(eo.res=Ue.res),q.value.showTransitionPending(eo);const Ee=await q.value.watchTransaction(eo,!0);if(Ee.status){if(ho(!1),N.value.setCurrentPositionLoading(!0),X.value=!0,console.log(Ee.nftInfo,"===> watchInfo.nftInfo"),L.value.chainName==="Aptos"){if(await N.value.setCurrentPositionInfo(Ee.nftInfo[0].data.id.creator,Ee.nftInfo[0].data.id.collection,Ee.nftInfo[0].data.name,L.value.chainName),o)try{await Cn.subscribePosition({pool_address:_o.value.poolAddress,position_index:_o.value.index},_o.value.nftHash)}catch(je){console.log(je,"e")}}else{const je=Ee.nftInfo,vo=await et(2e3);if(await N.value.setCurrentPositionInfo(je==null?void 0:je.pool,"","",L.value.chainName,je==null?void 0:je.position),await et(1e3),console.log("0529###nftInfo###",je),console.log("0529###currentPositionInfo.value.index###",_o.value.index),o)try{await Cn.subscribePosition({pool_address:_o.value.poolAddress,position_index:_o.value.index},_o.value.nftHash)}catch(uo){console.log(uo)}}setTimeout(()=>{Ye.updateCurrentPools($.value.poolAddress,L.value.chainName),q.value.getAccount(_.value.address)},3e3),setTimeout(async()=>{Qo()},3e3)}Wo()}else Qe(!1),Co(!0);T.value="",k.value=""}catch(me){T.value="",k.value="",console.log("0330###Add liquidity Error###",me),Qe(!1),Co(!0)}},bt=o=>{switch(o){case"active":return n("newAdd.activeTips");case"passive":return n("newAdd.passiveTips");case"full range":return n("newAdd.fullRangTips");case"suggested":return n("newAdd.suggestedTips");case"custom":return n("newAdd.customTips")}},kt=o=>{switch(o){case"suggested":return n("newAdd.suggested");case"active":return n("newAdd.active");case"passive":return n("newAdd.conservative");case"full range":return n("newAdd.fullRange");case"custom":return n("newAdd.custom")}},dn=o=>{console.log("priceTab====>",o),console.log("priceTab###poolInfo###",$.value),J.value=o.key.toLowerCase();const t=$.value.token_a.decimals,u=$.value.token_b.decimals,{lower:b,upper:y}=o,C=q.value.TickMath.tickIndexToPrice(b,t,u).toString(),S=q.value.TickMath.tickIndexToPrice(y,t,u).toString();if(o.key=="full range"){Ho.value=b,Eo.value=y,Ge(!0),so();return}console.log(A.value,"===>direct.value"),A.value?(R.value=String(C),l.value=String(C),z.value=String(S),c.value=String(S),Ho.value=b,Eo.value=y,so()):(R.value=String(1/Number(S)),l.value=String(1/Number(S)),z.value=String(1/Number(C)),c.value=String(1/Number(C)),Ho.value=q.value.TickMath.priceToTickIndex(new h(1/Number(S)),t,u),Eo.value=q.value.TickMath.priceToTickIndex(new h(1/Number(C)),t,u),so())},ht=Z(()=>N.value.tokensObj&&i.value.address&&N.value.tokensObj[i.value.address]&&N.value.tokensObj[i.value.address].logoURI),Ct=Z(()=>N.value.tokensObj&&s.value.address&&N.value.tokensObj[s.value.address]&&N.value.tokensObj[s.value.address].logoURI),qn=()=>{var u,b,y,C,S,U,O,j;let o=null;const t=N.value.poolConfigList;for(let B=0;B<t.length;B++){const K=t[B];if(K.token_a.address.toUpperCase()===((b=(u=i==null?void 0:i.value)==null?void 0:u.address)==null?void 0:b.toUpperCase())&&K.token_b.address.toUpperCase()===((C=(y=s==null?void 0:s.value)==null?void 0:y.address)==null?void 0:C.toUpperCase())||K.token_b.address.toUpperCase()===((U=(S=i==null?void 0:i.value)==null?void 0:S.address)==null?void 0:U.toUpperCase())&&K.token_a.address.toUpperCase()===((j=(O=s==null?void 0:s.value)==null?void 0:O.address)==null?void 0:j.toUpperCase())){o=K;break}}return o},yt=o=>{var u,b,y,C,S,U,O,j,B,K;console.log(o,"item===>3480");const t=qn();if(t&&(Ie.value=t.needReverse?t==null?void 0:t.token_b:t==null?void 0:t.token_a,Te.value=t.needReverse?t==null?void 0:t.token_a:t==null?void 0:t.token_b,i.value=t.needReverse?t==null?void 0:t.token_b:t==null?void 0:t.token_a,s.value=t.needReverse?t==null?void 0:t.token_a:t==null?void 0:t.token_b,console.log("0524###test###11111###samePoolInfo###",t),A.value=i.value.address===((u=t==null?void 0:t.token_a)==null?void 0:u.address)),He.value.includes(o.fee))F.value=o.label,Oo.value=o.fee,be.push(`/deposit?tokena=${t?t.needReverse?(y=t==null?void 0:t.token_b)==null?void 0:y.address:(b=t==null?void 0:t.token_a)==null?void 0:b.address:A.value?i.value.address:s.value.address}&tokenb=${t?t.needReverse?(S=t==null?void 0:t.token_a)==null?void 0:S.address:(C=t==null?void 0:t.token_b)==null?void 0:C.address:A.value?s.value.address:i.value.address}&fee=${o.fee}`);else{if(console.log(to[i.value.address],"filterCreatePoolCoin[fromCoin.value.address]"),console.log(to[s.value.address],"filterCreatePoolCoin[toCoin.value.address]"),console.log(to.value,"filterCreatePoolCoin===>"),L.value.chainName!=="Aptos"&&!to.value[i.value.address]&&!to.value[s.value.address]){console.log(111,"===>111");return}F.value=o.label,$.value&&(l.value="",c.value=""),T.value="",k.value="",Fe.value="",ro.value="",l.value="",c.value="",cn.value="",vn.value="",console.log("====>3558"),be.push(`/deposit?action=create-pool&tokena=${t?t.needReverse?(O=t==null?void 0:t.token_b)==null?void 0:O.address:(U=t==null?void 0:t.token_a)==null?void 0:U.address:A.value?i.value.address:s.value.address}&tokenb=${t?t.needReverse?(B=t==null?void 0:t.token_a)==null?void 0:B.address:(j=t==null?void 0:t.token_b)==null?void 0:j.address:A.value?s.value.address:i.value.address}&fee=${o.fee}&from=${(K=d==null?void 0:d.query)==null?void 0:K.from}`)}},wt=g(!1),Pt=()=>{$.value,io.value=!0},I=g(null),cn=g(""),vn=g(""),pn=o=>{var U,O,j,B,K,re,Ce,ne,Q,Me,ce,xe;if(o?(cn.value=o,Fe.value=o,ro.value=o,vn.value=new h(1).div(new h(o)).toString(),V.value=!1):(cn.value="",Fe.value="",ro.value="",vn.value=""),!((U=Ie.value)!=null&&U.address)||!((O=Te.value)!=null&&O.address))return;let t=!1;const u=N.value.poolConfigList;let b=null;for(let Re=0;Re<u.length;Re++){const me=u[Re];if(me.token_a.address.toUpperCase()===((B=(j=Ie==null?void 0:Ie.value)==null?void 0:j.address)==null?void 0:B.toUpperCase())&&me.token_b.address.toUpperCase()===((re=(K=Te==null?void 0:Te.value)==null?void 0:K.address)==null?void 0:re.toUpperCase())){t=me.needReverse,b=me;break}else if(me.token_b.address.toUpperCase()===((ne=(Ce=Ie==null?void 0:Ie.value)==null?void 0:Ce.address)==null?void 0:ne.toUpperCase())&&me.token_a.address.toUpperCase()===((Me=(Q=Te==null?void 0:Te.value)==null?void 0:Q.address)==null?void 0:Me.toUpperCase())){t=me.needReverse,b=me;break}}let y=!1;q.value.getIsSortedSymbols((ce=Ie.value)==null?void 0:ce.address,(xe=Te.value)==null?void 0:xe.address)&&(y=!0);let C;y&&!A.value?C=!0:y&&A.value||!y&&A.value?C=!1:C=!0,console.log("0518###c####direct.value####",A.value),console.log("0518###c####createPoolNeedReverse####",y),console.log("0518###c####newDirect####",C);const S=L.value.chainName=="Aptos"?aa:la;if(i.value&&s.value&&o){const Re=b?b==null?void 0:b.token_a.decimals:y?Te.value.decimals:Ie.value.decimals,me=b?b==null?void 0:b.token_b.decimals:y?Ie.value.decimals:Te.value.decimals,Ue=o&&q.value.TickMath.priceToSqrtPriceX64(C?new h(1/o):new h(o),Re,me);console.log(Ue,"===>current_sqrt_price");const qe=o&&q.value.TickMath.priceToSqrtPriceX64(new h(1).div(o),i.value.decimals,s.value.decimals);console.log(!C,"===>!newDirect"),console.log(Re,me,"decimalsA,decimalsB===>");const fe=q.value.TickMath.priceToTickIndex(C?new h(1).div(o):new h(o),Re,me);console.log(fe,"==>currentTickIndex");const eo=fe-S[d.query.fee]*5,Ee=fe+S[d.query.fee]*5,je=q.value.TickMath.tickIndexToPrice(eo,Re,me).toString(),vo=q.value.TickMath.tickIndexToPrice(Ee,Re,me).toString();Fo.value?(l.value="0",c.value="∞"):C?(l.value=String(1/vo),c.value=String(1/je),R.value=String(1/vo),z.value=String(1/je)):(l.value=je,c.value=vo,R.value=je,z.value=vo),console.log("0518###c####createPoolFromCoin.value####",Ie.value),console.log("0518###c####createPoolToCoin.value####",Te.value),console.log("0518###c####createPoolNeedReverse####",y);const uo={token_a:b?b.token_a:y?Te.value:Ie.value,token_b:b?b.token_b:y?Ie.value:Te.value,isCreate:!0,tickSpacing:S[d.query.fee],currentPrice:o,current_sqrt_price:Ue,tick_lower:eo,tick_upper:Ee,current_tick_index:fe,currentPriceReverse:gn(String(1/o),6),reverse_current_sqrt_price:qe,needReverse:t,fee:d.query.fee};I.value=uo,console.log("0518###c####poolInfos####",uo),so()}else I.value=null,l.value="",c.value=""},It=async()=>{var j,B,K,re;if(L.value.chainName!=="Aptos"){Ln();return}io.value=!1;let o,t,u,b,y,C;const S=Ie.value.decimals,U=Te.value.decimals;yo(""),Do(n("tips.increaseLiquiditySuccess",{from:ke.value?"":`${T.value} ${(j=i.value)==null?void 0:j.symbol}`,and:!ke.value&&!he.value?"and":"",to:he.value?"":`${k.value} ${(B=s.value)==null?void 0:B.symbol}`})),Qe(!0),l.value==="0"&&c.value==="∞"?(u=q.value.TickUtil.getMinIndex(Number(I.value.tickSpacing)),b=q.value.TickUtil.getMaxIndex(Number(I.value.tickSpacing))):(A.value?(o=Number(l.value),t=Number(c.value)):(o=1/Number(c.value),t=1/Number(l.value)),y=o==0?-443636:q.value.TickMath.priceToTickIndex(new h(o),S,U),C=q.value.TickMath.priceToTickIndex(new h(t),S,U),u=q.value.getNearestTickByTick(y,Number(I.value.tickSpacing)),b=q.value.getNearestTickByTick(C,Number(I.value.tickSpacing)));const O=A.value?f.value:!f.value;try{const Ce=await q.value.getCreatPoolTransactionPayload({coinTypeA:Ie.value.address,coinTypeB:Te.value.address,tick_spacing:Number(I.value.tickSpacing),initialize_sqrt_price:new Po(I.value.current_sqrt_price),uri:"",current_tick_index:I.value.current_tick_index,max_amount_a:A.value?T.value:k.value,max_amount_b:A.value?k.value:T.value,tick_lower:u,tick_upper:b,slippage:Number(Be.value)/100,decimalsA:S,decimalsB:U,fix_amount_a:O,liquidityInput:wo.value});let ne;if(console.log(JSON.stringify(Ce),"===>creatPoolPayload"),L.value.chainName==="Aptos")ne=await _.value.currentWallet.signAndSubmitTransaction(Ce);else{const Q=await _.value.currentWallet.signAndExecuteTransactionBlock(Ce);ne=q.value.handleTx(Q)}if(ne&&ne.hash){yo(ne.hash),Qe(!1),ho(!0);const Q={title:"Created pool",desc:"Pool created successfully ",hash:ne.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(K=i.value)==null?void 0:K.address}`,numa:ke.value?"":`- ${T.value}`,logoa:N.value.tokensObj&&i.value&&i.value.address&&N.value.tokensObj[i.value.address]&&N.value.tokensObj[i.value.address].logoURI,tokenb:`${(re=s.value)==null?void 0:re.address}`,numb:he.value?"":`- ${k.value}`,logob:N.value.tokensObj&&s.value&&s.value.address&&N.value.tokensObj[s.value.address]&&N.value.tokensObj[s.value.address].logoURI},text:"Pool created successfully"};L.value.chainName!=="Aptos"&&(Q.res=ne.res),q.value.showTransitionPending(Q),(await q.value.watchTransaction(Q,!0)).status&&(ho(!1),le.value=!0,setTimeout(()=>{Ye.setPoolConfigList(L.value.chainName,L.value.filterCoinsObj),q.value.getAccount(_.value.address)},1e3)),Wo()}else Qe(!1),Co(!0);T.value="",k.value=""}catch(Ce){Ye.setPoolConfigList(L.value.chainName,L.value.filterCoinsObj),io.value=!1,console.log(Ce,"error===>"),T.value="",k.value="",Qe(!1),Co(!0)}},Ln=async()=>{var Ce,ne,Q,Me,ce,xe,Re,me,Ue,qe,fe,eo,Ee,je,vo,uo,Rn,Un,On,Bn,_n,Fn,jn,Dn,Wn,Hn,En,zn,Xn,Vn,Kn,Zn,Gn,Jn,Qn,Yn;io.value=!1,console.log("创建sui池子");let o=!1;q.value.getIsSortedSymbols(Ie.value.address,Te.value.address)&&(o=!0),yo("");const t=ke.value?"":`${T.value} ${(Ce=i.value)==null?void 0:Ce.symbol}`,u=he.value?"":`${k.value} ${(ne=s.value)==null?void 0:ne.symbol}`;console.log("0424###createPoolFromCoin###",Ie.value),console.log("0424###createPoolToCoin###",Te.value),console.log("0424###needReverse###",o),console.log("0424###createPoolInfo?.value?.needReverse###",(Q=I==null?void 0:I.value)==null?void 0:Q.needReverse),Do(n("tips.increaseLiquiditySuccess",{from:!o&&!((Me=I==null?void 0:I.value)!=null&&Me.needReverse)||o&&((ce=I==null?void 0:I.value)!=null&&ce.needReverse)?t:u,and:!ke.value&&!he.value?"and":"",to:!o&&!((xe=I==null?void 0:I.value)!=null&&xe.needReverse)||o&&((Re=I==null?void 0:I.value)!=null&&Re.needReverse)?u:t})),Qe(!0);let b="",y="",C="",S="",U="",O="",j=0,B=0,K=!1,re;if(o||(me=I==null?void 0:I.value)!=null&&me.needReverse){const So=o&&!((Ue=I==null?void 0:I.value)!=null&&Ue.needReverse);b=So?(Ee=(eo=I==null?void 0:I.value)==null?void 0:eo.token_b)==null?void 0:Ee.address:(fe=(qe=I==null?void 0:I.value)==null?void 0:qe.token_a)==null?void 0:fe.address,y=So?(Rn=(uo=I==null?void 0:I.value)==null?void 0:uo.token_a)==null?void 0:Rn.address:(vo=(je=I==null?void 0:I.value)==null?void 0:je.token_b)==null?void 0:vo.address,C=So?(_n=(Bn=I==null?void 0:I.value)==null?void 0:Bn.token_b)==null?void 0:_n.decimals:(On=(Un=I==null?void 0:I.value)==null?void 0:Un.token_a)==null?void 0:On.decimals,S=So?(Wn=(Dn=I==null?void 0:I.value)==null?void 0:Dn.token_a)==null?void 0:Wn.decimals:(jn=(Fn=I==null?void 0:I.value)==null?void 0:Fn.token_b)==null?void 0:jn.decimals,(Hn=I==null?void 0:I.value)!=null&&Hn.needReverse?(U=A.value?T.value:k.value,O=A.value?k.value:T.value,j=A.value?Number(l.value):1/Number(c.value),B=A.value?Number(c.value):1/Number(l.value),K=A.value?f.value:!f.value,re=A.value?Fe.value:1/Number(Fe.value)):(U=A.value?k.value:T.value,O=A.value?T.value:k.value,j=A.value?1/Number(c.value):Number(l.value),B=A.value?1/Number(l.value):Number(c.value),K=A.value?!f.value:f.value,re=A.value?1/Number(Fe.value):Fe.value)}else b=(zn=(En=I==null?void 0:I.value)==null?void 0:En.token_a)==null?void 0:zn.address,y=(Vn=(Xn=I==null?void 0:I.value)==null?void 0:Xn.token_b)==null?void 0:Vn.address,C=(Zn=(Kn=I==null?void 0:I.value)==null?void 0:Kn.token_a)==null?void 0:Zn.decimals,S=(Jn=(Gn=I==null?void 0:I.value)==null?void 0:Gn.token_b)==null?void 0:Jn.decimals,U=A.value?T.value:k.value,O=A.value?k.value:T.value,j=A.value?Number(l.value):1/Number(c.value),B=A.value?Number(c.value):1/Number(l.value),K=A.value?f.value:!f.value,re=A.value?Fe.value:1/Number(Fe.value);try{console.log("0501###toCreatePool###params###",{coinTypeA:b,coinTypeB:y,decimalsA:C,decimalsB:S,amountA:U,amountB:O,minPrice:j,maxPrice:B,fix_amount_a:K,tick_spacing:Number(I.value.tickSpacing),slippage:Number(Be.value)/100,price:re});const So=await q.value.getCreatPoolTransactionPayload({coinTypeA:b,coinTypeB:y,decimalsA:C,decimalsB:S,amountA:U,amountB:O,minPrice:l.value=="0"&&c.value=="∞"?"0":j,maxPrice:l.value=="0"&&c.value=="∞"?"∞":B,fix_amount_a:K,tick_spacing:Number(I.value.tickSpacing),slippage:Number(Be.value)/100,price:re}),At=await _.value.currentWallet.signAndExecuteTransactionBlock(So),Yo=q.value.handleTx(At);if(Yo&&Yo.hash){yo(Yo.hash),Qe(!1),ho(!0);const Pn={title:"Created pool",desc:"Pool created successfully ",hash:Yo.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(Qn=i.value)==null?void 0:Qn.address}`,numa:ke.value?"":`- ${T.value}`,logoa:N.value.tokensObj&&i.value&&i.value.address&&N.value.tokensObj[i.value.address]&&N.value.tokensObj[i.value.address].logoURI,tokenb:`${(Yn=s.value)==null?void 0:Yn.address}`,numb:he.value?"":`- ${k.value}`,logob:N.value.tokensObj&&s.value&&s.value.address&&N.value.tokensObj[s.value.address]&&N.value.tokensObj[s.value.address].logoURI},text:"Pool created successfully"};L.value.chainName!=="Aptos"&&(Pn.res=Yo.res),q.value.showTransitionPending(Pn),(await q.value.watchTransaction(Pn,!0)).status&&(ho(!1),le.value=!0,setTimeout(()=>{Ye.setPoolConfigList(L.value.chainName,L.value.filterCoinsObj),q.value.getAccount(_.value.address)},1e3)),Wo()}else Qe(!1),Co(!0);T.value="",k.value=""}catch(So){console.log("0407###createPool###error##",So),io.value=!1,Ye.setPoolConfigList(L.value.chainName,L.value.filterCoinsObj),T.value="",k.value="",Qe(!1),Co(!0)}},Tt=Z(()=>{var o,t,u,b,y,C;return((o=i.value)==null?void 0:o.isSelfBuilt)||((t=s.value)==null?void 0:t.isSelfBuilt)||((b=N.value.tokensObj[(u=i.value)==null?void 0:u.address])==null?void 0:b.isSelfBuilt)||((C=N.value.tokensObj[(y=s.value)==null?void 0:y.address])==null?void 0:C.isSelfBuilt)}),$t=o=>{var t;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((t=N.value.tokensObj[o==null?void 0:o.address])==null?void 0:t.logo_url)||(L.value.theme==="default"?Xe("/image/coins/unknown.png"):Xe("/image/coins/sui-unknown.png"))},yn=(o,t)=>{console.log(ee.value,"===>currentCoinKey.value"),console.log(o);const u=localStorage.getItem(o.address);console.log(N.value.tokensObj,"===>pools.value.tokensObj"),console.log(u,"===>coinLocak"),N.value.tokensObj&&N.value.tokensObj[o.address]&&N.value.tokensObj[o.address].isSelfBuilt&&!u&&(t=="fromCoin"&&(Go.value=o),t=="toCoin"&&(Jo.value=o),Mn.value=!0)};we(()=>[i.value,s.value],([o,t])=>{o&&!Ao(o)&&yn(o,"fromCoin"),t&&!Ao(t)&&yn(t,"toCoin")},{immediate:!0});const Mn=g(!1),St=()=>{mn.value!=="Aptos"?be.push("/pool/list"):be.push("/pools")},mn=Z(()=>L.value.chainName);we(()=>[L.value.chainName,L.value.filterCoinsObj],([o,t])=>{o&&t&&Ye.setPoolConfigList(o,t)},{immediate:!0}),we(()=>[He.value,to.value,i.value,s.value,$o.value],([o,t,u,b,y])=>{console.log(o.value,"==>isCreatePool.value"),console.log(t.value,"===>filterCreatePoolCoin.value"),console.log(u,"===>fromCoin"),console.log(b,"===>toCoin"),y&&o&&t&&!o.includes(1e-4)&&!o.includes(5e-4)&&!o.includes(.0025)&&!o.includes(.01)&&!t[u==null?void 0:u.address]&&!t[b==null?void 0:b.address]&&(F.value="")},{immediate:!0});const Fo=g(!0),wn=()=>{Ge(!Fo.value),Fo.value=!Fo.value,pn(I.value.currentPrice)};return{isFullRange:Fo,clickFullRange:wn,warningToCoin:Jo,warningFromCoin:Go,getTokenSource:yn,closeTokenWarning:St,isShowTokenWarning:Mn,chainName:mn,hasCreatePool:$o,isCreateSuccess:le,intPriceReverse:vn,isShowMask:Io,isPc:e,intPrice:cn,createPoolToCoin:Te,createPoolFromCoin:Ie,getPoolInfoSuccess:Xo,toCreatePool:It,createPoolInfo:I,changecurrentPrice:pn,isShowCreatePoolModal:wt,addOrCreate:Pt,halfBtnSelect:sn,selectFee:yt,isViewDetail:X,addCommom:oo,decimalUi:_e,fromCoinUrl:ht,toCoinUrl:Ct,t:n,wallet:_,toAdd:gt,chartLoading:V,currentTick:ae,tickList:Oe,poolInfo:$,storeIndex:L,importIcon:Xe,addLiquidityBtnText:M,slippage:Be,countdown:G,loading:x,fromCoin:i,toCoin:s,openCoinSelect:an,onCoinSelect:ln,existingCoins:W,lastSelectCoin:se,currentCoinKey:ee,showCoinSelect:$e,fromCoinAmount:T,toCoinAmount:k,maxBtnSelect:rn,fixedFromCoin:f,isShowLiquidityModal:io,direct:A,toggle:tn,edit:ue,inputValue:F,feeTierList:Je,minPrice:l,maxPrice:c,invalidPriceRange:Zo,defaultMinPrice:R,defaultMaxPrice:z,priceRangeChangeMin:on,priceRangeChangeMax:nn,toFullRange:Ge,clearAll:un,clickClear:H,positionError:pe,positionTips:Se,router:be,clickRefresh:To,fromCoinBlance:Ke,toCoinBlance:Ze,showToCoinLock:he,showFromCoinLock:ke,currentPriceReverse:ro,currentPrice:Fe,getPirceText:bt,currentPriceTab:J,currentPriceTabList:go,getPirceKey:kt,priceTab:dn,aprRewardsParameter:Pe,aprRewardsDateList:ie,aprTab:qo,reviseValue:Lo,label:ze,aprTitle:Ne,isCreatePool:He,before7dContractPriceLowest:Ve,before7dContractPriceHighest:Le,aprRewardsTime:de,addLiquidityBtnDisabled:jo,checkNullObj:Ao,sFixD:xo,toCreateSuiPool:Ln,isSelfBuilt:Tt,getCoinIcon:$t,isCreatePoolToCoin:Ro,isCreatePoolFromCoin:Uo,filterCreatePoolCoin:to,poolTvl:ko}}}),mt=""+new URL("img-no-data_2x.e925467a.png",import.meta.url).href,ft=""+new URL("img-no-data_2x.8bc9afa2.png",import.meta.url).href;const lo=e=>(Vo("data-v-a2711420"),e=e(),Ko(),e),li={class:"pools-container"},ii={key:0,class:"content pc-content"},ri={class:"content-left"},si={class:"content-left-bg"},ui={class:"content-left-title"},di={key:0,class:"pool-warning"},ci={class:"coin-select"},vi={key:0,class:"icon","aria-hidden":"true"},pi=lo(()=>a("use",{"xlink:href":"#icon-edit"},null,-1)),mi=[pi],fi={key:0,class:"fee-container"},gi=["onClick"],bi={key:0,class:"icon fee-disabled","aria-hidden":"true"},ki=lo(()=>a("use",{"xlink:href":"#icon-icon-disable"},null,-1)),hi=[ki],Ci={key:1},yi={key:2},wi={key:0},Pi={key:1,class:"text-active"},Ii={class:"deposit-title"},Ti={class:"card-container"},$i={class:"card-item"},Si={class:"card-item"},Ai={key:0,class:"icon","aria-hidden":"true"},Ni=lo(()=>a("use",{"xlink:href":"#icon-icon-add"},null,-1)),qi=[Ni],Li={class:"pc-network"},Mi={class:"content-right"},Ri={key:0,class:"initPrice-mask"},Ui={class:"content-right-title"},Oi=lo(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1)),Bi={class:"content-right-bg"},_i={key:1,class:"price-tab"},Fi=["onClick"],ji={key:2,class:"create-pool-tips"},Di={key:3,class:"set-price-range"},Wi={class:"radio"},Hi={key:0,src:pt},Ei=lo(()=>a("span",null,"Full Range",-1)),zi={key:0},Xi={key:1,class:"coin"},Vi={key:2,class:"coin"},Ki={key:3,class:"no-price"},Zi={alt:""},Gi={alt:""},Ji={key:6,class:"position-tips"},Qi={alt:""},Yi={class:"tips"},xi={key:7,class:"position-tips"},er={alt:""},or={class:"error"},nr={key:8,class:"d3-chart-box"},tr={key:9,class:"day-7-price-range"},ar=lo(()=>a("i",null,null,-1)),lr={class:"gray"},ir={key:11,class:"create-pool-tips"},rr={key:12,class:"create-pool-warning"},sr={key:1,class:"no-data"},ur={key:0,src:mt,alt:""},dr={key:1,src:ft,alt:""},cr={key:1,class:"content h5-content"},vr={class:"content-left"},pr={class:"content-left-bg"},mr={class:"content-left-title"},fr={key:0,class:"pool-warning"},gr={class:"coin-select"},br={key:0,class:"icon","aria-hidden":"true"},kr=lo(()=>a("use",{"xlink:href":"#icon-edit"},null,-1)),hr=[kr],Cr={key:0,class:"fee-container"},yr=["onClick"],wr={key:0},Pr={key:1},Ir={key:0},Tr={key:1,class:"text-active"},$r={class:"content-right"},Sr={key:0,class:"initPrice-mask"},Ar={class:"content-right-title"},Nr=lo(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1)),qr={class:"content-right-bg"},Lr={key:1,class:"price-tab"},Mr=["onClick"],Rr={key:2,class:"create-pool-tips"},Ur={key:3,class:"set-price-range"},Or={class:"radio"},Br={key:0,src:pt},_r=lo(()=>a("span",null,"Full Range",-1)),Fr={key:0},jr={key:1,class:"coin"},Dr={key:2,class:"coin"},Wr={key:3,class:"no-price"},Hr={alt:""},Er={alt:""},zr={key:6,class:"position-tips"},Xr=["src"],Vr={class:"tips"},Kr={key:7,class:"position-tips"},Zr=["src"],Gr={class:"error"},Jr={key:8,class:"d3-chart-box"},Qr={key:9,class:"day-7-price-range"},Yr=lo(()=>a("i",null,null,-1)),xr={class:"gray"},es={key:11,class:"create-pool-tips"},os={key:1,class:"no-data"},ns={key:0,src:mt,alt:""},ts={key:1,src:ft,alt:""},as={key:0,class:"icon","aria-hidden":"true"},ls=lo(()=>a("use",{"xlink:href":"#icon-icon-add"},null,-1)),is=[ls],rs={class:"pc-network"},ss={class:"new-right"},us={class:"deposit-title"},ds={class:"card-container"},cs={class:"card-item"},vs={class:"card-item"},ps={key:0,class:"icon","aria-hidden":"true"},ms=lo(()=>a("use",{"xlink:href":"#icon-icon-add"},null,-1)),fs=[ms],gs={class:"h5-network"};function bs(e,n,D,E,_,Y){var ae,V,te,Oe,J,Pe,de,Ne,ie,ze,oe,L,Io,q,to,qo,Lo,go,To,Zo,Ge,He,bo,ko,Je,Be,Mo,jo,M,P,Ve,Le,be,i,s,on,nn,tn,Ro,Uo,an,Ie,Te,Go,Jo,ln,rn,sn,un,io,ho,Co,Qe,Do,yo,Wo,d,Ye,$o,N,wo,ke,he,Ho,Eo,Fe,ro,so,Oo,zo,$;const G=Nt,le=ma,X=jt,x=Ia,ee=Dt,W=Wt,se=qa,$e=zt,A=ct,no=Vt,f=Oa,H=xa,T=rl,k=vt,l=Qt,c=Vl,R=oa,z=na,ue=ti,Se=ta,pe=Xt,F=Nn("image");return r(),p("div",li,[ge(G,{url:e.storeIndex.theme=="default"?"/pools":"/pool/list"},null,8,["url"]),ge(le,{"pool-info":e.poolInfo,onClearAll:e.clearAll,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClearAll","onClickRefresh"]),e.isPc?(r(),p("div",ii,[a("div",ri,[a("div",si,[a("div",ui,[We(v(e.$t("common.selectPool"))+" ",1),ge(X,{placement:"bottom","arrow-point-at-center":""},{title:De(()=>[a("span",null,v(e.t("newAdd.poolWarning")),1)]),default:De(()=>[e.isSelfBuilt?(r(),p("div",di)):w("",!0)]),_:1})]),a("div",ci,[ge(x,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.logoURI:e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.symbol:e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b:e.poolInfo.token_a:e.createPoolFromCoin,onClick:n[0]||(n[0]=m=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),ge(x,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.logoURI:e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.symbol:e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a:e.poolInfo.token_b:e.createPoolToCoin,onClick:n[1]||(n[1]=m=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),a("div",{class:ye(["pool-fee",e.edit?"pool-fee-edit":""])},[a("div",{class:"pool-fee-header",onClick:n[2]||(n[2]=m=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[a("span",{class:ye(e.inputValue?"":"fee-span")},v(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(r(),p("svg",vi,mi)):w("",!0)]),e.edit?(r(),p("div",fi,[(r(!0),p(No,null,en(e.feeTierList,(m,ao)=>{var Bo,Xo,Ke,Ze,Qo;return r(),p("div",{key:ao,class:ye(["fee-item",[e.inputValue&&e.inputValue==m.label?"fee-item-active":"",e.isCreatePool.includes(m.fee)&&e.$route.query.action?" pool-created":" pool-not-created",e.chainName!=="Aptos"&&!e.isCreatePool.includes(m.fee)&&!e.filterCreatePoolCoin[(Bo=e.fromCoin)==null?void 0:Bo.address]&&!e.filterCreatePoolCoin[(Xo=e.toCoin)==null?void 0:Xo.address]?"disabled":""]]),onClick:$n(Cn=>e.selectFee(m),["stop"])},[e.chainName!=="Aptos"&&!e.isCreatePool.includes(m.fee)&&!e.filterCreatePoolCoin[(Ke=e.fromCoin)==null?void 0:Ke.address]&&!e.filterCreatePoolCoin[(Ze=e.toCoin)==null?void 0:Ze.address]?(r(),p("svg",bi,hi)):w("",!0),e.$route.query.action=="create-pool"?(r(),p("div",Ci,[a("p",null,v(m.title),1),a("p",{class:ye(e.isCreatePool&&e.isCreatePool.includes(m.fee)?"text-default":"text-theme")},v(e.isCreatePool&&e.isCreatePool.includes(m.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(r(),p("div",yi,[a("p",{class:ye(e.isCreatePool&&e.isCreatePool.includes(m.fee)?"text-active":"text-default")},v(m.title),3),e.isCreatePool&&!e.isCreatePool.includes(m.fee)?(r(),p("p",wi,v(e.$t("newAdd.notCreated")),1)):w("",!0),e.isCreatePool&&e.isCreatePool.includes(m.fee)?(r(),p("p",Pi,v(e.poolTvl&&e.poolTvl[m.fee]&&((Qo=e.poolTvl[m.fee])==null?void 0:Qo.rateText)),1)):w("",!0)])),a("span",null,v(m.text),1)],10,gi)}),128))])):w("",!0)],2),a("div",Ii,v(e.$t("newAdd.depositAmounts")),1),a("div",Ti,[a("div",$i,[ge(ee,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[3]||(n[3]=m=>e.fromCoinAmount=m),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[4]||(n[4]=m=>e.maxBtnSelect("fromCoin")),onOnHalf:n[5]||(n[5]=m=>e.halfBtnSelect("fromCoin")),onOnInput:n[6]||(n[6]=m=>{e.fromCoinAmount=m,e.fixedFromCoin=!0}),onOnSelect:n[7]||(n[7]=m=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&e.$route.query.action!=="create-pool"?(r(),ve(W,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):w("",!0)]),a("div",Si,[ge(ee,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[8]||(n[8]=m=>e.toCoinAmount=m),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[9]||(n[9]=m=>e.maxBtnSelect("toCoin")),onOnHalf:n[10]||(n[10]=m=>e.halfBtnSelect("toCoin")),onOnInput:n[11]||(n[11]=m=>{e.toCoinAmount=m,e.fixedFromCoin=!1}),onOnSelect:n[12]||(n[12]=m=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&e.$route.query.action!=="create-pool"?(r(),ve(W,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):w("",!0)]),((V=(ae=e.$route)==null?void 0:ae.query)==null?void 0:V.action)=="create-pool"&&(e.showToCoinLock||e.showFromCoinLock||!e.filterCreatePoolCoin[(te=e.fromCoin)==null?void 0:te.address]&&!e.filterCreatePoolCoin[(Oe=e.toCoin)==null?void 0:Oe.address])?(r(),ve(se,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):w("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(r(),p("img",{key:1,class:"add",src:nt,alt:"",onClick:n[13]||(n[13]=(...m)=>e.toggle&&e.toggle(...m))})):w("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(r(),p("img",{key:2,class:"add",src:tt,alt:"",onClick:n[14]||(n[14]=(...m)=>e.toggle&&e.toggle(...m))})):w("",!0)]),e.poolInfo?(r(),ve($e,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):w("",!0)]),ge(A,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:n[15]||(n[15]=m=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:De(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")&&e.wallet.connected?(r(),p("svg",Ai,qi)):w("",!0),a("span",null,v(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),a("div",Li,[ge(no)])]),a("div",Mi,[e.isShowMask?(r(),p("div",Ri)):w("",!0),a("div",Ui,[We(v((J=e.$route)!=null&&J.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(r(),ve(X,{key:0,placement:"bottom","arrow-point-at-center":""},{title:De(()=>[a("span",null,v(e.$t("newAdd.selectRangeTips")),1)]),default:De(()=>[Oi]),_:1})):w("",!0)]),a("div",Bi,[!((de=(Pe=e.$route)==null?void 0:Pe.query)!=null&&de.action)&&e.poolInfo||(ie=(Ne=e.$route)==null?void 0:Ne.query)!=null&&ie.action?(r(),p(No,{key:0},[(oe=(ze=e.$route)==null?void 0:ze.query)!=null&&oe.action&&!e.poolInfo?(r(),ve(f,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):w("",!0),e.poolInfo?(r(),p("div",_i,[(r(!0),p(No,null,en(e.currentPriceTabList,m=>(r(),p("div",{key:m,class:ye(["price-item",{"price-item-active":m.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:ao=>e.priceTab(m)},[ge(X,{placement:"bottom","arrow-point-at-center":""},{title:De(()=>[a("span",null,v(e.getPirceText(m.key)),1)]),default:De(()=>[We(" "+v(e.getPirceKey(m.key)),1)]),_:2},1024)],10,Fi))),128))])):w("",!0),(Io=(L=e.$route)==null?void 0:L.query)!=null&&Io.action&&!e.poolInfo?(r(),p("div",ji,v(e.$t("newAdd.createPoolInitialText")),1)):w("",!0),!e.poolInfo&&((to=(q=e.$route)==null?void 0:q.query)!=null&&to.action)?(r(),p("div",Di,[a("div",null,v(e.$t("common.setPriceRange")),1),a("div",null,[a("div",{class:ye(["tab-item",e.isFullRange?"tab-item-active tab-item-farms-active":""]),onClick:n[16]||(n[16]=$n(m=>e.clickFullRange(),["stop"]))},[a("div",Wi,[e.isFullRange&&e.chainName=="Sui"?(r(),p("img",Hi)):w("",!0)]),Ei],2)])])):w("",!0),e.poolInfo||(Lo=(qo=e.$route)==null?void 0:qo.query)!=null&&Lo.action?(r(),p("div",{key:4,class:ye(["current-price",(To=(go=e.$route)==null?void 0:go.query)!=null&&To.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(r(),p("span",zi,v(e.$t("common.currentPrice")),1)):w("",!0),e.fromCoin&&e.toCoin&&e.direct?(r(),p("div",Xi,[a("span",null,v(e.$t("common.currentPrice")),1),We(" "+v(e.currentPrice===""?"--":("addCommom"in e?e.addCommom:Ae(oo))(("decimalUi"in e?e.decimalUi:Ae(_e))(e.currentPrice,6)))+" "+v((Zo=e.toCoin)==null?void 0:Zo.symbol)+" per "+v((Ge=e.fromCoin)==null?void 0:Ge.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(r(),p("div",Vi,[a("span",null,v(e.$t("common.currentPrice")),1),We(" "+v(e.currentPriceReverse===""?"--":("addCommom"in e?e.addCommom:Ae(oo))(("decimalUi"in e?e.decimalUi:Ae(_e))(e.currentPriceReverse,6)))+" "+v((He=e.toCoin)==null?void 0:He.symbol)+" per "+v((bo=e.fromCoin)==null?void 0:bo.symbol),1)])):(r(),p("div",Ki,"0.0")),e.fromCoin&&e.toCoin?(r(),p("div",{key:4,class:ye(e.poolInfo&&((ko=e.poolInfo)!=null&&ko.needReverse)||e.createPoolInfo&&((Je=e.createPoolInfo)!=null&&Je.needReverse)?"toggle reverse":"toggle")},[a("div",{class:ye(e.direct?"item active-item":"item"),onClick:n[17]||(n[17]=m=>e.direct?"":e.toggle())},[co(a("img",Zi,null,512),[[F,e.getCoinIcon(e.direct?e.fromCoin:e.toCoin)]]),We(" "+v(e.direct?(Be=e.fromCoin)==null?void 0:Be.symbol:(Mo=e.toCoin)==null?void 0:Mo.symbol),1)],2),a("div",{class:ye(e.direct?"item ":"item active-item"),onClick:n[18]||(n[18]=m=>e.direct?e.toggle():"")},[co(a("img",Gi,null,512),[[F,e.getCoinIcon(e.direct?e.toCoin:e.fromCoin)]]),We(" "+v(e.direct?(jo=e.toCoin)==null?void 0:jo.symbol:(M=e.fromCoin)==null?void 0:M.symbol),1)],2)],2)):w("",!0)],2)):w("",!0),e.poolInfo||(Ve=(P=e.$route)==null?void 0:P.query)!=null&&Ve.action?(r(),ve(H,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,"int-price":e.intPrice,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","int-price","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):w("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(r(),p("div",Ji,[co(a("img",Qi,null,512),[[F,("importIcon"in e?e.importIcon:Ae(Xe))("/image/icon-tips@2x.png")]]),a("p",Yi,v(e.$t("tips.positionTips")),1)])):w("",!0),e.positionError&&(e.poolInfo||(be=(Le=e.$route)==null?void 0:Le.query)!=null&&be.action)&&(Number(e.minPrice)||Number(e.maxPrice))?(r(),p("div",xi,[co(a("img",er,null,512),[[F,("importIcon"in e?e.importIcon:Ae(Xe))("/image/icon-tips-error@2x.png")]]),a("p",or,v(e.$t("tips.positionError")),1)])):w("",!0),e.fromCoin&&e.toCoin&&e.poolInfo&&((i=e.poolInfo)!=null&&i.current_sqrt_price)?(r(),p("div",nr,[e.fromCoin&&e.toCoin&&e.poolInfo?(r(),ve(T,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):w("",!0),e.chartLoading?(r(),ve(k,{key:1})):w("",!0)])):w("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(r(),p("div",tr,[ar,a("span",lr,v(e.aprRewardsTime)+" Price Range",1),a("span",null,v(("addCommom"in e?e.addCommom:Ae(oo))(("decimalUi"in e?e.decimalUi:Ae(_e))(e.before7dContractPriceLowest,6)))+" - "+v(("addCommom"in e?e.addCommom:Ae(oo))(("decimalUi"in e?e.decimalUi:Ae(_e))(e.before7dContractPriceHighest,6))),1)])):w("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(r(),ve(l,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):w("",!0),(on=(s=e.$route)==null?void 0:s.query)!=null&&on.action&&!e.poolInfo&&!e.showFromCoinLock&&!e.showToCoinLock?(r(),p("div",ir,v(e.$t("newAdd.createPoolText")),1)):w("",!0),((tn=(nn=e.$route)==null?void 0:nn.query)==null?void 0:tn.action)=="create-pool"&&(e.showFromCoinLock||e.showToCoinLock)&&Number(e.maxPrice)>Number(e.minPrice)?(r(),p("div",rr," To create a new pool, the initial price you set must be within your price range. ")):w("",!0)],64)):(r(),p("div",sr,[e.storeIndex.theme=="default"?(r(),p("img",ur)):(r(),p("img",dr)),a("p",null,v(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&e.$route.query.action!=="create-pool"?(r(),ve(c,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):w("",!0)])])):w("",!0),e.isPc?w("",!0):(r(),p("div",cr,[a("div",vr,[a("div",pr,[a("div",mr,[We(v(e.$t("common.selectPool"))+" ",1),ge(X,{placement:"bottom","arrow-point-at-center":""},{title:De(()=>[a("span",null,v(e.t("newAdd.poolWarning")),1)]),default:De(()=>[e.poolInfo&&e.isSelfBuilt?(r(),p("div",fr)):w("",!0)]),_:1})]),a("div",gr,[ge(x,{"coin-icon":e.poolInfo?e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.token_a:e.createPoolFromCoin,onClick:n[19]||(n[19]=m=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),ge(x,{"coin-icon":e.poolInfo?e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.token_b:e.createPoolToCoin,onClick:n[20]||(n[20]=m=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),a("div",{class:ye(["pool-fee",e.edit?"pool-fee-edit":""])},[a("div",{class:"pool-fee-header",onClick:n[21]||(n[21]=m=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[a("span",{class:ye(e.inputValue?"":"fee-span")},v(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(r(),p("svg",br,hr)):w("",!0)]),e.edit?(r(),p("div",Cr,[e.getPoolInfoSuccess?(r(!0),p(No,{key:1},en(e.feeTierList,(m,ao)=>{var Bo;return r(),p("div",{key:ao,class:ye(["fee-item",[e.inputValue&&e.inputValue==m.label?"fee-item-active":"",e.isCreatePool&&e.isCreatePool.length>0&&e.isCreatePool.includes(m.fee)&&e.$route.query.action?" pool-created":" pool-not-created"]]),onClick:Xo=>e.selectFee(m)},[e.$route.query.action=="create-pool"?(r(),p("div",wr,[a("p",null,v(m.title),1),a("p",{class:ye(e.isCreatePool.includes(m.fee)?"text-default":"text-theme")},v(e.isCreatePool.includes(m.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(r(),p("div",Pr,[a("p",{class:ye(e.isCreatePool.includes(m.fee)?"text-active":"text-default")},v(m.title),3),e.isCreatePool&&!e.isCreatePool.includes(m.fee)?(r(),p("p",Ir,v(e.$t("newAdd.notCreated")),1)):w("",!0),e.isCreatePool&&e.isCreatePool.includes(m.fee)?(r(),p("p",Tr,v(e.poolTvl&&e.poolTvl[m.fee]&&((Bo=e.poolTvl[m.fee])==null?void 0:Bo.rateText)),1)):w("",!0)])),a("span",null,v(m.text),1)],10,yr)}),128)):(r(),ve(k,{key:0}))])):w("",!0)],2)]),a("div",$r,[e.isShowMask?(r(),p("div",Sr)):w("",!0),a("div",Ar,[We(v((Ro=e.$route)!=null&&Ro.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(r(),ve(X,{key:0,placement:"bottom","arrow-point-at-center":""},{title:De(()=>[a("span",null,v(e.$t("newAdd.selectRangeTips")),1)]),default:De(()=>[Nr]),_:1})):w("",!0)]),a("div",qr,[!((an=(Uo=e.$route)==null?void 0:Uo.query)!=null&&an.action)&&e.poolInfo||(Te=(Ie=e.$route)==null?void 0:Ie.query)!=null&&Te.action?(r(),p(No,{key:0},[(Jo=(Go=e.$route)==null?void 0:Go.query)!=null&&Jo.action&&!e.poolInfo?(r(),ve(f,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):w("",!0),e.poolInfo?(r(),p("div",Lr,[(r(!0),p(No,null,en(e.currentPriceTabList,m=>(r(),p("div",{key:m,class:ye(["price-item",{"price-item-active":m.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:ao=>e.priceTab(m)},[ge(X,{placement:"bottom","arrow-point-at-center":""},{title:De(()=>[a("span",null,v(e.getPirceText(m.key)),1)]),default:De(()=>[We(" "+v(e.getPirceKey(m.key)),1)]),_:2},1024)],10,Mr))),128))])):w("",!0),(rn=(ln=e.$route)==null?void 0:ln.query)!=null&&rn.action&&!e.poolInfo?(r(),p("div",Rr,v(e.$t("newAdd.createPoolInitialText")),1)):w("",!0),!e.poolInfo&&((un=(sn=e.$route)==null?void 0:sn.query)!=null&&un.action)?(r(),p("div",Ur,[a("div",null,v(e.$t("common.setPriceRange")),1),a("div",null,[a("div",{class:ye(["tab-item",e.isFullRange?"tab-item-active tab-item-farms-active":""]),onClick:n[22]||(n[22]=$n(m=>e.clickFullRange(),["stop"]))},[a("div",Or,[e.isFullRange&&e.chainName=="Sui"?(r(),p("img",Br)):w("",!0)]),_r],2)])])):w("",!0),e.poolInfo||(ho=(io=e.$route)==null?void 0:io.query)!=null&&ho.action?(r(),p("div",{key:4,class:ye(["current-price",(Qe=(Co=e.$route)==null?void 0:Co.query)!=null&&Qe.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(r(),p("span",Fr,v(e.$t("common.currentPrice")),1)):w("",!0),e.fromCoin&&e.toCoin&&e.direct?(r(),p("div",jr,[a("span",null,v(e.$t("common.currentPrice")),1),We(" "+v(("addCommom"in e?e.addCommom:Ae(oo))(("decimalUi"in e?e.decimalUi:Ae(_e))(e.currentPrice,6)))+" "+v((Do=e.toCoin)==null?void 0:Do.symbol)+" per "+v((yo=e.fromCoin)==null?void 0:yo.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(r(),p("div",Dr,[a("span",null,v(e.$t("common.currentPrice")),1),We(" "+v(("addCommom"in e?e.addCommom:Ae(oo))(("decimalUi"in e?e.decimalUi:Ae(_e))(e.currentPriceReverse,6)))+" "+v((Wo=e.toCoin)==null?void 0:Wo.symbol)+" per "+v((d=e.fromCoin)==null?void 0:d.symbol),1)])):(r(),p("div",Wr,"0.0")),e.fromCoin&&e.toCoin?(r(),p("div",{key:4,class:ye(e.poolInfo&&((Ye=e.poolInfo)!=null&&Ye.needReverse)||e.createPoolInfo&&(($o=e.createPoolInfo)!=null&&$o.needReverse)?"toggle reverse":"toggle")},[a("div",{class:ye(e.direct?"item active-item":"item"),onClick:n[23]||(n[23]=m=>e.direct?"":e.toggle())},[co(a("img",Hr,null,512),[[F,e.getCoinIcon(e.direct?e.fromCoin:e.toCoin)]]),We(" "+v(e.direct?(N=e.fromCoin)==null?void 0:N.symbol:(wo=e.toCoin)==null?void 0:wo.symbol),1)],2),a("div",{class:ye(e.direct?"item ":"item active-item"),onClick:n[24]||(n[24]=m=>e.direct?e.toggle():"")},[co(a("img",Er,null,512),[[F,e.getCoinIcon(e.direct?e.toCoin:e.fromCoin)]]),We(" "+v(e.direct?(ke=e.toCoin)==null?void 0:ke.symbol:(he=e.fromCoin)==null?void 0:he.symbol),1)],2)],2)):w("",!0)],2)):w("",!0),e.poolInfo||(Eo=(Ho=e.$route)==null?void 0:Ho.query)!=null&&Eo.action?(r(),ve(H,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):w("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(r(),p("div",zr,[a("img",{src:("importIcon"in e?e.importIcon:Ae(Xe))("/image/icon-tips@2x.png"),alt:""},null,8,Xr),a("p",Vr,v(e.$t("tips.positionTips")),1)])):w("",!0),e.positionError&&(e.poolInfo||(ro=(Fe=e.$route)==null?void 0:Fe.query)!=null&&ro.action)?(r(),p("div",Kr,[a("img",{src:("importIcon"in e?e.importIcon:Ae(Xe))("/image/icon-tips-error@2x.png"),alt:""},null,8,Zr),a("p",Gr,v(e.$t("tips.positionError")),1)])):w("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(r(),p("div",Jr,[e.fromCoin&&e.toCoin&&e.poolInfo?(r(),ve(T,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):w("",!0),e.chartLoading?(r(),ve(k,{key:1})):w("",!0)])):w("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(r(),p("div",Qr,[Yr,a("span",xr,v(e.aprRewardsTime)+" Price Range",1),a("span",null,v(("addCommom"in e?e.addCommom:Ae(oo))(("decimalUi"in e?e.decimalUi:Ae(_e))(e.before7dContractPriceLowest,6)))+" - "+v(("addCommom"in e?e.addCommom:Ae(oo))(("decimalUi"in e?e.decimalUi:Ae(_e))(e.before7dContractPriceHighest,6))),1)])):w("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(r(),ve(l,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):w("",!0),(Oo=(so=e.$route)==null?void 0:so.query)!=null&&Oo.action&&!e.poolInfo?(r(),p("div",es,v(e.$t("newAdd.createPoolText")),1)):w("",!0)],64)):(r(),p("div",os,[e.storeIndex.theme=="default"?(r(),p("img",ns)):(r(),p("img",ts)),a("p",null,v(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&!e.isSelfBuilt?(r(),ve(c,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):w("",!0)]),ge(A,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:n[25]||(n[25]=m=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:De(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")?(r(),p("svg",as,is)):w("",!0),a("span",null,v(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),a("div",rs,[ge(no)])]),a("div",ss,[a("div",us,v(e.$t("newAdd.depositAmounts")),1),a("div",ds,[a("div",cs,[ge(ee,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[26]||(n[26]=m=>e.fromCoinAmount=m),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[27]||(n[27]=m=>e.maxBtnSelect("fromCoin")),onOnHalf:n[28]||(n[28]=m=>e.halfBtnSelect("fromCoin")),onOnInput:n[29]||(n[29]=m=>{e.fromCoinAmount=m,e.fixedFromCoin=!0}),onOnSelect:n[30]||(n[30]=m=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(r(),ve(W,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):w("",!0)]),a("div",vs,[ge(ee,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[31]||(n[31]=m=>e.toCoinAmount=m),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[32]||(n[32]=m=>e.maxBtnSelect("toCoin")),onOnHalf:n[33]||(n[33]=m=>e.halfBtnSelect("toCoin")),onOnInput:n[34]||(n[34]=m=>{e.toCoinAmount=m,e.fixedFromCoin=!1}),onOnSelect:n[35]||(n[35]=m=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(r(),ve(W,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):w("",!0)]),($=(zo=e.$route)==null?void 0:zo.query)!=null&&$.action&&!e.poolInfo&&(!e.createPoolInfo||!e.createPoolInfo.currentPrice)?(r(),ve(se,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):w("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(r(),p("img",{key:1,class:"add",src:nt,alt:"",onClick:n[36]||(n[36]=(...m)=>e.toggle&&e.toggle(...m))})):w("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(r(),p("img",{key:2,class:"add",src:tt,alt:"",onClick:n[37]||(n[37]=(...m)=>e.toggle&&e.toggle(...m))})):w("",!0)]),e.poolInfo||e.createPoolInfo?(r(),ve($e,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):w("",!0)])])),ge(A,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn h5-btn",onClick:n[38]||(n[38]=m=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:De(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")?(r(),p("svg",ps,fs)):w("",!0),a("span",null,v(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),a("div",gs,[ge(no)]),e.showCoinSelect?(r(),ve(R,{key:2,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"is-create-pool-to-coin":e.isCreatePoolToCoin,"is-create-pool-from-coin":e.isCreatePoolFromCoin,onOnSelect:e.onCoinSelect,onOnClose:n[39]||(n[39]=m=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","is-create-pool-to-coin","is-create-pool-from-coin","onOnSelect"])):w("",!0),e.isViewDetail?(r(),ve(z,{key:3,"pool-info":e.poolInfo,onOnClose:n[40]||(n[40]=m=>e.isViewDetail=!1)},null,8,["pool-info"])):w("",!0),e.isCreateSuccess?(r(),ve(ue,{key:4,onOnClose:n[41]||(n[41]=m=>e.isCreateSuccess=!1)})):w("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(r(),ve(Se,{key:5,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:n[42]||(n[42]=m=>e.isShowTokenWarning=!1)},null,8,["from-coin","to-coin","onClose"])):w("",!0),e.isShowLiquidityModal?(r(),ve(pe,{key:6,"pool-info":e.poolInfo||e.createPoolInfo,title:e.$route.query.action=="create-pool"?e.$t("newAdd.preview"):e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direct,"is-increase":!1,onCreatePool:e.toCreatePool,onToAdd:e.toAdd,onOnClose:n[43]||(n[43]=m=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onCreatePool","onToAdd"])):w("",!0)])}const nu=fo(ai,[["render",bs],["__scopeId","data-v-a2711420"]]);export{nu as default};
