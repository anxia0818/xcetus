import{a as Pe,u as he,f as ne,h as A,b as ve,c as le,s as _e}from"./pool.ccb2d30f.js";import{x as ye,r as m,b as re,q as fe,A as ae,$ as we,y as Le,e as je,o as d,f as l,h as s,s as P,k as N,l as se,w as _,H as te,t as n,j as Y,F as ie,i as oe,u as y,E as ce,G as pe,D as Oe,p as Ne,m as Ae}from"./entry.555960f3.js";/* empty css              */import"./index.07acbf93.js";const Te=ye({props:{aprRewardsDateList:{type:Array,default:()=>[]},aprRewardsParameter:{type:Number,default:30},aprTitle:{type:String,default:""},nameTab:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""}},setup(e,de){Le();const R=m(0),k=m(0),E=m(0),D=m(0),b=m(1e4),S=m("echartsBox"+Date.now()+Math.random()),G=Pe(),u=re(()=>G),J=re(()=>u.value.chainName?ve(u.value.chainName):{}),v=m(!1),g=m({});fe(()=>{document.body.clientWidth<750?v.value=!1:v.value=!0,window.onresize=()=>{document.body.clientWidth<750?v.value=!1:v.value=!0,setTimeout(()=>{T()},500)}}),console.log(e,"props===>"),ae(()=>g.value,(r,i)=>{le(r)||(R.value=r==null?void 0:r.aprFee,k.value=r!=null&&r.rewardAprList[0].rewarder_display?r==null?void 0:r.rewardAprList[0].rewarder_apr:0,E.value=r!=null&&r.rewardAprList[1].rewarder_display?r==null?void 0:r.rewardAprList[1].rewarder_apr:0,D.value=r!=null&&r.rewardAprList[2].rewarder_display?r==null?void 0:r.rewardAprList[2].rewarder_apr:0,(r==null?void 0:r.aprPercentageTotal)==0||isNaN(r==null?void 0:r.aprPercentageTotal)||(r==null?void 0:r.aprPercentageTotal)==1/0?b.value=1e9:b.value=0,!r.is_display_rewarder&&R.value==0&&(b.value=1e9),r.is_display_rewarder||(k.value=0,E.value=0,D.value=0),setTimeout(()=>{T()},500))},{immediate:!0,deep:!0});const T=()=>{const r=document.getElementById(S.value);if(!r)return;const i=we(r);let c={tooltip:{show:!0,trigger:"axis",axisPointer:{type:"shadow",axis:"auto",snap:!0},renderMode:"html",backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderWidth:0,padding:5,textStyle:{color:"#fff",fontStyle:"normal",fontWeight:"normal",fontFamily:"sans-serif",fontSize:14},extraCssText:"box-shadow: 0 0 3px rgba(0, 0, 0, 0.3);",confine:!1,formatter:function(o){return o[0].name+"的分数是:"+o[0].data}},title:{text:"",left:"center",top:"center"},series:[{type:"pie",silent:!0,data:[{value:R.value,name:"A"},{value:k.value,name:"B"},{value:E.value,name:"C"},{value:D.value,name:"D"},{value:b.value,name:"E"}],labelLine:{show:!1},itemStyle:{normal:{color:function(o){var p=u.value.theme=="default"?["#9EFFC3","#9E65FF","#6C65FF","#D3E97C","#8D8D8D"]:["#65C8FF","#9E65FF","#6C65FF","#D3E97C","#D3E97C"];return p[o.dataIndex]}}},radius:["74%","100%"]}]};c&&i.setOption(c,!0)},K=re(()=>{var i;let r=0;return g.value&&g.value.rewardAprList&&((i=g.value)==null?void 0:i.rewardAprList).forEach(o=>{o!=null&&o.rewarder_display&&r++}),r}),Q=he(),f=re(()=>Q),M=async r=>{var $,q,z;let i;r.token_a.address.toLowerCase()===e.fromCoin.address.toLowerCase()&&r.token_b.address.toLowerCase()===e.toCoin.address.toLowerCase()?i=!0:i=!1;const c=i?Number(e.minPrice):e.maxPrice=="∞"?1/2**50:1/Number(e.maxPrice),o=isNaN(Number(e.maxPrice))||e.maxPrice=="∞"?2**50:i?Number(e.maxPrice):1/Number(e.minPrice);let p=[];p=Object.fromEntries(u.value&&u.value&&u.value.addressHistTokens[r.poolAddress].data.map(O=>[O.key,O.value])),console.log(e.aprRewardsParameter,"=====>>>>>>>>>>aprRewardsParameteraprRewardsParameteraprRewardsParameter");const W=Number(Number(e.aprRewardsParameter==7?p.before_7_d_contract_price_lowest:e.aprRewardsParameter==24?p.before_24_h_contract_price_lowest:p.before_30_d_contract_price_lowest)),B=Number(Number(e.aprRewardsParameter==7?p.before_7_d_contract_price_highest:e.aprRewardsParameter==24?p.before_24_h_contract_price_highest:p.before_30_d_contract_price_highest)),C=f.value.tokensObj;console.log("getEstPositionAPRWithMulti###params###lowerUserPrice###",c),console.log("getEstPositionAPRWithMulti###params###upperUserPrice###",o),console.log("getEstPositionAPRWithMulti###params###lowerHistPrice###",W),console.log("getEstPositionAPRWithMulti###params###upperHistPrice###",B);const H=await J.value.getEstPositionAPRWithMulti(c,o,W,B);console.log("getEstPositionAPRWithMulti###resMulti###",H);const L=Number(H.toString()),t=u.value.newTopPoolsObj[r.poolAddress];let j;if(t){e.aprRewardsParameter==7?j=t.apr_7day?Number(t.apr_7day.substring(0,t.apr_7day.length-1)):0:e.aprRewardsParameter==24?j=t.apr_24h?Number(t.apr_24h.substring(0,t.apr_24h.length-1)):0:j=t.apr_30day?Number(t.apr_30day.substring(0,t.apr_30day.length-1)):0;const O=t.rewarder_apr[0]?Number(t.rewarder_apr[0].substring(0,t.rewarder_apr[0].length-1)):0,I=t.rewarder_apr[1]?Number(t.rewarder_apr[1].substring(0,t.rewarder_apr[1].length-1)):0,x=t.rewarder_apr[2]?Number(t.rewarder_apr[2].substring(0,t.rewarder_apr[2].length-1)):0,a=Number(L*j),F=Number(L*O),V=Number(L*I),ee=Number(L*x),U=a+(r.rewarder_display1?F:0)+(r.rewarder_display2?V:0)+(r.rewarder_display3?ee:0),ue=r.rewarder_infos[0]?($=C[r.rewarder_infos[0].coinAddress])==null?void 0:$.symbol:"--",ge=r.rewarder_infos[1]?(q=C[r.rewarder_infos[1].coinAddress])==null?void 0:q.symbol:"--",be=r.rewarder_infos[2]?(z=C[r.rewarder_infos[2].coinAddress])==null?void 0:z.symbol:"--",me={aprFee:a==1/0||isNaN(a)?0:a,rewardAprList:[{rewarder_name:ue,rewarder_apr:F==1/0||isNaN(F)?0:F,styleName:"one",rewarder_display:r.rewarder_display1},{rewarder_name:ge,rewarder_apr:V==1/0||isNaN(V)?0:V,styleName:"two",rewarder_display:r.rewarder_display2},{rewarder_name:be,rewarder_apr:ee==1/0||isNaN(ee)?0:ee,styleName:"three",rewarder_display:r.rewarder_display2}],aprPercentageTotal:U==1/0||isNaN(U)||U===0?0:U,aprPercentage:ne(a/U,2),is_display_rewarder:r.is_display_rewarder};g.value=me,console.log(g.value,"===>aprPercentageObj.value")}};ae(()=>[e.aprRewardsParameter],()=>{e.nameTab=="position"&&M(e.poolInfo)});const w=m("--"),X=(r,i)=>{r!=="0"&&i!=="∞"?w.value=_e(1/(1-Number((r/i)**.25)),2)+"x":w.value=1};ae(()=>[e.poolInfo,e.minPrice,e.maxPrice,u.value.addressHistTokens],([r,i,c,o])=>{r&&!le(r)&&o&&M(r),i&&c&&X(i,c)},{immediate:!0});const Z=(r,i)=>{de.emit("aprTab",r)};return ae(()=>f.value.currentPositionLoading,r=>{f.value.currentPositionLoading&&(g.value={},w.value="--")},{immediate:!0}),{pools:f,initialize:T,aprOne:R,aprTwo:k,aprThree:E,aprFour:D,echartsBox:S,aprPercentageObjList:g,rewardLength:K,fixD:ne,addCommom:A,aprTab:Z,lever:w,isPc:v}}});const h=e=>(Ne("data-v-c97575f7"),e=e(),Ae(),e),Ce={key:0,class:"apr-lever"},Fe={class:"top"},Re={key:0,class:"left"},ke=h(()=>s("span",null,"The concentration degree of your liquidity compared with allocating liquidity to full range like a constant product AMM pool. You would enjoy multiplied capital efficiency but with higher impermanent loss possibility accordingly.",-1)),Ee=h(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon-information"})],-1)),De={class:"right"},Se={class:"top"},Me={class:"apr-rewards"},We=h(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon-information"})],-1)),Be={class:"apr-tab"},He=["onClick"],$e={class:"tottom"},qe={class:"fees-all"},ze={key:0,class:"right-box"},Ue=["id"],Ye=h(()=>s("div",{class:"ratio-bg"},null,-1)),Ge={class:"progress-fees progress-all"},Je=h(()=>s("div",{class:"light-hint"},null,-1)),Ke={key:1,class:"apr-lever-h5"},Qe={key:0,class:"top"},Xe={class:"leverage"},Ze={class:"leverage-title"},Ie=h(()=>s("span",null,"The concentration degree of your liquidity compared with allocating liquidity to full range like a constant product AMM pool. You would enjoy multiplied capital efficiency but with higher impermanent loss possibility accordingly.",-1)),xe=h(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon-information"})],-1)),Ve={class:"leverage-text"},er={class:"left"},rr=h(()=>s("svg",{class:"icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon-information"})],-1)),ar={class:"apr-tab"},sr=["onClick"],tr={class:"right"},ir={key:0,class:"right-box"},or=["id"],nr=h(()=>s("div",{class:"ratio-bg"},null,-1)),dr={class:"fees-all"},lr={class:"hover-fees-all"};function cr(e,de,R,k,E,D){var S,G,u,J,v,g,T,K,Q,f,M,w,X,Z,r,i,c,o,p,W,B,C,H,L,t,j,$,q,z,O,I,x;const b=Oe;return e.isPc?(d(),l("div",Ce,[s("div",Fe,[e.minPrice!=="0"&&e.maxPrice!=="∞"?(d(),l("div",Re,[s("div",{class:P(["lever-title apr-title",e.nameTab])},[N(" Leverage "),se(b,{placement:"bottom","arrow-point-at-center":""},{title:_(()=>[ke]),default:_(()=>[Ee]),_:1})],2),s("div",{class:"lever-text",style:te({lineHeight:e.aprPercentageObjList&&e.aprPercentageObjList.aprPercentageTotal>0?"52px":""})},n(e.lever),5)])):Y("",!0),s("div",De,[s("div",Se,[s("div",Me,[s("div",{class:P(["apr-title",e.nameTab])},[N(n(e.aprTitle)+" ",1),se(b,{placement:"bottom","arrow-point-at-center":""},{title:_(()=>[s("span",null," Estimated according to trading activity and farming bonus in the past "+n(e.aprRewardsParameter==7?"7 days":e.aprRewardsParameter==24?"24 hours":"30 days")+". Historical data is only a reference. By no means can it guarantee future returns. ",1)]),default:_(()=>[We]),_:1})],2),s("div",Be,[(d(!0),l(ie,null,oe(e.aprRewardsDateList,a=>(d(),l("div",{key:a,class:P(["apr-item",{"apr-item-active":a.num===e.aprRewardsParameter}]),onClick:F=>e.aprTab(a)},n(a.time),11,He))),128))])])]),s("div",$e,[s("div",{class:"lever-and-apr",style:te({justifyContent:e.minPrice!=="0"&&e.maxPrice!=="∞"?"flex-start":"center"})},[s("div",{class:P(["trade-fees",e.rewardLength>0&&e.aprPercentageObjList.is_display_rewarder?"rewarded":""])},[s("div",qe,[s("span",null,n(e.pools.currentPositionLoading?"--":e.aprPercentageObjList.is_display_rewarder?(S=e.aprPercentageObjList)!=null&&S.aprPercentageTotal?((G=e.aprPercentageObjList)==null?void 0:G.aprPercentageTotal)>1e4?">10,000":((u=e.aprPercentageObjList)==null?void 0:u.aprPercentageTotal)<.01?"<0.01":("fixD"in e?e.fixD:y(ne))((J=e.aprPercentageObjList)==null?void 0:J.aprPercentageTotal,2):(v=e.aprPercentageObjList)!=null&&v.rewardAprList?"<0.01":"--":(g=e.aprPercentageObjList)!=null&&g.aprFee?((T=e.aprPercentageObjList)==null?void 0:T.aprFee)>1e4?">10,000":((K=e.aprPercentageObjList)==null?void 0:K.aprFee)<.01?"<0.01":("addCommom"in e?e.addCommom:y(A))((Q=e.aprPercentageObjList)==null?void 0:Q.aprFee,2):(f=e.aprPercentageObjList)!=null&&f.rewardAprList?"<0.01":"--")+"% ",1),e.aprPercentageObjList&&e.aprPercentageObjList.aprPercentageTotal>0?(d(),l("div",ze,[s("div",{id:e.echartsBox,class:"right"},null,8,Ue),Ye])):Y("",!0)]),e.aprPercentageObjList&&e.aprPercentageObjList.aprPercentageTotal>0?(d(),l("div",{key:0,class:P(["percentage-fee",e.nameTab])},[s("div",{class:"progress-all-in",style:te({height:e.aprPercentageObjList&&e.aprPercentageObjList.aprPercentageTotal>0?"50px":"25px"})},[s("div",Ge,[Je,N(" Fees  "+n(e.pools.currentPositionLoading?"--":(M=e.aprPercentageObjList)!=null&&M.aprFee?((w=e.aprPercentageObjList)==null?void 0:w.aprFee)>1e4?">10,000":((X=e.aprPercentageObjList)==null?void 0:X.aprFee)<.01?"<0.01":("addCommom"in e?e.addCommom:y(A))((Z=e.aprPercentageObjList)==null?void 0:Z.aprFee,2):(r=e.aprPercentageObjList)!=null&&r.rewardAprList?"<0.01":"--")+"% ",1)]),(d(!0),l(ie,null,oe((i=e.aprPercentageObjList)==null?void 0:i.rewardAprList,a=>ce((d(),l("div",{key:a,class:"progress-rewards progress-all"},[s("div",{class:P(["light-hint",a==null?void 0:a.styleName])},null,2),N(" "+n(a==null?void 0:a.rewarder_name)+" Bonus  "+n(a!=null&&a.rewarder_apr?(a==null?void 0:a.rewarder_apr)>1e4?">10,000":(a==null?void 0:a.rewarder_apr)<.01?"<0.01":("addCommom"in e?e.addCommom:y(A))(a==null?void 0:a.rewarder_apr,2):"<0.01")+"% ",1)])),[[pe,(a==null?void 0:a.rewarder_name)!="--"&&a.rewarder_display&&e.aprPercentageObjList.is_display_rewarder&&!e.pools.currentPositionLoading]])),128))],4)],2)):Y("",!0)],2)],4)])])])])):(d(),l("div",Ke,[e.minPrice!=="0"&&e.maxPrice!=="∞"?(d(),l("div",Qe,[s("div",Xe,[s("div",Ze,[N(" Leverage "),se(b,{placement:"bottom","arrow-point-at-center":""},{title:_(()=>[Ie]),default:_(()=>[xe]),_:1})]),s("div",Ve,n(e.lever),1)])])):Y("",!0),s("div",{class:"bottom",style:te(e.minPrice!=="0"&&e.maxPrice!=="∞"?{}:{border:"none"})},[s("div",er,[s("div",{class:P(["apr-title",e.nameTab])},[N(n(e.aprTitle)+" ",1),se(b,{placement:"bottom","arrow-point-at-center":""},{title:_(()=>[s("span",null," Estimated according to trading activity and farming bonus in the past "+n(e.aprRewardsParameter==7?"7 days":e.aprRewardsParameter==24?"24 hours":"30 days")+". Historical data is only a reference. By no means can it guarantee future returns. ",1)]),default:_(()=>[rr]),_:1})],2),s("div",ar,[(d(!0),l(ie,null,oe(e.aprRewardsDateList,a=>(d(),l("div",{key:a,class:P(["apr-item",{"apr-item-active":a.num===e.aprRewardsParameter}]),onClick:F=>e.aprTab(a)},n(a.time),11,sr))),128))])]),s("div",tr,[e.aprPercentageObjList&&e.aprPercentageObjList.aprPercentageTotal>0?(d(),l("div",ir,[s("div",{id:e.echartsBox,class:"right"},null,8,or),nr])):Y("",!0),s("div",{class:P(["trade-fees",e.rewardLength>0&&e.aprPercentageObjList.is_display_rewarder?"rewarded":""])},[s("div",dr,[s("span",null,n(e.pools.currentPositionLoading?"--":e.aprPercentageObjList.is_display_rewarder?(c=e.aprPercentageObjList)!=null&&c.aprPercentageTotal?((o=e.aprPercentageObjList)==null?void 0:o.aprPercentageTotal)>1e4?">10,000":((p=e.aprPercentageObjList)==null?void 0:p.aprPercentageTotal)<.01?"<0.01":("fixD"in e?e.fixD:y(ne))((W=e.aprPercentageObjList)==null?void 0:W.aprPercentageTotal,2):(B=e.aprPercentageObjList)!=null&&B.rewardAprList?"":"--":(C=e.aprPercentageObjList)!=null&&C.aprFee?((H=e.aprPercentageObjList)==null?void 0:H.aprFee)>1e4?">10,000":((L=e.aprPercentageObjList)==null?void 0:L.aprFee)<.01?"<0.01":("addCommom"in e?e.addCommom:y(A))((t=e.aprPercentageObjList)==null?void 0:t.aprFee,2):(j=e.aprPercentageObjList)!=null&&j.rewardAprList?"0":"--")+"% ",1),s("div",lr,[N(" Fees  :  "),s("span",null,n(e.pools.currentPositionLoading?"--":($=e.aprPercentageObjList)!=null&&$.aprFee?((q=e.aprPercentageObjList)==null?void 0:q.aprFee)>1e4?">10,000":((z=e.aprPercentageObjList)==null?void 0:z.aprFee)<.01?"<0.01":("addCommom"in e?e.addCommom:y(A))((O=e.aprPercentageObjList)==null?void 0:O.aprFee,2):(I=e.aprPercentageObjList)!=null&&I.rewardAprList?"0":"--")+"% ",1),(d(!0),l(ie,null,oe((x=e.aprPercentageObjList)==null?void 0:x.rewardAprList,a=>ce((d(),l("div",{key:a},n(a==null?void 0:a.rewarder_name)+" Bonus  :  "+n(a!=null&&a.rewarder_apr?(a==null?void 0:a.rewarder_apr)>1e4?">10,000":(a==null?void 0:a.rewarder_apr)<.01?"<0.01":("addCommom"in e?e.addCommom:y(A))(a==null?void 0:a.rewarder_apr,2):"<0.01")+"% ",1)),[[pe,(a==null?void 0:a.rewarder_name)!="--"&&a.rewarder_display&&e.aprPercentageObjList.is_display_rewarder&&!e.pools.currentPositionLoading]])),128))])])],2)])],4)]))}const mr=je(Te,[["render",cr],["__scopeId","data-v-c97575f7"]]);export{mr as _};
