import{_ as on}from"./xwhale-header.0756186c.js";import{r as C,U as Ye,D as W,e as j,o as g,f as A,h as a,v as T,j as $,l as le,q as ln,x as X,t as Fe,p as Q,k as z,m as r,i as E,c as R,w as O,B as se,K as He,u as Ne,z as we,a as xe,a4 as sn,a9 as un,I as rn,S as dn,M as cn,y as mn,C as vn,F as We,s as Oe,a8 as gn,a7 as fn}from"./entry.b015e618.js";import{u as De}from"./xcetus.621e9e0b.js";import{a as ie,u as ue}from"./sha256.96dccb3d.js";import{i as K}from"./import-icon.de3e6c66.js";import{e as U,s as Ce,a as Ee,c as $e,p as G,u as Xe,q as _e,D as Ve}from"./pool.712b0c3f.js";import{u as Ue}from"./useWhale.7829f12d.js";import{_ as je}from"./xWHALE-icon.2df34cd4.js";import{_ as Ze}from"./WHALE-icon.28f954ba.js";import{_ as hn}from"./head-switch.ca6dc893.js";/* empty css              *//* empty css              */import{_ as pn}from"./icon-selected_3x.09e9a6f0.js";/* empty css              *//* empty css              */import{u as _n}from"./useTheme.f8fbe544.js";import{_ as wn}from"./img-leverage_2x.1c577303.js";import"./index.e79fc927.js";const Cn={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,n){const s=C("--"),t=C("--"),b=C("--"),h=C("--");let c=null;Ye(()=>{window.clearInterval(c)});const y=()=>{const p=new Date().getTime()/1e3;Number(p)<=Number(e.startTime)&&w(e.startTime),Number(p)>Number(e.startTime)&&Number(p)<=Number(e.endTime)&&w(e.endTime)},w=p=>{clearInterval(c),window.clearInterval(c),c=setInterval(()=>{let f=new Date().getTime()/1e3,u=p-parseInt(String(f));if(u==0){n.emit("countDown"),clearInterval(c),window.clearInterval(c),c=null;return}else u<0&&(clearInterval(c),window.clearInterval(c),n.emit("countDown"),c=null);u--;let m=parseInt(String(u/60/60/24));m=(m<10,m);let l=parseInt(String(u/60/60%24));l=(l<10,l);let S=parseInt(String(u/60%60));S=(S<10,S);let x=parseInt(String(u%60));x=x<10?+x:x,s.value=m,t.value=l,b.value=S,h.value=x},1e3)};return W(()=>e.startTime,(p,f)=>{p!==f&&y()},{immediate:!0}),{day:s,hour:t,min:b,sec:h}}};const bn={class:"count-time"};function yn(e,n,s,t,b,h){return g(),A("div",bn,[a("p",null,T(t.day)+"d",1),$(" : "),a("p",null,T(t.hour)+"h",1),$(" : "),a("p",null,T(t.min)+"m",1),$(" : "),a("p",null,T(t.sec)+"s",1)])}const Sn=j(Cn,[["render",yn],["__scopeId","data-v-ce10c596"]]),Tn={props:{titleText:{type:String,default:""},tipsText:{type:String,default:""},imgIcon:{type:String,default:""},value:{type:String,default:"--"}},setup(e){const{t:n}=le();return{t:n}}};const An=e=>(Q("data-v-77f61894"),e=e(),z(),e),kn={class:"table-rewards"},In={class:"text-top-all"},Bn={key:0,class:"icon-hover-box"},Nn=An(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1)),$n={class:"tips-text-box"},xn={key:0,alt:""};function Dn(e,n,s,t,b,h){const c=ln("image");return g(),A("div",kn,[a("div",In,[a("p",null,T(s.titleText),1),s.tipsText?(g(),A("div",Bn,[Nn,a("div",$n,T(s.titleText=="est.APR"?"Estimated APR of the current epoch for all xCETUS holders.":"The number of qualified positions in this epoch."),1)])):X("",!0)]),a("span",null,[a("p",null,[s.imgIcon?Fe((g(),A("img",xn,null,512)),[[c,s.imgIcon]]):X("",!0),$(T(s.value),1)])])])}const En=j(Tn,[["render",Dn],["__scopeId","data-v-77f61894"]]),Un={setup(e){const{t:n}=le(),s=De(),t=r(()=>s),b=r(()=>t.value.pendingAmount),h=r(()=>t.value.newPendingAmount),c=r(()=>(console.log(t.value.nextStartTime,"===>xcetus.value.nextStartTime"),t.value.nextStartTime)),y=r(()=>1683094391),w=r(()=>t.value.xcetusShare&&U(t.value.xcetusShare,2)),p=ie(),f=r(()=>p),i=r(()=>t.value.cetusApr&&t.value.cetusApr>.01?U(Ce(t.value.cetusApr,2),2):U(t.value.cetusApr,2)),u=r(()=>t.value.pendingCoinInfo),m=r(()=>t.value.newPendingCoinInfo),l=C("");W(()=>u.value,v=>{v&&!$e(v)?l.value=`Pending yield (${v.symbol})`:l.value="Pending yield"},{immediate:!0});const S=C("");W(()=>m.value,v=>{v&&!$e(v)?S.value=`Pending yield (${v.symbol})`:S.value="Pending yield"},{immediate:!0});const x=()=>{setTimeout(()=>{s.getDividendManager()},3e3)},de=r(()=>t.value.dividendManagerInfo),Se=r(()=>{const v=parseInt(String(new Date().getTime()/1e3)),M=de.value.interval_day,q=(v-Number(de.value.start_time))/(M*60);return console.log(parseInt(String(q))>0,"====>(parseInt(String(time))) > 0"),parseInt(String(q))>0}),ce=ue(),me=r(()=>ce),{setIsShowSuccess:Z,setIsShowRejected:ve,setIsShowWaiting:V,setTransactionDesc:Te,setTransactionTxid:ge}=ce,I=Ue("Sui"),Y=C(!1),Ae=r(()=>t.value.venft_id),ee=r(()=>me.value.chainName?Ee(me.value.chainName):{});return{t:n,pendingAmount:b,nextStartTime:c,wallet:f,myShare:w,importIcon:K,nextEndTime:y,pendingYieldText:l,cetusApr:i,pendingCoinInfo:u,getNextEpoch:x,canClaim:Se,claimPendingYield:async()=>{Y.value=!0,V(!0),ge(""),Te(`${n("tips.claimingPendingYield")} ${b.value} ${u.value.symbol} ${Number(h.value)>0?"and":""} ${Number(h.value)>0?h.value+" "+m.value.symbol:""}`);try{let v;const M=await I.getRedeemDividendV2Payload(Ae.value);console.log(M,"payload==>");const q=await f.value.currentWallet.signAndExecuteTransactionBlock(M);if(v=ee.value.handleTx(q),v&&v.hash){ge(v.hash),V(!1),Z(!0);const _={title:"Claim",desc:`Claimed ${b.value} ${u.value.symbol} ${Number(h.value)>0?"and":""} ${Number(h.value)>0?h.value+" "+m.value.symbol:""} successfully.`,hash:v.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:u.value.symbol,numa:`+ ${b.value}`,logoa:u.value.logo_url}};ee.value.showTransitionPending(_);const ne=await ee.value.watchTransaction(_);console.log("0221###swap###transitionStatus####",ne),ne&&setTimeout(()=>{s.getVeNFTDividendInfo(),Y.value=!1},3e3),s.getOwnerLockCetuss(f.value.address)}else V(!1),ve(!0),Y.value=!1}catch(v){V(!1),ve(!0),Y.value=!1,console.log(v,"error===>")}},claimLoading:Y,addCommom:U,newPendingCoinInfo:m,newPendingAmount:h,newPendingYieldText:S}}},Pn=""+new URL("staking-rewards-banner-h5.1c7401db.png",import.meta.url).href,Rn="data:image/png;base64,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";const be=e=>(Q("data-v-2f3bb8cd"),e=e(),z(),e),Mn={class:"top-banner"},Ln=be(()=>a("img",{src:Pn,alt:""},null,-1)),Wn=be(()=>a("p",null,"Convert CETUS to xCETUS to start earning",-1)),On={class:"bot-count"},Vn=be(()=>a("span",null,"Reward distribution in ",-1)),Yn={class:"holder-rewards"},Fn={class:"title"},Hn=be(()=>a("div",{class:"left"},[a("img",{src:Rn,alt:""}),a("span",null,"xCETUS Staking Rewards")],-1)),Xn={class:"right"},jn={class:"rewards-value"},Zn={class:"rewards-value"},qn={class:"claim-h5"};function Gn(e,n,s,t,b,h){var p,f;const c=Sn,y=se,w=En;return g(),A("div",null,[a("div",Mn,[Ln,Wn,a("div",On,[Vn,E(c,{"start-time":t.nextStartTime,onCountDown:n[0]||(n[0]=i=>e.$emit("getNextEpoch"))},null,8,["start-time"])])]),a("div",Yn,[a("div",Fn,[Hn,a("div",Xn,[t.wallet&&t.wallet.address?(g(),R(y,{key:0,loading:t.claimLoading,disabled:!t.canClaim||t.pendingAmount=="--"||t.pendingAmount<=0,onClick:t.claimPendingYield},{default:O(()=>[$(" Claim ")]),_:1},8,["loading","disabled","onClick"])):X("",!0)])]),a("div",jn,[E(w,{"title-text":"est.APR","tips-text":"good",value:t.cetusApr+"%"},null,8,["title-text","value"]),E(w,{"title-text":"My share",value:t.myShare+"%"},null,8,["value"])]),a("div",Zn,[E(w,{"title-text":t.pendingYieldText,"img-icon":(p=t.pendingCoinInfo)==null?void 0:p.logo_url,value:t.addCommom(t.pendingAmount,6)},null,8,["title-text","img-icon","value"]),E(w,{"title-text":t.newPendingYieldText,"img-icon":(f=t.newPendingCoinInfo)==null?void 0:f.logo_url,value:t.addCommom(t.newPendingAmount,6)},null,8,["title-text","img-icon","value"])]),a("div",qn,[t.wallet&&t.wallet.address?(g(),R(y,{key:0,disabled:!t.canClaim||t.pendingAmount=="--"||t.pendingAmount<=0,loading:t.claimLoading,onClick:n[1]||(n[1]=i=>e.$emit("claimPendingYield"))},{default:O(()=>[$(" Claim ")]),_:1},8,["disabled","loading"])):X("",!0)])])])}const Kn=j(Un,[["render",Gn],["__scopeId","data-v-2f3bb8cd"]]),Qn={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,n){const s=C("--"),t=C("--"),b=C("--"),h=C("--");let c=null;Ye(()=>{window.clearInterval(c)});const y=()=>{const p=new Date().getTime()/1e3;Number(p)<=Number(e.startTime)&&w(e.startTime),Number(p)>Number(e.startTime)&&Number(p)<=Number(e.endTime)&&w(e.endTime)},w=p=>{c=setInterval(()=>{let f=new Date().getTime()/1e3,u=p-parseInt(String(f));if(u==0){n.emit("countDown"),clearInterval(c),window.clearInterval(c),c=null;return}else u<0&&(clearInterval(c),window.clearInterval(c),n.emit("countDown"),c=null);u--;let m=parseInt(String(u/60/60/24));m=m<10?"0"+m:m;let l=parseInt(String(u/60/60%24));l=l<10?"0"+l:l;let S=parseInt(String(u/60%60));S=S<10?"0"+S:S;let x=parseInt(String(u%60));x=x<10?"0"+x:x,s.value=m,t.value=l,b.value=S,h.value=x},1e3)};return W(()=>e.startTime,(p,f)=>{p!==f&&y()},{immediate:!0}),{day:s,hour:t,min:b,sec:h}}};const ye=e=>(Q("data-v-131b3f4e"),e=e(),z(),e),zn={class:"count-down"},Jn=ye(()=>a("span",null,"D : ",-1)),et=ye(()=>a("span",null,"H : ",-1)),nt=ye(()=>a("span",null,"M : ",-1)),tt=ye(()=>a("span",null,"S",-1));function at(e,n,s,t,b,h){return g(),A("div",zn,[$(T(t.day)+" ",1),Jn,$(" "+T(t.hour)+" ",1),et,$(" "+T(t.min)+" ",1),nt,$(" "+T(t.sec)+" ",1),tt])}const ot=j(Qn,[["render",at],["__scopeId","data-v-131b3f4e"]]),lt={components:{WcountDown:ot},props:{vItem:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},setup(e,n){const{t:s}=le();console.log(e.vItem,"vItem");const t=De(),b=ue(),h=r(()=>b),c=m=>{n.emit("claim",m),t.setClaimLoading(m.id)},y=r(()=>t),w=r(()=>new Date().getTime()/1e3>e.vItem.locked_until_time),p=m=>{n.emit("cancelRedeemPayload",m),t.setClaimLoading(m.id)};r(()=>h.value.chainName),Ue("Sui");const f=ie();return r(()=>f),r(()=>y.value.venft_id),r(()=>h.value.chainName?Ee(h.value.chainName):{}),{t:s,prettyAmount:G,claimBoolean:w,toClaim:c,toCancel:p,claimWhale:m=>{n.emit("claimWhale",m)},cancelRedeemPayload:m=>{n.emit("cancelRedeemPayload",m)}}}};const Pe=e=>(Q("data-v-22a782cd"),e=e(),z(),e),st={class:"vesting-box"},it={class:"left"},ut=Pe(()=>a("img",{src:je,alt:""},null,-1)),rt=Pe(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-swap2"})],-1)),dt=Pe(()=>a("img",{src:Ze,alt:""},null,-1)),ct={class:"available-all"},mt={class:"available"},vt={key:0},gt={key:1};function ft(e,n,s,t,b,h){const c=He("WcountDown"),y=se;return g(),A("div",st,[a("div",it,[a("p",null,[a("span",null,[ut,$(" "+T(("addCommom"in e?e.addCommom:Ne(U))(t.prettyAmount(s.vItem.xcetus_amount,9),9))+" xCETUS ",1)]),rt,a("span",null,[dt,$(" "+T(("addCommom"in e?e.addCommom:Ne(U))(t.prettyAmount(s.vItem.cetus_amount,9),9))+" CETUS ",1)])]),a("div",ct,[a("div",mt,[a("span",null,T(t.claimBoolean?"Available":"Available in"),1),t.claimBoolean?X("",!0):(g(),R(c,{key:0,"start-time":s.vItem.locked_start_time,"end-time":s.vItem.locked_until_time,onCountDown:n[0]||(n[0]=w=>e.$emit("countDown"))},null,8,["start-time","end-time"]))]),a("div",{class:we(t.claimBoolean?"highlight right-h5":"right-h5")},[t.claimBoolean?(g(),A("span",vt,"Claim")):(g(),A("span",gt,"Cancel"))],2)])]),t.claimBoolean?(g(),R(y,{key:0,disabled:!t.claimBoolean||s.loading,loading:s.loading,onClick:n[1]||(n[1]=w=>t.claimWhale(s.vItem))},{default:O(()=>[$(T(t.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"])):(g(),R(y,{key:1,type:"text",class:"right",disabled:s.loading,loading:s.loading,onClick:n[2]||(n[2]=w=>t.cancelRedeemPayload(s.vItem))},{default:O(()=>[$(T(t.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"]))])}const ht=j(lt,[["render",ft],["__scopeId","data-v-22a782cd"]]),pt=xe({props:{inputValue:{type:String,default:""},coinSymbol:{type:String,default:""},whaleDirection:{type:String,default:""},address:{type:String,default:""},balance:{type:String,default:""}},setup(e,n){const{t:s,locale:t}=le(),b=ue(),h=r(()=>b),c=sn(un,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),y=ie(),w=r(()=>y),p=Xe(),f=r(()=>p),i=m=>{const S=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");m.target.value=m.target.value.replace(S,"$1")},u=r(()=>{var m;return f.value.tokensObj&&e.address&&f.value.tokensObj[e.address]&&((m=f.value.tokensObj[e.address])==null?void 0:m.decimals)});return W(()=>f.value.RATES,m=>{m&&console.log(m,"price====>")},{immediate:!0}),{pool:f,t:s,addCommom:U,store:h,wallet:w,indicator:c,inputChange:i,importIcon:K,coinDecimals:u}}});const _t=e=>(Q("data-v-83d9dead"),e=e(),z(),e),wt={class:"card"},Ct={class:"top"},bt={class:"left"},yt={class:"loading-token"},St={key:0,src:Ze,alt:""},Tt={key:1,src:je,alt:""},At={class:"bottom"},kt=_t(()=>a("div",null,null,-1)),It={class:"top"},Bt={class:"right"},Nt={key:0,class:"balance"};function $t(e,n,s,t,b,h){var p,f;const c=rn,y=dn,w=se;return g(),A("div",wt,[a("div",Ct,[E(c,{value:e.inputValue,placeholder:"0.0",onChange:e.inputChange,onInput:n[0]||(n[0]=i=>e.$emit("onInput",i.target.value)),onFocus:n[1]||(n[1]=i=>e.$emit("onFocus"))},null,8,["value","onChange"]),a("div",bt,[a("div",yt,[e.coinSymbol=="CETUS"?(g(),A("img",St)):(g(),A("img",Tt)),a("div",null,[a("p",null,T(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1)])])])]),a("div",At,[kt,a("div",It,[a("div",Bt,[a("span",null,T(e.$t("common.balance")),1),e.balance?(g(),A("span",Nt,T(e.balance>1?("addCommom"in e?e.addCommom:Ne(U))(e.balance):e.balance),1)):(g(),R(y,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})),e.whaleDirection=="From"?(g(),R(w,{key:2,class:"max-btn",disabled:!e.balance||e.balance==0||!((p=e.wallet)!=null&&p.address),onClick:n[2]||(n[2]=i=>e.$emit("halfBalanne"))},{default:O(()=>[$(T("Half"))]),_:1},8,["disabled"])):X("",!0),e.whaleDirection=="From"?(g(),R(w,{key:3,class:"max-btn",disabled:!e.balance||e.balance==0||!((f=e.wallet)!=null&&f.address),onClick:n[3]||(n[3]=i=>e.$emit("maxBalanne"))},{default:O(()=>[$(T(e.$t("button.max")),1)]),_:1},8,["disabled"])):X("",!0)])])])])}const xt=j(pt,[["render",$t],["__scopeId","data-v-83d9dead"]]);const Dt=xe({components:{Modal:cn},setup(e,n){const s=ue(),t=C(!1);r(()=>s);const b=ie(),h=r(()=>b);return{store:s,isSelect:t,clickConvert:()=>{t.value&&localStorage.setItem(`notRemind${h.value.address}`,!0),n.emit("clickConvert")}}}}),Re=e=>(Q("data-v-ee04003a"),e=e(),z(),e),Et=Re(()=>a("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),Ut=[Et],Pt={class:"token-waring-conetnt"},Rt=Re(()=>a("div",{class:"tips-text"},[$(" Please note that after conversion, if you want to convert xCETUS back to CETUS, a vesting period will be applied & different vesting durations correspond to different redeem ratios. "),a("a",{href:"https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus",target:"_blank"}," Learn more")],-1)),Mt={class:"read-text"},Lt={key:0,src:pn},Wt=Re(()=>a("span",null," Do not remind again. ",-1));function Ot(e,n,s,t,b,h){const c=se,y=He("Modal");return g(),R(y,{width:"440px",visible:!0,footer:null,title:null,"mask-closable":!0,onCancel:n[3]||(n[3]=w=>e.$emit("close"))},{closeIcon:O(()=>[(g(),A("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:n[0]||(n[0]=w=>e.$emit("close"))},Ut))]),default:O(()=>[a("div",Pt,[Rt,a("div",Mt,[a("div",{class:"radio",onClick:n[1]||(n[1]=w=>e.isSelect=!e.isSelect)},[e.isSelect?(g(),A("img",Lt)):X("",!0)]),Wt]),E(c,{class:"big-btn continue",onClick:n[2]||(n[2]=()=>e.clickConvert())},{default:O(()=>[$("Convert")]),_:1})])]),_:1})}const Vt=j(Dt,[["render",Ot],["__scopeId","data-v-ee04003a"]]),Yt=xe({setup(){const e=De(),n=r(()=>e),s=r(()=>n.value.venft_id),t=r(()=>n.value.venftInfo),b=Xe(),h=r(()=>b),c=ue(),y=r(()=>c),w=_n();r(()=>h.value.tokensObj&&h.value.tokensObj["0x2a4f647bc73f070182436658bff75060246019857c769ad9268c22c4472bca7f::cetus::CETUS"]);const p=C("");let f=C(!1);const i=C(""),u=C(""),m=C(!1),l=C("convert"),{t:S}=le(),x=C([{time:"15 D",num:15},{time:"30 D",num:30},{time:"90 D",num:90},{time:"180 D",num:180}]),de=C([{name:"est.APR",value:"100.12%"},{name:"My share",value:"<0.1%"},{name:"Pending yield (USDC)",value:0}]),Se=C([{name:"My total locked",value:"$100.12"},{name:"Pending rewards (xCETUS)",value:"100.12"},{name:"",value:""}]),ce=C([{name:"My positions",value:"12"},{name:"My qualified positions",value:"0"},{name:"Pending rewards (xCETUS)",value:"100.12"}]),me=window.setInterval(()=>{e.getXcetusApr(),_.value.address&&(e.getMyShare(_.value.address),e.getVeNFTDividendInfo())},6e4);mn(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||e.getDividendManager()}),e.getXcetusApr(),e.getDividendManager()}),vn(()=>{window.clearInterval(me),document.removeEventListener("visibilitychange",()=>{console.log("移除监听")})}),W(()=>y.value.theme,o=>{o!=="sui"&&w.selectSuiTheme()},{immediate:!0});const Z=r(()=>(console.log(n.value.whaleBalance,"==>xcetus.value.whaleBalance"),n.value.whaleBalance)),ve=r(()=>n.value.xWhaleBalance),V=r(()=>n.value.availableXwhale),Te=r(()=>n.value.redeemingXwhale),ge=r(()=>{if(l.value=="convert"){if(Number(i.value)>Number(Z.value))return!0}else if(Number(i.value)>Number(V.value))return!0;return!i.value||!u.value||Number(i.value)==0||Number(u.value)==0}),I=C("180"),Y=r(()=>(console.log(l.value=="convert","===>1212211"),l.value=="convert"&&Number(i.value)>Number(Z.value)?S("button.insufficientBalance",{name:"CETUS"}):l.value!=="convert"&&Number(i.value)>Number(V.value)?S("button.insufficientBalance",{name:"xCETUS"}):Number(I.value)<15?"Minimum vesting duration is 15 days":l.value=="convert"&&s?"Convert":l.value!=="convert"&&s?"Redeem":"Convert"));console.log(Y.value,"btnText.value===>");const Ae=o=>{i.value="",u.value="",l.value=o},ee=()=>{f.value=!0,setTimeout(()=>{f.value=!1},300)},Me=o=>{I.value=o},v=C(!1),M=Ue("Sui"),q=ie(),_=r(()=>q),ne=r(()=>n.value.ownerLocks);W(()=>_.value.address,o=>{console.log("触发",o),o?(e.getOwnerVeNFT(o),e.getAccountWhaleBalance(o),e.getOwnerLockCetuss(o),e.getMyShare(o)):e.loginOut()},{immediate:!0});const D=r(()=>y.value.chainName?Ee(y.value.chainName):{}),te=r(()=>y.value.chainName),{setIsShowSuccess:ae,setIsShowRejected:F,setIsShowWaiting:B,setTransactionDesc:oe,setTransactionTxid:H}=c,ke=async()=>{v.value=!0,B(!0),H(""),oe(S("tips.converting",{from:`${U(i.value,9)} CETUS`,and:"to",to:`${U(i.value,9)} xCETUS`}));try{let o;const d=_e(i.value,9);console.log(s.value,"===>venft_id.value");const k=await M.depositCetus(d,s.value);console.log(k,"payload==>");const P=await _.value.currentWallet.signAndExecuteTransactionBlock(k);if(o=D.value.handleTx(P),o&&o.hash){H(o.hash),B(!1),ae(!0);const N={title:"Converted",desc:`Converted ${U(i.value,9)} xCETUS successfully`,hash:o.hash,tit:"Converted",icon:"icon-icon-Swap",tokenInfo:{tokena:"CETUS",numa:`- ${i.value}`,logoa:K("/sui-image/WHALE-icon.png"),tokenb:"xCETUS",numb:`+ ${i.value}`,logob:K("/sui-image/xWHALE-icon.png")}};te.value!=="Aptos"&&(N.res=o.res),D.value.showTransitionPending(N);const L=await D.value.watchTransaction(N);console.log("0221###swap###transitionStatus####",L),L&&setTimeout(()=>{e.getAccountWhaleBalance(_.value.address),e.getOwnerVeNFT(_.value.address),e.getOwnerLockCetuss(_.value.address),e.getMyShare(_.value.address)},3e3),v.value=!1}else B(!1),F(!0),v.value=!1;i.value=""}catch(o){B(!1),F(!0),v.value=!1,i.value="",console.log(o,"error===>")}},J=C(!0),Ie=C("0"),qe=async()=>{const o=_e(i.value,9),d=await M.redeemNum(o,Number(I.value));u.value=G(d.amountOut,9),console.log("===>amount2222"),Ie.value=d.percent},Ge=async()=>{const o=_e(u.value,9),d=await M.reverseRedeemNum(o,Number(I.value));console.log(d,"===>amount111"),i.value=G(d.amountOut,9),Ie.value=d.percent};W(()=>[i.value,I.value,J.value],([o,d,k])=>{console.log(o,"===>>>>>>>fromCoinAmount",typeof o),o&&d&&k&&Number(d)>=15&&qe(),!o&&k&&(u.value="")},{immediate:!0}),W(()=>[u.value,I.value,J.value],([o,d,k])=>{o&&d&&!k&&Number(d)>=15&&(Ge(),console.log(o,"===>toCoinAmount")),!o&&!k&&(i.value="")},{immediate:!0}),W(()=>[I.value,J.value],([o,d])=>{Number(o)>180?I.value="180":Number(o)<15?d?u.value="":i.value="":o||(d?i.value="":u.value="")},{immediate:!0});const Ke=()=>{J.value=!0,i.value=Ce(new Ve(l.value!=="convert"?V.value:Z.value).div(new Ve(2)).toString(),9)},Qe=()=>{J.value=!0,i.value=l.value!=="convert"?Ce(V.value,9):Ce(Z.value,9)},Le=async()=>{v.value=!0,B(!0),H(""),oe(S("tips.redeeming",{from:`${U(i.value,9)} xCETUS`,to:`${U(u.value,9)} CETUS`}));try{let o;const d=_e(i.value,9);console.log(d.toString(),"538====>");const k=await M.getRedeemLockPayload(d,s.value,Number(I.value));console.log(k,"payload==>");const P=await _.value.currentWallet.signAndExecuteTransactionBlock(k);if(o=D.value.handleTx(P),o&&o.hash){H(o.hash),B(!1),ae(!0);const N={title:"Redemption",desc:"Redemption transaction submitted successfully.",hash:o.hash,tit:"Vesting",icon:"icon-icon-Removed",tokenInfo:{tokena:"xCETUS",numa:`- ${i.value}`,logoa:K("/sui-image/xWHALE-icon.png")}};te.value!=="Aptos"&&(N.res=o.res),D.value.showTransitionPending(N);const L=await D.value.watchTransaction(N);console.log("0221###swap###transitionStatus####",L),L&&setTimeout(()=>{e.getAccountWhaleBalance(_.value.address),e.getOwnerVeNFT(_.value.address),e.getOwnerLockCetuss(_.value.address),e.getMyShare(_.value.address)},3e3),v.value=!1}else B(!1),F(!0),v.value=!1;i.value="",u.value=""}catch(o){B(!1),F(!0),v.value=!1,i.value="",u.value="",console.log(o,"error===>")}};W(()=>[s.value,ne.value,t.value,_.value.address],([o,d,k,P])=>{P&&(o&&e.getVeNFTDividendInfo(),o&&!$e(k)&&d&&d.length>0&&(console.log("执行了",d),e.getAvailableXCetus()))},{immediate:!0,deep:!0});const ze=async o=>{v.value=!0,B(!0),H(""),oe("");try{let d;console.log(o.id,"==>vItem.id");const k=await M.getCancelRedeemPayload(o.id,s.value);console.log(k,"payload==>");const P=await _.value.currentWallet.signAndExecuteTransactionBlock(k);if(d=D.value.handleTx(P),d&&d.hash){H(d.hash),B(!1),ae(!0);const N={title:"Cancelled Redemption",desc:"Cancelled redemption successfully.",hash:d.hash,tit:"Cancelled Redemption",icon:"icon-a-icon-Shutdown",tokenInfo:{tokena:"xCETUS",numa:`+ ${G(o.xcetus_amount,9)}`,logoa:K("/sui-image/xWHALE-icon.png")}};te.value!=="Aptos"&&(N.res=d.res),D.value.showTransitionPending(N);const L=await D.value.watchTransaction(N);console.log("0221###swap###transitionStatus####",L),L&&setTimeout(()=>{e.getOwnerVeNFT(_.value.address),e.getOwnerLockCetuss(_.value.address),v.value=!1},3e3)}else B(!1),F(!0),v.value=!1;i.value="",u.value=""}catch(d){B(!1),F(!0),v.value=!1,i.value="",u.value="",e.setClaimLoading(""),console.log(d,"error===>")}},Je=C({}),en=()=>{console.log("倒计时结束"),e.getOwnerLockCetuss(_.value.address)},nn=async o=>{console.log(o,"vItem===>"),v.value=!0,B(!0),H(""),oe(`${S("tips.claimingPendingYield")} ${U(G(o.cetus_amount,9),9)} CETUS`);try{let d;const k=await M.getRedeemPayload(o.id,s.value);console.log(k,"payload==>");const P=await _.value.currentWallet.signAndExecuteTransactionBlock(k);if(d=D.value.handleTx(P),d&&d.hash){H(d.hash),B(!1),ae(!0);const N={title:"Claimed",desc:`Claimed ${U(G(o.cetus_amount,9),9)} CETUS successfully.`,hash:d.hash,tit:"CETUS Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:"CETUS",numa:`+ ${G(o.cetus_amount,9)}`,logoa:K("/sui-image/WHALE-icon.png")}};te.value!=="Aptos"&&(N.res=d.res),D.value.showTransitionPending(N);const L=await D.value.watchTransaction(N);console.log("0221###swap###transitionStatus####",L),L&&setTimeout(()=>{e.getOwnerLockCetuss(_.value.address),e.getAccountWhaleBalance(_.value.address),e.getOwnerVeNFT(_.value.address),e.getMyShare(_.value.address),e.getAvailableXCetus(),v.value=!1},3e3)}else B(!1),F(!0),v.value=!1;i.value="",u.value=""}catch(d){B(!1),F(!0),v.value=!1,i.value="",u.value="",e.setClaimLoading(""),console.log(d,"error===>")}},Be=C(!1),tn=()=>{!localStorage.getItem(`notRemind${_.value.address}`)&&Y.value=="Convert"?Be.value=!0:Y.value=="Redeem"?Le():ke()},an=()=>{Be.value=!1,ke()},fe=r(()=>n.value.pendingCoinInfo),he=r(()=>n.value.pendingAmount),pe=C(!1);return{clickModalConvert:an,openConfirmModal:Be,validateInput:()=>{I.value&&(I.value=I.value.replace(/[^\d]/g,""),I.value.charAt(0)==="0"&&(I.value=I.value.slice(1)))},countDown:en,value:p,change:f,clickExchange:ee,fromCoinAmount:i,toCoinAmount:u,showCoinSelect:m,headSwitchValue:l,headSwitchChange:Ae,vestingDateList:x,vestingParameter:I,vestingTab:Me,holderList:de,lockupList:Se,leaderboardList:ce,whaleBalance:Z,depositCetus:ke,btnText:Y,loading:v,redeemRatio:Ie,halfBalanne:Ke,maxBalanne:Qe,xWhaleBalance:ve,availableXwhale:V,redeemingXwhale:Te,withdrawWhale:Le,ownerLocks:ne,cancelRedeemPayload:ze,holderInfo:Je,btnDisabled:ge,fixedFromCoin:J,walletStore:q,claimWhale:nn,wallet:_,depositOrWithdraw:tn,pendingAmount:he,claimPendingYield:async()=>{pe.value=!0,B(!0),H(""),oe(`${S("tips.claimingPendingYield")} ${he.value} ${fe.value.symbol}`);try{let o;const d=await M.getRedeemDividendV2Payload(s.value);console.log(d,"payload==>");const k=await _.value.currentWallet.signAndExecuteTransactionBlock(d);if(o=D.value.handleTx(k),o&&o.hash){H(o.hash),B(!1),ae(!0);const P={title:"Claim",desc:`Claimed ${he.value} ${fe.value.symbol} successfully.`,hash:o.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:fe.value.symbol,numa:`+ ${he.value}`,logoa:fe.value.logo_url}};te.value!=="Aptos"&&(P.res=o.res),D.value.showTransitionPending(P);const N=await D.value.watchTransaction(P);console.log("0221###swap###transitionStatus####",N),N&&setTimeout(()=>{e.getVeNFTDividendInfo(),pe.value=!1},3e3),e.getOwnerLockCetuss(_.value.address)}else B(!1),F(!0),pe.value=!1,v.value=!1}catch(o){B(!1),F(!0),pe.value=!1,console.log(o,"error===>")}},inputBlur:()=>{Number(I.value)<15&&(I.value="15")},getNextEpoch:()=>{e.getDividendManager()}}}});const re=e=>(Q("data-v-924bb0a1"),e=e(),z(),e),Ft={class:"dashboard-all"},Ht={class:"dashboard-content"},Xt={class:"content-left"},jt={key:0,class:"vesting"},Zt=re(()=>a("p",null,"Vesting",-1)),qt={class:"content-right"},Gt={key:0,class:"card-container"},Kt={class:"card-item"},Qt={class:"card-item"},zt={class:"exchange"},Jt=re(()=>a("use",{"xlink:href":"#icon-icon-swap2"},null,-1)),ea=[Jt],na={key:1,class:"card-redeem"},ta={class:"card-item"},aa={class:"vesting-duration"},oa=re(()=>a("p",null,"Vesting duration",-1)),la={class:"vesting-content"},sa={class:"vesting-left"},ia={class:"value-days"},ua=re(()=>a("span",null,"days",-1)),ra={class:"vesting-right"},da=["onClick"],ca={class:"card-item"},ma={class:"redeem-ratio"},va=re(()=>a("span",null,"Redeem ratio",-1));function ga(e,n,s,t,b,h){const c=on,y=Kn,w=ht,p=hn,f=xt,i=fn,u=se,m=Vt;return g(),A("div",Ft,[E(c,{title:"Dashboard","total-xwhale":e.xWhaleBalance,"available-xwhale":e.availableXwhale,"redeeming-xwhale":e.redeemingXwhale},null,8,["total-xwhale","available-xwhale","redeeming-xwhale"]),a("div",Ht,[a("div",Xt,[E(y,{"holder-info":e.holderInfo,"pending-amount":e.pendingAmount,"claim-loading":e.claimLoading,onClaimPendingYield:e.claimPendingYield,onGetNextEpoch:e.getNextEpoch},null,8,["holder-info","pending-amount","claim-loading","onClaimPendingYield","onGetNextEpoch"]),e.ownerLocks&&e.ownerLocks.length>0?(g(),A("div",jt,[Zt,(g(!0),A(We,null,Oe(e.ownerLocks,l=>(g(),R(w,{key:l,"v-item":l,loading:e.loading,onCountDown:e.countDown,onClaimWhale:e.claimWhale,onCancelRedeemPayload:e.cancelRedeemPayload},null,8,["v-item","loading","onCountDown","onClaimWhale","onCancelRedeemPayload"]))),128))])):X("",!0)]),a("div",qt,[E(p,{"head-switch-value":e.headSwitchValue,"left-text":"Get xCETUS","right-text":"Redeem CETUS",onHeadSwitchChange:n[0]||(n[0]=l=>{e.headSwitchChange(l)})},null,8,["head-switch-value"]),e.headSwitchValue=="convert"?(g(),A("div",Gt,[a("div",Kt,[E(f,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[1]||(n[1]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"CETUS","whale-direction":"From",balance:e.whaleBalance,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:n[2]||(n[2]=l=>{e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),a("div",Qt,[E(f,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[3]||(n[3]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"To",balance:e.availableXwhale,onOnInput:n[4]||(n[4]=l=>{e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance"])]),a("img",{class:we(e.change?"gang animationex":"gang"),src:wn,alt:""},null,2),a("div",zt,[(g(),A("svg",{class:we(e.change?"icon animationex":"icon"),"aria-hidden":"true"},ea,2))])])):(g(),A("div",na,[a("div",ta,[E(f,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[5]||(n[5]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"From",balance:e.availableXwhale,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:n[6]||(n[6]=l=>{e.fixedFromCoin=!0,e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),a("div",aa,[oa,a("div",la,[a("div",sa,[a("div",ia,[Fe(a("input",{"onUpdate:modelValue":n[7]||(n[7]=l=>e.vestingParameter=l),onInput:n[8]||(n[8]=(...l)=>e.validateInput&&e.validateInput(...l)),onBlur:n[9]||(n[9]=(...l)=>e.inputBlur&&e.inputBlur(...l))},null,544),[[gn,e.vestingParameter]])]),ua]),a("div",ra,[(g(!0),A(We,null,Oe(e.vestingDateList,l=>(g(),A("div",{key:l.time,class:we(["box-table",{"box-table-active":l.num===Number(e.vestingParameter)}]),onClick:S=>e.vestingTab(l.num)},T(l.time),11,da))),128))])]),E(i,{value:e.vestingParameter,"onUpdate:value":n[10]||(n[10]=l=>e.vestingParameter=l),max:180,min:15},null,8,["value"])]),a("div",ca,[E(f,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[11]||(n[11]=l=>e.toCoinAmount=l),"input-value":e.toCoinAmount,"coin-symbol":"CETUS","whale-direction":"To",balance:e.whaleBalance,onOnInput:n[12]||(n[12]=l=>{e.fixedFromCoin=!1,e.toCoinAmount=l})},null,8,["modelValue","input-value","balance"])]),a("div",ma,[va,a("p",null,T(e.redeemRatio)+"%",1)])])),e.wallet&&e.wallet.address?(g(),R(u,{key:2,class:"big-btn",loading:e.loading,disabled:e.btnDisabled,onClick:e.depositOrWithdraw},{default:O(()=>[a("span",null,T(e.btnText),1)]),_:1},8,["loading","disabled","onClick"])):(g(),R(u,{key:3,class:"big-btn",onClick:n[13]||(n[13]=l=>e.walletStore.setIsShowWalletModal(!0))},{default:O(()=>[a("span",null,T(e.$t("button.connectWallet")),1)]),_:1}))])]),e.openConfirmModal?(g(),R(m,{key:0,onClickConvert:e.clickModalConvert,onClose:n[14]||(n[14]=()=>e.openConfirmModal=!e.openConfirmModal)},null,8,["onClickConvert"])):X("",!0)])}const Ma=j(Yt,[["render",ga],["__scopeId","data-v-924bb0a1"]]);export{Ma as default};
