import{_ as re}from"./new-position-title.59280058.js";import{_ as Yo}from"./token-warning.239f3c92.js";import{_ as ce}from"./status-block.3da919d2.js";import{u as No,g as me,a as $,d as To,c as Mo,p as Jo,b as Qo,s as co,e as so,f as ve,h as pe,T as qo,C as Ko}from"./pool.0b132fe1.js";import{u as ko,a as Oo}from"./sha256.3580031f.js";import{i as Io}from"./import-icon.de3e6c66.js";import{u as Do,a as Vo}from"./autoPool.5af7a120.js";import{a as bo,l as d,r as M,m as ho,q as no,e as go,s as Lo,o as _,f as B,h as e,t as H,i as W,v as u,j as mo,x as Go,u as F,p as Co,k as So,M as Zo,y as jo,z as xo,c as Q,w as io,B as Wo,A as oe,C as Ho,D as fe,L as _e,I as be,S as ee,E as he,b as ne,F as ge,G as ye,H as $e,J as Ie}from"./entry.e4e67c1a.js";import{_ as ke}from"./assets-card.991ed9b4.js";import{D as y}from"./decimal.0e8aa3f1.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./decimal.633e31ee.js";import"./back.c5018277.js";import"./swap-setting.136ba13a.js";/* empty css              */import"./index.f274831a.js";/* empty css              */const Ce=bo({setup(){const o=ko(),t=d(()=>o),T=No(),P=d(()=>T),N=d(()=>t.value.theme),I=n=>{var r;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((r=P.value.tokensObj[n==null?void 0:n.address])==null?void 0:r.logo_url)||(N.value==="default"?Io("/image/coins/unknown.png"):Io("/image/coins/sui-unknown.png"))},f=M(!0),m=Do(),b=d(()=>m),p=ho(),s=M();no(()=>[b.value.positionInfoObj,p.params.id],([n,r])=>{n&&!Mo(n)&&r&&(s.value=n[r],console.log(s.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const i=d(()=>{var n;return(n=s.value)==null?void 0:n.needReverse}),a=d(()=>{var n,r;return b.value.apyObj&&((r=b.value.apyObj[(n=s.value)==null?void 0:n.id])==null?void 0:r.tvl)||"--"}),l=d(()=>{var n,r;return b.value.apyObj&&((r=b.value.apyObj[(n=s.value)==null?void 0:n.id])==null?void 0:r.apr)||"--"});return{positionInfo:s,tvl:a,store:t,indexStore:o,needReverse:i,getCoinIcon:I,getExplorerUrl:me,addCommom:$,decimalUi:To,direct:f,apy:l}}});const Bo=o=>(Co("data-v-36444486"),o=o(),So(),o),Se={class:"auto-position-info"},Ae={class:"pool-info"},we={class:"left"},Pe={class:"coin-a"},Re={alt:""},qe={class:"coin-b"},Te={alt:""},Ne={class:"position-name"},Le={key:0,class:"pool-fee"},Be=Bo(()=>e("span",null,"Fee tier",-1)),Me={class:"right"},Oe={class:"price-info"},De={class:"current-price"},je=Bo(()=>e("span",null,"Current Price",-1)),Ue={class:"coin-rate"},Fe=Bo(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),We=Bo(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Ee=[Fe,We],Xe={key:0},ze={key:1},He={class:"apy-and-tvl"},Ye={class:"apy"},Ge=Bo(()=>e("div",{class:"apy-title"},"APY",-1)),Je={class:"apy-text"},Ke={class:"tvl"},Qe=Bo(()=>e("div",{class:"tvl-title"},"TVL",-1)),Ve={class:"tvl-text"};function Ze(o,t,T,P,N,I){var p,s,i,a,l,n,r,c,C,g,A,Y,q,S,E,L,O,G,J,w,D,V,K,eo,Z,lo,x,vo,yo,po,h,z,ro;const f=Yo,m=ce,b=Lo("image");return _(),B("div",Se,[e("div",Ae,[e("div",we,[e("div",Pe,[H(e("img",Re,null,512),[[b,o.needReverse?o.getCoinIcon((s=o.positionInfo)==null?void 0:s.token_b):o.getCoinIcon((p=o.positionInfo)==null?void 0:p.token_a)]]),W(f,{address:o.needReverse?(n=(l=o.positionInfo)==null?void 0:l.token_b)==null?void 0:n.address:(a=(i=o.positionInfo)==null?void 0:i.token_a)==null?void 0:a.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",qe,[H(e("img",Te,null,512),[[b,o.needReverse?o.getCoinIcon((c=o.positionInfo)==null?void 0:c.token_a):o.getCoinIcon((r=o.positionInfo)==null?void 0:r.token_b)]]),W(f,{address:o.needReverse?(Y=(A=o.positionInfo)==null?void 0:A.token_a)==null?void 0:Y.address:(g=(C=o.positionInfo)==null?void 0:C.token_b)==null?void 0:g.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Ne,u(o.needReverse?(S=(q=o.positionInfo)==null?void 0:q.token_b)==null?void 0:S.symbol:(L=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:L.symbol)+" - "+u(o.needReverse?(G=(O=o.positionInfo)==null?void 0:O.token_a)==null?void 0:G.symbol:(w=(J=o.positionInfo)==null?void 0:J.token_b)==null?void 0:w.symbol),1),(D=o.positionInfo)!=null&&D.fee?(_(),B("div",Le,[Be,mo(" "+u(((V=o.positionInfo)==null?void 0:V.fee)*100)+"% ",1)])):Go("",!0)]),e("div",Me,[W(m,{"current-status":(K=o.positionInfo)==null?void 0:K.currentStatus},null,8,["current-status"])])]),e("div",Oe,[e("div",De,[e("div",null,[je,e("div",Ue,[e("div",{onClick:t[0]||(t[0]=fo=>o.direct=!o.direct)},Ee)])]),(o.needReverse?!o.direct:o.direct)?(_(),B("div",Xe,[mo(u(("addCommom"in o?o.addCommom:F($))(("decimalUi"in o?o.decimalUi:F(To))((eo=o.positionInfo)==null?void 0:eo.price,6)))+"   ",1),e("span",null,u((lo=(Z=o.positionInfo)==null?void 0:Z.token_b)==null?void 0:lo.symbol)+" per "+u((vo=(x=o.positionInfo)==null?void 0:x.token_a)==null?void 0:vo.symbol),1)])):(_(),B("div",ze,[mo(u(("addCommom"in o?o.addCommom:F($))(("decimalUi"in o?o.decimalUi:F(To))(1/((yo=o.positionInfo)==null?void 0:yo.price),6)))+"   ",1),e("span",null,u((h=(po=o.positionInfo)==null?void 0:po.token_a)==null?void 0:h.symbol)+" per "+u((ro=(z=o.positionInfo)==null?void 0:z.token_b)==null?void 0:ro.symbol),1)]))]),e("div",He,[e("div",Ye,[Ge,e("div",Je,u(o.apy),1)]),e("div",Ke,[Qe,e("div",Ve,"$"+u(("addCommom"in o?o.addCommom:F($))(o.tvl,2)),1)])])])])}const te=go(Ce,[["render",Ze],["__scopeId","data-v-36444486"]]),xe=bo({setup(){const o=Do(),t=d(()=>o),T=ho(),P=d(()=>(console.log(t.value.positionInfoObj[T.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),t.value.positionInfoObj[T.params.id])),N=d(()=>{var m;return(m=P.value)==null?void 0:m.needReverse}),I=Oo(),f=d(()=>I);return{positionInfo:P,needReverse:N,addCommom:$,wallet:f}}});const Ao=o=>(Co("data-v-5d18256e"),o=o(),So(),o),on={class:"auto-position-liquidity"},en={class:"my-liquidity"},nn={class:"left"},tn=Ao(()=>e("div",null,"My Liquidity",-1)),sn={key:0},ln={key:1},an={class:"right"},un=Ao(()=>e("div",null,"My share",-1)),dn={key:0},rn={key:1},cn={class:"my-liquidity-info"},mn={class:"lp-info"},vn={class:"lp-bg"},pn={alt:""},fn={key:0,class:"lp-num"},_n={key:1,class:"lp-num"},bn=Ao(()=>e("div",{class:"assets-pooled-title"}," Pooled Assets ",-1)),hn={class:"assets-pooled"},gn={alt:""},yn={key:0},$n={key:1},In=Ao(()=>e("p",null,"--",-1)),kn=Ao(()=>e("p",null,"--",-1)),Cn=[In,kn],Sn={alt:""},An={key:0},wn={key:1},Pn=Ao(()=>e("p",null,"--",-1)),Rn=Ao(()=>e("p",null,"--",-1)),qn=[Pn,Rn];function Tn(o,t,T,P,N,I){var m,b,p,s,i,a,l,n,r,c,C,g,A,Y,q,S,E,L,O,G,J,w,D,V,K,eo,Z,lo,x,vo;const f=Lo("image");return _(),B("div",on,[e("div",en,[e("div",nn,[tn,(m=o.wallet)!=null&&m.connected?(_(),B("div",sn,"$"+u(("addCommom"in o?o.addCommom:F($))((b=o.positionInfo)==null?void 0:b.myLiquidityUSD)),1)):(_(),B("div",ln,"--"))]),e("div",an,[un,(p=o.wallet)!=null&&p.connected?(_(),B("div",dn,u((s=o.positionInfo)==null?void 0:s.myShare)+"%",1)):(_(),B("div",rn,"--%"))])]),e("div",cn,[e("div",mn,[e("div",vn,[H(e("img",pn,null,512),[[f,(a=(i=o.positionInfo)==null?void 0:i.lpInfo)==null?void 0:a.logo_url]])]),(l=o.wallet)!=null&&l.connected?(_(),B("div",fn,u(("addCommom"in o?o.addCommom:F($))((n=o.positionInfo)==null?void 0:n.myLiquidity))+" LP",1)):(_(),B("div",_n,"-- LP"))]),bn,e("div",hn,[e("div",null,[H(e("img",gn,null,512),[[f,o.needReverse?(c=(r=o.positionInfo)==null?void 0:r.token_b)==null?void 0:c.logo_url:(g=(C=o.positionInfo)==null?void 0:C.token_a)==null?void 0:g.logo_url]]),(A=o.wallet)!=null&&A.connected?(_(),B("div",yn,[e("p",null,"$"+u(("addCommom"in o?o.addCommom:F($))((Y=o.positionInfo)==null?void 0:Y.myAmountAUSD)),1),e("p",null,u(("addCommom"in o?o.addCommom:F($))((q=o.positionInfo)==null?void 0:q.amountA))+" "+u(o.needReverse?(E=(S=o.positionInfo)==null?void 0:S.token_b)==null?void 0:E.symbol:(O=(L=o.positionInfo)==null?void 0:L.token_a)==null?void 0:O.symbol),1)])):(_(),B("div",$n,Cn))]),e("div",null,[H(e("img",Sn,null,512),[[f,o.needReverse?(J=(G=o.positionInfo)==null?void 0:G.token_a)==null?void 0:J.logo_url:(D=(w=o.positionInfo)==null?void 0:w.token_b)==null?void 0:D.logo_url]]),(V=o.wallet)!=null&&V.connected?(_(),B("div",An,[e("p",null,"$"+u(("addCommom"in o?o.addCommom:F($))((K=o.positionInfo)==null?void 0:K.myAmountBUSD)),1),e("p",null,u(("addCommom"in o?o.addCommom:F($))((eo=o.positionInfo)==null?void 0:eo.amountB))+" "+u(o.needReverse?(lo=(Z=o.positionInfo)==null?void 0:Z.token_a)==null?void 0:lo.symbol:(vo=(x=o.positionInfo)==null?void 0:x.token_b)==null?void 0:vo.symbol),1)])):(_(),B("div",wn,qn))])])])])}const se=go(xe,[["render",Tn],["__scopeId","data-v-5d18256e"]]),Nn=bo({components:{Modal:Zo},props:{poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},totalAmount:{type:String,default:""},shareOfPool:{type:String,default:""},minimumReceivedLP:{type:String,default:""}},setup(o,t){const{t:T}=jo(),P=d(()=>{var a,l,n;return((a=o==null?void 0:o.poolInfo)==null?void 0:a.needReverse)||((n=(l=o==null?void 0:o.poolInfo)==null?void 0:l.poolInfo)==null?void 0:n.needReverse)}),N=No(),I=d(()=>N),f=ko(),m=d(()=>f),b=a=>{var l;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((l=I.value.tokensObj[a==null?void 0:a.address])==null?void 0:l.logo_url)||(m.value.theme==="default"?Io("/image/coins/unknown.png"):Io("/image/coins/sui-unknown.png"))},p=ho(),s=M(!1),i=()=>{t.emit("toAdd")};return console.log(o,"props451"),{needReverse:P,getCoinIcon:b,addCommom:$,t:T,route:p,checked:s,decimalUi:To,clickSubmit:i}}});const Uo=o=>(Co("data-v-bb911124"),o=o(),So(),o),Ln=Uo(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Bn={class:"modal-content"},Mn={class:"pool-info"},On={class:"left"},Dn={alt:""},jn={alt:""},Un={class:"pool-name"},Fn={class:"right"},Wn={class:"coin-info"},En={class:"from-coin-info"},Xn={class:"left"},zn={class:"coin-amount"},Hn={class:"coin-symbol"},Yn={class:"right"},Gn={class:"to-coin-info"},Jn={class:"left"},Kn={class:"coin-amount"},Qn={class:"coin-symbol"},Vn={class:"right"},Zn=Uo(()=>e("div",{class:"to-swap-logo"},null,-1)),xn={class:"add-info"},ot={class:"total-amount"},et=Uo(()=>e("span",null,"Total Amount",-1)),nt={class:"total-amount"},tt=Uo(()=>e("span",null,"Share of Pool",-1)),st={class:"total-amount"},it=Uo(()=>e("span",null,"Minimum Received LP",-1));function lt(o,t,T,P,N,I){const f=Yo,m=Wo,b=xo("Modal"),p=Lo("image");return _(),Q(b,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:t[0]||(t[0]=s=>o.$emit("onClose"))},{closeIcon:io(()=>[Ln]),default:io(()=>{var s,i,a,l,n,r,c,C,g,A,Y,q,S,E,L,O,G,J,w,D,V,K,eo,Z;return[e("div",Bn,[e("div",Mn,[e("div",On,[e("div",null,[H(e("img",Dn,null,512),[[p,o.needReverse?(l=(a=o.poolInfo)==null?void 0:a.token_b)==null?void 0:l.logo_url:(i=(s=o.poolInfo)==null?void 0:s.token_a)==null?void 0:i.logo_url]]),W(f,{address:o.needReverse?(C=(c=o.poolInfo)==null?void 0:c.token_b)==null?void 0:C.address:(r=(n=o.poolInfo)==null?void 0:n.token_a)==null?void 0:r.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[H(e("img",jn,null,512),[[p,o.needReverse?(q=(Y=o.poolInfo)==null?void 0:Y.token_a)==null?void 0:q.logo_url:(A=(g=o.poolInfo)==null?void 0:g.token_b)==null?void 0:A.logo_url]]),W(f,{address:o.needReverse?(O=(L=o.poolInfo)==null?void 0:L.token_a)==null?void 0:O.address:(E=(S=o.poolInfo)==null?void 0:S.token_b)==null?void 0:E.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",Un,[e("span",null,u(o.needReverse?(D=(w=o.poolInfo)==null?void 0:w.token_b)==null?void 0:D.symbol:(J=(G=o.poolInfo)==null?void 0:G.token_a)==null?void 0:J.symbol),1),mo(" - "),e("span",null,u(o.needReverse?(Z=(eo=o.poolInfo)==null?void 0:eo.token_a)==null?void 0:Z.symbol:(K=(V=o.poolInfo)==null?void 0:V.token_b)==null?void 0:K.symbol),1)])]),e("div",Fn,[mo(" Fee tier "),e("span",null,u(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),e("div",Wn,[e("div",En,[e("div",Xn,[e("div",zn,u(("addCommom"in o?o.addCommom:F($))(o.fromCoinAmount)||0),1),e("div",Hn,u(o.fromCoin&&o.fromCoin.symbol),1)]),e("div",Yn,[H(e("img",null,null,512),[[p,o.fromCoin&&o.fromCoin.logoURI||o.getCoinIcon(o.fromCoin)]]),W(f,{address:o.fromCoin&&o.fromCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])])]),e("div",Gn,[e("div",Jn,[e("div",Kn,u(("addCommom"in o?o.addCommom:F($))(o.toCoinAmount)||0),1),e("div",Qn,u(o.toCoin&&o.toCoin.symbol),1)]),e("div",Vn,[H(e("img",null,null,512),[[p,o.toCoin&&o.toCoin.logoURI||o.getCoinIcon(o.toCoin)]]),W(f,{address:o.toCoin&&o.toCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),Zn])]),e("div",xn,[e("div",ot,[et,e("span",null,"$"+u(("addCommom"in o?o.addCommom:F($))(o.totalAmount)),1)]),e("div",nt,[tt,e("span",null,u(o.shareOfPool)+"%",1)]),e("div",st,[it,e("span",null,u(("addCommom"in o?o.addCommom:F($))(o.minimumReceivedLP))+" "+u(o.fromCoin.symbol)+"-"+u(o.toCoin.symbol),1)])])]),W(m,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:io(()=>[mo(" Add Liquidity ")]),_:1},8,["onClick"])]}),_:1})}const ie=go(Nn,[["render",lt],["__scopeId","data-v-bb911124"]]),at=bo({components:{AutoPoolAddModal:ie},setup(){const o=Oo(),t=M(!1),T=ko(),P=d(()=>T),N=d(()=>P.value.chainName),I=d(()=>o),f=Do(),m=d(()=>f),b=No(),p=d(()=>b),s=M(),i=ho();no(()=>[m.value.positionInfoObj,i.params.id],([v,k])=>{v&&!Mo(v)&&k&&(s.value=v[k],console.log(s.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const a=d(()=>{var v,k;return console.log((v=s.value)==null?void 0:v.needReverse,"##positionInfo.value?.needReverse"),(k=s.value)==null?void 0:k.needReverse}),l=M(),n=M();no(()=>s.value,v=>{v&&!Mo(v)&&(l.value=v==null?void 0:v.token_a,n.value=v==null?void 0:v.token_b)},{immediate:!0});const r=M(),c=M(),C=M(!0),g=d(()=>I.value.assets&&l.value&&I.value.assets[l.value.address]?Jo(I.value.assets[l.value.address].balance,l.value.decimals):0),A=d(()=>I.value.assets&&n.value&&I.value.assets[n.value.address]?Jo(I.value.assets[n.value.address].balance,n.value.decimals):0),Y=v=>{v==="fromCoin"?(C.value=!0,r.value=g.value>0?l.value.symbol=="SUI"?new y(Number(g.value)).sub(new y(.05)).lt(new y(0))?"0":new y(Number(g.value)).sub(new y(.05)).toString():String(g.value):""):(C.value=!1,c.value=A.value>0?n.value.symbol=="SUI"?new y(Number(A.value)).sub(new y(.05)).lt(new y(0))?"0":new y(Number(A.value)).sub(new y(.05)).toString():String(A.value):"")},q=v=>{v==="fromCoin"?(C.value=!0,r.value=g.value>0?co(new y(Number(g.value)).div(2).toString(),l.value.decimals).toString():""):(C.value=!1,c.value=A.value>0?co(new y(Number(A.value)).div(2).toString(),n.value.decimals).toString():"")},S=d(()=>N.value?Qo(N.value):{}),E=d(()=>P.value.slippage),L=M("--"),O=M("--"),G=v=>{const k=new y(s.value.autoPoolPositionInfo.liquidity),R=new y(v.toString());if(k.toNumber()>0&&R.toNumber()>0){const X=R.add(k);console.log("totalLiquidity:",k.toString(),"liqididty:",R.toString(),R.div(k).mul(100).toString());const U=To(ve(R.div(X).mul(100).toNumber(),2),2);console.log(s.value.decimals,"##positionInfo.value.decimal");const j=1/Math.pow(10,s.value.decimals);console.log(U,j,"###288"),Number(U)<j?L.value=`<${j}`:L.value=U}else R.toNumber()>0&&k.toNumber()<=0?L.value="100":L.value="--"},J=v=>{const k=new y(v.toString());console.log(v.toString(),"##liquidityAmount.toString()");const R=k.mul(new y(E.value).div(100)),X=new y(Math.pow(10,s.value.lpInfo.decimals));O.value=co(k.minus(R).div(X).toString(),s.value.decimals)},w=()=>{if(console.log(s.value,"238##"),!s.value||!r.value&&!c.value)return;const v=s.value.autoPoolPositionInfo.tick_lower_index,k=s.value.autoPoolPositionInfo.tick_upper_index;let R;if(r.value||c.value){if(C.value){const ao=new y(r.value).mul(Math.pow(10,l.value.decimals)).toString();R=new so(ao)}else{const ao=new y(c.value).mul(Math.pow(10,n.value.decimals)).toString();R=new so(ao)}const{liquidityAmount:X,tokenMaxA:U,tokenMaxB:j,tokenMaxAOrigin:_o,tokenMaxBOrigin:to}=S.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:l.value,tokenB:n.value,lowerTick:v,upperTick:k,coinAmount:R,iscoinA:C.value,roundUp:!0,slippage:Number(E.value)/100,curSqrtPrice:new so(s.value.current_sqrt_price)});console.log(s.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(j.toString(),U.toString(),s.value,"###323"),C.value?c.value=Number(j)>0?j:"":r.value=Number(U)>0?U:"",G(X),J(X)}},D=d(()=>p.value.RATES),V=d(()=>{var v,k,R,X,U,j,_o,to,ao,$o;if((k=D.value[(v=l.value)==null?void 0:v.address])!=null&&k.price&&((X=D.value[(R=n.value)==null?void 0:R.address])!=null&&X.price)){console.log((j=D.value[(U=l.value)==null?void 0:U.address])==null?void 0:j.price,"RATES.value[fromCoin.value?.address]?.price");const uo=new y(r.value||0).mul(new y((to=D.value[(_o=l.value)==null?void 0:_o.address])==null?void 0:to.price)),oo=new y(c.value||0).mul(new y(($o=D.value[(ao=n.value)==null?void 0:ao.address])==null?void 0:$o.price));return co(uo.add(oo).toString(),2)}else return"--"});no(r,(v,k)=>{v&&w(),v==""&&(L.value="--",c.value="",O.value="--")}),no(c,(v,k)=>{v&&w(),v==""&&(r.value="",L.value="--",O.value="--")});const{t:K,locale:eo}=jo(),Z=d(()=>{const v=Number(r.value)>Number(g.value),k=Number(c.value)>Number(A.value);return!r.value&&!c.value?K("button.enterAmount"):v?K("button.insufficientBalance",{name:l.value.symbol}):k?K("button.insufficientBalance",{name:n.value.symbol}):"Add Liquidity"}),lo=d(()=>{const v=Number(r.value)>Number(g.value),k=Number(c.value)>Number(A.value);return!!(!r.value&&!c.value||v||k)}),x=M(!0),{setIsShowSuccess:vo,setIsShowRejected:yo,setIsShowWaiting:po,setTransactionDesc:h,setTransactionTxid:z,setPositiomNum:ro}=T,fo=Vo("Sui");return{wallet:I,positionInfo:s,isShowAddModal:t,needReverse:a,fromCoin:l,toCoin:n,fromCoinAmount:r,toCoinAmount:c,fromCoinBlance:g,toCoinBlance:A,fixedFromCoin:C,maxBtnSelect:Y,halfBtnSelect:q,totalAmountUSD:V,addCommom:$,shareOfPool:L,minimumReceivedLP:O,addLiquidityBtnText:Z,addLiquidityBtnDisabled:lo,toAdd:async()=>{var to,ao,$o,uo;t.value=!1,x.value=!0,z("");const v=`${$(r.value)} ${(to=l.value)==null?void 0:to.symbol}`,k=`${$(c.value)} ${(ao=n.value)==null?void 0:ao.symbol}`;h(`Deposit ${v} and ${k}`),po(!0);const R=C.value,X=s.value.autoPoolPositionInfo.tick_lower_index,U=s.value.autoPoolPositionInfo.tick_upper_index;let j;if(C.value){const oo=new y(r.value).mul(Math.pow(10,l.value.decimals)).toString();j=new so(oo)}else{const oo=new y(c.value).mul(Math.pow(10,n.value.decimals)).toString();j=new so(oo)}const _o=s.value.rewarderInfo.map(oo=>oo.coinAddress);try{const oo={lowerTick:X,upperTick:U,coinAmount:j,fix_amount_a:R,slippage:Number(E.value)/100,curSqrtPrice:new so(s.value.current_sqrt_price),id:s.value.id,clmm_pool:s.value.autoPoolPositionInfo.pool,lp_token_type:s.value.lp_token_type,coinTypeA:s.value.autoPoolPositionInfo.coin_type_a,coinTypeB:s.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:_o},Xo=await fo.deposit(oo);console.log(Xo,"===>payloadAdd11111");const de=await I.value.currentWallet.signAndExecuteTransactionBlock(Xo);let Ro=S.value.handleTx(de);if(console.log("toAdd###tx###",Ro),Ro&&Ro.hash){z(Ro.hash),po(!1),vo(!0),console.log(s,"===>positionInfo");const zo={title:"Supplied",desc:`Deposit ${v} and ${k}`,hash:Ro.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deopsit ${r.value} ${($o=l.value)==null?void 0:$o.symbol} and ${c.value} ${(uo=n.value)==null?void 0:uo.symbol}`};N.value!=="Aptos"&&(zo.res=Ro.res),S.value.showTransitionPending(zo),await S.value.watchTransaction(zo)&&setTimeout(()=>{f.updatePositionItem(s.value.id),S.value.getAccount(I.value.address)},1e3),ro()}else po(!1),yo(!0);r.value="",c.value="",x.value=!1}catch(oo){r.value="",c.value="",console.log("addError###",oo),x.value=!1,po(!1),yo(!0)}}}}});const Fo=o=>(Co("data-v-2e198474"),o=o(),So(),o),ut={class:"auto-pool-add"},dt={class:"auto-pool-add-content"},rt={class:"liquidity-action-tab"},ct=Fo(()=>e("div",{class:"increase tab-active"},"Add",-1)),mt={class:"card-item"},vt={class:"card-item"},pt={class:"add-info"},ft={class:"total-amount"},_t=Fo(()=>e("span",null,"Total Amount",-1)),bt={class:"total-amount"},ht=Fo(()=>e("span",null,"Share of Pool",-1)),gt={class:"total-amount"},yt=Fo(()=>e("span",null,"Minimum Received LP",-1)),$t=Fo(()=>e("span",null,"Pool Closed",-1));function It(o,t,T,P,N,I){var p,s,i,a,l;const f=ke,m=Wo,b=ie;return _(),B("div",ut,[e("div",dt,[e("div",rt,[ct,e("div",{class:"remove",onClick:t[0]||(t[0]=oe(n=>o.$emit("changeCurrentTab"),["stop"]))},"Remove")]),e("div",{class:Ho(o.needReverse?"card-container reverse":"card-container")},[e("div",mt,[W(f,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":t[1]||(t[1]=n=>o.fromCoinAmount=n),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[2]||(t[2]=n=>o.maxBtnSelect("fromCoin")),onOnHalf:t[3]||(t[3]=n=>o.halfBtnSelect("fromCoin")),onOnInput:t[4]||(t[4]=n=>{o.fromCoinAmount=n}),onOnFocus:t[5]||(t[5]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),e("div",vt,[W(f,{modelValue:o.toCoinAmount,"onUpdate:modelValue":t[6]||(t[6]=n=>o.toCoinAmount=n),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[7]||(t[7]=n=>o.maxBtnSelect("toCoin")),onOnHalf:t[8]||(t[8]=n=>o.halfBtnSelect("toCoin")),onOnInput:t[9]||(t[9]=n=>{o.toCoinAmount=n}),onOnFocus:t[10]||(t[10]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])])],2),e("div",pt,[e("div",ft,[_t,e("span",null,"$"+u(("addCommom"in o?o.addCommom:F($))(o.totalAmountUSD)),1)]),e("div",bt,[ht,e("span",null,u(o.shareOfPool)+"%",1)]),e("div",gt,[yt,e("span",null,u(("addCommom"in o?o.addCommom:F($))(o.minimumReceivedLP))+" "+u(o.needReverse?(p=o.toCoin)==null?void 0:p.symbol:(s=o.fromCoin)==null?void 0:s.symbol)+"-"+u(o.needReverse?(i=o.fromCoin)==null?void 0:i.symbol:(a=o.toCoin)==null?void 0:a.symbol),1)])])]),(l=o.positionInfo)!=null&&l.is_pause?(_(),Q(m,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:io(()=>[$t]),_:1})):o.wallet.connected?(_(),Q(m,{key:1,class:"big-btn liquidity-btn",disabled:o.addLiquidityBtnDisabled,onClick:t[11]||(t[11]=n=>o.isShowAddModal=!0)},{default:io(()=>[e("span",null,u(o.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(_(),Q(m,{key:2,class:"big-btn",onClick:t[12]||(t[12]=n=>o.wallet.setIsShowWalletModal(!0))},{default:io(()=>[e("span",null,u(o.$t("button.connectWallet")),1)]),_:1})),o.isShowAddModal?(_(),Q(b,{key:3,"pool-info":o.positionInfo,"from-coin":o.needReverse?o.positionInfo.token_b:o.positionInfo.token_a,"to-coin":o.needReverse?o.positionInfo.token_a:o.positionInfo.token_b,"from-coin-amount":o.needReverse?o.toCoinAmount:o.fromCoinAmount,"to-coin-amount":o.needReverse?o.fromCoinAmount:o.toCoinAmount,"total-amount":o.totalAmountUSD,"share-of-pool":o.shareOfPool,"minimum-received-l-p":o.minimumReceivedLP,onOnClose:t[13]||(t[13]=n=>o.isShowAddModal=!1),onToAdd:o.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","onToAdd"])):Go("",!0)])}const le=go(at,[["render",It],["__scopeId","data-v-2e198474"]]),kt=bo({props:{inputValue:{type:String,default:""},balance:{type:String,default:""},lpDecimals:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},inputDisabled:{type:Boolean,default:!1},positionInfo:{default:()=>({})}},setup(o,t){const{t:T,locale:P}=jo(),N=ko(),I=d(()=>N),f=d(()=>new y(Number(o.balance)).div(2)),m=fe(_e,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function b(){this.$emit("onSelect")}const p=g=>{const A=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${o.lpDecimals&&o.lpDecimals}})?).*$`);g.target.value=g.target.value.replace(A,"$1")},s=Oo(),i=d(()=>s),a=No(),l=d(()=>a),n=d(()=>l.value.tokensWarningObj);no(()=>l.value.RATES,g=>{g&&console.log(g,"price====>")},{immediate:!0});const r=d(()=>l.value.tokensObj),c=d(()=>I.value.theme);return{route:ho(),theme:c,tokensObj:r,pool:l,halfBalance:f,t:T,addCommom:$,store:I,wallet:i,indicator:m,inputChange:p,importIcon:Io,selectCoin:b,formatNumber:pe,tokensWarningObj:n,checkNullObj:Mo}}});const Ct=o=>(Co("data-v-e3f5f448"),o=o(),So(),o),St={class:"card"},At={class:"top"},wt={key:1,class:"input-div"},Pt={key:0},Rt={class:"left"},qt={class:"loading-token"},Tt={class:"lp-bg"},Nt={alt:""},Lt={class:"bottom"},Bt=Ct(()=>e("div",null,null,-1)),Mt={class:"top"},Ot={class:"right"},Dt={class:"balance"};function jt(o,t,T,P,N,I){var p,s;const f=be,m=ee,b=Lo("image");return _(),B("div",St,[e("div",At,[o.inputDisabled?(_(),B("div",wt,[o.inputValue?(_(),B("span",Pt,u(o.inputValue),1)):(_(),Q(m,{key:1,indicator:o.indicator},null,8,["indicator"]))])):(_(),Q(f,{key:0,value:o.inputValue=="InsufficientLiquidity"?"":o.inputValue,placeholder:"0.0",disabled:o.inputDisabled,onChange:o.inputChange,onInput:t[0]||(t[0]=i=>o.$emit("onInput",i.target.value)),onFocus:t[1]||(t[1]=i=>o.$emit("onFocus"))},null,8,["value","disabled","onChange"])),e("div",Rt,[e("div",qt,[e("div",Tt,[H(e("img",Nt,null,512),[[b,(s=(p=o.positionInfo)==null?void 0:p.lpInfo)==null?void 0:s.logo_url]])]),e("p",null,u(o.fromCoin.symbol)+" - "+u(o.toCoin.symbol),1)])])]),e("div",Lt,[Bt,e("div",Mt,[e("div",Ot,[mo(u(o.$t("common.balance"))+" ",1),e("span",Dt,u(o.wallet.connected?("addCommom"in o?o.addCommom:F($))(o.balance,o.lpDecimals):"0"),1)])])])])}const Ut=go(kt,[["render",jt],["__scopeId","data-v-e3f5f448"]]),Ft=bo({components:{Modal:Zo},props:{title:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"11111111111"},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},isIncrease:{type:Boolean,default:!1},fixedFromCoin:{type:Boolean,default:!0},currentPriceTab:{type:String,default:""},currentPrice:{type:String,default:""},currentPriceReverse:{type:String,default:""},showFromCoinLock:{type:Boolean,default:!1},showToCoinLock:{type:Boolean,default:!1},currentDirect:{type:Boolean,default:!0},positionTotalAmount:{type:Number,default:0},tickLower:{type:Number,default:0},tickUpper:{type:Number,default:0},isCreate:{type:Boolean,default:!1}},setup(o,t){const{t:T}=jo(),P=d(()=>{var a,l,n;return((a=o==null?void 0:o.poolInfo)==null?void 0:a.needReverse)||((n=(l=o==null?void 0:o.poolInfo)==null?void 0:l.poolInfo)==null?void 0:n.needReverse)}),N=No(),I=d(()=>N),f=ko(),m=d(()=>f),b=a=>{var l;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((l=I.value.tokensObj[a==null?void 0:a.address])==null?void 0:l.logo_url)||(m.value.theme==="default"?Io("/image/coins/unknown.png"):Io("/image/coins/sui-unknown.png"))},p=ho(),s=M(!1),i=()=>{t.emit("toAdd")};return console.log(o,"props451"),{needReverse:P,getCoinIcon:b,addCommom:$,t:T,route:p,checked:s,decimalUi:To,clickSubmit:i}}});const wo=o=>(Co("data-v-6d964534"),o=o(),So(),o),Wt=wo(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Et={class:"modal-content"},Xt={class:"pool-info"},zt={class:"left"},Ht={alt:""},Yt={alt:""},Gt={class:"pool-name"},Jt={class:"right"},Kt={class:"lp-info"},Qt=wo(()=>e("div",{class:"lp-num"},[e("p",null,"1,126,122.123456"),e("span",null,"USDT-USDC LP")],-1)),Vt={class:"lp-bg"},Zt={alt:""},xt={alt:""},os={class:"est-receive"},es=wo(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),ns={class:"token-a"},ts=wo(()=>e("div",null,"0.941824",-1)),ss={alt:""},is=wo(()=>e("span",null,"USDT",-1)),ls={class:"token-a"},as=wo(()=>e("div",null,"0.941824",-1)),us={alt:""},ds=wo(()=>e("span",null,"USDC",-1));function rs(o,t,T,P,N,I){const f=Yo,m=Wo,b=xo("Modal"),p=Lo("image");return _(),Q(b,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:t[0]||(t[0]=s=>o.$emit("onClose"))},{closeIcon:io(()=>[Wt]),default:io(()=>{var s,i,a,l,n,r,c,C,g,A,Y,q,S,E,L,O,G,J,w,D,V,K,eo,Z;return[e("div",Et,[e("div",Xt,[e("div",zt,[e("div",null,[H(e("img",Ht,null,512),[[p,o.needReverse?(l=(a=o.poolInfo)==null?void 0:a.token_b)==null?void 0:l.logo_url:(i=(s=o.poolInfo)==null?void 0:s.token_a)==null?void 0:i.logo_url]]),W(f,{address:o.needReverse?(C=(c=o.poolInfo)==null?void 0:c.token_b)==null?void 0:C.address:(r=(n=o.poolInfo)==null?void 0:n.token_a)==null?void 0:r.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[H(e("img",Yt,null,512),[[p,o.needReverse?(q=(Y=o.poolInfo)==null?void 0:Y.token_a)==null?void 0:q.logo_url:(A=(g=o.poolInfo)==null?void 0:g.token_b)==null?void 0:A.logo_url]]),W(f,{address:o.needReverse?(O=(L=o.poolInfo)==null?void 0:L.token_a)==null?void 0:O.address:(E=(S=o.poolInfo)==null?void 0:S.token_b)==null?void 0:E.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",Gt,[e("span",null,u(o.needReverse?(D=(w=o.poolInfo)==null?void 0:w.token_b)==null?void 0:D.symbol:(J=(G=o.poolInfo)==null?void 0:G.token_a)==null?void 0:J.symbol),1),mo(" - "),e("span",null,u(o.needReverse?(Z=(eo=o.poolInfo)==null?void 0:eo.token_a)==null?void 0:Z.symbol:(K=(V=o.poolInfo)==null?void 0:V.token_b)==null?void 0:K.symbol),1)])]),e("div",Jt,[mo(" Fee tier "),e("span",null,u(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),e("div",Kt,[Qt,e("div",Vt,[H(e("img",Zt,null,512),[[p,o.needReverse?o.poolInfo.token_b.logo_url:o.poolInfo.token_a.logo_url]]),H(e("img",xt,null,512),[[p,o.needReverse?o.poolInfo.token_a.logo_url:o.poolInfo.token_b.logo_url]])])]),e("div",os,[es,e("div",ns,[ts,e("div",null,[H(e("img",ss,null,512),[[p,"1"]]),is])]),e("div",ls,[as,e("div",null,[H(e("img",us,null,512),[[p,"1"]]),ds])])])]),W(m,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:io(()=>[mo(u(o.isIncrease?"Increase Liquidity":o.title==o.$t("button.addLiquidity")?"Add Liquidity":"Create and Add Liquidity"),1)]),_:1},8,["onClick"])]}),_:1})}const ae=go(Ft,[["render",rs],["__scopeId","data-v-6d964534"]]),cs=bo({components:{AutoPoolRemoveModal:ae},setup(){const o=Oo(),t=d(()=>o),T=ko(),P=d(()=>T),N=d(()=>P.value.slippage),I=d(()=>P.value.chainName),f=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],m=M(25),b=ho(),p=Do(),s=d(()=>p),i=d(()=>(console.log(s.value.positionInfoObj[b.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),s.value.positionInfoObj[b.params.id])),a=d(()=>{var h;return(h=i.value)==null?void 0:h.needReverse}),l=M(),n=M(),r=M(!1),c=M(),C=d(()=>{var h;return(h=i.value)==null?void 0:h.myLiquidity}),g=M(!0),A=d(()=>I.value?Qo(I.value):{}),Y=Vo("Sui"),q=M("--"),S=M("--"),E=()=>{if(g.value||!i.value)return;if(!c.value){q.value="--",S.value="--",m.value=0;return}if(Number(c.value)>Number(C.value))return;if(Number(c.value)*Math.pow(10,i.value.decimals)==Number(C.value)){m.value=100,O({value:1}),g.value=!0;return}console.log(i.value,"##lpBalance.value");const h=new y(c.value).mul(Math.pow(10,i.value.lpInfo.decimals)).toString(),z=new y(c.value).div(new y(C.value)).mul(100),ro=i.value.tick_lower_index,fo=i.value.tick_upper_index,Po=i.value.token_a.decimals,v=i.value.token_b.decimals,k=qo.tickIndexToSqrtPriceX64(ro),R=qo.tickIndexToSqrtPriceX64(fo);console.log(i.value.object.current_sqrt_price,"##positionInfo.value.object.current_sqrt_price"),console.log(h.toString(),"amount.toString");const X=Ko.getCoinAmountFromLiquidity(new so(h),new so(i.value.object.current_sqrt_price),k,R,!1),U=new y(X.coinA.toString()).div(Math.pow(10,Po)).toString(),j=new y(X.coinB.toString()).div(Math.pow(10,v)).toString();q.value=Number(U)>0?U:"--",S.value=Number(j)>0?j:"--",console.log(z.toString(),"##ratio"),m.value=z.toNumber(),L.value=co(h,0)},L=M(),O=h=>{if(!g.value)return;g.value=!0;const z=i.value.token_a.decimals,ro=i.value.token_b.decimals,fo=i.value.tick_lower_index,Po=i.value.tick_upper_index,v=qo.tickIndexToSqrtPriceX64(fo),k=qo.tickIndexToSqrtPriceX64(Po);let R="";console.log(i.value,"positionInfo.value.myLiquidity###"),h.value!==1?R=new y(i.value.myLiquidity).mul(Math.pow(10,i.value.lpInfo.decimals)).mul(h.value).toString():R=new y(i.value.myLiquidity).mul(Math.pow(10,i.value.lpInfo.decimals)).toString(),R=co(R,0)||"0",L.value=co(R,0),console.log(i.value.myLiquidity,"##positionInfo.value.myLiquidity"),c.value=new y(R).div(Math.pow(10,i.value.lpInfo.decimals));const X=Ko.getCoinAmountFromLiquidity(new so(R),new so(i.value.object.current_sqrt_price),v,k,!1),U=new y(X.coinA.toString()).div(Math.pow(10,z)).toString(),j=new y(X.coinB.toString()).div(Math.pow(10,ro)).toString();console.log(U,j,"amountA121212"),q.value=Number(U)>0?U:"--",S.value=Number(j)>0?j:"--"};no(m,he((h,z)=>{h!==z&&(Number(h)>100?m.value=100:h&&i.value?(console.log("687===>"),m.value=h,O({value:m.value/100})):(q.value="--",S.value="--"))},300)),no(()=>c.value,h=>{E()},{immediate:!0});const G=ne(),{setIsShowSuccess:J,setIsShowRejected:w,setIsShowWaiting:D,setTransactionDesc:V,setTransactionTxid:K,setPositiomNum:eo,setTransactionDescText:Z}=T,lo=M(!1),{t:x}=jo(),vo=async()=>{var X,U,j,_o;lo.value=!0,K("");const h=$(q.value,l.value.decimals)==0?"":`${$(q.value,l.value.decimals)} ${l.value.symbol}`,z=$(S.value,n.value.decimals)==0?"":`${$(S.value,n.value.decimals)} ${n.value.symbol}`;V(x("tips.removeLiquidiyText",{from:a.value?z:h,and:$(q.value,l.value.decimals)==0||$(S.value,n.value.decimals)==0?"":"and",to:a.value?h:z})),D(!0);const ro=x("modal.removeLiquidityText2");Z(ro);const fo=i.value.autoPoolPositionInfo.tick_lower_index,Po=i.value.autoPoolPositionInfo.tick_upper_index,v=qo.tickIndexToSqrtPriceX64(fo),k=qo.tickIndexToSqrtPriceX64(Po),R=i.value.rewarderInfo.map(to=>to.coinAddress);console.log(L.value,"##liquidityVal.value");try{const to={lowerSqrtPrice:v,upperSqrtPrice:k,lpTokenAmount:new so(L.value),curSqrtPrice:new so(i.value.object.current_sqrt_price),slippage:Number(N.value)/100,id:i.value.id,clmm_pool:i.value.autoPoolPositionInfo.pool,lp_token_type:i.value.lp_token_type,coinTypeA:i.value.autoPoolPositionInfo.coin_type_a,coinTypeB:i.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:R},ao=await Y.remove(to),$o=await t.value.currentWallet.signAndExecuteTransactionBlock(ao);let uo=A.value.handleTx($o);if(console.log("0331###remove###tx####",uo),uo&&uo.hash){K(uo.hash),D(!1),J(!0);const oo={title:x("common.removeLiquidity"),desc:"",hash:uo.hash,descTransactions:`Remove ${$(q.value)} ${(X=l.value)==null?void 0:X.symbol} and ${$(S.value)} ${(U=n.value)==null?void 0:U.symbol} 
             from the pool`,sender:t.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${q.value} ${(j=l.value)==null?void 0:j.symbol} and ${S.value} ${(_o=n.value)==null?void 0:_o.symbol}`};oo.res=uo.res,A.value.showTransitionPending(oo),await A.value.watchTransaction(oo)&&(q.value="",S.value="",c.value="",m.value=0,setTimeout(()=>{p.updatePositionItem(i.value.id),A.value.getAccount(t.value.address)},1e3),Number(m.value)==100&&b.name=="auto-pool-detail"&&G.push("/pool/auto"))}else D(!1),w(!0);lo.value=!1}catch(to){console.log("Remove error",to),lo.value=!1,D(!1),w(!0)}};no(()=>i.value,(h,z)=>{h&&!Mo(h)&&(l.value=h==null?void 0:h.token_a,n.value=h==null?void 0:h.token_b,console.log("触发###"),(!z||z&&z.address!==h.address)&&O({value:m.value/100}))},{immediate:!0});const yo=d(()=>{const h=Number(c.value)>Number(C.value);return!c.value||c.value<=0?x("button.enterAmount"):h?"Invalid Amount":x("button.remove")}),po=d(()=>{const h=Number(c.value)>Number(C.value);return!!(!c.value||c.value<=0||h)});return{removeLiquidityBtnText:yo,removeLiquidityBtnDisabled:po,wallet:t,ratioArr:f,positionInfo:i,isShowRemoveModal:r,needReverse:a,fromCoin:l,toCoin:n,lpAmount:c,lpBalance:C,sliderVal:m,sFixD:co,isSlider:g,fromCoinAmount:q,toCoinAmount:S,setPercent:O,toRemove:vo,addCommom:$}}});const Eo=o=>(Co("data-v-f04b264b"),o=o(),So(),o),ms={class:"auto-pool-add"},vs={class:"auto-pool-add-content"},ps={class:"liquidity-action-tab"},fs=Eo(()=>e("div",{class:"remove tab-active"},"Remove",-1)),_s={class:"card-item"},bs={class:"remove-ratio"},hs=Eo(()=>e("div",{class:"remove-ratio-title"},"Amount",-1)),gs={class:"remove-ratio-select"},ys={key:0,class:"ratio"},$s={key:1,class:"ratio"},Is={class:"ratio-list"},ks=["onClick"],Cs={class:"est-receive"},Ss=Eo(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),As={class:"token-a"},ws={alt:""},Ps={class:"token-a"},Rs={alt:""},qs=Eo(()=>e("span",null,"Pool Closed",-1));function Ts(o,t,T,P,N,I){var i,a,l,n,r,c,C,g,A,Y,q,S,E,L,O,G,J;const f=Ut,m=$e,b=Wo,p=ae,s=Lo("image");return _(),B("div",ms,[e("div",vs,[e("div",ps,[e("div",{class:"increase",onClick:t[0]||(t[0]=oe(w=>o.$emit("changeCurrentTab"),["stop"]))},"Add"),fs]),e("div",{class:Ho(o.needReverse?"card-container reverse":"card-container")},[e("div",_s,[W(f,{modelValue:o.lpAmount,"onUpdate:modelValue":t[1]||(t[1]=w=>o.lpAmount=w),"input-value":o.lpAmount,balance:o.lpBalance,"from-coin":o.needReverse?o.toCoin:o.fromCoin,"to-coin":o.needReverse?o.fromCoin:o.toCoin,"position-info":o.positionInfo,onOnInput:t[2]||(t[2]=w=>{o.isSlider=!1,o.lpAmount=w})},null,8,["modelValue","input-value","balance","from-coin","to-coin","position-info"])])],2),e("div",bs,[hs,e("div",gs,[Number(o.lpBalance)>=Number(o.lpAmount)?(_(),B("div",ys,u(o.sliderVal>0&&Number(("sFixD"in o?o.sFixD:F(co))(o.sliderVal,2))<.01?"<0.01":("sFixD"in o?o.sFixD:F(co))(o.sliderVal,2))+"% ",1)):(_(),B("div",$s,"--")),e("div",Is,[(_(!0),B(ge,null,ye(o.ratioArr,(w,D)=>(_(),B("div",{key:D,class:Ho(["ratio-item",o.sliderVal==w.value?"ratio-item-active":""]),onClick:()=>{o.isSlider=!0,o.sliderVal=w.value}},u(w.name),11,ks))),128))])]),W(m,{value:o.sliderVal,"onUpdate:value":t[3]||(t[3]=w=>o.sliderVal=w)},null,8,["value"])]),e("div",Cs,[Ss,e("div",As,[e("div",null,u(("addCommom"in o?o.addCommom:F($))(o.fromCoinAmount)),1),e("div",null,[H(e("img",ws,null,512),[[s,o.needReverse?(a=(i=o.positionInfo)==null?void 0:i.token_b)==null?void 0:a.logo_url:(n=(l=o.positionInfo)==null?void 0:l.token_a)==null?void 0:n.logo_url]]),e("span",null,u(o.needReverse?(c=(r=o.positionInfo)==null?void 0:r.token_b)==null?void 0:c.symbol:(g=(C=o.positionInfo)==null?void 0:C.token_a)==null?void 0:g.symbol),1)])]),e("div",Ps,[e("div",null,u(("addCommom"in o?o.addCommom:F($))(o.toCoinAmount)),1),e("div",null,[H(e("img",Rs,null,512),[[s,o.needReverse?(Y=(A=o.positionInfo)==null?void 0:A.token_a)==null?void 0:Y.logo_url:(S=(q=o.positionInfo)==null?void 0:q.token_b)==null?void 0:S.logo_url]]),e("span",null,u(o.needReverse?(L=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:L.symbol:(G=(O=o.positionInfo)==null?void 0:O.token_b)==null?void 0:G.symbol),1)])])])]),(J=o.positionInfo)!=null&&J.is_pause?(_(),Q(b,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:io(()=>[qs]),_:1})):o.wallet.connected?(_(),Q(b,{key:1,class:"big-btn liquidity-btn",disabled:o.removeLiquidityBtnDisabled,onClick:o.toRemove},{default:io(()=>[e("span",null,u(o.removeLiquidityBtnText),1)]),_:1},8,["disabled","onClick"])):(_(),Q(b,{key:2,class:"big-btn",onClick:t[4]||(t[4]=w=>o.wallet.setIsShowWalletModal(!0))},{default:io(()=>[e("span",null,u(o.$t("button.connectWallet")),1)]),_:1})),o.isShowRemoveModal?(_(),Q(p,{key:3,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,onOnClose:t[5]||(t[5]=w=>o.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):Go("",!0)])}const ue=go(cs,[["render",Ts],["__scopeId","data-v-f04b264b"]]),Ns=bo({components:{AutoPoolAdd:le,AutoPositionInfo:te,AutoPositionLiquidity:se,AutoPoolRemove:ue},setup(){const o=M("add"),t=Oo(),T=d(()=>t),P=Do(),N=d(()=>P),I=No(),f=d(()=>I);no(()=>f.value.poolConfigList,l=>{l&&l.length>0&&P.getAutoPoolList()},{immediate:!0}),no(()=>[T.value.address,N.value.autoPoolList,f.value.poolConfigList],([l,n,r])=>{l&&n&&n.length>0&&r&&r.length>0&&P.getMyAutoPoolPosition()},{immediate:!0});const m=ho(),b=d(()=>(console.log(N.value.positionInfoObj[m.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),N.value.positionInfoObj[m.params.id]));no(()=>m.query.action,l=>{l&&(o.value=l)},{immediate:!0});const p=ne();no(()=>T.value.address,l=>{l||p.push("/pool/auto")},{immediate:!0});const s=ko(),i=d(()=>s);return{currentTab:o,positionInfo:b,clickRefresh:()=>{P.getAutoPoolAPY(),P.getAutoPoolList(),I.setPoolConfigList(i.value.chainName,i.value.filterCoinsObj)}}}});const Ls={class:"auto-increase-liquidity"},Bs={class:"auto-increase-liquidity-content pc-content"},Ms={class:"left"},Os={class:"right"},Ds={class:"auto-increase-liquidity-content h5-content"},js={class:"left"},Us={class:"right"},Fs={class:"loading-global"};function Ws(o,t,T,P,N,I){const f=re,m=te,b=se,p=le,s=ue,i=ee;return _(),B("div",Ls,[W(f,{onClickRefresh:o.clickRefresh},null,8,["onClickRefresh"]),e("div",Bs,[e("div",Ms,[W(m),W(b)]),e("div",Os,[o.currentTab=="add"?(_(),Q(p,{key:0,onChangeCurrentTab:t[0]||(t[0]=a=>o.currentTab="remove")})):(_(),Q(s,{key:1,onChangeCurrentTab:t[1]||(t[1]=a=>o.currentTab="add")}))])]),e("div",Ds,[e("div",js,[W(m),o.currentTab=="add"?(_(),Q(p,{key:0,onChangeCurrentTab:t[2]||(t[2]=a=>o.currentTab="remove")})):(_(),Q(s,{key:1,onChangeCurrentTab:t[3]||(t[3]=a=>o.currentTab="add")}))]),e("div",Us,[W(b)])]),H(e("div",Fs,[W(i)],512),[[Ie,!o.positionInfo]])])}const di=go(Ns,[["render",Ws],["__scopeId","data-v-26327692"]]);export{di as default};
