import{_ as de}from"./new-position-title.094c0462.js";import{_ as zo}from"./token-warning.7e6bb924.js";import{_ as re}from"./status-block.c7d9262d.js";import{u as To,g as ce,a as y,d as Mo,c as Ro,p as Jo,b as Ko,s as co,e as lo,f as me,T as Po,C as Yo}from"./pool.6fe43a35.js";import{u as qo,a as Oo}from"./sha256.649e1f93.js";import{i as yo}from"./import-icon.de3e6c66.js";import{u as Do,a as Qo}from"./autoPool.92c01af8.js";import{a as bo,l as r,r as N,m as go,q as to,e as $o,s as Lo,o as h,f as B,h as e,t as j,i as F,v as d,j as po,x as Ho,u as U,p as Io,k as ko,M as Vo,y as Uo,z as Zo,c as x,w as fo,B as Fo,A as xo,C as Xo,D as ve,L as pe,I as fe,S as oe,E as _e,b as he,F as be,G as ge,H as $e,J as ye}from"./entry.7f7bb3c7.js";import{_ as Ie}from"./assets-card.e12b3188.js";import{D as $}from"./decimal.0e8aa3f1.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./decimal.633e31ee.js";import"./back.e42cacf0.js";import"./swap-setting.e7552246.js";/* empty css              */import"./index.d55d32c4.js";/* empty css              */const ke=bo({setup(){const o=qo(),n=r(()=>o),q=To(),A=r(()=>q),w=r(()=>n.value.theme),I=s=>{var p;return(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||((p=A.value.tokensObj[s==null?void 0:s.address])==null?void 0:p.logo_url)||(w.value==="default"?yo("/image/coins/unknown.png"):yo("/image/coins/sui-unknown.png"))},f=N(!0),v=Do(),b=r(()=>v),a=go(),i=N();to(()=>[b.value.positionInfoObj,a.params.id],([s,p])=>{s&&!Ro(s)&&p&&(i.value=s[p],console.log(i.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const t=r(()=>{var s;return(s=i.value)==null?void 0:s.needReverse}),u=r(()=>{var s;return(s=b.value.apyObj[a.params.id])==null?void 0:s.tvl}),l=r(()=>{var s;return(s=b.value.apyObj[a.params.id])==null?void 0:s.apr});return{positionInfo:i,tvl:u,store:n,indexStore:o,needReverse:t,getCoinIcon:I,getExplorerUrl:ce,addCommom:y,decimalUi:Mo,direct:f,apy:l}}});const Bo=o=>(Io("data-v-ff2f9366"),o=o(),ko(),o),Ce={class:"auto-position-info"},Se={class:"pool-info"},Ae={class:"left"},we={class:"coin-a"},Pe={alt:""},Re={class:"coin-b"},Te={alt:""},qe={class:"position-name"},Le={key:0,class:"pool-fee"},Be=Bo(()=>e("span",null,"Fee tier",-1)),Ne={class:"right"},Me={class:"price-info"},Oe={class:"current-price"},De=Bo(()=>e("span",null,"Current Price",-1)),Ue={class:"coin-rate"},je=Bo(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Fe=Bo(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Ee=[je,Fe],We={key:0},Xe={key:1},ze={class:"apy-and-tvl"},He={class:"apy"},Ge=Bo(()=>e("div",{class:"apy-title"},"APY",-1)),Je={class:"apy-text"},Ye={class:"tvl"},Ke=Bo(()=>e("div",{class:"tvl-title"},"TVL",-1)),Qe={class:"tvl-text"};function Ve(o,n,q,A,w,I){var a,i,t,u,l,s,p,c,k,g,S,z,P,C,E,O,M,H,R,X,D,Q,G,oo,V,ao,Z,_o,mo,so,_,J,eo;const f=zo,v=re,b=Lo("image");return h(),B("div",Ce,[e("div",Se,[e("div",Ae,[e("div",we,[j(e("img",Pe,null,512),[[b,o.needReverse?o.getCoinIcon((i=o.positionInfo)==null?void 0:i.token_b):o.getCoinIcon((a=o.positionInfo)==null?void 0:a.token_a)]]),F(f,{address:o.needReverse?(s=(l=o.positionInfo)==null?void 0:l.token_b)==null?void 0:s.address:(u=(t=o.positionInfo)==null?void 0:t.token_a)==null?void 0:u.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Re,[j(e("img",Te,null,512),[[b,o.needReverse?o.getCoinIcon((c=o.positionInfo)==null?void 0:c.token_a):o.getCoinIcon((p=o.positionInfo)==null?void 0:p.token_b)]]),F(f,{address:o.needReverse?(z=(S=o.positionInfo)==null?void 0:S.token_a)==null?void 0:z.address:(g=(k=o.positionInfo)==null?void 0:k.token_b)==null?void 0:g.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",qe,d(o.needReverse?(C=(P=o.positionInfo)==null?void 0:P.token_b)==null?void 0:C.symbol:(O=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:O.symbol)+" - "+d(o.needReverse?(H=(M=o.positionInfo)==null?void 0:M.token_a)==null?void 0:H.symbol:(X=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:X.symbol),1),(D=o.positionInfo)!=null&&D.fee?(h(),B("div",Le,[Be,po(" "+d(((Q=o.positionInfo)==null?void 0:Q.fee)*100)+"% ",1)])):Ho("",!0)]),e("div",Ne,[F(v,{"current-status":(G=o.positionInfo)==null?void 0:G.currentStatus},null,8,["current-status"])])]),e("div",Me,[e("div",Oe,[e("div",null,[De,e("div",Ue,[e("div",{onClick:n[0]||(n[0]=uo=>o.direct=!o.direct)},Ee)])]),(o.needReverse?!o.direct:o.direct)?(h(),B("div",We,[po(d(("addCommom"in o?o.addCommom:U(y))(("decimalUi"in o?o.decimalUi:U(Mo))((oo=o.positionInfo)==null?void 0:oo.price,6)))+"   ",1),e("span",null,d((ao=(V=o.positionInfo)==null?void 0:V.token_b)==null?void 0:ao.symbol)+" per "+d((_o=(Z=o.positionInfo)==null?void 0:Z.token_a)==null?void 0:_o.symbol),1)])):(h(),B("div",Xe,[po(d(("addCommom"in o?o.addCommom:U(y))(("decimalUi"in o?o.decimalUi:U(Mo))(1/((mo=o.positionInfo)==null?void 0:mo.price),6)))+"   ",1),e("span",null,d((_=(so=o.positionInfo)==null?void 0:so.token_a)==null?void 0:_.symbol)+" per "+d((eo=(J=o.positionInfo)==null?void 0:J.token_b)==null?void 0:eo.symbol),1)]))]),e("div",ze,[e("div",He,[Ge,e("div",Je,d(o.apy),1)]),e("div",Ye,[Ke,e("div",Qe,"$"+d(("addCommom"in o?o.addCommom:U(y))(o.tvl,2)),1)])])])])}const ee=$o(ke,[["render",Ve],["__scopeId","data-v-ff2f9366"]]),Ze=bo({setup(){const o=Do(),n=r(()=>o),q=go(),A=r(()=>(console.log(n.value.positionInfoObj[q.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),n.value.positionInfoObj[q.params.id])),w=r(()=>{var v;return(v=A.value)==null?void 0:v.needReverse}),I=Oo(),f=r(()=>I);return{positionInfo:A,needReverse:w,addCommom:y,wallet:f}}});const Co=o=>(Io("data-v-b1d5e482"),o=o(),ko(),o),xe={class:"auto-position-liquidity"},on={class:"my-liquidity"},en={class:"left"},nn=Co(()=>e("div",null,"My Liquidity",-1)),tn={key:0},sn={key:1},ln={class:"right"},an=Co(()=>e("div",null,"My share",-1)),un={key:0},dn={key:1},rn={class:"my-liquidity-info"},cn={class:"lp-info"},mn={class:"lp-bg"},vn={alt:""},pn={alt:""},fn={key:0,class:"lp-num"},_n={key:1,class:"lp-num"},hn=Co(()=>e("div",{class:"assets-pooled-title"}," Pooled Assets ",-1)),bn={class:"assets-pooled"},gn={alt:""},$n={key:0},yn={key:1},In=Co(()=>e("p",null,"--",-1)),kn=Co(()=>e("p",null,"--",-1)),Cn=[In,kn],Sn={alt:""},An={key:0},wn={key:1},Pn=Co(()=>e("p",null,"--",-1)),Rn=Co(()=>e("p",null,"--",-1)),Tn=[Pn,Rn];function qn(o,n,q,A,w,I){var v,b,a,i,t,u,l,s,p,c,k,g,S,z,P,C,E,O,M,H,R,X,D,Q,G,oo,V,ao,Z,_o,mo,so,_,J,eo,uo;const f=Lo("image");return h(),B("div",xe,[e("div",on,[e("div",en,[nn,(v=o.wallet)!=null&&v.connected?(h(),B("div",tn,"$"+d(("addCommom"in o?o.addCommom:U(y))((b=o.positionInfo)==null?void 0:b.myLiquidityUSD)),1)):(h(),B("div",sn,"--"))]),e("div",ln,[an,(a=o.wallet)!=null&&a.connected?(h(),B("div",un,d((i=o.positionInfo)==null?void 0:i.myShare)+"%",1)):(h(),B("div",dn,"--%"))])]),e("div",rn,[e("div",cn,[e("div",mn,[j(e("img",vn,null,512),[[f,o.needReverse?(u=(t=o.positionInfo)==null?void 0:t.token_b)==null?void 0:u.logo_url:(s=(l=o.positionInfo)==null?void 0:l.token_a)==null?void 0:s.logo_url]]),j(e("img",pn,null,512),[[f,o.needReverse?(c=(p=o.positionInfo)==null?void 0:p.token_a)==null?void 0:c.logo_url:(g=(k=o.positionInfo)==null?void 0:k.token_b)==null?void 0:g.logo_url]])]),(S=o.wallet)!=null&&S.connected?(h(),B("div",fn,d(("addCommom"in o?o.addCommom:U(y))((z=o.positionInfo)==null?void 0:z.myLiquidity))+" LP",1)):(h(),B("div",_n,"-- LP"))]),hn,e("div",bn,[e("div",null,[j(e("img",gn,null,512),[[f,o.needReverse?(C=(P=o.positionInfo)==null?void 0:P.token_b)==null?void 0:C.logo_url:(O=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:O.logo_url]]),(M=o.wallet)!=null&&M.connected?(h(),B("div",$n,[e("p",null,"$"+d(("addCommom"in o?o.addCommom:U(y))((H=o.positionInfo)==null?void 0:H.myAmountAUSD)),1),e("p",null,d(("addCommom"in o?o.addCommom:U(y))((R=o.positionInfo)==null?void 0:R.amountA))+" "+d(o.needReverse?(D=(X=o.positionInfo)==null?void 0:X.token_b)==null?void 0:D.symbol:(G=(Q=o.positionInfo)==null?void 0:Q.token_a)==null?void 0:G.symbol),1)])):(h(),B("div",yn,Cn))]),e("div",null,[j(e("img",Sn,null,512),[[f,o.needReverse?(V=(oo=o.positionInfo)==null?void 0:oo.token_a)==null?void 0:V.logo_url:(Z=(ao=o.positionInfo)==null?void 0:ao.token_b)==null?void 0:Z.logo_url]]),(_o=o.wallet)!=null&&_o.connected?(h(),B("div",An,[e("p",null,"$"+d(("addCommom"in o?o.addCommom:U(y))((mo=o.positionInfo)==null?void 0:mo.myAmountBUSD)),1),e("p",null,d(("addCommom"in o?o.addCommom:U(y))((so=o.positionInfo)==null?void 0:so.amountB))+" "+d(o.needReverse?(J=(_=o.positionInfo)==null?void 0:_.token_a)==null?void 0:J.symbol:(uo=(eo=o.positionInfo)==null?void 0:eo.token_b)==null?void 0:uo.symbol),1)])):(h(),B("div",wn,Tn))])])])])}const ne=$o(Ze,[["render",qn],["__scopeId","data-v-b1d5e482"]]),Ln=bo({components:{Modal:Vo},props:{poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},totalAmount:{type:String,default:""},shareOfPool:{type:String,default:""},minimumReceivedLP:{type:String,default:""}},setup(o,n){const{t:q}=Uo(),A=r(()=>{var u,l,s;return((u=o==null?void 0:o.poolInfo)==null?void 0:u.needReverse)||((s=(l=o==null?void 0:o.poolInfo)==null?void 0:l.poolInfo)==null?void 0:s.needReverse)}),w=To(),I=r(()=>w),f=qo(),v=r(()=>f),b=u=>{var l;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((l=I.value.tokensObj[u==null?void 0:u.address])==null?void 0:l.logo_url)||(v.value.theme==="default"?yo("/image/coins/unknown.png"):yo("/image/coins/sui-unknown.png"))},a=go(),i=N(!1),t=()=>{n.emit("toAdd")};return console.log(o,"props451"),{needReverse:A,getCoinIcon:b,addCommom:y,t:q,route:a,checked:i,decimalUi:Mo,clickSubmit:t}}});const jo=o=>(Io("data-v-bb911124"),o=o(),ko(),o),Bn=jo(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Nn={class:"modal-content"},Mn={class:"pool-info"},On={class:"left"},Dn={alt:""},Un={alt:""},jn={class:"pool-name"},Fn={class:"right"},En={class:"coin-info"},Wn={class:"from-coin-info"},Xn={class:"left"},zn={class:"coin-amount"},Hn={class:"coin-symbol"},Gn={class:"right"},Jn={class:"to-coin-info"},Yn={class:"left"},Kn={class:"coin-amount"},Qn={class:"coin-symbol"},Vn={class:"right"},Zn=jo(()=>e("div",{class:"to-swap-logo"},null,-1)),xn={class:"add-info"},ot={class:"total-amount"},et=jo(()=>e("span",null,"Total Amount",-1)),nt={class:"total-amount"},tt=jo(()=>e("span",null,"Share of Pool",-1)),st={class:"total-amount"},it=jo(()=>e("span",null,"Minimum Received LP",-1));function lt(o,n,q,A,w,I){const f=zo,v=Fo,b=Zo("Modal"),a=Lo("image");return h(),x(b,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:n[0]||(n[0]=i=>o.$emit("onClose"))},{closeIcon:fo(()=>[Bn]),default:fo(()=>{var i,t,u,l,s,p,c,k,g,S,z,P,C,E,O,M,H,R,X,D,Q,G,oo,V;return[e("div",Nn,[e("div",Mn,[e("div",On,[e("div",null,[j(e("img",Dn,null,512),[[a,o.needReverse?(l=(u=o.poolInfo)==null?void 0:u.token_b)==null?void 0:l.logo_url:(t=(i=o.poolInfo)==null?void 0:i.token_a)==null?void 0:t.logo_url]]),F(f,{address:o.needReverse?(k=(c=o.poolInfo)==null?void 0:c.token_b)==null?void 0:k.address:(p=(s=o.poolInfo)==null?void 0:s.token_a)==null?void 0:p.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[j(e("img",Un,null,512),[[a,o.needReverse?(P=(z=o.poolInfo)==null?void 0:z.token_a)==null?void 0:P.logo_url:(S=(g=o.poolInfo)==null?void 0:g.token_b)==null?void 0:S.logo_url]]),F(f,{address:o.needReverse?(M=(O=o.poolInfo)==null?void 0:O.token_a)==null?void 0:M.address:(E=(C=o.poolInfo)==null?void 0:C.token_b)==null?void 0:E.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",jn,[e("span",null,d(o.needReverse?(D=(X=o.poolInfo)==null?void 0:X.token_b)==null?void 0:D.symbol:(R=(H=o.poolInfo)==null?void 0:H.token_a)==null?void 0:R.symbol),1),po(" - "),e("span",null,d(o.needReverse?(V=(oo=o.poolInfo)==null?void 0:oo.token_a)==null?void 0:V.symbol:(G=(Q=o.poolInfo)==null?void 0:Q.token_b)==null?void 0:G.symbol),1)])]),e("div",Fn,[po(" Fee tier "),e("span",null,d(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),e("div",En,[e("div",Wn,[e("div",Xn,[e("div",zn,d(("addCommom"in o?o.addCommom:U(y))(o.fromCoinAmount)||0),1),e("div",Hn,d(o.fromCoin&&o.fromCoin.symbol),1)]),e("div",Gn,[j(e("img",null,null,512),[[a,o.fromCoin&&o.fromCoin.logoURI||o.getCoinIcon(o.fromCoin)]]),F(f,{address:o.fromCoin&&o.fromCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])])]),e("div",Jn,[e("div",Yn,[e("div",Kn,d(("addCommom"in o?o.addCommom:U(y))(o.toCoinAmount)||0),1),e("div",Qn,d(o.toCoin&&o.toCoin.symbol),1)]),e("div",Vn,[j(e("img",null,null,512),[[a,o.toCoin&&o.toCoin.logoURI||o.getCoinIcon(o.toCoin)]]),F(f,{address:o.toCoin&&o.toCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),Zn])]),e("div",xn,[e("div",ot,[et,e("span",null,"$"+d(("addCommom"in o?o.addCommom:U(y))(o.totalAmount)),1)]),e("div",nt,[tt,e("span",null,d(o.shareOfPool)+"%",1)]),e("div",st,[it,e("span",null,d(("addCommom"in o?o.addCommom:U(y))(o.minimumReceivedLP))+" "+d(o.fromCoin.symbol)+"-"+d(o.toCoin.symbol),1)])])]),F(v,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:fo(()=>[po(" Add Liquidity ")]),_:1},8,["onClick"])]}),_:1})}const te=$o(Ln,[["render",lt],["__scopeId","data-v-bb911124"]]),at=bo({components:{AutoPoolAddModal:te},setup(){const o=Oo(),n=N(!1),q=qo(),A=r(()=>q),w=r(()=>A.value.chainName),I=r(()=>o),f=Do(),v=r(()=>f),b=To(),a=r(()=>b),i=N(),t=go();to(()=>[v.value.positionInfoObj,t.params.id],([m,T])=>{m&&!Ro(m)&&T&&(i.value=m[T],console.log(i.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const u=r(()=>{var m;return(m=i.value)==null?void 0:m.needReverse}),l=N(),s=N();to(()=>i.value,m=>{m&&!Ro(m)&&(l.value=m==null?void 0:m.token_a,s.value=m==null?void 0:m.token_b)},{immediate:!0});const p=N(),c=N(),k=N(!0),g=r(()=>I.value.assets&&l.value&&I.value.assets[l.value.address]?Jo(I.value.assets[l.value.address].balance,l.value.decimals):0),S=r(()=>I.value.assets&&s.value&&I.value.assets[s.value.address]?Jo(I.value.assets[s.value.address].balance,s.value.decimals):0),z=m=>{m==="fromCoin"?(k.value=!0,p.value=g.value>0?l.value.symbol=="SUI"?new $(Number(g.value)).sub(new $(.05)).lt(new $(0))?"0":new $(Number(g.value)).sub(new $(.05)).toString():String(g.value):""):(k.value=!1,c.value=S.value>0?s.value.symbol=="SUI"?new $(Number(S.value)).sub(new $(.05)).lt(new $(0))?"0":new $(Number(S.value)).sub(new $(.05)).toString():String(S.value):"")},P=m=>{m==="fromCoin"?(k.value=!0,p.value=g.value>0?co(new $(Number(g.value)).div(2).toString(),l.value.decimals).toString():""):(k.value=!1,c.value=S.value>0?co(new $(Number(S.value)).div(2).toString(),s.value.decimals).toString():"")},C=r(()=>w.value?Ko(w.value):{}),E=r(()=>A.value.slippage),O=N("--"),M=N("--"),H=m=>{const T=new $(i.value.autoPoolPositionInfo.liquidity),L=new $(m.toString());O.value=co(L.div(T).div(100).toString(),i.value.decimals)},R=m=>{const T=new $(m.toString());console.log(m.toString(),"##liquidityAmount.toString()");const L=T.mul(new $(E.value).div(100)),Y=new $(Math.pow(10,i.value.decimals));M.value=co(T.minus(L).div(Y).toString(),i.value.decimals)},X=()=>{if(console.log(i.value,"238##"),!i.value||!p.value&&!c.value)return;const m=i.value.autoPoolPositionInfo.tick_lower_index,T=i.value.autoPoolPositionInfo.tick_upper_index;let L;if(p.value||c.value){if(k.value){const ro=new $(p.value).mul(Math.pow(10,l.value.decimals)).toString();L=new lo(ro)}else{const ro=new $(c.value).mul(Math.pow(10,s.value.decimals)).toString();L=new lo(ro)}const{liquidityAmount:Y,tokenMaxA:K,tokenMaxB:W,tokenMaxAOrigin:vo,tokenMaxBOrigin:ho}=C.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:l.value,tokenB:s.value,lowerTick:m,upperTick:T,coinAmount:L,iscoinA:k.value,roundUp:!0,slippage:Number(E.value)/100,curSqrtPrice:new lo(i.value.current_sqrt_price)});console.log(W.toString(),K.toString(),i.value,"###323"),k.value?c.value=Number(W)>0?W:"":p.value=Number(K)>0?K:"",H(Y),R(Y)}},D=r(()=>a.value.RATES),Q=r(()=>{var m,T,L,Y,K,W,vo,ho,ro,io;if((T=D.value[(m=l.value)==null?void 0:m.address])!=null&&T.price&&((Y=D.value[(L=s.value)==null?void 0:L.address])!=null&&Y.price)){console.log((W=D.value[(K=l.value)==null?void 0:K.address])==null?void 0:W.price,"RATES.value[fromCoin.value?.address]?.price");const no=new $(p.value||0).mul(new $((ho=D.value[(vo=l.value)==null?void 0:vo.address])==null?void 0:ho.price)),No=new $(c.value||0).mul(new $((io=D.value[(ro=s.value)==null?void 0:ro.address])==null?void 0:io.price));return co(no.add(No).toString(),6)}else return"--"});to(p,(m,T)=>{m&&X(),m==""&&(O.value="--",c.value="",M.value="--")}),to(c,(m,T)=>{m&&X(),m==""&&(p.value="",O.value="--",M.value="--")});const{t:G,locale:oo}=Uo(),V=r(()=>{const m=Number(p.value)>Number(g.value),T=Number(c.value)>Number(S.value);return!p.value&&!c.value?G("button.enterAmount"):m?G("button.insufficientBalance",{name:l.value.symbol}):T?G("button.insufficientBalance",{name:s.value.symbol}):"Add Liquidity"}),ao=r(()=>{const m=Number(p.value)>Number(g.value),T=Number(c.value)>Number(S.value);return!!(!p.value&&!c.value||m||T)}),Z=N(!0),{setIsShowSuccess:_o,setIsShowRejected:mo,setIsShowWaiting:so,setTransactionDesc:_,setTransactionTxid:J,setPositiomNum:eo}=q,uo=Qo("Sui");return{wallet:I,positionInfo:i,isShowAddModal:n,needReverse:u,fromCoin:l,toCoin:s,fromCoinAmount:p,toCoinAmount:c,fromCoinBlance:g,toCoinBlance:S,fixedFromCoin:k,maxBtnSelect:z,halfBtnSelect:P,totalAmountUSD:Q,addCommom:y,shareOfPool:O,minimumReceivedLP:M,addLiquidityBtnText:V,addLiquidityBtnDisabled:ao,toAdd:async()=>{var vo,ho,ro,io;n.value=!1,Z.value=!0,J("");const m=`${y(p.value)} ${(vo=l.value)==null?void 0:vo.symbol}`,T=`${y(c.value)} ${(ho=s.value)==null?void 0:ho.symbol}`;_(`Deposit ${m} and ${T}`),so(!0);const L=k.value,Y=i.value.autoPoolPositionInfo.tick_lower_index,K=i.value.autoPoolPositionInfo.tick_upper_index;let W;if(k.value){const no=new $(p.value).mul(Math.pow(10,l.value.decimals)).toString();W=new lo(no)}else{const no=new $(c.value).mul(Math.pow(10,s.value.decimals)).toString();W=new lo(no)}try{const no={lowerTick:Y,upperTick:K,coinAmount:W,fix_amount_a:L,slippage:Number(E.value)/100,curSqrtPrice:new lo(i.value.current_sqrt_price),id:i.value.id,clmm_pool:i.value.autoPoolPositionInfo.pool,lp_token_type:i.value.lp_token_type,coinTypeA:i.value.autoPoolPositionInfo.coin_type_a,coinTypeB:i.value.autoPoolPositionInfo.coin_type_b},No=await uo.deposit(no);console.log(No,"===>payloadAdd11111");const ue=await I.value.currentWallet.signAndExecuteTransactionBlock(No);let wo=C.value.handleTx(ue);if(console.log("toAdd###tx###",wo),wo&&wo.hash){J(wo.hash),so(!1),_o(!0),console.log(i,"===>positionInfo");const Wo={title:"Supplied",desc:`Deposit ${m} and ${T}`,hash:wo.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deopsit ${p.value} ${(ro=l.value)==null?void 0:ro.symbol} and ${c.value} ${(io=s.value)==null?void 0:io.symbol}`};w.value!=="Aptos"&&(Wo.res=wo.res),C.value.showTransitionPending(Wo),await C.value.watchTransaction(Wo)&&setTimeout(()=>{f.updatePositionItem(i.value.address),C.value.getAccount(I.value.address)},1e3),eo()}else so(!1),mo(!0);p.value="",c.value="",Z.value=!1}catch(no){p.value="",c.value="",console.log("addError###",no),Z.value=!1,so(!1),mo(!0)}}}}});const Eo=o=>(Io("data-v-4b9c6566"),o=o(),ko(),o),ut={class:"auto-pool-add"},dt={class:"auto-pool-add-content"},rt={class:"liquidity-action-tab"},ct=Eo(()=>e("div",{class:"increase tab-active"},"Add",-1)),mt={class:"card-item"},vt={class:"card-item"},pt={class:"add-info"},ft={class:"total-amount"},_t=Eo(()=>e("span",null,"Total Amount",-1)),ht={class:"total-amount"},bt=Eo(()=>e("span",null,"Share of Pool",-1)),gt={class:"total-amount"},$t=Eo(()=>e("span",null,"Minimum Received LP",-1));function yt(o,n,q,A,w,I){var a,i;const f=Ie,v=Fo,b=te;return h(),B("div",ut,[e("div",dt,[e("div",rt,[ct,e("div",{class:"remove",onClick:n[0]||(n[0]=xo(t=>o.$emit("changeCurrentTab"),["stop"]))},"Remove")]),e("div",{class:Xo(o.needReverse?"card-container reverse":"card-container")},[e("div",mt,[F(f,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":n[1]||(n[1]=t=>o.fromCoinAmount=t),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[2]||(n[2]=t=>o.maxBtnSelect("fromCoin")),onOnHalf:n[3]||(n[3]=t=>o.halfBtnSelect("fromCoin")),onOnInput:n[4]||(n[4]=t=>{o.fromCoinAmount=t}),onOnFocus:n[5]||(n[5]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),e("div",vt,[F(f,{modelValue:o.toCoinAmount,"onUpdate:modelValue":n[6]||(n[6]=t=>o.toCoinAmount=t),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[7]||(n[7]=t=>o.maxBtnSelect("toCoin")),onOnHalf:n[8]||(n[8]=t=>o.halfBtnSelect("toCoin")),onOnInput:n[9]||(n[9]=t=>{o.toCoinAmount=t}),onOnFocus:n[10]||(n[10]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])])],2),e("div",pt,[e("div",ft,[_t,e("span",null,"$"+d(("addCommom"in o?o.addCommom:U(y))(o.totalAmountUSD)),1)]),e("div",ht,[bt,e("span",null,d(o.shareOfPool)+"%",1)]),e("div",gt,[$t,e("span",null,d(("addCommom"in o?o.addCommom:U(y))(o.minimumReceivedLP))+" "+d((a=o.fromCoin)==null?void 0:a.symbol)+"-"+d((i=o.toCoin)==null?void 0:i.symbol),1)])])]),o.wallet.connected?(h(),x(v,{key:0,class:"big-btn liquidity-btn",disabled:o.addLiquidityBtnDisabled,onClick:n[11]||(n[11]=t=>o.isShowAddModal=!0)},{default:fo(()=>[e("span",null,d(o.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(h(),x(v,{key:1,class:"big-btn",onClick:n[12]||(n[12]=t=>o.wallet.setIsShowWalletModal(!0))},{default:fo(()=>[e("span",null,d(o.$t("button.connectWallet")),1)]),_:1})),o.isShowAddModal?(h(),x(b,{key:2,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,"from-coin-amount":o.fromCoinAmount,"to-coin-amount":o.toCoinAmount,"total-amount":o.totalAmountUSD,"share-of-pool":o.shareOfPool,"minimum-received-l-p":o.minimumReceivedLP,onOnClose:n[13]||(n[13]=t=>o.isShowAddModal=!1),onToAdd:o.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","onToAdd"])):Ho("",!0)])}const se=$o(at,[["render",yt],["__scopeId","data-v-4b9c6566"]]),It=bo({props:{inputValue:{type:String,default:""},balance:{type:String,default:""},lpDecimals:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},inputDisabled:{type:Boolean,default:!1}},setup(o,n){const{t:q,locale:A}=Uo(),w=qo(),I=r(()=>w),f=r(()=>new $(Number(o.balance)).div(2)),v=ve(pe,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function b(){this.$emit("onSelect")}const a=g=>{const S=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${o.lpDecimals&&o.lpDecimals}})?).*$`);g.target.value=g.target.value.replace(S,"$1")},i=Oo(),t=r(()=>i),u=To(),l=r(()=>u),s=r(()=>l.value.tokensWarningObj);to(()=>l.value.RATES,g=>{g&&console.log(g,"price====>")},{immediate:!0});const p=r(()=>l.value.tokensObj),c=r(()=>I.value.theme);return{route:go(),theme:c,tokensObj:p,pool:l,halfBalance:f,t:q,addCommom:y,store:I,wallet:t,indicator:v,inputChange:a,importIcon:yo,selectCoin:b,formatNumber:me,tokensWarningObj:s,checkNullObj:Ro}}});const ie=o=>(Io("data-v-84de2193"),o=o(),ko(),o),kt={class:"card"},Ct={class:"top"},St={key:1,class:"input-div"},At={key:0},wt={class:"left"},Pt={class:"loading-token"},Rt={class:"lp-bg"},Tt={alt:""},qt={alt:""},Lt=ie(()=>e("p",null,"LP",-1)),Bt={class:"bottom"},Nt=ie(()=>e("div",null,null,-1)),Mt={class:"top"},Ot={class:"right"},Dt={class:"balance"};function Ut(o,n,q,A,w,I){const f=fe,v=oe,b=Lo("image");return h(),B("div",kt,[e("div",Ct,[o.inputDisabled?(h(),B("div",St,[o.inputValue?(h(),B("span",At,d(o.inputValue),1)):(h(),x(v,{key:1,indicator:o.indicator},null,8,["indicator"]))])):(h(),x(f,{key:0,value:o.inputValue=="InsufficientLiquidity"?"":o.inputValue,placeholder:"0.0",disabled:o.inputDisabled,onChange:o.inputChange,onInput:n[0]||(n[0]=a=>o.$emit("onInput",a.target.value)),onFocus:n[1]||(n[1]=a=>o.$emit("onFocus"))},null,8,["value","disabled","onChange"])),e("div",wt,[e("div",Pt,[e("div",Rt,[j(e("img",Tt,null,512),[[b,o.fromCoin.logo_url]]),j(e("img",qt,null,512),[[b,o.toCoin.logo_url]])]),Lt])])]),e("div",Bt,[Nt,e("div",Mt,[e("div",Ot,[po(d(o.$t("common.balance"))+" ",1),e("span",Dt,d(o.wallet.connected?("addCommom"in o?o.addCommom:U(y))(o.balance,o.lpDecimals):"0"),1)])])])])}const jt=$o(It,[["render",Ut],["__scopeId","data-v-84de2193"]]),Ft=bo({components:{Modal:Vo},props:{title:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"11111111111"},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},isIncrease:{type:Boolean,default:!1},fixedFromCoin:{type:Boolean,default:!0},currentPriceTab:{type:String,default:""},currentPrice:{type:String,default:""},currentPriceReverse:{type:String,default:""},showFromCoinLock:{type:Boolean,default:!1},showToCoinLock:{type:Boolean,default:!1},currentDirect:{type:Boolean,default:!0},positionTotalAmount:{type:Number,default:0},tickLower:{type:Number,default:0},tickUpper:{type:Number,default:0},isCreate:{type:Boolean,default:!1}},setup(o,n){const{t:q}=Uo(),A=r(()=>{var u,l,s;return((u=o==null?void 0:o.poolInfo)==null?void 0:u.needReverse)||((s=(l=o==null?void 0:o.poolInfo)==null?void 0:l.poolInfo)==null?void 0:s.needReverse)}),w=To(),I=r(()=>w),f=qo(),v=r(()=>f),b=u=>{var l;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((l=I.value.tokensObj[u==null?void 0:u.address])==null?void 0:l.logo_url)||(v.value.theme==="default"?yo("/image/coins/unknown.png"):yo("/image/coins/sui-unknown.png"))},a=go(),i=N(!1),t=()=>{n.emit("toAdd")};return console.log(o,"props451"),{needReverse:A,getCoinIcon:b,addCommom:y,t:q,route:a,checked:i,decimalUi:Mo,clickSubmit:t}}});const So=o=>(Io("data-v-6d964534"),o=o(),ko(),o),Et=So(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Wt={class:"modal-content"},Xt={class:"pool-info"},zt={class:"left"},Ht={alt:""},Gt={alt:""},Jt={class:"pool-name"},Yt={class:"right"},Kt={class:"lp-info"},Qt=So(()=>e("div",{class:"lp-num"},[e("p",null,"1,126,122.123456"),e("span",null,"USDT-USDC LP")],-1)),Vt={class:"lp-bg"},Zt={alt:""},xt={alt:""},os={class:"est-receive"},es=So(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),ns={class:"token-a"},ts=So(()=>e("div",null,"0.941824",-1)),ss={alt:""},is=So(()=>e("span",null,"USDT",-1)),ls={class:"token-a"},as=So(()=>e("div",null,"0.941824",-1)),us={alt:""},ds=So(()=>e("span",null,"USDC",-1));function rs(o,n,q,A,w,I){const f=zo,v=Fo,b=Zo("Modal"),a=Lo("image");return h(),x(b,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:n[0]||(n[0]=i=>o.$emit("onClose"))},{closeIcon:fo(()=>[Et]),default:fo(()=>{var i,t,u,l,s,p,c,k,g,S,z,P,C,E,O,M,H,R,X,D,Q,G,oo,V;return[e("div",Wt,[e("div",Xt,[e("div",zt,[e("div",null,[j(e("img",Ht,null,512),[[a,o.needReverse?(l=(u=o.poolInfo)==null?void 0:u.token_b)==null?void 0:l.logo_url:(t=(i=o.poolInfo)==null?void 0:i.token_a)==null?void 0:t.logo_url]]),F(f,{address:o.needReverse?(k=(c=o.poolInfo)==null?void 0:c.token_b)==null?void 0:k.address:(p=(s=o.poolInfo)==null?void 0:s.token_a)==null?void 0:p.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[j(e("img",Gt,null,512),[[a,o.needReverse?(P=(z=o.poolInfo)==null?void 0:z.token_a)==null?void 0:P.logo_url:(S=(g=o.poolInfo)==null?void 0:g.token_b)==null?void 0:S.logo_url]]),F(f,{address:o.needReverse?(M=(O=o.poolInfo)==null?void 0:O.token_a)==null?void 0:M.address:(E=(C=o.poolInfo)==null?void 0:C.token_b)==null?void 0:E.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",Jt,[e("span",null,d(o.needReverse?(D=(X=o.poolInfo)==null?void 0:X.token_b)==null?void 0:D.symbol:(R=(H=o.poolInfo)==null?void 0:H.token_a)==null?void 0:R.symbol),1),po(" - "),e("span",null,d(o.needReverse?(V=(oo=o.poolInfo)==null?void 0:oo.token_a)==null?void 0:V.symbol:(G=(Q=o.poolInfo)==null?void 0:Q.token_b)==null?void 0:G.symbol),1)])]),e("div",Yt,[po(" Fee tier "),e("span",null,d(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),e("div",Kt,[Qt,e("div",Vt,[j(e("img",Zt,null,512),[[a,o.needReverse?o.poolInfo.token_b.logo_url:o.poolInfo.token_a.logo_url]]),j(e("img",xt,null,512),[[a,o.needReverse?o.poolInfo.token_a.logo_url:o.poolInfo.token_b.logo_url]])])]),e("div",os,[es,e("div",ns,[ts,e("div",null,[j(e("img",ss,null,512),[[a,"1"]]),is])]),e("div",ls,[as,e("div",null,[j(e("img",us,null,512),[[a,"1"]]),ds])])])]),F(v,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:fo(()=>[po(d(o.isIncrease?"Increase Liquidity":o.title==o.$t("button.addLiquidity")?"Add Liquidity":"Create and Add Liquidity"),1)]),_:1},8,["onClick"])]}),_:1})}const le=$o(Ft,[["render",rs],["__scopeId","data-v-6d964534"]]),cs=bo({components:{AutoPoolRemoveModal:le},setup(){const o=Oo(),n=r(()=>o),q=qo(),A=r(()=>q),w=r(()=>A.value.slippage),I=r(()=>A.value.chainName),f=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],v=N(25),b=go(),a=Do(),i=r(()=>a),t=r(()=>(console.log(i.value.positionInfoObj[b.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),i.value.positionInfoObj[b.params.id])),u=r(()=>{var _;return(_=t.value)==null?void 0:_.needReverse}),l=N(),s=N(),p=N(!1),c=N(),k=r(()=>{var _;return(_=t.value)==null?void 0:_.myLiquidity}),g=N(!0),S=r(()=>I.value?Ko(I.value):{}),z=Qo("Sui"),P=N("--"),C=N("--"),E=()=>{if(g.value||!t.value)return;if(!c.value){P.value="--",C.value="--",v.value=0;return}if(Number(c.value)>Number(k.value))return;if(Number(c.value)*Math.pow(10,t.value.decimals)==Number(k.value)){v.value=100,M({value:1}),g.value=!0;return}console.log(t.value,"##lpBalance.value");const _=new $(c.value).mul(Math.pow(10,t.value.lpInfo.decimals)).toString(),J=new $(c.value).div(new $(k.value)).mul(100),eo=t.value.autoPoolPositionInfo.tick_lower_index,uo=t.value.autoPoolPositionInfo.tick_upper_index,Ao=t.value.token_a.decimals,m=t.value.token_b.decimals,T=Po.tickIndexToSqrtPriceX64(eo),L=Po.tickIndexToSqrtPriceX64(uo);console.log(t.value.object.current_sqrt_price,"##positionInfo.value.object.current_sqrt_price");const Y=Yo.getCoinAmountFromLiquidity(new lo(_),new lo(t.value.object.current_sqrt_price),T,L,!1),K=new $(Y.coinA.toString()).div(Math.pow(10,Ao)).toString(),W=new $(Y.coinB.toString()).div(Math.pow(10,m)).toString();P.value=Number(K)>0?K:"--",C.value=Number(W)>0?W:"--",console.log(J.toString(),"##ratio"),v.value=J.toNumber(),O.value=co(_,0)},O=N(),M=_=>{if(!g.value)return;g.value=!0;const J=t.value.token_a.decimals,eo=t.value.token_b.decimals,uo=t.value.tick_lower_index,Ao=t.value.tick_upper_index,m=Po.tickIndexToSqrtPriceX64(uo),T=Po.tickIndexToSqrtPriceX64(Ao);let L="";console.log(t.value,"positionInfo.value.myLiquidity###"),_.value!==1?L=new $(t.value.myLiquidity).mul(Math.pow(10,t.value.lpInfo.decimals)).mul(_.value).toString():L=new $(t.value.myLiquidity).mul(Math.pow(10,t.value.lpInfo.decimals)).toString(),L=co(L,0)||"0",O.value=co(L,0),c.value=new $(L).div(Math.pow(10,t.value.lpInfo.decimals));const Y=Yo.getCoinAmountFromLiquidity(new lo(L),new lo(t.value.object.current_sqrt_price),m,T,!1),K=new $(Y.coinA.toString()).div(Math.pow(10,J)).toString(),W=new $(Y.coinB.toString()).div(Math.pow(10,eo)).toString();console.log(K,W,"amountA121212"),P.value=Number(K)>0?K:"--",C.value=Number(W)>0?W:"--"};to(v,_e((_,J)=>{_!==J&&(Number(_)>100?v.value=100:_&&t.value?(console.log("687===>"),v.value=_,M({value:v.value/100})):(P.value="--",C.value="--"))},300)),to(()=>c.value,_=>{E()},{immediate:!0});const H=he(),{setIsShowSuccess:R,setIsShowRejected:X,setIsShowWaiting:D,setTransactionDesc:Q,setTransactionTxid:G,setPositiomNum:oo,setTransactionDescText:V}=q,ao=N(!1),{t:Z}=Uo(),_o=async()=>{var L,Y,K,W;ao.value=!0,G("");const _=y(P.value,l.value.decimals)==0?"":`${y(P.value,l.value.decimals)} ${l.value.symbol}`,J=y(C.value,s.value.decimals)==0?"":`${y(C.value,s.value.decimals)} ${s.value.symbol}`;Q(Z("tips.removeLiquidiyText",{from:u.value?J:_,and:y(P.value,l.value.decimals)==0||y(C.value,s.value.decimals)==0?"":"and",to:u.value?_:J})),D(!0);const eo=Z("modal.removeLiquidityText2");V(eo);const uo=t.value.autoPoolPositionInfo.tick_lower_index,Ao=t.value.autoPoolPositionInfo.tick_upper_index,m=Po.tickIndexToSqrtPriceX64(uo),T=Po.tickIndexToSqrtPriceX64(Ao);try{const vo={lowerSqrtPrice:m,upperSqrtPrice:T,lpTokenAmount:new lo(O.value),curSqrtPrice:new lo(t.value.object.current_sqrt_price),slippage:w.value,id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.pool,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coin_type_a,coinTypeB:t.value.autoPoolPositionInfo.coin_type_b},ho=await z.remove(vo),ro=await n.value.currentWallet.signAndExecuteTransactionBlock(ho);let io=S.value.handleTx(ro);if(console.log("0331###remove###tx####",io),io&&io.hash){G(io.hash),D(!1),R(!0);const no={title:Z("common.removeLiquidity"),desc:"",hash:io.hash,descTransactions:`Remove ${y(P.value)} ${(L=l.value)==null?void 0:L.symbol} and ${y(C.value)} ${(Y=s.value)==null?void 0:Y.symbol} 
             from the pool`,sender:n.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${P.value} ${(K=l.value)==null?void 0:K.symbol} and ${C.value} ${(W=s.value)==null?void 0:W.symbol}`};no.res=io.res,S.value.showTransitionPending(no),await S.value.watchTransaction(no)&&(P.value="",C.value="",c.value="",setTimeout(()=>{a.updatePositionItem(t.value.address),S.value.getAccount(n.value.address)},1e3),Number(v.value)==100&&b.name=="auto-pool-detail"&&H.push("/pool/auto"))}else D(!1),X(!0);ao.value=!1}catch(vo){console.log("Remove error",vo),ao.value=!1,D(!1),X(!0)}};to(()=>t.value,_=>{_&&!Ro(_)&&(l.value=_==null?void 0:_.token_a,s.value=_==null?void 0:_.token_b,console.log("触发###"),M({value:v.value/100}))},{immediate:!0});const mo=r(()=>{const _=Number(c.value)>Number(k.value);return!c.value||c.value<=0?Z("button.enterAmount"):_?"Invalid Amount":Z("button.remove")}),so=r(()=>{const _=Number(c.value)>Number(k.value);return!!(!c.value||c.value<=0||_)});return{removeLiquidityBtnText:mo,removeLiquidityBtnDisabled:so,wallet:n,ratioArr:f,positionInfo:t,isShowRemoveModal:p,needReverse:u,fromCoin:l,toCoin:s,lpAmount:c,lpBalance:k,sliderVal:v,sFixD:co,isSlider:g,fromCoinAmount:P,toCoinAmount:C,setPercent:M,toRemove:_o,addCommom:y}}});const Go=o=>(Io("data-v-8c4f52f7"),o=o(),ko(),o),ms={class:"auto-pool-add"},vs={class:"auto-pool-add-content"},ps={class:"liquidity-action-tab"},fs=Go(()=>e("div",{class:"remove tab-active"},"Remove",-1)),_s={class:"card-item"},hs={class:"remove-ratio"},bs=Go(()=>e("div",{class:"remove-ratio-title"},"Amount",-1)),gs={class:"remove-ratio-select"},$s={key:0,class:"ratio"},ys={key:1,class:"ratio"},Is={class:"ratio-list"},ks=["onClick"],Cs={class:"est-receive"},Ss=Go(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),As={class:"token-a"},ws={alt:""},Ps={class:"token-a"},Rs={alt:""};function Ts(o,n,q,A,w,I){var t,u,l,s,p,c,k,g,S,z,P,C,E,O,M,H;const f=jt,v=$e,b=Fo,a=le,i=Lo("image");return h(),B("div",ms,[e("div",vs,[e("div",ps,[e("div",{class:"increase",onClick:n[0]||(n[0]=xo(R=>o.$emit("changeCurrentTab"),["stop"]))},"Add"),fs]),e("div",{class:Xo(o.needReverse?"card-container reverse":"card-container")},[e("div",_s,[F(f,{modelValue:o.lpAmount,"onUpdate:modelValue":n[1]||(n[1]=R=>o.lpAmount=R),"input-value":o.lpAmount,balance:o.lpBalance,"from-coin":o.fromCoin,"to-coin":o.toCoin,onOnInput:n[2]||(n[2]=R=>{o.isSlider=!1,o.lpAmount=R})},null,8,["modelValue","input-value","balance","from-coin","to-coin"])])],2),e("div",hs,[bs,e("div",gs,[Number(o.lpBalance)>=Number(o.lpAmount)?(h(),B("div",$s,d(o.sliderVal>0&&Number(("sFixD"in o?o.sFixD:U(co))(o.sliderVal,2))<.01?"<0.01":("sFixD"in o?o.sFixD:U(co))(o.sliderVal,2))+"% ",1)):(h(),B("div",ys,"--")),e("div",Is,[(h(!0),B(be,null,ge(o.ratioArr,(R,X)=>(h(),B("div",{key:X,class:Xo(["ratio-item",o.sliderVal==R.value?"ratio-item-active":""]),onClick:()=>{o.isSlider=!0,o.sliderVal=R.value}},d(R.name),11,ks))),128))])]),F(v,{value:o.sliderVal,"onUpdate:value":n[3]||(n[3]=R=>o.sliderVal=R)},null,8,["value"])]),e("div",Cs,[Ss,e("div",As,[e("div",null,d(("addCommom"in o?o.addCommom:U(y))(o.fromCoinAmount)),1),e("div",null,[j(e("img",ws,null,512),[[i,o.needReverse?(u=(t=o.positionInfo)==null?void 0:t.token_b)==null?void 0:u.logo_url:(s=(l=o.positionInfo)==null?void 0:l.token_a)==null?void 0:s.logo_url]]),e("span",null,d(o.needReverse?(c=(p=o.positionInfo)==null?void 0:p.token_b)==null?void 0:c.symbol:(g=(k=o.positionInfo)==null?void 0:k.token_a)==null?void 0:g.symbol),1)])]),e("div",Ps,[e("div",null,d(("addCommom"in o?o.addCommom:U(y))(o.toCoinAmount)),1),e("div",null,[j(e("img",Rs,null,512),[[i,o.needReverse?(z=(S=o.positionInfo)==null?void 0:S.token_a)==null?void 0:z.logo_url:(C=(P=o.positionInfo)==null?void 0:P.token_b)==null?void 0:C.logo_url]]),e("span",null,d(o.needReverse?(O=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:O.symbol:(H=(M=o.positionInfo)==null?void 0:M.token_b)==null?void 0:H.symbol),1)])])])]),o.wallet.connected?(h(),x(b,{key:0,class:"big-btn liquidity-btn",disabled:o.removeLiquidityBtnDisabled,onClick:o.toRemove},{default:fo(()=>[e("span",null,d(o.removeLiquidityBtnText),1)]),_:1},8,["disabled","onClick"])):(h(),x(b,{key:1,class:"big-btn",onClick:n[4]||(n[4]=R=>o.wallet.setIsShowWalletModal(!0))},{default:fo(()=>[e("span",null,d(o.$t("button.connectWallet")),1)]),_:1})),o.isShowRemoveModal?(h(),x(a,{key:2,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,onOnClose:n[5]||(n[5]=R=>o.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):Ho("",!0)])}const ae=$o(cs,[["render",Ts],["__scopeId","data-v-8c4f52f7"]]),qs=bo({components:{AutoPoolAdd:se,AutoPositionInfo:ee,AutoPositionLiquidity:ne,AutoPoolRemove:ae},setup(){const o=N("add"),n=Oo(),q=r(()=>n),A=Do(),w=r(()=>A),I=To(),f=r(()=>I);to(()=>f.value.poolConfigList,a=>{a&&a.length>0&&A.getAutoPoolList()},{immediate:!0}),to(()=>[q.value.address,w.value.autoPoolList],([a,i])=>{a&&i&&i.length>0&&A.getMyAutoPoolPosition()},{immediate:!0}),to(()=>[w.value.positionInfoList,f.value.RATES],(a,i)=>{a[0]&&a[0].length>0&&a[1]&&!Ro(a[1])&&(console.log("执行了吗##"),A.getUserPositionUSD())},{immediate:!0});const v=go(),b=r(()=>(console.log(w.value.positionInfoObj[v.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),w.value.positionInfoObj[v.params.id]));return to(()=>v.query.action,a=>{a&&(o.value=a)},{immediate:!0}),{currentTab:o,positionInfo:b}}});const Ls={class:"auto-increase-liquidity"},Bs={class:"auto-increase-liquidity-content pc-content"},Ns={class:"left"},Ms={class:"right"},Os={class:"auto-increase-liquidity-content h5-content"},Ds={class:"left"},Us={class:"right"},js={class:"loading-global"};function Fs(o,n,q,A,w,I){const f=de,v=ee,b=ne,a=se,i=ae,t=oe;return h(),B("div",Ls,[F(f),e("div",Bs,[e("div",Ns,[F(v),F(b)]),e("div",Ms,[o.currentTab=="add"?(h(),x(a,{key:0,onChangeCurrentTab:n[0]||(n[0]=u=>o.currentTab="remove")})):(h(),x(i,{key:1,onChangeCurrentTab:n[1]||(n[1]=u=>o.currentTab="add")}))])]),e("div",Os,[e("div",Ds,[F(v),o.currentTab=="add"?(h(),x(a,{key:0,onChangeCurrentTab:n[2]||(n[2]=u=>o.currentTab="remove")})):(h(),x(i,{key:1,onChangeCurrentTab:n[3]||(n[3]=u=>o.currentTab="add")}))]),e("div",Us,[F(b)])]),j(e("div",js,[F(t)],512),[[ye,!o.positionInfo]])])}const ui=$o(qs,[["render",Fs],["__scopeId","data-v-aaec38a6"]]);export{ui as default};
