import{_ as tn}from"./xwhale-header.76b4f73a.js";import{_ as an,W as on}from"./w-count-down.12b0c957.js";import{l as oe,e as K,q as ln,o as d,f as _,h as a,v as B,x as $,t as Ye,j as L,p as Q,k as z,m as i,r as y,D as X,i as P,c as I,w as M,B as le,K as Ve,u as Ie,z as we,a as Ne,a4 as sn,a9 as un,I as rn,S as dn,M as cn,y as mn,C as vn,F as Le,s as Me,a8 as gn,a7 as fn}from"./entry.2dca3a01.js";import{u as Pe}from"./xcetus.c65d4cfb.js";import{a as se,u as ie}from"./sha256.74f3093b.js";import{i as q}from"./import-icon.de3e6c66.js";import{e as E,s as _e,a as Ee,c as xe,p as Z,u as Fe,q as pe,D as Oe}from"./pool.abf46f84.js";import{u as Ue}from"./useWhale.21acd1dc.js";import{_ as Xe}from"./xWHALE-icon.2df34cd4.js";import{_ as He}from"./WHALE-icon.28f954ba.js";import{_ as hn}from"./head-switch.4b097890.js";/* empty css              *//* empty css              */import{_ as pn}from"./icon-selected_3x.09e9a6f0.js";/* empty css              *//* empty css              */import{u as wn}from"./useTheme.aa028c27.js";import{_ as _n}from"./img-leverage_2x.1c577303.js";import"./index.8fe6a6f7.js";const Cn={props:{titleText:{type:String,default:""},tipsText:{type:String,default:""},imgIcon:{type:String,default:""},value:{type:String,default:"--"}},setup(e){const{t:n}=oe();return{t:n}}};const bn=e=>(Q("data-v-77f61894"),e=e(),z(),e),yn={class:"table-rewards"},Sn={class:"text-top-all"},An={key:0,class:"icon-hover-box"},kn=bn(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1)),Tn={class:"tips-text-box"},Bn={key:0,alt:""};function In(e,n,r,t,k,p){const C=ln("image");return d(),_("div",yn,[a("div",Sn,[a("p",null,B(r.titleText),1),r.tipsText?(d(),_("div",An,[kn,a("div",Tn,B(r.titleText=="est.APR"?"Estimated APR of the current epoch for all xCETUS holders.":"The number of qualified positions in this epoch."),1)])):$("",!0)]),a("span",null,[a("p",null,[r.imgIcon?Ye((d(),_("img",Bn,null,512)),[[C,r.imgIcon]]):$("",!0),L(B(r.value),1)])])])}const xn=K(Cn,[["render",In],["__scopeId","data-v-77f61894"]]),Nn={setup(e){const{t:n}=oe(),r=Pe(),t=i(()=>r),k=i(()=>t.value.pendingAmount),p=i(()=>t.value.newPendingAmount),C=i(()=>(console.log(t.value.nextStartTime,"===>xcetus.value.nextStartTime"),t.value.nextStartTime)),w=i(()=>1683094391),f=i(()=>t.value.xcetusShare&&E(t.value.xcetusShare,2)),x=se(),h=i(()=>x),s=i(()=>t.value.cetusApr&&t.value.cetusApr>.01?E(_e(t.value.cetusApr,2),2):E(t.value.cetusApr,2)),m=i(()=>t.value.pendingCoinInfo),v=i(()=>t.value.newPendingCoinInfo),l=y("");X(()=>m.value,c=>{c&&!xe(c)?l.value=`Pending yield (${c.symbol})`:l.value="Pending yield"},{immediate:!0});const U=y("");X(()=>v.value,c=>{c&&!xe(c)?U.value=`Pending yield (${c.symbol})`:U.value="Pending yield"},{immediate:!0});const be=()=>{setTimeout(()=>{r.getDividendManager()},3e3)},re=i(()=>t.value.dividendManagerInfo),ye=i(()=>{const c=parseInt(String(new Date().getTime()/1e3)),R=re.value.interval_day,j=(c-Number(re.value.start_time))/(R*60);return console.log(parseInt(String(j))>0,"====>(parseInt(String(time))) > 0"),parseInt(String(j))>0}),de=ie(),ce=i(()=>de),{setIsShowSuccess:H,setIsShowRejected:me,setIsShowWaiting:O,setTransactionDesc:Se,setTransactionTxid:ve}=de,S=Ue("Sui"),Y=y(!1),Ae=i(()=>t.value.venft_id),J=i(()=>ce.value.chainName?Ee(ce.value.chainName):{});return{t:n,pendingAmount:k,nextStartTime:C,wallet:h,myShare:f,importIcon:q,nextEndTime:w,pendingYieldText:l,cetusApr:s,pendingCoinInfo:m,getNextEpoch:be,canClaim:ye,claimPendingYield:async()=>{Y.value=!0,O(!0),ve(""),Se(`${n("tips.claimingPendingYield")} ${k.value} ${m.value.symbol} ${Number(p.value)>0?"and":""} ${Number(p.value)>0?p.value+" "+v.value.symbol:""}`);try{let c;const R=await S.getRedeemDividendV2Payload(Ae.value);console.log(R,"payload==>");const j=await h.value.currentWallet.signAndExecuteTransactionBlock(R);if(c=J.value.handleTx(j),c&&c.hash){ve(c.hash),O(!1),H(!0);const g={title:"Claim",desc:`Claimed ${k.value} ${m.value.symbol} ${Number(p.value)>0?"and":""} ${Number(p.value)>0?p.value+" "+v.value.symbol:""} successfully.`,hash:c.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:m.value.symbol,numa:`+ ${k.value}`,logoa:m.value.logo_url}};J.value.showTransitionPending(g);const ee=await J.value.watchTransaction(g);console.log("0221###swap###transitionStatus####",ee),ee&&setTimeout(()=>{r.getVeNFTDividendInfo(),Y.value=!1},3e3),r.getOwnerLockCetuss(h.value.address)}else O(!1),me(!0),Y.value=!1}catch(c){O(!1),me(!0),Y.value=!1,console.log(c,"error===>")}},claimLoading:Y,addCommom:E,newPendingCoinInfo:v,newPendingAmount:p,newPendingYieldText:U}}},Pn=""+new URL("staking-rewards-banner-h5.1c7401db.png",import.meta.url).href,En="data:image/png;base64,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";const Ce=e=>(Q("data-v-8d9c9bbf"),e=e(),z(),e),Un={class:"top-banner"},Dn=Ce(()=>a("img",{src:Pn,alt:""},null,-1)),Rn=Ce(()=>a("p",null,"Convert CETUS to xCETUS to start earning",-1)),$n={class:"bot-count"},Wn=Ce(()=>a("span",null,"Reward distribution in ",-1)),Ln={class:"holder-rewards"},Mn={class:"title"},On=Ce(()=>a("div",{class:"left"},[a("img",{src:En,alt:""}),a("span",null,"xCETUS Staking Rewards")],-1)),Yn={class:"right"},Vn={class:"rewards-value"},Fn={key:0,class:"rewards-value"},Xn={class:"claim-h5"};function Hn(e,n,r,t,k,p){var x,h,s,m,v;const C=an,w=le,f=xn;return d(),_("div",null,[a("div",Un,[Dn,Rn,a("div",$n,[Wn,P(C,{"start-time":t.nextStartTime,onCountDown:n[0]||(n[0]=l=>e.$emit("getNextEpoch"))},null,8,["start-time"])])]),a("div",Ln,[a("div",Mn,[On,a("div",Yn,[t.wallet&&t.wallet.address?(d(),I(w,{key:0,loading:t.claimLoading,disabled:!t.canClaim||t.pendingAmount=="--"||t.pendingAmount<=0,onClick:t.claimPendingYield},{default:M(()=>[L(" Claim ")]),_:1},8,["loading","disabled","onClick"])):$("",!0)])]),a("div",Vn,[P(f,{"title-text":"est.APR","tips-text":"good",value:t.cetusApr+"%"},null,8,["title-text","value"]),P(f,{"title-text":"My share",value:t.myShare+"%"},null,8,["value"]),Number(t.pendingAmount)>0&&t.newPendingAmount=="0"?(d(),I(f,{key:0,"title-text":t.pendingYieldText,"img-icon":(x=t.pendingCoinInfo)==null?void 0:x.logo_url,value:t.addCommom(t.pendingAmount,6)},null,8,["title-text","img-icon","value"])):Number(t.newPendingAmount)>0&&t.pendingAmount=="0"?(d(),I(f,{key:1,"title-text":t.newPendingYieldText,"img-icon":(h=t.newPendingCoinInfo)==null?void 0:h.logo_url,value:t.addCommom(t.newPendingAmount,6)},null,8,["title-text","img-icon","value"])):t.newPendingAmount=="0"&&t.pendingAmount=="0"?(d(),I(f,{key:2,"title-text":t.newPendingYieldText,"img-icon":(s=t.newPendingCoinInfo)==null?void 0:s.logo_url,value:t.addCommom(t.newPendingAmount,6)},null,8,["title-text","img-icon","value"])):$("",!0)]),Number(t.pendingAmount)>0&&Number(t.newPendingAmount)>0?(d(),_("div",Fn,[P(f,{"title-text":t.pendingYieldText,"img-icon":(m=t.pendingCoinInfo)==null?void 0:m.logo_url,value:t.addCommom(t.pendingAmount,6)},null,8,["title-text","img-icon","value"]),P(f,{"title-text":t.newPendingYieldText,"img-icon":(v=t.newPendingCoinInfo)==null?void 0:v.logo_url,value:t.addCommom(t.newPendingAmount,6)},null,8,["title-text","img-icon","value"])])):$("",!0),a("div",Xn,[t.wallet&&t.wallet.address?(d(),I(w,{key:0,disabled:!t.canClaim||t.pendingAmount=="--"||t.pendingAmount<=0,loading:t.claimLoading,onClick:n[1]||(n[1]=l=>e.$emit("claimPendingYield"))},{default:M(()=>[L(" Claim ")]),_:1},8,["disabled","loading"])):$("",!0)])])])}const jn=K(Nn,[["render",Hn],["__scopeId","data-v-8d9c9bbf"]]),Zn={components:{WcountDown:on},props:{vItem:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},setup(e,n){const{t:r}=oe();console.log(e.vItem,"vItem");const t=Pe(),k=ie(),p=i(()=>k),C=v=>{n.emit("claim",v),t.setClaimLoading(v.id)},w=i(()=>t),f=i(()=>new Date().getTime()/1e3>e.vItem.locked_until_time),x=v=>{n.emit("cancelRedeemPayload",v),t.setClaimLoading(v.id)};i(()=>p.value.chainName),Ue("Sui");const h=se();return i(()=>h),i(()=>w.value.venft_id),i(()=>p.value.chainName?Ee(p.value.chainName):{}),{t:r,prettyAmount:Z,claimBoolean:f,toClaim:C,toCancel:x,claimWhale:v=>{n.emit("claimWhale",v)},cancelRedeemPayload:v=>{n.emit("cancelRedeemPayload",v)}}}};const De=e=>(Q("data-v-22a782cd"),e=e(),z(),e),qn={class:"vesting-box"},Gn={class:"left"},Kn=De(()=>a("img",{src:Xe,alt:""},null,-1)),Qn=De(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-swap2"})],-1)),zn=De(()=>a("img",{src:He,alt:""},null,-1)),Jn={class:"available-all"},et={class:"available"},nt={key:0},tt={key:1};function at(e,n,r,t,k,p){const C=Ve("WcountDown"),w=le;return d(),_("div",qn,[a("div",Gn,[a("p",null,[a("span",null,[Kn,L(" "+B(("addCommom"in e?e.addCommom:Ie(E))(t.prettyAmount(r.vItem.xcetus_amount,9),9))+" xCETUS ",1)]),Qn,a("span",null,[zn,L(" "+B(("addCommom"in e?e.addCommom:Ie(E))(t.prettyAmount(r.vItem.cetus_amount,9),9))+" CETUS ",1)])]),a("div",Jn,[a("div",et,[a("span",null,B(t.claimBoolean?"Available":"Available in"),1),t.claimBoolean?$("",!0):(d(),I(C,{key:0,"start-time":r.vItem.locked_start_time,"end-time":r.vItem.locked_until_time,onCountDown:n[0]||(n[0]=f=>e.$emit("countDown"))},null,8,["start-time","end-time"]))]),a("div",{class:we(t.claimBoolean?"highlight right-h5":"right-h5")},[t.claimBoolean?(d(),_("span",nt,"Claim")):(d(),_("span",tt,"Cancel"))],2)])]),t.claimBoolean?(d(),I(w,{key:0,disabled:!t.claimBoolean||r.loading,loading:r.loading,onClick:n[1]||(n[1]=f=>t.claimWhale(r.vItem))},{default:M(()=>[L(B(t.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"])):(d(),I(w,{key:1,type:"text",class:"right",disabled:r.loading,loading:r.loading,onClick:n[2]||(n[2]=f=>t.cancelRedeemPayload(r.vItem))},{default:M(()=>[L(B(t.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"]))])}const ot=K(Zn,[["render",at],["__scopeId","data-v-22a782cd"]]),lt=Ne({props:{inputValue:{type:String,default:""},coinSymbol:{type:String,default:""},whaleDirection:{type:String,default:""},address:{type:String,default:""},balance:{type:String,default:""}},setup(e,n){const{t:r,locale:t}=oe(),k=ie(),p=i(()=>k),C=sn(un,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),w=se(),f=i(()=>w),x=Fe(),h=i(()=>x),s=v=>{const U=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");v.target.value=v.target.value.replace(U,"$1")},m=i(()=>{var v;return h.value.tokensObj&&e.address&&h.value.tokensObj[e.address]&&((v=h.value.tokensObj[e.address])==null?void 0:v.decimals)});return X(()=>h.value.RATES,v=>{v&&console.log(v,"price====>")},{immediate:!0}),{pool:h,t:r,addCommom:E,store:p,wallet:f,indicator:C,inputChange:s,importIcon:q,coinDecimals:m}}});const st=e=>(Q("data-v-83d9dead"),e=e(),z(),e),it={class:"card"},ut={class:"top"},rt={class:"left"},dt={class:"loading-token"},ct={key:0,src:He,alt:""},mt={key:1,src:Xe,alt:""},vt={class:"bottom"},gt=st(()=>a("div",null,null,-1)),ft={class:"top"},ht={class:"right"},pt={key:0,class:"balance"};function wt(e,n,r,t,k,p){var x,h;const C=rn,w=dn,f=le;return d(),_("div",it,[a("div",ut,[P(C,{value:e.inputValue,placeholder:"0.0",onChange:e.inputChange,onInput:n[0]||(n[0]=s=>e.$emit("onInput",s.target.value)),onFocus:n[1]||(n[1]=s=>e.$emit("onFocus"))},null,8,["value","onChange"]),a("div",rt,[a("div",dt,[e.coinSymbol=="CETUS"?(d(),_("img",ct)):(d(),_("img",mt)),a("div",null,[a("p",null,B(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1)])])])]),a("div",vt,[gt,a("div",ft,[a("div",ht,[a("span",null,B(e.$t("common.balance")),1),e.balance?(d(),_("span",pt,B(e.balance>1?("addCommom"in e?e.addCommom:Ie(E))(e.balance):e.balance),1)):(d(),I(w,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})),e.whaleDirection=="From"?(d(),I(f,{key:2,class:"max-btn",disabled:!e.balance||e.balance==0||!((x=e.wallet)!=null&&x.address),onClick:n[2]||(n[2]=s=>e.$emit("halfBalanne"))},{default:M(()=>[L(B("Half"))]),_:1},8,["disabled"])):$("",!0),e.whaleDirection=="From"?(d(),I(f,{key:3,class:"max-btn",disabled:!e.balance||e.balance==0||!((h=e.wallet)!=null&&h.address),onClick:n[3]||(n[3]=s=>e.$emit("maxBalanne"))},{default:M(()=>[L(B(e.$t("button.max")),1)]),_:1},8,["disabled"])):$("",!0)])])])])}const _t=K(lt,[["render",wt],["__scopeId","data-v-83d9dead"]]);const Ct=Ne({components:{Modal:cn},setup(e,n){const r=ie(),t=y(!1);i(()=>r);const k=se(),p=i(()=>k);return{store:r,isSelect:t,clickConvert:()=>{t.value&&localStorage.setItem(`notRemind${p.value.address}`,!0),n.emit("clickConvert")}}}}),Re=e=>(Q("data-v-ee04003a"),e=e(),z(),e),bt=Re(()=>a("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),yt=[bt],St={class:"token-waring-conetnt"},At=Re(()=>a("div",{class:"tips-text"},[L(" Please note that after conversion, if you want to convert xCETUS back to CETUS, a vesting period will be applied & different vesting durations correspond to different redeem ratios. "),a("a",{href:"https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus",target:"_blank"}," Learn more")],-1)),kt={class:"read-text"},Tt={key:0,src:pn},Bt=Re(()=>a("span",null," Do not remind again. ",-1));function It(e,n,r,t,k,p){const C=le,w=Ve("Modal");return d(),I(w,{width:"440px",visible:!0,footer:null,title:null,"mask-closable":!0,onCancel:n[3]||(n[3]=f=>e.$emit("close"))},{closeIcon:M(()=>[(d(),_("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:n[0]||(n[0]=f=>e.$emit("close"))},yt))]),default:M(()=>[a("div",St,[At,a("div",kt,[a("div",{class:"radio",onClick:n[1]||(n[1]=f=>e.isSelect=!e.isSelect)},[e.isSelect?(d(),_("img",Tt)):$("",!0)]),Bt]),P(C,{class:"big-btn continue",onClick:n[2]||(n[2]=()=>e.clickConvert())},{default:M(()=>[L("Convert")]),_:1})])]),_:1})}const xt=K(Ct,[["render",It],["__scopeId","data-v-ee04003a"]]),Nt=Ne({setup(){const e=Pe(),n=i(()=>e),r=i(()=>n.value.venft_id),t=i(()=>n.value.venftInfo),k=Fe(),p=i(()=>k),C=ie(),w=i(()=>C),f=wn();i(()=>p.value.tokensObj&&p.value.tokensObj["0x2a4f647bc73f070182436658bff75060246019857c769ad9268c22c4472bca7f::cetus::CETUS"]);const x=y("");let h=y(!1);const s=y(""),m=y(""),v=y(!1),l=y("convert"),{t:U}=oe(),be=y([{time:"15 D",num:15},{time:"30 D",num:30},{time:"90 D",num:90},{time:"180 D",num:180}]),re=y([{name:"est.APR",value:"100.12%"},{name:"My share",value:"<0.1%"},{name:"Pending yield (USDC)",value:0}]),ye=y([{name:"My total locked",value:"$100.12"},{name:"Pending rewards (xCETUS)",value:"100.12"},{name:"",value:""}]),de=y([{name:"My positions",value:"12"},{name:"My qualified positions",value:"0"},{name:"Pending rewards (xCETUS)",value:"100.12"}]),ce=window.setInterval(()=>{e.getXcetusApr(),g.value.address&&(e.getMyShare(g.value.address),e.getVeNFTDividendInfo())},6e4);mn(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||e.getDividendManager()}),e.getXcetusApr(),e.getDividendManager()}),vn(()=>{window.clearInterval(ce),document.removeEventListener("visibilitychange",()=>{console.log("移除监听")})}),X(()=>w.value.theme,o=>{o!=="sui"&&f.selectSuiTheme()},{immediate:!0});const H=i(()=>(console.log(n.value.whaleBalance,"==>xcetus.value.whaleBalance"),n.value.whaleBalance)),me=i(()=>n.value.xWhaleBalance),O=i(()=>n.value.availableXwhale),Se=i(()=>n.value.redeemingXwhale),ve=i(()=>{if(l.value=="convert"){if(Number(s.value)>Number(H.value))return!0}else if(Number(s.value)>Number(O.value))return!0;return!s.value||!m.value||Number(s.value)==0||Number(m.value)==0}),S=y("180"),Y=i(()=>(console.log(l.value=="convert","===>1212211"),l.value=="convert"&&Number(s.value)>Number(H.value)?U("button.insufficientBalance",{name:"CETUS"}):l.value!=="convert"&&Number(s.value)>Number(O.value)?U("button.insufficientBalance",{name:"xCETUS"}):Number(S.value)<15?"Minimum vesting duration is 15 days":l.value=="convert"&&r?"Convert":l.value!=="convert"&&r?"Redeem":"Convert"));console.log(Y.value,"btnText.value===>");const Ae=o=>{s.value="",m.value="",l.value=o},J=()=>{h.value=!0,setTimeout(()=>{h.value=!1},300)},$e=o=>{S.value=o},c=y(!1),R=Ue("Sui"),j=se(),g=i(()=>j),ee=i(()=>n.value.ownerLocks);X(()=>g.value.address,o=>{console.log("触发",o),o?(e.getOwnerVeNFT(o),e.getAccountWhaleBalance(o),e.getOwnerLockCetuss(o),e.getMyShare(o)):e.loginOut()},{immediate:!0});const N=i(()=>w.value.chainName?Ee(w.value.chainName):{}),ne=i(()=>w.value.chainName),{setIsShowSuccess:te,setIsShowRejected:V,setIsShowWaiting:A,setTransactionDesc:ae,setTransactionTxid:F}=C,ke=async()=>{c.value=!0,A(!0),F(""),ae(U("tips.converting",{from:`${E(s.value,9)} CETUS`,and:"to",to:`${E(s.value,9)} xCETUS`}));try{let o;const u=pe(s.value,9);console.log(r.value,"===>venft_id.value");const b=await R.depositCetus(u,r.value);console.log(b,"payload==>");const D=await g.value.currentWallet.signAndExecuteTransactionBlock(b);if(o=N.value.handleTx(D),o&&o.hash){F(o.hash),A(!1),te(!0);const T={title:"Converted",desc:`Converted ${E(s.value,9)} xCETUS successfully`,hash:o.hash,tit:"Converted",icon:"icon-icon-Swap",tokenInfo:{tokena:"CETUS",numa:`- ${s.value}`,logoa:q("/sui-image/WHALE-icon.png"),tokenb:"xCETUS",numb:`+ ${s.value}`,logob:q("/sui-image/xWHALE-icon.png")}};ne.value!=="Aptos"&&(T.res=o.res),N.value.showTransitionPending(T);const W=await N.value.watchTransaction(T);console.log("0221###swap###transitionStatus####",W),W&&setTimeout(()=>{e.getAccountWhaleBalance(g.value.address),e.getOwnerVeNFT(g.value.address),e.getOwnerLockCetuss(g.value.address),e.getMyShare(g.value.address)},3e3),c.value=!1}else A(!1),V(!0),c.value=!1;s.value=""}catch(o){A(!1),V(!0),c.value=!1,s.value="",console.log(o,"error===>")}},G=y(!0),Te=y("0"),je=async()=>{const o=pe(s.value,9),u=await R.redeemNum(o,Number(S.value));m.value=Z(u.amountOut,9),console.log("===>amount2222"),Te.value=u.percent},Ze=async()=>{const o=pe(m.value,9),u=await R.reverseRedeemNum(o,Number(S.value));console.log(u,"===>amount111"),s.value=Z(u.amountOut,9),Te.value=u.percent};X(()=>[s.value,S.value,G.value],([o,u,b])=>{console.log(o,"===>>>>>>>fromCoinAmount",typeof o),o&&u&&b&&Number(u)>=15&&je(),!o&&b&&(m.value="")},{immediate:!0}),X(()=>[m.value,S.value,G.value],([o,u,b])=>{o&&u&&!b&&Number(u)>=15&&(Ze(),console.log(o,"===>toCoinAmount")),!o&&!b&&(s.value="")},{immediate:!0}),X(()=>[S.value,G.value],([o,u])=>{Number(o)>180?S.value="180":Number(o)<15?u?m.value="":s.value="":o||(u?s.value="":m.value="")},{immediate:!0});const qe=()=>{G.value=!0,s.value=_e(new Oe(l.value!=="convert"?O.value:H.value).div(new Oe(2)).toString(),9)},Ge=()=>{G.value=!0,s.value=l.value!=="convert"?_e(O.value,9):_e(H.value,9)},We=async()=>{c.value=!0,A(!0),F(""),ae(U("tips.redeeming",{from:`${E(s.value,9)} xCETUS`,to:`${E(m.value,9)} CETUS`}));try{let o;const u=pe(s.value,9);console.log(u.toString(),"538====>");const b=await R.getRedeemLockPayload(u,r.value,Number(S.value));console.log(b,"payload==>");const D=await g.value.currentWallet.signAndExecuteTransactionBlock(b);if(o=N.value.handleTx(D),o&&o.hash){F(o.hash),A(!1),te(!0);const T={title:"Redemption",desc:"Redemption transaction submitted successfully.",hash:o.hash,tit:"Vesting",icon:"icon-icon-Removed",tokenInfo:{tokena:"xCETUS",numa:`- ${s.value}`,logoa:q("/sui-image/xWHALE-icon.png")}};ne.value!=="Aptos"&&(T.res=o.res),N.value.showTransitionPending(T);const W=await N.value.watchTransaction(T);console.log("0221###swap###transitionStatus####",W),W&&setTimeout(()=>{e.getAccountWhaleBalance(g.value.address),e.getOwnerVeNFT(g.value.address),e.getOwnerLockCetuss(g.value.address),e.getMyShare(g.value.address)},3e3),c.value=!1}else A(!1),V(!0),c.value=!1;s.value="",m.value=""}catch(o){A(!1),V(!0),c.value=!1,s.value="",m.value="",console.log(o,"error===>")}};X(()=>[r.value,ee.value,t.value,g.value.address],([o,u,b,D])=>{D&&(o&&e.getVeNFTDividendInfo(),o&&!xe(b)&&u&&u.length>0&&(console.log("执行了",u),e.getAvailableXCetus()))},{immediate:!0,deep:!0});const Ke=async o=>{c.value=!0,A(!0),F(""),ae("");try{let u;console.log(o.id,"==>vItem.id");const b=await R.getCancelRedeemPayload(o.id,r.value);console.log(b,"payload==>");const D=await g.value.currentWallet.signAndExecuteTransactionBlock(b);if(u=N.value.handleTx(D),u&&u.hash){F(u.hash),A(!1),te(!0);const T={title:"Cancelled Redemption",desc:"Cancelled redemption successfully.",hash:u.hash,tit:"Cancelled Redemption",icon:"icon-a-icon-Shutdown",tokenInfo:{tokena:"xCETUS",numa:`+ ${Z(o.xcetus_amount,9)}`,logoa:q("/sui-image/xWHALE-icon.png")}};ne.value!=="Aptos"&&(T.res=u.res),N.value.showTransitionPending(T);const W=await N.value.watchTransaction(T);console.log("0221###swap###transitionStatus####",W),W&&setTimeout(()=>{e.getOwnerVeNFT(g.value.address),e.getOwnerLockCetuss(g.value.address),c.value=!1},3e3)}else A(!1),V(!0),c.value=!1;s.value="",m.value=""}catch(u){A(!1),V(!0),c.value=!1,s.value="",m.value="",e.setClaimLoading(""),console.log(u,"error===>")}},Qe=y({}),ze=()=>{console.log("倒计时结束"),e.getOwnerLockCetuss(g.value.address)},Je=async o=>{console.log(o,"vItem===>"),c.value=!0,A(!0),F(""),ae(`${U("tips.claimingPendingYield")} ${E(Z(o.cetus_amount,9),9)} CETUS`);try{let u;const b=await R.getRedeemPayload(o.id,r.value);console.log(b,"payload==>");const D=await g.value.currentWallet.signAndExecuteTransactionBlock(b);if(u=N.value.handleTx(D),u&&u.hash){F(u.hash),A(!1),te(!0);const T={title:"Claimed",desc:`Claimed ${E(Z(o.cetus_amount,9),9)} CETUS successfully.`,hash:u.hash,tit:"CETUS Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:"CETUS",numa:`+ ${Z(o.cetus_amount,9)}`,logoa:q("/sui-image/WHALE-icon.png")}};ne.value!=="Aptos"&&(T.res=u.res),N.value.showTransitionPending(T);const W=await N.value.watchTransaction(T);console.log("0221###swap###transitionStatus####",W),W&&setTimeout(()=>{e.getOwnerLockCetuss(g.value.address),e.getAccountWhaleBalance(g.value.address),e.getOwnerVeNFT(g.value.address),e.getMyShare(g.value.address),e.getAvailableXCetus(),c.value=!1},3e3)}else A(!1),V(!0),c.value=!1;s.value="",m.value=""}catch(u){A(!1),V(!0),c.value=!1,s.value="",m.value="",e.setClaimLoading(""),console.log(u,"error===>")}},Be=y(!1),en=()=>{!localStorage.getItem(`notRemind${g.value.address}`)&&Y.value=="Convert"?Be.value=!0:Y.value=="Redeem"?We():ke()},nn=()=>{Be.value=!1,ke()},ge=i(()=>n.value.pendingCoinInfo),fe=i(()=>n.value.pendingAmount),he=y(!1);return{clickModalConvert:nn,openConfirmModal:Be,validateInput:()=>{S.value&&(S.value=S.value.replace(/[^\d]/g,""),S.value.charAt(0)==="0"&&(S.value=S.value.slice(1)))},countDown:ze,value:x,change:h,clickExchange:J,fromCoinAmount:s,toCoinAmount:m,showCoinSelect:v,headSwitchValue:l,headSwitchChange:Ae,vestingDateList:be,vestingParameter:S,vestingTab:$e,holderList:re,lockupList:ye,leaderboardList:de,whaleBalance:H,depositCetus:ke,btnText:Y,loading:c,redeemRatio:Te,halfBalanne:qe,maxBalanne:Ge,xWhaleBalance:me,availableXwhale:O,redeemingXwhale:Se,withdrawWhale:We,ownerLocks:ee,cancelRedeemPayload:Ke,holderInfo:Qe,btnDisabled:ve,fixedFromCoin:G,walletStore:j,claimWhale:Je,wallet:g,depositOrWithdraw:en,pendingAmount:fe,claimPendingYield:async()=>{he.value=!0,A(!0),F(""),ae(`${U("tips.claimingPendingYield")} ${fe.value} ${ge.value.symbol}`);try{let o;const u=await R.getRedeemDividendV2Payload(r.value);console.log(u,"payload==>");const b=await g.value.currentWallet.signAndExecuteTransactionBlock(u);if(o=N.value.handleTx(b),o&&o.hash){F(o.hash),A(!1),te(!0);const D={title:"Claim",desc:`Claimed ${fe.value} ${ge.value.symbol} successfully.`,hash:o.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:ge.value.symbol,numa:`+ ${fe.value}`,logoa:ge.value.logo_url}};ne.value!=="Aptos"&&(D.res=o.res),N.value.showTransitionPending(D);const T=await N.value.watchTransaction(D);console.log("0221###swap###transitionStatus####",T),T&&setTimeout(()=>{e.getVeNFTDividendInfo(),he.value=!1},3e3),e.getOwnerLockCetuss(g.value.address)}else A(!1),V(!0),he.value=!1,c.value=!1}catch(o){A(!1),V(!0),he.value=!1,console.log(o,"error===>")}},inputBlur:()=>{Number(S.value)<15&&(S.value="15")},getNextEpoch:()=>{e.getDividendManager()}}}});const ue=e=>(Q("data-v-924bb0a1"),e=e(),z(),e),Pt={class:"dashboard-all"},Et={class:"dashboard-content"},Ut={class:"content-left"},Dt={key:0,class:"vesting"},Rt=ue(()=>a("p",null,"Vesting",-1)),$t={class:"content-right"},Wt={key:0,class:"card-container"},Lt={class:"card-item"},Mt={class:"card-item"},Ot={class:"exchange"},Yt=ue(()=>a("use",{"xlink:href":"#icon-icon-swap2"},null,-1)),Vt=[Yt],Ft={key:1,class:"card-redeem"},Xt={class:"card-item"},Ht={class:"vesting-duration"},jt=ue(()=>a("p",null,"Vesting duration",-1)),Zt={class:"vesting-content"},qt={class:"vesting-left"},Gt={class:"value-days"},Kt=ue(()=>a("span",null,"days",-1)),Qt={class:"vesting-right"},zt=["onClick"],Jt={class:"card-item"},ea={class:"redeem-ratio"},na=ue(()=>a("span",null,"Redeem ratio",-1));function ta(e,n,r,t,k,p){const C=tn,w=jn,f=ot,x=hn,h=_t,s=fn,m=le,v=xt;return d(),_("div",Pt,[P(C,{title:"Dashboard","total-xwhale":e.xWhaleBalance,"available-xwhale":e.availableXwhale,"redeeming-xwhale":e.redeemingXwhale},null,8,["total-xwhale","available-xwhale","redeeming-xwhale"]),a("div",Et,[a("div",Ut,[P(w,{"holder-info":e.holderInfo,"pending-amount":e.pendingAmount,"claim-loading":e.claimLoading,onClaimPendingYield:e.claimPendingYield,onGetNextEpoch:e.getNextEpoch},null,8,["holder-info","pending-amount","claim-loading","onClaimPendingYield","onGetNextEpoch"]),e.ownerLocks&&e.ownerLocks.length>0?(d(),_("div",Dt,[Rt,(d(!0),_(Le,null,Me(e.ownerLocks,l=>(d(),I(f,{key:l,"v-item":l,loading:e.loading,onCountDown:e.countDown,onClaimWhale:e.claimWhale,onCancelRedeemPayload:e.cancelRedeemPayload},null,8,["v-item","loading","onCountDown","onClaimWhale","onCancelRedeemPayload"]))),128))])):$("",!0)]),a("div",$t,[P(x,{"head-switch-value":e.headSwitchValue,"left-text":"Get xCETUS","right-text":"Redeem CETUS",onHeadSwitchChange:n[0]||(n[0]=l=>{e.headSwitchChange(l)})},null,8,["head-switch-value"]),e.headSwitchValue=="convert"?(d(),_("div",Wt,[a("div",Lt,[P(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[1]||(n[1]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"CETUS","whale-direction":"From",balance:e.whaleBalance,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:n[2]||(n[2]=l=>{e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),a("div",Mt,[P(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[3]||(n[3]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"To",balance:e.availableXwhale,onOnInput:n[4]||(n[4]=l=>{e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance"])]),a("img",{class:we(e.change?"gang animationex":"gang"),src:_n,alt:""},null,2),a("div",Ot,[(d(),_("svg",{class:we(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Vt,2))])])):(d(),_("div",Ft,[a("div",Xt,[P(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[5]||(n[5]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"From",balance:e.availableXwhale,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:n[6]||(n[6]=l=>{e.fixedFromCoin=!0,e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),a("div",Ht,[jt,a("div",Zt,[a("div",qt,[a("div",Gt,[Ye(a("input",{"onUpdate:modelValue":n[7]||(n[7]=l=>e.vestingParameter=l),onInput:n[8]||(n[8]=(...l)=>e.validateInput&&e.validateInput(...l)),onBlur:n[9]||(n[9]=(...l)=>e.inputBlur&&e.inputBlur(...l))},null,544),[[gn,e.vestingParameter]])]),Kt]),a("div",Qt,[(d(!0),_(Le,null,Me(e.vestingDateList,l=>(d(),_("div",{key:l.time,class:we(["box-table",{"box-table-active":l.num===Number(e.vestingParameter)}]),onClick:U=>e.vestingTab(l.num)},B(l.time),11,zt))),128))])]),P(s,{value:e.vestingParameter,"onUpdate:value":n[10]||(n[10]=l=>e.vestingParameter=l),max:180,min:15},null,8,["value"])]),a("div",Jt,[P(h,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[11]||(n[11]=l=>e.toCoinAmount=l),"input-value":e.toCoinAmount,"coin-symbol":"CETUS","whale-direction":"To",balance:e.whaleBalance,onOnInput:n[12]||(n[12]=l=>{e.fixedFromCoin=!1,e.toCoinAmount=l})},null,8,["modelValue","input-value","balance"])]),a("div",ea,[na,a("p",null,B(e.redeemRatio)+"%",1)])])),e.wallet&&e.wallet.address?(d(),I(m,{key:2,class:"big-btn",loading:e.loading,disabled:e.btnDisabled,onClick:e.depositOrWithdraw},{default:M(()=>[a("span",null,B(e.btnText),1)]),_:1},8,["loading","disabled","onClick"])):(d(),I(m,{key:3,class:"big-btn",onClick:n[13]||(n[13]=l=>e.walletStore.setIsShowWalletModal(!0))},{default:M(()=>[a("span",null,B(e.$t("button.connectWallet")),1)]),_:1}))])]),e.openConfirmModal?(d(),I(v,{key:0,onClickConvert:e.clickModalConvert,onClose:n[14]||(n[14]=()=>e.openConfirmModal=!e.openConfirmModal)},null,8,["onClickConvert"])):$("",!0)])}const Ta=K(Nt,[["render",ta],["__scopeId","data-v-924bb0a1"]]);export{Ta as default};
