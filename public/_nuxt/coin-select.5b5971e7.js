import{_ as ee}from"./token-warning.ca8b2cb0.js";import{a as H,i as oe,u as ne,h as M,D as me,f as pe,b as ve,p as be}from"./pool.4307b5ad.js";import{a as se,l as te,m as v,a1 as he,a2 as ae,A as z,e as le,o as a,f as i,h as t,c as A,t as m,x as E,i as j,w as f,s as N,j as F,u as S,I as ke,J as ie,a9 as _e,S as fe,B as ge,p as de,k as re,M as ye,r as D,v as Ce,aa as $e,K as W,E as we,a3 as Se,F as Y,q as x,D as Le,ab as Te}from"./entry.9449c7e1.js";/* empty css              *//* empty css              *//* empty css              */import{i as L}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as Ie,a as Oe}from"./img-no-Positions_2x.5bdf77c5.js";const Ae=se({components:{TokenWarning:ee},props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,d){const{t:l,locale:Z}=te(),R=H(),k=v(()=>R),g=v(()=>new me(Number(e.balance)).div(2)),p=he(ae,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function T(){this.$emit("onSelect")}const y=n=>{const h=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(_==null?void 0:_.value)&&(_==null?void 0:_.value)}})?).*$`);n.target.value=n.target.value.replace(h,"$1")},I=oe(),c=v(()=>I),s=ne(),r=v(()=>s);let C={};z(()=>r.value.RATES,n=>{n&&(console.log(n,"price====>"),C=n)},{immediate:!0});const b=v(()=>(console.log(e.inputValue,"==>props.inputValue"),console.log(e.coinName,"===>props.coinName"),pe(Number(e.inputValue)*Number(C&&C[e.address]&&C[e.address].price),2))),B=v(()=>{var n,h,$;return console.log((n=r.value.tokensObj[e.address])==null?void 0:n.labels,"===> pool.value.tokensObj[props.address]?.labels"),r.value.tokensObj&&e.address&&r.value.tokensObj[e.address]&&((h=r.value.tokensObj[e.address])==null?void 0:h.labels)&&(($=r.value.tokensObj[e.address])==null?void 0:$.labels[0])}),_=v(()=>{var n;return r.value.tokensObj&&e.address&&r.value.tokensObj[e.address]&&((n=r.value.tokensObj[e.address])==null?void 0:n.decimals)}),V=v(()=>{var n,h;return e.coinIcon||((h=(n=r==null?void 0:r.value)==null?void 0:n.tokensObj[e.address])==null?void 0:h.logo_url)||(k.value.theme==="default"?L("/image/coins/unknown.png"):L("/image/coins/sui-unknown.png"))}),q=v(()=>r.value.tokensObj);return{currentIcon:V,tokensObj:q,pool:r,halfBalance:g,coinLabels:B,t:l,addCommom:M,store:k,wallet:c,indicator:p,inputChange:y,importIcon:L,selectCoin:T,amountPirce:b,coinDecimals:_}}});const je=e=>(de("data-v-380babac"),e=e(),re(),e),Ne={class:"card"},Be={class:"top"},De={key:1,class:"input-div"},Me={key:0},Pe={class:"loading-token"},Re=["src"],Ve={key:0},Fe=je(()=>t("use",{"xlink:href":"#icon-icon_on"},null,-1)),ze=[Fe],Ee={class:"bottom"},Ze={key:0,class:"amount-price"},qe={key:1},Ue={class:"top"},We={class:"right"},He={class:"balance"};function Ke(e,d,l,Z,R,k){const g=ke,p=ie,T=_e,y=ee,I=fe,c=ge;return a(),i("div",Ne,[t("div",Be,[e.inputDisabled?(a(),i("div",De,[e.inputValue?(a(),i("span",Me,m(e.inputValue),1)):(a(),A(p,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(a(),A(g,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:d[0]||(d[0]=s=>e.$emit("onInput",s.target.value)),onFocus:d[1]||(d[1]=s=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),t("div",{class:E(["left",e.hasArrow?"":"nohands"]),onClick:d[2]||(d[2]=s=>e.hasArrow&&!e.pool.isTokenLoading?e.selectCoin():"")},[t("div",Pe,[e.pool.isTokenLoading?(a(),A(T,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):(a(),i("img",{key:1,src:e.currentIcon},null,8,Re)),j(y,{address:e.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),j(I,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:f(()=>[t("div",null,[t("p",null,m(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(a(),i("p",Ve,m(e.coinLabels),1)):N("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(a(),i("svg",{key:0,class:E(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},ze,2)):N("",!0)],2)]),t("div",Ee,[e.inputValue&&e.amountPirce!="--"?(a(),i("div",Ze," $"+m(e.amountPirce),1)):(a(),i("div",qe)),t("div",Ue,[t("div",We,[F(m(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),t("span",He,m(e.wallet.connected?("addCommom"in e?e.addCommom:S(M))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(a(),A(c,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:S(M))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:d[3]||(d[3]=s=>e.$emit("onHalf"))},{default:f(()=>[F(m("Half"))]),_:1},8,["disabled"])):N("",!0),e.havemax&&e.wallet.connected?(a(),A(c,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:S(M))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:d[4]||(d[4]=s=>e.$emit("onMax"))},{default:f(()=>[F(m(e.$t("button.max")),1)]),_:1},8,["disabled"])):N("",!0)])])])])}const Ro=le(Ae,[["render",Ke],["__scopeId","data-v-380babac"]]);const Je=se({components:{Modal:ye,LoadingOutlined:ae},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""}},setup(e,d){const{t:l,locale:Z}=te(),R=oe(),k=v(()=>R),g=ne(),p=v(()=>g),T=H(),y=v(()=>T),I=D([l("tab.all"),l("tab.native"),l("tab.layerZero"),l("tab.wormhole"),l("tab.celer")]),c=D(l("tab.all")),s=D(l("tab.all")),r=H(),C=v(()=>r.chainName),b=D([]);console.log(b,"===>tokenList");const B=D(null);Ce(()=>{});const _=D(!1);z(c,n=>{n!==l("tab.all")&&(_.value=!1),n==l("tab.all")?s.value=l("tab.all"):n==l("tab.layerZero")?s.value=l("tab.layerZero"):n==l("tab.wormhole")?s.value=l("tab.wormhole"):n==l("tab.celer")?s.value=l("tab.celer"):n==l("tab.native")&&(s.value=l("tab.native")),V(B.value)});const V=async n=>{var K,J,G,Q,X;let h=[],$=p.value.tokens;if(!(y.value.chainName&&$&&$[0]&&y.value.chainName.toLowerCase().includes((K=$[0])==null?void 0:K.chain))){b.value=[],console.log("执行");return}let U=$;if(n&&n.split("::")&&n.split("::").length==3&&C.value=="Sui"){const u=ve("Sui");try{const o=p.value.tokensObj[n]||await u.getTokenBySymbol(p.value.tokens,n);o&&((J=$.filter(w=>(w==null?void 0:w.address)===(o==null?void 0:o.address)))==null?void 0:J.length)<1&&(g.setNewTokens({[n]:o}),U=$.concat(o))}catch(o){console.log("searchToken##err##",o)}}for(const u of Object.keys(U)){let o=$e(U[u]);const w=k.value.assets[o.address]&&k.value.assets[o.address].balance?be(k.value.assets&&k.value.assets[o.address].balance,o.decimals):0;e.lastSelectCoin&&o&&o.address===e.lastSelectCoin?o.unusable=!0:o.unusable=!1;const ue=((G=p.value.tokensObj[o.address])==null?void 0:G.labels)&&((Q=p.value.tokensObj[o.address])==null?void 0:Q.labels[0]),ce=p.value.tokensObj[o.address]?(X=p.value.tokensObj[o.address])==null?void 0:X.name:o.name;o={...o,balance:w,labels:ue,name:ce,sort:o.symbol=="APT"||o.symbol=="SUI"?1:-1},h.push(o)}let O;if(k.value.address?O=h.sort((u,o)=>u.symbol.charCodeAt(0)-o.symbol.charCodeAt(0)).sort((u,o)=>o.balance-u.balance):O=h.sort((u,o)=>u.symbol.charCodeAt(0)-o.symbol.charCodeAt(0)),n){console.log(O,"sortResult=====>");const u=O.filter(o=>o.symbol.toLowerCase().indexOf(n.toLowerCase())!==-1||o.address.toLowerCase().indexOf(n.toLowerCase())!==-1);if(console.log(u,"===>result"),c.value!==l("tab.all")){const o=u.filter(w=>c.value==l("tab.native")?!w.labels:w.labels&&w.labels.toLowerCase()==c.value.toLowerCase());b.value=o}else b.value=u}else if(console.log(c.value,"===>currentTab.value"),c.value!==l("tab.all")){const u=O.filter(o=>(console.log(o.labels&&o.labels.toLowerCase(),"====>ele.labels"),console.log(c.value.toLowerCase(),"currentTab.value.toLowerCase()"),c.value==l("tab.native")?!o.labels:o.labels&&o.labels.toLowerCase()==c.value.toLowerCase()));b.value=u}else console.log(O,"===>sortResult"),b.value=O;b.value=b.value.sort((u,o)=>o.sort-u.sort).sort((u,o)=>o.unusable-u.unusable),console.log(b.value,"tokenList.value===>322")},q=n=>{d.emit("onSelect",n),d.emit("onClose")};return z(()=>[B.value,_.value],([n,h])=>{console.log(n,"===>keyword"),V(n)},{immediate:!0}),z(()=>p.value.tokens,n=>{n&&(console.log(p.value.tokens,"===>pools.value.tokens"),V(B.value))},{immediate:!0}),{pools:p,t:l,chainName:C,tabList:I,currentTab:c,addCommom:M,tokenList:b,importIcon:L,keyword:B,wallet:k,toSelect:q,store:y,isShowAll:_}}}),Ge=""+globalThis.__publicAssetsURL("image/warning@2x.png");const P=e=>(de("data-v-3470f62d"),e=e(),re(),e),Qe=P(()=>t("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Xe={class:"coin-select-modal"},Ye={class:"search-input"},xe=["placeholder"],eo=P(()=>t("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),oo=[eo],no={key:0,class:"tab-list"},so=["onClick"],to={class:"item"},ao=P(()=>t("div",{class:"line"},null,-1)),lo={class:"coin-list-box"},io={key:0,class:"coin-list"},ro=["onClick"],uo={class:"left"},co=["src"],mo=["src"],po={class:"name-box"},vo=P(()=>t("img",{src:Ge,alt:""},null,-1)),bo={class:"balance-box"},ho={class:"balance"},ko={key:0},_o={key:1},fo={key:2},go=P(()=>t("p",null,null,-1)),yo={key:1,class:"no-data"},Co={key:0,class:"token-loading"},$o={key:1,class:"no-data-content"},wo={key:0,src:Ie},So={key:1,src:Oe},Lo=P(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-information"})],-1));function To(e,d,l,Z,R,k){const g=Le,p=W("loading-outlined"),T=Te,y=ie,I=W("vue-scroll"),c=W("Modal");return a(),A(c,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:d[2]||(d[2]=s=>e.$emit("onClose"))},{closeIcon:f(()=>[Qe]),default:f(()=>[t("div",Xe,[t("div",Ye,[we(t("input",{"onUpdate:modelValue":d[0]||(d[0]=s=>e.keyword=s),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,xe),[[Se,e.keyword]]),e.keyword?(a(),i("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:d[1]||(d[1]=s=>e.keyword="")},oo)):N("",!0)]),e.chainName!=="Sui"?(a(),i("div",no,[(a(!0),i(Y,null,x(e.tabList,(s,r)=>(a(),i("div",{key:r,class:E(["item-container",e.currentTab==s?"item-container-active item-container":"item-container"]),onClick:C=>e.currentTab=s},[t("div",to,m(s),1)],10,so))),128))])):N("",!0),ao,t("div",lo,[j(I,null,{default:f(()=>[e.tokenList&&e.tokenList.length>0?(a(),i("ul",io,[(a(!0),i(Y,null,x(e.tokenList,(s,r)=>(a(),i("li",{key:r,class:E(s.unusable?"unusable":""),onClick:C=>e.toSelect(s)},[t("div",uo,[s.isChinaToken?(a(),i("img",{key:1,src:e.store.theme=="default"?("importIcon"in e?e.importIcon:S(L))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:S(L))("/image/coins/sui-unknown.png"),alt:""},null,8,mo)):(a(),i("img",{key:0,src:s.icon||s.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:S(L))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:S(L))("/image/coins/sui-unknown.png"))},null,8,co)),t("div",po,[t("span",null,[F(m(s.symbol)+" ",1),s.isSelfBuilt?(a(),A(g,{key:0,placement:"right","arrow-point-at-center":""},{title:f(()=>[t("span",null,m(e.t("newAdd.notCetusTokenList")),1)]),default:f(()=>[vo]),_:1})):N("",!0)]),t("p",null,m(s.name)+" "+m(s.labels?`(${s.labels})`:""),1)])]),t("div",bo,[t("div",ho,[e.wallet.loading?(a(),i("div",ko,[j(T,null,{default:f(()=>[j(p)]),_:1})])):s.balance&&e.wallet.connected?(a(),i("div",_o,m(("addCommom"in e?e.addCommom:S(M))(s.balance,s.decimals)),1)):(a(),i("div",fo,"0"))]),go])],10,ro))),128))])):(a(),i("div",yo,[e.pools.isTokenLoading?(a(),i("div",Co,[j(y)])):(a(),i("div",$o,[e.store.theme=="default"?(a(),i("img",wo)):(a(),i("img",So)),t("p",null,m(e.t("newAdd.noTokensFound")),1),t("div",null,[F(m(e.t("newAdd.enterCoinType"))+" ",1),j(g,{placement:"bottom","arrow-point-at-center":""},{title:f(()=>[t("span",null,m(e.t("newAdd.uniqueIdOfCoin")),1)]),default:f(()=>[Lo]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const Vo=le(Je,[["render",To],["__scopeId","data-v-3470f62d"]]);export{Ro as _,Vo as a};
