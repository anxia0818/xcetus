import{_ as _t}from"./back.9ab91185.js";import{_ as Ft,a as jt}from"./token-warning-modal.903cdfc7.js";import{_ as Dt}from"./swap-setting.5b94c21b.js";import{u as co,c as bn,a as Et}from"./sha256.17d9d07c.js";import{u as on,c as fo,D as h,a as Ln,d as Ne,b as en,n as An,e as De,t as Tn,g as Nn,p as tt,s as Yo,f as So,h as at}from"./pool.39b085dc.js";import{a as vo,r as g,y as kn,C as Ht,m as z,D as ke,b as qn,e as po,o as s,f as m,h as a,v as c,i as se,z as be,c as de,x as P,p as Fo,k as jo,q as hn,t as ao,j as Be,I as vt,E as pt,w as Ae,S as mt,u as ie,B as Mn,G as Wt,H as it,F as Ao,s as xo,J as ft,M as gt,K as bt,l as zt,L as Sn,N as Xt}from"./entry.867de514.js";import{i as Xe}from"./import-icon.de3e6c66.js";import{_ as Vt}from"./assets-card.0d6751de.js";import{s as gn,m as Kt,l as Zt,b as Gt,a as Jt,_ as lt,c as st,d as Qt}from"./icon-Add-Liquidity_2x.eed0ddb0.js";import{_ as Yt,a as xt,b as ea,c as oa}from"./new-add-or-create.6f96f001.js";import{_ as na}from"./network-tips.e448a1f7.js";/* empty css              *//* empty css              */import{_ as ta}from"./apr-tab.0ad67ebf.js";import{_ as aa}from"./token-warning.34b134c7.js";import{_ as ia}from"./apr-tips.3df314df.js";/* empty css              */import{p as la}from"./precision.a7a6c57b.js";import{_ as sa}from"./coin-select.aa91df8c.js";import{_ as ra}from"./status-block.c2f0b43d.js";import{_ as kt}from"./icon-arrow_2x.948aedb2.js";import{_ as ht}from"./icon-arrow_2x.4ffddb8e.js";/* empty css              */import{u as ua}from"./notifi.f37e64b8.js";import{_ as Ct}from"./icon-selected_3x.09e9a6f0.js";/* empty css              *//* empty css              */import"./index.10bcd58a.js";import"./img-no-Positions_2x.1205bf45.js";import"./img-no-Positions_2x.70236ea6.js";import"./useWhale.72858778.js";import"./index.8dfcb59b.js";const da=vo({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,n){const B=g(!1),_=g(null),O=g(0),Q=g(20),H=on(),ne=co(),W=g(!1);kn(()=>{}),Ht(()=>{clearInterval(_.value)});const X=()=>{_.value=setInterval(()=>{var T;W.value||O.value<Q.value&&(O.value+=1,O.value===Q.value&&((T=e==null?void 0:e.poolInfo)!=null&&T.poolAddress&&H.updateCurrentPools(e.poolInfo.poolAddress,ne.chainName),O.value=0))},1e3)},V=z(()=>ne.slippage),Z=()=>{n.emit("clearAll")},ee=()=>{O.value=0,n.emit("clickRefresh")};ke(()=>e.poolInfo,T=>{T&&!_.value&&X()},{immediate:!0});const he=qn();return{clickRefresh:ee,isShowSwapSetting:B,countdown:O,autoRefreshTime:Q,slippage:V,clearAll:Z,checkNullObj:fo,router:he}}});const ca=e=>(Fo("data-v-f484e6e0"),e=e(),jo(),e),va={class:"title"},pa={class:"left"},ma=ca(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),fa={class:"deposit-progress"};function ga(e,n,B,_,O,Q){var W,X;const H=Ft,ne=Dt;return s(),m("div",va,[a("div",pa,[a("span",null,c(e.poolInfo?e.$t("common.concentratedLiquidity"):(X=(W=e.$route)==null?void 0:W.query)!=null&&X.action?e.$t("newAdd.createClmmPool"):e.$t("common.concentratedLiquidity")),1)]),a("div",{class:be(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[a("div",{class:"slippage-icon",onClick:n[0]||(n[0]=V=>e.isShowSwapSetting=!0)},[ma,a("span",null,c(e.slippage)+"%",1)]),a("div",fa,[se(H,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])],2),e.isShowSwapSetting?(s(),de(ne,{key:0,onOnClose:n[1]||(n[1]=V=>e.isShowSwapSetting=!1)})):P("",!0)])}const ba=po(da,[["render",ga],["__scopeId","data-v-f484e6e0"]]);const ka=vo({props:{coinIcon:{type:String,default:""},coin:{type:Object,default:()=>({})}},setup(e){const n=co(),B=z(()=>n),_=g(""),O=g(""),Q=g(""),H=on(),ne=z(()=>H);ke(()=>[e.coin,ne.value.tokensObj],([X,V])=>{var Z;X?(O.value=V&&V[X.address]&&((Z=V[X.address])==null?void 0:Z.labels),_.value=X.name,Q.value=X.symbol):(O.value="",_.value="",Q.value="")},{immediate:!0,deep:!0});const W=z(()=>{var X,V,Z;return e.coinIcon||((Z=(V=ne==null?void 0:ne.value)==null?void 0:V.tokensObj[(X=e.coin)==null?void 0:X.address])==null?void 0:Z.logo_url)||(B.value.theme==="default"?Xe("/image/coins/unknown.png"):Xe("/image/coins/sui-unknown.png"))});return{store:B,importIcon:Xe,coinName:_,coinLabels:O,coinSymbol:Q,currentIcon:W}}}),ha=e=>(Fo("data-v-d0bce36a"),e=e(),jo(),e),Ca={class:"coin-block"},ya={class:"coin-info"},wa={class:"symbol"},Pa={key:0,class:"name"},Ia={key:0,class:"label"},$a=ha(()=>a("div",null,[a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon_on"})])],-1));function Ta(e,n,B,_,O,Q){const H=hn("image");return s(),m("div",Ca,[a("div",null,[ao(a("img",null,null,512),[[H,e.currentIcon]]),a("div",ya,[a("div",wa,c(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinName?(s(),m("div",Pa,[Be(c(e.coin.name)+" ",1),e.store.theme=="default"?(s(),m("span",Ia,c(e.coinLabels?`(${e.coinLabels})`:""),1)):P("",!0)])):P("",!0)])]),$a])}const Sa=po(ka,[["render",Ta],["__scopeId","data-v-d0bce36a"]]),Aa=vo({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})},showfromCoinLock:{type:Boolean,default:!1},showtoCoinLock:{type:Boolean,default:!1}},setup(){const e=co();return{storeIndex:z(()=>e)}}});const Na={class:"create-pool-lock"},La={key:0,src:Yt,alt:""},qa={key:1,src:xt,alt:""};function Ma(e,n,B,_,O,Q){return s(),m("div",Na,[a("div",null,[e.storeIndex.theme=="default"?(s(),m("img",La)):(s(),m("img",qa))])])}const Ra=po(Aa,[["render",Ma],["__scopeId","data-v-5d070e17"]]),Ua=vo({props:{clickClear:{type:Boolean,default:!1},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},intPrice:{type:String,default:""}},setup(e,n){const B=g("");return{inpValue:B,changecurrentPrice:O=>{var H;console.log(O.target.value,"e.target.value"),console.log((H=e.fromCoin)==null?void 0:H.decimals,"==>props.fromCoin?.decimals");const Q=new RegExp("[^\\d-]*(\\d*(?:\\.\\d*)?).*$");O.target.value=O.target.value.replace(Q,"$1"),B.value=O.target.value,console.log(B.value,"===>inpValue.value"),n.emit("changecurrentPrice",B.value)}}}});const Oa={class:"set-init-price"},Ba={class:"init-price-tips"};function _a(e,n,B,_,O,Q){var ne,W,X,V;const H=vt;return s(),m("div",Oa,[se(H,{type:"text",placeholder:"0.0",value:e.intPrice,disabled:!((W=(ne=e.$route)==null?void 0:ne.query)!=null&&W.fee),onChange:e.changecurrentPrice},null,8,["value","disabled","onChange"]),a("div",Ba,c((X=e.toCoin)==null?void 0:X.symbol)+" per "+c((V=e.fromCoin)==null?void 0:V.symbol),1)])}const Fa=po(Ua,[["render",_a],["__scopeId","data-v-9e71be9e"]]),ja=-443636;function rt(e,n){const B=Da(e),_=(B-ja)%n;return _>n/2?B-_+n:B-_}const yt=new h("1.0001");function Da(e){return e.log(yt).toDP(0,h.ROUND_HALF_UP).toNumber()}function ut(e){return yt.pow(e)}const Ea=vo({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},emits:["onInput"],setup(e,n){const B=g(""),_=g("");let O=g(""),Q=g("");const H=pt(),ne=co(),W=z(()=>ne),X=z(()=>W.value.chainName?Ln(W.value.chainName):{}),V=()=>{if(!(Number.isNaN(B.value)||Number(B.value)!==0&&!B.value||!e.poolInfo.tickSpacing))try{const f=rt(new h(B.value.toString()),Number(T.value.tickSpacing)),j=ut(f+Number(T.value.tickSpacing));if(e.pType=="Min"&&Number(j.toString())>=Number(Q.value.toString()))return;const w=j.toString();n.emit("onInput",w)}catch{n.emit("onInput","")}},Z=()=>{try{if(Number.isNaN(B.value)||!B.value||!e.poolInfo.tickSpacing)return;const f=rt(new h(B.value),Number(T.value.tickSpacing)),j=ut(f-Number(T.value.tickSpacing)),w=j.toString();if(e.pType=="Max"&&Number(j)<=Number(O.value))return;n.emit("onInput",w)}catch{n.emit("onInput","")}},ee=f=>{let j=f.toString().replace(/[^\d.]/g,"");const w=/^\d+(\.\d+)?$/;j.split(".").length>2&&!w.exec(j)&&(j=j.substr(0,j.length-1)),_.value=String(j),console.log(j,"v===>")},he=f=>{var K,ce,Se,me;const{TickUtil:j,TickMath:w,getNearestTickByTick:k}=X.value;console.log("0519###onBlur###event###",f);const l=f.target.value;console.log("0519###onBlur###value###",l);let v;if(l==="0"){v=-443636,n.emit("onInput","0");return}else{const D=w.priceToTickIndex(new h(l),(K=T.value.token_a)==null?void 0:K.decimals,(ce=T.value.token_b)==null?void 0:ce.decimals);console.log("0519###onBlur###t###",D),v=k(Number(D),Number(T.value.tickSpacing))}console.log("0519###onBlur###tick###",v);const L=w.tickIndexToPrice(new h(v),(Se=T.value.token_a)==null?void 0:Se.decimals,(me=T.value.token_b)==null?void 0:me.decimals);console.log("0519###onBlur###price###",L.toString()),n.emit("onInput",L.toString())};ke(()=>e.defaultMinPrice,(f,j)=>{f!==j&&(console.log(e.defaultMinPrice,"props.defaultMinPrice===>"),O.value=e.defaultMinPrice,console.log(O.value,"props.minPrice.value===>"))},{immediate:!0}),ke(()=>e.defaultMaxPrice,(f,j)=>{f!==j&&(Q.value=e.defaultMaxPrice)},{immediate:!0}),ke(()=>_.value,f=>{console.log(f,"=sdajlaksjdkldas")},{immediate:!0}),ke(()=>[e.inputValue,H.query.action],([f])=>{if(console.log(f,"==>newValue"),f&&f!=="0"&&f!=="∞"){B.value=f;const w=f.toString().split(".")[1];_.value=f!=="0"&&f!=="∞"&&w&&w.length>6?Ne(f.toString(),6):f.toString()}else(f=="0"||f=="∞"||H.query.action)&&(_.value=f);console.log(_.value,"===> oValue.value")},{immediate:!0});const T=g({});ke(()=>e.poolInfo,(f,j)=>{f&&(T.value=f)},{immediate:!0});const _e=g("");return ke(()=>e.currentPriceTab,f=>{_e.value=f},{immediate:!0}),console.log(e,"props=======>"),{addPrice:V,minusPrice:Z,oValue:_,changeValue:ee,isDisabled:_e,route:H,onBlur:he}}});const Ha={class:"set-price-item"},Wa={class:"title"},za={class:"input-box"},Xa={class:"minus-btn"},Va=["disabled"],Ka={class:"plus-btn"};function Za(e,n,B,_,O,Q){const H=vt,ne=mt;return s(),m("div",Ha,[a("div",Wa,c(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),se(ne,{loading:e.loading,active:"",paragraph:!1},{default:Ae(()=>[a("div",za,[a("a",Xa,[a("div",{class:be(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:n[0]||(n[0]=(...W)=>e.minusPrice&&e.minusPrice(...W))},null,10,Va)]),se(H,{id:"pValu",value:e.oValue,"onUpdate:value":n[1]||(n[1]=W=>e.oValue=W),disabled:e.route.query.action&&!e.intPrice,autocomplete:"off",placeholder:"0",onChange:n[2]||(n[2]=W=>e.changeValue(W.target.value)),onBlur:n[3]||(n[3]=W=>e.onBlur(W))},null,8,["value","disabled"]),a("a",Ka,[a("div",{class:be(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"addDis":"add"),onClick:n[4]||(n[4]=(...W)=>e.addPrice&&e.addPrice(...W))},null,2)])])]),_:1},8,["loading"]),a("p",{class:be(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},c(e.toCoin&&e.toCoin.symbol)+" per "+c(e.fromCoin&&e.fromCoin.symbol),3)])}const dt=po(Ea,[["render",Za],["__scopeId","data-v-782725c6"]]),Ga=vo({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},setup(e,n){let B=g(""),_=g(""),O=g(),Q=g(!1),H=g(!1);const ne=g({}),W=co(),X=z(()=>W);kn(()=>{B.value=e.min,_.value=e.max}),ke(()=>e.currentPriceTab,(f,j)=>{f!==j&&(O.value=e.currentPriceTab)},{immediate:!0}),ke(()=>e.min,(f,j)=>{f!==j&&(B.value=f,console.log(e.min,"===> props.min"))}),ke(()=>e.max,(f,j)=>{f!==j&&(_.value=f)}),ke(()=>e.poolInfo,(f,j)=>{f&&(ne.value=f)},{immediate:!0});const V=g("");ke(()=>e.intPrice,f=>{console.log(e.intPrice,"===>props.intPrice"),V.value=f},{immediate:!0,deep:!0});const Z=f=>{console.log(f,"val===>123"),B.value=f,n.emit("onChangeMinPrice",f)},ee=f=>{_.value=f,n.emit("onChangeMaxPrice",f)};ke(Q,(f,j)=>{f!==j&&n.emit("onChangeFullRange",f)});const he=()=>{B.value=e.defaultMinPrice,_.value=e.defaultMaxPrice,H.value=!1,Q.value=!1},T=()=>{H.value=!1,B.value="0",_.value="∞"};return ke(Q,(f,j)=>{f!==j&&n.emit("onChangeFullRange",f)}),{store:X,changeMinPrice:Z,changeMaxPrice:ee,importIcon:Xe,resetPrice:he,changeShowUnderStand:()=>{Q.value=!Q.value,Q.value?H.value=!0:he(),H.value||(B.value=e.defaultMinPrice,_.value=e.defaultMaxPrice)},showUnderStand:H,minPrice:B,maxPrice:_,understand:T,isRadio:Q,initPirce:V}}});const Ja={class:"set-price"},Qa={class:"card-container"},Ya={key:0,class:"card"},xa=["src"],ei={key:1,class:"understand"},oi={class:"left"},ni={class:"right"};function ti(e,n,B,_,O,Q){const H=dt,ne=dt,W=Mn;return s(),m("div",Ja,[a("div",Qa,[e.showUnderStand?(s(),m("div",ei,[a("div",oi,[a("p",null,c(e.$t("common.lowerEfficiency")),1),a("p",null,c(e.$t("common.lowerEfficiencyTips")),1)]),a("div",ni,[se(W,{onClick:e.understand},{default:Ae(()=>[Be(c(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(s(),m("div",Ya,[se(H,{value:e.minPrice,"onUpdate:value":n[0]||(n[0]=X=>e.minPrice=X),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,"int-price":e.initPirce,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","int-price","onOnInput","onAddValue","onDelValue"]),se(ne,{value:e.maxPrice,"onUpdate:value":n[1]||(n[1]=X=>e.maxPrice=X),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"int-price":e.initPirce,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","int-price","current-price-tab","onOnInput","onAddValue","onDelValue"]),a("img",{src:("importIcon"in e?e.importIcon:ie(Xe))("/image/lmg-line@2x.png"),alt:""},null,8,xa)]))])])}const ai=po(Ga,[["render",ti],["__scopeId","data-v-d07618c3"]]);function ct(e,n,B){const _=new h(10).pow(n-B);return new h(1.0001).pow(e).mul(_)}const ii=vo({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""}},setup(e,n){const B=g(1),_=g(""),O=g(""),Q=z(()=>{var l,v,L;return Z.sqrtPriceX64ToPrice((l=e.poolInfo)==null?void 0:l.current_sqrt_price,(v=e.poolInfo)==null?void 0:v.coinA.decimals,(L=e.poolInfo)==null?void 0:L.coinB.decimals).toString()}),H=z(()=>{let l=0;return e.direction?l=(Number(e.minPrice)/Number(Q.value)-1)*100:l=(Number(e.minPrice)/Number(1/Number(Q.value))-1)*100,l=l>0&&l<.1?.1:l,l=l<0&&l>-.1?-.1:l,l}),ne=z(()=>{let l=0;return e.direction?l=(Number(e.maxPrice)/Number(Q.value)-1)*100:l=(Number(e.maxPrice)/Number(1/Number(Q.value))-1)*100,l=l>0&&l<.1?.1:l,l=l<0&&l>-.1?-.1:l,l}),W=co(),X=z(()=>W),V=z(()=>X.value.chainName?Ln(X.value.chainName):{}),{TickMath:Z,getNearestTickByTick:ee}=V.value,he=()=>{const l=B.value/2;B.value=l,f(e.poolInfo,l)},T=()=>{const l=B.value*2;B.value=l,f(e.poolInfo,l)},_e=(l=[])=>{let v=6;const L=Math.abs(Number(l[0])-Number(l[l.length-1]));return L>=6?v=0:L>=1?v=1:L>=.1?v=2:L>=.01?v=3:L>=.001?v=4:L>=1e-4?v=5:L>=1e-5?v=6:L>=1e-6?v=7:L>=1e-7&&(v=8),v},f=(l,v=1)=>{if(l&&l.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){console.log(e.poolInfo,"==>props.poolInfo");const L=Number(e.poolInfo.current_tick_index);console.log("0117###dataProcessing###currentTick###",L),console.log("0117###dataProcessing###props.poolInfo###",e.poolInfo),console.log("0117###dataProcessing###minPrice###",e.minPrice),console.log("0117###dataProcessing###maxPrice###",e.maxPrice),console.log("0117###dataProcessing###poolInfo###",e.poolInfo);let K=L+100*v,ce=L-100*v,Se,me;if(e.maxPrice==="∞")me=V.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?me=Z.priceToTickIndex(new h(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):me=Z.priceToTickIndex(new h(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{me=443636}if(e.minPrice==="0")Se=V.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?Se=Z.priceToTickIndex(new h(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):Se=Z.priceToTickIndex(new h(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{Se=-443636}let D=0;if(e.currentPriceTab!=="full range"){if(L>=Se&&L<=me){const oe=L-Se,q=me-L;D=Math.max(Math.abs(oe),Math.abs(q))}else L<Se?D=Math.abs(me-L):D=Math.abs(L-Se);K=L+D+100*v,ce=L-D-100*v,console.log(v,L,"===>zooms")}else{const oe=(Math.abs(L)>5e3,2e4);K=L+oe*v,ce=L-oe*v}ce<-443636&&(ce=-443636),K>443636&&(K=443636),console.log(ce,K,"===>201");const le=new h(l.liquidity).div(Math.pow(10,8)).toString();console.log(le,"==>currentLiquity");const G=e.tickList;console.log("0117####drawChart####tick_info_array####",G);const ae=[],Fe=[];let Y={};for(let oe=0;oe<G.length;oe++){if(Y=G[oe],Y.index<=L&&Y.index>=ce){if(ae.length<1&&oe!==0){const q=G[oe-1];ae.unshift({...q,index:ce})}ae.unshift(Y)}else if(Y.index>L&&Y.index<=K&&(Fe.push(Y),ae.length<1&&oe!==0)){const q=G[oe-1];ae.push({...q,index:ce})}if(Y.index>K){const q=G[oe];if(Fe.push({...q,index:K}),ae.length<1&&oe!==0){const Po=G[oe-1];ae.push({...Po,index:ce})}break}}console.log(L,ce,K,"===>currentTick");let Ie="0";for(let oe=ae.length-1;oe>=0;oe--)Ie=new h(Ie).plus(new h(ae[oe].liquidityNet.toString()).div(Math.pow(10,8))).toString(),ae[oe].liquityAmount=Ie;let ve=le;for(let oe=0;oe<Fe.length;oe++)ve=new h(ve).plus(new h(Fe[oe].liquidityNet.toString()).div(Math.pow(10,8))).toString(),Fe[oe].liquityAmount=ve;console.log(ae.length,Fe.length,"leftArray");let Le=[];const re=G&&G.length>0?{index:L,liquityAmount:Number(le)}:{index:L,liquityAmount:0};(ae.length>0||Fe.length>0)&&(console.log([re,...Fe],"279===>"),Le=[...ae.reverse(),re,...Fe],e.direction||(Le=Le.reverse()));const Ve=[];G.forEach(oe=>{Ve.push({...oe,liquidityGross:oe.liquidityGross.toString(),liquidityNet:oe.liquidityNet.toString()})}),console.log("0117####drawChart####testTickInfoArray####",Ve),console.log("0117####drawChart####currentLiquity####",le),console.log(Le,"===>chartData"),w(Le,ce,K,Se,me,L)}};let j=g(!1);kn(()=>{document.body.clientWidth<750?j.value=!1:j.value=!0,window.onresize=()=>{document.body.clientWidth<750?j.value=!1:j.value=!0,f(e.poolInfo,B.value)}});const w=(l,v,L,K,ce,Se)=>{console.log("0117####drawChart####chartData####",l),console.log("0117####drawChart####tickMin####",v),console.log("0117####drawChart####tickMax####",L),console.log("0117####drawChart####minPriceTick####",K),console.log("0117####drawChart####maxPriceTick####",ce),console.log("0117####drawChart####currentTick####",Se),console.log("0117####drawChart####props.direction####",e.direction),console.log("0518###newd3###props.before7dContractPriceLowest###",e.before7dContractPriceLowest),console.log("0518###newd3###props.before7dContractPriceHighest###",e.before7dContractPriceHighest);let me,D;e.direction?(me=e.before7dContractPriceLowest&&Number(e.before7dContractPriceLowest)>0?Z.priceToTickIndex(new h(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",D=e.before7dContractPriceHighest&&Number(e.before7dContractPriceHighest)>0?Z.priceToTickIndex(new h(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(me=e.before7dContractPriceLowest&&Number(e.before7dContractPriceLowest)>0?Z.priceToTickIndex(new h(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",D=e.before7dContractPriceHighest&&Number(e.before7dContractPriceHighest)>0?Z.priceToTickIndex(new h(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const le={top:30,right:35,bottom:20,left:55};let G,ae;j.value?(G=460-le.left-le.right,ae=205-le.top-le.bottom):(G=340-le.left-le.right,ae=205-le.top-le.bottom);const Fe=L-v,Y=parseInt(String(Fe/4));let Ie=[v+Y/4,v+Y,v+2*Y,L-Y,L-Y/4];const ve=v,Le=L,re=G/(Le-ve);e.currentPriceTab==="full range"&&(Ie=[v,v+2*Y,L]),console.log("0117####drawChart####xArr####",Ie),console.log("0117####drawChart####utickMin####",ve),console.log("0117####drawChart####utickMax####",Le),console.log("0117####drawChart####unit####",re);const Ve=Ie.map(M=>e.direction?ct(M,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new h(1).div(ct(M,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),oe=_e(Ve);gn("#chart").selectAll("*").remove();const q=gn("#chart").attr("width",G+le.left+le.right).attr("height",ae+le.top+le.bottom).append("g").attr("transform",`translate(${le.left},${le.right})`),Po=Kt(l,function(M){return Number(Math.abs(M.liquityAmount))})||0,N=Zt().range([0,ae]).domain([Po,0]);Gt().rangeRound([0,G]).padding(.1);const No=q.append("g").attr("id","barsBox").selectAll("rect").data(l).enter().append("rect");X.value.theme=="default"?No.attr("x",function(M,I){return I===0?0:e.direction?Math.abs(M.index-ve)*re:Math.abs(Le-M.index)*re}).attr("y",function(M,I){return e.direction?I===l.length-1?0:N(M.liquityAmount):I===l.length-1?0:N(l[I+1].liquityAmount)}).attr("width",function(M,I){return I===0&&l.length===1&&M.liquityAmount>0?G:(e.direction,I!==l.length-1?Math.abs(l[I+1].index-M.index)*re:0)}).attr("height",function(M,I){return I===0&&l.length===1&&M.liquityAmount>0?ae:e.direction?I===l.length-1?0:ae-N(M.liquityAmount):I===l.length-1?0:ae-N(l[I+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):No.attr("x",function(M,I){return I===0?0:e.direction?Math.abs(M.index-ve)*re:Math.abs(Le-M.index)*re}).attr("y",function(M,I){return e.direction?I===l.length-1?0:N(Math.abs(M.liquityAmount)):I===l.length-1?0:N(Math.abs(l[I+1].liquityAmount))}).attr("width",function(M,I){return I===0&&l.length===1&&M.liquityAmount>0?G:(e.direction,I!==l.length-1?Math.abs(l[I+1].index-M.index)*re:0)}).attr("height",function(M,I){if(I===0&&l.length===1&&M.liquityAmount>0)return ae;if(e.direction)return I===l.length-1?0:Number(M.liquityAmount)?ae-N(Math.abs(M.liquityAmount)):0;{if(I===l.length-1)return 0;const Ke=ae-N(Math.abs(l[I+1].liquityAmount));return Number(l[I+1].liquityAmount)?Ke:0}}).attr("fill","#407497").attr("class","bars").attr("stroke-width",1).attr("stroke","#407497");const Lo=q.append("g");Lo.append("line").attr("x1",0).attr("y1",155).attr("x2",G).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const go=Lo.append("g");let Io=0;if(e.direction){for(let M=0;M<Ie.length;M++){const I=Ne(Ve[M],oe)||"0";console.log("0423####price####",I),Ve.push(I);const Ke=Math.abs(Ie[M]-ve)*re;let Me=0;for(let Ce=0;Ce<I.length;Ce++)I[Ce]==="1"?Me+=4.02:I[Ce]==="."?Me+=2.64:I[Ce]==="7"?Me+=5.48:Me+=6;console.log(Ke,"x=>>>"),go.append("text").text(I).attr("x",Ke-Me/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}Io=Math.abs(Se-ve)*re}else{for(let M=Ie.length-1;M>=0;M--){const I=Ne(Ve[M],oe)||0;Ve.push(I);const Ke=Math.abs(Ie[M]-Le)*re;let Me=0;for(let Ce=0;Ce<I.length;Ce++)I[Ce]==="1"?Me+=4.02:I[Ce]==="."?Me+=2.64:I[Ce]==="7"?Me+=5.48:Me+=6;go.append("text").text(I).attr("x",Ke-Me/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}Io=Math.abs(Se-Le)*re}(X.value.theme=="default"?q.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):q.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+Io+", 0)");let Je,We,bo,ko;e.direction?(console.log("0525###d3###select###minPriceTick###",K),console.log("0525###d3###select###maxPriceTick###",ce),console.log("0525###d3###select###props.minPrice###",e.minPrice),console.log("0525###d3###select###props.maxPrice###",e.maxPrice),Je=K<ve?-100:parseInt(String(Math.abs(K-ve)*re)),We=ce<ve?-100:parseInt(String(Math.abs(ce-ve)*re)),bo=me<ve?-100:Math.abs(me-ve)*re,ko=D<ve?-100:Math.abs(D-ve)*re):(We=K<ve?-100:Math.abs(Le-K)*re,Je=ce<ve?-100:Math.abs(Le-ce)*re,ko=me<ve?-100:Math.abs(Le-me)*re,bo=D<ve?-100:Math.abs(Le-D)*re),e.minPrice==="0"&&(Je=0),e.maxPrice==="∞"&&(We=G),j.value?_.value=G-Je+60+"px":_.value=G-Je+52+"px",O.value=We+74+"px",me&&bo<G&&q.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+bo+", 0)"),D&&ko<G&&q.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+ko+", 0)");const Qe=q.append("g").attr("id","left-handle"),je=q.append("g").attr("id","right-handle");X.value.theme=="default"?(Qe.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Qe.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),Qe.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),Qe.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),je.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),je.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),je.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),je.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(Qe.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Qe.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),Qe.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),Qe.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),je.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),je.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),je.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),je.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),console.log("0525###d3###select###minPriceTickX###",Je),console.log("0525###d3###select###maxPriceTickX###",We),Qe.attr("transform","translate("+Je+", 0)"),je.attr("transform","translate("+We+", 0)");const qo=Jt().extent([[0,0],[G,ae]]).handleSize(30).on("end",Do);q.append("g").attr("class","brush").call(qo).call(qo.move,[Je,We]);function Do(M){if(!M.sourceEvent||!M.selection)return;Qe.attr("transform","translate("+M.selection[0]+", 0)"),je.attr("transform","translate("+M.selection[1]+", 0)"),j.value?_.value=G-M.selection[0]+60+"px":_.value=G-M.selection[0]+52+"px",O.value=M.selection[1]+74+"px";let I,Ke;console.log("0525###d3###select###e.selection[0]###",M.selection[0]),console.log("0525###d3###select###e.selection[0]###",M.selection[1]),console.log("0525###d3###select###props.direction###",e.direction),console.log("0525###d3###select###width###",G),console.log("0525###d3###select###unit###",re),console.log("0525###d3###select###utickMin###",ve),console.log("0525###d3###select###utickMax###",Le),console.log("0525###d3###select###props.poolInfo###",e.poolInfo);let Me=0,Ce=0;e.direction?(Me=ee(parseInt(String(M.selection[0]/re+ve)),Number(e.poolInfo.tickSpacing)),I=Z.tickIndexToPrice(Me,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),Ce=ee(parseInt(String(M.selection[1]/re+ve)),Number(e.poolInfo.tickSpacing)),Ke=Z.tickIndexToPrice(Ce,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),console.log("0525###d3###select###minTick###",Me),console.log("0525###d3###select###maxTick###",Ce),console.log("0525###d3###select###minPrice###",I),console.log("0525###d3###select###maxPrice###",Ke)):(Ce=ee(Le-M.selection[0]/re,Number(e.poolInfo.tickSpacing)),I=1/Z.tickIndexToPrice(Ce,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),Me=ee(Le-M.selection[1]/re,Number(e.poolInfo.tickSpacing)),Ke=1/Z.tickIndexToPrice(Me,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),n.emit("onChangeMinPrice",String(Ne(String(I),6))),n.emit("onChangeMaxPrice",String(Ne(String(Ke),6)))}X.value.theme=="default"?gn(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):gn(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632")};g(""),ke(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab],([l,v,L,K])=>{console.log(l,v,L,L>v,"poolInfo && minPrice && maxPrice && (maxPrice > minPrice)"),l&&v&&L&&f(l,B.value)},{immediate:!0});const k=g(!0);return ke(()=>e.chartLoading,(l,v)=>{l!==v&&(k.value=l)},{immediate:!0,deep:!0}),{store:X,loading:k,zoomOut:he,zoomIn:T,rangeSizeLower:H,rangeSizeUpper:ne,rangeSizeLowerPosition:_,rangeSizeUpperPosition:O,decimalFormat:en,numberformat:An}}});const li=e=>(Fo("data-v-beaf2b95"),e=e(),jo(),e),si={class:"chart-box"},ri={class:"chart"},ui={class:"zoom"},di=li(()=>a("svg",{id:"chart"},null,-1));function ci(e,n,B,_,O,Q){return s(),m("div",si,[ao(a("div",ri,[a("div",ui,[a("div",{class:"amplification",onClick:n[0]||(n[0]=(...H)=>e.zoomOut&&e.zoomOut(...H))}),a("div",{class:"narrow",onClick:n[1]||(n[1]=(...H)=>e.zoomIn&&e.zoomIn(...H))})]),e.currentPriceTab!=="full range"?(s(),m("div",{key:0,class:"range-size range-size-lower",style:it({right:e.rangeSizeLowerPosition})},c(("numberformat"in e?e.numberformat:ie(An))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):P("",!0),e.currentPriceTab!=="full range"?(s(),m("div",{key:1,class:"range-size range-size-upper",style:it({left:e.rangeSizeUpperPosition})},c(("numberformat"in e?e.numberformat:ie(An))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):P("",!0),di],512),[[Wt,!e.loading]])])}const vi=po(ii,[["render",ci],["__scopeId","data-v-beaf2b95"]]),pi=vo({props:{poolInfo:{type:Object,default:()=>({})},aprRewardsParameter:{type:Number,default:30},label:{type:Boolean,default:!0}},setup(e,n){const B=g(""),_=g(""),O=g(""),Q=co(),H=z(()=>Q);console.log(e,"props124====>");const ne=on(),W=z(()=>ne),X=(k,l)=>k&&l?la.plus(Tn(k),Tn(l)):k>0?k:0,V=k=>{let l=0;return k&&k.forEach(v=>{l+=Tn(String(v))}),String(l)},Z=g([]),ee=g([]),he=g(""),T=g(""),_e=g(!0);ke(()=>[H.value.newTopPoolsObj,e.poolInfo,W.value.tokensObj,e.aprRewardsParameter],async([k,l,v])=>{var L;if(k&&l&&v){const K=k[l==null?void 0:l.poolAddress];if(K){console.log(K,"===>stats"),B.value=K&&K.apr_7day&&K.apr_7day.replace("%","")||"0",T.value=V(K&&K.rewarder_apr),he.value=X(K&&K.apr_7day,K&&V(K.rewarder_apr)),console.log(e.poolInfo,"===>props.poolInfo"),console.log(he.value,"===> rewardApr.value"),_.value=De(K.tvl_in_usd,2),O.value=De(K.vol_in_usd_24h,2);const ce=l&&e.poolInfo.rewarder_infos||[],Se=[];for(let D=0;D<ce.length;D++){const le=ce[D];if(v[le.coinAddress]){const G=v[le.coinAddress].decimals,ae=en(le.emissionsEveryDay/Math.pow(10,G),4),Fe=Number(ae)>0?De(ae):ae,Y=en(Number(ae)*((L=W.value.RATES[le.coinAddress])==null?void 0:L.price),4);Se.push({...le,logoUrl:v[le.coinAddress].logoURI,day:Fe,dayUSD:Y,symbol:v[le.coinAddress].symbol,rewarder_display:l&&l[`rewarder_display${D+1}`]?l[`rewarder_display${D+1}`]:!1})}}console.log(Se,"mockArr206===>"),Z.value=Se.filter(D=>D.rewarder_display);const me=[];Se.forEach((D,le)=>{v[D.coinAddress]&&me.push({...D,symbol:v[D.coinAddress].symbol,rewarderApr:K.rewarder_apr[le]&&K.rewarder_apr[le].replace("%","")})}),ee.value=me.filter(D=>D.rewarder_display)}else B.value="0",_.value="--",O.value="--",he.value=="0";console.log(ee.value,"===>rewarderArr.value"),_e.value=!1}},{immediate:!0,deep:!0});const f=()=>{n.emit("reviseValue")},j=k=>{var l;return(k==null?void 0:k.logoURI)||(k==null?void 0:k.logo_url)||((l=W.value.tokensObj[k==null?void 0:k.address])==null?void 0:l.logo_url)||(H.value.theme==="default"?Xe("/image/coins/unknown.png"):Xe("/image/coins/sui-unknown.png"))},w=z(()=>W.value.tokensWarningObj);return console.log(w.value,"==>tokensObj"),console.log(e.poolInfo,"props.poolInfo====>"),{tokensWarningObj:w,rewarderInfo:Z,rewarderArr:ee,rewardApr:he,rewardAprList:T,apr:B,liquidityTvl:_,vol24:O,addCommom:De,reviseValue:f,loading:_e,getCoinIcon:j,store:Q}}});const Cn=e=>(Fo("data-v-a02cd2f6"),e=e(),jo(),e),mi={key:0,class:"pool-info"},fi=Cn(()=>a("use",{"xlink:href":"#icon-icon_on"},null,-1)),gi=[fi],bi={key:0,class:"info-block-container"},ki={class:"info-block"},hi={class:"coin-tips"},Ci={class:"left"},yi={alt:""},wi={class:"address"},Pi=Cn(()=>a("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Ii=[Pi],$i={class:"info-block"},Ti={class:"coin-tips"},Si={class:"left"},Ai={alt:""},Ni={class:"address"},Li=Cn(()=>a("use",{"xlink:href":"#icon-icon-copy"},null,-1)),qi=[Li],Mi={class:"info-block"},Ri={class:"leabl"},Ui={class:"text"},Oi={class:"apr-hover-content"},Bi={class:"info-block"},_i={class:"leabl"},Fi={class:"text"},ji={class:"info-block"},Di={class:"leabl"},Ei={class:"text"},Hi={class:"info-block"},Wi={class:"leabl"},zi={class:"text"},Xi={key:1,class:"pool-rewards-info"},Vi={class:"rewards-list-all"},Ki=Cn(()=>a("div",{class:"icon-sign"},null,-1)),Zi={alt:""},Gi={class:"rewards-value"};function Ji(e,n,B,_,O,Q){const H=aa,ne=ia,W=ft,X=hn("image");return e.poolInfo?(s(),m("div",mi,[e.loading?(s(),de(W,{key:1})):(s(),m(Ao,{key:0},[a("div",{class:be(e.label?"pool-info-border pool-info-title":"pool-info-title")},[Be(c(e.$t("newAdd.poolInfo"))+" ",1),(s(),m("svg",{class:be(e.label?"show-icon icon":"icon"),"aria-hidden":"true",onClick:n[0]||(n[0]=V=>e.reviseValue())},gi,2))],2),e.label?(s(),m("div",bi,[a("div",ki,[a("div",hi,[a("div",Ci,[ao(a("img",yi,null,512),[[X,e.getCoinIcon(e.poolInfo.needReverse?e.poolInfo.token_b:e.poolInfo.token_a)]]),a("div",wi,c(e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address),1),se(H,{address:e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address,"style-params":{width:"12px",height:"12px",left:"10px",bottom:"0px"}},null,8,["address"]),(s(),m("svg",{class:"icon","aria-hidden":"true",onClick:n[1]||(n[1]=V=>e.store.copy(e.poolInfo.needReverse?e.poolInfo.token_b.address:e.poolInfo.token_a.address))},Ii))])])]),a("div",$i,[a("div",Ti,[a("div",Si,[ao(a("img",Ai,null,512),[[X,e.getCoinIcon(e.poolInfo.needReverse?e.poolInfo.token_a:e.poolInfo.token_b)]]),a("div",Ni,c(e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address),1),se(H,{address:e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address,"style-params":{width:"12px",height:"12px",left:"10px",bottom:"0px"}},null,8,["address"]),(s(),m("svg",{class:"icon","aria-hidden":"true",onClick:n[2]||(n[2]=V=>e.store.copy(e.poolInfo.needReverse?e.poolInfo.token_a.address:e.poolInfo.token_b.address))},qi))])])]),a("div",Mi,[a("div",Ri,c(e.$t("common.apr")),1),a("div",Ui,[Be(c(e.poolInfo.is_display_rewarder?e.rewardApr>0&&e.rewardApr<.01?"<0.01":("addCommom"in e?e.addCommom:ie(De))(e.rewardApr,2):e.apr>0&&e.apr<.01?"<0.01":("addCommom"in e?e.addCommom:ie(De))(e.apr,2))+"% ",1),a("div",Oi,[se(ne,{"l-item":{apr:e.apr,aprTotal:e.rewardApr,rewarder_apr:e.rewardAprList,is_display_rewarder:e.poolInfo.is_display_rewarder},"rewarder-info":e.rewarderArr},null,8,["l-item","rewarder-info"])])])]),a("div",Bi,[a("div",_i,c(e.$t("common.liquidity")),1),a("div",Fi,"$"+c(e.liquidityTvl),1)]),a("div",ji,[a("div",Di,c(e.$t("common.volume24h")),1),a("div",Ei,"$"+c(e.vol24),1)]),a("div",Hi,[a("div",Wi,c(e.$t("newAdd.tickSpacing")),1),a("div",zi,c(e.poolInfo&&e.poolInfo.tick_spacing),1)])])):P("",!0),e.poolInfo.is_display_rewarder&&e.label&&e.rewarderInfo&&e.rewarderInfo.length>0?(s(),m("div",Xi,[Be(c("Farming Rewards")+" "),a("div",Vi,[(s(!0),m(Ao,null,xo(e.rewarderInfo,V=>(s(),m("div",{key:V,class:be(["rewards-list",V.day==0?"rewards-none":""])},[Ki,ao(a("img",Zi,null,512),[[X,V.logoUrl]]),a("div",Gi,[a("p",null,c(V.day)+" "+c(V.symbol)+" / "+c(e.$t("newAdd.day"))+" ",1)])],2))),128))])])):P("",!0)],64))])):P("",!0)}const Qi=po(pi,[["render",Ji],["__scopeId","data-v-a02cd2f6"]]),Yi=vo({components:{Modal:gt},props:{poolInfo:{type:Object,required:!0}},setup(e){const n=g({}),B=co(),_=z(()=>B),O=z(()=>_.value.chainName),Q=z(()=>bn[O.value]);let H=g(!0);const ne=on(),W=z(()=>ne),X=qn(),V=z(()=>e.poolInfo.needReverse);return ke(()=>W.value.currentPositionInfo,ee=>{console.log(ee,"==>newVal111111"),ee&&(n.value=ee)},{immediate:!0}),{getExplorerUrl:Nn,addCommom:De,router:X,pools:W,positionInfo:n,decimalFormat:en,rateChange:H,config:Q,importIcon:Xe,store:_,chainName:O,checkNullObj:fo,needReverse:V,getCoinIcon:ee=>{var he;return(ee==null?void 0:ee.logoURI)||(ee==null?void 0:ee.logo_url)||((he=W.value.tokensObj[ee==null?void 0:ee.address])==null?void 0:he.logo_url)||(_.value.theme==="default"?Xe("/image/coins/unknown.png"):Xe("/image/coins/sui-unknown.png"))},decimalUi:Ne}}});const yn=e=>(Fo("data-v-ed84aae8"),e=e(),jo(),e),xi=yn(()=>a("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),el={class:"rejected-container"},ol={class:"coin-pair"},nl=yn(()=>a("use",{"xlink:href":"#icon-icon-copy"},null,-1)),tl=[nl],al=["href"],il=yn(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-jump"})],-1)),ll=[il],sl={class:"coin-pair"},rl={class:"fee"},ul={class:"status"},dl={class:"min-and-max"},cl={key:0},vl={class:"text"},pl={key:0,src:kt,alt:""},ml={key:1,src:ht,alt:""},fl={class:"text"},gl={key:1},bl={class:"text"},kl={key:0,src:kt,alt:""},hl={key:1,src:ht,alt:""},Cl={class:"text"},yl=yn(()=>a("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),wl=[yl];function Pl(e,n,B,_,O,Q){const H=mt,ne=ra,W=Mn,X=bt("Modal"),V=hn("image");return s(),de(X,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:n[3]||(n[3]=Z=>e.$emit("onClose"))},{closeIcon:Ae(()=>[xi]),default:Ae(()=>[a("div",el,[se(H,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ae(()=>[a("div",ol,[Be(c(e.positionInfo.tokenName)+" ",1),(s(),m("svg",{class:"icon","aria-hidden":"true",onClick:n[0]||(n[0]=Z=>e.store.copy(e.positionInfo.nftHash))},tl)),a("a",{href:e.chainName==="Aptos"?("getExplorerUrl"in e?e.getExplorerUrl:ie(Nn))("nftAddress",e.positionInfo.nftHash):("getExplorerUrl"in e?e.getExplorerUrl:ie(Nn))("nftAddress",e.positionInfo.pos_object_id),target:"_blank"},ll,8,al)])]),_:1},8,["loading"]),a("div",{class:be(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[se(H,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ae(()=>{var Z,ee,he,T,_e,f,j,w,k,l,v,L;return[a("div",sl,[a("div",null,[ao(a("img",null,null,512),[[V,e.getCoinIcon(e.needReverse?(ee=e.positionInfo)==null?void 0:ee.token_b:(Z=e.positionInfo)==null?void 0:Z.token_a)]]),ao(a("img",null,null,512),[[V,e.getCoinIcon(e.needReverse?(T=e.positionInfo)==null?void 0:T.token_a:(he=e.positionInfo)==null?void 0:he.token_b)]])]),a("span",null,c(e.needReverse?(w=(j=e.positionInfo)==null?void 0:j.token_b)==null?void 0:w.symbol:(f=(_e=e.positionInfo)==null?void 0:_e.token_a)==null?void 0:f.symbol)+" - "+c(e.needReverse?(L=(v=e.positionInfo)==null?void 0:v.token_a)==null?void 0:L.symbol:(l=(k=e.positionInfo)==null?void 0:k.token_b)==null?void 0:l.symbol),1)]),a("div",rl,c(e.$t("common.fee"))+" "+c(e.positionInfo.fee*100)+"%",1)]}),_:1},8,["loading"])],2),a("div",ul,[se(ne,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),se(H,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ae(()=>{var Z,ee,he,T,_e,f,j,w;return[a("div",dl,[(e.needReverse?!e.rateChange:e.rateChange)?(s(),m("div",cl,[a("div",vl,c(("addCommom"in e?e.addCommom:ie(De))(("decimalUi"in e?e.decimalUi:ie(Ne))(String(e.positionInfo&&e.positionInfo.minPrice),6))),1),e.store.theme=="default"?(s(),m("img",pl)):(s(),m("img",ml)),a("div",fl,c(e.positionInfo&&e.positionInfo.maxPrice.indexOf("∞")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in e?e.addCommom:ie(De))(("decimalUi"in e?e.decimalUi:ie(Ne))(String(e.positionInfo&&e.positionInfo.maxPrice),6)))+" "+c((ee=(Z=e.positionInfo)==null?void 0:Z.token_b)==null?void 0:ee.symbol)+" per "+c((T=(he=e.positionInfo)==null?void 0:he.token_a)==null?void 0:T.symbol),1)])):(s(),m("div",gl,[a("div",bl,c(("addCommom"in e?e.addCommom:ie(De))(("decimalUi"in e?e.decimalUi:ie(Ne))(String(1/Number(e.positionInfo&&e.positionInfo.maxPrice)),6))),1),e.store.theme=="default"?(s(),m("img",kl)):(s(),m("img",hl)),a("div",Cl,c(e.positionInfo&&e.positionInfo.maxPrice.indexOf("∞")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in e?e.addCommom:ie(De))(("decimalUi"in e?e.decimalUi:ie(Ne))(String(1/Number(e.positionInfo&&e.positionInfo.minPrice)),6)))+" "+c((f=(_e=e.positionInfo)==null?void 0:_e.token_a)==null?void 0:f.symbol)+" per "+c((w=(j=e.positionInfo)==null?void 0:j.token_b)==null?void 0:w.symbol),1)])),(s(),m("svg",{class:"icon-change","aria-hidden":"true",onClick:n[1]||(n[1]=k=>e.rateChange=!e.rateChange)},wl))])]}),_:1},8,["loading"])]),se(W,{disabled:("checkNullObj"in e?e.checkNullObj:ie(fo))(e.positionInfo),onClick:n[2]||(n[2]=Z=>e.router.push(`/new-position-detail?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}&pos=${e.positionInfo.pos_object_id}`))},{default:Ae(()=>[Be(c(e.$t("newAdd.viewDetail")),1)]),_:1},8,["disabled"])]),_:1},8,["title"])}const Il=po(Yi,[["render",Pl],["__scopeId","data-v-ed84aae8"]]),$l=vo({components:{Modal:gt},setup(){const e=co(),n=z(()=>e);return{importIcon:Xe,store:n}}}),Tl=""+new URL("img-Creat-success_2x.b6f0a395.png",import.meta.url).href,Sl=""+new URL("img-Creat-success.9734ad6f.png",import.meta.url).href;const Al=e=>(Fo("data-v-d7a9ceb3"),e=e(),jo(),e),Nl=Al(()=>a("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ll={class:"create-success-container"},ql={key:0,src:Tl,alt:""},Ml={key:1,src:Sl,alt:""},Rl={class:"waiting-title"};function Ul(e,n,B,_,O,Q){const H=bt("Modal");return s(),de(H,{visible:!0,class:"",centered:"",title:"",width:"400px",footer:null,onCancel:n[0]||(n[0]=ne=>e.$emit("onClose"))},{closeIcon:Ae(()=>[Nl]),default:Ae(()=>[a("div",Ll,[e.store.theme=="default"?(s(),m("img",ql)):(s(),m("img",Ml)),a("p",Rl,c(e.$t("newAdd.createPoolSuccessText")),1)])]),_:1})}const Ol=po($l,[["render",Ul],["__scopeId","data-v-d7a9ceb3"]]),Bl={1e-4:2,5e-4:10,.002:60,.006:200},_l={1e-4:2,5e-4:10,.0025:60,.01:200},Fl=vo({setup(){let e=g(!1);const{t:n,locale:B}=zt(),_=Et(),O=z(()=>_),Q=co(),H=g(0),ne=g(!1),W=g(!1),X=g(!1),V=g("fromCoin"),Z=g(""),ee=g(""),he=g(!1),T=g(!0),_e=g(!1),f=g(!0),j=g(!1),w=g(""),k=g(""),l=g(""),v=g(""),L=g(""),K=g(""),ce=g(!1),Se=g(!1),me=g(!1),D=g(""),le=g(0),G=g(!0),ae=g(!1),Fe=g([]),Y=g(""),Ie=g(30),ve=g("30D"),Le=g("Estimated APR"),re=g([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),Ve=g(!0),oe=co(),q=z(()=>oe),Po=z(()=>{var o;return!!((o=p==null?void 0:p.query)!=null&&o.action&&(!r.value||!u.value||!D.value))}),N=z(()=>q.value.chainName?Ln(q.value.chainName):{}),no=z(()=>{var o;return(o=q.value)==null?void 0:o.filterCreatePoolCoin}),No=o=>{console.log(o,"====>>>>item",o.num,Ie.value),xe.updateCurrentPools(i.value.poolAddress,q.value.chainName),ve.value=o.time,Ie.value=o.num},Lo=()=>{console.log("reviseValue==>"),Ve.value=!Ve.value},go=g([]),Io=()=>{H.value=0,p.query.action!=="create-pool"&&p.query.actions!=="new-position"&&(wn(),ro(),xe.updateCurrentPools(i.value.poolAddress,q.value.chainName)),xe.setPoolConfigList(fn.value,q.value.filterCoinsObj)},Vo=z(()=>Number(l.value)>0&&Number(v.value)>0&&Number(l.value)>Number(v.value)),Je=o=>{_e.value=o,l.value="0",v.value="∞"},We=z(()=>{if(A.value.poolConfigList&&r.value&&u.value){const o=A.value.poolConfigList.filter(d=>{var b,y,C,S;return d.token_a.address.toUpperCase()===((b=r.value.address)==null?void 0:b.toUpperCase())&&d.token_b.address.toUpperCase()===((y=u.value.address)==null?void 0:y.toUpperCase())||d.token_b.address.toUpperCase()===((C=r.value.address)==null?void 0:C.toUpperCase())&&d.token_a.address.toUpperCase()===((S=u.value.address)==null?void 0:S.toUpperCase())});console.log(o,"===>info");const t=[];return o.forEach(d=>{t.push(Number(d.fee))}),console.log(t,"===>>result"),t}else return[]}),bo=o=>{const t={};let d=new h(0);o.forEach(R=>{d=d.add(new h(R.object.liquidity))});const b=[];let y=new h(0);o.forEach(R=>{const U=new h(R.object.liquidity),E=U.gt(0)?new h(U).div(d).mul(100).toString():0,F=Yo(E,2);y=y.plus(F);const J=F.split(".");b.push({value:F,int:J[0],decimal:J[1],fee:R.fee})});let C=new h(100).minus(y).toNumber();const S=b.sort((R,U)=>Number(U.decimal)-Number(R.decimal));if(C)for(let R=0;R<S.length&&C;R++)S[R].value=new h(S[R].value).plus(.01).toString(),C=new h(C).minus(.01).toNumber();return o.forEach(R=>{var E;const U=(E=S.find(F=>R.fee===F.fee))==null?void 0:E.value;t[R.fee]={rateText:(U>0&&U<.01?"<0.01":U==0?0:Yo(U,2))+"% select",rate:U}}),t},ko=z(()=>{if(A.value.poolConfigList&&r.value&&u.value){const o=A.value.poolConfigList.filter(d=>{var C,S,R,U;const b=d.coin_a_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":d.coin_a_address,y=d.coin_b_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":d.coin_b_address;return console.log(d,"p===>1334"),b.toUpperCase()===((C=r.value.address)==null?void 0:C.toUpperCase())&&y.toUpperCase()===((S=u.value.address)==null?void 0:S.toUpperCase())||y.toUpperCase()===((R=r.value.address)==null?void 0:R.toUpperCase())&&b.toUpperCase()===((U=u.value.address)==null?void 0:U.toUpperCase())});return bo(o)}}),Qe=z(()=>[{label:.01+"% "+n("common.feeTier"),title:.01+"% ",fee:1e-4,text:n("newAdd.bestVeryStablePairs")},{label:.05+"% "+n("common.feeTier"),title:.05+"% ",fee:5e-4,text:n("newAdd.bestStablePairs")},q.value.chainName=="Aptos"?{label:.2+"% "+n("common.feeTier"),title:.2+"% ",fee:.002,text:n("newAdd.bestMostPairs")}:{label:.25+"% "+n("common.feeTier"),title:.25+"% ",fee:.0025,text:n("newAdd.bestMostPairs")},q.value.chainName=="Aptos"?{label:.6+"% "+n("common.feeTier"),title:.6+"% ",fee:.006,text:n("newAdd.besteExoticPairs")}:{label:"1% "+n("common.feeTier"),title:"1% ",fee:.01,text:n("newAdd.besteExoticPairs")}]),je=z(()=>Q.slippage),qo=z(()=>!r.value||!u.value),Do=z(()=>{var o,t;return!w.value&&!k.value?(console.log("addLiquidityBtnDisabled11111"),!0):Number(w.value)>Number(Ze.value)||Number(k.value)>Number(Ge.value)?(console.log("addLiquidityBtnDisabled22222"),!0):M.value!==n("button.addLiquidity")&&M.value!==n("newAdd.preview")?(console.log("addLiquidityBtnDisabled33333###",M.value),!0):i.value&&i.value&&i.value.is_pause?(console.log("addLiquidityBtnDisabled44444"),!0):(o=p==null?void 0:p.query)!=null&&o.action&&!$.value&&!((t=$.value)!=null&&t.currentPrice)?(console.log("addLiquidityBtnDisabled55555"),!0):!!(Number(w.value)<=0&&Number(k.value)<=0||!ye.value&&Number(w.value)==0||!we.value&&Number(k.value)==0||me.value)}),M=z(()=>{var o,t,d;return i.value&&i.value.is_pause?"Pool Closed":!r.value||!u.value?n("modal.selectTokenModalTitle"):fn.value=="Sui"&&!We.value.includes(1e-4)&&!We.value.includes(5e-4)&&!We.value.includes(.0025)&&!We.value.includes(.01)&&!no.value[r==null?void 0:r.value.address]&&!no.value[(o=u.value)==null?void 0:o.address]?"Invalid Pool":(p.query.action||p.query.actions)&&!D.value&&bn[q.value.chainName].hasCreatePool?(console.log("addLiquidityBtnDisabled11111"),"Select fee tier"):qo.value?n("modal.selectTokenModalTitle"):!bn[q.value.chainName].hasCreatePool&&!i.value?n("button.poolNotFound"):Number(w.value)>Number(Ze.value)?n("button.insufficientBalance",{name:r.value.symbol}):Number(k.value)>Number(Ge.value)?n("button.insufficientBalance",{name:u.value.symbol}):j.value?n("modal.selectTokenModalTitle"):(console.log(i.value,"==>poolInfo.value"),console.log(!i.value&&((t=p==null?void 0:p.query)==null?void 0:t.action),"===>!poolInfo.value && route?.query?.action"),!i.value&&r.value&&u.value&&((d=p==null?void 0:p.query)==null?void 0:d.action)=="create-pool"?n("newAdd.preview"):!Number(w.value)&&!Number(k.value)?n("button.enterAmount"):v.value!=="∞"&&Number(l.value)>=Number(v.value)?n("newAdd.invalidRange"):n("button.addLiquidity"))}),I=z(()=>{var o,t,d;return!i.value||fo(q.value.addressHistTokens)||!q.value.addressHistTokens[(o=i.value)==null?void 0:o.poolAddress]?null:Object.fromEntries((d=q.value.addressHistTokens[(t=i.value)==null?void 0:t.poolAddress])==null?void 0:d.data.map(b=>[b.key,b.value]))}),Ke=z(()=>T.value?I.value&&Ne(Ie.value==7?I.value.before_7_d_contract_price_lowest:Ie.value==24?I.value.before_24_h_contract_price_lowest:I.value.before_30_d_contract_price_lowest,6)||0:I.value&&Ne(new h(1).div(Ie.value==7?I.value.before_7_d_contract_price_highest:Ie.value==24?I.value.before_24_h_contract_price_highest:I.value.before_30_d_contract_price_highest).toString(),6)||0),Me=z(()=>T.value?I.value&&Ne(Ie.value==7?I.value.before_7_d_contract_price_highest:Ie.value==24?I.value.before_24_h_contract_price_highest:I.value.before_30_d_contract_price_highest,6)||0:(I.value&&Ne(1/Number(Ie.value==7?I.value.before_7_d_contract_price_lowest:Ie.value==24?I.value.before_24_h_contract_price_lowest:I.value.before_30_d_contract_price_lowest),6))==1/0?0:I.value&&Ne(1/Number(Ie.value==7?I.value.before_7_d_contract_price_lowest:Ie.value==24?I.value.before_24_h_contract_price_lowest:I.value.before_30_d_contract_price_lowest),6)||0),Ce=qn(),r=g(),u=g();kn(()=>{document.body.clientWidth<750?(Ve.value=!1,e.value=!1):(Ve.value=!0,e.value=!0)});const nn=o=>{var t,d;if((t=i.value)==null||t.token_a.decimals,(d=i.value)==null||d.token_b.decimals,console.log(o,"value1830===>"),p.query.action&&_o.value&&o!==l.value){In();return}o!==l.value&&Y.value=="full range"?(cn({key:"custom",...to.value.custom}),console.log(to.value.custom.min,"priceConfigObj.value[custom].min")):(Y.value!=="full range"&&Y.value!=="custom"&&(Y.value="custom"),l.value=o)},tn=o=>{if(p.query.action&&_o.value&&o!==v.value){In();return}o!==v.value&&Y.value=="full range"?cn({key:"custom",...to.value.custom}):(Y.value!=="full range"&&Y.value!=="custom"&&(Y.value="custom"),v.value=o)},an=()=>{var t;if(p.query.action)T.value=!T.value,$.value&&mn(Ne(new h(1).div($.value.currentPrice).toString(),(t=u==null?void 0:u.value)==null?void 0:t.decimals));else if(G.value=!0,G.value=!1,T.value=!T.value,l.value!==""&&v.value!==""&&l.value!=="0"&&v.value!=="∞"){const d=l.value,b=v.value;l.value=new h(1).div(b).toString(),v.value=new h(1).div(d).toString();const y=L.value,C=K.value;L.value=new h(1).div(C).toString(),K.value=new h(1).div(y).toString(),ae.value=!1}const o=r.value;r.value=u.value,u.value=o,f.value?w.value=k.value:k.value=w.value};ke([l,v],([o,t])=>{console.log(o,t,"==>minPrice,maxPrice"),Number(o)!==0&&Number(t)!==0&&ro(),t!=="∞"&&Number(o)!==0&&Number(t)!==0&&Number(o)>=Number(t)?me.value=!0:me.value=!1,Number(o)==0&&Number(t)==0&&Ee.value&&(me.value=!0,console.log("价格区间错误"))});const Mo=g(!1),Ro=g(!1),ln=o=>{var t,d,b,y,C,S,R,U,E;V.value=o,o==="fromCoin"?(Z.value=((t=u.value)==null?void 0:t.address)||"",ee.value=p.query.action=="create-pool"||p.query.actions=="new-position"||!i.value?(d=r.value)==null?void 0:d.address:i.value.needReverse?i.value.token_b.address:i.value.token_a.address,((b=p==null?void 0:p.query)==null?void 0:b.action)=="create-pool"&&((y=p==null?void 0:p.query)==null?void 0:y.from)==="pool"?Ro.value=!0:Ro.value=!1,Mo.value=!1):(Z.value=((C=r.value)==null?void 0:C.address)||"",ee.value=p.query.action=="create-pool"||p.query.actions=="new-position"||!i.value?(S=u.value)==null?void 0:S.address:i.value.needReverse?i.value.token_a.address:i.value.token_b.address,((R=p==null?void 0:p.query)==null?void 0:R.action)=="create-pool"&&((U=p==null?void 0:p.query)==null?void 0:U.from)==="pool"&&!no[(E=r.value)==null?void 0:E.address]?(console.log("0515###这里这里##fromCoin.value###",r.value),Mo.value=!0):Mo.value=!1,Ro.value=!1),he.value=!0},$e=g(null),Te=g(null),Ko=g({}),Zo=g({}),sn=o=>{var b,y,C,S;j.value=!1;const t=i.value?i.value.needReverse?i.value.token_b:i.value.token_a:$e.value,d=i.value?i.value.needReverse?i.value.token_a:i.value.token_b:Te.value;V.value==="fromCoin"?(((b=r.value)==null?void 0:b.address)===(t==null?void 0:t.address)||!((y=r.value)!=null&&y.address)?(u.value&&o.address.toLowerCase()===(u==null?void 0:u.value.address.toLowerCase())&&(u.value=null,Te.value=null,D.value=""),r.value=o):(r.value&&o.address.toLowerCase()===(r==null?void 0:r.value.address.toLowerCase())&&(r.value=null,$e.value=null,D.value=""),u.value=o),$e.value=o,p.query.action||(p.query.fee="")):(((C=u.value)==null?void 0:C.address)===(d==null?void 0:d.address)||!((S=u.value)!=null&&S.address)?(r.value&&o.address.toLowerCase()===(r==null?void 0:r.value.address.toLowerCase())&&(r.value=null,$e.value=null,D.value=""),u.value=o):(u.value&&o.address.toLowerCase()===(u==null?void 0:u.value.address.toLowerCase())&&(u.value=null,Te.value=null,D.value=""),r.value=o),Te.value=o,p.query.action||(p.query.fee="")),mn(""),he.value=!1},rn=o=>{o==="fromCoin"?(f.value=!0,q.value.chainName==="Aptos"?w.value=Number(Ze.value)>0?r.value.symbol=="APT"?new h(Number(Ze.value)).sub(new h(.1)).lt(new h(0))?"0":new h(Number(Ze.value)).sub(new h(.1)).toString():String(Ze.value):"":w.value=Number(Ze.value)>0?r.value.symbol=="SUI"?new h(Number(Ze.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(Ze.value)).sub(new h(.05)).toString():String(Ze.value):""):(f.value=!1,q.value.chainName==="Aptos"?k.value=Number(Ge.value)>0?u.value.symbol=="APT"?new h(Number(Ge.value)).sub(new h(.1)).lt(new h(0))?"0":new h(Number(Ge.value)).sub(new h(.1)).toString():String(Ge.value):"":k.value=Number(Ge.value)>0?u.value.symbol=="SUI"?new h(Number(Ge.value)).sub(new h(.05)).lt(new h(0))?"0":new h(Number(Ge.value)).sub(new h(.05)).toString():String(Ge.value):"")},un=o=>{o==="fromCoin"?(f.value=!0,w.value=Number(Ze.value)>0?Yo(new h(Number(Ze.value)).div(2).toString(),r.value.decimals).toString():""):(f.value=!1,k.value=Number(Ge.value)>0?Yo(new h(Number(Ge.value)).div(2).toString(),u.value.decimals).toString():"")};ke(w,(o,t)=>{console.log(w,"===>fromCoinAmount"),o==""&&f.value&&(k.value=""),o&&f.value&&ro()}),ke(k,(o,t)=>{console.log(o,"===>>>>newValsda"),o==""&&!f.value&&(w.value=""),o&&!f.value&&ro()});const dn=()=>{r.value=null,u.value=null,l.value="0",v.value="0",w.value="",k.value="",j.value=!0,D.value="",ce.value=!1,ye.value=!0,we.value=!0,G.value=!1},lo=g(!1),{setIsShowSuccess:ho,setIsShowRejected:Co,setIsShowWaiting:Ye,setTransactionDesc:Eo,setTransactionTxid:yo,setPositiomNum:Ho}=Q,p=pt(),xe=on(),$o=z(()=>bn[q.value.chainName].hasCreatePool);ke(()=>[D.value,p.query.action,r.value,u.value,p.query.actions,$o.value],([o,t,d,b,y,C])=>{!o&&(t=="create-pool"||y=="new-position")&&d&&b&&C?(ce.value=!0,G.value=!1):(!d||!b)&&(ce.value=!1)},{immediate:!0});const A=z(()=>xe);ke(()=>A.value.tokens,async o=>{if(o&&o.length>0){const t=o;if(p&&p.query&&p.query.tokena&&(console.log("0410###deposite###watch###route.query.tokena####",p.query.tokena),p.query.tokena)){const d=await N.value.getTokenBySymbol(t,p.query.tokena);r.value=d,$e.value=d}if(p&&p.query&&p.query.tokenb&&p.query.tokenb){const d=await N.value.getTokenBySymbol(t,p.query.tokenb);u.value=d,Te.value=d}}},{immediate:!0});const wo=g({}),ye=g(!1),we=g(!1),Wo=g(),zo=g(),Ee=g(),so=g(),ro=async()=>{var Re,pe,eo,Ue,fe,Oe;if(!l.value&&!v.value)return!1;if(!w.value&&!k.value&&!l.value&&!v.value)return;console.log(i.value,"==》poolInfo.value");const o=i.value?i.value:$.value;if(console.log(o,"===>poolInfos"),fo(o))return;console.log("添加流动性预计算=====>");const{TickUtil:t,TickMath:d,getNearestTickByTick:b}=N.value,y=o==null?void 0:o.token_a.decimals,C=o==null?void 0:o.token_b.decimals;let S,R,U,E,F,J,ue,Pe,te=o.current_tick_index,x;if(o.token_a.address.toLowerCase()===r.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===u.value.address.toLowerCase()?x=!0:x=!1,console.log(x,"=====>directs"),console.log("currentTickIndex####",te),console.log("currentTickIndex####",te),console.log("currentTickIndex####",te),l.value==="0"&&v.value==="∞")U=t.getMinIndex(Number(o.tickSpacing)),E=t.getMaxIndex(Number(o.tickSpacing)),F=d.tickIndexToSqrtPriceX64(U),J=d.tickIndexToSqrtPriceX64(E);else if(Y.value=="custom"||p.query.action){console.log(x,"===>directs1866"),x?(S=Number(l.value),R=Number(v.value)):(S=new h(1).div(v.value).toString(),R=new h(1).div(l.value).toString()),console.log("0518###pre###directs###",x),console.log("0518###pre###minPrice###",l.value),console.log("0518###pre###maxPrice###",v.value),console.log("0518###pre###poolInfos###",o),console.log("0518###pre###decimalsA###",y),console.log("0518###pre###decimalsB###",C),console.log("0518###pre###currentTickIndex###",te),console.log(S,R,"min max1875"),console.log(l.value,v.value,"===>maxPrice.value");try{ue=S==0?-443636:d.priceToTickIndex(new h(S),y,C)}catch{ue=-443636}try{Pe=d.priceToTickIndex(new h(R),y,C)}catch{Pe=443636}U=b(ue,Number(o.tickSpacing)),E=b(Pe,Number(o.tickSpacing)),console.log("0523####min####",S),console.log("0523####max####",R),F=d.priceToSqrtPriceX64(new h(S),y,C);try{J=d.priceToSqrtPriceX64(new h(R),y,C)}catch{console.log("0523###test###max###",R),R===1/0&&(console.log("0523###test###max###11111"),J=d.tickIndexToSqrtPriceX64(t.getMaxIndex(Number(o.tickSpacing))))}console.log(U,"===>tick_lower"),console.log(E,"===>tick_upper"),console.log("0518###pre###tick_lower###",U,E,te),console.log("0518###pre###tick_upper###",E)}else U=(Re=to.value[Y.value])==null?void 0:Re.lower,E=(pe=to.value[Y.value])==null?void 0:pe.upper,F=d.tickIndexToSqrtPriceX64(U),J=d.tickIndexToSqrtPriceX64(E);if(v.value!=="∞"&&U>=E){ye.value=!0,w.value="",we.value=!0,k.value="";return}if(console.log(E,te,U,"1922"),v.value==="∞"||te>=U&&te<=E){ye.value=!1,we.value=!1;let qe;if(w.value||k.value){if(f.value){const uo=new h(w.value).mul(Math.pow(10,r.value.decimals)).toString();qe=new So(uo)}else{const uo=new h(k.value).mul(Math.pow(10,u.value.decimals)).toString();qe=new So(uo)}console.log(x,"======>directs");const{liquidityAmount:ge,tokenMaxA:oo,tokenMaxB:ze,tokenMaxAOrigin:He,tokenMaxBOrigin:mo}=N.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:o.token_a,tokenB:o.token_b,lowerTick:U,upperTick:E,coinAmount:qe,iscoinA:x?f.value:!f.value,roundUp:!0,slippage:Number(je.value)/100,curSqrtPrice:new So(o.current_sqrt_price)});wo.value={liquidityAmount:ge,tokenMaxA:oo,tokenMaxB:ze,tokenMaxAOrigin:He,tokenMaxBOrigin:mo},console.log(oo,ze,"preAdd"),x?f.value?k.value=Number(ze)>0?ze:"":w.value=Number(oo)>0?oo:"":f.value?k.value=oo:w.value=ze}}else if(te>E){if(x?w.value="":k.value="",ye.value=x,we.value=!x,(eo=p==null?void 0:p.query)!=null&&eo.action&&(ye.value=!0,we.value=!0),w.value||k.value){let qe;if(x){const ge=new h(k.value).mul(Math.pow(10,(Ue=u.value)==null?void 0:Ue.decimals)).toString();qe=new So(ge),wo.value={liquidityAmount:N.value.estimateLiquidityForCoinB(F,J,qe),tokenMaxA:0,tokenMaxB:k.value}}else{const ge=new h(w.value).mul(Math.pow(10,(fe=r.value)==null?void 0:fe.decimals)).toString();qe=new So(ge),wo.value={liquidityAmount:N.value.estimateLiquidityForCoinB(F,J,qe),tokenMaxA:0,tokenMaxB:w.value}}}}else if(te<U){if(ye.value=!x,we.value=x,(Oe=p==null?void 0:p.query)!=null&&Oe.action&&(ye.value=!0,we.value=!0),x?k.value="":w.value="",w.value||k.value){let qe;if(x){const ge=new h(w.value).mul(Math.pow(10,r.value.decimals)).toString();qe=new So(ge),console.log(F,"minPriceX64===>"),console.log(J,"maxPriceX64===>maxPriceX64"),console.log(ge,"===>amount"),wo.value={liquidityAmount:N.value.estimateLiquidityForCoinA(F,J,qe),tokenMaxA:w.value,tokenMaxB:0}}else{const ge=new h(k.value).mul(Math.pow(10,u.value.decimals)).toString();qe=new So(ge),wo.value={liquidityAmount:N.value.estimateLiquidityForCoinA(F,J,qe),tokenMaxA:k.value,tokenMaxB:0}}}}else ye.value=!0,w.value="",we.value=!0,k.value=""},Uo=g(0);ke(()=>{var o;return(o=p.query)==null?void 0:o.fee},o=>{o&&(Uo.value=o,D.value=Number(o)*100+"% "+n("common.feeTier"))},{immediate:!0,deep:!0});const Xo=z(()=>{var y,C,S,R,U;const o=(y=p==null?void 0:p.query)==null?void 0:y.fee,t=(C=p==null?void 0:p.query)==null?void 0:C.tokena,d=(S=p==null?void 0:p.query)==null?void 0:S.tokenb;let b=null;console.log("0501###basePoolInfo###tokena###",t),console.log("0501###basePoolInfo###tokenb###",d),console.log("0501###basePoolInfo###fromCoin###",(R=r==null?void 0:r.value)==null?void 0:R.address),console.log("0501###basePoolInfo###toCoin###",(U=u==null?void 0:u.value)==null?void 0:U.address),console.log("0501###basePoolInfo###fee###",o),console.log(A.value.poolConfigList,"===>pools.value.poolConfigList");for(let E=0;E<A.value.poolConfigList.length;E++){const F=A.value.poolConfigList[E];console.log(F,"p===>"),!t||!d?b={}:(F.token_a.address.toUpperCase()===(t==null?void 0:t.toUpperCase())&&F.token_b.address.toUpperCase()===(d==null?void 0:d.toUpperCase())||F.token_b.address.toUpperCase()===(t==null?void 0:t.toUpperCase())&&F.token_a.address.toUpperCase()===(d==null?void 0:d.toUpperCase()))&&(b=F)}return console.log("0501###baseInfo###",b),b}),i=z(()=>{var t,d,b,y,C,S,R,U,E,F,J,ue,Pe;const o=(t=p==null?void 0:p.query)==null?void 0:t.fee;if(r.value&&u.value){let te=null;if(o)for(const Re in A.value.poolsObj){const pe=A.value.poolsObj[Re];(pe.token_a.address.toUpperCase()===((b=(d=r==null?void 0:r.value)==null?void 0:d.address)==null?void 0:b.toUpperCase())&&pe.token_b.address.toUpperCase()===((C=(y=u==null?void 0:u.value)==null?void 0:y.address)==null?void 0:C.toUpperCase())&&Number(pe.fee)==Number(Uo.value)||pe.token_b.address.toUpperCase()===((S=r==null?void 0:r.value.address)==null?void 0:S.toUpperCase())&&pe.token_a.address.toUpperCase()===((U=(R=u==null?void 0:u.value)==null?void 0:R.address)==null?void 0:U.toUpperCase())&&Number(pe.fee)==Number(Uo.value))&&(te=pe)}const x=[];if(!((E=p==null?void 0:p.query)!=null&&E.action)&&(!o||!te)){for(const Re in A.value.poolsObj){const pe=A.value.poolsObj[Re];(pe.token_a.address.toUpperCase()===((F=r==null?void 0:r.value.address)==null?void 0:F.toUpperCase())&&pe.token_b.address.toUpperCase()===((J=u.value.address)==null?void 0:J.toUpperCase())||pe.token_b.address.toUpperCase()===((ue=r==null?void 0:r.value.address)==null?void 0:ue.toUpperCase())&&pe.token_a.address.toUpperCase()===((Pe=u.value.address)==null?void 0:Pe.toUpperCase()))&&x.push(pe)}console.log(x,"result2408===>"),x&&x.length>0&&(te=x.sort((Re,pe)=>{const eo=Re.coinAmountA+Re.coinAmountB;return pe.coinAmountA+pe.coinAmountB-eo})[0]),console.log(x,"result===>2351")}return te&&!fo(te)?te:null}return null}),Oo=z(()=>{var b,y;const o=(b=r==null?void 0:r.value)==null?void 0:b.address,t=(y=u==null?void 0:u.value)==null?void 0:y.address;let d=null;for(let C=0;C<A.value.poolConfigList.length;C++){const S=A.value.poolConfigList[C];!o||!t?d={}:(S.token_a.address.toUpperCase()===(o==null?void 0:o.toUpperCase())&&S.token_b.address.toUpperCase()===(t==null?void 0:t.toUpperCase())||S.token_b.address.toUpperCase()===(o==null?void 0:o.toUpperCase())&&S.token_a.address.toUpperCase()===(t==null?void 0:t.toUpperCase()))&&(d=S)}return console.log("0501###baseInfo###",d),d});ke(()=>[Xo.value,i.value,A.value.recommendRangesObj],(o,t)=>{var d,b,y,C,S;o[0]&&!o[1]&&o[2]&&!fo(o[2])&&(!t||o[0]&&((d=o[0])==null?void 0:d.address)!==t[0]&&((b=t[0])!=null&&b.address))&&(y=o[0])!=null&&y.address&&!((C=p==null?void 0:p.query)!=null&&C.action)&&xe.setSinglePool(o[0],o[2][(S=o[0])==null?void 0:S.address],q.value.chainName)},{immediate:!0,deep:!0});const to=g({}),Go=async(o,t)=>{var d,b,y,C;if(console.log("deposit##poolInfoWatch###value####",o),o){const{TickMath:S,getNearestTickByTick:R}=N.value;t&&(G.value=!0,ye.value=!1,we.value=!1),o.token_a.address.toLowerCase()===r.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===u.value.address.toLowerCase()?T.value=!0:T.value=!1,ae.value=!0;const U=o.token_a.decimals,E=o.token_b.decimals;D.value=o.fee*100+"% "+n("common.feeTier");const F=o.current_tick_index;Ee.value=S.sqrtPriceX64ToPrice(o.current_sqrt_price,U,E).toString(),so.value=new h(1).div(new h(Ee.value)).toString();const J=await N.value.getTicks(o);if(console.log(J,"result====>"),Fe.value=J?N.value.getTickDataFromUrlData(J):[],t){let ue=A.value.poolPriceConfigObj&&A.value.poolPriceConfigObj[o.address]&&A.value.poolPriceConfigObj[o.address].recommend_ranges||{};const Pe=A.value.poolPriceConfigObj&&A.value.poolPriceConfigObj[o.address]&&A.value.poolPriceConfigObj[o.address].type||"",te=F-Number(Pe=="unstable"?Number(o.tickSpacing)*2:Number(o.tickSpacing)*3),x=F+Number(Pe=="unstable"?Number(o.tickSpacing)*2:Number(o.tickSpacing)*3),Re=(b=(d=i==null?void 0:i.value)==null?void 0:d.token_a)==null?void 0:b.decimals,pe=(C=(y=i==null?void 0:i.value)==null?void 0:y.token_b)==null?void 0:C.decimals,eo=N.value.TickMath.tickIndexToPrice(te,Re,pe).toString(),Ue=N.value.TickMath.tickIndexToPrice(x,Re,pe).toString();ue["full range"]={lower:-443636,upper:443636},ue.custom={lower:te,upper:x,minPrice:eo,maxPrice:Ue};const fe=[];for(let Oe in ue)ue[Oe]&&fe.push({...ue[Oe],key:Oe});go.value=fe,Pe?o.isSelfBuilt?Y.value="custom":Pe=="stable"?Y.value="suggested":Y.value="passive":Y.value="custom",to.value=ue,cn({key:Y.value,...ue[Y.value]}),console.log(go,"===>currentPriceTabList")}G.value=!1}else G.value=!1},Jo=z(()=>xe.getPoolInfoSuccess);ke(()=>i.value,(o,t)=>{var d,b,y,C,S,R,U,E,F,J,ue,Pe;console.log("0419###poolInfo###watch###",o),console.log("0419###poolInfo###pools.value.poolsObj###",A.value.poolsObj),o?((!t||o.poolAddress!==t.poolAddress||o.current_sqrt_price!==t.current_sqrt_price)&&Go(o,!t||o.poolAddress!==t.poolAddress),(p==null?void 0:p.name)=="deposit"&&Ce.push(`/deposit?poolAddress=${o==null?void 0:o.address}&tokena=${(d=r==null?void 0:r.value)==null?void 0:d.address}&tokenb=${(b=u==null?void 0:u.value)==null?void 0:b.address}&fee=${o==null?void 0:o.fee}`)):((y=p==null?void 0:p.query)==null?void 0:y.actions)=="new-position"||(!Oo.value&&$o.value&&((C=r==null?void 0:r.value)!=null&&C.address||(S=u==null?void 0:u.value)!=null&&S.address)?(D.value="",l.value="0",v.value="∞",ye.value=!1,we.value=!1,G.value=!1,Ee.value="",so.value="",console.log("0501####333333",r==null?void 0:r.value),(p==null?void 0:p.name)=="deposit"&&Ce.push(`/deposit?action=create-pool&tokena=${(R=r==null?void 0:r.value)==null?void 0:R.address}&tokenb=${(U=u==null?void 0:u.value)==null?void 0:U.address}&from=${(E=p==null?void 0:p.query)==null?void 0:E.from}`)):$o.value&&!o&&!((F=p==null?void 0:p.query)!=null&&F.action)&&Jo.value&&!Xo.value?(D.value="",l.value="0",v.value="∞",ye.value=!1,we.value=!1,G.value=!1,Ee.value="",so.value="",console.log("0501####222222"),(p==null?void 0:p.name)=="deposit"&&Ce.push(`/deposit?action=create-pool&tokena=${(J=r==null?void 0:r.value)==null?void 0:J.address}&tokenb=${(ue=u==null?void 0:u.value)==null?void 0:ue.address}&from=${(Pe=p==null?void 0:p.query)==null?void 0:Pe.from}`)):(ye.value=!1,we.value=!1,G.value=!1,Ee.value="",so.value="")),console.log(!Xo.value,"===>getPoolInfoSuccess.value&& !basePoolInfo.value")},{immediate:!0});const Ze=z(()=>O.value.assets&&r.value&&O.value.assets[r.value.address]?tt(O.value.assets[r.value.address].balance,r.value.decimals):"0"),Ge=z(()=>O.value.assets&&u.value&&O.value.assets[u.value.address]?tt(O.value.assets[u.value.address].balance,u.value.decimals):"0"),wn=async()=>{console.log("0412###resetTickList####");const o=await N.value.getTicks(i.value);console.log("0412###resetTickList###result####",o);const t=o?N.value.getTickDataFromUrlData(o):[];Fe.value=t,console.log("0412###resetTickList###tickList####",t)},Rn=ua(),Bo=z(()=>A.value.currentPositionInfo),It=async o=>{var F,J,ue,Pe,te,x,Re,pe,eo,Ue;console.log(i.value,"===> poolInfo.value"),lo.value=!1,A.value.currentPositionInfo={},yo(""),Eo(n("tips.increaseLiquiditySuccess",{from:ye.value?"":`${w.value} ${(F=r.value)==null?void 0:F.symbol}`,and:!ye.value&&!we.value?"and":"",to:we.value?"":`${k.value} ${(J=u.value)==null?void 0:J.symbol}`})),Ye(!0);const t=T.value?f.value:!f.value;let d,b,y,C,S,R;const U=i.value.token_a.decimals,E=i.value.token_b.decimals;if(l.value==="0"&&v.value==="∞")y=N.value.TickUtil.getMinIndex(Number(i.value.tickSpacing)),C=N.value.TickUtil.getMaxIndex(Number(i.value.tickSpacing));else if(Y.value=="custom"){T.value?(d=Number(l.value),b=Number(v.value)):(d=new h(1).div(v.value).toString(),b=new h(1).div(l.value).toString()),console.log("0519###toAdd###min###",d),console.log("0519###toAdd###max###",b),console.log("0519###toAdd###minPrice.value###",l.value),console.log("0519###toAdd###maxPrice.value###",v.value);try{S=d==0?N.value.TickUtil.getMinIndex(Number(i.value.tickSpacing)):N.value.TickMath.priceToTickIndex(new h(d),U,E)}catch{S=N.value.TickUtil.getMinIndex(Number(i.value.tickSpacing))}try{R=N.value.TickMath.priceToTickIndex(new h(b),U,E)}catch{R=N.value.TickUtil.getMaxIndex(Number(i.value.tickSpacing))}y=N.value.getNearestTickByTick(S,Number(i.value.tickSpacing)),C=N.value.getNearestTickByTick(R,Number(i.value.tickSpacing))}else y=to.value[Y.value].lower,C=to.value[Y.value].upper;console.log(y,C,"add3155");try{const fe=await N.value.getAddLiquidityTransactionPayload({pool:{poolAddress:i.value.poolAddress,token_a:i.value.token_a,token_b:i.value.token_b},amount:f.value?w.value:k.value,fix_amount_a:t,tick_lower:y,tick_upper:C,index:0,slippage:Number(je.value)/100,roundUp:!0,collect_fee:!1});let Oe;if(q.value.chainName==="Aptos")Oe=await O.value.currentWallet.signAndSubmitTransaction(fe);else{const qe=await O.value.currentWallet.signAndExecuteTransactionBlock(fe);Oe=N.value.handleTx(qe)}if(console.log("0410###tx###",Oe),Oe&&Oe.hash){yo(Oe.hash),Ye(!1),ho(!0);const qe=Un();let ge;i.value.needReverse?i.value.token_a.address.toLowerCase()===r.value.address.toLowerCase()&&i.value.token_b.address.toLowerCase()===u.value.address.toLowerCase()?ge=!1:ge=!0:i.value.token_a.address.toLowerCase()===r.value.address.toLowerCase()&&i.value.token_b.address.toLowerCase()===u.value.address.toLowerCase()?ge=!0:ge=!1,console.log(ge,"===>directs");const oo={title:"Supplied",desc:n("tips.addLiquiditySuccessText",{from:ye.value?"":`${w.value} ${(ue=r.value)==null?void 0:ue.symbol}`,and:!ye.value&&!we.value?"and":"",to:we.value?"":`${k.value} ${(Pe=u.value)==null?void 0:Pe.symbol}`}),hash:Oe.hash,tit:"Position Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:ge?(te=r.value)==null?void 0:te.address:(x=u.value)==null?void 0:x.address,numa:ge?w.value:k.value,logoa:ge?A.value.tokensObj&&r.value&&r.value.address&&A.value.tokensObj[r.value.address]&&A.value.tokensObj[r.value.address].logoURI:A.value.tokensObj&&u.value&&u.value.address&&A.value.tokensObj[u.value.address]&&A.value.tokensObj[u.value.address].logoURI,tokenb:ge?(pe=u.value)==null?void 0:pe.address:(Re=r.value)==null?void 0:Re.address,numb:ge?k.value:w.value,logob:ge?A.value.tokensObj&&u.value&&u.value.address&&A.value.tokensObj[u.value.address]&&A.value.tokensObj[u.value.address].logoURI:A.value.tokensObj&&r.value&&r.value.address&&A.value.tokensObj[r.value.address]&&A.value.tokensObj[r.value.address].logoURI},text:`Deopsit ${ye.value?"":`${w.value} ${(eo=r.value)==null?void 0:eo.symbol}`} ${!ye.value&&!we.value?"and":""} ${we.value?"":`${k.value} ${(Ue=u.value)==null?void 0:Ue.symbol}`}`};q.value.chainName!=="Aptos"&&(oo.res=Oe.res),N.value.showTransitionPending(oo);const ze=await N.value.watchTransaction(oo,!0);if(ze.status){if(ho(!1),A.value.setCurrentPositionLoading(!0),W.value=!0,console.log(ze.nftInfo,"===> watchInfo.nftInfo"),q.value.chainName==="Aptos"){if(await A.value.setCurrentPositionInfo(ze.nftInfo[0].data.id.creator,ze.nftInfo[0].data.id.collection,ze.nftInfo[0].data.name,q.value.chainName),o)try{await Rn.subscribePosition({pool_address:Bo.value.poolAddress,position_index:Bo.value.index},Bo.value.nftHash)}catch(He){console.log(He,"e")}}else{const He=ze.nftInfo,mo=await at(2e3);if(await A.value.setCurrentPositionInfo(He==null?void 0:He.pool,"","",q.value.chainName,He==null?void 0:He.position),await at(1e3),console.log("0529###nftInfo###",He),console.log("0529###currentPositionInfo.value.index###",Bo.value.index),o)try{await Rn.subscribePosition({pool_address:Bo.value.poolAddress,position_index:Bo.value.index},Bo.value.nftHash)}catch(uo){console.log(uo)}}setTimeout(()=>{xe.updateCurrentPools(i.value.poolAddress,q.value.chainName),N.value.getAccount(O.value.address)},3e3),setTimeout(async()=>{wn()},3e3)}Ho()}else Ye(!1),Co(!0);w.value="",k.value=""}catch(fe){w.value="",k.value="",console.log("0330###Add liquidity Error###",fe),Ye(!1),Co(!0)}},$t=o=>{switch(o){case"active":return n("newAdd.activeTips");case"passive":return n("newAdd.passiveTips");case"full range":return n("newAdd.fullRangTips");case"suggested":return n("newAdd.suggestedTips");case"custom":return n("newAdd.customTips")}},Tt=o=>{switch(o){case"suggested":return n("newAdd.suggested");case"active":return n("newAdd.active");case"passive":return n("newAdd.conservative");case"full range":return n("newAdd.fullRange");case"custom":return n("newAdd.custom")}},cn=o=>{console.log("priceTab====>",o),console.log("priceTab###poolInfo###",i.value),Y.value=o.key.toLowerCase();const t=i.value.token_a.decimals,d=i.value.token_b.decimals,{lower:b,upper:y}=o,C=N.value.TickMath.tickIndexToPrice(b,t,d).toString(),S=N.value.TickMath.tickIndexToPrice(y,t,d).toString();if(o.key=="full range"){Wo.value=b,zo.value=y,Je(!0),ro();return}console.log(T.value,"===>direct.value"),T.value?(L.value=String(C),l.value=String(C),K.value=String(S),v.value=String(S),Wo.value=b,zo.value=y,ro()):(L.value=String(1/Number(S)),l.value=String(1/Number(S)),K.value=String(1/Number(C)),v.value=String(1/Number(C)),Wo.value=N.value.TickMath.priceToTickIndex(new h(1/Number(S)),t,d),zo.value=N.value.TickMath.priceToTickIndex(new h(1/Number(C)),t,d),ro())},St=z(()=>A.value.tokensObj&&r.value.address&&A.value.tokensObj[r.value.address]&&A.value.tokensObj[r.value.address].logoURI),At=z(()=>A.value.tokensObj&&u.value.address&&A.value.tokensObj[u.value.address]&&A.value.tokensObj[u.value.address].logoURI),Un=()=>{var d,b,y,C,S,R,U,E;let o=null;const t=A.value.poolConfigList;for(let F=0;F<t.length;F++){const J=t[F];if(J.token_a.address.toUpperCase()===((b=(d=r==null?void 0:r.value)==null?void 0:d.address)==null?void 0:b.toUpperCase())&&J.token_b.address.toUpperCase()===((C=(y=u==null?void 0:u.value)==null?void 0:y.address)==null?void 0:C.toUpperCase())||J.token_b.address.toUpperCase()===((R=(S=r==null?void 0:r.value)==null?void 0:S.address)==null?void 0:R.toUpperCase())&&J.token_a.address.toUpperCase()===((E=(U=u==null?void 0:u.value)==null?void 0:U.address)==null?void 0:E.toUpperCase())){o=J;break}}return o},Nt=o=>{var d,b,y,C,S,R,U,E,F,J;console.log(o,"item===>3480");const t=Un();if(t&&($e.value=t.needReverse?t==null?void 0:t.token_b:t==null?void 0:t.token_a,Te.value=t.needReverse?t==null?void 0:t.token_a:t==null?void 0:t.token_b,r.value=t.needReverse?t==null?void 0:t.token_b:t==null?void 0:t.token_a,u.value=t.needReverse?t==null?void 0:t.token_a:t==null?void 0:t.token_b,console.log("0524###test###11111###samePoolInfo###",t),T.value=r.value.address===((d=t==null?void 0:t.token_a)==null?void 0:d.address)),We.value.includes(o.fee))D.value=o.label,Uo.value=o.fee,Ce.push(`/deposit?tokena=${t?t.needReverse?(y=t==null?void 0:t.token_b)==null?void 0:y.address:(b=t==null?void 0:t.token_a)==null?void 0:b.address:T.value?r.value.address:u.value.address}&tokenb=${t?t.needReverse?(S=t==null?void 0:t.token_a)==null?void 0:S.address:(C=t==null?void 0:t.token_b)==null?void 0:C.address:T.value?u.value.address:r.value.address}&fee=${o.fee}`);else{if(console.log(no[r.value.address],"filterCreatePoolCoin[fromCoin.value.address]"),console.log(no[u.value.address],"filterCreatePoolCoin[toCoin.value.address]"),console.log(no.value,"filterCreatePoolCoin===>"),q.value.chainName!=="Aptos"&&!no.value[r.value.address]&&!no.value[u.value.address]){console.log(111,"===>111");return}D.value=o.label,i.value&&(l.value="",v.value=""),w.value="",k.value="",Ee.value="",so.value="",l.value="",v.value="",vn.value="",pn.value="",console.log("====>3558"),Ce.push(`/deposit?action=create-pool&tokena=${t?t.needReverse?(U=t==null?void 0:t.token_b)==null?void 0:U.address:(R=t==null?void 0:t.token_a)==null?void 0:R.address:T.value?r.value.address:u.value.address}&tokenb=${t?t.needReverse?(F=t==null?void 0:t.token_a)==null?void 0:F.address:(E=t==null?void 0:t.token_b)==null?void 0:E.address:T.value?u.value.address:r.value.address}&fee=${o.fee}&from=${(J=p==null?void 0:p.query)==null?void 0:J.from}`)}},Lt=g(!1),qt=()=>{i.value,lo.value=!0},$=g(null),vn=g(""),pn=g(""),mn=o=>{var R,U,E,F,J,ue,Pe,te,x,Re,pe,eo;if(o?(vn.value=o,Ee.value=o,so.value=o,pn.value=new h(1).div(new h(o)).toString(),G.value=!1):(vn.value="",Ee.value="",so.value="",pn.value=""),!((R=$e.value)!=null&&R.address)||!((U=Te.value)!=null&&U.address))return;let t=!1;const d=A.value.poolConfigList;let b=null;for(let Ue=0;Ue<d.length;Ue++){const fe=d[Ue];if(fe.token_a.address.toUpperCase()===((F=(E=$e==null?void 0:$e.value)==null?void 0:E.address)==null?void 0:F.toUpperCase())&&fe.token_b.address.toUpperCase()===((ue=(J=Te==null?void 0:Te.value)==null?void 0:J.address)==null?void 0:ue.toUpperCase())){t=fe.needReverse,b=fe;break}else if(fe.token_b.address.toUpperCase()===((te=(Pe=$e==null?void 0:$e.value)==null?void 0:Pe.address)==null?void 0:te.toUpperCase())&&fe.token_a.address.toUpperCase()===((Re=(x=Te==null?void 0:Te.value)==null?void 0:x.address)==null?void 0:Re.toUpperCase())){t=fe.needReverse,b=fe;break}}let y=!1;N.value.getIsSortedSymbols((pe=$e.value)==null?void 0:pe.address,(eo=Te.value)==null?void 0:eo.address)&&(y=!0);let C;y&&!T.value?C=!0:y&&T.value||!y&&T.value?C=!1:C=!0,console.log("0518###c####direct.value####",T.value),console.log("0518###c####createPoolNeedReverse####",y),console.log("0518###c####newDirect####",C);const S=q.value.chainName=="Aptos"?Bl:_l;if(r.value&&u.value&&o){const Ue=b?b==null?void 0:b.token_a.decimals:y?Te.value.decimals:$e.value.decimals,fe=b?b==null?void 0:b.token_b.decimals:y?$e.value.decimals:Te.value.decimals,Oe=o&&N.value.TickMath.priceToSqrtPriceX64(C?new h(1/o):new h(o),Ue,fe);console.log(Oe,"===>current_sqrt_price");const qe=o&&N.value.TickMath.priceToSqrtPriceX64(new h(1).div(o),r.value.decimals,u.value.decimals);console.log(!C,"===>!newDirect"),console.log(Ue,fe,"decimalsA,decimalsB===>");const ge=N.value.TickMath.priceToTickIndex(C?new h(1).div(o):new h(o),Ue,fe);console.log(ge,"==>currentTickIndex");const oo=ge-S[p.query.fee]*5,ze=ge+S[p.query.fee]*5,He=N.value.TickMath.tickIndexToPrice(oo,Ue,fe).toString(),mo=N.value.TickMath.tickIndexToPrice(ze,Ue,fe).toString();_o.value?(l.value="0",v.value="∞"):C?(l.value=String(1/mo),v.value=String(1/He),L.value=String(1/mo),K.value=String(1/He)):(l.value=He,v.value=mo,L.value=He,K.value=mo),console.log("0518###c####createPoolFromCoin.value####",$e.value),console.log("0518###c####createPoolToCoin.value####",Te.value),console.log("0518###c####createPoolNeedReverse####",y);const uo={token_a:b?b.token_a:y?Te.value:$e.value,token_b:b?b.token_b:y?$e.value:Te.value,isCreate:!0,tickSpacing:S[p.query.fee],currentPrice:o,current_sqrt_price:Oe,tick_lower:oo,tick_upper:ze,current_tick_index:ge,currentPriceReverse:en(String(1/o),6),reverse_current_sqrt_price:qe,needReverse:t,fee:p.query.fee};$.value=uo,console.log("0518###c####poolInfos####",uo),ro()}else $.value=null,l.value="",v.value=""},Mt=async()=>{var E,F,J,ue;if(q.value.chainName!=="Aptos"){On();return}lo.value=!1;let o,t,d,b,y,C;const S=$e.value.decimals,R=Te.value.decimals;yo(""),Eo(n("tips.increaseLiquiditySuccess",{from:ye.value?"":`${w.value} ${(E=r.value)==null?void 0:E.symbol}`,and:!ye.value&&!we.value?"and":"",to:we.value?"":`${k.value} ${(F=u.value)==null?void 0:F.symbol}`})),Ye(!0),l.value==="0"&&v.value==="∞"?(d=N.value.TickUtil.getMinIndex(Number($.value.tickSpacing)),b=N.value.TickUtil.getMaxIndex(Number($.value.tickSpacing))):(T.value?(o=Number(l.value),t=Number(v.value)):(o=1/Number(v.value),t=1/Number(l.value)),y=o==0?-443636:N.value.TickMath.priceToTickIndex(new h(o),S,R),C=N.value.TickMath.priceToTickIndex(new h(t),S,R),d=N.value.getNearestTickByTick(y,Number($.value.tickSpacing)),b=N.value.getNearestTickByTick(C,Number($.value.tickSpacing)));const U=T.value?f.value:!f.value;try{const Pe=await N.value.getCreatPoolTransactionPayload({coinTypeA:$e.value.address,coinTypeB:Te.value.address,tick_spacing:Number($.value.tickSpacing),initialize_sqrt_price:new So($.value.current_sqrt_price),uri:"",current_tick_index:$.value.current_tick_index,max_amount_a:T.value?w.value:k.value,max_amount_b:T.value?k.value:w.value,tick_lower:d,tick_upper:b,slippage:Number(je.value)/100,decimalsA:S,decimalsB:R,fix_amount_a:U,liquidityInput:wo.value});let te;if(console.log(JSON.stringify(Pe),"===>creatPoolPayload"),q.value.chainName==="Aptos")te=await O.value.currentWallet.signAndSubmitTransaction(Pe);else{const x=await O.value.currentWallet.signAndExecuteTransactionBlock(Pe);te=N.value.handleTx(x)}if(te&&te.hash){yo(te.hash),Ye(!1),ho(!0);const x={title:"Created pool",desc:"Pool created successfully ",hash:te.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(J=r.value)==null?void 0:J.address}`,numa:ye.value?"":`- ${w.value}`,logoa:A.value.tokensObj&&r.value&&r.value.address&&A.value.tokensObj[r.value.address]&&A.value.tokensObj[r.value.address].logoURI,tokenb:`${(ue=u.value)==null?void 0:ue.address}`,numb:we.value?"":`- ${k.value}`,logob:A.value.tokensObj&&u.value&&u.value.address&&A.value.tokensObj[u.value.address]&&A.value.tokensObj[u.value.address].logoURI},text:"Pool created successfully"};q.value.chainName!=="Aptos"&&(x.res=te.res),N.value.showTransitionPending(x),(await N.value.watchTransaction(x,!0)).status&&(ho(!1),ne.value=!0,setTimeout(()=>{xe.setPoolConfigList(q.value.chainName,q.value.filterCoinsObj),N.value.getAccount(O.value.address)},1e3)),Ho()}else Ye(!1),Co(!0);w.value="",k.value=""}catch(Pe){xe.setPoolConfigList(q.value.chainName,q.value.filterCoinsObj),lo.value=!1,console.log(Pe,"error===>"),w.value="",k.value="",Ye(!1),Co(!0)}},On=async()=>{var Pe,te,x,Re,pe,eo,Ue,fe,Oe,qe,ge,oo,ze,He,mo,uo,_n,Fn,jn,Dn,En,Hn,Wn,zn,Xn,Vn,Kn,Zn,Gn,Jn,Qn,Yn,xn,et,ot,nt;lo.value=!1,console.log("创建sui池子");let o=!1;N.value.getIsSortedSymbols($e.value.address,Te.value.address)&&(o=!0),yo("");const t=ye.value?"":`${w.value} ${(Pe=r.value)==null?void 0:Pe.symbol}`,d=we.value?"":`${k.value} ${(te=u.value)==null?void 0:te.symbol}`;console.log("0424###createPoolFromCoin###",$e.value),console.log("0424###createPoolToCoin###",Te.value),console.log("0424###needReverse###",o),console.log("0424###createPoolInfo?.value?.needReverse###",(x=$==null?void 0:$.value)==null?void 0:x.needReverse),Eo(n("tips.increaseLiquiditySuccess",{from:!o&&!((Re=$==null?void 0:$.value)!=null&&Re.needReverse)||o&&((pe=$==null?void 0:$.value)!=null&&pe.needReverse)?t:d,and:!ye.value&&!we.value?"and":"",to:!o&&!((eo=$==null?void 0:$.value)!=null&&eo.needReverse)||o&&((Ue=$==null?void 0:$.value)!=null&&Ue.needReverse)?d:t})),Ye(!0);let b="",y="",C="",S="",R="",U="",E=0,F=0,J=!1,ue;if(o||(fe=$==null?void 0:$.value)!=null&&fe.needReverse){const To=o&&!((Oe=$==null?void 0:$.value)!=null&&Oe.needReverse);b=To?(ze=(oo=$==null?void 0:$.value)==null?void 0:oo.token_b)==null?void 0:ze.address:(ge=(qe=$==null?void 0:$.value)==null?void 0:qe.token_a)==null?void 0:ge.address,y=To?(_n=(uo=$==null?void 0:$.value)==null?void 0:uo.token_a)==null?void 0:_n.address:(mo=(He=$==null?void 0:$.value)==null?void 0:He.token_b)==null?void 0:mo.address,C=To?(En=(Dn=$==null?void 0:$.value)==null?void 0:Dn.token_b)==null?void 0:En.decimals:(jn=(Fn=$==null?void 0:$.value)==null?void 0:Fn.token_a)==null?void 0:jn.decimals,S=To?(Xn=(zn=$==null?void 0:$.value)==null?void 0:zn.token_a)==null?void 0:Xn.decimals:(Wn=(Hn=$==null?void 0:$.value)==null?void 0:Hn.token_b)==null?void 0:Wn.decimals,(Vn=$==null?void 0:$.value)!=null&&Vn.needReverse?(R=T.value?w.value:k.value,U=T.value?k.value:w.value,E=T.value?Number(l.value):1/Number(v.value),F=T.value?Number(v.value):1/Number(l.value),J=T.value?f.value:!f.value,ue=T.value?Ee.value:1/Number(Ee.value)):(R=T.value?k.value:w.value,U=T.value?w.value:k.value,E=T.value?1/Number(v.value):Number(l.value),F=T.value?1/Number(l.value):Number(v.value),J=T.value?!f.value:f.value,ue=T.value?1/Number(Ee.value):Ee.value)}else b=(Zn=(Kn=$==null?void 0:$.value)==null?void 0:Kn.token_a)==null?void 0:Zn.address,y=(Jn=(Gn=$==null?void 0:$.value)==null?void 0:Gn.token_b)==null?void 0:Jn.address,C=(Yn=(Qn=$==null?void 0:$.value)==null?void 0:Qn.token_a)==null?void 0:Yn.decimals,S=(et=(xn=$==null?void 0:$.value)==null?void 0:xn.token_b)==null?void 0:et.decimals,R=T.value?w.value:k.value,U=T.value?k.value:w.value,E=T.value?Number(l.value):1/Number(v.value),F=T.value?Number(v.value):1/Number(l.value),J=T.value?f.value:!f.value,ue=T.value?Ee.value:1/Number(Ee.value);try{console.log("0501###toCreatePool###params###",{coinTypeA:b,coinTypeB:y,decimalsA:C,decimalsB:S,amountA:R,amountB:U,minPrice:E,maxPrice:F,fix_amount_a:J,tick_spacing:Number($.value.tickSpacing),slippage:Number(je.value)/100,price:ue});const To=await N.value.getCreatPoolTransactionPayload({coinTypeA:b,coinTypeB:y,decimalsA:C,decimalsB:S,amountA:R,amountB:U,minPrice:l.value=="0"&&v.value=="∞"?"0":E,maxPrice:l.value=="0"&&v.value=="∞"?"∞":F,fix_amount_a:J,tick_spacing:Number($.value.tickSpacing),slippage:Number(je.value)/100,price:ue}),Bt=await O.value.currentWallet.signAndExecuteTransactionBlock(To),Qo=N.value.handleTx(Bt);if(Qo&&Qo.hash){yo(Qo.hash),Ye(!1),ho(!0);const $n={title:"Created pool",desc:"Pool created successfully ",hash:Qo.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(ot=r.value)==null?void 0:ot.address}`,numa:ye.value?"":`- ${w.value}`,logoa:A.value.tokensObj&&r.value&&r.value.address&&A.value.tokensObj[r.value.address]&&A.value.tokensObj[r.value.address].logoURI,tokenb:`${(nt=u.value)==null?void 0:nt.address}`,numb:we.value?"":`- ${k.value}`,logob:A.value.tokensObj&&u.value&&u.value.address&&A.value.tokensObj[u.value.address]&&A.value.tokensObj[u.value.address].logoURI},text:"Pool created successfully"};q.value.chainName!=="Aptos"&&($n.res=Qo.res),N.value.showTransitionPending($n),(await N.value.watchTransaction($n,!0)).status&&(ho(!1),ne.value=!0,setTimeout(()=>{xe.setPoolConfigList(q.value.chainName,q.value.filterCoinsObj),N.value.getAccount(O.value.address)},1e3)),Ho()}else Ye(!1),Co(!0);w.value="",k.value=""}catch(To){console.log("0407###createPool###error##",To),lo.value=!1,xe.setPoolConfigList(q.value.chainName,q.value.filterCoinsObj),w.value="",k.value="",Ye(!1),Co(!0)}},Rt=z(()=>{var o,t,d,b,y,C;return((o=r.value)==null?void 0:o.isSelfBuilt)||((t=u.value)==null?void 0:t.isSelfBuilt)||((b=A.value.tokensObj[(d=r.value)==null?void 0:d.address])==null?void 0:b.isSelfBuilt)||((C=A.value.tokensObj[(y=u.value)==null?void 0:y.address])==null?void 0:C.isSelfBuilt)}),Ut=o=>{var t;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((t=A.value.tokensObj[o==null?void 0:o.address])==null?void 0:t.logo_url)||(q.value.theme==="default"?Xe("/image/coins/unknown.png"):Xe("/image/coins/sui-unknown.png"))},Pn=(o,t)=>{console.log(V.value,"===>currentCoinKey.value"),console.log(o);const d=localStorage.getItem(o.address);console.log(A.value.tokensObj,"===>pools.value.tokensObj"),console.log(d,"===>coinLocak"),A.value.tokensObj&&A.value.tokensObj[o.address]&&A.value.tokensObj[o.address].isSelfBuilt&&!d&&(t=="fromCoin"&&(Ko.value=o),t=="toCoin"&&(Zo.value=o),Bn.value=!0)};ke(()=>[r.value,u.value],([o,t])=>{o&&!fo(o)&&Pn(o,"fromCoin"),t&&!fo(t)&&Pn(t,"toCoin")},{immediate:!0});const Bn=g(!1),Ot=()=>{fn.value!=="Aptos"?Ce.push("/pool/list"):Ce.push("/pools")},fn=z(()=>q.value.chainName);ke(()=>[q.value.chainName,q.value.filterCoinsObj],([o,t])=>{o&&t&&xe.setPoolConfigList(o,t)},{immediate:!0}),ke(()=>[We.value,no.value,r.value,u.value,$o.value],([o,t,d,b,y])=>{console.log(o.value,"==>isCreatePool.value"),console.log(t.value,"===>filterCreatePoolCoin.value"),console.log(d,"===>fromCoin"),console.log(b,"===>toCoin"),y&&o&&t&&!o.includes(1e-4)&&!o.includes(5e-4)&&!o.includes(.0025)&&!o.includes(.01)&&!t[d==null?void 0:d.address]&&!t[b==null?void 0:b.address]&&(D.value="")},{immediate:!0});const _o=g(!0),In=()=>{Je(!_o.value),_o.value=!_o.value,mn($.value.currentPrice)};return{isFullRange:_o,clickFullRange:In,warningToCoin:Zo,warningFromCoin:Ko,getTokenSource:Pn,closeTokenWarning:Ot,isShowTokenWarning:Bn,chainName:fn,hasCreatePool:$o,isCreateSuccess:ne,intPriceReverse:pn,isShowMask:Po,isPc:e,intPrice:vn,createPoolToCoin:Te,createPoolFromCoin:$e,getPoolInfoSuccess:Jo,toCreatePool:Mt,createPoolInfo:$,changecurrentPrice:mn,isShowCreatePoolModal:Lt,addOrCreate:qt,halfBtnSelect:un,selectFee:Nt,isViewDetail:W,addCommom:De,decimalUi:Ne,fromCoinUrl:St,toCoinUrl:At,t:n,wallet:O,toAdd:It,chartLoading:G,currentTick:le,tickList:Fe,poolInfo:i,storeIndex:q,importIcon:Xe,addLiquidityBtnText:M,slippage:je,countdown:H,loading:X,fromCoin:r,toCoin:u,openCoinSelect:ln,onCoinSelect:sn,existingCoins:Z,lastSelectCoin:ee,currentCoinKey:V,showCoinSelect:he,fromCoinAmount:w,toCoinAmount:k,maxBtnSelect:rn,fixedFromCoin:f,isShowLiquidityModal:lo,direct:T,toggle:an,edit:ce,inputValue:D,feeTierList:Qe,minPrice:l,maxPrice:v,invalidPriceRange:Vo,defaultMinPrice:L,defaultMaxPrice:K,priceRangeChangeMin:nn,priceRangeChangeMax:tn,toFullRange:Je,clearAll:dn,clickClear:j,positionError:me,positionTips:Se,router:Ce,clickRefresh:Io,fromCoinBlance:Ze,toCoinBlance:Ge,showToCoinLock:we,showFromCoinLock:ye,currentPriceReverse:so,currentPrice:Ee,getPirceText:$t,currentPriceTab:Y,currentPriceTabList:go,getPirceKey:Tt,priceTab:cn,aprRewardsParameter:Ie,aprRewardsDateList:re,aprTab:No,reviseValue:Lo,label:Ve,aprTitle:Le,isCreatePool:We,before7dContractPriceLowest:Ke,before7dContractPriceHighest:Me,aprRewardsTime:ve,addLiquidityBtnDisabled:Do,checkNullObj:fo,sFixD:Yo,toCreateSuiPool:On,isSelfBuilt:Rt,getCoinIcon:Ut,isCreatePoolToCoin:Mo,isCreatePoolFromCoin:Ro,filterCreatePoolCoin:no,poolTvl:ko}}}),wt=""+new URL("img-no-data_2x.e925467a.png",import.meta.url).href,Pt=""+new URL("img-no-data_2x.8bc9afa2.png",import.meta.url).href;const io=e=>(Fo("data-v-db351047"),e=e(),jo(),e),jl={class:"pools-container"},Dl={key:0,class:"content pc-content"},El={class:"content-left"},Hl={class:"content-left-bg"},Wl={class:"content-left-title"},zl={key:0,class:"pool-warning"},Xl={class:"coin-select"},Vl={key:0,class:"icon","aria-hidden":"true"},Kl=io(()=>a("use",{"xlink:href":"#icon-edit"},null,-1)),Zl=[Kl],Gl={key:0,class:"fee-container"},Jl=["onClick"],Ql={key:0,class:"icon fee-disabled","aria-hidden":"true"},Yl=io(()=>a("use",{"xlink:href":"#icon-icon-disable"},null,-1)),xl=[Yl],es={key:1},os={key:2},ns={key:0},ts={key:1,class:"text-active"},as={class:"deposit-title"},is={class:"card-container"},ls={class:"card-item"},ss={class:"card-item"},rs={key:0,class:"icon","aria-hidden":"true"},us=io(()=>a("use",{"xlink:href":"#icon-icon-add"},null,-1)),ds=[us],cs={class:"pc-network"},vs={class:"content-right"},ps={key:0,class:"initPrice-mask"},ms={class:"content-right-title"},fs=io(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1)),gs={class:"content-right-bg"},bs={key:1,class:"price-tab"},ks=["onClick"],hs={key:2,class:"create-pool-tips"},Cs={key:3,class:"set-price-range"},ys={class:"radio"},ws={key:0,src:Ct},Ps=io(()=>a("span",null,"Full Range",-1)),Is={key:0},$s={key:1,class:"coin"},Ts={key:2,class:"coin"},Ss={key:3,class:"no-price"},As={alt:""},Ns={alt:""},Ls={key:6,class:"position-tips"},qs={alt:""},Ms={class:"tips"},Rs={key:7,class:"position-tips"},Us={alt:""},Os={class:"error"},Bs={key:8,class:"d3-chart-box"},_s={key:9,class:"day-7-price-range"},Fs=io(()=>a("i",null,null,-1)),js={class:"gray"},Ds={key:11,class:"create-pool-tips"},Es={key:12,class:"create-pool-warning"},Hs={key:1,class:"no-data"},Ws={key:0,src:wt,alt:""},zs={key:1,src:Pt,alt:""},Xs={key:1,class:"content h5-content"},Vs={class:"content-left"},Ks={class:"content-left-bg"},Zs={class:"content-left-title"},Gs={key:0,class:"pool-warning"},Js={class:"coin-select"},Qs={key:0,class:"icon","aria-hidden":"true"},Ys=io(()=>a("use",{"xlink:href":"#icon-edit"},null,-1)),xs=[Ys],er={key:0,class:"fee-container"},or=["onClick"],nr={key:0},tr={key:1},ar={key:0},ir={key:1,class:"text-active"},lr={class:"content-right"},sr={key:0,class:"initPrice-mask"},rr={class:"content-right-title"},ur=io(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1)),dr={class:"content-right-bg"},cr={key:1,class:"price-tab"},vr=["onClick"],pr={key:2,class:"create-pool-tips"},mr={key:3,class:"set-price-range"},fr={class:"radio"},gr={key:0,src:Ct},br=io(()=>a("span",null,"Full Range",-1)),kr={key:0},hr={key:1,class:"coin"},Cr={key:2,class:"coin"},yr={key:3,class:"no-price"},wr={alt:""},Pr={alt:""},Ir={key:6,class:"position-tips"},$r=["src"],Tr={class:"tips"},Sr={key:7,class:"position-tips"},Ar=["src"],Nr={class:"error"},Lr={key:8,class:"d3-chart-box"},qr={key:9,class:"day-7-price-range"},Mr=io(()=>a("i",null,null,-1)),Rr={class:"gray"},Ur={key:11,class:"create-pool-tips"},Or={key:1,class:"no-data"},Br={key:0,src:wt,alt:""},_r={key:1,src:Pt,alt:""},Fr={key:0,class:"icon","aria-hidden":"true"},jr=io(()=>a("use",{"xlink:href":"#icon-icon-add"},null,-1)),Dr=[jr],Er={class:"pc-network"},Hr={class:"new-right"},Wr={class:"deposit-title"},zr={class:"card-container"},Xr={class:"card-item"},Vr={class:"card-item"},Kr={key:0,class:"icon","aria-hidden":"true"},Zr=io(()=>a("use",{"xlink:href":"#icon-icon-add"},null,-1)),Gr=[Zr],Jr={class:"h5-network"};function Qr(e,n,B,_,O,Q){var le,G,ae,Fe,Y,Ie,ve,Le,re,Ve,oe,q,Po,N,no,No,Lo,go,Io,Vo,Je,We,bo,ko,Qe,je,qo,Do,M,I,Ke,Me,Ce,r,u,nn,tn,an,Mo,Ro,ln,$e,Te,Ko,Zo,sn,rn,un,dn,lo,ho,Co,Ye,Eo,yo,Ho,p,xe,$o,A,wo,ye,we,Wo,zo,Ee,so,ro,Uo,Xo;const H=_t,ne=ba,W=Xt,X=Sa,V=Vt,Z=Qt,ee=Ra,he=ea,T=Mn,_e=na,f=Fa,j=ai,w=vi,k=ft,l=ta,v=Qi,L=sa,K=Il,ce=Ol,Se=jt,me=oa,D=hn("image");return s(),m("div",jl,[se(H,{url:e.storeIndex.theme=="default"?"/pools":"/pool/list"},null,8,["url"]),se(ne,{"pool-info":e.poolInfo,onClearAll:e.clearAll,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClearAll","onClickRefresh"]),e.isPc?(s(),m("div",Dl,[a("div",El,[a("div",Hl,[a("div",Wl,[Be(c(e.$t("common.selectPool"))+" ",1),se(W,{placement:"bottom","arrow-point-at-center":""},{title:Ae(()=>[a("span",null,c(e.t("newAdd.poolWarning")),1)]),default:Ae(()=>[e.isSelfBuilt?(s(),m("div",zl)):P("",!0)]),_:1})]),a("div",Xl,[se(X,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.logoURI:e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.symbol:e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b:e.poolInfo.token_a:e.createPoolFromCoin,onClick:n[0]||(n[0]=i=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),se(X,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.logoURI:e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.symbol:e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a:e.poolInfo.token_b:e.createPoolToCoin,onClick:n[1]||(n[1]=i=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),a("div",{class:be(["pool-fee",e.edit?"pool-fee-edit":""])},[a("div",{class:"pool-fee-header",onClick:n[2]||(n[2]=i=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[a("span",{class:be(e.inputValue?"":"fee-span")},c(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(s(),m("svg",Vl,Zl)):P("",!0)]),e.edit?(s(),m("div",Gl,[(s(!0),m(Ao,null,xo(e.feeTierList,(i,Oo)=>{var to,Go,Jo,Ze,Ge;return s(),m("div",{key:Oo,class:be(["fee-item",[e.inputValue&&e.inputValue==i.label?"fee-item-active":"",e.isCreatePool.includes(i.fee)&&e.$route.query.action?" pool-created":" pool-not-created",e.chainName!=="Aptos"&&!e.isCreatePool.includes(i.fee)&&!e.filterCreatePoolCoin[(to=e.fromCoin)==null?void 0:to.address]&&!e.filterCreatePoolCoin[(Go=e.toCoin)==null?void 0:Go.address]?"disabled":""]]),onClick:Sn(wn=>e.selectFee(i),["stop"])},[e.chainName!=="Aptos"&&!e.isCreatePool.includes(i.fee)&&!e.filterCreatePoolCoin[(Jo=e.fromCoin)==null?void 0:Jo.address]&&!e.filterCreatePoolCoin[(Ze=e.toCoin)==null?void 0:Ze.address]?(s(),m("svg",Ql,xl)):P("",!0),e.$route.query.action=="create-pool"?(s(),m("div",es,[a("p",null,c(i.title),1),a("p",{class:be(e.isCreatePool&&e.isCreatePool.includes(i.fee)?"text-default":"text-theme")},c(e.isCreatePool&&e.isCreatePool.includes(i.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(s(),m("div",os,[a("p",{class:be(e.isCreatePool&&e.isCreatePool.includes(i.fee)?"text-active":"text-default")},c(i.title),3),e.isCreatePool&&!e.isCreatePool.includes(i.fee)?(s(),m("p",ns,c(e.$t("newAdd.notCreated")),1)):P("",!0),e.isCreatePool&&e.isCreatePool.includes(i.fee)?(s(),m("p",ts,c(e.poolTvl&&e.poolTvl[i.fee]&&((Ge=e.poolTvl[i.fee])==null?void 0:Ge.rateText)),1)):P("",!0)])),a("span",null,c(i.text),1)],10,Jl)}),128))])):P("",!0)],2),a("div",as,c(e.$t("newAdd.depositAmounts")),1),a("div",is,[a("div",ls,[se(V,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[3]||(n[3]=i=>e.fromCoinAmount=i),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[4]||(n[4]=i=>e.maxBtnSelect("fromCoin")),onOnHalf:n[5]||(n[5]=i=>e.halfBtnSelect("fromCoin")),onOnInput:n[6]||(n[6]=i=>{e.fromCoinAmount=i,e.fixedFromCoin=!0}),onOnSelect:n[7]||(n[7]=i=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&e.$route.query.action!=="create-pool"?(s(),de(Z,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):P("",!0)]),a("div",ss,[se(V,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[8]||(n[8]=i=>e.toCoinAmount=i),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[9]||(n[9]=i=>e.maxBtnSelect("toCoin")),onOnHalf:n[10]||(n[10]=i=>e.halfBtnSelect("toCoin")),onOnInput:n[11]||(n[11]=i=>{e.toCoinAmount=i,e.fixedFromCoin=!1}),onOnSelect:n[12]||(n[12]=i=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&e.$route.query.action!=="create-pool"?(s(),de(Z,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):P("",!0)]),((G=(le=e.$route)==null?void 0:le.query)==null?void 0:G.action)=="create-pool"&&(e.showToCoinLock||e.showFromCoinLock||!e.filterCreatePoolCoin[(ae=e.fromCoin)==null?void 0:ae.address]&&!e.filterCreatePoolCoin[(Fe=e.toCoin)==null?void 0:Fe.address])?(s(),de(ee,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):P("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(s(),m("img",{key:1,class:"add",src:lt,alt:"",onClick:n[13]||(n[13]=(...i)=>e.toggle&&e.toggle(...i))})):P("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(s(),m("img",{key:2,class:"add",src:st,alt:"",onClick:n[14]||(n[14]=(...i)=>e.toggle&&e.toggle(...i))})):P("",!0)]),e.poolInfo?(s(),de(he,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):P("",!0)]),se(T,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:n[15]||(n[15]=i=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ae(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")&&e.wallet.connected?(s(),m("svg",rs,ds)):P("",!0),a("span",null,c(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),a("div",cs,[se(_e)])]),a("div",vs,[e.isShowMask?(s(),m("div",ps)):P("",!0),a("div",ms,[Be(c((Y=e.$route)!=null&&Y.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(s(),de(W,{key:0,placement:"bottom","arrow-point-at-center":""},{title:Ae(()=>[a("span",null,c(e.$t("newAdd.selectRangeTips")),1)]),default:Ae(()=>[fs]),_:1})):P("",!0)]),a("div",gs,[!((ve=(Ie=e.$route)==null?void 0:Ie.query)!=null&&ve.action)&&e.poolInfo||(re=(Le=e.$route)==null?void 0:Le.query)!=null&&re.action?(s(),m(Ao,{key:0},[(oe=(Ve=e.$route)==null?void 0:Ve.query)!=null&&oe.action&&!e.poolInfo?(s(),de(f,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):P("",!0),e.poolInfo?(s(),m("div",bs,[(s(!0),m(Ao,null,xo(e.currentPriceTabList,i=>(s(),m("div",{key:i,class:be(["price-item",{"price-item-active":i.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:Oo=>e.priceTab(i)},[se(W,{placement:"bottom","arrow-point-at-center":""},{title:Ae(()=>[a("span",null,c(e.getPirceText(i.key)),1)]),default:Ae(()=>[Be(" "+c(e.getPirceKey(i.key)),1)]),_:2},1024)],10,ks))),128))])):P("",!0),(Po=(q=e.$route)==null?void 0:q.query)!=null&&Po.action&&!e.poolInfo?(s(),m("div",hs,c(e.$t("newAdd.createPoolInitialText")),1)):P("",!0),!e.poolInfo&&((no=(N=e.$route)==null?void 0:N.query)!=null&&no.action)?(s(),m("div",Cs,[a("div",null,c(e.$t("common.setPriceRange")),1),a("div",null,[a("div",{class:be(["tab-item",e.isFullRange?"tab-item-active tab-item-farms-active":""]),onClick:n[16]||(n[16]=Sn(i=>e.clickFullRange(),["stop"]))},[a("div",ys,[e.isFullRange&&e.chainName=="Sui"?(s(),m("img",ws)):P("",!0)]),Ps],2)])])):P("",!0),e.poolInfo||(Lo=(No=e.$route)==null?void 0:No.query)!=null&&Lo.action?(s(),m("div",{key:4,class:be(["current-price",(Io=(go=e.$route)==null?void 0:go.query)!=null&&Io.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(s(),m("span",Is,c(e.$t("common.currentPrice")),1)):P("",!0),e.fromCoin&&e.toCoin&&e.direct?(s(),m("div",$s,[a("span",null,c(e.$t("common.currentPrice")),1),Be(" "+c(e.currentPrice===""?"--":("addCommom"in e?e.addCommom:ie(De))(("decimalUi"in e?e.decimalUi:ie(Ne))(e.currentPrice,6)))+" "+c((Vo=e.toCoin)==null?void 0:Vo.symbol)+" per "+c((Je=e.fromCoin)==null?void 0:Je.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(s(),m("div",Ts,[a("span",null,c(e.$t("common.currentPrice")),1),Be(" "+c(e.currentPriceReverse===""?"--":("addCommom"in e?e.addCommom:ie(De))(("decimalUi"in e?e.decimalUi:ie(Ne))(e.currentPriceReverse,6)))+" "+c((We=e.toCoin)==null?void 0:We.symbol)+" per "+c((bo=e.fromCoin)==null?void 0:bo.symbol),1)])):(s(),m("div",Ss,"0.0")),e.fromCoin&&e.toCoin?(s(),m("div",{key:4,class:be(e.poolInfo&&((ko=e.poolInfo)!=null&&ko.needReverse)||e.createPoolInfo&&((Qe=e.createPoolInfo)!=null&&Qe.needReverse)?"toggle reverse":"toggle")},[a("div",{class:be(e.direct?"item active-item":"item"),onClick:n[17]||(n[17]=i=>e.direct?"":e.toggle())},[ao(a("img",As,null,512),[[D,e.getCoinIcon(e.direct?e.fromCoin:e.toCoin)]]),Be(" "+c(e.direct?(je=e.fromCoin)==null?void 0:je.symbol:(qo=e.toCoin)==null?void 0:qo.symbol),1)],2),a("div",{class:be(e.direct?"item ":"item active-item"),onClick:n[18]||(n[18]=i=>e.direct?e.toggle():"")},[ao(a("img",Ns,null,512),[[D,e.getCoinIcon(e.direct?e.toCoin:e.fromCoin)]]),Be(" "+c(e.direct?(Do=e.toCoin)==null?void 0:Do.symbol:(M=e.fromCoin)==null?void 0:M.symbol),1)],2)],2)):P("",!0)],2)):P("",!0),e.poolInfo||(Ke=(I=e.$route)==null?void 0:I.query)!=null&&Ke.action?(s(),de(j,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,"int-price":e.intPrice,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","int-price","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):P("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(s(),m("div",Ls,[ao(a("img",qs,null,512),[[D,("importIcon"in e?e.importIcon:ie(Xe))("/image/icon-tips@2x.png")]]),a("p",Ms,c(e.$t("tips.positionTips")),1)])):P("",!0),e.positionError&&(e.poolInfo||(Ce=(Me=e.$route)==null?void 0:Me.query)!=null&&Ce.action)&&(Number(e.minPrice)||Number(e.maxPrice))?(s(),m("div",Rs,[ao(a("img",Us,null,512),[[D,("importIcon"in e?e.importIcon:ie(Xe))("/image/icon-tips-error@2x.png")]]),a("p",Os,c(e.$t("tips.positionError")),1)])):P("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(s(),m("div",Bs,[e.fromCoin&&e.toCoin&&e.poolInfo?(s(),de(w,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):P("",!0),e.chartLoading?(s(),de(k,{key:1})):P("",!0)])):P("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(s(),m("div",_s,[Fs,a("span",js,c(e.aprRewardsTime)+" Price Range",1),a("span",null,c(("addCommom"in e?e.addCommom:ie(De))(("decimalUi"in e?e.decimalUi:ie(Ne))(e.before7dContractPriceLowest,6)))+" - "+c(("addCommom"in e?e.addCommom:ie(De))(("decimalUi"in e?e.decimalUi:ie(Ne))(e.before7dContractPriceHighest,6))),1)])):P("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(s(),de(l,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):P("",!0),(u=(r=e.$route)==null?void 0:r.query)!=null&&u.action&&!e.poolInfo&&!e.showFromCoinLock&&!e.showToCoinLock?(s(),m("div",Ds,c(e.$t("newAdd.createPoolText")),1)):P("",!0),((tn=(nn=e.$route)==null?void 0:nn.query)==null?void 0:tn.action)=="create-pool"&&(e.showFromCoinLock||e.showToCoinLock)&&Number(e.maxPrice)>Number(e.minPrice)?(s(),m("div",Es," To create a new pool, the initial price you set must be within your price range. ")):P("",!0)],64)):(s(),m("div",Hs,[e.storeIndex.theme=="default"?(s(),m("img",Ws)):(s(),m("img",zs)),a("p",null,c(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&e.$route.query.action!=="create-pool"?(s(),de(v,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):P("",!0)])])):P("",!0),e.isPc?P("",!0):(s(),m("div",Xs,[a("div",Vs,[a("div",Ks,[a("div",Zs,[Be(c(e.$t("common.selectPool"))+" ",1),se(W,{placement:"bottom","arrow-point-at-center":""},{title:Ae(()=>[a("span",null,c(e.t("newAdd.poolWarning")),1)]),default:Ae(()=>[e.poolInfo&&e.isSelfBuilt?(s(),m("div",Gs)):P("",!0)]),_:1})]),a("div",Js,[se(X,{"coin-icon":e.poolInfo?e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.token_a:e.createPoolFromCoin,onClick:n[19]||(n[19]=i=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),se(X,{"coin-icon":e.poolInfo?e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.token_b:e.createPoolToCoin,onClick:n[20]||(n[20]=i=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),a("div",{class:be(["pool-fee",e.edit?"pool-fee-edit":""])},[a("div",{class:"pool-fee-header",onClick:n[21]||(n[21]=i=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[a("span",{class:be(e.inputValue?"":"fee-span")},c(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(s(),m("svg",Qs,xs)):P("",!0)]),e.edit?(s(),m("div",er,[e.getPoolInfoSuccess?(s(!0),m(Ao,{key:1},xo(e.feeTierList,(i,Oo)=>{var to;return s(),m("div",{key:Oo,class:be(["fee-item",[e.inputValue&&e.inputValue==i.label?"fee-item-active":"",e.isCreatePool&&e.isCreatePool.length>0&&e.isCreatePool.includes(i.fee)&&e.$route.query.action?" pool-created":" pool-not-created"]]),onClick:Go=>e.selectFee(i)},[e.$route.query.action=="create-pool"?(s(),m("div",nr,[a("p",null,c(i.title),1),a("p",{class:be(e.isCreatePool.includes(i.fee)?"text-default":"text-theme")},c(e.isCreatePool.includes(i.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(s(),m("div",tr,[a("p",{class:be(e.isCreatePool.includes(i.fee)?"text-active":"text-default")},c(i.title),3),e.isCreatePool&&!e.isCreatePool.includes(i.fee)?(s(),m("p",ar,c(e.$t("newAdd.notCreated")),1)):P("",!0),e.isCreatePool&&e.isCreatePool.includes(i.fee)?(s(),m("p",ir,c(e.poolTvl&&e.poolTvl[i.fee]&&((to=e.poolTvl[i.fee])==null?void 0:to.rateText)),1)):P("",!0)])),a("span",null,c(i.text),1)],10,or)}),128)):(s(),de(k,{key:0}))])):P("",!0)],2)]),a("div",lr,[e.isShowMask?(s(),m("div",sr)):P("",!0),a("div",rr,[Be(c((an=e.$route)!=null&&an.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(s(),de(W,{key:0,placement:"bottom","arrow-point-at-center":""},{title:Ae(()=>[a("span",null,c(e.$t("newAdd.selectRangeTips")),1)]),default:Ae(()=>[ur]),_:1})):P("",!0)]),a("div",dr,[!((Ro=(Mo=e.$route)==null?void 0:Mo.query)!=null&&Ro.action)&&e.poolInfo||($e=(ln=e.$route)==null?void 0:ln.query)!=null&&$e.action?(s(),m(Ao,{key:0},[(Ko=(Te=e.$route)==null?void 0:Te.query)!=null&&Ko.action&&!e.poolInfo?(s(),de(f,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):P("",!0),e.poolInfo?(s(),m("div",cr,[(s(!0),m(Ao,null,xo(e.currentPriceTabList,i=>(s(),m("div",{key:i,class:be(["price-item",{"price-item-active":i.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:Oo=>e.priceTab(i)},[se(W,{placement:"bottom","arrow-point-at-center":""},{title:Ae(()=>[a("span",null,c(e.getPirceText(i.key)),1)]),default:Ae(()=>[Be(" "+c(e.getPirceKey(i.key)),1)]),_:2},1024)],10,vr))),128))])):P("",!0),(sn=(Zo=e.$route)==null?void 0:Zo.query)!=null&&sn.action&&!e.poolInfo?(s(),m("div",pr,c(e.$t("newAdd.createPoolInitialText")),1)):P("",!0),!e.poolInfo&&((un=(rn=e.$route)==null?void 0:rn.query)!=null&&un.action)?(s(),m("div",mr,[a("div",null,c(e.$t("common.setPriceRange")),1),a("div",null,[a("div",{class:be(["tab-item",e.isFullRange?"tab-item-active tab-item-farms-active":""]),onClick:n[22]||(n[22]=Sn(i=>e.clickFullRange(),["stop"]))},[a("div",fr,[e.isFullRange&&e.chainName=="Sui"?(s(),m("img",gr)):P("",!0)]),br],2)])])):P("",!0),e.poolInfo||(lo=(dn=e.$route)==null?void 0:dn.query)!=null&&lo.action?(s(),m("div",{key:4,class:be(["current-price",(Co=(ho=e.$route)==null?void 0:ho.query)!=null&&Co.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(s(),m("span",kr,c(e.$t("common.currentPrice")),1)):P("",!0),e.fromCoin&&e.toCoin&&e.direct?(s(),m("div",hr,[a("span",null,c(e.$t("common.currentPrice")),1),Be(" "+c(("addCommom"in e?e.addCommom:ie(De))(("decimalUi"in e?e.decimalUi:ie(Ne))(e.currentPrice,6)))+" "+c((Ye=e.toCoin)==null?void 0:Ye.symbol)+" per "+c((Eo=e.fromCoin)==null?void 0:Eo.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(s(),m("div",Cr,[a("span",null,c(e.$t("common.currentPrice")),1),Be(" "+c(("addCommom"in e?e.addCommom:ie(De))(("decimalUi"in e?e.decimalUi:ie(Ne))(e.currentPriceReverse,6)))+" "+c((yo=e.toCoin)==null?void 0:yo.symbol)+" per "+c((Ho=e.fromCoin)==null?void 0:Ho.symbol),1)])):(s(),m("div",yr,"0.0")),e.fromCoin&&e.toCoin?(s(),m("div",{key:4,class:be(e.poolInfo&&((p=e.poolInfo)!=null&&p.needReverse)||e.createPoolInfo&&((xe=e.createPoolInfo)!=null&&xe.needReverse)?"toggle reverse":"toggle")},[a("div",{class:be(e.direct?"item active-item":"item"),onClick:n[23]||(n[23]=i=>e.direct?"":e.toggle())},[ao(a("img",wr,null,512),[[D,e.getCoinIcon(e.direct?e.fromCoin:e.toCoin)]]),Be(" "+c(e.direct?($o=e.fromCoin)==null?void 0:$o.symbol:(A=e.toCoin)==null?void 0:A.symbol),1)],2),a("div",{class:be(e.direct?"item ":"item active-item"),onClick:n[24]||(n[24]=i=>e.direct?e.toggle():"")},[ao(a("img",Pr,null,512),[[D,e.getCoinIcon(e.direct?e.toCoin:e.fromCoin)]]),Be(" "+c(e.direct?(wo=e.toCoin)==null?void 0:wo.symbol:(ye=e.fromCoin)==null?void 0:ye.symbol),1)],2)],2)):P("",!0)],2)):P("",!0),e.poolInfo||(Wo=(we=e.$route)==null?void 0:we.query)!=null&&Wo.action?(s(),de(j,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):P("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(s(),m("div",Ir,[a("img",{src:("importIcon"in e?e.importIcon:ie(Xe))("/image/icon-tips@2x.png"),alt:""},null,8,$r),a("p",Tr,c(e.$t("tips.positionTips")),1)])):P("",!0),e.positionError&&(e.poolInfo||(Ee=(zo=e.$route)==null?void 0:zo.query)!=null&&Ee.action)?(s(),m("div",Sr,[a("img",{src:("importIcon"in e?e.importIcon:ie(Xe))("/image/icon-tips-error@2x.png"),alt:""},null,8,Ar),a("p",Nr,c(e.$t("tips.positionError")),1)])):P("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(s(),m("div",Lr,[e.fromCoin&&e.toCoin&&e.poolInfo?(s(),de(w,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):P("",!0),e.chartLoading?(s(),de(k,{key:1})):P("",!0)])):P("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(s(),m("div",qr,[Mr,a("span",Rr,c(e.aprRewardsTime)+" Price Range",1),a("span",null,c(("addCommom"in e?e.addCommom:ie(De))(("decimalUi"in e?e.decimalUi:ie(Ne))(e.before7dContractPriceLowest,6)))+" - "+c(("addCommom"in e?e.addCommom:ie(De))(("decimalUi"in e?e.decimalUi:ie(Ne))(e.before7dContractPriceHighest,6))),1)])):P("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(s(),de(l,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):P("",!0),(ro=(so=e.$route)==null?void 0:so.query)!=null&&ro.action&&!e.poolInfo?(s(),m("div",Ur,c(e.$t("newAdd.createPoolText")),1)):P("",!0)],64)):(s(),m("div",Or,[e.storeIndex.theme=="default"?(s(),m("img",Br)):(s(),m("img",_r)),a("p",null,c(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&!e.isSelfBuilt?(s(),de(v,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):P("",!0)]),se(T,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:n[25]||(n[25]=i=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ae(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")?(s(),m("svg",Fr,Dr)):P("",!0),a("span",null,c(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),a("div",Er,[se(_e)])]),a("div",Hr,[a("div",Wr,c(e.$t("newAdd.depositAmounts")),1),a("div",zr,[a("div",Xr,[se(V,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[26]||(n[26]=i=>e.fromCoinAmount=i),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[27]||(n[27]=i=>e.maxBtnSelect("fromCoin")),onOnHalf:n[28]||(n[28]=i=>e.halfBtnSelect("fromCoin")),onOnInput:n[29]||(n[29]=i=>{e.fromCoinAmount=i,e.fixedFromCoin=!0}),onOnSelect:n[30]||(n[30]=i=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(s(),de(Z,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):P("",!0)]),a("div",Vr,[se(V,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[31]||(n[31]=i=>e.toCoinAmount=i),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[32]||(n[32]=i=>e.maxBtnSelect("toCoin")),onOnHalf:n[33]||(n[33]=i=>e.halfBtnSelect("toCoin")),onOnInput:n[34]||(n[34]=i=>{e.toCoinAmount=i,e.fixedFromCoin=!1}),onOnSelect:n[35]||(n[35]=i=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(s(),de(Z,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):P("",!0)]),(Xo=(Uo=e.$route)==null?void 0:Uo.query)!=null&&Xo.action&&!e.poolInfo&&(!e.createPoolInfo||!e.createPoolInfo.currentPrice)?(s(),de(ee,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):P("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(s(),m("img",{key:1,class:"add",src:lt,alt:"",onClick:n[36]||(n[36]=(...i)=>e.toggle&&e.toggle(...i))})):P("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(s(),m("img",{key:2,class:"add",src:st,alt:"",onClick:n[37]||(n[37]=(...i)=>e.toggle&&e.toggle(...i))})):P("",!0)]),e.poolInfo||e.createPoolInfo?(s(),de(he,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):P("",!0)])])),se(T,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn h5-btn",onClick:n[38]||(n[38]=i=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ae(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")?(s(),m("svg",Kr,Gr)):P("",!0),a("span",null,c(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),a("div",Jr,[se(_e)]),e.showCoinSelect?(s(),de(L,{key:2,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"is-create-pool-to-coin":e.isCreatePoolToCoin,"is-create-pool-from-coin":e.isCreatePoolFromCoin,onOnSelect:e.onCoinSelect,onOnClose:n[39]||(n[39]=i=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","is-create-pool-to-coin","is-create-pool-from-coin","onOnSelect"])):P("",!0),e.isViewDetail?(s(),de(K,{key:3,"pool-info":e.poolInfo,onOnClose:n[40]||(n[40]=i=>e.isViewDetail=!1)},null,8,["pool-info"])):P("",!0),e.isCreateSuccess?(s(),de(ce,{key:4,onOnClose:n[41]||(n[41]=i=>e.isCreateSuccess=!1)})):P("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(s(),de(Se,{key:5,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:n[42]||(n[42]=i=>e.isShowTokenWarning=!1)},null,8,["from-coin","to-coin","onClose"])):P("",!0),e.isShowLiquidityModal?(s(),de(me,{key:6,"pool-info":e.poolInfo||e.createPoolInfo,title:e.$route.query.action=="create-pool"?e.$t("newAdd.preview"):e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direct,"is-increase":!1,onCreatePool:e.toCreatePool,onToAdd:e.toAdd,onOnClose:n[43]||(n[43]=i=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onCreatePool","onToAdd"])):P("",!0)])}const qu=po(Fl,[["render",Qr],["__scopeId","data-v-db351047"]]);export{qu as default};
