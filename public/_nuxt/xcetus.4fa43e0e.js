import{_ as tn}from"./xwhale-header.ba990e55.js";import{r as w,T as Oe,A as Y,e as j,o as v,f as T,h as t,t as y,j as $,l as le,s as X,p as Q,k as z,m as c,i as U,c as P,w as W,B as se,K as Ve,u as Ie,x as he,a as Be,a1 as an,a2 as on,I as ln,S as sn,M as rn,v as un,z as cn,F as Me,q as Le,E as dn,a3 as mn,a8 as vn}from"./entry.a3703d92.js";import{u as Ne,a as $e}from"./xcetus.dd0cfd70.js";import{d as D,j as ie,s as _e,a as re,b as Ee,c as Fe,p as G,u as He,v as pe,D as We}from"./pool.5472dae1.js";import{i as K}from"./import-icon.de3e6c66.js";import{_ as Xe}from"./xWHALE-icon.2df34cd4.js";import{_ as Ye}from"./WHALE-icon.28f954ba.js";import{_ as gn}from"./head-switch.4fa0bf61.js";/* empty css              *//* empty css              */import{_ as fn}from"./icon-selected_3x.350736e2.js";/* empty css              *//* empty css              */import{_ as pn}from"./img-leverage_2x.1c577303.js";const hn={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,n){const i=w("--"),a=w("--"),C=w("--"),b=w("--");let d=null;Oe(()=>{window.clearInterval(d)});const S=()=>{const r=new Date().getTime()/1e3;Number(r)<=Number(e.startTime)&&l(e.startTime),Number(r)>Number(e.startTime)&&Number(r)<=Number(e.endTime)&&l(e.endTime)},l=r=>{clearInterval(d),window.clearInterval(d),d=setInterval(()=>{let p=new Date().getTime()/1e3;console.log(p,"nowTime===>");let g=r-parseInt(String(p));if(console.log(g,"times===>"),g==0){n.emit("countDown"),clearInterval(d),window.clearInterval(d),d=null;return}else g<0&&(clearInterval(d),window.clearInterval(d),n.emit("countDown"),d=null);g--;let m=parseInt(String(g/60/60/24));m=m<10?"0"+m:m;let s=parseInt(String(g/60/60%24));s=s<10?"0"+s:s;let B=parseInt(String(g/60%60));B=B<10?"0"+B:B;let E=parseInt(String(g%60));E=E<10?"0"+E:E,i.value=m,a.value=s,C.value=B,b.value=E},1e3)};return Y(()=>e.startTime,(r,p)=>{r!==p&&S()},{immediate:!0}),{day:i,hour:a,min:C,sec:b}}};const _n={class:"count-time"};function wn(e,n,i,a,C,b){return v(),T("div",_n,[t("p",null,y(a.day),1),$(" : "),t("p",null,y(a.hour),1),$(" : "),t("p",null,y(a.min),1),$(" : "),t("p",null,y(a.sec),1)])}const Cn=j(hn,[["render",wn],["__scopeId","data-v-8be4764c"]]),bn={props:{titleText:{type:String,default:""},tipsText:{type:String,default:""},imgIcon:{type:String,default:""},value:{type:String,default:"--"}},setup(e){const{t:n}=le();return{t:n}}};const Sn=e=>(Q("data-v-18a16c90"),e=e(),z(),e),yn={class:"table-rewards"},Tn={class:"text-top-all"},An={key:0,class:"icon-hover-box"},kn=Sn(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-information"})],-1)),In={class:"tips-text-box"},Bn=["src"];function Nn(e,n,i,a,C,b){return v(),T("div",yn,[t("div",Tn,[t("p",null,y(i.titleText),1),i.tipsText?(v(),T("div",An,[kn,t("div",In,y(i.titleText=="est.APR"?"Estimated APR of the current epoch for all xCETUS holders.":"The number of qualified positions in this epoch."),1)])):X("",!0)]),t("span",null,[t("p",null,[i.imgIcon?(v(),T("img",{key:0,src:i.imgIcon,alt:""},null,8,Bn)):X("",!0),$(y(i.value),1)])])])}const $n=j(bn,[["render",Nn],["__scopeId","data-v-18a16c90"]]),En={setup(e){const{t:n}=le(),i=Ne(),a=c(()=>i),C=c(()=>a.value.pendingAmount),b=c(()=>(console.log(a.value.nextStartTime,"===>xcetus.value.nextStartTime"),a.value.nextStartTime)),d=c(()=>1683094391),S=c(()=>a.value.xcetusShare&&D(a.value.xcetusShare,2)),l=ie(),r=c(()=>l),p=c(()=>a.value.cetusApr&&a.value.cetusApr>.01?D(_e(a.value.cetusApr,2),2):D(a.value.cetusApr,2)),_=c(()=>a.value.pendingCoinInfo),g=w("");Y(()=>_.value,f=>{f&&!Fe(f)?g.value=`Pending yield (${f.symbol})`:g.value="Pending yield"},{immediate:!0});const m=()=>{setTimeout(()=>{i.getDividendManager()},3e3)},s=c(()=>a.value.dividendManagerInfo),B=c(()=>{const f=parseInt(String(new Date().getTime()/1e3)),M=s.value.interval_day,q=(f-Number(s.value.start_time))/(M*24*3600);return console.log(parseInt(String(q))>0,"====>(parseInt(String(time))) > 0"),parseInt(String(q))>0}),E=re(),ce=c(()=>E),{setIsShowSuccess:Z,setIsShowRejected:de,setIsShowWaiting:O,setTransactionDesc:be,setTransactionTxid:me}=E,k=$e("Sui"),V=w(!1),Se=c(()=>a.value.venft_id),ee=c(()=>ce.value.chainName?Ee(ce.value.chainName):{});return{t:n,pendingAmount:C,nextStartTime:b,wallet:r,myShare:S,importIcon:K,nextEndTime:d,pendingYieldText:g,cetusApr:p,pendingCoinInfo:_,getNextEpoch:m,canClaim:B,claimPendingYield:async()=>{V.value=!0,O(!0),me(""),be(`${n("tips.claimingPendingYield")} ${C.value} ${_.value.symbol}`);try{let f;const M=await k.getRedeemDividendPayload(Se.value);console.log(M,"payload==>");const q=await r.value.currentWallet.signAndExecuteTransactionBlock(M);if(f=ee.value.handleTx(q),f&&f.hash){me(f.hash),O(!1),Z(!0);const h={title:"Claim",desc:`Claimed ${C.value} ${_.value.symbol} successfully.`,hash:f.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:_.value.symbol,numa:`+ ${C.value}`,logoa:_.value.logo_url}};ee.value.showTransitionPending(h);const ne=await ee.value.watchTransaction(h);console.log("0221###swap###transitionStatus####",ne),ne&&setTimeout(()=>{i.getVeNFTDividendInfo(),V.value=!1},3e3),i.getOwnerLockCetuss(r.value.address)}else O(!1),de(!0),V.value=!1}catch(f){O(!1),de(!0),V.value=!1,console.log(f,"error===>")}},claimLoading:V,addCommom:D}}},xn=""+new URL("staking-rewards-banner-h5.1c7401db.png",import.meta.url).href,Dn="data:image/png;base64,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";const we=e=>(Q("data-v-99f5258f"),e=e(),z(),e),Un={class:"top-banner"},Rn=we(()=>t("img",{src:xn,alt:""},null,-1)),Pn=we(()=>t("p",null,"Convert CETUS to xCETUS to start earning",-1)),Mn={class:"bot-count"},Ln=we(()=>t("span",null,"Reward distribution in ",-1)),Wn={class:"holder-rewards"},On={class:"title"},Vn=we(()=>t("div",{class:"left"},[t("img",{src:Dn,alt:""}),t("span",null,"xCETUS Staking Rewards")],-1)),Fn={class:"right"},Hn={class:"rewards-value"},Xn={class:"claim-h5"};function Yn(e,n,i,a,C,b){var r;const d=Cn,S=se,l=$n;return v(),T("div",null,[t("div",Un,[Rn,Pn,t("div",Mn,[Ln,U(d,{"start-time":a.nextStartTime,onCountDown:n[0]||(n[0]=p=>e.$emit("getNextEpoch"))},null,8,["start-time"])])]),t("div",Wn,[t("div",On,[Vn,t("div",Fn,[a.wallet&&a.wallet.address?(v(),P(S,{key:0,disabled:!a.canClaim||a.pendingAmount=="--"||a.pendingAmount<=0,loading:a.claimLoading,onClick:a.claimPendingYield},{default:W(()=>[$(" Claim ")]),_:1},8,["disabled","loading","onClick"])):X("",!0)])]),t("div",Hn,[U(l,{"title-text":"est.APR","tips-text":"good",value:a.cetusApr+"%"},null,8,["title-text","value"]),U(l,{"title-text":"My share",value:a.myShare+"%"},null,8,["value"]),U(l,{"title-text":a.pendingYieldText,"img-icon":(r=a.pendingCoinInfo)==null?void 0:r.logo_url,value:a.addCommom(a.pendingAmount,6)},null,8,["title-text","img-icon","value"])]),t("div",Xn,[a.wallet&&a.wallet.address?(v(),P(S,{key:0,disabled:!a.canClaim||a.pendingAmount=="--"||a.pendingAmount<=0,loading:a.claimLoading,onClick:n[1]||(n[1]=p=>e.$emit("claimPendingYield"))},{default:W(()=>[$(" Claim ")]),_:1},8,["disabled","loading"])):X("",!0)])])])}const jn=j(En,[["render",Yn],["__scopeId","data-v-99f5258f"]]),Zn={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,n){const i=w("--"),a=w("--"),C=w("--"),b=w("--");let d=null;Oe(()=>{window.clearInterval(d)});const S=()=>{const r=new Date().getTime()/1e3;Number(r)<=Number(e.startTime)&&l(e.startTime),Number(r)>Number(e.startTime)&&Number(r)<=Number(e.endTime)&&l(e.endTime)},l=r=>{d=setInterval(()=>{let p=new Date().getTime()/1e3,g=r-parseInt(String(p));if(g==0){n.emit("countDown"),clearInterval(d),window.clearInterval(d),d=null;return}else g<0&&(clearInterval(d),window.clearInterval(d),n.emit("countDown"),d=null);g--;let m=parseInt(String(g/60/60/24));m=m<10?"0"+m:m;let s=parseInt(String(g/60/60%24));s=s<10?"0"+s:s;let B=parseInt(String(g/60%60));B=B<10?"0"+B:B;let E=parseInt(String(g%60));E=E<10?"0"+E:E,i.value=m,a.value=s,C.value=B,b.value=E},1e3)};return Y(()=>e.startTime,(r,p)=>{r!==p&&S()},{immediate:!0}),{day:i,hour:a,min:C,sec:b}}};const Ce=e=>(Q("data-v-131b3f4e"),e=e(),z(),e),qn={class:"count-down"},Gn=Ce(()=>t("span",null,"D : ",-1)),Kn=Ce(()=>t("span",null,"H : ",-1)),Qn=Ce(()=>t("span",null,"M : ",-1)),zn=Ce(()=>t("span",null,"S",-1));function Jn(e,n,i,a,C,b){return v(),T("div",qn,[$(y(a.day)+" ",1),Gn,$(" "+y(a.hour)+" ",1),Kn,$(" "+y(a.min)+" ",1),Qn,$(" "+y(a.sec)+" ",1),zn])}const et=j(Zn,[["render",Jn],["__scopeId","data-v-131b3f4e"]]),nt={components:{WcountDown:et},props:{vItem:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},setup(e,n){const{t:i}=le();console.log(e.vItem,"vItem");const a=Ne(),C=re(),b=c(()=>C),d=m=>{n.emit("claim",m),a.setClaimLoading(m.id)},S=c(()=>a),l=c(()=>new Date().getTime()/1e3>e.vItem.locked_until_time),r=m=>{n.emit("cancelRedeemPayload",m),a.setClaimLoading(m.id)};c(()=>b.value.chainName),$e("Sui");const p=ie();return c(()=>p),c(()=>S.value.venft_id),c(()=>b.value.chainName?Ee(b.value.chainName):{}),{t:i,prettyAmount:G,claimBoolean:l,toClaim:d,toCancel:r,claimWhale:m=>{n.emit("claimWhale",m)},cancelRedeemPayload:m=>{n.emit("cancelRedeemPayload",m)}}}};const xe=e=>(Q("data-v-50809946"),e=e(),z(),e),tt={class:"vesting-box"},at={class:"left"},ot=xe(()=>t("img",{src:Xe,alt:""},null,-1)),lt=xe(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-swap2"})],-1)),st=xe(()=>t("img",{src:Ye,alt:""},null,-1)),it={class:"available-all"},rt={class:"available"},ut={key:0},ct={key:1};function dt(e,n,i,a,C,b){const d=Ve("WcountDown"),S=se;return v(),T("div",tt,[t("div",at,[t("p",null,[t("span",null,[ot,$(" "+y(("addCommom"in e?e.addCommom:Ie(D))(a.prettyAmount(i.vItem.xcetus_amount,9),9))+" xCETUS ",1)]),lt,t("span",null,[st,$(" "+y(("addCommom"in e?e.addCommom:Ie(D))(a.prettyAmount(i.vItem.cetus_amount,9),9))+" CETUS ",1)])]),t("div",it,[t("div",rt,[t("span",null,y(a.claimBoolean?"Available":"Available in"),1),a.claimBoolean?X("",!0):(v(),P(d,{key:0,"start-time":i.vItem.locked_start_time,"end-time":i.vItem.locked_until_time,onCountDown:n[0]||(n[0]=l=>e.$emit("countDown"))},null,8,["start-time","end-time"]))]),t("div",{class:he(a.claimBoolean?"highlight right-h5":"right-h5")},[a.claimBoolean?(v(),T("span",ut,"Claim")):(v(),T("span",ct,"Cancel"))],2)])]),a.claimBoolean?(v(),P(S,{key:0,disabled:!a.claimBoolean||i.loading,loading:i.loading,onClick:n[1]||(n[1]=l=>a.claimWhale(i.vItem))},{default:W(()=>[$(y(a.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"])):(v(),P(S,{key:1,type:"text",class:"right",disabled:i.loading,loading:i.loading,onClick:n[2]||(n[2]=l=>a.cancelRedeemPayload(i.vItem))},{default:W(()=>[$(y(a.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"]))])}const mt=j(nt,[["render",dt],["__scopeId","data-v-50809946"]]),vt=Be({props:{inputValue:{type:String,default:""},coinSymbol:{type:String,default:""},whaleDirection:{type:String,default:""},address:{type:String,default:""},balance:{type:String,default:""}},setup(e,n){const{t:i,locale:a}=le(),C=re(),b=c(()=>C),d=an(on,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),S=ie(),l=c(()=>S),r=He(),p=c(()=>r),_=m=>{const B=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");m.target.value=m.target.value.replace(B,"$1")},g=c(()=>{var m;return p.value.tokensObj&&e.address&&p.value.tokensObj[e.address]&&((m=p.value.tokensObj[e.address])==null?void 0:m.decimals)});return Y(()=>p.value.RATES,m=>{m&&console.log(m,"price====>")},{immediate:!0}),{pool:p,t:i,addCommom:D,store:b,wallet:l,indicator:d,inputChange:_,importIcon:K,coinDecimals:g}}});const gt=e=>(Q("data-v-83d9dead"),e=e(),z(),e),ft={class:"card"},pt={class:"top"},ht={class:"left"},_t={class:"loading-token"},wt={key:0,src:Ye,alt:""},Ct={key:1,src:Xe,alt:""},bt={class:"bottom"},St=gt(()=>t("div",null,null,-1)),yt={class:"top"},Tt={class:"right"},At={key:0,class:"balance"};function kt(e,n,i,a,C,b){var r,p;const d=ln,S=sn,l=se;return v(),T("div",ft,[t("div",pt,[U(d,{value:e.inputValue,placeholder:"0.0",onChange:e.inputChange,onInput:n[0]||(n[0]=_=>e.$emit("onInput",_.target.value)),onFocus:n[1]||(n[1]=_=>e.$emit("onFocus"))},null,8,["value","onChange"]),t("div",ht,[t("div",_t,[e.coinSymbol=="CETUS"?(v(),T("img",wt)):(v(),T("img",Ct)),t("div",null,[t("p",null,y(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1)])])])]),t("div",bt,[St,t("div",yt,[t("div",Tt,[t("span",null,y(e.$t("common.balance")),1),e.balance?(v(),T("span",At,y(e.balance>1?("addCommom"in e?e.addCommom:Ie(D))(e.balance):e.balance),1)):(v(),P(S,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})),e.whaleDirection=="From"?(v(),P(l,{key:2,class:"max-btn",disabled:!e.balance||e.balance==0||!((r=e.wallet)!=null&&r.address),onClick:n[2]||(n[2]=_=>e.$emit("halfBalanne"))},{default:W(()=>[$(y("Half"))]),_:1},8,["disabled"])):X("",!0),e.whaleDirection=="From"?(v(),P(l,{key:3,class:"max-btn",disabled:!e.balance||e.balance==0||!((p=e.wallet)!=null&&p.address),onClick:n[3]||(n[3]=_=>e.$emit("maxBalanne"))},{default:W(()=>[$(y(e.$t("button.max")),1)]),_:1},8,["disabled"])):X("",!0)])])])])}const It=j(vt,[["render",kt],["__scopeId","data-v-83d9dead"]]);const Bt=Be({components:{Modal:rn},setup(e,n){const i=re(),a=w(!1);c(()=>i);const C=ie(),b=c(()=>C);return{store:i,isSelect:a,clickConvert:()=>{a.value&&localStorage.setItem(`notRemind${b.value.address}`,!0),n.emit("clickConvert")}}}}),De=e=>(Q("data-v-f05dc960"),e=e(),z(),e),Nt=De(()=>t("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),$t=[Nt],Et={class:"token-waring-conetnt"},xt=De(()=>t("div",{class:"tips-text"},[$(" Please note that after conversion, if you want to convert xCETUS back to CETUS, a vesting period will be applied & different vesting durations correspond to different redeem ratios. "),t("a",{href:"https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus",target:"_blank"}," Learn more")],-1)),Dt={class:"read-text"},Ut={key:0,src:fn},Rt=De(()=>t("span",null," Do not remind again. ",-1));function Pt(e,n,i,a,C,b){const d=se,S=Ve("Modal");return v(),P(S,{width:"440px",visible:!0,footer:null,title:null,"mask-closable":!0,onCancel:n[3]||(n[3]=l=>e.$emit("close"))},{closeIcon:W(()=>[(v(),T("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:n[0]||(n[0]=l=>e.$emit("close"))},$t))]),default:W(()=>[t("div",Et,[xt,t("div",Dt,[t("div",{class:"radio",onClick:n[1]||(n[1]=l=>e.isSelect=!e.isSelect)},[e.isSelect?(v(),T("img",Ut)):X("",!0)]),Rt]),U(d,{class:"big-btn continue",onClick:n[2]||(n[2]=()=>e.clickConvert())},{default:W(()=>[$("Convert")]),_:1})])]),_:1})}const Mt=j(Bt,[["render",Pt],["__scopeId","data-v-f05dc960"]]),Lt=Be({setup(){const e=Ne(),n=c(()=>e),i=c(()=>n.value.venft_id),a=c(()=>n.value.venftInfo),C=He(),b=c(()=>C);c(()=>b.value.tokensObj&&b.value.tokensObj["0x2a4f647bc73f070182436658bff75060246019857c769ad9268c22c4472bca7f::cetus::CETUS"]);const d=w("");let S=w(!1);const l=w(""),r=w(""),p=w(!1),_=w("convert"),{t:g}=le(),m=w([{time:"15 D",num:15},{time:"30 D",num:30},{time:"90 D",num:90},{time:"180 D",num:180}]),s=w([{name:"est.APR",value:"100.12%"},{name:"My share",value:"<0.1%"},{name:"Pending yield (USDC)",value:0}]),B=w([{name:"My total locked",value:"$100.12"},{name:"Pending rewards (xCETUS)",value:"100.12"},{name:"",value:""}]),E=w([{name:"My positions",value:"12"},{name:"My qualified positions",value:"0"},{name:"Pending rewards (xCETUS)",value:"100.12"}]),ce=window.setInterval(()=>{e.getXcetusApr(),h.value.address&&(e.getMyShare(h.value.address),e.getVeNFTDividendInfo())},6e4);un(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||e.getDividendManager()}),e.getXcetusApr(),e.getDividendManager()}),cn(()=>{window.clearInterval(ce),document.removeEventListener("visibilitychange",()=>{console.log("移除监听")})});const Z=c(()=>(console.log(n.value.whaleBalance,"==>xcetus.value.whaleBalance"),n.value.whaleBalance)),de=c(()=>n.value.xWhaleBalance),O=c(()=>n.value.availableXwhale),be=c(()=>n.value.redeemingXwhale),me=c(()=>{if(_.value=="convert"){if(Number(l.value)>Number(Z.value))return!0}else if(Number(l.value)>Number(O.value))return!0;return!l.value||!r.value||Number(l.value)==0||Number(r.value)==0}),k=w("180"),V=c(()=>(console.log(_.value=="convert","===>1212211"),_.value=="convert"&&Number(l.value)>Number(Z.value)?g("button.insufficientBalance",{name:"CETUS"}):_.value!=="convert"&&Number(l.value)>Number(O.value)?g("button.insufficientBalance",{name:"xCETUS"}):Number(k.value)<15?"Minimum vesting duration is 15 days":_.value=="convert"&&i?"Convert":_.value!=="convert"&&i?"Redeem":"Convert"));console.log(V.value,"btnText.value===>");const Se=o=>{l.value="",r.value="",_.value=o},ee=()=>{S.value=!0,setTimeout(()=>{S.value=!1},300)},Ue=o=>{k.value=o},f=w(!1),M=$e("Sui"),q=ie(),h=c(()=>q),ne=c(()=>n.value.ownerLocks);Y(()=>h.value.address,o=>{console.log("触发",o),o?(e.getOwnerVeNFT(o),e.getAccountWhaleBalance(o),e.getOwnerLockCetuss(o),e.getMyShare(o)):e.loginOut()},{immediate:!0});const x=c(()=>ye.value.chainName?Ee(ye.value.chainName):{}),Re=re(),ye=c(()=>Re),te=c(()=>ye.value.chainName),{setIsShowSuccess:ae,setIsShowRejected:F,setIsShowWaiting:I,setTransactionDesc:oe,setTransactionTxid:H}=Re,Te=async()=>{f.value=!0,I(!0),H(""),oe(g("tips.converting",{from:`${D(l.value,9)} CETUS`,and:"to",to:`${D(l.value,9)} xCETUS`}));try{let o;const u=pe(l.value,9);console.log(i.value,"===>venft_id.value");const A=await M.depositCetus(u,i.value);console.log(A,"payload==>");const R=await h.value.currentWallet.signAndExecuteTransactionBlock(A);if(o=x.value.handleTx(R),o&&o.hash){H(o.hash),I(!1),ae(!0);const N={title:"Converted",desc:`Converted ${D(l.value,9)} xCETUS successfully`,hash:o.hash,tit:"Converted",icon:"icon-icon-Swap",tokenInfo:{tokena:"CETUS",numa:`- ${l.value}`,logoa:K("/sui-image/WHALE-icon.png"),tokenb:"xCETUS",numb:`+ ${l.value}`,logob:K("/sui-image/xWHALE-icon.png")}};te.value!=="Aptos"&&(N.res=o.res),x.value.showTransitionPending(N);const L=await x.value.watchTransaction(N);console.log("0221###swap###transitionStatus####",L),L&&setTimeout(()=>{e.getAccountWhaleBalance(h.value.address),e.getOwnerVeNFT(h.value.address),e.getOwnerLockCetuss(h.value.address),e.getMyShare(h.value.address)},3e3),f.value=!1}else I(!1),F(!0),f.value=!1;l.value=""}catch(o){I(!1),F(!0),f.value=!1,l.value="",console.log(o,"error===>")}},J=w(!0),Ae=w("0"),je=async()=>{const o=pe(l.value,9),u=await M.redeemNum(o,Number(k.value));r.value=G(u.amountOut,9),console.log("===>amount2222"),Ae.value=u.percent},Ze=async()=>{const o=pe(r.value,9),u=await M.reverseRedeemNum(o,Number(k.value));console.log(u,"===>amount111"),l.value=G(u.amountOut,9),Ae.value=u.percent};Y(()=>[l.value,k.value,J.value],([o,u,A])=>{console.log(o,"===>>>>>>>fromCoinAmount",typeof o),o&&u&&A&&Number(u)>=15&&je(),!o&&A&&(r.value="")},{immediate:!0}),Y(()=>[r.value,k.value,J.value],([o,u,A])=>{o&&u&&!A&&Number(u)>=15&&(Ze(),console.log(o,"===>toCoinAmount")),!o&&!A&&(l.value="")},{immediate:!0}),Y(()=>[k.value,J.value],([o,u])=>{Number(o)>180?k.value="180":Number(o)<15?u?r.value="":l.value="":o||(u?l.value="":r.value="")},{immediate:!0});const qe=()=>{J.value=!0,l.value=_e(new We(_.value!=="convert"?O.value:Z.value).div(new We(2)).toString(),9)},Ge=()=>{J.value=!0,l.value=_.value!=="convert"?_e(O.value,9):_e(Z.value,9)},Pe=async()=>{f.value=!0,I(!0),H(""),oe(g("tips.redeeming",{from:`${D(l.value,9)} xCETUS`,to:`${D(r.value,9)} CETUS`}));try{let o;const u=pe(l.value,9);console.log(u.toString(),"538====>");const A=await M.getRedeemLockPayload(u,i.value,Number(k.value));console.log(A,"payload==>");const R=await h.value.currentWallet.signAndExecuteTransactionBlock(A);if(o=x.value.handleTx(R),o&&o.hash){H(o.hash),I(!1),ae(!0);const N={title:"Redemption",desc:"Redemption transaction submitted successfully.",hash:o.hash,tit:"Vesting",icon:"icon-icon-Removed",tokenInfo:{tokena:"xCETUS",numa:`- ${l.value}`,logoa:K("/sui-image/xWHALE-icon.png")}};te.value!=="Aptos"&&(N.res=o.res),x.value.showTransitionPending(N);const L=await x.value.watchTransaction(N);console.log("0221###swap###transitionStatus####",L),L&&setTimeout(()=>{e.getAccountWhaleBalance(h.value.address),e.getOwnerVeNFT(h.value.address),e.getOwnerLockCetuss(h.value.address),e.getMyShare(h.value.address)},3e3),f.value=!1}else I(!1),F(!0),f.value=!1;l.value="",r.value=""}catch(o){I(!1),F(!0),f.value=!1,l.value="",r.value="",console.log(o,"error===>")}};Y(()=>[i.value,ne.value,a.value,h.value.address],([o,u,A,R])=>{R&&(o&&e.getVeNFTDividendInfo(),o&&!Fe(A)&&u&&u.length>0&&(console.log("执行了",u),e.getAvailableXCetus()))},{immediate:!0,deep:!0});const Ke=async o=>{f.value=!0,I(!0),H(""),oe("");try{let u;console.log(o.id,"==>vItem.id");const A=await M.getCancelRedeemPayload(o.id,i.value);console.log(A,"payload==>");const R=await h.value.currentWallet.signAndExecuteTransactionBlock(A);if(u=x.value.handleTx(R),u&&u.hash){H(u.hash),I(!1),ae(!0);const N={title:"Cancelled Redemption",desc:"Cancelled redemption successfully.",hash:u.hash,tit:"Cancelled Redemption",icon:"icon-a-icon-Shutdown",tokenInfo:{tokena:"xCETUS",numa:`+ ${G(o.xcetus_amount,9)}`,logoa:K("/sui-image/xWHALE-icon.png")}};te.value!=="Aptos"&&(N.res=u.res),x.value.showTransitionPending(N);const L=await x.value.watchTransaction(N);console.log("0221###swap###transitionStatus####",L),L&&setTimeout(()=>{e.getOwnerVeNFT(h.value.address),e.getOwnerLockCetuss(h.value.address),f.value=!1},3e3)}else I(!1),F(!0),f.value=!1;l.value="",r.value=""}catch(u){I(!1),F(!0),f.value=!1,l.value="",r.value="",e.setClaimLoading(""),console.log(u,"error===>")}},Qe=w({}),ze=()=>{console.log("倒计时结束"),e.getOwnerLockCetuss(h.value.address)},Je=async o=>{console.log(o,"vItem===>"),f.value=!0,I(!0),H(""),oe(`${g("tips.claimingPendingYield")} ${D(G(o.cetus_amount,9),9)} CETUS`);try{let u;const A=await M.getRedeemPayload(o.id,i.value);console.log(A,"payload==>");const R=await h.value.currentWallet.signAndExecuteTransactionBlock(A);if(u=x.value.handleTx(R),u&&u.hash){H(u.hash),I(!1),ae(!0);const N={title:"Claimed",desc:`Claimed ${D(G(o.cetus_amount,9),9)} CETUS successfully.`,hash:u.hash,tit:"CETUS Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:"CETUS",numa:`+ ${G(o.cetus_amount,9)}`,logoa:K("/sui-image/WHALE-icon.png")}};te.value!=="Aptos"&&(N.res=u.res),x.value.showTransitionPending(N);const L=await x.value.watchTransaction(N);console.log("0221###swap###transitionStatus####",L),L&&setTimeout(()=>{e.getOwnerLockCetuss(h.value.address),e.getAccountWhaleBalance(h.value.address),e.getOwnerVeNFT(h.value.address),e.getMyShare(h.value.address),e.getAvailableXCetus(),f.value=!1},3e3)}else I(!1),F(!0),f.value=!1;l.value="",r.value=""}catch(u){I(!1),F(!0),f.value=!1,l.value="",r.value="",e.setClaimLoading(""),console.log(u,"error===>")}},ke=w(!1),en=()=>{!localStorage.getItem(`notRemind${h.value.address}`)&&V.value=="Convert"?ke.value=!0:V.value=="Redeem"?Pe():Te()},nn=()=>{ke.value=!1,Te()},ve=c(()=>n.value.pendingCoinInfo),ge=c(()=>n.value.pendingAmount),fe=w(!1);return{clickModalConvert:nn,openConfirmModal:ke,validateInput:()=>{k.value&&(k.value=k.value.replace(/[^\d]/g,""),k.value.charAt(0)==="0"&&(k.value=k.value.slice(1)))},countDown:ze,value:d,change:S,clickExchange:ee,fromCoinAmount:l,toCoinAmount:r,showCoinSelect:p,headSwitchValue:_,headSwitchChange:Se,vestingDateList:m,vestingParameter:k,vestingTab:Ue,holderList:s,lockupList:B,leaderboardList:E,whaleBalance:Z,depositCetus:Te,btnText:V,loading:f,redeemRatio:Ae,halfBalanne:qe,maxBalanne:Ge,xWhaleBalance:de,availableXwhale:O,redeemingXwhale:be,withdrawWhale:Pe,ownerLocks:ne,cancelRedeemPayload:Ke,holderInfo:Qe,btnDisabled:me,fixedFromCoin:J,walletStore:q,claimWhale:Je,wallet:h,depositOrWithdraw:en,pendingAmount:ge,claimPendingYield:async()=>{fe.value=!0,I(!0),H(""),oe(`${g("tips.claimingPendingYield")} ${ge.value} ${ve.value.symbol}`);try{let o;const u=await M.getRedeemDividendPayload(i.value);console.log(u,"payload==>");const A=await h.value.currentWallet.signAndExecuteTransactionBlock(u);if(o=x.value.handleTx(A),o&&o.hash){H(o.hash),I(!1),ae(!0);const R={title:"Claim",desc:`Claimed ${ge.value} ${ve.value.symbol} successfully.`,hash:o.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:ve.value.symbol,numa:`+ ${ge.value}`,logoa:ve.value.logo_url}};te.value!=="Aptos"&&(R.res=o.res),x.value.showTransitionPending(R);const N=await x.value.watchTransaction(R);console.log("0221###swap###transitionStatus####",N),N&&setTimeout(()=>{e.getVeNFTDividendInfo(),fe.value=!1},3e3),e.getOwnerLockCetuss(h.value.address)}else I(!1),F(!0),fe.value=!1,f.value=!1}catch(o){I(!1),F(!0),fe.value=!1,console.log(o,"error===>")}},inputBlur:()=>{Number(k.value)<15&&(k.value="15")},getNextEpoch:()=>{e.getDividendManager()}}}});const ue=e=>(Q("data-v-b867dff2"),e=e(),z(),e),Wt={class:"dashboard-all"},Ot={class:"dashboard-content"},Vt={class:"content-left"},Ft={key:0,class:"vesting"},Ht=ue(()=>t("p",null,"Vesting",-1)),Xt={class:"content-right"},Yt={key:0,class:"card-container"},jt={class:"card-item"},Zt={class:"card-item"},qt={class:"exchange"},Gt=ue(()=>t("use",{"xlink:href":"#icon-icon-swap2"},null,-1)),Kt=[Gt],Qt={key:1,class:"card-redeem"},zt={class:"card-item"},Jt={class:"vesting-duration"},ea=ue(()=>t("p",null,"Vesting duration",-1)),na={class:"vesting-content"},ta={class:"vesting-left"},aa={class:"value-days"},oa=ue(()=>t("span",null,"days",-1)),la={class:"vesting-right"},sa=["onClick"],ia={class:"card-item"},ra={class:"redeem-ratio"},ua=ue(()=>t("span",null,"Redeem ratio",-1));function ca(e,n,i,a,C,b){const d=tn,S=jn,l=mt,r=gn,p=It,_=vn,g=se,m=Mt;return v(),T("div",Wt,[U(d,{title:"Dashboard","total-xwhale":e.xWhaleBalance,"available-xwhale":e.availableXwhale,"redeeming-xwhale":e.redeemingXwhale},null,8,["total-xwhale","available-xwhale","redeeming-xwhale"]),t("div",Ot,[t("div",Vt,[U(S,{"holder-info":e.holderInfo,"pending-amount":e.pendingAmount,"claim-loading":e.claimLoading,onClaimPendingYield:e.claimPendingYield,onGetNextEpoch:e.getNextEpoch},null,8,["holder-info","pending-amount","claim-loading","onClaimPendingYield","onGetNextEpoch"]),e.ownerLocks&&e.ownerLocks.length>0?(v(),T("div",Ft,[Ht,(v(!0),T(Me,null,Le(e.ownerLocks,s=>(v(),P(l,{key:s,"v-item":s,loading:e.loading,onCountDown:e.countDown,onClaimWhale:e.claimWhale,onCancelRedeemPayload:e.cancelRedeemPayload},null,8,["v-item","loading","onCountDown","onClaimWhale","onCancelRedeemPayload"]))),128))])):X("",!0)]),t("div",Xt,[U(r,{"head-switch-value":e.headSwitchValue,"left-text":"Get xCETUS","right-text":"Redeem CETUS",onHeadSwitchChange:n[0]||(n[0]=s=>{e.headSwitchChange(s)})},null,8,["head-switch-value"]),e.headSwitchValue=="convert"?(v(),T("div",Yt,[t("div",jt,[U(p,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[1]||(n[1]=s=>e.fromCoinAmount=s),"input-value":e.fromCoinAmount,"coin-symbol":"CETUS","whale-direction":"From",balance:e.whaleBalance,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:n[2]||(n[2]=s=>{e.fromCoinAmount=s})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),t("div",Zt,[U(p,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[3]||(n[3]=s=>e.fromCoinAmount=s),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"To",balance:e.availableXwhale,onOnInput:n[4]||(n[4]=s=>{e.fromCoinAmount=s})},null,8,["modelValue","input-value","balance"])]),t("img",{class:he(e.change?"gang animationex":"gang"),src:pn,alt:""},null,2),t("div",qt,[(v(),T("svg",{class:he(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Kt,2))])])):(v(),T("div",Qt,[t("div",zt,[U(p,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[5]||(n[5]=s=>e.fromCoinAmount=s),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"From",balance:e.availableXwhale,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:n[6]||(n[6]=s=>{e.fixedFromCoin=!0,e.fromCoinAmount=s})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),t("div",Jt,[ea,t("div",na,[t("div",ta,[t("div",aa,[dn(t("input",{"onUpdate:modelValue":n[7]||(n[7]=s=>e.vestingParameter=s),onInput:n[8]||(n[8]=(...s)=>e.validateInput&&e.validateInput(...s)),onBlur:n[9]||(n[9]=(...s)=>e.inputBlur&&e.inputBlur(...s))},null,544),[[mn,e.vestingParameter]])]),oa]),t("div",la,[(v(!0),T(Me,null,Le(e.vestingDateList,s=>(v(),T("div",{key:s.time,class:he(["box-table",{"box-table-active":s.num===Number(e.vestingParameter)}]),onClick:B=>e.vestingTab(s.num)},y(s.time),11,sa))),128))])]),U(_,{value:e.vestingParameter,"onUpdate:value":n[10]||(n[10]=s=>e.vestingParameter=s),max:180,min:15},null,8,["value"])]),t("div",ia,[U(p,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[11]||(n[11]=s=>e.toCoinAmount=s),"input-value":e.toCoinAmount,"coin-symbol":"CETUS","whale-direction":"To",balance:e.whaleBalance,onOnInput:n[12]||(n[12]=s=>{e.fixedFromCoin=!1,e.toCoinAmount=s})},null,8,["modelValue","input-value","balance"])]),t("div",ra,[ua,t("p",null,y(e.redeemRatio)+"%",1)])])),e.wallet&&e.wallet.address?(v(),P(g,{key:2,class:"big-btn",loading:e.loading,disabled:e.btnDisabled,onClick:e.depositOrWithdraw},{default:W(()=>[t("span",null,y(e.btnText),1)]),_:1},8,["loading","disabled","onClick"])):(v(),P(g,{key:3,class:"big-btn",onClick:n[13]||(n[13]=s=>e.walletStore.setIsShowWalletModal(!0))},{default:W(()=>[t("span",null,y(e.$t("button.connectWallet")),1)]),_:1}))])]),e.openConfirmModal?(v(),P(m,{key:0,onClickConvert:e.clickModalConvert,onClose:n[14]||(n[14]=()=>e.openConfirmModal=!e.openConfirmModal)},null,8,["onClickConvert"])):X("",!0)])}const Na=j(Lt,[["render",ca],["__scopeId","data-v-b867dff2"]]);export{Na as default};
