import{_ as ze}from"./xwhale-header.ef252d60.js";import{r as _,T as We,A as V,e as q,o as v,f as y,h as n,t as w,j as D,l as ae,s as H,p as Q,k as z,m as r,i as R,c as W,w as Y,B as ge,K as Je,u as Ae,x as me,a as Le,a1 as et,a2 as tt,I as nt,S as at,v as ot,z as lt,F as $e,q as Re,E as st,a3 as it,a8 as ut}from"./entry.0db31a46.js";import{u as ke,a as Ie}from"./xcetus.7846aabf.js";import{i as he,a as fe,h as U,s as ve,c as Me,b as Be,p as j,u as Oe,r as ce,D as Pe}from"./pool.98fa8225.js";import{i as Z}from"./import-icon.de3e6c66.js";import{_ as Ve}from"./xWHALE-icon.2df34cd4.js";import{_ as Fe}from"./WHALE-icon.28f954ba.js";import{_ as rt}from"./head-switch.2c128f5c.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{_ as dt}from"./img-leverage_2x.1c577303.js";const ct={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,t){const u=_("--"),a=_("--"),b=_("--"),C=_("--");let c=null;We(()=>{window.clearInterval(c)});const S=()=>{const i=new Date().getTime()/1e3;Number(i)<=Number(e.startTime)&&s(e.startTime),Number(i)>Number(e.startTime)&&Number(i)<=Number(e.endTime)&&s(e.endTime)},s=i=>{clearInterval(c),window.clearInterval(c),c=setInterval(()=>{let h=new Date().getTime()/1e3,m=i-parseInt(String(h));if(m==0){t.emit("countDown"),clearInterval(c),window.clearInterval(c),c=null;return}else m<0&&(clearInterval(c),window.clearInterval(c),t.emit("countDown"),c=null);m--;let o=parseInt(String(m/60/60/24));o=o<10?"0"+o:o;let k=parseInt(String(m/60/60%24));k=k<10?"0"+k:k;let I=parseInt(String(m/60%60));I=I<10?"0"+I:I;let N=parseInt(String(m%60));N=N<10?"0"+N:N,u.value=o,a.value=k,b.value=I,C.value=N},1e3)};return V(()=>e.startTime,(i,h)=>{i!==h&&S()},{immediate:!0}),{day:u,hour:a,min:b,sec:C}}};const mt={class:"count-time"};function vt(e,t,u,a,b,C){return v(),y("div",mt,[n("p",null,w(a.day),1),D(" : "),n("p",null,w(a.hour),1),D(" : "),n("p",null,w(a.min),1),D(" : "),n("p",null,w(a.sec),1)])}const gt=q(ct,[["render",vt],["__scopeId","data-v-8be4764c"]]),ht={props:{titleText:{type:String,default:""},tipsText:{type:String,default:""},imgIcon:{type:String,default:""},value:{type:String,default:"--"}},setup(e){const{t}=ae();return{t}}};const ft=e=>(Q("data-v-18a16c90"),e=e(),z(),e),pt={class:"table-rewards"},_t={class:"text-top-all"},wt={key:0,class:"icon-hover-box"},bt=ft(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-information"})],-1)),Ct={class:"tips-text-box"},St=["src"];function yt(e,t,u,a,b,C){return v(),y("div",pt,[n("div",_t,[n("p",null,w(u.titleText),1),u.tipsText?(v(),y("div",wt,[bt,n("div",Ct,w(u.titleText=="est.APR"?"Estimated APR of the current epoch for all xCETUS holders.":"The number of qualified positions in this epoch."),1)])):H("",!0)]),n("span",null,[n("p",null,[u.imgIcon?(v(),y("img",{key:0,src:u.imgIcon,alt:""},null,8,St)):H("",!0),D(w(u.value),1)])])])}const Tt=q(ht,[["render",yt],["__scopeId","data-v-18a16c90"]]),At={setup(e){const{t}=ae(),u=ke(),a=r(()=>u),b=r(()=>a.value.pendingAmount),C=r(()=>a.value.nextStartTime),c=r(()=>1683094391),S=r(()=>a.value.xcetusShare&&U(a.value.xcetusShare,2)),s=he(),i=r(()=>s),h=r(()=>a.value.cetusApr&&a.value.cetusApr>.01?U(ve(a.value.cetusApr,2),2):U(a.value.cetusApr,2)),p=r(()=>a.value.pendingCoinInfo),m=_("");V(()=>p.value,g=>{g&&!Me(g)?m.value=`Pending yield (${g.symbol})`:m.value="Pending yield"},{immediate:!0});const o=()=>{setTimeout(()=>{u.getDividendManager()},3e3)},k=r(()=>a.value.dividendManagerInfo),I=r(()=>{const g=parseInt(String(new Date().getTime()/1e3)),P=k.value.interval_day,G=(g-Number(k.value.start_time))/(P*24*3600);return parseInt(String(G))>0}),N=fe(),le=r(()=>N),{setIsShowSuccess:X,setIsShowRejected:se,setIsShowWaiting:L,setTransactionDesc:we,setTransactionTxid:ie}=N,T=Ie("Sui"),F=_(!1),be=r(()=>a.value.venft_id),J=r(()=>le.value.chainName?Be(le.value.chainName):{});return{t,pendingAmount:b,nextStartTime:C,wallet:i,myShare:S,importIcon:Z,nextEndTime:c,pendingYieldText:m,cetusApr:h,pendingCoinInfo:p,getNextEpoch:o,canClaim:I,claimPendingYield:async()=>{F.value=!0,L(!0),ie(""),we(`${t("tips.claimingPendingYield")} ${b.value} ${p.value.symbol}`);try{let g;const P=await T.getRedeemDividendPayload(be.value),G=await i.value.currentWallet.signAndExecuteTransactionBlock(P);if(g=J.value.handleTx(G),g&&g.hash){ie(g.hash),L(!1),X(!0);const f={title:"Claim",desc:`Claimed ${b.value} ${p.value.symbol} successfully.`,hash:g.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:p.value.symbol,numa:`+ ${b.value}`,logoa:p.value.logo_url}};J.value.showTransitionPending(f),await J.value.watchTransaction(f)&&setTimeout(()=>{u.getVeNFTDividendInfo(),F.value=!1},3e3),u.getOwnerLockCetuss(i.value.address)}else L(!1),se(!0),F.value=!1}catch{L(!1),se(!0),F.value=!1}},claimLoading:F,addCommom:U}}},kt=""+new URL("staking-rewards-banner-h5.1c7401db.png",import.meta.url).href,It="data:image/png;base64,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";const pe=e=>(Q("data-v-99f5258f"),e=e(),z(),e),Bt={class:"top-banner"},Nt=pe(()=>n("img",{src:kt,alt:""},null,-1)),xt=pe(()=>n("p",null,"Convert CETUS to xCETUS to start earning",-1)),Dt={class:"bot-count"},Et=pe(()=>n("span",null,"Reward distribution in ",-1)),Ut={class:"holder-rewards"},$t={class:"title"},Rt=pe(()=>n("div",{class:"left"},[n("img",{src:It,alt:""}),n("span",null,"xCETUS Staking Rewards")],-1)),Pt={class:"right"},Wt={class:"rewards-value"},Lt={class:"claim-h5"};function Mt(e,t,u,a,b,C){var i;const c=gt,S=ge,s=Tt;return v(),y("div",null,[n("div",Bt,[Nt,xt,n("div",Dt,[Et,R(c,{"start-time":a.nextStartTime,onCountDown:t[0]||(t[0]=h=>e.$emit("getNextEpoch"))},null,8,["start-time"])])]),n("div",Ut,[n("div",$t,[Rt,n("div",Pt,[a.wallet&&a.wallet.address?(v(),W(S,{key:0,disabled:!a.canClaim||a.pendingAmount=="--"||a.pendingAmount<=0,loading:a.claimLoading,onClick:a.claimPendingYield},{default:Y(()=>[D(" Claim ")]),_:1},8,["disabled","loading","onClick"])):H("",!0)])]),n("div",Wt,[R(s,{"title-text":"est.APR","tips-text":"good",value:a.cetusApr+"%"},null,8,["title-text","value"]),R(s,{"title-text":"My share",value:a.myShare+"%"},null,8,["value"]),R(s,{"title-text":a.pendingYieldText,"img-icon":(i=a.pendingCoinInfo)==null?void 0:i.logo_url,value:a.addCommom(a.pendingAmount,6)},null,8,["title-text","img-icon","value"])]),n("div",Lt,[a.wallet&&a.wallet.address?(v(),W(S,{key:0,disabled:!a.canClaim||a.pendingAmount=="--"||a.pendingAmount<=0,loading:a.claimLoading,onClick:t[1]||(t[1]=h=>e.$emit("claimPendingYield"))},{default:Y(()=>[D(" Claim ")]),_:1},8,["disabled","loading"])):H("",!0)])])])}const Ot=q(At,[["render",Mt],["__scopeId","data-v-99f5258f"]]),Vt={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,t){const u=_("--"),a=_("--"),b=_("--"),C=_("--");let c=null;We(()=>{window.clearInterval(c)});const S=()=>{const i=new Date().getTime()/1e3;Number(i)<=Number(e.startTime)&&s(e.startTime),Number(i)>Number(e.startTime)&&Number(i)<=Number(e.endTime)&&s(e.endTime)},s=i=>{c=setInterval(()=>{let h=new Date().getTime()/1e3,m=i-parseInt(String(h));if(m==0){t.emit("countDown"),clearInterval(c),window.clearInterval(c),c=null;return}else m<0&&(clearInterval(c),window.clearInterval(c),t.emit("countDown"),c=null);m--;let o=parseInt(String(m/60/60/24));o=o<10?"0"+o:o;let k=parseInt(String(m/60/60%24));k=k<10?"0"+k:k;let I=parseInt(String(m/60%60));I=I<10?"0"+I:I;let N=parseInt(String(m%60));N=N<10?"0"+N:N,u.value=o,a.value=k,b.value=I,C.value=N},1e3)};return V(()=>e.startTime,(i,h)=>{i!==h&&S()},{immediate:!0}),{day:u,hour:a,min:b,sec:C}}};const _e=e=>(Q("data-v-131b3f4e"),e=e(),z(),e),Ft={class:"count-down"},Ht=_e(()=>n("span",null,"D : ",-1)),Yt=_e(()=>n("span",null,"H : ",-1)),Xt=_e(()=>n("span",null,"M : ",-1)),jt=_e(()=>n("span",null,"S",-1));function Zt(e,t,u,a,b,C){return v(),y("div",Ft,[D(w(a.day)+" ",1),Ht,D(" "+w(a.hour)+" ",1),Yt,D(" "+w(a.min)+" ",1),Xt,D(" "+w(a.sec)+" ",1),jt])}const qt=q(Vt,[["render",Zt],["__scopeId","data-v-131b3f4e"]]),Gt={components:{WcountDown:qt},props:{vItem:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},setup(e,t){const{t:u}=ae(),a=ke(),b=fe(),C=r(()=>b),c=o=>{t.emit("claim",o),a.setClaimLoading(o.id)},S=r(()=>a),s=r(()=>new Date().getTime()/1e3>e.vItem.locked_until_time),i=o=>{t.emit("cancelRedeemPayload",o),a.setClaimLoading(o.id)};r(()=>C.value.chainName),Ie("Sui");const h=he();return r(()=>h),r(()=>S.value.venft_id),r(()=>C.value.chainName?Be(C.value.chainName):{}),{t:u,prettyAmount:j,claimBoolean:s,toClaim:c,toCancel:i,claimWhale:o=>{t.emit("claimWhale",o)},cancelRedeemPayload:o=>{t.emit("cancelRedeemPayload",o)}}}};const Ne=e=>(Q("data-v-50809946"),e=e(),z(),e),Kt={class:"vesting-box"},Qt={class:"left"},zt=Ne(()=>n("img",{src:Ve,alt:""},null,-1)),Jt=Ne(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-swap2"})],-1)),en=Ne(()=>n("img",{src:Fe,alt:""},null,-1)),tn={class:"available-all"},nn={class:"available"},an={key:0},on={key:1};function ln(e,t,u,a,b,C){const c=Je("WcountDown"),S=ge;return v(),y("div",Kt,[n("div",Qt,[n("p",null,[n("span",null,[zt,D(" "+w(("addCommom"in e?e.addCommom:Ae(U))(a.prettyAmount(u.vItem.xcetus_amount,9),9))+" xCETUS ",1)]),Jt,n("span",null,[en,D(" "+w(("addCommom"in e?e.addCommom:Ae(U))(a.prettyAmount(u.vItem.cetus_amount,9),9))+" CETUS ",1)])]),n("div",tn,[n("div",nn,[n("span",null,w(a.claimBoolean?"Available":"Available in"),1),a.claimBoolean?H("",!0):(v(),W(c,{key:0,"start-time":u.vItem.locked_start_time,"end-time":u.vItem.locked_until_time,onCountDown:t[0]||(t[0]=s=>e.$emit("countDown"))},null,8,["start-time","end-time"]))]),n("div",{class:me(a.claimBoolean?"highlight right-h5":"right-h5")},[a.claimBoolean?(v(),y("span",an,"Claim")):(v(),y("span",on,"Cancel"))],2)])]),a.claimBoolean?(v(),W(S,{key:0,disabled:!a.claimBoolean||u.loading,loading:u.loading,onClick:t[1]||(t[1]=s=>a.claimWhale(u.vItem))},{default:Y(()=>[D(w(a.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"])):(v(),W(S,{key:1,type:"text",class:"right",disabled:u.loading,loading:u.loading,onClick:t[2]||(t[2]=s=>a.cancelRedeemPayload(u.vItem))},{default:Y(()=>[D(w(a.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"]))])}const sn=q(Gt,[["render",ln],["__scopeId","data-v-50809946"]]),un=Le({props:{inputValue:{type:String,default:""},coinSymbol:{type:String,default:""},whaleDirection:{type:String,default:""},address:{type:String,default:""},balance:{type:String,default:""}},setup(e,t){const{t:u,locale:a}=ae(),b=fe(),C=r(()=>b),c=et(tt,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),S=he(),s=r(()=>S),i=Oe(),h=r(()=>i),p=o=>{const I=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");o.target.value=o.target.value.replace(I,"$1")},m=r(()=>{var o;return h.value.tokensObj&&e.address&&h.value.tokensObj[e.address]&&((o=h.value.tokensObj[e.address])==null?void 0:o.decimals)});return V(()=>h.value.RATES,o=>{},{immediate:!0}),{pool:h,t:u,addCommom:U,store:C,wallet:s,indicator:c,inputChange:p,importIcon:Z,coinDecimals:m}}});const rn=e=>(Q("data-v-e2d79e01"),e=e(),z(),e),dn={class:"card"},cn={class:"top"},mn={class:"left"},vn={class:"loading-token"},gn={key:0,src:Fe,alt:""},hn={key:1,src:Ve,alt:""},fn={class:"bottom"},pn=rn(()=>n("div",null,null,-1)),_n={class:"top"},wn={class:"right"},bn={key:0,class:"balance"};function Cn(e,t,u,a,b,C){var i,h;const c=nt,S=at,s=ge;return v(),y("div",dn,[n("div",cn,[R(c,{value:e.inputValue,placeholder:"0.0",onChange:e.inputChange,onInput:t[0]||(t[0]=p=>e.$emit("onInput",p.target.value)),onFocus:t[1]||(t[1]=p=>e.$emit("onFocus"))},null,8,["value","onChange"]),n("div",mn,[n("div",vn,[e.coinSymbol=="CETUS"?(v(),y("img",gn)):(v(),y("img",hn)),n("div",null,[n("p",null,w(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1)])])])]),n("div",fn,[pn,n("div",_n,[n("div",wn,[n("span",null,w(e.$t("common.balance")),1),e.balance?(v(),y("span",bn,w(("addCommom"in e?e.addCommom:Ae(U))(e.balance)),1)):(v(),W(S,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})),e.whaleDirection=="From"?(v(),W(s,{key:2,class:"max-btn",disabled:!e.balance||e.balance==0||!((i=e.wallet)!=null&&i.address),onClick:t[2]||(t[2]=p=>e.$emit("halfBalanne"))},{default:Y(()=>[D(w("Half"))]),_:1},8,["disabled"])):H("",!0),e.whaleDirection=="From"?(v(),W(s,{key:3,class:"max-btn",disabled:!e.balance||e.balance==0||!((h=e.wallet)!=null&&h.address),onClick:t[3]||(t[3]=p=>e.$emit("maxBalanne"))},{default:Y(()=>[D(w(e.$t("button.max")),1)]),_:1},8,["disabled"])):H("",!0)])])])])}const Sn=q(un,[["render",Cn],["__scopeId","data-v-e2d79e01"]]),yn=Le({setup(){const e=ke(),t=r(()=>e),u=r(()=>t.value.venft_id),a=r(()=>t.value.venftInfo),b=Oe(),C=r(()=>b);r(()=>C.value.tokensObj&&C.value.tokensObj["0x2a4f647bc73f070182436658bff75060246019857c769ad9268c22c4472bca7f::cetus::CETUS"]);const c=_("");let S=_(!1);const s=_(""),i=_(""),h=_(!1),p=_("convert"),{t:m}=ae(),o=_([{time:"15 D",num:15},{time:"30 D",num:30},{time:"90 D",num:90},{time:"180 D",num:180}]),k=_([{name:"est.APR",value:"100.12%"},{name:"My share",value:"<0.1%"},{name:"Pending yield (USDC)",value:0}]),I=_([{name:"My total locked",value:"$100.12"},{name:"Pending rewards (xCETUS)",value:"100.12"},{name:"",value:""}]),N=_([{name:"My positions",value:"12"},{name:"My qualified positions",value:"0"},{name:"Pending rewards (xCETUS)",value:"100.12"}]),le=window.setInterval(()=>{e.getXcetusApr(),f.value.address&&(e.getMyShare(f.value.address),e.getVeNFTDividendInfo())},6e4);ot(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||e.getDividendManager()}),e.getXcetusApr(),e.getDividendManager()}),lt(()=>{window.clearInterval(le)});const X=r(()=>t.value.whaleBalance),se=r(()=>t.value.xWhaleBalance),L=r(()=>t.value.availableXwhale),we=r(()=>t.value.redeemingXwhale),ie=r(()=>{if(p.value=="convert"){if(Number(s.value)>Number(X.value))return!0}else if(Number(s.value)>Number(L.value))return!0;return!s.value||!i.value||Number(s.value)==0||Number(i.value)==0}),T=_("180"),F=r(()=>p.value=="convert"&&Number(s.value)>Number(X.value)?m("button.insufficientBalance",{name:"CETUS"}):p.value!=="convert"&&Number(s.value)>Number(L.value)?m("button.insufficientBalance",{name:"xCETUS"}):Number(T.value)<15?"Minimum vesting duration is 15 days":p.value=="convert"&&u?"Convert":p.value!=="convert"&&u?"Redeem":"Convert"),be=l=>{s.value="",i.value="",p.value=l},J=()=>{S.value=!0,setTimeout(()=>{S.value=!1},300)},xe=l=>{T.value=l},g=_(!1),P=Ie("Sui"),G=he(),f=r(()=>G),Ce=r(()=>t.value.ownerLocks);V(()=>f.value.address,l=>{l?(e.getOwnerVeNFT(l),e.getAccountWhaleBalance(l),e.getOwnerLockCetuss(l),e.getMyShare(l)):e.loginOut()},{immediate:!0});const E=r(()=>Se.value.chainName?Be(Se.value.chainName):{}),De=fe(),Se=r(()=>De),ee=r(()=>Se.value.chainName),{setIsShowSuccess:te,setIsShowRejected:M,setIsShowWaiting:A,setTransactionDesc:ne,setTransactionTxid:O}=De,Ee=async()=>{g.value=!0,A(!0),O(""),ne(m("tips.converting",{from:`${U(s.value,9)} CETUS`,and:"to",to:`${U(s.value,9)} xCETUS`}));try{let l;const d=ce(s.value,9),B=await P.depositCetus(d,u.value),$=await f.value.currentWallet.signAndExecuteTransactionBlock(B);if(l=E.value.handleTx($),l&&l.hash){O(l.hash),A(!1),te(!0);const x={title:"Converted",desc:`Converted ${U(s.value,9)} xCETUS successfully`,hash:l.hash,tit:"Converted",icon:"icon-icon-Swap",tokenInfo:{tokena:"CETUS",numa:`- ${s.value}`,logoa:Z("/sui-image/WHALE-icon.png"),tokenb:"xCETUS",numb:`+ ${s.value}`,logob:Z("/sui-image/xWHALE-icon.png")}};ee.value!=="Aptos"&&(x.res=l.res),E.value.showTransitionPending(x),await E.value.watchTransaction(x)&&setTimeout(()=>{e.getAccountWhaleBalance(f.value.address),e.getOwnerVeNFT(f.value.address),e.getOwnerLockCetuss(f.value.address),e.getMyShare(f.value.address)},3e3),g.value=!1}else A(!1),M(!0),g.value=!1;s.value=""}catch{A(!1),M(!0),g.value=!1,s.value=""}},K=_(!0),ye=_("0"),He=async()=>{const l=ce(s.value,9),d=await P.redeemNum(l,Number(T.value));i.value=j(d.amountOut,9),ye.value=d.percent},Ye=async()=>{const l=ce(i.value,9),d=await P.reverseRedeemNum(l,Number(T.value));s.value=j(d.amountOut,9),ye.value=d.percent};V(()=>[s.value,T.value,K.value],([l,d,B])=>{l&&d&&B&&Number(d)>=15&&He(),!l&&B&&(i.value="")},{immediate:!0}),V(()=>[i.value,T.value,K.value],([l,d,B])=>{l&&d&&!B&&Number(d)>=15&&Ye(),!l&&!B&&(s.value="")},{immediate:!0}),V(()=>[T.value,K.value],([l,d])=>{Number(l)>180?T.value="180":Number(l)<15?d?i.value="":s.value="":l||(d?s.value="":i.value="")},{immediate:!0});const Xe=()=>{K.value=!0,s.value=ve(new Pe(p.value!=="convert"?L.value:X.value).div(new Pe(2)).toString(),9)},je=()=>{K.value=!0,s.value=p.value!=="convert"?ve(L.value,9):ve(X.value,9)},Ue=async()=>{g.value=!0,A(!0),O(""),ne(m("tips.redeeming",{from:`${U(s.value,9)} xCETUS`,to:`${U(i.value,9)} CETUS`}));try{let l;const d=ce(s.value,9),B=await P.getRedeemLockPayload(d,u.value,Number(T.value)),$=await f.value.currentWallet.signAndExecuteTransactionBlock(B);if(l=E.value.handleTx($),l&&l.hash){O(l.hash),A(!1),te(!0);const x={title:"Redemption",desc:"Redemption transaction submitted successfully.",hash:l.hash,tit:"Vesting",icon:"icon-icon-Removed",tokenInfo:{tokena:"xCETUS",numa:`- ${s.value}`,logoa:Z("/sui-image/xWHALE-icon.png")}};ee.value!=="Aptos"&&(x.res=l.res),E.value.showTransitionPending(x),await E.value.watchTransaction(x)&&setTimeout(()=>{e.getAccountWhaleBalance(f.value.address),e.getOwnerVeNFT(f.value.address),e.getOwnerLockCetuss(f.value.address),e.getMyShare(f.value.address)},3e3),g.value=!1}else A(!1),M(!0),g.value=!1;s.value="",i.value=""}catch{A(!1),M(!0),g.value=!1,s.value="",i.value=""}};V(()=>[u.value,Ce.value,a.value,f.value.address],([l,d,B,$])=>{$&&(l&&e.getVeNFTDividendInfo(),l&&!Me(B)&&d&&d.length>0&&e.getAvailableXCetus())},{immediate:!0,deep:!0});const Ze=async l=>{g.value=!0,A(!0),O(""),ne("");try{let d;const B=await P.getCancelRedeemPayload(l.id,u.value),$=await f.value.currentWallet.signAndExecuteTransactionBlock(B);if(d=E.value.handleTx($),d&&d.hash){O(d.hash),A(!1),te(!0);const x={title:"Cancelled Redemption",desc:"Cancelled redemption successfully.",hash:d.hash,tit:"Cancelled Redemption",icon:"icon-a-icon-Shutdown",tokenInfo:{tokena:"xCETUS",numa:`+ ${j(l.xcetus_amount,9)}`,logoa:Z("/sui-image/xWHALE-icon.png")}};ee.value!=="Aptos"&&(x.res=d.res),E.value.showTransitionPending(x),await E.value.watchTransaction(x)&&setTimeout(()=>{e.getOwnerVeNFT(f.value.address),e.getOwnerLockCetuss(f.value.address),g.value=!1},3e3)}else A(!1),M(!0),g.value=!1;s.value="",i.value=""}catch{A(!1),M(!0),g.value=!1,s.value="",i.value="",e.setClaimLoading("")}},qe=_({}),Ge=()=>{e.getOwnerLockCetuss(f.value.address)},Ke=async l=>{g.value=!0,A(!0),O(""),ne(`${m("tips.claimingPendingYield")} ${U(j(l.cetus_amount,9),9)} CETUS`);try{let d;const B=await P.getRedeemPayload(l.id,u.value),$=await f.value.currentWallet.signAndExecuteTransactionBlock(B);if(d=E.value.handleTx($),d&&d.hash){O(d.hash),A(!1),te(!0);const x={title:"Claimed",desc:`Claimed ${U(j(l.cetus_amount,9),9)} CETUS successfully.`,hash:d.hash,tit:"CETUS Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:"CETUS",numa:`+ ${j(l.cetus_amount,9)}`,logoa:Z("/sui-image/WHALE-icon.png")}};ee.value!=="Aptos"&&(x.res=d.res),E.value.showTransitionPending(x),await E.value.watchTransaction(x)&&setTimeout(()=>{e.getOwnerLockCetuss(f.value.address),e.getAccountWhaleBalance(f.value.address),e.getOwnerVeNFT(f.value.address),e.getMyShare(f.value.address),e.getAvailableXCetus(),g.value=!1},3e3)}else A(!1),M(!0),g.value=!1;s.value="",i.value=""}catch{A(!1),M(!0),g.value=!1,s.value="",i.value="",e.setClaimLoading("")}},Qe=()=>{F.value=="Redeem"?Ue():Ee()},ue=r(()=>t.value.pendingCoinInfo),re=r(()=>t.value.pendingAmount),de=_(!1);return{validateInput:()=>{T.value&&(T.value=T.value.replace(/[^\d]/g,""),T.value.charAt(0)==="0"&&(T.value=T.value.slice(1)))},countDown:Ge,value:c,change:S,clickExchange:J,fromCoinAmount:s,toCoinAmount:i,showCoinSelect:h,headSwitchValue:p,headSwitchChange:be,vestingDateList:o,vestingParameter:T,vestingTab:xe,holderList:k,lockupList:I,leaderboardList:N,whaleBalance:X,depositCetus:Ee,btnText:F,loading:g,redeemRatio:ye,halfBalanne:Xe,maxBalanne:je,xWhaleBalance:se,availableXwhale:L,redeemingXwhale:we,withdrawWhale:Ue,ownerLocks:Ce,cancelRedeemPayload:Ze,holderInfo:qe,btnDisabled:ie,fixedFromCoin:K,walletStore:G,claimWhale:Ke,wallet:f,depositOrWithdraw:Qe,pendingAmount:re,claimPendingYield:async()=>{de.value=!0,A(!0),O(""),ne(`${m("tips.claimingPendingYield")} ${re.value} ${ue.value.symbol}`);try{let l;const d=await P.getRedeemDividendPayload(u.value),B=await f.value.currentWallet.signAndExecuteTransactionBlock(d);if(l=E.value.handleTx(B),l&&l.hash){O(l.hash),A(!1),te(!0);const $={title:"Claim",desc:`Claimed ${re.value} ${ue.value.symbol} successfully.`,hash:l.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:ue.value.symbol,numa:`+ ${re.value}`,logoa:ue.value.logo_url}};ee.value!=="Aptos"&&($.res=l.res),E.value.showTransitionPending($),await E.value.watchTransaction($)&&setTimeout(()=>{e.getVeNFTDividendInfo(),de.value=!1},3e3),e.getOwnerLockCetuss(f.value.address)}else A(!1),M(!0),de.value=!1,g.value=!1}catch{A(!1),M(!0),de.value=!1}},inputBlur:()=>{Number(T.value)<15&&(T.value="15")},getNextEpoch:()=>{e.getVeNFTDividendInfo()}}}});const oe=e=>(Q("data-v-eba9b14b"),e=e(),z(),e),Tn={class:"dashboard-all"},An={class:"dashboard-content"},kn={class:"content-left"},In={key:0,class:"vesting"},Bn=oe(()=>n("p",null,"Vesting",-1)),Nn={class:"content-right"},xn={key:0,class:"card-container"},Dn={class:"card-item"},En={class:"card-item"},Un={class:"exchange"},$n=oe(()=>n("use",{"xlink:href":"#icon-icon-swap2"},null,-1)),Rn=[$n],Pn={key:1,class:"card-redeem"},Wn={class:"card-item"},Ln={class:"vesting-duration"},Mn=oe(()=>n("p",null,"Vesting duration",-1)),On={class:"vesting-content"},Vn={class:"vesting-left"},Fn={class:"value-days"},Hn=oe(()=>n("span",null,"days",-1)),Yn={class:"vesting-right"},Xn=["onClick"],jn={class:"card-item"},Zn={class:"redeem-ratio"},qn=oe(()=>n("span",null,"Redeem ratio",-1));function Gn(e,t,u,a,b,C){const c=ze,S=Ot,s=sn,i=rt,h=Sn,p=ut,m=ge;return v(),y("div",Tn,[R(c,{title:"Dashboard","total-xwhale":e.xWhaleBalance,"available-xwhale":e.availableXwhale,"redeeming-xwhale":e.redeemingXwhale},null,8,["total-xwhale","available-xwhale","redeeming-xwhale"]),n("div",An,[n("div",kn,[R(S,{"holder-info":e.holderInfo,"pending-amount":e.pendingAmount,"claim-loading":e.claimLoading,onClaimPendingYield:e.claimPendingYield,onGetNextEpoch:e.getNextEpoch},null,8,["holder-info","pending-amount","claim-loading","onClaimPendingYield","onGetNextEpoch"]),e.ownerLocks&&e.ownerLocks.length>0?(v(),y("div",In,[Bn,(v(!0),y($e,null,Re(e.ownerLocks,o=>(v(),W(s,{key:o,"v-item":o,loading:e.loading,onCountDown:e.countDown,onClaimWhale:e.claimWhale,onCancelRedeemPayload:e.cancelRedeemPayload},null,8,["v-item","loading","onCountDown","onClaimWhale","onCancelRedeemPayload"]))),128))])):H("",!0)]),n("div",Nn,[R(i,{"head-switch-value":e.headSwitchValue,"left-text":"Get xCETUS","right-text":"Redeem CETUS",onHeadSwitchChange:t[0]||(t[0]=o=>{e.headSwitchChange(o)})},null,8,["head-switch-value"]),e.headSwitchValue=="convert"?(v(),y("div",xn,[n("div",Dn,[R(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[1]||(t[1]=o=>e.fromCoinAmount=o),"input-value":e.fromCoinAmount,"coin-symbol":"CETUS","whale-direction":"From",balance:e.whaleBalance,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:t[2]||(t[2]=o=>{e.fromCoinAmount=o})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),n("div",En,[R(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[3]||(t[3]=o=>e.fromCoinAmount=o),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"To",balance:e.availableXwhale,onOnInput:t[4]||(t[4]=o=>{e.fromCoinAmount=o})},null,8,["modelValue","input-value","balance"])]),n("img",{class:me(e.change?"gang animationex":"gang"),src:dt,alt:""},null,2),n("div",Un,[(v(),y("svg",{class:me(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Rn,2))])])):(v(),y("div",Pn,[n("div",Wn,[R(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[5]||(t[5]=o=>e.fromCoinAmount=o),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"From",balance:e.availableXwhale,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:t[6]||(t[6]=o=>{e.fixedFromCoin=!0,e.fromCoinAmount=o})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),n("div",Ln,[Mn,n("div",On,[n("div",Vn,[n("div",Fn,[st(n("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>e.vestingParameter=o),onInput:t[8]||(t[8]=(...o)=>e.validateInput&&e.validateInput(...o)),onBlur:t[9]||(t[9]=(...o)=>e.inputBlur&&e.inputBlur(...o))},null,544),[[it,e.vestingParameter]])]),Hn]),n("div",Yn,[(v(!0),y($e,null,Re(e.vestingDateList,o=>(v(),y("div",{key:o.time,class:me(["box-table",{"box-table-active":o.num===Number(e.vestingParameter)}]),onClick:k=>e.vestingTab(o.num)},w(o.time),11,Xn))),128))])]),R(p,{value:e.vestingParameter,"onUpdate:value":t[10]||(t[10]=o=>e.vestingParameter=o),max:180,min:15},null,8,["value"])]),n("div",jn,[R(h,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[11]||(t[11]=o=>e.toCoinAmount=o),"input-value":e.toCoinAmount,"coin-symbol":"CETUS","whale-direction":"To",balance:e.whaleBalance,onOnInput:t[12]||(t[12]=o=>{e.fixedFromCoin=!1,e.toCoinAmount=o})},null,8,["modelValue","input-value","balance"])]),n("div",Zn,[qn,n("p",null,w(e.redeemRatio)+"%",1)])])),e.wallet&&e.wallet.address?(v(),W(m,{key:2,class:"big-btn",loading:e.loading,disabled:e.btnDisabled,onClick:e.depositOrWithdraw},{default:Y(()=>[n("span",null,w(e.btnText),1)]),_:1},8,["loading","disabled","onClick"])):(v(),W(m,{key:3,class:"big-btn",onClick:t[13]||(t[13]=o=>e.walletStore.setIsShowWalletModal(!0))},{default:Y(()=>[n("span",null,w(e.$t("button.connectWallet")),1)]),_:1}))])])])}const va=q(yn,[["render",Gn],["__scopeId","data-v-eba9b14b"]]);export{va as default};
