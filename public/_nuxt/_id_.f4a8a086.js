import{_ as me}from"./new-position-title.add0a948.js";import{_ as Go}from"./token-warning.70ab7fd9.js";import{_ as ve}from"./status-block.8e7d9d22.js";import{_ as Zo}from"./auto-pool-apy-tips.aed7a1a8.js";import{u as Bo,g as pe,a as L,d as ko,c as po,p as Jo,b as xo,s as $o,e as eo,T as yo,f as fe,h as _e,C as Ko}from"./pool.a83cca96.js";import{u as Co,a as Do}from"./sha256.30d5a342.js";import{i as co}from"./import-icon.de3e6c66.js";import{u as jo,a as oe}from"./autoPool.5e2d4387.js";import{a as fo,l as c,r as N,m as _o,q as to,e as bo,s as Oo,o as _,f as B,h as e,t as Q,i as W,v as r,j as lo,x as Io,u as U,p as So,k as wo,M as ee,y as Uo,z as ne,c as V,w as so,B as Xo,A as te,C as Yo,D as be,L as ge,I as he,S as se,E as ye,b as ie,F as $e,G as Ie,H as ke}from"./entry.8de2e4f5.js";import{_ as Ce}from"./assets-card.398df572.js";import{_ as Se}from"./coin-lock.8bc74ffe.js";import{D as I}from"./decimal.0e8aa3f1.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./decimal.633e31ee.js";import{V as Qo}from"./index.40a6c4e4.js";import"./back.10b3cd15.js";import"./swap-setting.a7067461.js";/* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.dca8ca9e.js";const we=fo({components:{AutoPoolApyTips:Zo},setup(){const o=Co(),n=c(()=>o),q=Bo(),P=c(()=>q),T=c(()=>n.value.theme),k=l=>{var i;return(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||((i=P.value.tokensObj[l==null?void 0:l.address])==null?void 0:i.logo_url)||(T.value==="default"?co("/image/coins/unknown.png"):co("/image/coins/sui-unknown.png"))},g=N(!0),f=jo(),v=c(()=>f),h=_o(),s=N();to(()=>[v.value.positionInfoObj,h.params.id],([l,i])=>{l&&!po(l)&&i&&(s.value=l[i],console.log(s.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const t=c(()=>{var l;return(l=s.value)==null?void 0:l.needReverse}),u=c(()=>{var l,i;return v.value.apyObj&&((i=v.value.apyObj[(l=s.value)==null?void 0:l.id])==null?void 0:i.tvl)||"--"}),a=c(()=>{var l,i;return v.value.apyObj&&((i=v.value.apyObj[(l=s.value)==null?void 0:l.id])==null?void 0:i.apr)||"--"});return{positionInfo:s,tvl:u,store:n,indexStore:o,needReverse:t,getCoinIcon:k,getExplorerUrl:pe,addCommom:L,decimalUi:ko,direct:g,apy:a}}});const Mo=o=>(So("data-v-754ed98b"),o=o(),wo(),o),Ae={class:"auto-position-info"},Pe={class:"pool-info"},Re={class:"left"},qe={class:"coin-a"},Te={alt:""},Ne={class:"coin-b"},Le={alt:""},Be={class:"position-name"},Oe={key:0,class:"pool-fee"},Me=Mo(()=>e("span",null,"Fee tier",-1)),De={class:"right"},je={class:"price-info"},Ue={class:"current-price"},Fe=Mo(()=>e("span",null,"Current Price",-1)),We={class:"coin-rate"},Ee=Mo(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Xe=Mo(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ze=[Ee,Xe],He={key:0},Ve={key:1},Ye={class:"apy-and-tvl"},Ge={class:"apy"},Je=Mo(()=>e("div",{class:"apy-title"},"APY",-1)),Ke={class:"apy-text"},Qe={class:"tvl"},Ze=Mo(()=>e("div",{class:"tvl-title"},"TVL",-1)),xe={class:"tvl-text"};function on(o,n,q,P,T,k){var s,t,u,a,l,i,d,C,w,b,E,R,S,X,$,M,Z,x,Y,F,G,z,oo,J,go,ao,Ro,mo,qo,To,m,H,io;const g=Go,f=ve,v=Zo,h=Oo("image");return _(),B("div",Ae,[e("div",Pe,[e("div",Re,[e("div",qe,[Q(e("img",Te,null,512),[[h,o.needReverse?o.getCoinIcon((t=o.positionInfo)==null?void 0:t.token_b):o.getCoinIcon((s=o.positionInfo)==null?void 0:s.token_a)]]),W(g,{address:o.needReverse?(i=(l=o.positionInfo)==null?void 0:l.token_b)==null?void 0:i.address:(a=(u=o.positionInfo)==null?void 0:u.token_a)==null?void 0:a.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Ne,[Q(e("img",Le,null,512),[[h,o.needReverse?o.getCoinIcon((C=o.positionInfo)==null?void 0:C.token_a):o.getCoinIcon((d=o.positionInfo)==null?void 0:d.token_b)]]),W(g,{address:o.needReverse?(R=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:R.address:(b=(w=o.positionInfo)==null?void 0:w.token_b)==null?void 0:b.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Be,r(o.needReverse?(X=(S=o.positionInfo)==null?void 0:S.token_b)==null?void 0:X.symbol:(M=($=o.positionInfo)==null?void 0:$.token_a)==null?void 0:M.symbol)+" - "+r(o.needReverse?(x=(Z=o.positionInfo)==null?void 0:Z.token_a)==null?void 0:x.symbol:(F=(Y=o.positionInfo)==null?void 0:Y.token_b)==null?void 0:F.symbol),1),(G=o.positionInfo)!=null&&G.fee?(_(),B("div",Oe,[Me,lo(" "+r(((z=o.positionInfo)==null?void 0:z.fee)*100)+"% ",1)])):Io("",!0)]),e("div",De,[W(f,{"current-status":(oo=o.positionInfo)==null?void 0:oo.currentStatus},null,8,["current-status"])])]),e("div",je,[e("div",Ue,[e("div",null,[Fe,e("div",We,[e("div",{onClick:n[0]||(n[0]=vo=>o.direct=!o.direct)},ze)])]),(o.needReverse?!o.direct:o.direct)?(_(),B("div",He,[lo(r(("addCommom"in o?o.addCommom:U(L))(("decimalUi"in o?o.decimalUi:U(ko))((J=o.positionInfo)==null?void 0:J.price,6)))+"   ",1),e("span",null,r((ao=(go=o.positionInfo)==null?void 0:go.token_b)==null?void 0:ao.symbol)+" per "+r((mo=(Ro=o.positionInfo)==null?void 0:Ro.token_a)==null?void 0:mo.symbol),1)])):(_(),B("div",Ve,[lo(r(("addCommom"in o?o.addCommom:U(L))(("decimalUi"in o?o.decimalUi:U(ko))(1/((qo=o.positionInfo)==null?void 0:qo.price),6)))+"   ",1),e("span",null,r((m=(To=o.positionInfo)==null?void 0:To.token_a)==null?void 0:m.symbol)+" per "+r((io=(H=o.positionInfo)==null?void 0:H.token_b)==null?void 0:io.symbol),1)]))]),e("div",Ye,[e("div",Ge,[Je,e("div",Ke,[lo(r(o.apy)+" ",1),W(v)])]),e("div",Qe,[Ze,e("div",xe,"$"+r(("addCommom"in o?o.addCommom:U(L))(o.tvl,2)),1)])])])])}const le=bo(we,[["render",on],["__scopeId","data-v-754ed98b"]]),en=fo({setup(){const o=jo(),n=c(()=>o),q=_o(),P=c(()=>(console.log(n.value.positionInfoObj[q.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),n.value.positionInfoObj[q.params.id])),T=c(()=>{var v;return(v=P.value)==null?void 0:v.needReverse}),k=Do(),g=c(()=>k);return{positionInfo:P,needReverse:T,addCommom:L,wallet:g,getCoinIcon:v=>(v==null?void 0:v.logoURI)||(v==null?void 0:v.logo_url)||co("/image/coins/sui-unknown.png")}}});const Ao=o=>(So("data-v-ddd2440b"),o=o(),wo(),o),nn={class:"auto-position-liquidity"},tn={class:"my-liquidity"},sn={class:"left"},ln=Ao(()=>e("div",null,"My Liquidity",-1)),an={key:0},un={key:1},dn={class:"right"},rn=Ao(()=>e("div",null,"My share",-1)),cn={key:0},mn={key:1},vn={class:"my-liquidity-info"},pn={class:"lp-info"},fn={class:"lp-bg"},_n={alt:""},bn={key:0,class:"lp-num"},gn={key:1,class:"lp-num"},hn=Ao(()=>e("div",{class:"assets-pooled-title"}," Pooled Assets ",-1)),yn={class:"assets-pooled"},$n={alt:""},In={key:0},kn={key:1},Cn=Ao(()=>e("p",null,"--",-1)),Sn=Ao(()=>e("p",null,"--",-1)),wn=[Cn,Sn],An={alt:""},Pn={key:0},Rn={key:1},qn=Ao(()=>e("p",null,"--",-1)),Tn=Ao(()=>e("p",null,"--",-1)),Nn=[qn,Tn];function Ln(o,n,q,P,T,k){var f,v,h,s,t,u,a,l,i,d,C,w,b,E,R,S,X,$,M,Z,x,Y,F,G,z,oo,J;const g=Oo("image");return _(),B("div",nn,[e("div",tn,[e("div",sn,[ln,(f=o.wallet)!=null&&f.connected?(_(),B("div",an,"$"+r(("addCommom"in o?o.addCommom:U(L))((v=o.positionInfo)==null?void 0:v.myLiquidityUSD)),1)):(_(),B("div",un,"--"))]),e("div",dn,[rn,(h=o.wallet)!=null&&h.connected?(_(),B("div",cn,r((s=o.positionInfo)==null?void 0:s.myShare)+"%",1)):(_(),B("div",mn,"--%"))])]),e("div",vn,[e("div",pn,[e("div",fn,[Q(e("img",_n,null,512),[[g,((u=(t=o.positionInfo)==null?void 0:t.lpInfo)==null?void 0:u.logo_url)||o.getCoinIcon((a=o.positionInfo)==null?void 0:a.lpInfo)]])]),(l=o.wallet)!=null&&l.connected?(_(),B("div",bn,r(("addCommom"in o?o.addCommom:U(L))((i=o.positionInfo)==null?void 0:i.myLiquidity))+" LP",1)):(_(),B("div",gn,"-- LP"))]),hn,e("div",yn,[e("div",null,[Q(e("img",$n,null,512),[[g,o.needReverse?o.getCoinIcon((d=o.positionInfo)==null?void 0:d.token_b):o.getCoinIcon((C=o.positionInfo)==null?void 0:C.token_a)]]),(w=o.wallet)!=null&&w.connected?(_(),B("div",In,[e("p",null,r((b=o.positionInfo)==null?void 0:b.myAmountAUSD),1),e("p",null,r(("addCommom"in o?o.addCommom:U(L))((E=o.positionInfo)==null?void 0:E.amountA))+" "+r(o.needReverse?(S=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:S.symbol:($=(X=o.positionInfo)==null?void 0:X.token_a)==null?void 0:$.symbol),1)])):(_(),B("div",kn,wn))]),e("div",null,[Q(e("img",An,null,512),[[g,o.needReverse?o.getCoinIcon((M=o.positionInfo)==null?void 0:M.token_a):o.getCoinIcon((Z=o.positionInfo)==null?void 0:Z.token_b)]]),(x=o.wallet)!=null&&x.connected?(_(),B("div",Pn,[e("p",null,r((Y=o.positionInfo)==null?void 0:Y.myAmountBUSD),1),e("p",null,r(("addCommom"in o?o.addCommom:U(L))((F=o.positionInfo)==null?void 0:F.amountB))+" "+r(o.needReverse?(z=(G=o.positionInfo)==null?void 0:G.token_a)==null?void 0:z.symbol:(J=(oo=o.positionInfo)==null?void 0:oo.token_b)==null?void 0:J.symbol),1)])):(_(),B("div",Rn,Nn))])])])])}const ae=bo(en,[["render",Ln],["__scopeId","data-v-ddd2440b"]]),Bn=fo({components:{Modal:ee},props:{poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},totalAmount:{type:String,default:""},shareOfPool:{type:String,default:""},minimumReceivedLP:{type:String,default:""}},setup(o,n){const{t:q}=Uo(),P=c(()=>{var u,a,l;return((u=o==null?void 0:o.poolInfo)==null?void 0:u.needReverse)||((l=(a=o==null?void 0:o.poolInfo)==null?void 0:a.poolInfo)==null?void 0:l.needReverse)}),T=Bo(),k=c(()=>T),g=Co(),f=c(()=>g),v=u=>{var a;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((a=k.value.tokensObj[u==null?void 0:u.address])==null?void 0:a.logo_url)||(f.value.theme==="default"?co("/image/coins/unknown.png"):co("/image/coins/sui-unknown.png"))},h=_o(),s=N(!1),t=()=>{n.emit("toAdd")};return console.log(o,"props451"),{needReverse:P,getCoinIcon:v,addCommom:L,t:q,route:h,checked:s,decimalUi:ko,clickSubmit:t}}});const Fo=o=>(So("data-v-bb911124"),o=o(),wo(),o),On=Fo(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Mn={class:"modal-content"},Dn={class:"pool-info"},jn={class:"left"},Un={alt:""},Fn={alt:""},Wn={class:"pool-name"},En={class:"right"},Xn={class:"coin-info"},zn={class:"from-coin-info"},Hn={class:"left"},Vn={class:"coin-amount"},Yn={class:"coin-symbol"},Gn={class:"right"},Jn={class:"to-coin-info"},Kn={class:"left"},Qn={class:"coin-amount"},Zn={class:"coin-symbol"},xn={class:"right"},ot=Fo(()=>e("div",{class:"to-swap-logo"},null,-1)),et={class:"add-info"},nt={class:"total-amount"},tt=Fo(()=>e("span",null,"Total Amount",-1)),st={class:"total-amount"},it=Fo(()=>e("span",null,"Share of Pool",-1)),lt={class:"total-amount"},at=Fo(()=>e("span",null,"Minimum Received LP",-1));function ut(o,n,q,P,T,k){const g=Go,f=Xo,v=ne("Modal"),h=Oo("image");return _(),V(v,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:n[0]||(n[0]=s=>o.$emit("onClose"))},{closeIcon:so(()=>[On]),default:so(()=>{var s,t,u,a,l,i,d,C,w,b,E,R,S,X,$,M,Z,x,Y,F,G,z,oo,J;return[e("div",Mn,[e("div",Dn,[e("div",jn,[e("div",null,[Q(e("img",Un,null,512),[[h,o.needReverse?(a=(u=o.poolInfo)==null?void 0:u.token_b)==null?void 0:a.logo_url:(t=(s=o.poolInfo)==null?void 0:s.token_a)==null?void 0:t.logo_url]]),W(g,{address:o.needReverse?(C=(d=o.poolInfo)==null?void 0:d.token_b)==null?void 0:C.address:(i=(l=o.poolInfo)==null?void 0:l.token_a)==null?void 0:i.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[Q(e("img",Fn,null,512),[[h,o.needReverse?(R=(E=o.poolInfo)==null?void 0:E.token_a)==null?void 0:R.logo_url:(b=(w=o.poolInfo)==null?void 0:w.token_b)==null?void 0:b.logo_url]]),W(g,{address:o.needReverse?(M=($=o.poolInfo)==null?void 0:$.token_a)==null?void 0:M.address:(X=(S=o.poolInfo)==null?void 0:S.token_b)==null?void 0:X.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",Wn,[e("span",null,r(o.needReverse?(F=(Y=o.poolInfo)==null?void 0:Y.token_b)==null?void 0:F.symbol:(x=(Z=o.poolInfo)==null?void 0:Z.token_a)==null?void 0:x.symbol),1),lo(" - "),e("span",null,r(o.needReverse?(J=(oo=o.poolInfo)==null?void 0:oo.token_a)==null?void 0:J.symbol:(z=(G=o.poolInfo)==null?void 0:G.token_b)==null?void 0:z.symbol),1)])]),e("div",En,[lo(" Fee tier "),e("span",null,r(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),e("div",Xn,[e("div",zn,[e("div",Hn,[e("div",Vn,r(("addCommom"in o?o.addCommom:U(L))(o.fromCoinAmount)||0),1),e("div",Yn,r(o.fromCoin&&o.fromCoin.symbol),1)]),e("div",Gn,[Q(e("img",null,null,512),[[h,o.fromCoin&&o.fromCoin.logoURI||o.getCoinIcon(o.fromCoin)]]),W(g,{address:o.fromCoin&&o.fromCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])])]),e("div",Jn,[e("div",Kn,[e("div",Qn,r(("addCommom"in o?o.addCommom:U(L))(o.toCoinAmount)||0),1),e("div",Zn,r(o.toCoin&&o.toCoin.symbol),1)]),e("div",xn,[Q(e("img",null,null,512),[[h,o.toCoin&&o.toCoin.logoURI||o.getCoinIcon(o.toCoin)]]),W(g,{address:o.toCoin&&o.toCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),ot])]),e("div",et,[e("div",nt,[tt,e("span",null,"$"+r(("addCommom"in o?o.addCommom:U(L))(o.totalAmount)),1)]),e("div",st,[it,e("span",null,r(o.shareOfPool)+"%",1)]),e("div",lt,[at,e("span",null,r(("addCommom"in o?o.addCommom:U(L))(o.minimumReceivedLP))+" "+r(o.fromCoin.symbol)+"-"+r(o.toCoin.symbol),1)])])]),W(f,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:so(()=>[lo(" Add Liquidity ")]),_:1},8,["onClick"])]}),_:1})}const ue=bo(Bn,[["render",ut],["__scopeId","data-v-bb911124"]]),dt=fo({components:{AutoPoolAddModal:ue},setup(){const o=Do(),n=N(!1),q=Co(),P=c(()=>q),T=c(()=>P.value.chainName),k=c(()=>o),g=jo(),f=c(()=>g),v=Bo(),h=c(()=>v),s=N(),t=_o();to(()=>[f.value.positionInfoObj,t.params.id],([p,y])=>{p&&!po(p)&&y&&(s.value=p[y],console.log(s.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const u=c(()=>{var p,y;return console.log((p=s.value)==null?void 0:p.needReverse,"##positionInfo.value?.needReverse"),(y=s.value)==null?void 0:y.needReverse}),a=N(),l=N(),i=N(),d=N(),C=N(!0),w=c(()=>k.value.assets&&a.value&&k.value.assets[a.value.address]?Jo(k.value.assets[a.value.address].balance,a.value.decimals):0),b=c(()=>k.value.assets&&l.value&&k.value.assets[l.value.address]?Jo(k.value.assets[l.value.address].balance,l.value.decimals):0),E=p=>{p==="fromCoin"?(C.value=!0,i.value=w.value>0?a.value.symbol=="SUI"?new I(Number(w.value)).sub(new I(.05)).lt(new I(0))?"0":new I(Number(w.value)).sub(new I(.05)).toString():String(w.value):""):(C.value=!1,d.value=b.value>0?l.value.symbol=="SUI"?new I(Number(b.value)).sub(new I(.05)).lt(new I(0))?"0":new I(Number(b.value)).sub(new I(.05)).toString():String(b.value):"")},R=p=>{p==="fromCoin"?(C.value=!0,i.value=w.value>0?$o(new I(Number(w.value)).div(2).toString(),a.value.decimals).toString():""):(C.value=!1,d.value=b.value>0?$o(new I(Number(b.value)).div(2).toString(),l.value.decimals).toString():"")},S=c(()=>T.value?xo(T.value):{}),X=c(()=>P.value.slippage),$=N("--"),M=N("--"),Z=p=>{const y=new I(s.value.autoPoolPositionInfo.liquidity),A=new I(p.toString());if(y.toNumber()>0&&A.toNumber()>0){const j=A.add(y);console.log("totalLiquidity:",y.toString(),"liqididty:",A.toString(),A.div(y).mul(100).toString());const O=ko(fe(A.div(j).mul(100).toNumber(),2),2);console.log(s.value.decimals,"##positionInfo.value.decimal");const D=1/Math.pow(10,s.value.decimals);console.log(O,D,"###288"),Number(O)<D?$.value=`<${D}`:$.value=O}else A.toNumber()>0&&y.toNumber()<=0?$.value="100":$.value="--"},x=p=>{const y=new I(p.toString());console.log(p.toString(),"##liquidityAmount.toString()");const A=y.mul(new I(X.value).div(100)),j=new I(Math.pow(10,s.value.lpInfo.decimals));console.log(y.minus(A).div(j).toString(),"##liquidity.minus(minimum).div(decimals).toString()"),M.value=$o(y.minus(A).div(j).toString(),s.value.lpInfo.decimals)},Y=N(!1),F=N(!1),G=()=>{if(console.log(s.value,"238##"),!s.value)return;const p=s.value.autoPoolPositionInfo.tick_lower_index,y=s.value.autoPoolPositionInfo.tick_upper_index;console.log(s.value,"###467");const A=yo.sqrtPriceX64ToTickIndex(new eo(s.value.current_sqrt_price));console.log(p,A,y,"###324"),A<p&&(u.value?Y.value=!0:F.value=!0),A>y&&(u.value?F.value=!0:Y.value=!0);let j;if(i.value||d.value){if(C.value){const K=new I(i.value).mul(Math.pow(10,a.value.decimals)).toString();j=new eo(K)}else{const K=new I(d.value).mul(Math.pow(10,l.value.decimals)).toString();j=new eo(K)}const{liquidityAmount:O,tokenMaxA:D,tokenMaxB:uo,tokenMaxAOrigin:no,tokenMaxBOrigin:ro}=S.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:a.value,tokenB:l.value,lowerTick:p,upperTick:y,coinAmount:j,iscoinA:C.value,roundUp:!0,slippage:Number(X.value)/100,curSqrtPrice:new eo(s.value.current_sqrt_price)});console.log(s.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(uo.toString(),D.toString(),s.value,"###323"),C.value?d.value=Number(uo)>0?uo:"":i.value=Number(D)>0?D:"",Z(O),x(O)}};to(()=>s.value,p=>{p&&!po(p)&&(a.value=p==null?void 0:p.token_a,l.value=p==null?void 0:p.token_b,Y.value=!1,F.value=!1,G())},{immediate:!0});const z=c(()=>h.value.RATES),oo=c(()=>{var p,y,A,j,O,D,uo,no,ro,K;if((y=z.value[(p=a.value)==null?void 0:p.address])!=null&&y.price&&((j=z.value[(A=l.value)==null?void 0:A.address])!=null&&j.price)){console.log((D=z.value[(O=a.value)==null?void 0:O.address])==null?void 0:D.price,"RATES.value[fromCoin.value?.address]?.price");const Eo=new I(i.value||0).mul(new I((no=z.value[(uo=a.value)==null?void 0:uo.address])==null?void 0:no.price)),Ho=new I(d.value||0).mul(new I((K=z.value[(ro=l.value)==null?void 0:ro.address])==null?void 0:K.price));return ko(Eo.add(Ho).toString(),2)}else return"--"});to(i,(p,y)=>{p&&G(),p==""&&($.value="--",d.value="",M.value="--")}),to(d,(p,y)=>{p&&G(),p==""&&(i.value="",$.value="--",M.value="--")});const{t:J,locale:go}=Uo(),ao=c(()=>{const p=Number(i.value)>Number(w.value),y=Number(d.value)>Number(b.value);return!i.value&&!d.value?J("button.enterAmount"):p?J("button.insufficientBalance",{name:a.value.symbol}):y?J("button.insufficientBalance",{name:l.value.symbol}):"Add Liquidity"}),Ro=c(()=>{const p=Number(i.value)>Number(w.value),y=Number(d.value)>Number(b.value);return!!(!i.value&&!d.value||p||y||i.value<=0)}),mo=N(!0),{setIsShowSuccess:qo,setIsShowRejected:To,setIsShowWaiting:m,setTransactionDesc:H,setTransactionTxid:io,setPositiomNum:vo}=q,ho=oe("Sui");return{wallet:k,positionInfo:s,isShowAddModal:n,needReverse:u,fromCoin:a,toCoin:l,fromCoinAmount:i,toCoinAmount:d,fromCoinBlance:w,toCoinBlance:b,fixedFromCoin:C,maxBtnSelect:E,halfBtnSelect:R,totalAmountUSD:oo,addCommom:L,shareOfPool:$,minimumReceivedLP:M,addLiquidityBtnText:ao,addLiquidityBtnDisabled:Ro,toAdd:async()=>{var no,ro;n.value=!1,mo.value=!0,io("");const p=`${L(i.value)} ${(no=a.value)==null?void 0:no.symbol}`,y=`${L(d.value)} ${(ro=l.value)==null?void 0:ro.symbol}`;H(`Deposit ${i.value>0?p:""} ${d.value>0&&i.value>0?"and":""} ${d.value>0?y:""}`),m(!0);const A=C.value,j=s.value.autoPoolPositionInfo.tick_lower_index,O=s.value.autoPoolPositionInfo.tick_upper_index;let D;if(C.value){const K=new I(i.value).mul(Math.pow(10,a.value.decimals)).toString();D=new eo(K)}else{const K=new I(d.value).mul(Math.pow(10,l.value.decimals)).toString();D=new eo(K)}const uo=s.value.rewarderInfo.map(K=>K.coinAddress);try{const K={lowerTick:j,upperTick:O,coinAmount:D,fix_amount_a:A,slippage:Number(X.value)/100,curSqrtPrice:new eo(s.value.current_sqrt_price),id:s.value.id,clmm_pool:s.value.autoPoolPositionInfo.pool,lp_token_type:s.value.lp_token_type,coinTypeA:s.value.autoPoolPositionInfo.coin_type_a,coinTypeB:s.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:uo},Eo=await ho.deposit(K);console.log(Eo,"===>payloadAdd11111");const Ho=await k.value.currentWallet.signAndExecuteTransactionBlock(Eo);let Lo=S.value.handleTx(Ho);if(console.log("toAdd###tx###",Lo),Lo&&Lo.hash){io(Lo.hash),m(!1),qo(!0),console.log(s,"===>positionInfo");const Vo={title:"Supplied",desc:`Deposit ${i.value>0?p:""} ${d.value>0&&i.value>0?"and":""} ${d.value>0?y:""}`,hash:Lo.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${i.value>0?p:""} ${d.value>0&&i.value>0?"and":""} ${d.value>0?y:""}`};T.value!=="Aptos"&&(Vo.res=Lo.res),S.value.showTransitionPending(Vo),await S.value.watchTransaction(Vo)&&setTimeout(()=>{g.updatePositionItem(s.value.id),S.value.getAccount(k.value.address)},1e3),vo()}else m(!1),To(!0);i.value="",d.value="",mo.value=!1}catch(K){i.value="",d.value="",console.log("addError###",K),mo.value=!1,m(!1),To(!0)}},showToCoinLock:F,showFromCoinLock:Y}}});const Wo=o=>(So("data-v-6e21368f"),o=o(),wo(),o),rt={class:"auto-pool-add"},ct={class:"auto-pool-add-content"},mt={class:"liquidity-action-tab"},vt=Wo(()=>e("div",{class:"increase tab-active"},"Add",-1)),pt={class:"card-item"},ft={class:"card-item"},_t={class:"add-info"},bt={class:"total-amount"},gt=Wo(()=>e("span",null,"Total Amount",-1)),ht={class:"total-amount"},yt=Wo(()=>e("span",null,"Share of Pool",-1)),$t={class:"total-amount"},It=Wo(()=>e("span",null,"Minimum Received LP",-1)),kt=Wo(()=>e("span",null,"Pool Closed",-1));function Ct(o,n,q,P,T,k){var s,t,u,a,l;const g=Ce,f=Se,v=Xo,h=ue;return _(),B("div",rt,[e("div",ct,[e("div",mt,[vt,e("div",{class:"remove",onClick:n[0]||(n[0]=te(i=>o.$emit("changeCurrentTab"),["stop"]))},"Remove")]),e("div",{class:Yo(o.needReverse?"card-container reverse":"card-container")},[e("div",pt,[W(g,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":n[1]||(n[1]=i=>o.fromCoinAmount=i),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[2]||(n[2]=i=>o.maxBtnSelect("fromCoin")),onOnHalf:n[3]||(n[3]=i=>o.halfBtnSelect("fromCoin")),onOnInput:n[4]||(n[4]=i=>{o.fromCoinAmount=i}),onOnFocus:n[5]||(n[5]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock?(_(),V(f,{key:0})):Io("",!0)]),e("div",ft,[W(g,{modelValue:o.toCoinAmount,"onUpdate:modelValue":n[6]||(n[6]=i=>o.toCoinAmount=i),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[7]||(n[7]=i=>o.maxBtnSelect("toCoin")),onOnHalf:n[8]||(n[8]=i=>o.halfBtnSelect("toCoin")),onOnInput:n[9]||(n[9]=i=>{o.toCoinAmount=i}),onOnFocus:n[10]||(n[10]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock?(_(),V(f,{key:0})):Io("",!0)])],2),e("div",_t,[e("div",bt,[gt,e("span",null,"$"+r(("addCommom"in o?o.addCommom:U(L))(o.totalAmountUSD)),1)]),e("div",ht,[yt,e("span",null,r(o.shareOfPool)+"%",1)]),e("div",$t,[It,e("span",null,r(("addCommom"in o?o.addCommom:U(L))(o.minimumReceivedLP))+" "+r(o.needReverse?(s=o.toCoin)==null?void 0:s.symbol:(t=o.fromCoin)==null?void 0:t.symbol)+"-"+r(o.needReverse?(u=o.fromCoin)==null?void 0:u.symbol:(a=o.toCoin)==null?void 0:a.symbol),1)])])]),(l=o.positionInfo)!=null&&l.is_pause?(_(),V(v,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:so(()=>[kt]),_:1})):o.wallet.connected?(_(),V(v,{key:1,class:"big-btn liquidity-btn",disabled:o.addLiquidityBtnDisabled,onClick:n[11]||(n[11]=i=>o.isShowAddModal=!0)},{default:so(()=>[e("span",null,r(o.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(_(),V(v,{key:2,class:"big-btn",onClick:n[12]||(n[12]=i=>o.wallet.setIsShowWalletModal(!0))},{default:so(()=>[e("span",null,r(o.$t("button.connectWallet")),1)]),_:1})),o.isShowAddModal?(_(),V(h,{key:3,"pool-info":o.positionInfo,"from-coin":o.needReverse?o.positionInfo.token_b:o.positionInfo.token_a,"to-coin":o.needReverse?o.positionInfo.token_a:o.positionInfo.token_b,"from-coin-amount":o.needReverse?o.toCoinAmount:o.fromCoinAmount,"to-coin-amount":o.needReverse?o.fromCoinAmount:o.toCoinAmount,"total-amount":o.totalAmountUSD,"share-of-pool":o.shareOfPool,"minimum-received-l-p":o.minimumReceivedLP,onOnClose:n[13]||(n[13]=i=>o.isShowAddModal=!1),onToAdd:o.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","onToAdd"])):Io("",!0)])}const de=bo(dt,[["render",Ct],["__scopeId","data-v-6e21368f"]]),St=fo({props:{inputValue:{type:String,default:""},balance:{type:String,default:""},lpDecimals:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},inputDisabled:{type:Boolean,default:!1},positionInfo:{default:()=>({})}},setup(o,n){const{t:q,locale:P}=Uo(),T=Co(),k=c(()=>T),g=c(()=>new I(Number(o.balance)).div(2)),f=be(ge,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function v(){this.$emit("onSelect")}const h=b=>{const E=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${o.lpDecimals&&o.lpDecimals}})?).*$`);b.target.value=b.target.value.replace(E,"$1")},s=Do(),t=c(()=>s),u=Bo(),a=c(()=>u),l=c(()=>a.value.tokensWarningObj);to(()=>a.value.RATES,b=>{b&&console.log(b,"price====>")},{immediate:!0});const i=c(()=>a.value.tokensObj),d=c(()=>k.value.theme);return{route:_o(),theme:d,tokensObj:i,pool:a,halfBalance:g,t:q,addCommom:L,store:k,wallet:t,indicator:f,inputChange:h,importIcon:co,selectCoin:v,formatNumber:_e,tokensWarningObj:l,checkNullObj:po,getCoinIcon:b=>(b==null?void 0:b.logoURI)||(b==null?void 0:b.logo_url)||co("/image/coins/sui-unknown.png")}}});const wt=o=>(So("data-v-bf50c5da"),o=o(),wo(),o),At={class:"card"},Pt={class:"top"},Rt={key:1,class:"input-div"},qt={key:0},Tt={class:"left"},Nt={class:"loading-token"},Lt={class:"lp-bg"},Bt={alt:""},Ot={class:"bottom"},Mt=wt(()=>e("div",null,null,-1)),Dt={class:"top"},jt={class:"right"},Ut={class:"balance"};function Ft(o,n,q,P,T,k){var h;const g=he,f=se,v=Oo("image");return _(),B("div",At,[e("div",Pt,[o.inputDisabled?(_(),B("div",Rt,[o.inputValue?(_(),B("span",qt,r(o.inputValue),1)):(_(),V(f,{key:1,indicator:o.indicator},null,8,["indicator"]))])):(_(),V(g,{key:0,value:o.inputValue=="InsufficientLiquidity"?"":o.inputValue,placeholder:"0.0",disabled:o.inputDisabled,onChange:o.inputChange,onInput:n[0]||(n[0]=s=>o.$emit("onInput",s.target.value)),onFocus:n[1]||(n[1]=s=>o.$emit("onFocus"))},null,8,["value","disabled","onChange"])),e("div",Tt,[e("div",Nt,[e("div",Lt,[Q(e("img",Bt,null,512),[[v,o.getCoinIcon((h=o.positionInfo)==null?void 0:h.lpInfo)]])]),e("p",null,r(o.fromCoin.symbol)+" - "+r(o.toCoin.symbol),1)])])]),e("div",Ot,[Mt,e("div",Dt,[e("div",jt,[lo(r(o.$t("common.balance"))+" ",1),e("span",Ut,r(o.wallet.connected?("addCommom"in o?o.addCommom:U(L))(o.balance,o.lpDecimals):"0"),1)])])])])}const Wt=bo(St,[["render",Ft],["__scopeId","data-v-bf50c5da"]]),Et=fo({components:{Modal:ee},props:{title:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"11111111111"},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},isIncrease:{type:Boolean,default:!1},fixedFromCoin:{type:Boolean,default:!0},currentPriceTab:{type:String,default:""},currentPrice:{type:String,default:""},currentPriceReverse:{type:String,default:""},showFromCoinLock:{type:Boolean,default:!1},showToCoinLock:{type:Boolean,default:!1},currentDirect:{type:Boolean,default:!0},positionTotalAmount:{type:Number,default:0},tickLower:{type:Number,default:0},tickUpper:{type:Number,default:0},isCreate:{type:Boolean,default:!1}},setup(o,n){const{t:q}=Uo(),P=c(()=>{var u,a,l;return((u=o==null?void 0:o.poolInfo)==null?void 0:u.needReverse)||((l=(a=o==null?void 0:o.poolInfo)==null?void 0:a.poolInfo)==null?void 0:l.needReverse)}),T=Bo(),k=c(()=>T),g=Co(),f=c(()=>g),v=u=>{var a;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((a=k.value.tokensObj[u==null?void 0:u.address])==null?void 0:a.logo_url)||(f.value.theme==="default"?co("/image/coins/unknown.png"):co("/image/coins/sui-unknown.png"))},h=_o(),s=N(!1),t=()=>{n.emit("toAdd")};return console.log(o,"props451"),{needReverse:P,getCoinIcon:v,addCommom:L,t:q,route:h,checked:s,decimalUi:ko,clickSubmit:t}}});const Po=o=>(So("data-v-a27577b5"),o=o(),wo(),o),Xt=Po(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),zt={class:"modal-content"},Ht={class:"pool-info"},Vt={class:"left"},Yt={alt:""},Gt={alt:""},Jt={class:"pool-name"},Kt={class:"right"},Qt=Po(()=>e("div",{class:"lp-info"},[e("div",{class:"lp-num"},[e("p",null,"1,126,122.123456"),e("span",null,"USDT-USDC LP")]),e("div",{class:"lp-bg"})],-1)),Zt={class:"est-receive"},xt=Po(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),os={class:"token-a"},es=Po(()=>e("div",null,"0.941824",-1)),ns={alt:""},ts=Po(()=>e("span",null,"USDT",-1)),ss={class:"token-a"},is=Po(()=>e("div",null,"0.941824",-1)),ls={alt:""},as=Po(()=>e("span",null,"USDC",-1));function us(o,n,q,P,T,k){const g=Go,f=Xo,v=ne("Modal"),h=Oo("image");return _(),V(v,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:n[0]||(n[0]=s=>o.$emit("onClose"))},{closeIcon:so(()=>[Xt]),default:so(()=>{var s,t,u,a,l,i,d,C,w,b,E,R,S,X,$,M,Z,x,Y,F,G,z,oo,J;return[e("div",zt,[e("div",Ht,[e("div",Vt,[e("div",null,[Q(e("img",Yt,null,512),[[h,o.needReverse?(a=(u=o.poolInfo)==null?void 0:u.token_b)==null?void 0:a.logo_url:(t=(s=o.poolInfo)==null?void 0:s.token_a)==null?void 0:t.logo_url]]),W(g,{address:o.needReverse?(C=(d=o.poolInfo)==null?void 0:d.token_b)==null?void 0:C.address:(i=(l=o.poolInfo)==null?void 0:l.token_a)==null?void 0:i.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[Q(e("img",Gt,null,512),[[h,o.needReverse?(R=(E=o.poolInfo)==null?void 0:E.token_a)==null?void 0:R.logo_url:(b=(w=o.poolInfo)==null?void 0:w.token_b)==null?void 0:b.logo_url]]),W(g,{address:o.needReverse?(M=($=o.poolInfo)==null?void 0:$.token_a)==null?void 0:M.address:(X=(S=o.poolInfo)==null?void 0:S.token_b)==null?void 0:X.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",Jt,[e("span",null,r(o.needReverse?(F=(Y=o.poolInfo)==null?void 0:Y.token_b)==null?void 0:F.symbol:(x=(Z=o.poolInfo)==null?void 0:Z.token_a)==null?void 0:x.symbol),1),lo(" - "),e("span",null,r(o.needReverse?(J=(oo=o.poolInfo)==null?void 0:oo.token_a)==null?void 0:J.symbol:(z=(G=o.poolInfo)==null?void 0:G.token_b)==null?void 0:z.symbol),1)])]),e("div",Kt,[lo(" Fee tier "),e("span",null,r(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),Qt,e("div",Zt,[xt,e("div",os,[es,e("div",null,[Q(e("img",ns,null,512),[[h,"1"]]),ts])]),e("div",ss,[is,e("div",null,[Q(e("img",ls,null,512),[[h,"1"]]),as])])])]),W(f,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:so(()=>[lo(r(o.isIncrease?"Increase Liquidity":o.title==o.$t("button.addLiquidity")?"Add Liquidity":"Create and Add Liquidity"),1)]),_:1},8,["onClick"])]}),_:1})}const re=bo(Et,[["render",us],["__scopeId","data-v-a27577b5"]]),ds=fo({components:{AutoPoolRemoveModal:re},setup(){const o=Do(),n=c(()=>o),q=Co(),P=c(()=>q),T=c(()=>P.value.slippage),k=c(()=>P.value.chainName),g=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],f=N(25),v=_o(),h=jo(),s=c(()=>h),t=c(()=>(console.log(s.value.positionInfoObj[v.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),s.value.positionInfoObj[v.params.id])),u=c(()=>{var m;return(m=t.value)==null?void 0:m.needReverse}),a=N(),l=N(),i=N(!1),d=N(),C=c(()=>{var m;return(m=t.value)==null?void 0:m.myLiquidity}),w=N(!0),b=c(()=>k.value?xo(k.value):{}),E=oe("Sui"),R=N("--"),S=N("--"),X=()=>{if(w.value||!t.value)return;if(!d.value){R.value="--",S.value="--",f.value=0;return}if(Number(d.value)>Number(C.value))return;if(Number(d.value)*Math.pow(10,t.value.decimals)==Number(C.value)){f.value=100,M({value:1}),w.value=!0;return}console.log(t.value,"##lpBalance.value");const m=new I(d.value).mul(Math.pow(10,t.value.lpInfo.decimals)).toString(),H=new I(d.value).div(new I(C.value)).mul(100),io=t.value.tick_lower_index,vo=t.value.tick_upper_index,ho=t.value.token_a.decimals,No=t.value.token_b.decimals,p=yo.tickIndexToSqrtPriceX64(io),y=yo.tickIndexToSqrtPriceX64(vo);console.log(t.value.object.current_sqrt_price,"##positionInfo.value.object.current_sqrt_price"),console.log(m.toString(),t.value.total_supply,"amount.toString");const A=Qo.get_share_liquidity_by_amount({liquidity:t.value.liquidity,total_supply:t.value.total_supply},m.toString());console.log(A,"###liquidity");const j=Ko.getCoinAmountFromLiquidity(new eo(A),new eo(t.value.object.current_sqrt_price),p,y,!1),O=new I(j.coinA.toString()).div(Math.pow(10,ho)).toString(),D=new I(j.coinB.toString()).div(Math.pow(10,No)).toString();R.value=Number(O)>0?O:"--",S.value=Number(D)>0?D:"--",console.log(H.toString(),"##ratio"),f.value=H.toNumber(),$.value=$o(m,0)},$=N(),M=m=>{if(!w.value)return;w.value=!0;const H=t.value.token_a.decimals,io=t.value.token_b.decimals,vo=t.value.tick_lower_index,ho=t.value.tick_upper_index,No=yo.tickIndexToSqrtPriceX64(vo),p=yo.tickIndexToSqrtPriceX64(ho);let y="",A;console.log(t.value,"positionInfo.value.myLiquidity###"),m.value!==1?A=new I(t.value.myLiquidity).mul(Math.pow(10,t.value.lpInfo.decimals)).mul(m.value).toString():A=new I(t.value.myLiquidity).mul(Math.pow(10,t.value.lpInfo.decimals)).toString(),d.value=new I(A).div(Math.pow(10,t.value.lpInfo.decimals)),$.value=A,y=Qo.get_share_liquidity_by_amount({liquidity:t.value.liquidity,total_supply:t.value.total_supply},A),console.log(t.value.myLiquidity,"##positionInfo.value.myLiquidity"),console.log($.value,"###liquidityVal.value");const j=Ko.getCoinAmountFromLiquidity(new eo(y),new eo(t.value.object.current_sqrt_price),No,p,!1),O=new I(j.coinA.toString()).div(Math.pow(10,H)).toString(),D=new I(j.coinB.toString()).div(Math.pow(10,io)).toString();console.log(O,D,"amountA121212"),R.value=Number(O)>0?O:"--",S.value=Number(D)>0?D:"--"};to(f,ye((m,H)=>{m!==H&&(Number(m)>100?f.value=100:m&&t.value?(console.log("687===>"),f.value=m,M({value:f.value/100})):(R.value="--",S.value="--"))},300)),to(()=>d.value,m=>{X()},{immediate:!0});const Z=ie(),{setIsShowSuccess:x,setIsShowRejected:Y,setIsShowWaiting:F,setTransactionDesc:G,setTransactionTxid:z,setPositiomNum:oo,setTransactionDescText:J}=q,go=N(!1),{t:ao}=Uo(),Ro=async()=>{var A,j;go.value=!0,z("");const m=Number(R.value)>0?`${L(R.value,a.value.decimals)} ${a.value.symbol}`:"",H=Number(S.value)>0?`${L(S.value,l.value.decimals)} ${l.value.symbol}`:"";console.log(m,H,"###transactionDescTo"),G(ao("tips.removeLiquidiyText",{from:u.value?H:m,and:Number(R.value)>0&&Number(S.value)>0?"and":"",to:u.value?m:H})),F(!0);const io=ao("modal.removeLiquidityText2");J(io);const vo=t.value.autoPoolPositionInfo.tick_lower_index,ho=t.value.autoPoolPositionInfo.tick_upper_index,No=yo.tickIndexToSqrtPriceX64(vo),p=yo.tickIndexToSqrtPriceX64(ho),y=t.value.rewarderInfo.map(O=>O.coinAddress);console.log(new eo($.value),"##liquidityVal.value");try{const O={lowerSqrtPrice:No,upperSqrtPrice:p,lpTokenAmount:new eo($.value),curSqrtPrice:new eo(t.value.object.current_sqrt_price),slippage:Number(T.value)/100,id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.pool,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coin_type_a,coinTypeB:t.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:y},D=await E.remove(O),uo=await n.value.currentWallet.signAndExecuteTransactionBlock(D);let no=b.value.handleTx(uo);if(console.log("0331###remove###tx####",no),no&&no.hash){z(no.hash),F(!1),x(!0);const ro={title:ao("common.removeLiquidity"),desc:"",hash:no.hash,descTransactions:`Remove ${m} ${Number(R.value)>0&&Number(S.value)>0?"and":""} ${H} from the pool`,sender:n.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${R.value} ${(A=a.value)==null?void 0:A.symbol} and ${S.value} ${(j=l.value)==null?void 0:j.symbol}`};ro.res=no.res,b.value.showTransitionPending(ro),await b.value.watchTransaction(ro)&&(R.value="",S.value="",d.value="",f.value=0,setTimeout(()=>{h.updatePositionItem(t.value.id),b.value.getAccount(n.value.address)},1e3),Number(f.value)==100&&v.name=="auto-pool-detail"&&Z.push("/pool/auto"))}else F(!1),Y(!0);go.value=!1}catch(O){console.log("Remove error",O),go.value=!1,F(!1),Y(!0)}};to(()=>t.value,(m,H)=>{m&&!po(m)&&(a.value=m==null?void 0:m.token_a,l.value=m==null?void 0:m.token_b,console.log("触发###"),(!H||H&&H.address!==m.address)&&M({value:f.value/100}))},{immediate:!0});const mo=c(()=>{const m=Number(d.value)>Number(C.value);return!d.value||d.value<=0?ao("button.enterAmount"):m?"Invalid Amount":ao("button.remove")}),qo=c(()=>{const m=Number(d.value)>Number(C.value);return!!(!d.value||d.value<=0||m)});return{removeLiquidityBtnText:mo,removeLiquidityBtnDisabled:qo,wallet:n,ratioArr:g,positionInfo:t,isShowRemoveModal:i,needReverse:u,fromCoin:a,toCoin:l,lpAmount:d,lpBalance:C,sliderVal:f,sFixD:$o,isSlider:w,fromCoinAmount:R,toCoinAmount:S,setPercent:M,toRemove:Ro,addCommom:L,getCoinIcon:m=>(m==null?void 0:m.logoURI)||(m==null?void 0:m.logo_url)||co("/image/coins/sui-unknown.png")}}});const zo=o=>(So("data-v-aa82969a"),o=o(),wo(),o),rs={class:"auto-pool-add"},cs={class:"auto-pool-add-content"},ms={class:"liquidity-action-tab"},vs=zo(()=>e("div",{class:"remove tab-active"},"Remove",-1)),ps={class:"card-item"},fs={class:"remove-ratio"},_s=zo(()=>e("div",{class:"remove-ratio-title"},"Amount",-1)),bs={class:"remove-ratio-select"},gs={key:0,class:"ratio"},hs={key:1,class:"ratio"},ys={class:"ratio-list"},$s=["onClick"],Is={class:"est-receive"},ks=zo(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),Cs={class:"token-a"},Ss={alt:""},ws={class:"token-a"},As={alt:""},Ps=zo(()=>e("span",null,"Pool Closed",-1));function Rs(o,n,q,P,T,k){var t,u,a,l,i,d,C,w,b,E,R,S,X;const g=Wt,f=ke,v=Xo,h=re,s=Oo("image");return _(),B("div",rs,[e("div",cs,[e("div",ms,[e("div",{class:"increase",onClick:n[0]||(n[0]=te($=>o.$emit("changeCurrentTab"),["stop"]))},"Add"),vs]),e("div",{class:Yo(o.needReverse?"card-container reverse":"card-container")},[e("div",ps,[W(g,{modelValue:o.lpAmount,"onUpdate:modelValue":n[1]||(n[1]=$=>o.lpAmount=$),"input-value":o.lpAmount,balance:o.lpBalance,"from-coin":o.needReverse?o.toCoin:o.fromCoin,"to-coin":o.needReverse?o.fromCoin:o.toCoin,"position-info":o.positionInfo,onOnInput:n[2]||(n[2]=$=>{o.isSlider=!1,o.lpAmount=$})},null,8,["modelValue","input-value","balance","from-coin","to-coin","position-info"])])],2),e("div",fs,[_s,e("div",bs,[Number(o.lpBalance)>=Number(o.lpAmount)?(_(),B("div",gs,r(o.sliderVal>0&&Number(("sFixD"in o?o.sFixD:U($o))(o.sliderVal,2))<.01?"<0.01":("sFixD"in o?o.sFixD:U($o))(o.sliderVal,2))+"% ",1)):(_(),B("div",hs,"--")),e("div",ys,[(_(!0),B($e,null,Ie(o.ratioArr,($,M)=>(_(),B("div",{key:M,class:Yo(["ratio-item",o.sliderVal==$.value?"ratio-item-active":""]),onClick:()=>{o.isSlider=!0,o.sliderVal=$.value}},r($.name),11,$s))),128))])]),W(f,{value:o.sliderVal,"onUpdate:value":n[3]||(n[3]=$=>o.sliderVal=$)},null,8,["value"])]),e("div",Is,[ks,e("div",Cs,[e("div",null,r(("addCommom"in o?o.addCommom:U(L))(o.fromCoinAmount)),1),e("div",null,[Q(e("img",Ss,null,512),[[s,o.needReverse?o.getCoinIcon((t=o.positionInfo)==null?void 0:t.token_b):o.getCoinIcon((u=o.positionInfo)==null?void 0:u.token_a)]]),e("span",null,r(o.needReverse?(l=(a=o.positionInfo)==null?void 0:a.token_b)==null?void 0:l.symbol:(d=(i=o.positionInfo)==null?void 0:i.token_a)==null?void 0:d.symbol),1)])]),e("div",ws,[e("div",null,r(("addCommom"in o?o.addCommom:U(L))(o.toCoinAmount)),1),e("div",null,[Q(e("img",As,null,512),[[s,o.needReverse?o.getCoinIcon((C=o.positionInfo)==null?void 0:C.token_a):o.getCoinIcon((w=o.positionInfo)==null?void 0:w.token_b)]]),e("span",null,r(o.needReverse?(E=(b=o.positionInfo)==null?void 0:b.token_a)==null?void 0:E.symbol:(S=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:S.symbol),1)])])])]),(X=o.positionInfo)!=null&&X.is_pause?(_(),V(v,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:so(()=>[Ps]),_:1})):o.wallet.connected?(_(),V(v,{key:1,class:"big-btn liquidity-btn",disabled:o.removeLiquidityBtnDisabled,onClick:o.toRemove},{default:so(()=>[e("span",null,r(o.removeLiquidityBtnText),1)]),_:1},8,["disabled","onClick"])):(_(),V(v,{key:2,class:"big-btn",onClick:n[4]||(n[4]=$=>o.wallet.setIsShowWalletModal(!0))},{default:so(()=>[e("span",null,r(o.$t("button.connectWallet")),1)]),_:1})),o.isShowRemoveModal?(_(),V(h,{key:3,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,onOnClose:n[5]||(n[5]=$=>o.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):Io("",!0)])}const ce=bo(ds,[["render",Rs],["__scopeId","data-v-aa82969a"]]),qs=fo({components:{AutoPoolAdd:de,AutoPositionInfo:le,AutoPositionLiquidity:ae,AutoPoolRemove:ce},setup(){const o=N("add"),n=Do(),q=c(()=>n),P=jo(),T=c(()=>P),k=Bo(),g=c(()=>k);to(()=>g.value.poolConfigList,a=>{a&&a.length>0&&P.getAutoPoolList()},{immediate:!0}),to(()=>[q.value.address,T.value.autoPoolList,g.value.poolConfigList],([a,l,i])=>{a&&l&&l.length>0&&i&&i.length>0&&P.getMyAutoPoolPosition()},{immediate:!0});const f=_o(),v=c(()=>(console.log(T.value.positionInfoObj[f.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),T.value.positionInfoObj[f.params.id]||{}));to(()=>f.query.action,a=>{a&&(o.value=a)},{immediate:!0});const h=ie();to(()=>q.value.address,a=>{a||h.push("/pool/auto")},{immediate:!0});const s=Co(),t=c(()=>s);return{currentTab:o,positionInfo:v,clickRefresh:()=>{P.getAutoPoolAPY(),P.getAutoPoolList(),k.setPoolConfigList(t.value.chainName,t.value.filterCoinsObj)},checkNullObj:po}}});const Ts={class:"auto-increase-liquidity"},Ns={class:"auto-increase-liquidity-content pc-content"},Ls={class:"left"},Bs={class:"right"},Os={class:"auto-increase-liquidity-content h5-content"},Ms={class:"left"},Ds={class:"right"};function js(o,n,q,P,T,k){const g=me,f=le,v=ae,h=de,s=ce,t=se;return _(),B("div",Ts,[W(g,{onClickRefresh:o.clickRefresh},null,8,["onClickRefresh"]),e("div",Ns,[e("div",Ls,[W(f),W(v)]),e("div",Bs,[o.currentTab=="add"?(_(),V(h,{key:0,onChangeCurrentTab:n[0]||(n[0]=u=>o.currentTab="remove")})):(_(),V(s,{key:1,onChangeCurrentTab:n[1]||(n[1]=u=>o.currentTab="add")}))]),("checkNullObj"in o?o.checkNullObj:U(po))(o.positionInfo)?(_(),V(t,{key:0})):Io("",!0)]),e("div",Os,[e("div",Ms,[W(f),o.currentTab=="add"?(_(),V(h,{key:0,onChangeCurrentTab:n[2]||(n[2]=u=>o.currentTab="remove")})):(_(),V(s,{key:1,onChangeCurrentTab:n[3]||(n[3]=u=>o.currentTab="add")}))]),e("div",Ds,[W(v)]),("checkNullObj"in o?o.checkNullObj:U(po))(o.positionInfo)?(_(),V(t,{key:0})):Io("",!0)])])}const ri=bo(qs,[["render",js],["__scopeId","data-v-410a8251"]]);export{ri as default};
