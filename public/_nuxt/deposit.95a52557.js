import{j as Gt,n as ft,d as pe,e as wt,u as Lt,a as Ne,c as qe,s as gt,T as Je,E as ct,b as De,l as _t,p as Pt}from"./pool.83e18696.js";import{a as it,r as F,C as $,z as At,D as Fe,e as at,o as O,f as ee,H as Nt,T as Kt,h as s,K as pt,t as ce,u as ge,x as ie,c as Qe,p as qt,k as Mt,Q as $t,l as Bt,E as yt,A as Rt,G as Qt,F as bt,s as Tt,i as He,v as dt,w as kt,j as Ft,U as Jt,b as Yt,B as Vt}from"./entry.1eb88b38.js";/* empty css              */import{s as lt,m as eo,l as to,b as oo,a as no}from"./transform.c672907f.js";import{D as a}from"./decimal.0bdeb344.js";import{u as Ct,a as io}from"./sha256.b1b41bb0.js";import{d as Ot,_ as xt,c as Ut,a as jt,b as ao}from"./new-liquidity-title.e4216774.js";import{i as ht}from"./import-icon.de3e6c66.js";/* empty css              */import"./decimal.6f03adc8.js";import{positionError as Ve,fromCoin as h,toCoin as b,tickList as Ye,minPrice as M,maxPrice as T,currentPrice as et,currentPriceReverse as st,direction as Me,currentPriceTab as z,defaultMinPrice as mt,defaultMaxPrice as vt,toggle as zt,isInputTotalAmount as We,priceConfigObj as Ke,fromCoinAmount as y,toCoinAmount as C,fixedFromCoin as Pe,resetTickList as St,resetData as ro}from"./data.177f3611.js";import{_ as lo}from"./coin-lock.9cdfe24d.js";import{_ as so}from"./coin-select.272a42dc.js";import{_ as uo}from"./viewDetail.6ebd7322.js";import{a as co}from"./new-add-or-create.8f94ffae.js";import{u as mo}from"./notifi.1178b4d3.js";import{_ as vo,a as fo}from"./icon-Add-Liquidity_2x.0acb06cb.js";import"./img-lock_2x.a28135f4.js";import"./lock.549465a8.js";/* empty css              *//* empty css              */import"./token-warning.a73eb449.js";import"./swap-setting.294aceaf.js";/* empty css              */import"./icon-error_2x.e8a20020.js";import"./img-lock_2x.fb8fd528.js";import"./img-no-Positions_2x.825a966c.js";import"./status-block.9992d7a5.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./useWhale.a2c37983.js";import"./index.ee270c57.js";function It(e,m,ye){const de=new a(10).pow(m-ye);return new a(1.0001).pow(e).mul(de)}const go=it({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""},zoom:{type:Number,default:1}},setup(e,m){const ye=F(""),de=F(""),B=$(()=>{var n,r,d,D,R,J;return console.log(e.poolInfo,"===>props.poolInfo"),(n=e.poolInfo)!=null&&n.current_sqrt_price&&((r=e.poolInfo)!=null&&r.coinA.decimals)&&((d=e.poolInfo)!=null&&d.coinB.decimals)?i.sqrtPriceX64ToPrice((D=e.poolInfo)==null?void 0:D.current_sqrt_price,(R=e.poolInfo)==null?void 0:R.coinA.decimals,(J=e.poolInfo)==null?void 0:J.coinB.decimals).toString():"0"}),Se=$(()=>{let n=0;return e.direction?n=(Number(e.minPrice)/Number(B.value)-1)*100:n=(Number(e.minPrice)/Number(1/Number(B.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),H=$(()=>{let n=0;return e.direction?n=(Number(e.maxPrice)/Number(B.value)-1)*100:n=(Number(e.maxPrice)/Number(1/Number(B.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),X=Ct(),I=$(()=>X),te=$(()=>I.value.chainName?wt(I.value.chainName):{}),{TickMath:i,getNearestTickByTick:L}=te.value,oe=(n=[])=>{let r=6;const d=Math.abs(Number(n[0])-Number(n[n.length-1]));return d>=6?r=0:d>=1?r=1:d>=.1?r=2:d>=.01?r=3:d>=.001?r=4:d>=1e-4?r=5:d>=1e-5?r=6:d>=1e-6?r=7:d>=1e-7&&(r=8),r},Ie=(n,r=1)=>{if(n&&n.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const d=Number(e.poolInfo.current_tick_index);console.log("0117###dataProcessing###currentTick###",d),console.log("0117###dataProcessing###props.poolInfo###",e.poolInfo),console.log("0117###dataProcessing###minPrice###",e.minPrice),console.log("0117###dataProcessing###maxPrice###",e.maxPrice),console.log("0117###dataProcessing###poolInfo###",e.poolInfo);let D=d+100*r,R=d-100*r,J,ue;if(e.maxPrice==="∞")ue=te.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?ue=i.priceToTickIndex(new a(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):ue=i.priceToTickIndex(new a(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{ue=443636}if(e.minPrice==="0")J=te.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?J=i.priceToTickIndex(new a(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):J=i.priceToTickIndex(new a(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{J=-443636}let Ce=0;if(e.currentPriceTab!=="full range"){if(d>=J&&d<=ue){const _=d-J,ne=ue-d;Ce=Math.max(Math.abs(_),Math.abs(ne))}else d<J?Ce=Math.abs(ue-d):Ce=Math.abs(d-J);D=d+Ce+100*r,R=d-Ce-100*r}else{const _=(Math.abs(d)>5e3,2e4);D=d+_*r,R=d-_*r}R<-443636&&(R=-443636),D>443636&&(D=443636);const g=new a(n.liquidity).div(Math.pow(10,8)).toString(),P=e.tickList;console.log("0117####drawChart####tick_info_array####",P);const q=[],be=[];let k={};for(let _=0;_<P.length;_++){if(k=P[_],k.index<=d&&k.index>=R){if(q.length<1&&_!==0){const ne=P[_-1];q.unshift({...ne,index:R,source:"left"})}q.unshift(k)}else if(k.index>d&&k.index<=D&&(be.push(k),q.length<1&&_!==0)){const ne=P[_-1];q.push({...ne,index:R,source:"left"})}if(k.index>D){const ne=P[_];if(be.push({...ne,index:D,source:"right"}),q.length<1&&_!==0){const Ge=P[_-1];q.push({...Ge,index:R,source:"left"})}break}}let A="0";for(let _=q.length-1;_>=0;_--)A=new a(A).plus(new a(q[_].liquidityNet.toString()).div(Math.pow(10,8))).toString(),q[_].liquityAmount=A;let W=g;for(let _=0;_<be.length;_++)W=new a(W).plus(new a(be[_].liquidityNet.toString()).div(Math.pow(10,8))).toString(),be[_].liquityAmount=W;let Z=[];const N=P&&P.length>0?{index:d,liquityAmount:Number(g)}:{index:d,liquityAmount:0};(q.length>0||be.length>0)&&(Z=[...q.reverse(),N,...be],e.direction||(Z=Z.reverse()));const je=[];P.forEach(_=>{je.push({..._,liquidityGross:_.liquidityGross.toString(),liquidityNet:_.liquidityNet.toString()})}),console.log("0117####drawChart####testTickInfoArray####",je),console.log("0117####drawChart####currentLiquity####",g),console.log(Z,"###chartData"),E(Z,R,D,J,ue,d)}};let Te=F(!1);const w=F(!1);At(()=>{const n=document.body.clientWidth;w.value=!0,n<750?Te.value=!1:Te.value=!0,window.onresize=()=>{document.body.clientWidth<750?Te.value=!1:Te.value=!0,console.log("这里执行了吗"),Ie(e.poolInfo,e.zoom)}});const E=(n,r,d,D,R,J)=>{console.log("0117####drawChart####chartData####",n),console.log("0117####drawChart####tickMin####",r),console.log("0117####drawChart####tickMax####",d),console.log("0117####drawChart####minPriceTick####",D),console.log("0117####drawChart####maxPriceTick####",R),console.log("0117####drawChart####currentTick####",J),console.log("0117####drawChart####props.direction####",e.direction),console.log("0518###newd3###props.before7dContractPriceLowest###",e.before7dContractPriceLowest),console.log("0518###newd3###props.before7dContractPriceHighest###",e.before7dContractPriceHighest);let ue,Ce;e.direction?(ue=e.before7dContractPriceLowest?i.priceToTickIndex(new a(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",Ce=e.before7dContractPriceHighest?i.priceToTickIndex(new a(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(ue=e.before7dContractPriceLowest?i.priceToTickIndex(new a(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",Ce=e.before7dContractPriceHighest?i.priceToTickIndex(new a(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const g={top:30,right:35,bottom:20,left:80};let P,q;Te.value?(P=460-g.left-g.right,q=205-g.top-g.bottom):(P=340-g.left-g.right,q=205-g.top-g.bottom);const be=d-r,k=parseInt(String(be/4));let A=[r+k/4,r+k,r+2*k,d-k,d-k/4];const W=r,Z=d,N=P/(Z-W);e.currentPriceTab==="full range"&&(A=[r,r+2*k,d]),console.log("0117####drawChart####xArr####",A),console.log("0117####drawChart####utickMin####",W),console.log("0117####drawChart####utickMax####",Z),console.log("0117####drawChart####unit####",N);const je=A.map(l=>e.direction?It(l,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new a(1).div(It(l,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),_=oe(je);lt("#chart").selectAll("*").remove();const ne=lt("#chart").attr("width",P+g.left+g.right).attr("height",q+g.top+g.bottom).append("g").attr("transform",`translate(${g.left},${g.right})`),Ge=eo(n,function(l){return Number(Math.abs(l.liquityAmount))})||0,$e=to().range([0,q]).domain([Ge,0]);oo().rangeRound([0,P]).padding(.1);const tt=ne.append("g").attr("id","barsBox").selectAll("rect").data(n).enter().append("rect");I.value.theme=="default"?tt.attr("x",function(l,u){return u===0?0:e.direction?Math.abs(l.index-W)*N:Math.abs(Z-l.index)*N}).attr("y",function(l,u){return e.direction?u===n.length-1?0:$e(l.liquityAmount):u===n.length-1?0:$e(n[u+1].liquityAmount)}).attr("width",function(l,u){return u===0&&n.length===1&&l.liquityAmount>0?P:(e.direction,u!==n.length-1?Math.abs(n[u+1].index-l.index)*N:0)}).attr("height",function(l,u){return u===0&&n.length===1&&l.liquityAmount>0?q:e.direction?u===n.length-1?0:q-$e(l.liquityAmount):u===n.length-1?0:q-$e(n[u+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):tt.attr("x",function(l,u){return u===0?0:e.direction?Math.abs(l.index-W)*N:Math.abs(Z-l.index)*N}).attr("y",function(l,u){return e.direction?u===n.length-1?0:$e(Math.abs(l.liquityAmount)):u===n.length-1?0:$e(Math.abs(n[u+1].liquityAmount))}).attr("width",function(l,u){return u===0&&n.length===1&&l.liquityAmount>0?P:(e.direction,u!==n.length-1?Math.abs(n[u+1].index-l.index)*N:0)}).attr("height",function(l,u){if(u===0&&n.length===1&&l.liquityAmount>0)return q;if(e.direction)return u===n.length-1?0:Number(l.liquityAmount)?q-$e(Math.abs(l.liquityAmount)):0;{if(u===n.length-1)return 0;const xe=q-$e(Math.abs(n[u+1].liquityAmount));return Number(n[u+1].liquityAmount)?xe:0}}).attr("fill",function(l,u){return"#417494"}).attr("class","bars").attr("stroke-width",1).attr("stroke",function(l,u){return"#417494"});const t=ne.append("g");t.append("line").attr("x1",0).attr("y1",155).attr("x2",P).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const v=t.append("g");let p=0;if(e.direction){for(let l=0;l<A.length;l++){const u=pe(je[l],_)||"0";console.log("0423####price####",u),je.push(u);const xe=Math.abs(A[l]-W)*N;let me=0;for(let ve=0;ve<u.length;ve++)u[ve]==="1"?me+=4.02:u[ve]==="."?me+=2.64:u[ve]==="7"?me+=5.48:me+=6;console.log(xe,"x=>>>"),v.append("text").text(u).attr("x",xe-me/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}p=Math.abs(J-W)*N}else{for(let l=A.length-1;l>=0;l--){const u=pe(je[l],_)||0;je.push(u);const xe=Math.abs(A[l]-Z)*N;let me=0;for(let ve=0;ve<u.length;ve++)u[ve]==="1"?me+=4.02:u[ve]==="."?me+=2.64:u[ve]==="7"?me+=5.48:me+=6;v.append("text").text(u).attr("x",xe-me/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}p=Math.abs(J-Z)*N}console.log(J,Z,N,"######currentPricePositon"),(I.value.theme=="default"?ne.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):ne.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+p+", 0)");let x,U,ae,ke;e.direction?(x=D<W?-100:parseInt(String(Math.abs(D-W)*N)),U=R<W?-100:parseInt(String(Math.abs(R-W)*N)),ae=ue<W?-100:Math.abs(ue-W)*N,ke=Ce<W?-100:Math.abs(Ce-W)*N):(U=D<W?-100:Math.abs(Z-D)*N,x=R<W?-100:Math.abs(Z-R)*N,ke=ue>Z?-100:Math.abs(Z-ue)*N,ae=Ce>Z?-100:Math.abs(Z-Ce)*N),e.minPrice==="0"&&(x=0),e.maxPrice==="∞"&&(U=P),console.log(x,"==>minPriceTickX"),Te.value,ye.value=P-x+87+"px",de.value=U+98+"px",ue&&ae<P&&ne.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+ae+", 0)"),Ce&&ke<P&&ne.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+ke+", 0)");const Y=ne.append("g").attr("id","left-handle"),_e=ne.append("g").attr("id","right-handle");I.value.theme=="default"?(Y.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Y.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),Y.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),Y.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),_e.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),_e.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),_e.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),_e.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(Y.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Y.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),Y.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),Y.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),_e.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),_e.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),_e.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),_e.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),console.log("0525###d3###select###minPriceTickX###",x),console.log("0525###d3###select###maxPriceTickX###",U),Y.attr("transform","translate("+x+", 0)"),_e.attr("transform","translate("+U+", 0)");const Oe=no().extent([[0,0],[P,q]]).handleSize(30).on("end",ze);ne.append("g").attr("class","brush").call(Oe).call(Oe.move,[x,U]);function ze(l){if(!l.sourceEvent||!l.selection)return;Y.attr("transform","translate("+l.selection[0]+", 0)"),_e.attr("transform","translate("+l.selection[1]+", 0)"),Te.value,ye.value=P-l.selection[0]+87+"px",de.value=l.selection[1]+74+"px";let u,xe;console.log("0525###d3###select###e.selection[0]###",l.selection[0]),console.log("0525###d3###select###e.selection[0]###",l.selection[1]),console.log("0525###d3###select###props.direction###",e.direction),console.log("0525###d3###select###width###",P),console.log("0525###d3###select###unit###",N),console.log("0525###d3###select###utickMin###",W),console.log("0525###d3###select###utickMax###",Z),console.log("0525###d3###select###props.poolInfo###",e.poolInfo);let me=0,ve=0;e.direction?(me=L(parseInt(String(l.selection[0]/N+W)),Number(e.poolInfo.tickSpacing)),u=i.tickIndexToPrice(me,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),ve=L(parseInt(String(l.selection[1]/N+W)),Number(e.poolInfo.tickSpacing)),xe=i.tickIndexToPrice(ve,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),console.log("1114###d3###select###minTick###",me),console.log("1114###d3###select###maxTick###",ve),console.log("1114###d3###select###minPrice###",u),console.log("1114###d3###select###maxPrice###",xe)):(ve=L(Z-l.selection[0]/N,Number(e.poolInfo.tickSpacing)),u=1/i.tickIndexToPrice(ve,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),me=L(Z-l.selection[1]/N,Number(e.poolInfo.tickSpacing)),xe=1/i.tickIndexToPrice(me,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),m.emit("onChangeMinPrice",String(pe(String(u),6))),m.emit("onChangeMaxPrice",String(pe(String(xe),6)))}I.value.theme=="default"?lt(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):lt(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632"),console.log("画完了##")};return F(""),Fe(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab,e.zoom,e.tickList],([n,r,d,D,R,J])=>{console.log(n,r,d,d>r,R,"poolInfo && minPrice && maxPrice && (maxPrice > minPrice)"),n&&r&&d&&(n!=null&&n.liquidity)&&(D!=="Custom"||console.log("绘制"),Ie(n,R))},{immediate:!0}),console.log(e,"props===>"),{store:I,loading:w,rangeSizeLower:Se,rangeSizeUpper:H,rangeSizeLowerPosition:ye,rangeSizeUpperPosition:de,decimalFormat:Gt,numberformat:ft}}});const po=e=>(qt("data-v-60bd7ae2"),e=e(),Mt(),e),bo={class:"chart-box"},ko={class:"chart"},ho=po(()=>s("svg",{id:"chart"},null,-1));function wo(e,m,ye,de,B,Se){const H=$t;return O(),ee("div",bo,[Nt(s("div",ko,[e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="∞"?(O(),ee("div",{key:0,class:"range-size range-size-lower",style:pt({right:e.rangeSizeLowerPosition})},ce(("numberformat"in e?e.numberformat:ge(ft))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):ie("",!0),e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="∞"?(O(),ee("div",{key:1,class:"range-size range-size-upper",style:pt({left:e.rangeSizeUpperPosition})},ce(("numberformat"in e?e.numberformat:ge(ft))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):ie("",!0),ho],512),[[Kt,!e.chartLoading]]),e.chartLoading?(O(),Qe(H,{key:0})):ie("",!0)])}const Ht=at(go,[["render",wo],["__scopeId","data-v-60bd7ae2"]]),yo=it({props:{lever:{type:String,default:""}},setup(){return{}}});const Co=e=>(qt("data-v-619778e2"),e=e(),Mt(),e),_o={class:"lever"},Po=Co(()=>s("div",{class:"lever-title"},"Leverage",-1)),To={class:"lever-text"};function So(e,m,ye,de,B,Se){return O(),ee("div",_o,[Po,s("div",To,ce(e.lever),1)])}const Io=at(yo,[["render",So],["__scopeId","data-v-619778e2"]]),Lo=it({components:{NewLiquidityD3Chart:Ht,NewLiquidityPrice:Ot},setup(){const{t:e,locale:m}=Bt(),ye=F("liquidity"),de=Ct(),B=$(()=>de),Se=$(()=>B.value.chainName),H=Lt(),X=$(()=>H),I=$(()=>B.value.chainName?wt(B.value.chainName):{});At(()=>{Ve.value=!1});const te=yt(),i=$(()=>{let t=null;for(let v=0;v<X.value.poolConfigList.length;v++){const p=X.value.poolConfigList[v];p.address==te.query.poolAddress&&(t=p)}return console.log(t,"===>basePoolInfo"),t}),L=$(()=>{let t=null;for(const v in X.value.poolsObj){const p=X.value.poolsObj[v];p.address==te.query.poolAddress&&(console.log(p,"p===>"),t=p)}return t}),oe=F(),Ie=F(!0),Te=async(t,v)=>{var p,S,x,U;if(console.log(Ie.value,"==>chartLoading.value"),Ie.value=!0,v){Ye.value=[],E.value=[];const ae=t.token_a.decimals,ke=t.token_b.decimals;console.log(t,"pool===>1111"),console.log("poolPrice###pool.current_tick_index####",t.current_tick_index);const Y=Je.tickIndexToPrice(t.current_tick_index,ae,ke);console.log("poolPrice###",Y.toString()),console.log("poolPrice###toTick###",Je.priceToTickIndex(new a(Y),(p=t.token_a)==null?void 0:p.decimals,(S=t.token_b)==null?void 0:S.decimals));const _e=ct(Je.priceToTickIndex(new a(Y),(x=t.token_a)==null?void 0:x.decimals,(U=t.token_b)==null?void 0:U.decimals),Number(t.tickSpacing));console.log("poolPrice###test22###",_e),et.value=Y.toString(),console.log(et.value,"##currentPrice.value"),st.value=new a(1).div(Y).toString(),h.value=t.needReverse?t.token_b:t.token_a,b.value=t.needReverse?t.token_a:t.token_b,oe.value=t.needReverse,t.token_a.address.toLowerCase()===h.value.address.toLowerCase()&&t.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Me.value=!0:Me.value=!1,console.log(t,"187===>"),console.log(t,"###pool===>");let Oe={poolAddress:t.address,coinTypeA:t.coin_a_address,coinTypeB:t.coin_b_address};const ze=await I.value.getTicks(Oe);Ye.value=ze?I.value.getTickDataFromUrlData(ze):[],console.log(Ye.value,"===>chartLoadingtickList.value"),Ie.value=!1,r(t)}},w=t=>{var U,ae,ke,Y;const v=t.token_a.decimals,p=t.token_b.decimals;console.log(t,"pool===>1111"),console.log("poolPrice###pool.current_tick_index####",t.current_tick_index);const S=Je.tickIndexToPrice(t.current_tick_index,v,p);console.log("poolPrice###",S.toString()),console.log("poolPrice###toTick###",Je.priceToTickIndex(new a(S),(U=t.token_a)==null?void 0:U.decimals,(ae=t.token_b)==null?void 0:ae.decimals));const x=ct(Je.priceToTickIndex(new a(S),(ke=t.token_a)==null?void 0:ke.decimals,(Y=t.token_b)==null?void 0:Y.decimals),Number(t.tickSpacing));console.log("poolPrice###test22###",x),et.value=S.toString(),st.value=new a(1).div(S).toString()},E=F([]),n=F(),r=t=>{const v=t.token_a.decimals,p=t.token_b.decimals;let S=X.value.poolPriceConfigObj&&X.value.poolPriceConfigObj[t.address]&&X.value.poolPriceConfigObj[t.address].recommend_ranges||{};const x=X.value.poolPriceConfigObj&&X.value.poolPriceConfigObj[t.address]&&X.value.poolPriceConfigObj[t.address].type||"";console.log(S,"===>priceConfigList");let U,ae;const ke=ct(t.current_tick_index,t.tickSpacing);n.value=t.current_tick_index,console.log(ke,t.tickSpacing,"==>pool.tickSpacing"),U=ke-Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3),ae=ke+Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3);const Y=I.value.TickMath.tickIndexToPrice(U,v,p).toString(),_e=I.value.TickMath.tickIndexToPrice(ae,v,p).toString();S["full range"]={lower:I.value.TickUtil.getMinIndex(Number(L.value.tickSpacing)),upper:I.value.TickUtil.getMaxIndex(Number(L.value.tickSpacing))},S.custom={lower:U,upper:ae,minPrice:Y,maxPrice:_e};const Oe=[];for(let ze in S)S[ze]&&(console.log(ze,"j==>"),Oe.push({...S[ze],key:ze}));console.log(Oe,"priceList"),console.log(t,"###pool.type 504"),x&&Oe&&Oe.length>2?t.isSelfBuilt?z.value="custom":x=="stable"?z.value="suggested":z.value="passive":z.value="custom",E.value=Oe,Ke.value=S,R({key:z.value,...S[z.value]})},d=F(""),D=F(""),R=t=>{console.log("priceTab====>",t),console.log("priceTab###poolInfo###",L.value),z.value=t.key.toLowerCase();const v=L.value.token_a.decimals,p=L.value.token_b.decimals,{lower:S,upper:x}=t;We.value=!1;const U=I.value.TickMath.tickIndexToPrice(S,v,p).toString(),ae=I.value.TickMath.tickIndexToPrice(x,v,p).toString();if(t.key=="full range"){d.value=S,D.value=x,J();return}console.log(Me.value,"===>direct.value"),Me.value?(mt.value=String(U),M.value=String(U),vt.value=String(ae),T.value=String(ae),d.value=S,D.value=x):(mt.value=String(1/Number(ae)),M.value=String(1/Number(ae)),vt.value=String(1/Number(U)),T.value=String(1/Number(U)),d.value=I.value.TickMath.priceToTickIndex(new a(1/Number(ae)),v,p),D.value=I.value.TickMath.priceToTickIndex(new a(1/Number(U)),v,p)),console.log(M.value,T.value,"===>111")},J=t=>{M.value="0",T.value="∞"};Fe(()=>L.value,(t,v)=>{console.log(v,"===>oldVal"),console.log(t,"===>newVal"),(!v&&t&&!qe(t)||v&&t&&v.address!==t.address)&&(console.log("池子信息"),Te(t,!v||t.address!==v.address)),t&&!qe(t)&&w(t)},{immediate:!0}),Rt(()=>{h.value=F(),b.value=F(),Ye.value=[]}),Fe(()=>[i.value,L.value,X.value.recommendRangesObj],(t,v)=>{var p,S;console.log(t,"===>newValue369"),console.log(v,"===>oldValue369"),(!v||t[0]&&t[1]&&t[2]&&!qe(t[0])&&!qe(t[1]&&!qe(t[2]))||((p=t[0])==null?void 0:p.address)!==((S=v[0])==null?void 0:S.address))&&t[0]&&t[2]&&!qe(t[0])&&!qe(t[2])&&(console.log(t[0],t[2],"======>374"),H.setSinglePool(t[0],t[2],Se.value))},{immediate:!0,deep:!0});const ue=t=>{if(Se.value=="Sui")switch(t){case"passive":return"/sui-image/icon_ conservative@2x.png";case"active":return"/sui-image/icon_active@2x.png";case"full range":return"/sui-image/icon_fullrange@2x.png";case"custom":return"/sui-image/icon_costom@2x.png";case"suggested":return"/sui-image/icon_stabel@2x.png"}else switch(t){case"passive":return"/image/icon_ conservative@2x.png";case"active":return"/image/icon_active@2x.png";case"full range":return"/image/icon_fullrange@2x.png";case"custom":return"/image/icon_costom@2x.png";case"suggested":return"/image/icon_stabel@2x.png"}},Ce=t=>{switch(t){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"full range":return e("newAdd.fullRange");case"custom":return e("newAdd.custom")}},g=t=>{var p,S;const v=X.value.poolPriceConfigObj&&X.value.poolPriceConfigObj[(p=L.value)==null?void 0:p.address]&&X.value.poolPriceConfigObj[(S=L.value)==null?void 0:S.address].type||"";if(console.log(v,t,"==>poolType"),E.value.length>2)if(v=="unstable")switch(t){case"active":return{top:"35%"};case"passive":return{top:"10%"};case"full range":return{top:"60%"};case"custom":return{top:"85%"}}else switch(t){case"suggested":return{top:"23%"};case"full range":return{top:"48%"};case"custom":return{top:"73%"}}else if(v=="unstable")switch(t){case"active":return{top:"35%"};case"passive":return{top:"10%"};case"full range":return{top:"60%"};case"custom":return{top:"85%"}}else switch(t){case"full range":return{top:"35%"};case"custom":return{top:"60%"}}},P=F(1),q=()=>{const t=P.value/2;P.value=t},be=()=>{const t=P.value*2;P.value=t};console.log(E.value,"==>priceTablList");const k=$(()=>{var t,v,p;return!L.value||qe(B.value.addressHistTokens)||!B.value.addressHistTokens[(t=L.value)==null?void 0:t.poolAddress]?null:Object.fromEntries((p=B.value.addressHistTokens[(v=L.value)==null?void 0:v.poolAddress])==null?void 0:p.data.map(S=>[S.key,S.value]))}),A=F(30),W=F("30D"),Z=$(()=>Me.value?k.value&&pe(A.value==7?k.value.before_7_d_contract_price_lowest:A.value==24?k.value.before_24_h_contract_price_lowest:k.value.before_30_d_contract_price_lowest,6)||0:k.value&&pe(new a(1).div(A.value==7?k.value.before_7_d_contract_price_highest:A.value==24?k.value.before_24_h_contract_price_highest:k.value.before_30_d_contract_price_highest).toString(),6)||0),N=$(()=>Me.value?k.value&&pe(A.value==7?k.value.before_7_d_contract_price_highest:A.value==24?k.value.before_24_h_contract_price_highest:k.value.before_30_d_contract_price_highest,6)||0:(k.value&&pe(1/Number(A.value==7?k.value.before_7_d_contract_price_lowest:A.value==24?k.value.before_24_h_contract_price_lowest:k.value.before_30_d_contract_price_lowest),6))==1/0?0:k.value&&pe(1/Number(A.value==7?k.value.before_7_d_contract_price_lowest:A.value==24?k.value.before_24_h_contract_price_lowest:k.value.before_30_d_contract_price_lowest),6)||0),je=$(()=>{const t=Number(M.value),v=Number(T.value);if(M.value=="0"&&T.value=="∞"||z.value=="full range")return"1x";if(M.value==T.value||z.value=="full range")return"--";if(M.value&&T.value&&M.value!=="0"&&T.value!=="∞"){const p=gt(1/(1-Number((t/v)**.25)),2);return Number(p)>0?p+"x":"--"}else return 1}),_=$(()=>{var t,v,p,S,x,U;return((t=h.value)==null?void 0:t.isSelfBuilt)||((v=b.value)==null?void 0:v.isSelfBuilt)||((S=X.value.tokensObj[(p=h.value)==null?void 0:p.address])==null?void 0:S.isSelfBuilt)||((U=X.value.tokensObj[(x=b.value)==null?void 0:x.address])==null?void 0:U.isSelfBuilt)}),ne=(t,v)=>{console.log(t,"####0731 priceRangeChangeMin"),t!==M.value&&z.value=="full range"?(console.log(E.value,"===>priceTablList"),R({key:"custom",...E.value.custom})):z.value!=="full range"&&z.value!=="custom"?(z.value="custom",M.value=t):M.value=t},Ge=(t,v)=>{console.log(t,"###priceRangeChangeMax maxPirce"),t!==T.value&&z.value=="full range"?R({key:"custom",...E.value.custom}):z.value!=="full range"&&z.value!=="custom"?(z.value="custom",t=="0"?T.value="∞":T.value=t):t=="0"?T.value="∞":T.value=t};return console.log(M.value,T.value,"683==>"),Fe(()=>[M.value,T.value],([t,v])=>{console.log(t,v,"minmax new-liquidity-left")},{deep:!0,immediate:!0}),{positionError:Ve,getCoinIcon:t=>{var v;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((v=X.value.tokensObj[t==null?void 0:t.address])==null?void 0:v.logo_url)||(B.value.theme==="default"?ht("/image/coins/unknown.png"):ht("/image/coins/sui-unknown.png"))},chainName:Se,store:B,currentTab:ye,currentPrice:et,currentPriceReverse:st,fromCoin:h,toCoin:b,direction:Me,needReverse:oe,addCommom:Ne,decimalUi:pe,priceTablList:E,currentPriceTab:z,sliderStyle:g,poolInfo:L,tickList:Ye,getPriceTabImage:ue,getPriceTabText:Ce,defaultMinPrice:mt,defaultMaxPrice:vt,minPrice:M,maxPrice:T,currentTick:n,chartLoading:Ie,zoomOut:q,zoomIn:be,zoom:P,priceTab:R,before7dContractPriceLowest:Z,before7dContractPriceHighest:N,aprRewardsTime:W,lever:je,aprRewardsParameter:A,isSelfBuilt:_,priceRangeChangeMin:ne,priceRangeChangeMax:Ge,toggle:zt,getPirceTabTips:t=>{switch(t){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"full range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"custom":return e("newAdd.customTips")}},timeList:[{label:"24H",value:24},{label:"7D",value:7},{label:"30D",value:30}]}}});const Ao={class:"new-liquidity-left"},No=s("span",{class:"selectRange"},"Select Range",-1),qo={class:"price-info"},Mo={class:"left"},$o={class:"base-coin"},Bo={class:"base-coin-title"},Ro=s("span",null,"Base coin",-1),Fo=s("svg",{class:"icon icon-up","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_up1"})],-1),Oo=s("svg",{class:"icon icon-down","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_down1"})],-1),xo=[Fo,Oo],Uo={class:"base-coin-bottom"},jo={alt:""},zo={class:"current-price"},Ho=s("div",{class:"current-price-title"},"Current Price",-1),Xo={key:0,class:"from-pre-to"},Eo={class:"right"},Do={class:"price-range"},Wo={class:"left"},Zo={class:"price-slider"},Go={class:"slider"},Ko=s("div",{class:"slider-ratio-content"},null,-1),Qo=[Ko],Jo={class:"price-tab-list"},Yo=["onClick"],Vo=["src"],en={class:"right"},tn={class:"price-zoom"},on={class:"current-price"},nn=s("div",{class:"current-price-title"},"Current Price",-1),an={key:0,class:"from-pre-to"},rn={class:"price-zoom-right"},ln={class:"leverage"},sn=s("div",{class:"left"},null,-1),un={class:"right"},cn={class:"right-time"},dn={key:0,class:"day-7-price-range"},mn=s("i",null,null,-1),vn={class:"gray"},fn={class:"time-list"},gn=["onClick"],pn={class:"right-price-h5"},bn={class:"apr-leverage"},kn={key:0,class:"position-tips"},hn=["src"],wn={class:"error"};function yn(e,m,ye,de,B,Se){var L,oe,Ie,Te,w,E,n;const H=Jt,X=Ht,I=Io,te=Ot,i=Qt("image");return O(),ee("div",Ao,[No,s("div",qo,[s("div",Mo,[s("div",$o,[s("div",Bo,[Ro,s("div",{class:"change-price",onClick:m[0]||(m[0]=(...r)=>e.toggle&&e.toggle(...r))},xo)]),s("div",Uo,[Nt(s("img",jo,null,512),[[i,e.getCoinIcon(e.fromCoin)]]),s("span",null,ce((L=e.fromCoin)==null?void 0:L.symbol),1)])]),s("div",zo,[Ho,s("div",null,[s("span",null,ce(e.poolInfo?e.direction?("addCommom"in e?e.addCommom:ge(Ne))(("decimalUi"in e?e.decimalUi:ge(pe))(e.currentPrice,6)):("addCommom"in e?e.addCommom:ge(Ne))(("decimalUi"in e?e.decimalUi:ge(pe))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(O(),ee("span",Xo,ce((oe=e.toCoin)==null?void 0:oe.symbol)+" per "+ce((Ie=e.fromCoin)==null?void 0:Ie.symbol),1)):ie("",!0)])])]),s("div",Eo,[e.currentTab=="liquidity"?(O(),ee("div",{key:0,class:"zoom-out",onClick:m[1]||(m[1]=(...r)=>e.zoomOut&&e.zoomOut(...r))}," + ")):ie("",!0),e.currentTab=="liquidity"?(O(),ee("div",{key:1,class:"zoom-in",onClick:m[2]||(m[2]=(...r)=>e.zoomIn&&e.zoomIn(...r))}," - ")):ie("",!0)])]),s("div",Do,[s("div",Wo,[s("div",Zo,[s("div",Go,[s("div",{class:"slider-ratio",style:pt(e.sliderStyle(e.currentPriceTab))},Qo,4)])]),s("div",Jo,[(O(!0),ee(bt,null,Tt(e.priceTablList,r=>(O(),ee("div",{key:r.key,class:dt(["price-tab-item",e.currentPriceTab==r.key?"price-tab-item-active":""]),onClick:d=>e.priceTab(r)},[He(H,{placement:"bottom","arrow-point-at-center":""},{title:kt(()=>[Ft(ce(e.getPirceTabTips(r.key)),1)]),default:kt(()=>[s("img",{src:e.getPriceTabImage(r.key),alt:""},null,8,Vo),s("span",null,ce(e.getPriceTabText(r.key)),1)]),_:2},1024)],10,Yo))),128))])]),s("div",en,[s("div",tn,[s("div",on,[nn,s("div",null,[s("span",null,ce(e.poolInfo?e.direction&&!e.needReverse?("addCommom"in e?e.addCommom:ge(Ne))(("decimalUi"in e?e.decimalUi:ge(pe))(e.currentPrice,6)):("addCommom"in e?e.addCommom:ge(Ne))(("decimalUi"in e?e.decimalUi:ge(pe))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(O(),ee("span",an,ce(e.direction&&!e.needReverse?`${(Te=e.fromCoin)==null?void 0:Te.symbol} per ${(w=e.toCoin)==null?void 0:w.symbol}`:`${(E=e.toCoin)==null?void 0:E.symbol} per ${(n=e.fromCoin)==null?void 0:n.symbol}`),1)):ie("",!0)])]),s("div",rn,[e.currentTab=="liquidity"?(O(),ee("div",{key:0,class:"zoom-out",onClick:m[3]||(m[3]=(...r)=>e.zoomOut&&e.zoomOut(...r))}," + ")):ie("",!0),e.currentTab=="liquidity"?(O(),ee("div",{key:1,class:"zoom-in",onClick:m[4]||(m[4]=(...r)=>e.zoomIn&&e.zoomIn(...r))}," - ")):ie("",!0)])]),e.poolInfo?(O(),Qe(X,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direction,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,zoom:e.zoom,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","zoom","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):ie("",!0)])]),s("div",ln,[sn,s("div",un,[s("div",cn,[e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(O(),ee("div",dn,[mn,s("span",vn,ce(e.aprRewardsParameter==7?"7D":e.aprRewardsParameter==24?"24H":"30D")+" Price Range",1),s("span",null,ce(("addCommom"in e?e.addCommom:ge(Ne))(("decimalUi"in e?e.decimalUi:ge(pe))(e.before7dContractPriceLowest,6)))+" - "+ce(("addCommom"in e?e.addCommom:ge(Ne))(("decimalUi"in e?e.decimalUi:ge(pe))(e.before7dContractPriceHighest,6))),1)])):ie("",!0),s("div",fn,[(O(!0),ee(bt,null,Tt(e.timeList,r=>(O(),ee("div",{key:r.value,class:dt(["time-item",r.value==e.aprRewardsParameter?"time-item-active":""]),onClick:d=>e.aprRewardsParameter=r.value},ce(r.label),11,gn))),128))])]),s("div",pn,[s("span",null,ce(("addCommom"in e?e.addCommom:ge(Ne))(("decimalUi"in e?e.decimalUi:ge(pe))(e.before7dContractPriceLowest,6)))+" - "+ce(("addCommom"in e?e.addCommom:ge(Ne))(("decimalUi"in e?e.decimalUi:ge(pe))(e.before7dContractPriceHighest,6))),1)])])]),s("div",{class:dt(["apr-and-price",e.positionError&&e.poolInfo?"padding-apr-and-price":""])},[s("div",bn,[He(I,{lever:e.lever},null,8,["lever"])]),He(te,{min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direction,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["min","max","from-coin","to-coin","direct","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice"]),e.positionError&&e.poolInfo?(O(),ee("div",kn,[s("img",{src:("importIcon"in e?e.importIcon:ge(ht))("/image/icon-tips-error@2x.png"),alt:""},null,8,hn),s("p",wn,ce(e.$t("tips.positionError")),1)])):ie("",!0)],2)])}const Xt=at(Lo,[["render",yn]]),Cn=it({components:{NewLiquidityTitle:xt,NewLiquidityAssetsCard:Ut,NewLiquidityDepositRatio:jt},setup(){const{t:e,locale:m}=Bt(),ye=Ct(),de=$(()=>ye),B=$(()=>de.value.chainName),Se=Lt(),H=$(()=>Se),X=io(),I=$(()=>X),te=yt(),i=$(()=>{let o=null;for(const c in H.value.poolsObj){const f=H.value.poolsObj[c];f.address==te.query.poolAddress&&(console.log(f,"p===>"),o=f)}return o}),L=F(!1),oe=F(!1),Ie=$(()=>de.value.theme),Te=async(o,c)=>{h.value=o.needReverse?o.token_b:o.token_a,b.value=o.needReverse?o.token_a:o.token_b,y.value="",C.value=""},w=$(()=>I.value.assets&&h.value&&I.value.assets[h.value.address]?Pt(I.value.assets[h.value.address].balance,h.value.decimals):"0"),E=$(()=>I.value.assets&&b.value&&I.value.assets[b.value.address]?Pt(I.value.assets[b.value.address].balance,b.value.decimals):"0"),n=o=>{o==="fromCoin"?(Pe.value=!0,B.value==="Aptos"?y.value=Number(w.value)>0?h.value.symbol=="APT"?new a(Number(w.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(w.value)).sub(new a(.1)).toString():String(w.value):"":y.value=Number(w.value)>0?h.value.symbol=="SUI"?new a(Number(w.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(w.value)).sub(new a(.05)).toString():String(w.value):""):(Pe.value=!1,B.value==="Aptos"?C.value=Number(E.value)>0?b.value.symbol=="APT"?new a(Number(E.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(E.value)).sub(new a(.1)).toString():String(E.value):"":C.value=Number(E.value)>0?b.value.symbol=="SUI"?new a(Number(E.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(E.value)).sub(new a(.05)).toString():String(E.value):"")},r=o=>{o==="fromCoin"?(Pe.value=!0,y.value=Number(w.value)>0?gt(new a(Number(w.value)).div(2).toString(),h.value.decimals).toString():""):(Pe.value=!1,C.value=Number(E.value)>0?gt(new a(Number(E.value)).div(2).toString(),b.value.decimals).toString():"")},d=F(),D=F(),R=F(),J=F(!1),ue=o=>{var c,f,re,j;d.value=o,o==="fromCoin"?(D.value=((c=b.value)==null?void 0:c.address)||"",R.value=te.query.actions=="new-position"?(f=h.value)==null?void 0:f.address:i.value.needReverse?i.value.token_b.address:i.value.token_a.address):(D.value=((re=h.value)==null?void 0:re.address)||"",R.value=te.query.actions=="new-position"?(j=b.value)==null?void 0:j.address:i.value.needReverse?i.value.token_a.address:i.value.token_b.address),J.value=!0,console.log(J.value,"==>showCoinSelect.value ")},Ce=o=>{var re,j,le,se,V,Q,G,he;const c=i.value.needReverse?i.value.token_b:i.value.token_a,f=i.value.needReverse?i.value.token_a:i.value.token_b;d.value==="fromCoin"?(((re=h.value)==null?void 0:re.address)===(c==null?void 0:c.address)||!((j=h.value)!=null&&j.address)?(b.value&&o.address.toLowerCase()===((le=b)==null?void 0:le.value.address.toLowerCase())&&(b.value=null),h.value=o):(h.value&&o.address.toLowerCase()===((se=h)==null?void 0:se.value.address.toLowerCase())&&(h.value=null),b.value=o),te.query.action||(te.query.fee="")):((V=b.value)==null?void 0:V.address)===(f==null?void 0:f.address)||!((Q=b.value)!=null&&Q.address)?(h.value&&o.address.toLowerCase()===((G=h)==null?void 0:G.value.address.toLowerCase())&&(h.value=null),b.value=o):(b.value&&o.address.toLowerCase()===((he=b)==null?void 0:he.value.address.toLowerCase())&&(b.value=null),h.value=o),J.value=!1},g=$(()=>de.value.chainName?wt(de.value.chainName):{}),P=$(()=>de.value.slippage),q=F(),be=async()=>{var Ue,Ae,Be,Re;if(We.value)return console.log("跳出"),!1;if(!M.value&&!T.value)return!1;if(!y.value&&!C.value&&!M.value&&!T.value)return;const o=i.value||{};if(qe(o))return;const{TickUtil:c,TickMath:f,getNearestTickByTick:re}=g.value,j=o==null?void 0:o.token_a.decimals,le=o==null?void 0:o.token_b.decimals;let se,V,Q,G,he,Le,Xe,Ze,fe=o==null?void 0:o.current_tick_index,K;if(o.token_a.address.toLowerCase()===h.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===b.value.address.toLowerCase()?K=!0:K=!1,M.value==="0"&&T.value==="∞")Q=c.getMinIndex(Number(o.tickSpacing)),G=c.getMaxIndex(Number(o.tickSpacing)),he=f.tickIndexToSqrtPriceX64(Q),Le=f.tickIndexToSqrtPriceX64(G),console.log(Q,G,"#######updateAmounts 513");else if(z.value=="custom"){console.log(K,"===>directs1866"),K?(se=M.value,V=T.value):(se=T.value!=="∞"?new a(1).div(T.value).toString():1/0,V=new a(1).div(M.value).toString());try{Xe=new a(se).equals(new a(0))?-443636:f.priceToTickIndex(new a(se),j,le)}catch{Xe=-443636}try{Ze=f.priceToTickIndex(new a(V),j,le)}catch{Ze=443636}console.log("1113###updateAmounts###min###",se),console.log("1113###updateAmounts###max###",V),console.log("1113###updateAmounts###minTick###",Xe),console.log("1113###updateAmounts###maxTick###",Ze),Q=re(Xe,Number(o.tickSpacing),!0),G=re(Ze,Number(o.tickSpacing),!0),console.log("1113###updateAmounts###tick_lower###",Q),console.log("1113###updateAmounts###tick_upper###",G);try{he=f.priceToSqrtPriceX64(new a(se),j,le)}catch{(V===1/0||V==="∞")&&(he=f.tickIndexToSqrtPriceX64(c.getMinIndex(Number(o.tickSpacing))))}try{Le=f.priceToSqrtPriceX64(new a(V),j,le)}catch{console.log("0523###test###max###",V),(V===1/0||V==="∞")&&(console.log("0523###test###max###11111"),Le=f.tickIndexToSqrtPriceX64(c.getMaxIndex(Number(o.tickSpacing))))}console.log("0518###pre###tick_lower###",Q,G,fe),console.log("0518###pre###tick_upper###",G)}else Q=(Ue=Ke.value[z.value])==null?void 0:Ue.lower,G=(Ae=Ke.value[z.value])==null?void 0:Ae.upper,he=f.tickIndexToSqrtPriceX64(Q),Le=f.tickIndexToSqrtPriceX64(G);if(console.log("1116###updateAmounts###tick_lower####",Q),console.log("1116###updateAmounts###tick_upper####",G),console.log("1116###updateAmounts###currentTickIndex####",fe),T.value!=="∞"&&Q>=G){L.value=!0,y.value="",oe.value=!0,C.value="";return}if(console.log(G,fe,Q,"1922"),T.value==="∞"||fe>=Q&&fe<G){L.value=!1,oe.value=!1;let we;if(y.value||C.value){if(Pe.value){const ut=new a(y.value).mul(Math.pow(10,h.value.decimals)).toString();we=new De(ut)}else{const ut=new a(C.value).mul(Math.pow(10,b.value.decimals)).toString();we=new De(ut)}console.log(K,"======>directs");const Ee=f.tickIndexToSqrtPriceX64(i.value.current_tick_index),{liquidityAmount:Dt,tokenMaxA:ot,tokenMaxB:nt,tokenMaxAOrigin:Wt,tokenMaxBOrigin:Zt}=g.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:o.token_a,tokenB:o.token_b,lowerTick:Q,upperTick:G,coinAmount:we,iscoinA:K?Pe.value:!Pe.value,roundUp:!0,slippage:Number(P.value)/100,curSqrtPrice:Ee});q.value={liquidityAmount:Dt,tokenMaxA:ot,tokenMaxB:nt,tokenMaxAOrigin:Wt,tokenMaxBOrigin:Zt},console.log(ot,nt,"preAdd"),K?Pe.value?C.value=Number(nt)>0?nt:"":y.value=Number(ot)>0?ot:"":Pe.value?C.value=ot:y.value=nt}}else if(fe>=G){if(K?y.value="":C.value="",L.value=K,oe.value=!K,y.value||C.value){let we;if(K){const Ee=new a(C.value).mul(Math.pow(10,(Be=b.value)==null?void 0:Be.decimals)).toString();we=new De(Ee),q.value={liquidityAmount:g.value.estimateLiquidityForCoinB(he,Le,we),tokenMaxA:0,tokenMaxB:C.value}}else{const Ee=new a(y.value).mul(Math.pow(10,(Re=h.value)==null?void 0:Re.decimals)).toString();we=new De(Ee),q.value={liquidityAmount:g.value.estimateLiquidityForCoinB(he,Le,we),tokenMaxA:0,tokenMaxB:y.value}}}}else if(fe<Q){if(L.value=!K,oe.value=K,K?C.value="":y.value="",y.value||C.value){let we;if(K){const Ee=new a(y.value).mul(Math.pow(10,h.value.decimals)).toString();we=new De(Ee),q.value={liquidityAmount:g.value.estimateLiquidityForCoinA(he,Le,we),tokenMaxA:y.value,tokenMaxB:0}}else{const Ee=new a(C.value).mul(Math.pow(10,b.value.decimals)).toString();we=new De(Ee),q.value={liquidityAmount:g.value.estimateLiquidityForCoinA(he,Le,we),tokenMaxA:C.value,tokenMaxB:0}}}}else L.value=!0,y.value="",oe.value=!0,C.value=""};Fe(()=>i.value,(o,c)=>{console.log(c,"===>oldVal"),console.log(o,"===>newVal"),(!c&&o&&!qe(o)||c&&o&&c.address!==o.address)&&(console.log("池子信息"),Te(o,!c||o.address!==c.address)),o&&!qe(o)&&be()},{immediate:!0}),Fe(y,(o,c)=>{console.log(y,"===>fromCoinAmount"),o==""&&Pe.value&&(C.value=""),o&&Pe.value&&!We.value&&be()}),Fe(C,(o,c)=>{console.log(o,"===>>>>newValsda"),o==""&&!Pe.value&&(y.value=""),o&&!Pe.value&&!We.value&&be()}),Fe(()=>Me.value,(o,c)=>{be()}),Fe(()=>[h.value,b.value],([o,c])=>{o&&c&&(L.value=!1,oe.value=!1)});const k=F("--"),A=$(()=>H.value.RATES),W=()=>{const o=A.value&&A.value[h.value.address]&&A.value[h.value.address].price,c=A.value&&A.value[b.value.address]&&A.value[b.value.address].price;if(o&&c){const f=new a(y.value>0?y.value:0).mul(o),re=new a(C.value>0?C.value:0).mul(c),j=f.add(re).toNumber();k.value=j>0&&j<.01?"<$0.01":"$"+Ne(j,2)}else k.value="--"};Fe(()=>[y.value,C.value,We.value],([o,c,f])=>{(o||c)&&!f?W():(!o||!c)&&!f&&(k.value="--")},{immediate:!0}),Fe(()=>k,o=>{console.log(o,"71911111")},{immediate:!0});const Z=F(),N=async()=>{var K,Ue;if(!M.value&&!T.value)return!1;if(!y.value&&!C.value&&!M.value&&!T.value)return;const o=i.value;if(qe(o))return;const{TickUtil:c,TickMath:f,getNearestTickByTick:re}=g.value,j=o==null?void 0:o.token_a.decimals,le=o==null?void 0:o.token_b.decimals;let se,V,Q,G,he,Le,Xe;if(o.token_a.address.toLowerCase()===h.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Xe=!0:Xe=!1,M.value==="0"&&T.value==="∞")Q=c.getMinIndex(Number(o.tickSpacing)),G=c.getMaxIndex(Number(o.tickSpacing));else if(z.value=="custom"){Xe?(se=Number(M.value),V=Number(T.value)):(se=new a(1).div(T.value).toString(),V=new a(1).div(M.value).toString());try{he=se==0?-443636:f.priceToTickIndex(new a(se),j,le)}catch{he=-443636}try{Le=f.priceToTickIndex(new a(V),j,le)}catch{Le=443636}Q=re(he,Number(o.tickSpacing),!0),G=re(Le,Number(o.tickSpacing),!0)}else Q=(K=Ke.value[z.value])==null?void 0:K.lower,G=(Ue=Ke.value[z.value])==null?void 0:Ue.upper;const Ze=A.value[o==null?void 0:o.token_a.address].price,fe=A.value[o==null?void 0:o.token_b.address].price;Me.value?new De(o.current_sqrt_price):new De(1/o.current_sqrt_price),console.log(Me.value,"===>direction.value"),console.log(o,"poolInfos===>"),console.log(Q,G,"####tick_lower tick_upper 889"),console.log(k.value,"liquidityTotalAmount.value");try{const{amountA:Ae,amountB:Be,tokenAmountsInfo:Re}=await g.value.estCoinAmountsFromTotalAmount({lowerTick:Q,upperTick:G,decimalsA:j,decimalsB:le,curSqrtPrice:new De(o.current_sqrt_price),totalAmount:k.value.replace(/[^\d.]/g,""),tokenPriceA:Ze,tokenPriceB:fe});console.log(Ae,Be,"###estCoinAmountsFromTotalAmount 844"),console.log(o.needReverse,Me.value,"===>849"),Z.value=Re,o.needReverse?Me.value?(y.value=Ae,C.value=Be):(y.value=Be,C.value=Ae):(y.value=Ae,C.value=Be)}catch(Ae){console.log(Ae,"e===>")}};Fe([M,T],([o,c])=>{console.log(o,c,"==>minPrice,maxPrice"),We.value?We.value&&N():be(),c!=="∞"&&Number(o)!==0&&Number(c)!==0&&Number(o)>=Number(c)?Ve.value=!0:Ve.value=!1,Number(o)==0&&Number(c)==0&&et.value&&(Ve.value=!0,console.log("价格区间错误"))},{deep:!0,immediate:!0});const je=o=>{console.log(o,"e");const c=o.replace(/[^\d.]/g,""),f="$"+Ne(c);We.value=!0,k.value=f,c>0?N():(y.value="",C.value="")},_=F(!1),{setTransactionTxid:ne,setTransactionDesc:Ge,setIsShowWaiting:$e,setIsShowSuccess:rt,setPositiomNum:tt,setIsShowRejected:t}=ye,v=mo(),p=$(()=>H.value.currentPositionInfo),S=F(!1),x=async o=>{var he,Le,Xe,Ze;console.log(i.value,"===> poolInfo.value"),_.value=!1,H.value.currentPositionInfo={},ne(""),Ge(e("tips.increaseLiquiditySuccess",{from:L.value?"":`${Ne(y.value)} ${(he=h.value)==null?void 0:he.symbol}`,and:!L.value&&!oe.value?"and":"",to:oe.value?"":`${Ne(C.value)} ${(Le=b.value)==null?void 0:Le.symbol}`})),$e(!0);const c=Me.value?Pe.value:!Pe.value;let f,re,j,le,se,V;const Q=i.value.token_a.decimals,G=i.value.token_b.decimals;if(M.value==="0"&&T.value==="∞")j=g.value.TickUtil.getMinIndex(Number(i.value.tickSpacing)),le=g.value.TickUtil.getMaxIndex(Number(i.value.tickSpacing));else if(z.value=="custom"){Me.value?(f=Number(M.value),re=Number(T.value)):(f=new a(1).div(T.value).toString(),re=new a(1).div(M.value).toString()),console.log("0519###toAdd###min###",f),console.log("0519###toAdd###max###",re),console.log("0519###toAdd###minPrice.value###",M.value),console.log("0519###toAdd###maxPrice.value###",T.value);try{se=f==0?g.value.TickUtil.getMinIndex(Number(i.value.tickSpacing)):g.value.TickMath.priceToTickIndex(new a(Number(f).toFixed(6)),Q,G)}catch{se=g.value.TickUtil.getMinIndex(Number(i.value.tickSpacing))}try{V=g.value.TickMath.priceToTickIndex(new a(Number(re).toFixed(6)),Q,G)}catch{V=g.value.TickUtil.getMaxIndex(Number(i.value.tickSpacing))}j=g.value.getNearestTickByTick(se,Number(i.value.tickSpacing),!0),le=g.value.getNearestTickByTick(V,Number(i.value.tickSpacing),!0)}else j=Ke.value[z.value].lower,le=Ke.value[z.value].upper;console.log(j,le,"####tick_lower tick_upper 889"),console.log(i.value,"==>poolInfo.value.curSqrtPrice");try{let fe;We.value?fe=await g.value.getCreateAddLiquidityPayload({pool:i.value,curSqrtPrice:new De(i.value.current_sqrt_price),tickLower:j,tickUpper:le,slippage:Number(P.value)/100,tokenAmounts:Z.value}):fe=await g.value.getAddLiquidityTransactionPayload({pool:{poolAddress:i.value.poolAddress,token_a:i.value.token_a,token_b:i.value.token_b},amount:Pe.value?y.value:C.value,fix_amount_a:c,tick_lower:j,tick_upper:le,index:0,slippage:Number(P.value)/100,roundUp:!0,collect_fee:!1,curSqrtPrice:new De(i.value.current_sqrt_price)}),console.log(fe,"payload===?");let K;if(B.value==="Aptos")K=await I.value.currentWallet.signAndSubmitTransaction(fe);else{const Ue=await I.value.currentWallet.signAndExecuteTransactionBlock(fe);K=g.value.handleTx(Ue)}if(console.log("0410###tx###",K),K&&K.hash){ne(K.hash),$e(!1),rt(!0);let Ue;i.value.needReverse?i.value.token_a.address.toLowerCase()===h.value.address.toLowerCase()&&i.value.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Ue=!1:Ue=!0:i.value.token_a.address.toLowerCase()===h.value.address.toLowerCase()&&i.value.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Ue=!0:Ue=!1,console.log(Ue,"===>directs");const Ae={title:"Supplied",desc:e("tips.addLiquiditySuccessText",{from:L.value?"":`${Ne(y.value)} ${(Xe=h.value)==null?void 0:Xe.symbol}`,and:!L.value&&!oe.value?"and":"",to:oe.value?"":`${Ne(C.value)} ${(Ze=b.value)==null?void 0:Ze.symbol}`}),hash:K.hash,tit:"Position Created",icon:"icon-icon-Position-Created"};B.value!=="Aptos"&&(Ae.res=K.res),g.value.showTransitionPending(Ae);const Be=await g.value.watchTransaction(Ae,!0);if(Be.status){if(rt(!1),H.value.setCurrentPositionLoading(!0),S.value=!0,console.log(Be.nftInfo,"===> watchInfo.nftInfo"),B.value==="Aptos"){if(await H.value.setCurrentPositionInfo(Be.nftInfo[0].data.id.creator,Be.nftInfo[0].data.id.collection,Be.nftInfo[0].data.name,B.value),o)try{await v.subscribePosition({pool_address:p.value.poolAddress,position_index:p.value.index},p.value.nftHash)}catch(Re){console.log(Re,"e")}}else{const Re=Be.nftInfo,we=await _t(2e3);if(await H.value.setCurrentPositionInfo(Re==null?void 0:Re.pool,"","",B.value,Re==null?void 0:Re.position),await _t(1e3),console.log("0529###nftInfo###",Re),console.log("0529###currentPositionInfo.value.index###",p.value.index),o)try{await v.subscribePosition({pool_address:p.value.poolAddress,position_index:p.value.index},p.value.nftHash)}catch(Ee){console.log(Ee)}}setTimeout(()=>{Se.updateCurrentPools(i.value.poolAddress,B.value),g.value.getAccount(I.value.address)},3e3),setTimeout(async()=>{St(g,i)},3e3)}tt()}else $e(!1),t(!0);y.value="",C.value=""}catch(fe){y.value="",C.value="",console.log("0330###Add liquidity Error###",fe),$e(!1),t(!0)}},U=$(()=>!y.value&&!C.value?(console.log("addLiquidityBtnDisabled11111"),!0):Number(y.value)>Number(w.value)||Number(C.value)>Number(E.value)?(console.log("addLiquidityBtnDisabled22222"),!0):ke.value!==e("button.addLiquidity")&&ke.value!==e("newAdd.preview")?(console.log("addLiquidityBtnDisabled33333###",ke.value),!0):i.value&&i.value&&i.value.is_pause?(console.log("addLiquidityBtnDisabled44444"),!0):Number(y.value)<=0&&Number(C.value)<=0||!L.value&&Number(y.value)==0||!oe.value&&Number(C.value)==0),ae=$(()=>!h.value||!b.value),ke=$(()=>i.value&&i.value.is_pause?"Pool Closed":!h.value||!b.value||ae.value?e("modal.selectTokenModalTitle"):Number(y.value)>Number(w.value)?e("button.insufficientBalance",{name:h.value.symbol}):Number(C.value)>Number(E.value)?e("button.insufficientBalance",{name:b.value.symbol}):!Number(y.value)&&!Number(C.value)?e("button.enterAmount"):T.value!=="∞"&&Number(M.value)>=Number(T.value)?e("newAdd.invalidRange"):e("button.addLiquidity")),Y=F({}),_e=F({}),Oe=F(!1),ze=(o,c)=>{console.log(d.value,"===>currentCoinKey.value"),console.log(o);const f=localStorage.getItem(o.address);console.log(H.value.tokensObj,"===>pools.value.tokensObj"),console.log(f,"===>coinLocak"),H.value.tokensObj&&H.value.tokensObj[o.address]&&H.value.tokensObj[o.address].isSelfBuilt&&!f&&(c=="fromCoin"&&(Y.value=o),c=="toCoin"&&(_e.value=o),Oe.value=!0)};Fe(()=>[h.value,b.value],([o,c])=>{o&&!qe(o)&&ze(o,"fromCoin"),c&&!qe(c)&&ze(c,"toCoin")},{immediate:!0});const l=Yt(),u=()=>{B.value!=="Aptos"?l.push("/pool/list"):l.push("/pools")},xe=o=>{We.value,x(o)},me=()=>{te.query.action!=="create-pool"&&te.query.actions!=="new-position"&&(St(g,i),be(),Se.updateCurrentPools(i.value.poolAddress,B.value)),Se.setPoolConfigList(B.value,de.value.filterCoinsObj)},ve=$(()=>{var f,re,j,le,se,V;const o=(j=A.value[(re=(f=h)==null?void 0:f.value)==null?void 0:re.address])==null?void 0:j.price,c=(V=A.value[(se=(le=b)==null?void 0:le.value)==null?void 0:se.address])==null?void 0:V.price;return!!(o&&c)});return Fe(()=>[te,H.value.tokensObj],([o,c])=>{var f;c&&!qe(c)&&(b.value||(b.value=H.value.tokensObj[(f=o==null?void 0:o.query)==null?void 0:f.toCoin]))},{immediate:!0,deep:!0}),{positionError:Ve,decimalUi:pe,poolInfo:i,fromCoinAmount:y,toCoinAmount:C,fromCoin:h,toCoin:b,theme:Ie,showFromCoinLock:L,showToCoinLock:oe,fromCoinBlance:w,toCoinBlance:E,maxBtnSelect:n,halfBtnSelect:r,fixedFromCoin:Pe,openCoinSelect:ue,currentCoinKey:d,existingCoins:D,lastSelectCoin:R,showCoinSelect:J,onCoinSelect:Ce,liquidityTotalAmount:k,toggle:zt,onInput:je,isInputTotalAmount:We,isViewDetail:S,addLiquidityBtnDisabled:U,addLiquidityBtnText:ke,isShowTokenWarning:Oe,chainName:B,closeTokenWarning:u,warningFromCoin:Y,warningToCoin:_e,isShowLiquidityModal:_,currentPrice:et,currentPriceReverse:st,currentPriceTab:z,minPrice:M,maxPrice:T,toAdd:x,direction:Me,wallet:I,getAddLiquidityType:xe,clickRefresh:me,isShowtotalAmount:ve}}});const _n={class:"new-liquidity-right"},Pn={class:"deposit-title"},Tn={class:"card-container"},Sn={key:0,class:"lock"},In={class:"card-item"},Ln={class:"card-item"},An={key:0,class:"total-amount"},Nn=s("span",null,"Total Amount",-1);function qn(e,m,ye,de,B,Se){const H=xt,X=ao,I=Ut,te=lo,i=jt,L=Vt,oe=so,Ie=uo,Te=co;return O(),ee("div",_n,[s("div",Pn,[He(H,{"pool-info":e.poolInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"])]),s("div",Tn,[e.positionError?(O(),ee("div",Sn,[He(X)])):ie("",!0),s("div",In,[He(I,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":m[0]||(m[0]=w=>e.fromCoinAmount=w),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:m[1]||(m[1]=w=>e.maxBtnSelect("fromCoin")),onOnHalf:m[2]||(m[2]=w=>e.halfBtnSelect("fromCoin")),onOnInput:m[3]||(m[3]=w=>{e.fromCoinAmount=w,e.fixedFromCoin=!0,e.isInputTotalAmount=!1}),onOnSelect:m[4]||(m[4]=w=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.positionError?(O(),Qe(te,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):ie("",!0)]),s("div",Ln,[He(I,{modelValue:e.toCoinAmount,"onUpdate:modelValue":m[5]||(m[5]=w=>e.toCoinAmount=w),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:m[6]||(m[6]=w=>e.maxBtnSelect("toCoin")),onOnHalf:m[7]||(m[7]=w=>e.halfBtnSelect("toCoin")),onOnInput:m[8]||(m[8]=w=>{e.toCoinAmount=w,e.fixedFromCoin=!1,e.isInputTotalAmount=!1}),onOnSelect:m[9]||(m[9]=w=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.positionError?(O(),Qe(te,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):ie("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme=="default"?(O(),ee("img",{key:1,class:"add",src:vo,alt:"",onClick:m[10]||(m[10]=(...w)=>e.toggle&&e.toggle(...w))})):ie("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme!=="default"?(O(),ee("img",{key:2,class:"add",src:fo,alt:"",onClick:m[11]||(m[11]=(...w)=>e.toggle&&e.toggle(...w))})):ie("",!0)]),e.isShowtotalAmount?(O(),ee("div",An,[Nn,s("span",null,ce(e.liquidityTotalAmount)+" ",1)])):ie("",!0),He(i,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"fixed-from-coin":e.fixedFromCoin,"is-input-total-amount":e.isInputTotalAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price-tab":e.currentPriceTab,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","fixed-from-coin","is-input-total-amount","min-price","max-price","current-price-tab","current-price","current-price-reverse"]),He(L,{class:"add-liquidity-btn",disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,onClick:m[12]||(m[12]=w=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:kt(()=>[Ft(ce(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),e.showCoinSelect?(O(),Qe(oe,{key:1,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:m[13]||(m[13]=w=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):ie("",!0),e.isViewDetail?(O(),Qe(Ie,{key:2,"pool-info":e.poolInfo,onOnClose:m[14]||(m[14]=w=>e.isViewDetail=!1)},null,8,["pool-info"])):ie("",!0),e.isShowLiquidityModal?(O(),Qe(Te,{key:3,"pool-info":e.poolInfo,title:e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direction,"is-increase":!1,onToAdd:e.getAddLiquidityType,onOnClose:m[15]||(m[15]=w=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onToAdd"])):ie("",!0)])}const Et=at(Cn,[["render",qn]]),Mn=it({components:{NewLiquidityLeft:Xt,NewLiquidityRight:Et},setup(){Rt(()=>{ro()});const e=yt();return{tickList:Ye,route:e}}});const $n={key:0,class:"loading-spin-liquidity loading-global"},Bn={class:"privide-liquidity"};function Rn(e,m,ye,de,B,Se){var te,i;const H=$t,X=Xt,I=Et;return O(),ee(bt,null,[!e.tickList&&((i=(te=e.route)==null?void 0:te.query)!=null&&i.poolAddress)?(O(),ee("div",$n,[He(H)])):ie("",!0),s("div",Bn,[He(X),He(I)])],64)}const fi=at(Mn,[["render",Rn],["__scopeId","data-v-fc58011a"]]);export{fi as default};
