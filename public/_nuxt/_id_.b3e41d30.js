import{_ as re}from"./new-position-title.1bd336e4.js";import{_ as Go}from"./token-warning.308815ce.js";import{_ as ce}from"./status-block.1d0a8024.js";import{u as To,g as me,a as $,d as No,c as Mo,p as Yo,b as Qo,s as po,e as lo,f as ve,h as pe,T as Ro,C as Ko}from"./pool.b0bafc0c.js";import{u as qo,a as Oo}from"./sha256.37e14b34.js";import{i as Io}from"./import-icon.de3e6c66.js";import{u as Do,a as Zo}from"./autoPool.7c3791fe.js";import{a as ho,l as d,r as N,m as go,q as to,e as yo,s as Lo,o as h,f as B,h as e,t as F,i as W,v as u,j as fo,x as Jo,u as U,p as ko,k as Co,M as Vo,y as jo,z as xo,c as Q,w as ao,B as Wo,A as oe,C as Ho,D as fe,L as _e,I as be,S as ee,E as he,b as ne,F as ge,G as ye,H as $e,J as Ie}from"./entry.42746398.js";import{_ as ke}from"./assets-card.bbaa4717.js";import{D as y}from"./decimal.0e8aa3f1.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./decimal.633e31ee.js";import"./back.2645e764.js";import"./swap-setting.b3cdd17e.js";/* empty css              */import"./index.095f841b.js";/* empty css              */const Ce=ho({setup(){const o=qo(),t=d(()=>o),T=To(),P=d(()=>T),q=d(()=>t.value.theme),I=n=>{var c;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((c=P.value.tokensObj[n==null?void 0:n.address])==null?void 0:c.logo_url)||(q.value==="default"?Io("/image/coins/unknown.png"):Io("/image/coins/sui-unknown.png"))},f=N(!0),m=Do(),b=d(()=>m),p=go(),i=N();to(()=>[b.value.positionInfoObj,p.params.id],([n,c])=>{n&&!Mo(n)&&c&&(i.value=n[c],console.log(i.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const s=d(()=>{var n;return(n=i.value)==null?void 0:n.needReverse}),a=d(()=>{var n,c;return b.value.apyObj&&((c=b.value.apyObj[(n=i.value)==null?void 0:n.id])==null?void 0:c.tvl)||"--"}),l=d(()=>{var n,c;return b.value.apyObj&&((c=b.value.apyObj[(n=i.value)==null?void 0:n.id])==null?void 0:c.apr)||"--"});return{positionInfo:i,tvl:a,store:t,indexStore:o,needReverse:s,getCoinIcon:I,getExplorerUrl:me,addCommom:$,decimalUi:No,direct:f,apy:l}}});const Bo=o=>(ko("data-v-6f6d9df0"),o=o(),Co(),o),Se={class:"auto-position-info"},Ae={class:"pool-info"},we={class:"left"},Pe={class:"coin-a"},Re={alt:""},Te={class:"coin-b"},qe={alt:""},Le={class:"position-name"},Be={key:0,class:"pool-fee"},Ne=Bo(()=>e("span",null,"Fee tier",-1)),Me={class:"right"},Oe={class:"price-info"},De={class:"current-price"},je=Bo(()=>e("span",null,"Current Price",-1)),Ue={class:"coin-rate"},Fe=Bo(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),We=Bo(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Ee=[Fe,We],Xe={key:0},ze={key:1},He={class:"apy-and-tvl"},Ge={class:"apy"},Je=Bo(()=>e("div",{class:"apy-title"},"APY",-1)),Ye={class:"apy-text"},Ke={class:"tvl"},Qe=Bo(()=>e("div",{class:"tvl-title"},"TVL",-1)),Ze={class:"tvl-text"};function Ve(o,t,T,P,q,I){var p,i,s,a,l,n,c,r,k,g,A,H,R,C,E,D,M,G,J,w,O,Z,Y,eo,V,uo,x,_o,vo,so,_,j,no;const f=Go,m=ce,b=Lo("image");return h(),B("div",Se,[e("div",Ae,[e("div",we,[e("div",Pe,[F(e("img",Re,null,512),[[b,o.needReverse?o.getCoinIcon((i=o.positionInfo)==null?void 0:i.token_b):o.getCoinIcon((p=o.positionInfo)==null?void 0:p.token_a)]]),W(f,{address:o.needReverse?(n=(l=o.positionInfo)==null?void 0:l.token_b)==null?void 0:n.address:(a=(s=o.positionInfo)==null?void 0:s.token_a)==null?void 0:a.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Te,[F(e("img",qe,null,512),[[b,o.needReverse?o.getCoinIcon((r=o.positionInfo)==null?void 0:r.token_a):o.getCoinIcon((c=o.positionInfo)==null?void 0:c.token_b)]]),W(f,{address:o.needReverse?(H=(A=o.positionInfo)==null?void 0:A.token_a)==null?void 0:H.address:(g=(k=o.positionInfo)==null?void 0:k.token_b)==null?void 0:g.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Le,u(o.needReverse?(C=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:C.symbol:(D=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:D.symbol)+" - "+u(o.needReverse?(G=(M=o.positionInfo)==null?void 0:M.token_a)==null?void 0:G.symbol:(w=(J=o.positionInfo)==null?void 0:J.token_b)==null?void 0:w.symbol),1),(O=o.positionInfo)!=null&&O.fee?(h(),B("div",Be,[Ne,fo(" "+u(((Z=o.positionInfo)==null?void 0:Z.fee)*100)+"% ",1)])):Jo("",!0)]),e("div",Me,[W(m,{"current-status":(Y=o.positionInfo)==null?void 0:Y.currentStatus},null,8,["current-status"])])]),e("div",Oe,[e("div",De,[e("div",null,[je,e("div",Ue,[e("div",{onClick:t[0]||(t[0]=ro=>o.direct=!o.direct)},Ee)])]),(o.needReverse?!o.direct:o.direct)?(h(),B("div",Xe,[fo(u(("addCommom"in o?o.addCommom:U($))(("decimalUi"in o?o.decimalUi:U(No))((eo=o.positionInfo)==null?void 0:eo.price,6)))+"   ",1),e("span",null,u((uo=(V=o.positionInfo)==null?void 0:V.token_b)==null?void 0:uo.symbol)+" per "+u((_o=(x=o.positionInfo)==null?void 0:x.token_a)==null?void 0:_o.symbol),1)])):(h(),B("div",ze,[fo(u(("addCommom"in o?o.addCommom:U($))(("decimalUi"in o?o.decimalUi:U(No))(1/((vo=o.positionInfo)==null?void 0:vo.price),6)))+"   ",1),e("span",null,u((_=(so=o.positionInfo)==null?void 0:so.token_a)==null?void 0:_.symbol)+" per "+u((no=(j=o.positionInfo)==null?void 0:j.token_b)==null?void 0:no.symbol),1)]))]),e("div",He,[e("div",Ge,[Je,e("div",Ye,u(o.apy),1)]),e("div",Ke,[Qe,e("div",Ze,"$"+u(("addCommom"in o?o.addCommom:U($))(o.tvl,2)),1)])])])])}const te=yo(Ce,[["render",Ve],["__scopeId","data-v-6f6d9df0"]]),xe=ho({setup(){const o=Do(),t=d(()=>o),T=go(),P=d(()=>(console.log(t.value.positionInfoObj[T.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),t.value.positionInfoObj[T.params.id])),q=d(()=>{var m;return(m=P.value)==null?void 0:m.needReverse}),I=Oo(),f=d(()=>I);return{positionInfo:P,needReverse:q,addCommom:$,wallet:f}}});const So=o=>(ko("data-v-b1d5e482"),o=o(),Co(),o),on={class:"auto-position-liquidity"},en={class:"my-liquidity"},nn={class:"left"},tn=So(()=>e("div",null,"My Liquidity",-1)),sn={key:0},ln={key:1},an={class:"right"},un=So(()=>e("div",null,"My share",-1)),dn={key:0},rn={key:1},cn={class:"my-liquidity-info"},mn={class:"lp-info"},vn={class:"lp-bg"},pn={alt:""},fn={alt:""},_n={key:0,class:"lp-num"},bn={key:1,class:"lp-num"},hn=So(()=>e("div",{class:"assets-pooled-title"}," Pooled Assets ",-1)),gn={class:"assets-pooled"},yn={alt:""},$n={key:0},In={key:1},kn=So(()=>e("p",null,"--",-1)),Cn=So(()=>e("p",null,"--",-1)),Sn=[kn,Cn],An={alt:""},wn={key:0},Pn={key:1},Rn=So(()=>e("p",null,"--",-1)),Tn=So(()=>e("p",null,"--",-1)),qn=[Rn,Tn];function Ln(o,t,T,P,q,I){var m,b,p,i,s,a,l,n,c,r,k,g,A,H,R,C,E,D,M,G,J,w,O,Z,Y,eo,V,uo,x,_o,vo,so,_,j,no,ro;const f=Lo("image");return h(),B("div",on,[e("div",en,[e("div",nn,[tn,(m=o.wallet)!=null&&m.connected?(h(),B("div",sn,"$"+u(("addCommom"in o?o.addCommom:U($))((b=o.positionInfo)==null?void 0:b.myLiquidityUSD)),1)):(h(),B("div",ln,"--"))]),e("div",an,[un,(p=o.wallet)!=null&&p.connected?(h(),B("div",dn,u((i=o.positionInfo)==null?void 0:i.myShare)+"%",1)):(h(),B("div",rn,"--%"))])]),e("div",cn,[e("div",mn,[e("div",vn,[F(e("img",pn,null,512),[[f,o.needReverse?(a=(s=o.positionInfo)==null?void 0:s.token_b)==null?void 0:a.logo_url:(n=(l=o.positionInfo)==null?void 0:l.token_a)==null?void 0:n.logo_url]]),F(e("img",fn,null,512),[[f,o.needReverse?(r=(c=o.positionInfo)==null?void 0:c.token_a)==null?void 0:r.logo_url:(g=(k=o.positionInfo)==null?void 0:k.token_b)==null?void 0:g.logo_url]])]),(A=o.wallet)!=null&&A.connected?(h(),B("div",_n,u(("addCommom"in o?o.addCommom:U($))((H=o.positionInfo)==null?void 0:H.myLiquidity))+" LP",1)):(h(),B("div",bn,"-- LP"))]),hn,e("div",gn,[e("div",null,[F(e("img",yn,null,512),[[f,o.needReverse?(C=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:C.logo_url:(D=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:D.logo_url]]),(M=o.wallet)!=null&&M.connected?(h(),B("div",$n,[e("p",null,"$"+u(("addCommom"in o?o.addCommom:U($))((G=o.positionInfo)==null?void 0:G.myAmountAUSD)),1),e("p",null,u(("addCommom"in o?o.addCommom:U($))((J=o.positionInfo)==null?void 0:J.amountA))+" "+u(o.needReverse?(O=(w=o.positionInfo)==null?void 0:w.token_b)==null?void 0:O.symbol:(Y=(Z=o.positionInfo)==null?void 0:Z.token_a)==null?void 0:Y.symbol),1)])):(h(),B("div",In,Sn))]),e("div",null,[F(e("img",An,null,512),[[f,o.needReverse?(V=(eo=o.positionInfo)==null?void 0:eo.token_a)==null?void 0:V.logo_url:(x=(uo=o.positionInfo)==null?void 0:uo.token_b)==null?void 0:x.logo_url]]),(_o=o.wallet)!=null&&_o.connected?(h(),B("div",wn,[e("p",null,"$"+u(("addCommom"in o?o.addCommom:U($))((vo=o.positionInfo)==null?void 0:vo.myAmountBUSD)),1),e("p",null,u(("addCommom"in o?o.addCommom:U($))((so=o.positionInfo)==null?void 0:so.amountB))+" "+u(o.needReverse?(j=(_=o.positionInfo)==null?void 0:_.token_a)==null?void 0:j.symbol:(ro=(no=o.positionInfo)==null?void 0:no.token_b)==null?void 0:ro.symbol),1)])):(h(),B("div",Pn,qn))])])])])}const se=yo(xe,[["render",Ln],["__scopeId","data-v-b1d5e482"]]),Bn=ho({components:{Modal:Vo},props:{poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},totalAmount:{type:String,default:""},shareOfPool:{type:String,default:""},minimumReceivedLP:{type:String,default:""}},setup(o,t){const{t:T}=jo(),P=d(()=>{var a,l,n;return((a=o==null?void 0:o.poolInfo)==null?void 0:a.needReverse)||((n=(l=o==null?void 0:o.poolInfo)==null?void 0:l.poolInfo)==null?void 0:n.needReverse)}),q=To(),I=d(()=>q),f=qo(),m=d(()=>f),b=a=>{var l;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((l=I.value.tokensObj[a==null?void 0:a.address])==null?void 0:l.logo_url)||(m.value.theme==="default"?Io("/image/coins/unknown.png"):Io("/image/coins/sui-unknown.png"))},p=go(),i=N(!1),s=()=>{t.emit("toAdd")};return console.log(o,"props451"),{needReverse:P,getCoinIcon:b,addCommom:$,t:T,route:p,checked:i,decimalUi:No,clickSubmit:s}}});const Uo=o=>(ko("data-v-bb911124"),o=o(),Co(),o),Nn=Uo(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Mn={class:"modal-content"},On={class:"pool-info"},Dn={class:"left"},jn={alt:""},Un={alt:""},Fn={class:"pool-name"},Wn={class:"right"},En={class:"coin-info"},Xn={class:"from-coin-info"},zn={class:"left"},Hn={class:"coin-amount"},Gn={class:"coin-symbol"},Jn={class:"right"},Yn={class:"to-coin-info"},Kn={class:"left"},Qn={class:"coin-amount"},Zn={class:"coin-symbol"},Vn={class:"right"},xn=Uo(()=>e("div",{class:"to-swap-logo"},null,-1)),ot={class:"add-info"},et={class:"total-amount"},nt=Uo(()=>e("span",null,"Total Amount",-1)),tt={class:"total-amount"},st=Uo(()=>e("span",null,"Share of Pool",-1)),it={class:"total-amount"},lt=Uo(()=>e("span",null,"Minimum Received LP",-1));function at(o,t,T,P,q,I){const f=Go,m=Wo,b=xo("Modal"),p=Lo("image");return h(),Q(b,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:t[0]||(t[0]=i=>o.$emit("onClose"))},{closeIcon:ao(()=>[Nn]),default:ao(()=>{var i,s,a,l,n,c,r,k,g,A,H,R,C,E,D,M,G,J,w,O,Z,Y,eo,V;return[e("div",Mn,[e("div",On,[e("div",Dn,[e("div",null,[F(e("img",jn,null,512),[[p,o.needReverse?(l=(a=o.poolInfo)==null?void 0:a.token_b)==null?void 0:l.logo_url:(s=(i=o.poolInfo)==null?void 0:i.token_a)==null?void 0:s.logo_url]]),W(f,{address:o.needReverse?(k=(r=o.poolInfo)==null?void 0:r.token_b)==null?void 0:k.address:(c=(n=o.poolInfo)==null?void 0:n.token_a)==null?void 0:c.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[F(e("img",Un,null,512),[[p,o.needReverse?(R=(H=o.poolInfo)==null?void 0:H.token_a)==null?void 0:R.logo_url:(A=(g=o.poolInfo)==null?void 0:g.token_b)==null?void 0:A.logo_url]]),W(f,{address:o.needReverse?(M=(D=o.poolInfo)==null?void 0:D.token_a)==null?void 0:M.address:(E=(C=o.poolInfo)==null?void 0:C.token_b)==null?void 0:E.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",Fn,[e("span",null,u(o.needReverse?(O=(w=o.poolInfo)==null?void 0:w.token_b)==null?void 0:O.symbol:(J=(G=o.poolInfo)==null?void 0:G.token_a)==null?void 0:J.symbol),1),fo(" - "),e("span",null,u(o.needReverse?(V=(eo=o.poolInfo)==null?void 0:eo.token_a)==null?void 0:V.symbol:(Y=(Z=o.poolInfo)==null?void 0:Z.token_b)==null?void 0:Y.symbol),1)])]),e("div",Wn,[fo(" Fee tier "),e("span",null,u(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),e("div",En,[e("div",Xn,[e("div",zn,[e("div",Hn,u(("addCommom"in o?o.addCommom:U($))(o.fromCoinAmount)||0),1),e("div",Gn,u(o.fromCoin&&o.fromCoin.symbol),1)]),e("div",Jn,[F(e("img",null,null,512),[[p,o.fromCoin&&o.fromCoin.logoURI||o.getCoinIcon(o.fromCoin)]]),W(f,{address:o.fromCoin&&o.fromCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])])]),e("div",Yn,[e("div",Kn,[e("div",Qn,u(("addCommom"in o?o.addCommom:U($))(o.toCoinAmount)||0),1),e("div",Zn,u(o.toCoin&&o.toCoin.symbol),1)]),e("div",Vn,[F(e("img",null,null,512),[[p,o.toCoin&&o.toCoin.logoURI||o.getCoinIcon(o.toCoin)]]),W(f,{address:o.toCoin&&o.toCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),xn])]),e("div",ot,[e("div",et,[nt,e("span",null,"$"+u(("addCommom"in o?o.addCommom:U($))(o.totalAmount)),1)]),e("div",tt,[st,e("span",null,u(o.shareOfPool)+"%",1)]),e("div",it,[lt,e("span",null,u(("addCommom"in o?o.addCommom:U($))(o.minimumReceivedLP))+" "+u(o.fromCoin.symbol)+"-"+u(o.toCoin.symbol),1)])])]),W(m,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:ao(()=>[fo(" Add Liquidity ")]),_:1},8,["onClick"])]}),_:1})}const ie=yo(Bn,[["render",at],["__scopeId","data-v-bb911124"]]),ut=ho({components:{AutoPoolAddModal:ie},setup(){const o=Oo(),t=N(!1),T=qo(),P=d(()=>T),q=d(()=>P.value.chainName),I=d(()=>o),f=Do(),m=d(()=>f),b=To(),p=d(()=>b),i=N(),s=go();to(()=>[m.value.positionInfoObj,s.params.id],([v,S])=>{v&&!Mo(v)&&S&&(i.value=v[S],console.log(i.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const a=d(()=>{var v,S;return console.log((v=i.value)==null?void 0:v.needReverse,"##positionInfo.value?.needReverse"),(S=i.value)==null?void 0:S.needReverse}),l=N(),n=N();to(()=>i.value,v=>{v&&!Mo(v)&&(l.value=v==null?void 0:v.token_a,n.value=v==null?void 0:v.token_b)},{immediate:!0});const c=N(),r=N(),k=N(!0),g=d(()=>I.value.assets&&l.value&&I.value.assets[l.value.address]?Yo(I.value.assets[l.value.address].balance,l.value.decimals):0),A=d(()=>I.value.assets&&n.value&&I.value.assets[n.value.address]?Yo(I.value.assets[n.value.address].balance,n.value.decimals):0),H=v=>{v==="fromCoin"?(k.value=!0,c.value=g.value>0?l.value.symbol=="SUI"?new y(Number(g.value)).sub(new y(.05)).lt(new y(0))?"0":new y(Number(g.value)).sub(new y(.05)).toString():String(g.value):""):(k.value=!1,r.value=A.value>0?n.value.symbol=="SUI"?new y(Number(A.value)).sub(new y(.05)).lt(new y(0))?"0":new y(Number(A.value)).sub(new y(.05)).toString():String(A.value):"")},R=v=>{v==="fromCoin"?(k.value=!0,c.value=g.value>0?po(new y(Number(g.value)).div(2).toString(),l.value.decimals).toString():""):(k.value=!1,r.value=A.value>0?po(new y(Number(A.value)).div(2).toString(),n.value.decimals).toString():"")},C=d(()=>q.value?Qo(q.value):{}),E=d(()=>P.value.slippage),D=N("--"),M=N("--"),G=v=>{const S=new y(i.value.autoPoolPositionInfo.liquidity),L=new y(v.toString()),X=L.add(S);console.log("totalLiquidity:",S.toString(),"liqididty:",L.toString(),L.div(S).mul(100).toString()),D.value=ve(L.div(X).mul(100).toNumber(),2)},J=v=>{const S=new y(v.toString());console.log(v.toString(),"##liquidityAmount.toString()");const L=S.mul(new y(E.value).div(100)),X=new y(Math.pow(10,i.value.lpInfo.decimals));M.value=po(S.minus(L).div(X).toString(),i.value.decimals)},w=()=>{if(console.log(i.value,"238##"),!i.value||!c.value&&!r.value)return;const v=i.value.autoPoolPositionInfo.tick_lower_index,S=i.value.autoPoolPositionInfo.tick_upper_index;let L;if(c.value||r.value){if(k.value){const co=new y(c.value).mul(Math.pow(10,l.value.decimals)).toString();L=new lo(co)}else{const co=new y(r.value).mul(Math.pow(10,n.value.decimals)).toString();L=new lo(co)}const{liquidityAmount:X,tokenMaxA:K,tokenMaxB:z,tokenMaxAOrigin:bo,tokenMaxBOrigin:io}=C.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:l.value,tokenB:n.value,lowerTick:v,upperTick:S,coinAmount:L,iscoinA:k.value,roundUp:!0,slippage:Number(E.value)/100,curSqrtPrice:new lo(i.value.current_sqrt_price)});console.log(z.toString(),K.toString(),i.value,"###323"),k.value?r.value=Number(z)>0?z:"":c.value=Number(K)>0?K:"",G(X),J(X)}},O=d(()=>p.value.RATES),Z=d(()=>{var v,S,L,X,K,z,bo,io,co,$o;if((S=O.value[(v=l.value)==null?void 0:v.address])!=null&&S.price&&((X=O.value[(L=n.value)==null?void 0:L.address])!=null&&X.price)){console.log((z=O.value[(K=l.value)==null?void 0:K.address])==null?void 0:z.price,"RATES.value[fromCoin.value?.address]?.price");const mo=new y(c.value||0).mul(new y((io=O.value[(bo=l.value)==null?void 0:bo.address])==null?void 0:io.price)),oo=new y(r.value||0).mul(new y(($o=O.value[(co=n.value)==null?void 0:co.address])==null?void 0:$o.price));return po(mo.add(oo).toString(),2)}else return"--"});to(c,(v,S)=>{v&&w(),v==""&&(D.value="--",r.value="",M.value="--")}),to(r,(v,S)=>{v&&w(),v==""&&(c.value="",D.value="--",M.value="--")});const{t:Y,locale:eo}=jo(),V=d(()=>{const v=Number(c.value)>Number(g.value),S=Number(r.value)>Number(A.value);return!c.value&&!r.value?Y("button.enterAmount"):v?Y("button.insufficientBalance",{name:l.value.symbol}):S?Y("button.insufficientBalance",{name:n.value.symbol}):"Add Liquidity"}),uo=d(()=>{const v=Number(c.value)>Number(g.value),S=Number(r.value)>Number(A.value);return!!(!c.value&&!r.value||v||S)}),x=N(!0),{setIsShowSuccess:_o,setIsShowRejected:vo,setIsShowWaiting:so,setTransactionDesc:_,setTransactionTxid:j,setPositiomNum:no}=T,ro=Zo("Sui");return{wallet:I,positionInfo:i,isShowAddModal:t,needReverse:a,fromCoin:l,toCoin:n,fromCoinAmount:c,toCoinAmount:r,fromCoinBlance:g,toCoinBlance:A,fixedFromCoin:k,maxBtnSelect:H,halfBtnSelect:R,totalAmountUSD:Z,addCommom:$,shareOfPool:D,minimumReceivedLP:M,addLiquidityBtnText:V,addLiquidityBtnDisabled:uo,toAdd:async()=>{var io,co,$o,mo;t.value=!1,x.value=!0,j("");const v=`${$(c.value)} ${(io=l.value)==null?void 0:io.symbol}`,S=`${$(r.value)} ${(co=n.value)==null?void 0:co.symbol}`;_(`Deposit ${v} and ${S}`),so(!0);const L=k.value,X=i.value.autoPoolPositionInfo.tick_lower_index,K=i.value.autoPoolPositionInfo.tick_upper_index;let z;if(k.value){const oo=new y(c.value).mul(Math.pow(10,l.value.decimals)).toString();z=new lo(oo)}else{const oo=new y(r.value).mul(Math.pow(10,n.value.decimals)).toString();z=new lo(oo)}const bo=i.value.rewarderInfo.map(oo=>oo.coinAddress);try{const oo={lowerTick:X,upperTick:K,coinAmount:z,fix_amount_a:L,slippage:Number(E.value)/100,curSqrtPrice:new lo(i.value.current_sqrt_price),id:i.value.id,clmm_pool:i.value.autoPoolPositionInfo.pool,lp_token_type:i.value.lp_token_type,coinTypeA:i.value.autoPoolPositionInfo.coin_type_a,coinTypeB:i.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:bo},Xo=await ro.deposit(oo);console.log(Xo,"===>payloadAdd11111");const de=await I.value.currentWallet.signAndExecuteTransactionBlock(Xo);let Po=C.value.handleTx(de);if(console.log("toAdd###tx###",Po),Po&&Po.hash){j(Po.hash),so(!1),_o(!0),console.log(i,"===>positionInfo");const zo={title:"Supplied",desc:`Deposit ${v} and ${S}`,hash:Po.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deopsit ${c.value} ${($o=l.value)==null?void 0:$o.symbol} and ${r.value} ${(mo=n.value)==null?void 0:mo.symbol}`};q.value!=="Aptos"&&(zo.res=Po.res),C.value.showTransitionPending(zo),await C.value.watchTransaction(zo)&&setTimeout(()=>{f.updatePositionItem(i.value.address),C.value.getAccount(I.value.address)},1e3),no()}else so(!1),vo(!0);c.value="",r.value="",x.value=!1}catch(oo){c.value="",r.value="",console.log("addError###",oo),x.value=!1,so(!1),vo(!0)}}}}});const Fo=o=>(ko("data-v-3d2d7738"),o=o(),Co(),o),dt={class:"auto-pool-add"},rt={class:"auto-pool-add-content"},ct={class:"liquidity-action-tab"},mt=Fo(()=>e("div",{class:"increase tab-active"},"Add",-1)),vt={class:"card-item"},pt={class:"card-item"},ft={class:"add-info"},_t={class:"total-amount"},bt=Fo(()=>e("span",null,"Total Amount",-1)),ht={class:"total-amount"},gt=Fo(()=>e("span",null,"Share of Pool",-1)),yt={class:"total-amount"},$t=Fo(()=>e("span",null,"Minimum Received LP",-1)),It=Fo(()=>e("span",null,"Pool Closed",-1));function kt(o,t,T,P,q,I){var p,i,s,a,l;const f=ke,m=Wo,b=ie;return h(),B("div",dt,[e("div",rt,[e("div",ct,[mt,e("div",{class:"remove",onClick:t[0]||(t[0]=oe(n=>o.$emit("changeCurrentTab"),["stop"]))},"Remove")]),e("div",{class:Ho(o.needReverse?"card-container reverse":"card-container")},[e("div",vt,[W(f,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":t[1]||(t[1]=n=>o.fromCoinAmount=n),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[2]||(t[2]=n=>o.maxBtnSelect("fromCoin")),onOnHalf:t[3]||(t[3]=n=>o.halfBtnSelect("fromCoin")),onOnInput:t[4]||(t[4]=n=>{o.fromCoinAmount=n}),onOnFocus:t[5]||(t[5]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),e("div",pt,[W(f,{modelValue:o.toCoinAmount,"onUpdate:modelValue":t[6]||(t[6]=n=>o.toCoinAmount=n),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[7]||(t[7]=n=>o.maxBtnSelect("toCoin")),onOnHalf:t[8]||(t[8]=n=>o.halfBtnSelect("toCoin")),onOnInput:t[9]||(t[9]=n=>{o.toCoinAmount=n}),onOnFocus:t[10]||(t[10]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])])],2),e("div",ft,[e("div",_t,[bt,e("span",null,"$"+u(("addCommom"in o?o.addCommom:U($))(o.totalAmountUSD)),1)]),e("div",ht,[gt,e("span",null,u(o.shareOfPool)+"%",1)]),e("div",yt,[$t,e("span",null,u(("addCommom"in o?o.addCommom:U($))(o.minimumReceivedLP))+" "+u(o.needReverse?(p=o.toCoin)==null?void 0:p.symbol:(i=o.fromCoin)==null?void 0:i.symbol)+"-"+u(o.needReverse?(s=o.fromCoin)==null?void 0:s.symbol:(a=o.toCoin)==null?void 0:a.symbol),1)])])]),(l=o.positionInfo)!=null&&l.is_pause?(h(),Q(m,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:ao(()=>[It]),_:1})):o.wallet.connected?(h(),Q(m,{key:1,class:"big-btn liquidity-btn",disabled:o.addLiquidityBtnDisabled,onClick:t[11]||(t[11]=n=>o.isShowAddModal=!0)},{default:ao(()=>[e("span",null,u(o.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(h(),Q(m,{key:2,class:"big-btn",onClick:t[12]||(t[12]=n=>o.wallet.setIsShowWalletModal(!0))},{default:ao(()=>[e("span",null,u(o.$t("button.connectWallet")),1)]),_:1})),o.isShowAddModal?(h(),Q(b,{key:3,"pool-info":o.positionInfo,"from-coin":o.needReverse?o.positionInfo.token_b:o.positionInfo.token_a,"to-coin":o.needReverse?o.positionInfo.token_a:o.positionInfo.token_b,"from-coin-amount":o.needReverse?o.toCoinAmount:o.fromCoinAmount,"to-coin-amount":o.needReverse?o.fromCoinAmount:o.toCoinAmount,"total-amount":o.totalAmountUSD,"share-of-pool":o.shareOfPool,"minimum-received-l-p":o.minimumReceivedLP,onOnClose:t[13]||(t[13]=n=>o.isShowAddModal=!1),onToAdd:o.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","onToAdd"])):Jo("",!0)])}const le=yo(ut,[["render",kt],["__scopeId","data-v-3d2d7738"]]),Ct=ho({props:{inputValue:{type:String,default:""},balance:{type:String,default:""},lpDecimals:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},inputDisabled:{type:Boolean,default:!1}},setup(o,t){const{t:T,locale:P}=jo(),q=qo(),I=d(()=>q),f=d(()=>new y(Number(o.balance)).div(2)),m=fe(_e,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function b(){this.$emit("onSelect")}const p=g=>{const A=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${o.lpDecimals&&o.lpDecimals}})?).*$`);g.target.value=g.target.value.replace(A,"$1")},i=Oo(),s=d(()=>i),a=To(),l=d(()=>a),n=d(()=>l.value.tokensWarningObj);to(()=>l.value.RATES,g=>{g&&console.log(g,"price====>")},{immediate:!0});const c=d(()=>l.value.tokensObj),r=d(()=>I.value.theme);return{route:go(),theme:r,tokensObj:c,pool:l,halfBalance:f,t:T,addCommom:$,store:I,wallet:s,indicator:m,inputChange:p,importIcon:Io,selectCoin:b,formatNumber:pe,tokensWarningObj:n,checkNullObj:Mo}}});const St=o=>(ko("data-v-e097cb25"),o=o(),Co(),o),At={class:"card"},wt={class:"top"},Pt={key:1,class:"input-div"},Rt={key:0},Tt={class:"left"},qt={class:"loading-token"},Lt={class:"lp-bg"},Bt={alt:""},Nt={alt:""},Mt={class:"bottom"},Ot=St(()=>e("div",null,null,-1)),Dt={class:"top"},jt={class:"right"},Ut={class:"balance"};function Ft(o,t,T,P,q,I){const f=be,m=ee,b=Lo("image");return h(),B("div",At,[e("div",wt,[o.inputDisabled?(h(),B("div",Pt,[o.inputValue?(h(),B("span",Rt,u(o.inputValue),1)):(h(),Q(m,{key:1,indicator:o.indicator},null,8,["indicator"]))])):(h(),Q(f,{key:0,value:o.inputValue=="InsufficientLiquidity"?"":o.inputValue,placeholder:"0.0",disabled:o.inputDisabled,onChange:o.inputChange,onInput:t[0]||(t[0]=p=>o.$emit("onInput",p.target.value)),onFocus:t[1]||(t[1]=p=>o.$emit("onFocus"))},null,8,["value","disabled","onChange"])),e("div",Tt,[e("div",qt,[e("div",Lt,[F(e("img",Bt,null,512),[[b,o.fromCoin.logo_url]]),F(e("img",Nt,null,512),[[b,o.toCoin.logo_url]])]),e("p",null,u(o.fromCoin.symbol)+" - "+u(o.toCoin.symbol),1)])])]),e("div",Mt,[Ot,e("div",Dt,[e("div",jt,[fo(u(o.$t("common.balance"))+" ",1),e("span",Ut,u(o.wallet.connected?("addCommom"in o?o.addCommom:U($))(o.balance,o.lpDecimals):"0"),1)])])])])}const Wt=yo(Ct,[["render",Ft],["__scopeId","data-v-e097cb25"]]),Et=ho({components:{Modal:Vo},props:{title:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"11111111111"},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},isIncrease:{type:Boolean,default:!1},fixedFromCoin:{type:Boolean,default:!0},currentPriceTab:{type:String,default:""},currentPrice:{type:String,default:""},currentPriceReverse:{type:String,default:""},showFromCoinLock:{type:Boolean,default:!1},showToCoinLock:{type:Boolean,default:!1},currentDirect:{type:Boolean,default:!0},positionTotalAmount:{type:Number,default:0},tickLower:{type:Number,default:0},tickUpper:{type:Number,default:0},isCreate:{type:Boolean,default:!1}},setup(o,t){const{t:T}=jo(),P=d(()=>{var a,l,n;return((a=o==null?void 0:o.poolInfo)==null?void 0:a.needReverse)||((n=(l=o==null?void 0:o.poolInfo)==null?void 0:l.poolInfo)==null?void 0:n.needReverse)}),q=To(),I=d(()=>q),f=qo(),m=d(()=>f),b=a=>{var l;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((l=I.value.tokensObj[a==null?void 0:a.address])==null?void 0:l.logo_url)||(m.value.theme==="default"?Io("/image/coins/unknown.png"):Io("/image/coins/sui-unknown.png"))},p=go(),i=N(!1),s=()=>{t.emit("toAdd")};return console.log(o,"props451"),{needReverse:P,getCoinIcon:b,addCommom:$,t:T,route:p,checked:i,decimalUi:No,clickSubmit:s}}});const Ao=o=>(ko("data-v-6d964534"),o=o(),Co(),o),Xt=Ao(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),zt={class:"modal-content"},Ht={class:"pool-info"},Gt={class:"left"},Jt={alt:""},Yt={alt:""},Kt={class:"pool-name"},Qt={class:"right"},Zt={class:"lp-info"},Vt=Ao(()=>e("div",{class:"lp-num"},[e("p",null,"1,126,122.123456"),e("span",null,"USDT-USDC LP")],-1)),xt={class:"lp-bg"},os={alt:""},es={alt:""},ns={class:"est-receive"},ts=Ao(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),ss={class:"token-a"},is=Ao(()=>e("div",null,"0.941824",-1)),ls={alt:""},as=Ao(()=>e("span",null,"USDT",-1)),us={class:"token-a"},ds=Ao(()=>e("div",null,"0.941824",-1)),rs={alt:""},cs=Ao(()=>e("span",null,"USDC",-1));function ms(o,t,T,P,q,I){const f=Go,m=Wo,b=xo("Modal"),p=Lo("image");return h(),Q(b,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:t[0]||(t[0]=i=>o.$emit("onClose"))},{closeIcon:ao(()=>[Xt]),default:ao(()=>{var i,s,a,l,n,c,r,k,g,A,H,R,C,E,D,M,G,J,w,O,Z,Y,eo,V;return[e("div",zt,[e("div",Ht,[e("div",Gt,[e("div",null,[F(e("img",Jt,null,512),[[p,o.needReverse?(l=(a=o.poolInfo)==null?void 0:a.token_b)==null?void 0:l.logo_url:(s=(i=o.poolInfo)==null?void 0:i.token_a)==null?void 0:s.logo_url]]),W(f,{address:o.needReverse?(k=(r=o.poolInfo)==null?void 0:r.token_b)==null?void 0:k.address:(c=(n=o.poolInfo)==null?void 0:n.token_a)==null?void 0:c.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[F(e("img",Yt,null,512),[[p,o.needReverse?(R=(H=o.poolInfo)==null?void 0:H.token_a)==null?void 0:R.logo_url:(A=(g=o.poolInfo)==null?void 0:g.token_b)==null?void 0:A.logo_url]]),W(f,{address:o.needReverse?(M=(D=o.poolInfo)==null?void 0:D.token_a)==null?void 0:M.address:(E=(C=o.poolInfo)==null?void 0:C.token_b)==null?void 0:E.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",Kt,[e("span",null,u(o.needReverse?(O=(w=o.poolInfo)==null?void 0:w.token_b)==null?void 0:O.symbol:(J=(G=o.poolInfo)==null?void 0:G.token_a)==null?void 0:J.symbol),1),fo(" - "),e("span",null,u(o.needReverse?(V=(eo=o.poolInfo)==null?void 0:eo.token_a)==null?void 0:V.symbol:(Y=(Z=o.poolInfo)==null?void 0:Z.token_b)==null?void 0:Y.symbol),1)])]),e("div",Qt,[fo(" Fee tier "),e("span",null,u(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),e("div",Zt,[Vt,e("div",xt,[F(e("img",os,null,512),[[p,o.needReverse?o.poolInfo.token_b.logo_url:o.poolInfo.token_a.logo_url]]),F(e("img",es,null,512),[[p,o.needReverse?o.poolInfo.token_a.logo_url:o.poolInfo.token_b.logo_url]])])]),e("div",ns,[ts,e("div",ss,[is,e("div",null,[F(e("img",ls,null,512),[[p,"1"]]),as])]),e("div",us,[ds,e("div",null,[F(e("img",rs,null,512),[[p,"1"]]),cs])])])]),W(m,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:ao(()=>[fo(u(o.isIncrease?"Increase Liquidity":o.title==o.$t("button.addLiquidity")?"Add Liquidity":"Create and Add Liquidity"),1)]),_:1},8,["onClick"])]}),_:1})}const ae=yo(Et,[["render",ms],["__scopeId","data-v-6d964534"]]),vs=ho({components:{AutoPoolRemoveModal:ae},setup(){const o=Oo(),t=d(()=>o),T=qo(),P=d(()=>T),q=d(()=>P.value.slippage),I=d(()=>P.value.chainName),f=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],m=N(25),b=go(),p=Do(),i=d(()=>p),s=d(()=>(console.log(i.value.positionInfoObj[b.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),i.value.positionInfoObj[b.params.id])),a=d(()=>{var _;return(_=s.value)==null?void 0:_.needReverse}),l=N(),n=N(),c=N(!1),r=N(),k=d(()=>{var _;return(_=s.value)==null?void 0:_.myLiquidity}),g=N(!0),A=d(()=>I.value?Qo(I.value):{}),H=Zo("Sui"),R=N("--"),C=N("--"),E=()=>{if(g.value||!s.value)return;if(!r.value){R.value="--",C.value="--",m.value=0;return}if(Number(r.value)>Number(k.value))return;if(Number(r.value)*Math.pow(10,s.value.decimals)==Number(k.value)){m.value=100,M({value:1}),g.value=!0;return}console.log(s.value,"##lpBalance.value");const _=new y(r.value).mul(Math.pow(10,s.value.lpInfo.decimals)).toString(),j=new y(r.value).div(new y(k.value)).mul(100),no=s.value.autoPoolPositionInfo.tick_lower_index,ro=s.value.autoPoolPositionInfo.tick_upper_index,wo=s.value.token_a.decimals,v=s.value.token_b.decimals,S=Ro.tickIndexToSqrtPriceX64(no),L=Ro.tickIndexToSqrtPriceX64(ro);console.log(s.value.object.current_sqrt_price,"##positionInfo.value.object.current_sqrt_price");const X=Ko.getCoinAmountFromLiquidity(new lo(_),new lo(s.value.object.current_sqrt_price),S,L,!1),K=new y(X.coinA.toString()).div(Math.pow(10,wo)).toString(),z=new y(X.coinB.toString()).div(Math.pow(10,v)).toString();R.value=Number(K)>0?K:"--",C.value=Number(z)>0?z:"--",console.log(j.toString(),"##ratio"),m.value=j.toNumber(),D.value=po(_,0)},D=N(),M=_=>{if(!g.value)return;g.value=!0;const j=s.value.token_a.decimals,no=s.value.token_b.decimals,ro=s.value.tick_lower_index,wo=s.value.tick_upper_index,v=Ro.tickIndexToSqrtPriceX64(ro),S=Ro.tickIndexToSqrtPriceX64(wo);let L="";console.log(s.value,"positionInfo.value.myLiquidity###"),_.value!==1?L=new y(s.value.myLiquidity).mul(Math.pow(10,s.value.lpInfo.decimals)).mul(_.value).toString():L=new y(s.value.myLiquidity).mul(Math.pow(10,s.value.lpInfo.decimals)).toString(),L=po(L,0)||"0",D.value=po(L,0),r.value=new y(L).div(Math.pow(10,s.value.lpInfo.decimals));const X=Ko.getCoinAmountFromLiquidity(new lo(L),new lo(s.value.object.current_sqrt_price),v,S,!1),K=new y(X.coinA.toString()).div(Math.pow(10,j)).toString(),z=new y(X.coinB.toString()).div(Math.pow(10,no)).toString();console.log(K,z,"amountA121212"),R.value=Number(K)>0?K:"--",C.value=Number(z)>0?z:"--"};to(m,he((_,j)=>{_!==j&&(Number(_)>100?m.value=100:_&&s.value?(console.log("687===>"),m.value=_,M({value:m.value/100})):(R.value="--",C.value="--"))},300)),to(()=>r.value,_=>{E()},{immediate:!0});const G=ne(),{setIsShowSuccess:J,setIsShowRejected:w,setIsShowWaiting:O,setTransactionDesc:Z,setTransactionTxid:Y,setPositiomNum:eo,setTransactionDescText:V}=T,uo=N(!1),{t:x}=jo(),_o=async()=>{var X,K,z,bo;uo.value=!0,Y("");const _=$(R.value,l.value.decimals)==0?"":`${$(R.value,l.value.decimals)} ${l.value.symbol}`,j=$(C.value,n.value.decimals)==0?"":`${$(C.value,n.value.decimals)} ${n.value.symbol}`;Z(x("tips.removeLiquidiyText",{from:a.value?j:_,and:$(R.value,l.value.decimals)==0||$(C.value,n.value.decimals)==0?"":"and",to:a.value?_:j})),O(!0);const no=x("modal.removeLiquidityText2");V(no);const ro=s.value.autoPoolPositionInfo.tick_lower_index,wo=s.value.autoPoolPositionInfo.tick_upper_index,v=Ro.tickIndexToSqrtPriceX64(ro),S=Ro.tickIndexToSqrtPriceX64(wo),L=s.value.rewarderInfo.map(io=>io.coinAddress);try{const io={lowerSqrtPrice:v,upperSqrtPrice:S,lpTokenAmount:new lo(D.value),curSqrtPrice:new lo(s.value.object.current_sqrt_price),slippage:q.value,id:s.value.id,clmm_pool:s.value.autoPoolPositionInfo.pool,lp_token_type:s.value.lp_token_type,coinTypeA:s.value.autoPoolPositionInfo.coin_type_a,coinTypeB:s.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:L},co=await H.remove(io),$o=await t.value.currentWallet.signAndExecuteTransactionBlock(co);let mo=A.value.handleTx($o);if(console.log("0331###remove###tx####",mo),mo&&mo.hash){Y(mo.hash),O(!1),J(!0);const oo={title:x("common.removeLiquidity"),desc:"",hash:mo.hash,descTransactions:`Remove ${$(R.value)} ${(X=l.value)==null?void 0:X.symbol} and ${$(C.value)} ${(K=n.value)==null?void 0:K.symbol} 
             from the pool`,sender:t.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${R.value} ${(z=l.value)==null?void 0:z.symbol} and ${C.value} ${(bo=n.value)==null?void 0:bo.symbol}`};oo.res=mo.res,A.value.showTransitionPending(oo),await A.value.watchTransaction(oo)&&(R.value="",C.value="",r.value="",m.value=0,setTimeout(()=>{p.updatePositionItem(s.value.address),A.value.getAccount(t.value.address)},1e3),Number(m.value)==100&&b.name=="auto-pool-detail"&&G.push("/pool/auto"))}else O(!1),w(!0);uo.value=!1}catch(io){console.log("Remove error",io),uo.value=!1,O(!1),w(!0)}};to(()=>s.value,(_,j)=>{_&&!Mo(_)&&(l.value=_==null?void 0:_.token_a,n.value=_==null?void 0:_.token_b,console.log("触发###"),(!j||j&&j.address!==_.address)&&M({value:m.value/100}))},{immediate:!0});const vo=d(()=>{const _=Number(r.value)>Number(k.value);return!r.value||r.value<=0?x("button.enterAmount"):_?"Invalid Amount":x("button.remove")}),so=d(()=>{const _=Number(r.value)>Number(k.value);return!!(!r.value||r.value<=0||_)});return{removeLiquidityBtnText:vo,removeLiquidityBtnDisabled:so,wallet:t,ratioArr:f,positionInfo:s,isShowRemoveModal:c,needReverse:a,fromCoin:l,toCoin:n,lpAmount:r,lpBalance:k,sliderVal:m,sFixD:po,isSlider:g,fromCoinAmount:R,toCoinAmount:C,setPercent:M,toRemove:_o,addCommom:$}}});const Eo=o=>(ko("data-v-d69add9c"),o=o(),Co(),o),ps={class:"auto-pool-add"},fs={class:"auto-pool-add-content"},_s={class:"liquidity-action-tab"},bs=Eo(()=>e("div",{class:"remove tab-active"},"Remove",-1)),hs={class:"card-item"},gs={class:"remove-ratio"},ys=Eo(()=>e("div",{class:"remove-ratio-title"},"Amount",-1)),$s={class:"remove-ratio-select"},Is={key:0,class:"ratio"},ks={key:1,class:"ratio"},Cs={class:"ratio-list"},Ss=["onClick"],As={class:"est-receive"},ws=Eo(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),Ps={class:"token-a"},Rs={alt:""},Ts={class:"token-a"},qs={alt:""},Ls=Eo(()=>e("span",null,"Pool Closed",-1));function Bs(o,t,T,P,q,I){var s,a,l,n,c,r,k,g,A,H,R,C,E,D,M,G,J;const f=Wt,m=$e,b=Wo,p=ae,i=Lo("image");return h(),B("div",ps,[e("div",fs,[e("div",_s,[e("div",{class:"increase",onClick:t[0]||(t[0]=oe(w=>o.$emit("changeCurrentTab"),["stop"]))},"Add"),bs]),e("div",{class:Ho(o.needReverse?"card-container reverse":"card-container")},[e("div",hs,[W(f,{modelValue:o.lpAmount,"onUpdate:modelValue":t[1]||(t[1]=w=>o.lpAmount=w),"input-value":o.lpAmount,balance:o.lpBalance,"from-coin":o.needReverse?o.toCoin:o.fromCoin,"to-coin":o.needReverse?o.fromCoin:o.toCoin,onOnInput:t[2]||(t[2]=w=>{o.isSlider=!1,o.lpAmount=w})},null,8,["modelValue","input-value","balance","from-coin","to-coin"])])],2),e("div",gs,[ys,e("div",$s,[Number(o.lpBalance)>=Number(o.lpAmount)?(h(),B("div",Is,u(o.sliderVal>0&&Number(("sFixD"in o?o.sFixD:U(po))(o.sliderVal,2))<.01?"<0.01":("sFixD"in o?o.sFixD:U(po))(o.sliderVal,2))+"% ",1)):(h(),B("div",ks,"--")),e("div",Cs,[(h(!0),B(ge,null,ye(o.ratioArr,(w,O)=>(h(),B("div",{key:O,class:Ho(["ratio-item",o.sliderVal==w.value?"ratio-item-active":""]),onClick:()=>{o.isSlider=!0,o.sliderVal=w.value}},u(w.name),11,Ss))),128))])]),W(m,{value:o.sliderVal,"onUpdate:value":t[3]||(t[3]=w=>o.sliderVal=w)},null,8,["value"])]),e("div",As,[ws,e("div",Ps,[e("div",null,u(("addCommom"in o?o.addCommom:U($))(o.fromCoinAmount)),1),e("div",null,[F(e("img",Rs,null,512),[[i,o.needReverse?(a=(s=o.positionInfo)==null?void 0:s.token_b)==null?void 0:a.logo_url:(n=(l=o.positionInfo)==null?void 0:l.token_a)==null?void 0:n.logo_url]]),e("span",null,u(o.needReverse?(r=(c=o.positionInfo)==null?void 0:c.token_b)==null?void 0:r.symbol:(g=(k=o.positionInfo)==null?void 0:k.token_a)==null?void 0:g.symbol),1)])]),e("div",Ts,[e("div",null,u(("addCommom"in o?o.addCommom:U($))(o.toCoinAmount)),1),e("div",null,[F(e("img",qs,null,512),[[i,o.needReverse?(H=(A=o.positionInfo)==null?void 0:A.token_a)==null?void 0:H.logo_url:(C=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:C.logo_url]]),e("span",null,u(o.needReverse?(D=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:D.symbol:(G=(M=o.positionInfo)==null?void 0:M.token_b)==null?void 0:G.symbol),1)])])])]),(J=o.positionInfo)!=null&&J.is_pause?(h(),Q(b,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:ao(()=>[Ls]),_:1})):o.wallet.connected?(h(),Q(b,{key:1,class:"big-btn liquidity-btn",disabled:o.removeLiquidityBtnDisabled,onClick:o.toRemove},{default:ao(()=>[e("span",null,u(o.removeLiquidityBtnText),1)]),_:1},8,["disabled","onClick"])):(h(),Q(b,{key:2,class:"big-btn",onClick:t[4]||(t[4]=w=>o.wallet.setIsShowWalletModal(!0))},{default:ao(()=>[e("span",null,u(o.$t("button.connectWallet")),1)]),_:1})),o.isShowRemoveModal?(h(),Q(p,{key:3,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,onOnClose:t[5]||(t[5]=w=>o.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):Jo("",!0)])}const ue=yo(vs,[["render",Bs],["__scopeId","data-v-d69add9c"]]),Ns=ho({components:{AutoPoolAdd:le,AutoPositionInfo:te,AutoPositionLiquidity:se,AutoPoolRemove:ue},setup(){const o=N("add"),t=Oo(),T=d(()=>t),P=Do(),q=d(()=>P),I=To(),f=d(()=>I);to(()=>f.value.poolConfigList,s=>{s&&s.length>0&&P.getAutoPoolList()},{immediate:!0}),to(()=>[T.value.address,q.value.autoPoolList,f.value.poolConfigList],([s,a,l])=>{s&&a&&a.length>0&&l&&l.length>0&&P.getMyAutoPoolPosition()},{immediate:!0});const m=go(),b=d(()=>(console.log(q.value.positionInfoObj[m.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),q.value.positionInfoObj[m.params.id]));to(()=>m.query.action,s=>{s&&(o.value=s)},{immediate:!0});const p=ne();return to(()=>T.value.address,s=>{s||p.push("/pool/auto")},{immediate:!0}),{currentTab:o,positionInfo:b,clickRefresh:()=>{P.getAutoPoolList()}}}});const Ms={class:"auto-increase-liquidity"},Os={class:"auto-increase-liquidity-content pc-content"},Ds={class:"left"},js={class:"right"},Us={class:"auto-increase-liquidity-content h5-content"},Fs={class:"left"},Ws={class:"right"},Es={class:"loading-global"};function Xs(o,t,T,P,q,I){const f=re,m=te,b=se,p=le,i=ue,s=ee;return h(),B("div",Ms,[W(f,{onClickRefresh:o.clickRefresh},null,8,["onClickRefresh"]),e("div",Os,[e("div",Ds,[W(m),W(b)]),e("div",js,[o.currentTab=="add"?(h(),Q(p,{key:0,onChangeCurrentTab:t[0]||(t[0]=a=>o.currentTab="remove")})):(h(),Q(i,{key:1,onChangeCurrentTab:t[1]||(t[1]=a=>o.currentTab="add")}))])]),e("div",Us,[e("div",Fs,[W(m),o.currentTab=="add"?(h(),Q(p,{key:0,onChangeCurrentTab:t[2]||(t[2]=a=>o.currentTab="remove")})):(h(),Q(i,{key:1,onChangeCurrentTab:t[3]||(t[3]=a=>o.currentTab="add")}))]),e("div",Ws,[W(b)])]),F(e("div",Es,[W(s)],512),[[Ie,!o.positionInfo]])])}const ci=yo(Ns,[["render",Xs],["__scopeId","data-v-bcba86a4"]]);export{ci as default};
