import{_ as un}from"./back.3409f4b8.js";import{_ as rn}from"./refresh-icon.878cf5c9.js";import{a as Ve,$ as Vo,y as Io,r as _,ah as dn,e as Me,Q as oo,o as u,c as Z,w as fe,h as o,i as W,j as Oe,v as m,f as $,F as eo,E as Eo,A as Te,x as z,ai as vn,I as mn,B as So,p as Ee,k as He,H as mo,K as Ao,l as h,q as Ae,b as Co,m as Ze,s as Po,t as Qe,u as S,G as Ho,O as _o,D as ao,C as cn,L as pn,z as Wo,P as fn,M as jo,S as gn}from"./entry.01d18139.js";/* empty css              */import{a as yn,b as bn,_ as kn}from"./icon-error_2x.d65a8b0c.js";import{u as ze,a as Xo}from"./autoPool.423c6127.js";import{u as Je,c as Xe,a as N,g as $o,d as Le,s as P,T as Fe,b as me,p as Fo,e as zo,f as hn,V as wo}from"./pool.bc83b7c0.js";import{_ as co}from"./token-warning.15db45ed.js";import{_ as Go}from"./auto-pool-apy-tips.edef2f1c.js";import{u as po,a as To}from"./sha256.68f22e21.js";import{i as lo}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as Yo}from"./assets-card.afbad6bc.js";import{_ as Ko}from"./coin-lock.292979df.js";import{_ as Qo,a as Zo}from"./auto-pool-remove-modal.1fc67e0e.js";/* empty css              *//* empty css              */import{D as a}from"./decimal.0bdeb344.js";/* empty css              */import{u as _n}from"./swapRouter.6cabbda4.js";/* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.e592a980.js";const $n=Ve({components:{Modal:Vo},setup(e,s){const{t:G,locale:Y}=Io(),T=ze(),A=["0.1","0.5","1"],p=_(T.slippage||.1),{setSlippage:C}=T,w=dn();console.log(p.value,"slippage.value");const l=_(!1);function t(n,v){l.value=!1,p.value=v}function B(){C(p.value),s.emit("onClose",!1)}return{settingArr:A,changeActiveIndex:t,confirm:B,emit:w,slippage:p,t:G,isInput:l,inputChange:n=>{const v=new RegExp(/[^\d^\.]+/g);n.target.value=n.target.value.replace(v,""),p.value=n.target.value}}}});const Jo=e=>(Ee("data-v-c5b99de4"),e=e(),He(),e),wn=Jo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),In={class:"setting-container"},Sn={class:"title"},An=Jo(()=>o("img",{src:kn,alt:""},null,-1)),Cn={class:"tag-list"},Pn={key:0,src:yn,alt:""},Tn={key:1,src:bn,alt:""},qn={class:"footer"};function Nn(e,s,G,Y,T,A){const p=vn,C=mn,w=So,l=oo("Modal");return u(),Z(l,{title:"Settings",class:"setting",centered:"",visible:!0,width:"400px",onCancel:s[3]||(s[3]=t=>e.$emit("onClose"))},{closeIcon:fe(()=>[wn]),footer:fe(()=>[o("div",qn,[W(w,{type:"cancel",class:"cancel-btn cancel-btn-new",onClick:s[2]||(s[2]=t=>e.$emit("onClose"))},{default:fe(()=>[Oe(m(e.$t("button.cancel")),1)]),_:1}),W(w,{class:"confirmbtn",disabled:Number(e.slippage)==0||Number(e.slippage)>1||Number(e.slippage)<.01,onClick:e.confirm},{default:fe(()=>[Oe(m(e.$t("button.confirm")),1)]),_:1},8,["disabled","onClick"])])]),default:fe(()=>[o("div",In,[o("div",Sn,[An,o("span",null,m(e.$t("modal.slippageTolerance")),1)]),o("div",Cn,[(u(!0),$(eo,null,Eo(e.settingArr,(t,B)=>(u(),Z(p,{key:B,class:Te(!e.isInput&&t==e.slippage?"tag-active":""),onClick:f=>e.changeActiveIndex(B,t)},{default:fe(()=>[Oe(m(t)+"% ",1)]),_:2},1032,["class","onClick"]))),128)),W(p,{class:Te(["input-tag",e.isInput?"tag-active":""]),onClick:s[1]||(s[1]=t=>e.isInput=!0)},{default:fe(()=>[W(C,{value:e.slippage,"onUpdate:value":s[0]||(s[0]=t=>e.slippage=t),placeholder:"",suffix:"%",class:Te(["slippage-input",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-input-waring":Number(e.slippage)>1?"slippage-input-error":""]),onChange:e.inputChange},null,8,["value","class","onChange"])]),_:1},8,["class"])])]),Number(e.slippage)>.5&&Number(e.slippage)<1||Number(e.slippage)>1?(u(),$("div",{key:0,class:Te(["slippage-hint",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-hint-waring":Number(e.slippage)>1?"slippage-hint-error":""])},[Number(e.slippage)>.5&&1>=Number(e.slippage)?(u(),$("img",Pn)):z("",!0),Number(e.slippage)>1?(u(),$("img",Tn)):z("",!0),o("p",null,m(Number(e.slippage)>.5&&1>=Number(e.slippage)?e.$t("tips.slippageTolerance2"):Number(e.slippage)>1?e.$t("tips.slippageTolerance1"):""),1)],2)):z("",!0)]),_:1})}const Rn=Me($n,[["render",Nn],["__scopeId","data-v-c5b99de4"]]),Bn=Ve({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,s){const G=_(!1),Y=_(null),T=_(0);let A=_(!1);const p=_(20);Je();const C=ze(),w=_(!1);mo(()=>{}),Ao(()=>{clearInterval(Y.value)});const l=()=>{A.value=!1,Y.value=setInterval(()=>{var d;w.value||T.value<p.value&&(T.value+=1,T.value===p.value&&((d=e==null?void 0:e.poolInfo)!=null&&d.address&&f(),T.value=0))},1e3)},t=h(()=>C.slippage),B=()=>{s.emit("clearAll")},f=()=>{A.value||(A.value=!0,T.value=0,s.emit("clickRefresh"),setTimeout(()=>{A.value=!1},1e3))};Ae(()=>e.poolInfo,d=>{d&&!Y.value&&l()},{immediate:!0});const n=Co(),v=Ze();return console.log(v,"route"),{refresh:A,clickRefresh:f,isShowSwapSetting:G,countdown:T,autoRefreshTime:p,slippage:t,clearAll:B,checkNullObj:Xe,router:n,route:v}}});const Dn=e=>(Ee("data-v-71491a33"),e=e(),He(),e),Ln={class:"title"},Un={class:"left"},On=Dn(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Mn={key:0,class:"deposit-progress"};function Fn(e,s,G,Y,T,A){const p=un,C=rn,w=Rn;return u(),$("div",Ln,[o("div",Un,[W(p)]),o("div",{class:Te(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[o("div",{class:"slippage-icon",onClick:s[0]||(s[0]=l=>e.isShowSwapSetting=!0)},[On,o("span",null,m(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(u(),$("div",Mn,[W(C,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):z("",!0)],2),e.isShowSwapSetting?(u(),Z(w,{key:0,onOnClose:s[1]||(s[1]=l=>e.isShowSwapSetting=!1)})):z("",!0)])}const Vn=Me(Bn,[["render",Fn],["__scopeId","data-v-71491a33"]]),En=Ve({components:{AutoPoolApyTips:Go},setup(){const e=po(),s=h(()=>e),G=Je(),Y=h(()=>G),T=ze(),A=h(()=>T),p=h(()=>s.value.theme),C=Ze(),w=_();Ae(()=>[A.value.positionInfoObj,C.params.id],([v,d])=>{v&&!Xe(v)&&d&&(w.value=v[d],console.log(w.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const l=h(()=>{var v;return(v=w.value)==null?void 0:v.needReverse}),t=v=>{var d;return(v==null?void 0:v.logoURI)||(v==null?void 0:v.logo_url)||((d=Y.value.tokensObj[v==null?void 0:v.address])==null?void 0:d.logo_url)||(p.value==="default"?lo("/image/coins/unknown.png"):lo("/image/coins/sui-unknown.png"))},B=h(()=>{var v,d;return console.log((v=w==null?void 0:w.value)==null?void 0:v.poolUSD,"##positionInfo?.value?.poolUSD"),(d=w==null?void 0:w.value)==null?void 0:d.poolUSD}),f=h(()=>{var v,d;return A.value.apyObj&&((d=A.value.apyObj[(v=w.value)==null?void 0:v.id])==null?void 0:d.apr)||"--"}),n=h(()=>s.value.currentExplorer);return{positionInfo:w,needReverse:l,getCoinIcon:t,tvl:B,apy:f,addCommom:N,getExplorerUrl:$o,currentExplorer:n}}});const We=e=>(Ee("data-v-3d655e5e"),e=e(),He(),e),Hn={class:"auto-pool-v2-info"},Wn={class:"pool-info"},jn={class:"left"},Xn={class:"coin-a"},zn={alt:""},Gn={class:"coin-b"},Yn={alt:""},Kn={class:"position-name"},Qn={key:0,class:"pool-fee"},Zn=We(()=>o("span",null,"Fee tier",-1)),Jn={class:"vault-address"},xn=["href"],et=We(()=>o("span",null,"Vault Address",-1)),ot=We(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),nt=[et,ot],tt={class:"apy-and-tvl"},st={class:"apy"},it=We(()=>o("div",{class:"apy-title"},"APY",-1)),lt={class:"apy-text"},at={class:"tvl"},ut=We(()=>o("div",{class:"tvl-title"},"TVL",-1)),rt={class:"tvl-text"},dt={class:"pool-info h5-pool-info"},vt={class:"left"},mt={class:"coin-a"},ct={alt:""},pt={class:"coin-b"},ft={alt:""},gt={class:"position-name"},yt={key:0,class:"pool-fee"},bt=We(()=>o("span",null,"Fee tier",-1)),kt={class:"left"},ht={class:"vault-address"},_t=["href"],$t=We(()=>o("span",null,"Vault Address",-1)),wt=We(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),It=[$t,wt],St={class:"apy-and-tvl"},At={class:"apy"},Ct=We(()=>o("div",{class:"apy-title"},"APY",-1)),Pt={class:"apy-text"},Tt={class:"tvl"},qt=We(()=>o("div",{class:"tvl-title"},"TVL",-1)),Nt={class:"tvl-text"};function Rt(e,s,G,Y,T,A){var l,t,B,f,n,v,d,b,I,r,L,O,H,ee,ae,le,k,y,K,te,se,ue,j,oe,ge,ye,re,q,D,ce,ie,pe,g,J,Ce,ke,Ue,qe,Re,_e,Pe,xe,no,to,je,Ne;const p=co,C=Go,w=Po("image");return u(),$("div",Hn,[o("div",Wn,[o("div",jn,[o("div",Xn,[Qe(o("img",zn,null,512),[[w,e.needReverse?e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_b):e.getCoinIcon((l=e.positionInfo)==null?void 0:l.token_a)]]),W(p,{address:e.needReverse?(v=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:v.address:(f=(B=e.positionInfo)==null?void 0:B.token_a)==null?void 0:f.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Gn,[Qe(o("img",Yn,null,512),[[w,e.needReverse?e.getCoinIcon((b=e.positionInfo)==null?void 0:b.token_a):e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_b)]]),W(p,{address:e.needReverse?(O=(L=e.positionInfo)==null?void 0:L.token_a)==null?void 0:O.address:(r=(I=e.positionInfo)==null?void 0:I.token_b)==null?void 0:r.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Kn,m(e.needReverse?(ee=(H=e.positionInfo)==null?void 0:H.token_b)==null?void 0:ee.symbol:(le=(ae=e.positionInfo)==null?void 0:ae.token_a)==null?void 0:le.symbol)+" - "+m(e.needReverse?(y=(k=e.positionInfo)==null?void 0:k.token_a)==null?void 0:y.symbol:(te=(K=e.positionInfo)==null?void 0:K.token_b)==null?void 0:te.symbol),1),(se=e.positionInfo)!=null&&se.fee?(u(),$("div",Qn,[Zn,Oe(" "+m(((ue=e.positionInfo)==null?void 0:ue.fee)*100)+"% ",1)])):z("",!0),o("div",Jn,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:S($o))(e.currentExplorer,"poolAddress",(j=e.positionInfo)==null?void 0:j.id),target:"_blank"},nt,8,xn)])]),o("div",tt,[o("div",st,[it,o("div",lt,[Oe(m(e.apy)+" ",1),W(C)])]),o("div",at,[ut,o("div",rt,"$"+m(("addCommom"in e?e.addCommom:S(N))(e.tvl,2)),1)])])]),o("div",dt,[o("div",vt,[o("div",mt,[Qe(o("img",ct,null,512),[[w,e.needReverse?e.getCoinIcon((ge=e.positionInfo)==null?void 0:ge.token_b):e.getCoinIcon((oe=e.positionInfo)==null?void 0:oe.token_a)]]),W(p,{address:e.needReverse?(D=(q=e.positionInfo)==null?void 0:q.token_b)==null?void 0:D.address:(re=(ye=e.positionInfo)==null?void 0:ye.token_a)==null?void 0:re.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",pt,[Qe(o("img",ft,null,512),[[w,e.needReverse?e.getCoinIcon((ie=e.positionInfo)==null?void 0:ie.token_a):e.getCoinIcon((ce=e.positionInfo)==null?void 0:ce.token_b)]]),W(p,{address:e.needReverse?(Ce=(J=e.positionInfo)==null?void 0:J.token_a)==null?void 0:Ce.address:(g=(pe=e.positionInfo)==null?void 0:pe.token_b)==null?void 0:g.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",gt,m(e.needReverse?(Ue=(ke=e.positionInfo)==null?void 0:ke.token_b)==null?void 0:Ue.symbol:(Re=(qe=e.positionInfo)==null?void 0:qe.token_a)==null?void 0:Re.symbol)+" - "+m(e.needReverse?(Pe=(_e=e.positionInfo)==null?void 0:_e.token_a)==null?void 0:Pe.symbol:(no=(xe=e.positionInfo)==null?void 0:xe.token_b)==null?void 0:no.symbol),1),(to=e.positionInfo)!=null&&to.fee?(u(),$("div",yt,[bt,Oe(" "+m(((je=e.positionInfo)==null?void 0:je.fee)*100)+"% ",1)])):z("",!0)]),o("div",kt,[o("div",ht,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:S($o))(e.currentExplorer,"poolAddress",(Ne=e.positionInfo)==null?void 0:Ne.id),target:"_blank"},It,8,_t)])]),o("div",St,[o("div",At,[Ct,o("div",Pt,[Oe(m(e.apy)+" ",1),W(C)])]),o("div",Tt,[qt,o("div",Nt,"$"+m(("addCommom"in e?e.addCommom:S(N))(e.tvl,2)),1)])])])])}const xo=Me(En,[["render",Rt],["__scopeId","data-v-3d655e5e"]]),Bt=Ve({components:{Slider:Ho},setup(){const e=_(!0),s=Je(),G=h(()=>s),Y=ze(),T=h(()=>Y),A=Ze(),p=_();Ae(()=>[T.value.positionInfoObj,A.params.id],([f,n])=>{f&&!Xe(f)&&n&&(p.value=f[n],console.log(p.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const C=h(()=>{var f;return(f=p.value)==null?void 0:f.needReverse}),w=f=>{var n;return(f==null?void 0:f.logoURI)||(f==null?void 0:f.logo_url)||((n=G.value.tokensObj[f==null?void 0:f.address])==null?void 0:n.logo_url)||lo("/image/coins/sui-unknown.png")},l=h(()=>{var b,I,r,L,O,H,ee;const f=e.value?((b=p.value)==null?void 0:b.minPrice)&&P(p==null?void 0:p.value.minPrice,6):((I=p.value)==null?void 0:I.maxPrice)&&P(1/(p==null?void 0:p.value.maxPrice),6),n=e.value?((r=p.value)==null?void 0:r.maxPrice)&&P((L=p.value)==null?void 0:L.maxPrice,6):((O=p.value)==null?void 0:O.minPrice)&&P(1/(p==null?void 0:p.value.minPrice),6),v=(C.value?!e.value:e.value)?P((H=p.value)==null?void 0:H.price,6):P(1/((ee=p.value)==null?void 0:ee.price),6);let d={};return d[f]={label:"Min Price"},d[n]={label:"Max Price"},v>f&&v<n?d[v]={label:"Current Price"}:v<f?d[Number(f)+1e-9]={label:"Current Price"}:v>n&&(d[Number(n)-1e-9]={label:"Current Price"}),console.log(d,"obj###"),d}),t=h(()=>{var n,v;const f=(C.value?!e.value:e.value)?Le((n=p.value)==null?void 0:n.price,6):Le(1/((v=p.value)==null?void 0:v.price),6);return console.log(f,"result##"),f}),B=h(()=>{var n,v;const f=(C.value?!e.value:e.value)?Le((n=p.value)==null?void 0:n.price,6):Le(1/((v=p.value)==null?void 0:v.price),6);return console.log(f,"result##111"),f});return{direct:e,positionInfo:p,needReverse:C,getCoinIcon:w,decimalUi:Le,addCommom:N,sFixD:P,marks:l,currentPrice:t,currentPriceResever:B}}});const fo=e=>(Ee("data-v-794c305c"),e=e(),He(),e),Dt={class:"v2-position-range"},Lt={class:"position-range-top"},Ut=fo(()=>o("div",null,"Position Range",-1)),Ot={class:"base-coin"},Mt={key:0},Ft={alt:""},Vt={key:1},Et={alt:""},Ht={key:2},Wt={key:3},jt=fo(()=>o("p",null,"Base coin",-1)),Xt={class:"coin-rate"},zt=fo(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Gt=fo(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Yt=[zt,Gt],Kt={class:"position-range-bottom"},Qt={class:"price-range"},Zt={class:"price-range-bg"},Jt={key:0,class:"min-price"},xt={key:0},es={key:1},os={key:1,class:"max-price"},ns={key:0},ts={key:1},ss={key:0,class:"min-price"},is={key:0},ls={key:1},as={key:1,class:"max-price"},us={key:0},rs={key:1};function ds(e,s,G,Y,T,A){var l,t,B,f,n,v,d,b,I,r,L,O,H,ee,ae,le,k,y,K,te,se,ue,j,oe,ge,ye,re,q;const p=co,C=oo("Slider"),w=Po("image");return u(),$("div",Dt,[o("div",Lt,[Ut,o("div",Ot,[e.needReverse?(u(),$("div",Vt,[Qe(o("img",Et,null,512),[[w,e.direct?e.getCoinIcon((b=e.positionInfo)==null?void 0:b.token_b):e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_a)]]),W(p,{address:e.direct?(O=(L=e.positionInfo)==null?void 0:L.token_b)==null?void 0:O.address:(r=(I=e.positionInfo)==null?void 0:I.token_a)==null?void 0:r.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(u(),$("div",Mt,[Qe(o("img",Ft,null,512),[[w,e.direct?e.getCoinIcon((l=e.positionInfo)==null?void 0:l.token_a):e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_b)]]),W(p,{address:e.direct?(f=(B=e.positionInfo)==null?void 0:B.token_a)==null?void 0:f.address:(v=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:v.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(u(),$("span",Wt,m(e.direct?(y=(k=e.positionInfo)==null?void 0:k.token_b)==null?void 0:y.symbol:(te=(K=e.positionInfo)==null?void 0:K.token_a)==null?void 0:te.symbol),1)):(u(),$("span",Ht,m(e.direct?(ee=(H=e.positionInfo)==null?void 0:H.token_a)==null?void 0:ee.symbol:(le=(ae=e.positionInfo)==null?void 0:ae.token_b)==null?void 0:le.symbol),1)),jt,o("div",Xt,[o("div",{onClick:s[0]||(s[0]=D=>e.direct=!e.direct)},Yt)])])]),o("div",Kt,[o("div",Qt,[o("div",Zt,[e.direct?(u(),Z(C,{key:0,value:e.currentPrice,class:Te(["position-slider",e.currentPrice<Number(("sFixD"in e?e.sFixD:S(P))((se=e.positionInfo)==null?void 0:se.minPrice,6))||e.currentPrice>Number(("sFixD"in e?e.sFixD:S(P))((ue=e.positionInfo)==null?void 0:ue.maxPrice,6))?"hide-handler":""]),step:null,marks:e.marks,disabled:!0,min:Number(("decimalUi"in e?e.decimalUi:S(Le))((j=e.positionInfo)==null?void 0:j.minPrice,6)),max:Number(("decimalUi"in e?e.decimalUi:S(Le))((oe=e.positionInfo)==null?void 0:oe.maxPrice,6))},{mark:fe(({label:D})=>{var ce,ie,pe,g,J,Ce,ke,Ue,qe,Re,_e,Pe;return[D=="Min Price"?(u(),$("div",Jt,[o("div",null,m(D),1),e.direct?(u(),$("div",xt,m(((ce=e.positionInfo)==null?void 0:ce.minPrice)&&("sFixD"in e?e.sFixD:S(P))((ie=e.positionInfo)==null?void 0:ie.minPrice,6)),1)):(u(),$("div",es,m(((pe=e.positionInfo)==null?void 0:pe.maxPrice)&&("sFixD"in e?e.sFixD:S(P))(1/((g=e.positionInfo)==null?void 0:g.maxPrice),6)),1))])):z("",!0),D=="Max Price"?(u(),$("div",os,[o("div",null,m(D),1),e.direct?(u(),$("div",ns,m(((J=e.positionInfo)==null?void 0:J.maxPrice)&&("sFixD"in e?e.sFixD:S(P))((Ce=e.positionInfo)==null?void 0:Ce.maxPrice,6)),1)):(u(),$("div",ts,m(((ke=e.positionInfo)==null?void 0:ke.minPrice)&&("sFixD"in e?e.sFixD:S(P))(1/((Ue=e.positionInfo)==null?void 0:Ue.minPrice),6)),1))])):z("",!0),D=="Current Price"?(u(),$("div",{key:2,class:Te(["current-price",e.currentPrice<Number(("sFixD"in e?e.sFixD:S(P))((qe=e.positionInfo)==null?void 0:qe.minPrice,6))?"current-price-left":e.currentPrice>Number(("sFixD"in e?e.sFixD:S(P))((Re=e.positionInfo)==null?void 0:Re.maxPrice,6))?"current-price-right":""])},[o("div",null,m(D),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(u(),$(eo,{key:0},[Oe(m(("addCommom"in e?e.addCommom:S(N))(("decimalUi"in e?e.decimalUi:S(Le))((_e=e.positionInfo)==null?void 0:_e.price,6))),1)],64)):(u(),$(eo,{key:1},[Oe(m(("addCommom"in e?e.addCommom:S(N))(("decimalUi"in e?e.decimalUi:S(Le))(1/((Pe=e.positionInfo)==null?void 0:Pe.price),6))),1)],64))])],2)):z("",!0)]}),_:1},8,["value","class","marks","min","max"])):(u(),Z(C,{key:1,value:e.currentPriceResever,class:Te(["position-slider",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:S(P))(1/((ge=e.positionInfo)==null?void 0:ge.maxPrice),6))||e.currentPriceResever>Number(("sFixD"in e?e.sFixD:S(P))(1/((ye=e.positionInfo)==null?void 0:ye.minPrice),6))?"hide-handler":""]),step:null,min:Number(("decimalUi"in e?e.decimalUi:S(Le))(1/((re=e.positionInfo)==null?void 0:re.maxPrice),6)),max:Number(("decimalUi"in e?e.decimalUi:S(Le))(1/((q=e.positionInfo)==null?void 0:q.minPrice),6)),marks:e.marks,disabled:!0},{mark:fe(({label:D})=>{var ce,ie,pe,g,J,Ce,ke,Ue,qe,Re,_e,Pe;return[D=="Min Price"?(u(),$("div",ss,[o("div",null,m(D),1),e.direct?(u(),$("div",is,m(((ce=e.positionInfo)==null?void 0:ce.minPrice)&&("sFixD"in e?e.sFixD:S(P))((ie=e.positionInfo)==null?void 0:ie.minPrice,6)),1)):(u(),$("div",ls,m(((pe=e.positionInfo)==null?void 0:pe.maxPrice)&&("sFixD"in e?e.sFixD:S(P))(1/((g=e.positionInfo)==null?void 0:g.maxPrice),6)),1))])):z("",!0),D=="Max Price"?(u(),$("div",as,[o("div",null,m(D),1),e.direct?(u(),$("div",us,m(((J=e.positionInfo)==null?void 0:J.maxPrice)&&("sFixD"in e?e.sFixD:S(P))((Ce=e.positionInfo)==null?void 0:Ce.maxPrice,6)),1)):(u(),$("div",rs,m(((ke=e.positionInfo)==null?void 0:ke.minPrice)&&("sFixD"in e?e.sFixD:S(P))(1/((Ue=e.positionInfo)==null?void 0:Ue.minPrice),6)),1))])):z("",!0),D=="Current Price"?(u(),$("div",{key:2,class:Te(["current-price current-price-direct",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:S(P))(1/((qe=e.positionInfo)==null?void 0:qe.maxPrice),6))?"current-price-left":e.currentPriceResever>Number(("sFixD"in e?e.sFixD:S(P))(1/((Re=e.positionInfo)==null?void 0:Re.minPrice),6))?"current-price-right":""])},[o("div",null,m(D),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(u(),$(eo,{key:0},[Oe(m(("addCommom"in e?e.addCommom:S(N))(("decimalUi"in e?e.decimalUi:S(Le))((_e=e.positionInfo)==null?void 0:_e.price,6))),1)],64)):(u(),$(eo,{key:1},[Oe(m(("addCommom"in e?e.addCommom:S(N))(("decimalUi"in e?e.decimalUi:S(Le))(1/((Pe=e.positionInfo)==null?void 0:Pe.price),6))),1)],64))])],2)):z("",!0)]}),_:1},8,["value","class","min","max","marks"]))])])])])}const en=Me(Bt,[["render",ds],["__scopeId","data-v-794c305c"]]),vs=Ve({components:{Modal:Vo},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const s=h(()=>{var Y,T;const G=Math.ceil(((Y=e.positionInfo)==null?void 0:Y.poolUSD)/((T=e.positionInfo)==null?void 0:T.quoteUSD)*100);return console.log(G,"Pool Capacity Ratio"),Number(G)});return{sFixD:P,addCommom:N,ratio:s}}});const qo=e=>(Ee("data-v-78a51262"),e=e(),He(),e),ms=qo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),cs={class:"deposit-slider"},ps={class:"info-block"},fs=qo(()=>o("div",{class:"leabl"},"Current Deposit：",-1)),gs={class:"text"},ys={class:"info-block"},bs=qo(()=>o("div",{class:"leabl"},"Max Capacity：",-1)),ks={class:"text"};function hs(e,s,G,Y,T,A){const p=oo("Modal");return u(),Z(p,{width:"440px",visible:!0,footer:null,title:"Vault Capacity",onCancel:s[0]||(s[0]=C=>e.$emit("onClose"))},{closeIcon:fe(()=>[ms]),default:fe(()=>{var C,w,l,t;return[o("div",cs,[o("div",{class:"current-deposit",style:_o({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",ps,[fs,o("div",gs,m(("addCommom"in e?e.addCommom:S(N))(("sFixD"in e?e.sFixD:S(P))((C=e.positionInfo)==null?void 0:C.currentDeposit,2)))+" "+m((w=e.positionInfo)==null?void 0:w.quoteCoinInfo.symbol),1)]),o("div",ys,[bs,o("div",ks,m(("addCommom"in e?e.addCommom:S(N))(("sFixD"in e?e.sFixD:S(P))((l=e.positionInfo)==null?void 0:l.quoteUSD,2)))+" "+m((t=e.positionInfo)==null?void 0:t.quoteCoinInfo.symbol),1)])]}),_:1})}const on=Me(vs,[["render",hs],["__scopeId","data-v-78a51262"]]),_s=Ve({components:{AutoPoolV2PoolCapacity:on},setup(){const e=Je(),s=h(()=>e),G=ze(),Y=h(()=>G),T=Ze(),A=_();Ae(()=>[Y.value.positionInfoObj,T.params.id],([l,t])=>{console.log(l,"##positionInfoObj"),l&&!Xe(l)&&t&&(A.value=l[t],console.log(A.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const p=h(()=>{var l;return(l=A.value)==null?void 0:l.needReverse}),C=l=>{var t;return console.log(l,"info##"),(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||((t=s.value.tokensObj[l==null?void 0:l.address])==null?void 0:t.logo_url)||lo("/image/coins/sui-unknown.png")},w=_(!1);return{needReverse:p,positionInfo:A,getCoinIcon:C,addCommom:N,isShowModal:w}}});const $s=e=>(Ee("data-v-ad8a33e9"),e=e(),He(),e),ws={class:"pool-composition"},Is={class:"pool-composition-top"},Ss=$s(()=>o("span",null,"Vault Composition",-1)),As={class:"pool-composition-bottom"},Cs={class:"token-ratio"},Ps={class:"before-coin"},Ts={alt:""},qs={class:"after-coin"},Ns={alt:""},Rs={class:"token-num"},Bs={class:"num-box"},Ds={class:"num-box"};function Ls(e,s,G,Y,T,A){var l,t,B,f,n,v,d,b,I,r,L,O,H,ee,ae,le,k,y,K,te,se,ue,j,oe,ge,ye,re,q,D;const p=co,C=on,w=Po("image");return u(),$("div",ws,[o("div",Is,[Ss,Number((l=e.positionInfo)==null?void 0:l.quoteUSD)>0?(u(),$("div",{key:0,class:"pool-capacity",onClick:s[0]||(s[0]=ce=>e.isShowModal=!0)},"Vault Capacity")):z("",!0)]),o("div",As,[o("div",Cs,[o("div",Ps,[o("div",null,[W(p,{address:e.needReverse?(n=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:n.address:(B=(t=e.positionInfo)==null?void 0:t.token_a)==null?void 0:B.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),Qe(o("img",Ts,null,512),[[w,e.needReverse?e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_b):e.getCoinIcon((v=e.positionInfo)==null?void 0:v.token_a)]])]),o("span",null,m((b=e.positionInfo)==null?void 0:b.poolCoinARatio)+"%",1)]),o("div",qs,[o("span",null,m((I=e.positionInfo)==null?void 0:I.poolCoinBRatio)+"%",1),o("div",null,[Qe(o("img",Ns,null,512),[[w,e.needReverse?e.getCoinIcon((L=e.positionInfo)==null?void 0:L.token_a):e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_b)]]),W(p,{address:e.needReverse?(ae=(ee=e.positionInfo)==null?void 0:ee.token_a)==null?void 0:ae.address:(H=(O=e.positionInfo)==null?void 0:O.token_b)==null?void 0:H.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",Rs,[o("div",{class:"token-a-bg",style:_o({width:`${(le=e.positionInfo)==null?void 0:le.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:_o({width:`${(k=e.positionInfo)==null?void 0:k.poolCoinBRatio}%`})},null,4),o("div",Bs,[o("div",null,m(("addCommom"in e?e.addCommom:S(N))((y=e.positionInfo)==null?void 0:y.poolCoinANum))+" "+m(e.needReverse?(ue=(se=e.positionInfo)==null?void 0:se.token_b)==null?void 0:ue.symbol:(te=(K=e.positionInfo)==null?void 0:K.token_a)==null?void 0:te.symbol),1),o("div",null,"$"+m(("addCommom"in e?e.addCommom:S(N))((j=e.positionInfo)==null?void 0:j.poolCoinAUSD)),1)]),o("div",Ds,[o("div",null,m(("addCommom"in e?e.addCommom:S(N))((oe=e.positionInfo)==null?void 0:oe.poolCoinBNum))+" "+m(e.needReverse?(q=(re=e.positionInfo)==null?void 0:re.token_a)==null?void 0:q.symbol:(ye=(ge=e.positionInfo)==null?void 0:ge.token_b)==null?void 0:ye.symbol),1),o("div",null,"$"+m(("addCommom"in e?e.addCommom:S(N))((D=e.positionInfo)==null?void 0:D.poolCoinBUSD)),1)])])]),e.isShowModal?(u(),Z(C,{key:0,"position-info":e.positionInfo,onOnClose:s[1]||(s[1]=ce=>e.isShowModal=!1)},null,8,["position-info"])):z("",!0)])}const nn=Me(_s,[["render",Ls],["__scopeId","data-v-ad8a33e9"]]),Us=Ve({setup(){const e=Je(),s=h(()=>e),G=ze(),Y=h(()=>G),T=Ze(),A=_();Ae(()=>[Y.value.positionInfoObj,T.params.id],([t,B])=>{console.log(t,"##positionInfoObj"),t&&!Xe(t)&&B&&(A.value=t[B],console.log(A.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const p=h(()=>{var t;return(t=A.value)==null?void 0:t.needReverse}),C=t=>{var B;return console.log(t,"info##"),(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((B=s.value.tokensObj[t==null?void 0:t.address])==null?void 0:B.logo_url)||lo("/image/coins/sui-unknown.png")},w=To(),l=h(()=>w);return{needReverse:p,positionInfo:A,getCoinIcon:C,addCommom:N,wallet:l}}});const uo=e=>(Ee("data-v-61c3efe6"),e=e(),He(),e),Os={class:"my-liquidity"},Ms={class:"my-liquidity-top"},Fs=uo(()=>o("div",null,"My Liquidity",-1)),Vs=uo(()=>o("p",null,"My share of pool",-1)),Es={class:"my-liquidity-bottom"},Hs={class:"lp-token"},Ws=uo(()=>o("div",null,[o("span",null,"LP Token Balance ")],-1)),js={class:"lp-balance"},Xs={class:"token-num-content"},zs={class:"token-num token-a-num"},Gs={class:"logo"},Ys=["src"],Ks={class:"text"},Qs={class:"lp-logo"},Zs=["src"],Js=uo(()=>o("div",null,"Pooled Assets",-1)),xs={class:"token-num"},ei={class:"logo"},oi=["src"],ni={class:"text"},ti=uo(()=>o("div",{class:"token-num-content-bg"},null,-1));function si(e,s,G,Y,T,A){var C,w,l,t,B,f,n,v,d,b,I,r,L,O,H,ee,ae,le,k,y,K,te,se,ue,j,oe,ge,ye,re;const p=co;return u(),$("div",Os,[o("div",Ms,[Fs,o("div",null,[Vs,o("p",null,m(e.wallet.connected?(C=e.positionInfo)==null?void 0:C.myShare:"--")+"%",1)])]),o("div",Es,[o("div",Hs,[Ws,o("div",null,[o("span",js,m(e.wallet.connected?("addCommom"in e?e.addCommom:S(N))((w=e.positionInfo)==null?void 0:w.myLiquidity):"--")+" LP",1),o("span",null,m(e.wallet.connected?((l=e.positionInfo)==null?void 0:l.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in e?e.addCommom:S(N))((t=e.positionInfo)==null?void 0:t.myLiquidityUSD)}`:"<$0.01":"--"),1)])]),o("div",Xs,[o("div",zs,[o("div",Gs,[o("img",{src:e.needReverse?e.getCoinIcon((f=e.positionInfo)==null?void 0:f.token_b):e.getCoinIcon((B=e.positionInfo)==null?void 0:B.token_a),alt:""},null,8,Ys),W(p,{address:e.needReverse?(b=(d=e.positionInfo)==null?void 0:d.token_b)==null?void 0:b.address:(v=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:v.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",Ks,[o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:S(N))((I=e.positionInfo)==null?void 0:I.amountA):"--")+" "+m(e.needReverse?(H=(O=e.positionInfo)==null?void 0:O.token_b)==null?void 0:H.symbol:(L=(r=e.positionInfo)==null?void 0:r.token_a)==null?void 0:L.symbol),1),o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:S(N))((ee=e.positionInfo)==null?void 0:ee.myAmountAUSD):"--"),1)])]),o("div",Qs,[o("img",{src:e.getCoinIcon((ae=e.positionInfo)==null?void 0:ae.lpInfo),alt:""},null,8,Zs),Js]),o("div",xs,[o("div",ei,[o("img",{src:e.needReverse?e.getCoinIcon((k=e.positionInfo)==null?void 0:k.token_a):e.getCoinIcon((le=e.positionInfo)==null?void 0:le.token_b),alt:""},null,8,oi),W(p,{address:e.needReverse?(se=(te=e.positionInfo)==null?void 0:te.token_a)==null?void 0:se.address:(K=(y=e.positionInfo)==null?void 0:y.token_b)==null?void 0:K.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",ni,[o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:S(N))((ue=e.positionInfo)==null?void 0:ue.amountB):"--")+" "+m(e.needReverse?(ye=(ge=e.positionInfo)==null?void 0:ge.token_a)==null?void 0:ye.symbol:(oe=(j=e.positionInfo)==null?void 0:j.token_b)==null?void 0:oe.symbol),1),o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:S(N))((re=e.positionInfo)==null?void 0:re.myAmountBUSD):"--"),1)])]),ti])])])}const tn=Me(Us,[["render",si],["__scopeId","data-v-61c3efe6"]]),ii=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const li={},sn=e=>(Ee("data-v-fcbc716b"),e=e(),He(),e),ai={class:"status"},ui=sn(()=>o("img",{src:ii,alt:""},null,-1)),ri=sn(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),di=[ui,ri];function vi(e,s){return u(),$("div",ai,di)}const ln=Me(li,[["render",vi],["__scopeId","data-v-fcbc716b"]]),mi=Ve({components:{AutoPoolAddModal:Qo,AutoPoolV2PoolStatus:ln},setup(){const e=To(),s=_(!1),G=po(),Y=h(()=>G),T=h(()=>Y.value.chainName),A=h(()=>e),p=ze(),C=h(()=>p),w=Je(),l=h(()=>w),t=_(),B=Ze(),f=_(!1),n=_(!1);Ae(()=>[C.value.positionInfoObj,B.params.id],([c,M])=>{c&&!Xe(c)&&M&&(t.value=c[M],console.log(t.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const v=h(()=>{var c,M;return console.log((c=t.value)==null?void 0:c.needReverse,"##positionInfo.value?.needReverse"),(M=t.value)==null?void 0:M.needReverse}),d=_(),b=_(),I=_(),r=_(),L=_(!0),O=h(()=>A.value.assets&&d.value&&A.value.assets[d.value.address]?Fo(A.value.assets[d.value.address].balance,d.value.decimals):0),H=h(()=>A.value.assets&&b.value&&A.value.assets[b.value.address]?Fo(A.value.assets[b.value.address].balance,b.value.decimals):0),ee=c=>{c==="fromCoin"?(L.value=!0,I.value=O.value>0?d.value.symbol=="SUI"?new a(Number(O.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(O.value)).sub(new a(.05)).toString():String(O.value):""):(L.value=!1,r.value=H.value>0?b.value.symbol=="SUI"?new a(Number(H.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(H.value)).sub(new a(.05)).toString():String(H.value):"")},ae=c=>{c==="fromCoin"?(L.value=!0,I.value=O.value>0?P(new a(Number(O.value)).div(2).toString(),d.value.decimals).toString():""):(L.value=!1,r.value=H.value>0?P(new a(Number(H.value)).div(2).toString(),b.value.decimals).toString():"")},le=h(()=>T.value?zo(T.value):{}),k=h(()=>C.value.slippage),y=_("--"),K=_("--"),te=c=>{const M=new a(t.value.autoPoolPositionInfo.liquidity),ve=new a(c.toString());if(M.toNumber()>0&&ve.toNumber()>0){const U=ve.add(M);console.log("totalLiquidity:",ve.div(U).mul(100).toString());const $e=ve.div(U).mul(100).toNumber(),be=hn($e),i=be==-1?2:be+2,R=P(ve.div(U).mul(100).toNumber(),i);console.log(t.value.decimals,"##positionInfo.value.decimal");const ne=new a(1).div(new a(Math.pow(10,t.value.lpInfo.decimals))).toString();console.log(R,ne,"###288"),Number(R)<Number(ne)?y.value=`<${ne}`:y.value=R}else ve.toNumber()>0&&M.toNumber()<=0?y.value="100":y.value="--"},se=c=>{if(t.value.total_supply==0){K.value="";return}const M=new a(c.toString()),ve=new a(k.value).div(100);console.log(ve.toString(),"#slippageNum");const U=wo.get_lp_amount_by_liquidity({liquidity:t.value.liquidity,total_supply:t.value.total_supply},c.toString()),$e=new a(Math.pow(10,t.value.lpInfo.decimals)),be=new a(U).div($e).toString(),i=new a(be).mul(ve);console.log(U,i.toString(),"###409");const R=new a(be).sub(i);console.log(R.toString(),"##minLp"),console.log(M.toString(),U,be,"lpDecimalNum##"),K.value=P(R.toString(),t.value.decimals)},ue=_(!1),j=_(!1),oe=_(""),ge=_(),ye=_(!1),re=_(!1),q=_(!1),D=_(!1),ce=async()=>{if(console.log(q.value,D.value,"isOnlyA.value||isOnlyB.value"),console.log(t.value,"positionInfo.value###432"),!t.value)return;if(console.log(I.value,r.value,"####updateAmounts"),t.value.supportHaedalStake&&D.value&&r.value<10){re.value=!0;return}n.value=!1,ye.value=!0;const c=t.value.autoPoolPositionInfo.tick_lower_index,M=t.value.autoPoolPositionInfo.tick_upper_index,ve=Fe.sqrtPriceX64ToTickIndex(new me(t.value.current_sqrt_price));Fe.tickIndexToSqrtPriceX64(c),Fe.tickIndexToSqrtPriceX64(M),ve<c&&(v.value?ue.value=!0:j.value=!0),ve>M&&(v.value?j.value=!0:ue.value=!0);let U;if(console.log(I.value||r.value,"#fromCoinAmount.value || toCoinAmount.value"),I.value||r.value){L.value?U=new a(I.value).mul(Math.pow(10,d.value.decimals)).toString():U=new a(r.value).mul(Math.pow(10,b.value.decimals)).toString();let $e,be=L.value;if(console.log("执行##"),console.log(ve,c,M,"###520"),q.value||D.value){const F=new a(1);if(console.log(F.toString(),U,"decimalNum###"),new a(U).lte(F))return n.value=!0,!1;console.log(v.value?L.value:!L.value,"#needReverse.value?fixedFromCoin.value:!fixedFromCoin.value"),console.log(U,"##coinAmount"),console.log("1106###needReverse.value####",v.value),console.log("1106###calculateDepositSwapAmount###params###",{lowerTick:c,upperTick:M,curSqrtPrice:new me(t.value.current_sqrt_price),fix_amount_a:be,input_amount:U,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number(k.value)/100,decimals:q.value?d.value.decimals:b.value.decimals,use_Haedal_stake:t.value.supportHaedalStake&&D.value,shouldRequestStake:!1});const V=await je.calculateDepositSwapAmount({lowerTick:c,upperTick:M,curSqrtPrice:new me(t.value.current_sqrt_price),fix_amount_a:be,input_amount:U,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number(k.value)/100,decimals:q.value?d.value.decimals:b.value.decimals,request_id:U,use_Haedal_stake:t.value.supportHaedalStake&&D.value,shouldRequestStake:!1});if(console.log(V,"###swapResult"),console.log("1106###calculateDepositSwapAmount###result###",V),V=="HaedalStakeSuiAmountError"){f.value=!1,re.value=!0;return}else if(V){if(V.request_id!==U)return;re.value=!1,f.value=t.value.supportHaedalStake?!1:V.is_exceed,$e=new me(V.afterSqrtPrice),U=V.fixAmountA===be?new me(new a(U).sub(V.swapInAmount).toString()):new me(V.swapOutAmount),ge.value={swap_amount:V.swapInAmount,route_obj:V.route_obj,a2b:be,input_amount:U},be=V.fixAmountA;const de=t.value.token_a.decimals,X=t.value.token_b.decimals,E=new a(V.swapInAmount).div(new a(Math.pow(10,de))).toString(),x=P(new a(V.swapOutAmountLimit).div(new a(Math.pow(10,X))).toString(),X),we=v.value?t.value.token_b.symbol:t.value.token_a.symbol,he=v.value?t.value.token_a.symbol:t.value.token_b.symbol,Ie=`To deposit ${N(q.value?I.value:r.value)} ${q.value?we:he},
            ${N(E)} ${q.value?we:he}  will be traded for ${N(x)} ${q.value?he:we} added to the pool.`,Ye=`By depositing ${r.value} ${he}, ${N(x)} ${he} will be converted to ${we} via Haedal 
            liquid staking and added to the pool together.`;oe.value=t.value.supportHaedalStake&&D.value?Ye:Ie}else $e=t.value.current_sqrt_price,U=new me(U)}else f.value=!1,$e=t.value.current_sqrt_price,U=new me(U),oe.value="";console.log(ge,"##swapParams");let i,R,ne;const Q=le.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:d.value,tokenB:b.value,lowerTick:c,upperTick:M,coinAmount:U,iscoinA:be,roundUp:!0,slippage:Number(k.value)/100,curSqrtPrice:new me($e)});console.log("amount#",Q),i=Q.liquidityAmount,R=Q.tokenMaxA,ne=Q.tokenMaxB,!q.value&&!D.value&&(L.value?r.value=Number(ne)>0?ne:"":I.value=Number(R)>0?R:""),console.log(i.toString(),"liquidityAmount###"),te(i),se(i),ye.value=!1}};Ae(()=>t.value,c=>{c&&!Xe(c)&&(d.value=c==null?void 0:c.token_a,b.value=c==null?void 0:c.token_b,ue.value=!1,j.value=!1,ce())},{immediate:!0});const ie=h(()=>l.value.RATES),pe=h(()=>{var c,M,ve,U,$e,be,i,R,ne,Q;if((M=ie.value[(c=d.value)==null?void 0:c.address])!=null&&M.price&&((U=ie.value[(ve=b.value)==null?void 0:ve.address])!=null&&U.price)){console.log((be=ie.value[($e=d.value)==null?void 0:$e.address])==null?void 0:be.price,"RATES.value[fromCoin.value?.address]?.price");const F=new a(I.value||0).mul(new a((R=ie.value[(i=d.value)==null?void 0:i.address])==null?void 0:R.price)),V=new a(r.value||0).mul(new a((Q=ie.value[(ne=b.value)==null?void 0:ne.address])==null?void 0:Q.price));return F.add(V).toNumber()}else return"--"});Ae(()=>I.value,ao((c,M)=>{console.log(c,"##newVal"),c?ce():(y.value="--",r.value="",K.value="--")},500),{immediate:!0}),Ae(()=>r.value,ao((c,M)=>{c?ce():(I.value="",y.value="--",K.value="--")},500),{immediate:!0});const{t:g,locale:J}=Io(),Ce=h(()=>{var c,M;if(q.value||D.value){const ve=q.value?I.value:r.value,U=q.value?d.value:b.value;if((c=ie.value[U==null?void 0:U.address])!=null&&c.price)return new a(ve||0).mul(new a((M=ie.value[U==null?void 0:U.address])==null?void 0:M.price)).toNumber()}return 0}),ke=h(()=>{const c=Number(I.value)>Number(O.value),M=Number(r.value)>Number(H.value);return!I.value&&!r.value?g("button.enterAmount"):re.value?"Minimum deposit 10 SUI":c?g("button.insufficientBalance",{name:d.value.symbol}):M?g("button.insufficientBalance",{name:b.value.symbol}):f.value?g("button.insufficientLiquidity"):Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(pe.value)>Number(t.value.remainingTokenUSD)?"Exceeded the max capacity":n.value?g("button.enterAmount"):(console.log(Ce.value),"Add Liquidity")}),Ue=h(()=>{const c=Number(I.value)>Number(O.value),M=Number(r.value)>Number(H.value);return!!(!I.value&&!r.value||c||M||I.value<=0&&r.value<=0||f.value||ro.value!=="STATUS_RUNNING"||(console.log(pe.value,t.value.quoteUSD,"positionInfo.value.quoteUSD#"),Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(pe.value)>Number(t.value.remainingTokenUSD))||n.value||t.value.supportHaedalStake&&!D.value&&Ce.value>1e4||!t.value.supportHaedalStake&&Ce.value>1e4||re.value)}),qe=_(!0),{setIsShowSuccess:Re,setIsShowRejected:_e,setIsShowWaiting:Pe,setTransactionDesc:xe,setTransactionTxid:no,setPositiomNum:to}=G,je=Xo("Sui"),Ne=async()=>{var ne,Q;s.value=!1,qe.value=!0,no("");const c=`${N(I.value)} ${(ne=d.value)==null?void 0:ne.symbol}`,M=`${N(r.value)} ${(Q=b.value)==null?void 0:Q.symbol}`;xe(`Deposit ${I.value>0?c:""} ${r.value>0&&I.value>0?"and":""} ${r.value>0?M:""}`),Pe(!0);const ve=L.value,U=t.value.autoPoolPositionInfo.tick_lower_index,$e=t.value.autoPoolPositionInfo.tick_upper_index,be=Fe.sqrtPriceX64ToTickIndex(new me(t.value.current_sqrt_price));let i;L.value?i=new a(I.value).mul(Math.pow(10,d.value.decimals)).toString():i=new a(r.value).mul(Math.pow(10,b.value.decimals)).toString();const R=t.value.rewarderInfo.map(F=>F.coinAddress);console.log("1109###deposit###positionInfo###",t);try{const F={lowerTick:U,upperTick:$e,coinAmount:i,fix_amount_a:ve,slippage:Number(k.value)/100,curSqrtPrice:new me(t.value.current_sqrt_price),id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:"0x2::sui::SUI",rewarder_coin_types:R,swapParams:ge.value,isOnlyA:q.value,isOnlyB:D.value,currentTickIndex:be,decimal_b:t.value.coinB.decimals,request_id:i,use_Haedal_stake:t.value.supportHaedalStake&&D.value,shouldRequestStake:t.value.supportHaedalStake&&D.value,farming_pool:t.value.autoPoolPositionInfo.pool_id};console.log("1106###deposit###params###",F);const V=await je.deposit(F);console.log(V,"===>payloadAdd11111");const de=await A.value.currentWallet.signAndExecuteTransactionBlock(V);let X=le.value.handleTx(de);if(console.log("toAdd###tx###",X),X&&X.hash){no(X.hash),Pe(!1),Re(!0),console.log(t,"===>positionInfo");const E={title:"Supplied",desc:`Deposit ${I.value>0?c:""} ${r.value>0&&I.value>0?"and":""} ${r.value>0?M:""}`,hash:X.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${I.value>0?c:""} ${r.value>0&&I.value>0?"and":""} ${r.value>0?M:""}`};T.value!=="Aptos"&&(E.res=X.res),le.value.showTransitionPending(E),await le.value.watchTransaction(E)&&setTimeout(()=>{p.updatePositionItem(t.value.id),le.value.getAccount(A.value.address)},1e3),to()}else Pe(!1),_e(!0);I.value="",r.value="",qe.value=!1}catch(F){I.value="",r.value="",console.log("addError###",F),qe.value=!1,Pe(!1),_e(!0)}},yo=c=>{I.value="",r.value="",oe.value="",c=="only-a-b"?(q.value=!1,D.value=!1):c=="only-a"?(q.value=!0,D.value=!1):(D.value=!0,q.value=!1)},ro=h(()=>C.value.currentAutoPoolStatus),vo=_(),bo=()=>{vo.value=window.setInterval(()=>{(I.value||r.value)&&ce()},2e4)};mo(()=>{bo()}),Ao(()=>{window.clearInterval(vo.value)});const ko=cn(pn,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0});return{currentAutoPoolStatus:ro,wallet:A,positionInfo:t,isShowAddModal:s,needReverse:v,fromCoin:d,toCoin:b,fromCoinAmount:I,toCoinAmount:r,fromCoinBlance:O,toCoinBlance:H,fixedFromCoin:L,maxBtnSelect:ee,halfBtnSelect:ae,totalAmountUSD:pe,addCommom:N,shareOfPool:y,minimumReceivedLP:K,addLiquidityBtnText:ke,addLiquidityBtnDisabled:Ue,toAdd:Ne,showToCoinLock:j,showFromCoinLock:ue,isOnlyA:q,isOnlyB:D,onlyToken:yo,onlyText:oe,onlyTokenUSD:Ce,calculateLoading:ye,indicator:ko,depositTokenTips:"You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",depositHaedalTokenTips:"When you deposit in only SUI tokens, a part of your SUI amount will be converted to haSUI via Haedal liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved."}}});const Ge=e=>(Ee("data-v-79a11873"),e=e(),He(),e),ci={class:"auto-pool-add"},pi={class:"auto-pool-add-content"},fi={class:"liquidity-action-tab"},gi=Ge(()=>o("div",{class:"increase tab-active"},"Add",-1)),yi={class:"only-token"},bi=Ge(()=>o("div",null,"Deposit Amounts",-1)),ki=Ge(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),hi=Ge(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),_i={key:0,class:"card-item"},$i={key:1,class:"card-item"},wi=Ge(()=>o("span",null,"Pool Closed",-1)),Ii={key:0,class:"add-info"},Si={key:0,class:"only-text"},Ai={class:"total-amount"},Ci=Ge(()=>o("span",null,"Total Amount",-1)),Pi={key:0},Ti={class:"total-amount"},qi=Ge(()=>o("span",null,"Share of Pool",-1)),Ni={key:0},Ri={class:"total-amount"},Bi=Ge(()=>o("span",null,"Minimum Received LP",-1)),Di={key:0},Li={key:1,class:"add-info only-add-info"},Ui=Ge(()=>o("div",{class:"only-text"},"Single-asset deposit can't be higher than $10,000 at a time.",-1)),Oi=[Ui];function Mi(e,s,G,Y,T,A){var n,v,d,b,I,r,L,O,H,ee,ae,le,k,y,K,te,se,ue,j,oe,ge,ye,re;const p=fn,C=Yo,w=Ko,l=oo("AutoPoolV2PoolStatus"),t=So,B=jo,f=Qo;return u(),$("div",ci,[o("div",pi,[o("div",fi,[gi,o("div",{class:"remove",onClick:s[0]||(s[0]=Wo(q=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",yi,[bi,o("div",null,[o("div",{class:Te(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:s[1]||(s[1]=q=>e.onlyToken("only-a-b"))},[o("span",null,m(e.needReverse?(b=(d=e.positionInfo)==null?void 0:d.token_b)==null?void 0:b.symbol:(v=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:v.symbol)+" + "+m(e.needReverse?(O=(L=e.positionInfo)==null?void 0:L.token_a)==null?void 0:O.symbol:(r=(I=e.positionInfo)==null?void 0:I.token_b)==null?void 0:r.symbol),1)],2),o("div",{class:Te(["only-a",e.isOnlyA?"active-only":""]),onClick:s[2]||(s[2]=q=>e.onlyToken("only-a"))},[o("span",null,m(e.needReverse?(le=(ae=e.positionInfo)==null?void 0:ae.token_b)==null?void 0:le.symbol:(ee=(H=e.positionInfo)==null?void 0:H.token_a)==null?void 0:ee.symbol)+" only",1),W(p,{placement:"bottom","arrow-point-at-center":""},{title:fe(()=>[o("span",null,m(e.depositTokenTips),1)]),default:fe(()=>[ki]),_:1})],2),o("div",{class:Te(["only-b",e.isOnlyB?"active-only":""]),onClick:s[3]||(s[3]=q=>e.onlyToken("only-b"))},[o("span",null,m(e.needReverse?(te=(K=e.positionInfo)==null?void 0:K.token_a)==null?void 0:te.symbol:(y=(k=e.positionInfo)==null?void 0:k.token_b)==null?void 0:y.symbol)+" only",1),W(p,{placement:"bottom","arrow-point-at-center":""},{title:fe(()=>[o("span",null,m(e.positionInfo.supportHaedalStake?e.depositHaedalTokenTips:e.depositTokenTips),1)]),default:fe(()=>[hi]),_:1})],2)])]),o("div",{class:Te(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(u(),$("div",_i,[W(C,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":s[4]||(s[4]=q=>e.fromCoinAmount=q),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[5]||(s[5]=q=>e.maxBtnSelect("fromCoin")),onOnHalf:s[6]||(s[6]=q=>e.halfBtnSelect("fromCoin")),onOnInput:s[7]||(s[7]=q=>{e.fromCoinAmount=q}),onOnFocus:s[8]||(s[8]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(u(),Z(w,{key:0})):z("",!0)])):z("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(u(),$("div",$i,[W(C,{modelValue:e.toCoinAmount,"onUpdate:modelValue":s[9]||(s[9]=q=>e.toCoinAmount=q),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[10]||(s[10]=q=>e.maxBtnSelect("toCoin")),onOnHalf:s[11]||(s[11]=q=>e.halfBtnSelect("toCoin")),onOnInput:s[12]||(s[12]=q=>{e.toCoinAmount=q}),onOnFocus:s[13]||(s[13]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(u(),Z(w,{key:0})):z("",!0)])):z("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(u(),Z(l,{key:0})):z("",!0),(se=e.positionInfo)!=null&&se.is_pause?(u(),Z(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:fe(()=>[wi]),_:1})):e.wallet.connected?(u(),Z(t,{key:2,class:"big-btn liquidity-btn",disabled:e.addLiquidityBtnDisabled,onClick:s[14]||(s[14]=q=>e.isShowAddModal=!0)},{default:fe(()=>[o("span",null,m(e.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(u(),Z(t,{key:3,class:"big-btn liquidity-btn",onClick:s[15]||(s[15]=q=>e.wallet.setIsShowWalletModal(!0))},{default:fe(()=>[o("span",null,m(e.$t("button.connectWallet")),1)]),_:1})),(((ue=e.positionInfo)==null?void 0:ue.quoteUSD)==0||Number((j=e.positionInfo)==null?void 0:j.remainingTokenUSD)>Number(e.totalAmountUSD))&&(Number(e.fromCoinAmount)>0||Number(e.toCoinAmount)>0)?(u(),$(eo,{key:4},[e.onlyTokenUSD<=1e4?(u(),$("div",Ii,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount>0||e.isOnlyB&&e.toCoinAmount>0)?(u(),$("div",Si,m(e.onlyText),1)):z("",!0),o("div",Ai,[Ci,e.calculateLoading?(u(),Z(B,{key:1,paragraph:!1,active:""})):(u(),$("span",Pi,m(Number(e.totalAmountUSD)>0&&Number(e.totalAmountUSD)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:S(N))(e.totalAmountUSD,2)}`),1))]),o("div",Ti,[qi,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(u(),$("span",Ni,m(e.shareOfPool)+"%",1)):(u(),Z(B,{key:1,paragraph:!1,active:""}))]),o("div",Ri,[Bi,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(u(),$("span",Di,m(("addCommom"in e?e.addCommom:S(N))(e.minimumReceivedLP))+" "+m(e.needReverse?(oe=e.toCoin)==null?void 0:oe.symbol:(ge=e.fromCoin)==null?void 0:ge.symbol)+"-"+m(e.needReverse?(ye=e.fromCoin)==null?void 0:ye.symbol:(re=e.toCoin)==null?void 0:re.symbol),1)):(u(),Z(B,{key:1,paragraph:!1,active:""}))])])):e.positionInfo.supportHaedalStake&&!e.isOnlyB&&e.onlyTokenUSD>1e4||!e.positionInfo.supportHaedalStake&&e.onlyTokenUSD>1e4?(u(),$("div",Li,Oi)):z("",!0)],64)):z("",!0),e.isShowAddModal?(u(),Z(f,{key:5,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:s[16]||(s[16]=q=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):z("",!0)])}const Fi=Me(mi,[["render",Mi],["__scopeId","data-v-79a11873"]]),Vi=Ve({components:{AutoPoolRemoveModal:Zo,AutoPoolV2PoolStatus:ln},setup(){const e=To(),s=h(()=>e),G=po(),Y=h(()=>G),T=h(()=>f.value.slippage),A=h(()=>Y.value.chainName),p=_n(),C=h(()=>p),w=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],l=_(25),t=Ze(),B=ze(),f=h(()=>B),n=h(()=>(console.log(f.value.positionInfoObj[t.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),f.value.positionInfoObj[t.params.id])),v=h(()=>{var i;return(i=n.value)==null?void 0:i.needReverse}),d=_(),b=_(),I=_(!1),r=_(),L=h(()=>{var i;return(i=n.value)==null?void 0:i.myLiquidity}),O=_(!0),H=h(()=>A.value?zo(A.value):{}),ee=_(),ae=_(),le=Xo("Sui"),k=_(""),y=_(""),K=_("--"),te=_(!1),se=_(!1),ue=_(),j=_(!0),oe=_(),ge=Je(),ye=h(()=>ge),re=h(()=>ye.value.RATES),q=_(!1),D=async()=>{if(O.value||!n.value||n.value.positionLiquidity==0)return;ae.value=!1,q.value=!0;const i=n.value.autoPoolPositionInfo.tick_lower_index,R=n.value.autoPoolPositionInfo.tick_upper_index,ne=Fe.sqrtPriceX64ToTickIndex(new me(n.value.current_sqrt_price));ne<i&&(v.value?te.value=!0:se.value=!0),ne>R&&(v.value?se.value=!0:te.value=!0);let Q;if(console.log(k.value||y.value,"#fromCoinAmount.value || toCoinAmount.value"),k.value||y.value){j.value?Q=new a(k.value).mul(Math.pow(10,d.value.decimals)).toString():Q=new a(y.value).mul(Math.pow(10,b.value.decimals)).toString();let F,V=j.value;if(g.value||J.value){g.value?Number(k.value)/Number(c.value):Number(y.value)/Number(c.value);const x=await le.calculateRemoveSwapAmount({lowerTick:i,upperTick:R,curSqrtPrice:new me(n.value.current_sqrt_price),fix_amount_a:V,receiveAmount:Q,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(T.value)/100,decimals:g.value?d.value.decimals:b.value.decimals,liquidity:k.value==c.value||y.value==c.value?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:Q});if(console.log(x,"###swapResult"),x){if(x.request_id!==Q)return;ee.value=x.is_exceed,Q=new me(x.swapOutAmount),F=n.value.current_sqrt_price,ue.value={swap_amount:x.swapInAmount,liquidity:x.liquidity,a2b:!V,route_obj:x.route_obj},V=!V;const we=n.value.token_a.decimals,he=n.value.token_b.decimals,Ie=new a(x.swapInAmount).div(new a(Math.pow(10,we))).toString(),Ye=P(new a(x.swapOutAmountLimit).div(new a(Math.pow(10,he))).toString(),he),Se=v.value?n.value.token_b.symbol:n.value.token_a.symbol,Be=v.value?n.value.token_a.symbol:n.value.token_b.symbol;oe.value=k.value==c.value||y.value==c.value?`To withdraw ${N(g.value?k.value:y.value)} ${g.value?Se:Be},
          ${N(g.value?n.value.amountB:n.value.amountA)} ${g.value?Be:Se} 
           in the pool will be traded for ${Ie} ${g.value?Se:Be}`:`To withdraw ${N(g.value?k.value:y.value)} ${g.value?Se:Be},
          ${N(Ie)} ${g.value?Be:Se}  in the pool will be traded for ${N(Ye)} ${g.value?Se:Be}`}else{ae.value=!0,oe.value="";return}}else ee.value=!1,F=n.value.current_sqrt_price,Q=new me(Q);console.log(F,"##curSqrtPrice"),console.log("执行了吗##");const{liquidityAmount:de,tokenMaxA:X,tokenMaxB:E}=H.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:d.value,tokenB:b.value,lowerTick:i,upperTick:R,coinAmount:Q,iscoinA:V,roundUp:!1,slippage:Number(T.value)/100,curSqrtPrice:new me(F)});if(console.log(n.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(E.toString(),X.toString(),n.value,"###323"),!g.value&&!J.value&&(j.value?y.value=Number(E)>0?E:"":k.value=Number(X)>0?X:""),(g.value||J.value)&&(Number(k.value)>=Number(c.value)||Number(y.value)>=Number(c.value))){console.log("执行这里了吗"),r.value=n.value.myLiquidity;const x=new a(100);K.value=new a(n.value.myLiquidity).mul(new a(Math.pow(10,n.value.lpInfo.decimals))).toString(),ce.value=de.toString(),l.value=x.toNumber()}else{console.log("执行这里了吗1");const x=wo.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},de.toString()),we=new a(x).div(new a(Math.pow(10,n.value.lpInfo.decimals))).toString();console.log(we,L.value,de.toString(),n.value.liquidity,n.value.total_supply,"##lpBalance.value");const he=new a(we).div(new a(L.value)).mul(100);console.log(we,L.value,he.toNumber(),"lp##"),r.value=new a(L.value).mul(he.div(100)).toString(),K.value=x,ce.value=de.toString(),l.value=he.toNumber()}q.value=!1}},ce=_(),ie=h(()=>{var i;return(i=n==null?void 0:n.value)==null?void 0:i.amountA}),pe=h(()=>{var i;return(i=n==null?void 0:n.value)==null?void 0:i.amountB}),g=_(!1),J=_(!1),Ce=h(()=>{var V,de,X,E;const i=(de=re.value[(V=d==null?void 0:d.value)==null?void 0:V.address])==null?void 0:de.price,R=(E=re.value[(X=b==null?void 0:b.value)==null?void 0:X.address])==null?void 0:E.price;console.log(i,R,k.value,y.value,"####totalWithdraw");let ne=k.value!=="--"&&k.value!==""?k.value:0,Q=y.value!=="--"&&y.value!==""?y.value:0,F;return i&&R&&(g.value||J.value?F=new a(g.value?ne:Q).mul(new a(g.value?i:R)).toString():(F=new a(ne).mul(new a(i)).add(new a(Q).mul(new a(R))).toString(),console.log(F,"result##"))),F>0&&F<.01?"<$0.01":`$${N(P(F,2))}`}),ke=async i=>{var we,he,Ie,Ye,Se,Be,ho,Bo,Do,Lo,Uo;if(!O.value)return;O.value=!0,ae.value=!1,(he=(we=n.value)==null?void 0:we.token_a)==null||he.decimals,(Ye=(Ie=n.value)==null?void 0:Ie.token_b)==null||Ye.decimals;const R=(Se=n.value)==null?void 0:Se.tick_lower_index,ne=(Be=n.value)==null?void 0:Be.tick_upper_index;Fe.tickIndexToSqrtPriceX64(R),Fe.tickIndexToSqrtPriceX64(ne);const Q=(Bo=(ho=n.value)==null?void 0:ho.autoPoolPositionInfo)==null?void 0:Bo.tick_lower_index,F=(Lo=(Do=n.value)==null?void 0:Do.autoPoolPositionInfo)==null?void 0:Lo.tick_upper_index,V=Fe.sqrtPriceX64ToTickIndex(new me((Uo=n==null?void 0:n.value)==null?void 0:Uo.current_sqrt_price));V<Q&&(v.value?te.value=!0:se.value=!0),V>F&&(v.value?se.value=!0:te.value=!0);let de="",X,E;console.log(i.value,"##item.value"),console.log(E,"##coinAmount");let x=j.value;if(console.log("执行##"),g.value||J.value&&!te.value&&!se.value){if(g.value){const Ke=new a(c.value).mul(Math.pow(10,d.value.decimals)).mul(i.value).toString();console.log(Ke,"##amount"),E=P(Ke,0),k.value=P(new a(c.value).mul(i.value).toString(),d.value.decimals)}if(J.value){const Ke=new a(c.value).mul(i.value).mul(Math.pow(10,b.value.decimals)).toString();E=P(Ke,0),y.value=P(new a(c.value).mul(i.value).toString(),b.value.decimals)}console.log(k.value,"##fromCoinAmount.value");const De=await le.calculateRemoveSwapAmount({lowerTick:R,upperTick:ne,curSqrtPrice:new me(n.value.current_sqrt_price),fix_amount_a:x,receiveAmount:E,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(T.value)/100,decimals:g.value?d.value.decimals:b.value.decimals,liquidity:i.value==1?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:E});if(console.log(De,"###swapResult536"),De){if(De.request_id!==E)return;ee.value=De.is_exceed,E=new me(De.swapOutAmount),n.value.current_sqrt_price,ue.value={swap_amount:De.swapInAmount,liquidity:De.liquidity,route_obj:De.route_obj,a2b:!x},x=!x;const Ke=n.value.token_a.decimals,Oo=n.value.token_b.decimals,an=new a(De.swapInAmount).div(new a(Math.pow(10,Ke))).toString(),Mo=P(new a(De.swapOutAmountLimit).div(new a(Math.pow(10,Oo))).toString(),Oo),so=v.value?n.value.token_b.symbol:n.value.token_a.symbol,io=v.value?n.value.token_a.symbol:n.value.token_b.symbol;oe.value=i.value==1?`To withdraw ${N(g.value?k.value:y.value)} ${g.value?so:io},
          ${N(g.value?n.value.amountB:n.value.amountA)} ${g.value?io:so}  in the pool will be traded for ${N(Mo)} ${g.value?so:io}`:`To withdraw ${N(g.value?k.value:y.value)} ${g.value?so:io},
          ${N(an)} ${g.value?io:so}  in the pool will be traded for ${N(Mo)} ${g.value?so:io}`,de=De.liquidity}else n.value.current_sqrt_price,E=new me(E),oe.value="",ae.value=!0;console.log(X,"result###"),K.value=new a(n.value.myLiquidity).mul(new a(i.value)).toString(),console.log(n.value,n.value.liquidity,de,K.value,"###positionInfo.value.liquidity"),console.log(K.value,"##lpTokenAmount.value"),r.value=new a(K.value),ce.value=de}else{ee.value=!1;const De=new a(ie.value).mul(Math.pow(10,d.value.decimals)).mul(i.value).toString();E=P(De,0),k.value=P(new a(ie.value).mul(i.value).toString(),d.value.decimals);const Ke=new a(pe.value).mul(i.value).mul(Math.pow(10,b.value.decimals)).toString();E=P(Ke,0),y.value=P(new a(pe.value).mul(i.value).toString(),b.value.decimals),n.value.current_sqrt_price,E=new me(E),i.value!==1?X=new a(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(i.value).toString():X=new a(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),r.value=new a(X).div(Math.pow(10,n.value.lpInfo.decimals)),de=wo.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},X),K.value=P(X,0),ce.value=P(de,0),console.log(de,"###newLiquidity525")}};Ae(l,ao((i,R)=>{i!==R&&(Number(i)>100?l.value=100:i&&n.value?(console.log("687===>"),l.value=i,ke({value:l.value/100})):(k.value="",y.value=""))},300)),Ae(()=>k.value,ao((i,R)=>{i?D():!g.value&&!J.value&&(y.value="",l.value=0)},500),{immediate:!0}),Ae(()=>y.value,ao((i,R)=>{i?D():!g.value&&!J.value&&(k.value="",l.value=0)},500),{immediate:!0});const Ue=Co(),{setIsShowSuccess:qe,setIsShowRejected:Re,setIsShowWaiting:_e,setTransactionDesc:Pe,setTransactionTxid:xe,setPositiomNum:no,setTransactionDescText:to}=G,je=_(!1),{t:Ne}=Io(),yo=async()=>{var we,he;je.value=!0,xe("");const i=Number(k.value)>0?`${N(k.value,d.value.decimals)} ${d.value.symbol}`:"",R=Number(y.value)>0?`${N(y.value,b.value.decimals)} ${b.value.symbol}`:"";console.log(i,R,"###transactionDescTo"),Pe(Ne("tips.removeLiquidiyText",{from:v.value?R:i,and:Number(k.value)>0&&Number(y.value)>0?"and":"",to:v.value?i:R})),_e(!0);const ne=Ne("modal.removeLiquidityText2");to(ne);const Q=n.value.autoPoolPositionInfo.tick_lower_index,F=n.value.autoPoolPositionInfo.tick_upper_index,V=Fe.tickIndexToSqrtPriceX64(Q),de=Fe.tickIndexToSqrtPriceX64(F),X=n.value.rewarderInfo.map(Ie=>Ie.coinAddress);console.log(K.value,"##lpTokenAmount.value431");let E;j.value?E=new a(k.value).mul(Math.pow(10,d.value.decimals)).toString():E=new a(y.value).mul(Math.pow(10,b.value.decimals)).toString(),console.log();const x={lowerSqrtPrice:V,upperSqrtPrice:de,lpTokenAmount:K.value,liquidity:ce.value,curSqrtPrice:new me(n.value.object.current_sqrt_price),slippage:Number(T.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:X,swapParams:ue.value,fix_amount_a:j.value,isOnlyA:!te.value&&!se.value?g.value:!1,isOnlyB:!se.value&&!te.value?J.value:!1,lowerTick:Q,upperTick:F,receiveAmount:E,sliderVal:l.value,positionInfo:n.value,maxLiquidity:n.value.positionLiquidity,farming_pool:n.value.autoPoolPositionInfo.pool_id};try{const Ie=await le.remove(x);console.log(Ie,"移除流动性payload");const Ye=await s.value.currentWallet.signAndExecuteTransactionBlock(Ie);let Se=H.value.handleTx(Ye);if(console.log("0331###remove###tx####",Se),Se&&Se.hash){xe(Se.hash),_e(!1),qe(!0);const Be={title:Ne("common.removeLiquidity"),desc:"",hash:Se.hash,descTransactions:`Remove ${i} ${Number(k.value)>0&&Number(y.value)>0?"and":""} ${R} from the pool`,sender:s.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${k.value} ${(we=d.value)==null?void 0:we.symbol} and ${y.value} ${(he=b.value)==null?void 0:he.symbol}`};Be.res=Se.res,H.value.showTransitionPending(Be),await H.value.watchTransaction(Be)&&(k.value="",y.value="",r.value="",l.value=0,setTimeout(()=>{B.updatePositionItem(n.value.id),H.value.getAccount(s.value.address)},1e3),Number(l.value)==100&&t.name=="auto-pool-detail"&&Ue.push("/vaults"))}else _e(!1),Re(!0);je.value=!1}catch(Ie){console.log("Remove error",Ie),je.value=!1,_e(!1),Re(!0)}};Ae(()=>n.value,(i,R)=>{i&&!Xe(i)&&(d.value=i==null?void 0:i.token_a,b.value=i==null?void 0:i.token_b,console.log("触发###"),(!R||R&&R.address!==i.address)&&(l.value=l.value>0?l.value:25,ke({value:l.value/100})),R&&R.current_sqrt_price!==i.current_sqrt_price&&(O.value?ke({value:l.value/100}):D()))},{immediate:!0});const ro=h(()=>{if(n.value.positionLiquidity==0)return"Insufficient LP Amount";const i=Number(r.value)>Number(L.value);return!k.value&&!y.value||!r.value||r.value<=0||!k.value&&g.value||!y.value&&J.value?Ne("button.enterAmount"):i?"Invalid Amount":ee.value?Ne("button.insufficientLiquidity"):ae.value?Ne("button.enterAmount"):(console.log(k.value,c.value,y.value,"856##"),g.value&&Number(k.value)>Number(c.value)||J.value&&Number(y.value)>Number(c.value)?"Invalid Amount":Ne("button.remove"))}),vo=h(()=>{if(n.value.positionLiquidity==0)return!0;const i=Number(r.value)>Number(L.value);return!!(!k.value&&!y.value||Number(k.value)<=0&&g.value||Number(y.value)<=0&&J.value||!r.value||r.value<=0||i||ee.value||U.value!=="STATUS_RUNNING"||ae.value||g.value&&Number(k.value)>Number(c.value)||J.value&&Number(y.value)>Number(c.value))}),bo=i=>(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||lo("/image/coins/sui-unknown.png"),ko=i=>{k.value="",y.value="",O.value=!0,oe.value="",i=="only-a"?(g.value=!g.value,J.value=!1,j.value=!0):(J.value=!J.value,g.value=!1,j.value=!1)},No=i=>{O.value=!0,l.value=100,i==="fromCoin"?j.value=!0:j.value=!1},Ro=i=>{O.value=!0,l.value=50,i==="fromCoin"?j.value=!0:j.value=!1},c=_(),M=async()=>{const i=n.value.token_a.decimals,R=n.value.token_b.decimals,ne=new a(ie.value).mul(new a(Math.pow(10,i))).toNumber(),Q=new a(pe.value).mul(new a(Math.pow(10,R))).toNumber(),F=g.value?Q:ne,V=g.value?b.value.address===n.value.token_a.address:d.value.address===n.value.token_a.address;try{const de=await C.value.swapRouterContract.getSwapRouter(g.value?b:d,g.value?d:b,F,!0,Number(T.value)/100,"",void 0,[{pool_id:n.value.address,tick_lower:n.value.autoPoolPositionInfo.tick_lower_index,tick_upper:n.value.autoPoolPositionInfo.tick_upper_index,delta_liquidity:Number(n.value.positionLiquidity),is_increase:!1}]),X=new a(de.amountOut);c.value=X.sub(X.mul(Number(T.value)/100)).add(new a(g.value?ie.value:pe.value)).toString()}catch{if(g.value||J.value){console.log(F,"##receiveAmount");let X=await H.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:V,byAmountIn:!0,amount:F});console.log(X,X.estimatedAmountOut,i,R,"##preSwapRes");const E=new a(X.estimatedAmountOut);c.value=E.sub(E.mul(Number(T.value)/100)).add(new a(g.value?ie.value:pe.value)).toString(),console.log("转换之后数量:",X.estimatedAmountOut),console.log("转换之后滑点数量:",E.mul(Number(T.value)/100).toNumber()),console.log("原有数量减滑点数量:",E.sub(E.mul(Number(T.value)/100)).toNumber()),console.log("fromCoin原有数量:",ie.value),console.log(c.value,"###onlyTokenBalance.value"),g.value?k.value=P(new a(c.value).mul(l.value/100).toString(),d.value.decimals):y.value=P(new a(c.value).mul(l.value/100).toString(),b.value.decimals),ke({value:l.value/100})}}ke({value:l.value/100})};Ae(()=>[g.value,J.value,ie.value,pe.value],([i,R])=>{i||R?M():ke({value:l.value/100})},{immediate:!0});const ve=i=>`${i}%`,U=h(()=>f.value.currentAutoPoolStatus),$e=_(),be=()=>{$e.value=window.setInterval(()=>{(k.value||y.value)&&!O.value?D():ke({value:l.value/100})},2e4)};return mo(()=>{be()}),Ao(()=>{window.clearInterval($e.value)}),{removeLiquidityBtnText:ro,removeLiquidityBtnDisabled:vo,wallet:s,ratioArr:w,positionInfo:n,isShowRemoveModal:I,needReverse:v,fromCoin:d,toCoin:b,lpAmount:r,lpBalance:L,sliderVal:l,sFixD:P,isSlider:O,fromCoinAmount:k,toCoinAmount:y,setPercent:ke,toRemove:yo,addCommom:N,getCoinIcon:bo,isOnlyA:g,isOnlyB:J,onlyToken:ko,fixedFromCoin:j,maxBtnSelect:No,halfBtnSelect:Ro,fromCoinBlance:ie,toCoinBlance:pe,showFromCoinLock:te,showToCoinLock:se,removeText:oe,onlyTokenBalance:c,totalWithdraw:Ce,formatter:ve,currentAutoPoolStatus:U,calculateLoading:q}}});const go=e=>(Ee("data-v-992ae66a"),e=e(),He(),e),Ei={class:"auto-pool-add"},Hi={class:"auto-pool-add-content"},Wi={class:"liquidity-action-tab"},ji=go(()=>o("div",{class:"remove tab-active"},"Remove",-1)),Xi={key:0,class:"card-item"},zi={key:1,class:"card-item"},Gi={class:"remove-ratio"},Yi={class:"remove-ratio-select"},Ki={key:0,class:"ratio"},Qi={key:1,class:"ratio"},Zi={class:"ratio-list"},Ji=["onClick"],xi=go(()=>o("span",null,"Pool Closed",-1)),el={key:4,class:"remove-info"},ol={key:0,class:"remove-text total-amount"},nl={class:"total-amount"},tl=go(()=>o("span",null,"Total Withdraw",-1)),sl={key:0},il={class:"total-amount"},ll=go(()=>o("span",null,"LP Burn Amount",-1)),al={key:0};function ul(e,s,G,Y,T,A){var n,v,d,b,I;const p=Yo,C=Ko,w=Ho,l=oo("AutoPoolV2PoolStatus"),t=So,B=jo,f=Zo;return u(),$("div",Ei,[o("div",Hi,[o("div",Wi,[o("div",{class:"increase",onClick:s[0]||(s[0]=Wo(r=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),ji]),o("div",{class:Te(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(u(),$("div",Xi,[W(p,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":s[1]||(s[1]=r=>e.fromCoinAmount=r),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:s[2]||(s[2]=r=>e.maxBtnSelect("fromCoin")),onOnHalf:s[3]||(s[3]=r=>e.halfBtnSelect("fromCoin")),onOnInput:s[4]||(s[4]=r=>{e.isSlider=!1,e.fromCoinAmount=r}),onOnFocus:s[5]||(s[5]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(u(),Z(C,{key:0})):z("",!0)])):z("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(u(),$("div",zi,[W(p,{modelValue:e.toCoinAmount,"onUpdate:modelValue":s[6]||(s[6]=r=>e.toCoinAmount=r),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:s[7]||(s[7]=r=>e.maxBtnSelect("toCoin")),onOnHalf:s[8]||(s[8]=r=>e.halfBtnSelect("toCoin")),onOnInput:s[9]||(s[9]=r=>{e.isSlider=!1,e.toCoinAmount=r}),onOnFocus:s[10]||(s[10]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(u(),Z(C,{key:0})):z("",!0)])):z("",!0)],2),o("div",Gi,[o("div",Yi,[Number(e.lpBalance)>=Number(e.lpAmount)?(u(),$("div",Ki,m(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:S(P))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:S(P))(e.sliderVal,2))+"% ",1)):(u(),$("div",Qi,"--")),o("div",Zi,[(u(!0),$(eo,null,Eo(e.ratioArr,(r,L)=>(u(),$("div",{key:L,class:Te(["ratio-item",e.sliderVal==r.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=r.value}},m(r.name),11,Ji))),128))])]),W(w,{value:e.sliderVal,"onUpdate:value":s[11]||(s[11]=r=>e.sliderVal=r),"tip-formatter":e.formatter,onChange:s[12]||(s[12]=r=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(u(),Z(l,{key:0})):z("",!0),(n=e.positionInfo)!=null&&n.is_pause?(u(),Z(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:fe(()=>[xi]),_:1})):e.wallet.connected?(u(),Z(t,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:s[13]||(s[13]=r=>e.toRemove())},{default:fe(()=>[o("span",null,m(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(u(),Z(t,{key:3,class:"big-btn liquidity-btn",onClick:s[14]||(s[14]=r=>e.wallet.setIsShowWalletModal(!0))},{default:fe(()=>[o("span",null,m(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?z("",!0):(u(),$("div",el,[e.removeText&&(e.isOnlyA&&Number(e.fromCoinAmount)>0||e.isOnlyB&&Number(e.toCoinAmount)>0)?(u(),$("div",ol,m(e.removeText),1)):z("",!0),o("div",nl,[tl,e.calculateLoading?(u(),Z(B,{key:1,paragraph:!1,active:""})):(u(),$("span",sl,m(e.totalWithdraw),1))]),o("div",il,[ll,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(u(),$("span",al,m(("addCommom"in e?e.addCommom:S(N))(("sFixD"in e?e.sFixD:S(P))(e.lpAmount,e.positionInfo.decimals)))+" "+m(e.needReverse?(v=e.toCoin)==null?void 0:v.symbol:(d=e.fromCoin)==null?void 0:d.symbol)+"-"+m(e.needReverse?(b=e.fromCoin)==null?void 0:b.symbol:(I=e.toCoin)==null?void 0:I.symbol),1)):(u(),Z(B,{key:1,paragraph:!1,active:""}))])])),e.isShowRemoveModal?(u(),Z(f,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:s[15]||(s[15]=r=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):z("",!0)])}const rl=Me(Vi,[["render",ul],["__scopeId","data-v-992ae66a"]]),dl=Ve({components:{AutoPoolV2Info:xo,AutoPoolV2PositionRange:en,AutoPoolV2PoolComposition:nn,AutoPoolV2PoolLiquidity:tn,AutoPoolV2PoolAdd:Fi,AutoPoolV2PoolRemove:rl},setup(){const e=ze();Je();const s=po(),G=h(()=>s),Y=h(()=>e),T=Ze(),A=_();Ae(()=>[Y.value.positionInfoObj,T.params.id],([l,t])=>{l&&!Xe(l)&&t&&(A.value=l[t],console.log(A.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const p=async()=>{console.log("重新获取数据"),e.getAutoPoolAPY(),e.getVault(T.params.id,"refresh")},C=_();Ae(()=>T.query.action,l=>{l&&(C.value=l)},{immediate:!0}),mo(()=>{e.getVault(T.params.id,!1)}),h(()=>G.value.chainName),Co();const w=h(()=>Y.value.autoPoolLoading);return{clickRefresh:p,currentTab:C,positionInfo:A,autoPoolLoading:w}}});const vl={class:"auto-pool-detail-v2"},ml={class:"detail-top"},cl={class:"detail-bottom pc-detail"},pl={class:"detail-bottom-left"},fl={class:"detail-bottom-right"},gl={class:"h5-detail"},yl={key:0,class:"loading-global"};function bl(e,s,G,Y,T,A){const p=Vn,C=xo,w=en,l=nn,t=tn,B=oo("AutoPoolV2PoolAdd"),f=oo("AutoPoolV2PoolRemove"),n=gn;return u(),$("div",vl,[o("div",ml,[W(p,{"pool-info":e.positionInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"]),W(C)]),o("div",cl,[o("div",pl,[W(w),W(l),W(t)]),o("div",fl,[e.currentTab=="deposit"?(u(),Z(B,{key:0,onChangeCurrentTab:s[0]||(s[0]=v=>e.currentTab="remove")})):(u(),Z(f,{key:1,onChangeCurrentTab:s[1]||(s[1]=v=>e.currentTab="deposit")}))])]),o("div",gl,[e.currentTab=="deposit"?(u(),Z(B,{key:0,onChangeCurrentTab:s[2]||(s[2]=v=>e.currentTab="remove")})):(u(),Z(f,{key:1,onChangeCurrentTab:s[3]||(s[3]=v=>e.currentTab="deposit")})),W(w),W(l),W(t)]),e.autoPoolLoading?(u(),$("div",yl,[W(n)])):z("",!0)])}const Hl=Me(dl,[["render",bl],["__scopeId","data-v-5f6b7979"]]);export{Hl as default};
