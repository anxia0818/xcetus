var Je=Object.defineProperty;var He=(e,t,i)=>t in e?Je(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var D=(e,t,i)=>(He(e,typeof t!="symbol"?t+"":t,i),i);import{T as b,J as Q,K as Ze,L as A,M as V,N as ke,O as Qe,P as Ye,Q as qe,E as X,R as we,S as _e}from"./sha256.7d0a8a24.js";import{D as $,f as p}from"./pool.03e52917.js";var et=Object.defineProperty,tt=(e,t,i)=>t in e?et(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,it=(e,t,i)=>(tt(e,typeof t!="symbol"?t+"":t,i),i),te=5*60*1e3,v=24*60*60*1e3;function M(e){return Date.parse(new Date().toString())+e}var ie=class{constructor(e,t=0){D(this,"overdueTime");D(this,"value");this.overdueTime=t,this.value=e}isValid(){return this.value===null?!1:this.overdueTime===0?!0:!(Date.parse(new Date().toString())>this.overdueTime)}};$.config({precision:64,rounding:$.ROUND_DOWN,toExpNeg:-64,toExpPos:64});var N=$,K=class extends Error{constructor(t,i){super(t);D(this,"message");D(this,"errorCode");this.message=t,this.errorCode=i}static isClmmpoolsErrorCode(t,i){return t instanceof K&&t.errorCode===i}},E=new p(0),ue=new p(1),Ie=new p(2);Ie.pow(new p(128));var Oe=Ie.pow(new p(64)).sub(ue),nt=Ie.pow(new p(128)).sub(ue),W=class{static toX64_BN(e){return e.mul(new p(2).pow(new p(64)))}static toX64_Decimal(e){return e.mul(N.pow(2,64))}static toX64(e){return new p(e.mul(N.pow(2,64)).floor().toFixed())}static fromX64(e){return new N(e.toString()).mul(N.pow(2,-64))}static fromX64_Decimal(e){return e.mul(N.pow(2,-64))}static fromX64_BN(e){return e.div(new p(2).pow(new p(64)))}static shiftRightRoundUp(e){let t=e.shrn(64);return e.mod(Oe).gt(E)&&(t=t.add(ue)),t}static divRoundUp(e,t){return e.mod(t).eq(E)?e.div(t):e.div(t).add(new p(1))}static subUnderflowU128(e,t){return e.lt(t)?e.sub(t).add(nt):e.sub(t)}static checkUnsignedSub(e,t){const i=e.sub(t);if(i.isNeg())throw new K("Unsigned integer sub overflow","UnsignedIntegerOverflow");return i}static checkMul(e,t,i){const n=e.mul(t);if(this.isOverflow(n,i))throw new K("Multiplication overflow","MultiplicationOverflow");return n}static checkMulDivFloor(e,t,i,n){if(i.eq(E))throw new K("Devide by zero","DivideByZero");const s=e.mul(t).div(i);if(this.isOverflow(s,n))throw new K("Multiplication div overflow","MulDivOverflow");return s}static checkMulDivCeil(e,t,i,n){if(i.eq(E))throw new K("Devide by zero","DivideByZero");const s=e.mul(t).add(i.sub(ue)).div(i);if(this.isOverflow(s,n))throw new K("Multiplication div overflow","MulDivOverflow");return s}static checkMulDivRound(e,t,i,n){if(i.eq(E))throw new K("Devide by zero","DivideByZero");const s=e.mul(t.add(i.shrn(1))).div(i);if(this.isOverflow(s,n))throw new K("Multiplication div overflow","MulDivOverflow");return s}static checkMulShiftRight(e,t,i,n){const s=e.mul(t).div(new p(2).pow(new p(i)));if(this.isOverflow(s,n))throw new K("Multiplication shift right overflow","MulShiftRightOverflow");return s}static checkMulShiftRight64RoundUpIf(e,t,i,n){const s=e.mul(t),a=n&&s.and(Oe).gt(E)?s.shrn(64).add(ue):s.shrn(64);if(this.isOverflow(a,i))throw new K("Multiplication shift right overflow","MulShiftRightOverflow");return a}static checkMulShiftLeft(e,t,i,n){const s=e.mul(t).shln(i);if(this.isOverflow(s,n))throw new K("Multiplication shift left overflow","MulShiftLeftOverflow");return s}static checkDivRoundUpIf(e,t,i){if(t.eq(E))throw new K("Devide by zero","DivideByZero");return i?this.divRoundUp(e,t):e.div(t)}static isOverflow(e,t){return e.gte(Ie.pow(new p(t)))}},Re="79226673515401279992447579055",Ue="4295048016",Ee=new p(1e6),g="0x0000000000000000000000000000000000000000000000000000000000000006",je="pool_script",ce="router",st="utils",ot="PoolLiquidityCoin",Be="custodian_v2",at="clob_v2",rt="endpoints_v2",Xe=(e=>(e.Deleted="Deleted",e.Exists="Exists",e.NotExists="NotExists",e))(Xe||{});function m(e){if(e.config===void 0)throw Error(`package: ${e.package_id}  not config in sdk SdkOptions`);return e.config}var ct=14,dt="59543866431248",ut="184467440737095516",lt="15793534762490258745";function _t(e,t,i){const n=e.toTwos(i).shln(t);return n.imaskn(i+1),n.fromTwos(i)}function w(e,t,i){const n=e.toTwos(i).shrn(t);return n.imaskn(i-t+1),n.fromTwos(i-t)}function pt(e){let t;return e&1?t=new p("79232123823359799118286999567"):t=new p("79228162514264337593543950336"),e&2&&(t=w(t.mul(new p("79236085330515764027303304731")),96,256)),e&4&&(t=w(t.mul(new p("79244008939048815603706035061")),96,256)),e&8&&(t=w(t.mul(new p("79259858533276714757314932305")),96,256)),e&16&&(t=w(t.mul(new p("79291567232598584799939703904")),96,256)),e&32&&(t=w(t.mul(new p("79355022692464371645785046466")),96,256)),e&64&&(t=w(t.mul(new p("79482085999252804386437311141")),96,256)),e&128&&(t=w(t.mul(new p("79736823300114093921829183326")),96,256)),e&256&&(t=w(t.mul(new p("80248749790819932309965073892")),96,256)),e&512&&(t=w(t.mul(new p("81282483887344747381513967011")),96,256)),e&1024&&(t=w(t.mul(new p("83390072131320151908154831281")),96,256)),e&2048&&(t=w(t.mul(new p("87770609709833776024991924138")),96,256)),e&4096&&(t=w(t.mul(new p("97234110755111693312479820773")),96,256)),e&8192&&(t=w(t.mul(new p("119332217159966728226237229890")),96,256)),e&16384&&(t=w(t.mul(new p("179736315981702064433883588727")),96,256)),e&32768&&(t=w(t.mul(new p("407748233172238350107850275304")),96,256)),e&65536&&(t=w(t.mul(new p("2098478828474011932436660412517")),96,256)),e&131072&&(t=w(t.mul(new p("55581415166113811149459800483533")),96,256)),e&262144&&(t=w(t.mul(new p("38992368544603139932233054999993551")),96,256)),w(t,32,256)}function mt(e){const t=Math.abs(e);let i;return t&1?i=new p("18445821805675392311"):i=new p("18446744073709551616"),t&2&&(i=w(i.mul(new p("18444899583751176498")),64,256)),t&4&&(i=w(i.mul(new p("18443055278223354162")),64,256)),t&8&&(i=w(i.mul(new p("18439367220385604838")),64,256)),t&16&&(i=w(i.mul(new p("18431993317065449817")),64,256)),t&32&&(i=w(i.mul(new p("18417254355718160513")),64,256)),t&64&&(i=w(i.mul(new p("18387811781193591352")),64,256)),t&128&&(i=w(i.mul(new p("18329067761203520168")),64,256)),t&256&&(i=w(i.mul(new p("18212142134806087854")),64,256)),t&512&&(i=w(i.mul(new p("17980523815641551639")),64,256)),t&1024&&(i=w(i.mul(new p("17526086738831147013")),64,256)),t&2048&&(i=w(i.mul(new p("16651378430235024244")),64,256)),t&4096&&(i=w(i.mul(new p("15030750278693429944")),64,256)),t&8192&&(i=w(i.mul(new p("12247334978882834399")),64,256)),t&16384&&(i=w(i.mul(new p("8131365268884726200")),64,256)),t&32768&&(i=w(i.mul(new p("3584323654723342297")),64,256)),t&65536&&(i=w(i.mul(new p("696457651847595233")),64,256)),t&131072&&(i=w(i.mul(new p("26294789957452057")),64,256)),t&262144&&(i=w(i.mul(new p("37481735321082")),64,256)),i}var j=class{static priceToSqrtPriceX64(e,t,i){return W.toX64(e.mul(N.pow(10,i-t)).sqrt())}static sqrtPriceX64ToPrice(e,t,i){return W.fromX64(e).pow(2).mul(N.pow(10,t-i))}static tickIndexToSqrtPriceX64(e){return e>0?new p(pt(e)):new p(mt(e))}static sqrtPriceX64ToTickIndex(e){if(e.gt(new p(Re))||e.lt(new p(Ue)))throw new Error("Provided sqrtPrice is not within the supported sqrtPrice range.");const t=e.bitLength()-1,i=new p(t-64),n=_t(i,32,128);let s=new p("8000000000000000","hex"),o=0,a=new p(0),r=t>=64?e.shrn(t-63):e.shln(63-t);for(;s.gt(new p(0))&&o<ct;){r=r.mul(r);const I=r.shrn(127);r=r.shrn(63+I.toNumber()),a=a.add(s.mul(I)),s=s.shrn(1),o+=1}const d=a.shrn(32),l=n.add(d).mul(new p(dt)),_=w(l.sub(new p(ut)),64,128).toNumber(),f=w(l.add(new p(lt)),64,128).toNumber();return _===f?_:j.tickIndexToSqrtPriceX64(f).lte(e)?f:_}static tickIndexToPrice(e,t,i){return j.sqrtPriceX64ToPrice(j.tickIndexToSqrtPriceX64(e),t,i)}static priceToTickIndex(e,t,i){return j.sqrtPriceX64ToTickIndex(j.priceToSqrtPriceX64(e,t,i))}static priceToInitializableTickIndex(e,t,i,n){return j.getInitializableTickIndex(j.priceToTickIndex(e,t,i),n)}static getInitializableTickIndex(e,t){return e-e%t}static getNextInitializableTickIndex(e,t){return j.getInitializableTickIndex(e,t)+t}static getPrevInitializableTickIndex(e,t){return j.getInitializableTickIndex(e,t)-t}};new p(365);new p(24);new p(3600);new p(.5);var de=class{static getDefaultSqrtPriceLimit(e){return new p(e?Ue:Re)}static getDefaultOtherAmountThreshold(e){return e?E:Oe}};function he(e,t,i){const n=p.min(e,t),s=p.max(e,t),o=W.fromX64_BN(i.mul(s).mul(n)),a=s.sub(n);return o.div(a)}function fe(e,t,i){const n=p.min(e,t),o=p.max(e,t).sub(n);return i.shln(64).div(o)}var ye=class{static updateFeeRate(e,t,i,n,s){const o=W.checkMulDivCeil(t,new p(n),Ee,64),a=i===0?E:W.checkMulDivFloor(t,new p(i),Ee,64),r=t.mul(o).mul(a);if(s?e.feeProtocolCoinA=e.feeProtocolCoinA.add(o):e.feeProtocolCoinB=e.feeProtocolCoinB.add(o),r.eq(E)||e.liquidity.eq(E))return{refFee:a,clmm:e};const d=r.shln(64).div(e.liquidity);return s?e.feeGrowthGlobalA=e.feeGrowthGlobalA.add(d):e.feeGrowthGlobalB=e.feeGrowthGlobalB.add(d),{refFee:a,clmm:e}}static getCoinAmountFromLiquidity(e,t,i,n,s){const o=new N(e.toString()),a=new N(t.toString()),r=new N(i.toString()),d=new N(n.toString());let c,l;return t.lt(i)?(c=W.toX64_Decimal(o).mul(d.sub(r)).div(r.mul(d)),l=new N(0)):t.lt(n)?(c=W.toX64_Decimal(o).mul(d.sub(a)).div(a.mul(d)),l=W.fromX64_Decimal(o.mul(a.sub(r)))):(c=new N(0),l=W.fromX64_Decimal(o.mul(d.sub(r)))),s?{coinA:new p(c.ceil().toString()),coinB:new p(l.ceil().toString())}:{coinA:new p(c.floor().toString()),coinB:new p(l.floor().toString())}}static estLiquidityAndcoinAmountFromOneAmounts(e,t,i,n,s,o,a){const r=j.sqrtPriceX64ToTickIndex(a),d=j.tickIndexToSqrtPriceX64(e),c=j.tickIndexToSqrtPriceX64(t);let l;if(r<e){if(!n)throw new Error("lower tick cannot calculate liquidity by coinB");l=he(d,c,i)}else if(r>t){if(n)throw new Error("upper tick cannot calculate liquidity by coinA");l=fe(c,d,i)}else n?l=he(a,c,i):l=fe(a,d,i);const _=ye.getCoinAmountFromLiquidity(l,a,d,c,s),f=s?u(_.coinA.toString()).mul(1+o).toString():u(_.coinA.toString()).mul(1-o).toString(),h=s?u(_.coinB.toString()).mul(1+o).toString():u(_.coinB.toString()).mul(1-o).toString();return{coinAmountA:_.coinA,coinAmountB:_.coinB,tokenMaxA:s?new p(N.ceil(f).toString()):new p(N.floor(f).toString()),tokenMaxB:s?new p(N.ceil(h).toString()):new p(N.floor(h).toString()),liquidityAmount:l}}static estimateLiquidityFromcoinAmounts(e,t,i,n){if(t>i)throw new Error("lower tick cannot be greater than lower tick");const s=j.sqrtPriceX64ToTickIndex(e),o=j.tickIndexToSqrtPriceX64(t),a=j.tickIndexToSqrtPriceX64(i);if(s<t)return he(o,a,n.coinA);if(s>=i)return fe(a,o,n.coinB);const r=he(e,a,n.coinA),d=fe(e,o,n.coinB);return p.min(r,d)}static estCoinAmountsFromTotalAmount(e,t,i,n,s,o){const{ratioA:a,ratioB:r}=ye.calculateDepositRatioFixTokenA(e,t,i);console.log({ratioA:a,ratioB:r});const d=u(n).mul(a).div(s),c=u(n).mul(r).div(o);return{amountA:d,amountB:c}}static calculateDepositRatioFixTokenA(e,t,i){const n=new p(1),{tokenMaxB:s}=ye.estLiquidityAndcoinAmountFromOneAmounts(e,t,n,!0,!0,0,i),o=j.sqrtPriceX64ToPrice(i,0,0),a=u(n.toString()).mul(o),r=a.add(s.toString()),d=a.div(r),c=u(s.toString()).div(r);return{ratioA:d,ratioB:c}}},ht=0,ze=1,ft=2;function Le(e,t){return e===t?ht:e<t?ze:ft}function gt(e,t){let i=0;const n=e.length<=t.length?e.length:t.length,s=Le(e.length,t.length);for(;i<n;){const o=Le(e.charCodeAt(i),t.charCodeAt(i));if(i+=1,o!==0)return o}return s}function yt(e,t){return gt(e,t)===ze}function xe(e,...t){const i=Array.isArray(t[t.length-1])?t.pop():[];let s=[e,...t].filter(Boolean).join("::");return i&&i.length&&(s+=`<${i.join(", ")}>`),s}function y(e){var t;try{let i=e.replace(/\s/g,"");const n=i.match(/(<.+>)$/),s=(t=n==null?void 0:n[0])==null?void 0:t.match(/(\w+::\w+::\w+)(?:<.*?>(?!>))?/g);if(s){i=i.slice(0,i.indexOf("<"));const d={...y(i),type_arguments:s.map(c=>y(c).source_address)};return d.type_arguments=d.type_arguments.map(c=>O.isSuiCoin(c)?c:y(c).source_address),d.source_address=xe(d.full_address,d.type_arguments),d}const o=i.split("::"),a={full_address:i,address:o[2]==="SUI"?"0x2":Q(o[0]),module:o[1],name:o[2],type_arguments:[],source_address:""};return a.full_address=`${a.address}::${a.module}::${a.name}`,a.source_address=xe(a.full_address,a.type_arguments),a}catch{return{full_address:e,address:"",module:"",name:"",type_arguments:[],source_address:e}}}function ve(e){return y(e).source_address}function bt(e){return e.toLowerCase().startsWith("0x")?Q(e):e}function Ge(e){for(const t in e){const i=typeof e[t];if(i==="object")Ge(e[t]);else if(i==="string"){const n=e[t];e[t]=bt(n)}}}var kt="0x2::coin::Coin",wt=/^0x2::coin::Coin<(.+)>$/,vt="0x2::sui::SUI",O=class{static getCoinTypeArg(e){const t=e.type.match(wt);return t?t[1]:null}static isSUI(e){const t=O.getCoinTypeArg(e);return t?O.getCoinSymbol(t)==="SUI":!1}static getCoinSymbol(e){return e.substring(e.lastIndexOf(":")+1)}static getBalance(e){return BigInt(e.fields.balance)}static totalBalance(e,t){let i=BigInt(0);return e.forEach(n=>{t===n.coinAddress&&(i+=BigInt(n.balance))}),i}static getID(e){return e.fields.id.id}static getCoinTypeFromArg(e){return`${kt}<${e}>`}static getFaucetCoins(e){const{events:t}=e,i=[];return t==null||t.forEach(n=>{const{type:s}=n;if(y(s).name==="InitEvent"){const o=n.parsedJson;i.push({transactionModule:n.transactionModule,suplyID:o.suplyID,decimals:o.decimals})}}),i}static getCoinAssets(e,t){const i=[];return t.forEach(n=>{ve(n.coinAddress)===ve(e)&&i.push(n)}),i}static isSuiCoin(e){return y(e).full_address===vt}static selectCoinObjectIdGreaterThanOrEqual(e,t,i=[]){const n=O.selectCoinAssetGreaterThanOrEqual(e,t,i).selectedCoins.map(o=>o.coinObjectId),s=O.selectCoinAssetGreaterThanOrEqual(e,t,i).remainingCoins;return{objectArray:n,remainCoins:s}}static selectCoinAssetGreaterThanOrEqual(e,t,i=[]){const n=O.sortByBalance(e.filter(d=>!i.includes(d.coinObjectId))),s=O.calculateTotalBalance(n);if(s<t)return{selectedCoins:[],remainingCoins:n};if(s===t)return{selectedCoins:n,remainingCoins:[]};let o=BigInt(0);const a=[],r=[...n];for(;o<s;){const d=t-o,c=r.findIndex(_=>_.balance>=d);if(c!==-1){a.push(r[c]),r.splice(c,1);break}const l=r.pop();l.balance>0&&(a.push(l),o+=l.balance)}return{selectedCoins:O.sortByBalance(a),remainingCoins:O.sortByBalance(r)}}static sortByBalance(e){return e.sort((t,i)=>t.balance<i.balance?-1:t.balance>i.balance?1:0)}static sortByBalanceDes(e){return e.sort((t,i)=>t.balance>i.balance?-1:t.balance<i.balance?0:1)}static calculateTotalBalance(e){return e.reduce((t,i)=>t+i.balance,BigInt(0))}};function Ct(e,{numerator:t,denominator:i},n){return n?e.mul(i.add(t)).div(i):e.mul(i).div(i.add(t))}function u(e){return $.isDecimal(e)?e:new $(e===void 0?0:e)}function ge(e,t=32){return BigInt.asUintN(t,BigInt(e)).toString()}function Ce(e,t=32){return Number(BigInt.asIntN(t,BigInt(e)))}function Ne(e){const t=Ze(e).data,i={creator:"",description:"",image_url:"",link:"",name:"",project_url:""};return t&&(i.creator=t.creator,i.description=t.description,i.image_url=t.image_url,i.link=t.link,i.name=t.name,i.project_url=t.project_url),i}function $e(e){let t={creator:"",description:"",image_url:"",link:"",name:"",project_url:""},i={...t,pos_object_id:"",owner:"",type:"",coin_type_a:"",coin_type_b:"",liquidity:"",tick_lower_index:0,tick_upper_index:0,index:0,pool:"",reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"},n=A(e);if(n){const a=V(e),r=ke(e);"nft"in n?(n=n.nft.fields,t.description=n.description,t.name=n.name,t.link=n.url):t=Ne(e),i={...t,pos_object_id:n.id.id,owner:r.AddressOwner,type:a,coin_type_a:n.coin_type_a.fields.name,coin_type_b:n.coin_type_b.fields.name,liquidity:n.liquidity,tick_lower_index:Ce(BigInt(n.tick_lower_index.fields.bits)),tick_upper_index:Ce(BigInt(n.tick_upper_index.fields.bits)),index:n.index,pool:n.pool,reward_amount_owed_0:"0",reward_amount_owed_1:"0",reward_amount_owed_2:"0",reward_growth_inside_0:"0",reward_growth_inside_1:"0",reward_growth_inside_2:"0",fee_growth_inside_a:"0",fee_owed_a:"0",fee_growth_inside_b:"0",fee_owed_b:"0",position_status:"Exists"}}const s=Qe(e);s&&(i.pos_object_id=s.objectId,i.position_status="Deleted");const o=Ye(e);return o&&(i.pos_object_id=o,i.position_status="NotExists"),i}function Pt(e){const t=O.isSuiCoin(e.coinTypeA),i=O.isSuiCoin(e.coinTypeB);return{isAdjustCoinA:t,isAdjustCoinB:i}}function It(e,t){return $.ceil(u(e).div(1+t)).toString()}var S=class{static async adjustTransactionForGas(e,t,i,n){n.setSender(e.senderAddress);const s=O.selectCoinAssetGreaterThanOrEqual(t,i).selectedCoins;if(s.length===0)throw new Error("Insufficient balance");const o=O.calculateTotalBalance(t);if(o-i>1e9)return{fixAmount:i};const a=await S.calculationTxGas(e.fullClient,n);if(O.selectCoinAssetGreaterThanOrEqual(t,BigInt(a),s.map(d=>d.coinObjectId)).selectedCoins.length===0){const d=BigInt(a)+BigInt(500);if(o-i<d){if(i-=d,i<0)throw new Error("gas Insufficient balance");const c=new b,l=c.splitCoins(c.gas,[c.pure(i)]);return c.setGasBudget(d),{fixAmount:i,fixCoinInput:c.makeMoveVec({objects:[l]}),newTx:c}}}return{fixAmount:i}}static async buildAddLiquidityFixTokenForGas(e,t,i,n){let s=await S.buildAddLiquidityFixToken(e,t,i);const{isAdjustCoinA:o}=Pt(i),a=o?i.amount_a:i.amount_b,r=await S.adjustTransactionForGas(e,O.getCoinAssets(o?i.coinTypeA:i.coinTypeB,t),BigInt(a),s),{fixAmount:d}=r,{fixCoinInput:c}=r,{newTx:l}=r;if(c!==void 0&&l!==void 0){let _,f;if(o)i.amount_a=Number(d),_=c,f=S.buildAddLiquidityFixTokenCoinInput(l,i.fix_amount_a,i.amount_b,i.slippage,i.coinTypeB,t);else return i.amount_b=Number(d),_=S.buildAddLiquidityFixTokenCoinInput(l,!i.fix_amount_a,i.amount_a,i.slippage,i.coinTypeA,t),f=c,i=S.fixAddLiquidityFixTokenParams(i,n.slippage,n.curSqrtPrice),s=S.buildAddLiquidityFixTokenArgs(l,e,i,_,f),s}return s}static async buildAddLiquidityFixToken(e,t,i){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");let n=new b;const s=S.buildAddLiquidityFixTokenCoinInput(n,!i.fix_amount_a,i.amount_a,i.slippage,i.coinTypeA,t),o=S.buildAddLiquidityFixTokenCoinInput(n,i.fix_amount_a,i.amount_b,i.slippage,i.coinTypeB,t);return n=S.buildAddLiquidityFixTokenArgs(n,e,i,s,o),n}static buildAddLiquidityFixTokenCoinInput(e,t,i,n,s,o){var a,r;return t?(a=S.buildCoinInputForAmountInterval(e,o,{amount_second:BigInt(It(i,n)),amount_first:BigInt(i)},s))==null?void 0:a.transactionArgument:(r=S.buildCoinInputForAmount(e,o,BigInt(i),s))==null?void 0:r.transactionArgument}static fixAddLiquidityFixTokenParams(e,t,i){const n=e.fix_amount_a?e.amount_a:e.amount_b,s=ye.estLiquidityAndcoinAmountFromOneAmounts(Number(e.tick_lower),Number(e.tick_upper),new p(n),e.fix_amount_a,!0,t,i);return e.amount_a=e.fix_amount_a?e.amount_a:s.tokenMaxA.toNumber(),e.amount_b=e.fix_amount_a?s.tokenMaxB.toNumber():e.amount_b,e}static buildAddLiquidityFixTokenArgs(e,t,i,n,s){const o=[i.coinTypeA,i.coinTypeB];let a="add_liquidity_fix_coin_with_all";const{clmm_pool:r,integrate:d}=t.sdkOptions,c=[];n&&c.push({coinInput:n,coinAmount:i.amount_a.toString()}),s&&c.push({coinInput:s,coinAmount:i.amount_b.toString()}),i.is_open||t.Rewarder.collectRewarderTransactionPayload({pool_id:i.pool_id,pos_id:i.pos_id,coinTypeA:i.coinTypeA,coinTypeB:i.coinTypeB,collect_fee:i.collect_fee,rewarder_coin_types:i.rewarder_coin_types},e);const l=c.length===2;l?a=i.is_open?"open_position_with_liquidity_with_all":"add_liquidity_fix_coin_with_all":a=i.is_open?n!==void 0?"open_position_with_liquidity_only_a":"open_position_with_liquidity_only_b":n!==void 0?"add_liquidity_fix_coin_only_a":"add_liquidity_fix_coin_only_b";const _=m(r),f=i.is_open?l?[e.object(_.global_config_id),e.object(i.pool_id),e.pure(ge(BigInt(i.tick_lower)).toString()),e.pure(ge(BigInt(i.tick_upper)).toString()),...c.map(h=>h.coinInput),...c.map(h=>e.pure(h.coinAmount)),e.pure(i.fix_amount_a),e.object(g)]:[e.object(_.global_config_id),e.object(i.pool_id),e.pure(ge(BigInt(i.tick_lower)).toString()),e.pure(ge(BigInt(i.tick_upper)).toString()),...c.map(h=>h.coinInput),...c.map(h=>e.pure(h.coinAmount)),e.object(g)]:l?[e.object(_.global_config_id),e.object(i.pool_id),e.object(i.pos_id),...c.map(h=>h.coinInput),...c.map(h=>e.pure(h.coinAmount)),e.pure(i.fix_amount_a),e.object(g)]:[e.object(_.global_config_id),e.object(i.pool_id),e.object(i.pos_id),...c.map(h=>h.coinInput),...c.map(h=>e.pure(h.coinAmount)),e.object(g)];return e.moveCall({target:`${d.published_at}::${je}::${a}`,typeArguments:o,arguments:f}),e}static async buildSwapTransactionForGas(e,t,i,n){let s=S.buildSwapTransaction(e,t,i);const o=await S.adjustTransactionForGas(e,O.getCoinAssets(t.a2b?t.coinTypeA:t.coinTypeB,i),BigInt(t.by_amount_in?t.amount:t.amount_limit),s),{fixAmount:a,fixCoinInput:r,newTx:d}=o;return r!==void 0&&d!==void 0&&(t.by_amount_in?t.amount=a.toString():t.amount_limit=a.toString(),t=S.fixSwapParams(e,t,n),s=S.buildSwapTransactionArgs(d,t,e.sdkOptions,r)),s}static buildSwapTransaction(e,t,i){var o;let n=new b;const s=(o=S.buildCoinInputForAmount(n,i,BigInt(t.by_amount_in?t.amount:t.amount_limit),t.a2b?t.coinTypeA:t.coinTypeB))==null?void 0:o.transactionArgument;return n=S.buildSwapTransactionArgs(n,t,e.sdkOptions,s),n}static buildSwapTransactionArgs(e,t,i,n){const{clmm_pool:s,integrate:o}=i,a=de.getDefaultSqrtPriceLimit(t.a2b),r=[t.coinTypeA,t.coinTypeB],{global_config_id:d}=m(s);if(d===void 0)throw Error("clmm.config.global_config_id is undefined");const c=t.swap_partner!==void 0,l=c?t.a2b?"swap_a2b_with_partner":"swap_b2a_with_partner":t.a2b?"swap_a2b":"swap_b2a",_=c?[e.pure(d),e.pure(t.pool_id),e.pure(t.swap_partner),n,e.pure(t.by_amount_in),e.pure(t.amount),e.pure(t.amount_limit),e.pure(a.toString()),e.pure(g)]:[e.pure(d),e.pure(t.pool_id),n,e.pure(t.by_amount_in),e.pure(t.amount),e.pure(t.amount_limit),e.pure(a.toString()),e.pure(g)];return e.moveCall({target:`${o.published_at}::${je}::${l}`,typeArguments:r,arguments:_}),e}static fixSwapParams(e,t,i){const n=e.Swap.calculateRates({decimalsA:i.decimalsA,decimalsB:i.decimalsB,a2b:t.a2b,byAmountIn:t.by_amount_in,amount:new p(t.amount),swapTicks:i.swapTicks,currentPool:i.currentPool}),s=i.byAmountIn?n.estimatedAmountOut:n.estimatedAmountIn,o=Ct(s,i.slippage,!i.byAmountIn);return t.amount_limit=o.toString(),t}static async syncBuildCoinInputForAmount(e,t,i,n,s=!0){if(e.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const o=await e.getOwnerCoinAssets(e.senderAddress,n);return S.buildCoinInputForAmount(t,o,i,n,s).transactionArgument}static buildCoinInputForAmount(e,t,i,n,s=!0){const o=O.getCoinAssets(n,t);if(i===BigInt(0))return;const a=O.calculateTotalBalance(o);if(a<i)throw new Error(`The amount(${a}) is Insufficient balance for ${n} , expect ${i} `);return S.builddCoinInput(e,t,o,i,n,s)}static builddCoinInput(e,t,i,n,s,o=!0){if(O.isSuiCoin(s)){const _=e.splitCoins(e.gas,[e.pure(n.toString())]);return o?{transactionArgument:e.makeMoveVec({objects:[_]}),remainCoins:t}:{transactionArgument:_,remainCoins:t}}const a=O.selectCoinObjectIdGreaterThanOrEqual(i,n),r=a.objectArray;if(o)return{transactionArgument:e.makeMoveVec({objects:r.map(_=>e.object(_))}),remainCoins:a.remainCoins};const[d,...c]=r,l=e.object(d);return c.length>0&&e.mergeCoins(l,c.map(_=>e.object(_))),{transactionArgument:l,remainCoins:a.remainCoins}}static buildCoinInputForAmountInterval(e,t,i,n,s=!0){if(i.amount_first===BigInt(0))return;const o=O.getCoinAssets(n,t),a=O.calculateTotalBalance(o);if(a>=i.amount_first)return S.builddCoinInput(e,[...t],[...o],i.amount_first,n,s);if(a>=i.amount_second)return S.builddCoinInput(e,[...t],[...o],i.amount_second,n,s);if(a<i.amount_second)throw new Error(`The amount(${a}) is Insufficient balance for ${n} , expect ${i.amount_second} `)}static async calculationTxGas(e,t){const{sender:i}=t.blockData;if(i===void 0)throw Error("sender is empty");const n=await e.devInspectTransactionBlock({transactionBlock:t,sender:i}),{gasUsed:s}=n.effects;return Number(s.computationCost)+Number(s.storageCost)-Number(s.storageRebate)}static async buildRouterSwapTransaction(e,t,i,n){let s=new b;return s=await this.buildRouterBasePathTx(e,t,i,n,s),s}static async buildAggregatorSwapTransaction(e,t,i,n,s){var a;let o=new b;if(t.byAmountIn){const r=Math.round(t.outputAmount*(1-s));let d=(a=S.buildCoinInputForAmount(o,i,t.byAmountIn?BigInt(t.inputAmount):BigInt(r),t.fromCoin,!1))==null?void 0:a.transactionArgument,c=S.moveCallCoinZero(o,t.toCoin);const l=[];let _=!1;const f=t.splitPaths.some(I=>I.basePaths.some(C=>C.label==="Deepbook"));let h;if(f){const I=await Me.getAccountCap(e);if(I)h=o.object(I);else{const[C,P]=Me.createAccountCap(e.senderAddress,e.sdkOptions,o);o=P,h=C,_=!0}}for(let I=0;I<t.splitPaths.length;I+=1){const C=t.splitPaths[I];let P;for(let F=0;F<C.basePaths.length;F+=1){const k=C.basePaths[F];if(k.label==="Deepbook")if(F===0)if(C.basePaths.length===1){const T=this.buildDeepbookBasePathTx(e,k,o,h,d,c,!1);d=T.from,c=T.to}else{P=S.moveCallCoinZero(o,k.toCoin);const T=this.buildDeepbookBasePathTx(e,k,o,h,d,P,!1);d=T.from,P=T.to}else{const T=this.buildDeepbookBasePathTx(e,k,o,h,P,c,!0);P=T.from,c=T.to}if(k.label==="Cetus")if(F===0)if(C.basePaths.length===1){const T=this.buildClmmBasePathTx(e,k,o,t.byAmountIn,d,c,!1);d=T.from,c=T.to}else{P=S.moveCallCoinZero(o,k.toCoin);const T=this.buildClmmBasePathTx(e,k,o,t.byAmountIn,d,P,!1);d=T.from,P=T.to}else{const T=this.buildClmmBasePathTx(e,k,o,t.byAmountIn,P,c,!0);P=T.from,c=T.to,o.moveCall({target:`${e.sdkOptions.integrate.published_at}::${st}::send_coin`,typeArguments:[k.fromCoin],arguments:[P,o.pure(e.senderAddress)]})}}}l.push(d,c),_&&l.push(h),t.byAmountIn&&o.moveCall({target:`${e.sdkOptions.integrate.published_at}::${ce}::check_coin_threshold`,typeArguments:[t.toCoin],arguments:[c,o.pure(r)]}),o.transferObjects(l,o.pure(e.senderAddress))}else{const r=[];for(const c of t.splitPaths){const l=[],_=[],f=[],h=[];for(let C=0;C<c.basePaths.length;C+=1){const P=c.basePaths[C];l.push(P.direction),_.push(P.poolAddress),f.push(new p(P.inputAmount)),C===0?h.push(P.fromCoin,P.toCoin):h.push(P.toCoin)}const I={amountIn:new p(c.inputAmount),amountOut:new p(c.outputAmount),poolAddress:_,a2b:l,rawAmountLimit:f,isExceed:!1,coinType:h};r.push(I)}const d={paths:r,partner:n,priceSplitPoint:s};o=await this.buildRouterBasePathTx(e,d,!1,i,o)}return o}static buildDeepbookBasePathTx(e,t,i,n,s,o,a){const r=t.direction?s:o,d=t.direction?o:s,c=[i.object(t.poolAddress),n,i.pure(t.inputAmount),i.pure(0),i.pure(t.direction),r,d,i.pure(a),i.object(g)],l=t.direction?[t.fromCoin,t.toCoin]:[t.toCoin,t.fromCoin],_=i.moveCall({target:`${e.sdkOptions.deepbook_endpoint_v2.published_at}::endpoints_v2::swap`,typeArguments:l,arguments:c});return s=t.direction?_[0]:_[1],o=t.direction?_[1]:_[0],{from:s,to:o,tx:i}}static buildClmmBasePathTx(e,t,i,n,s,o,a){const{clmm_pool:r,integrate:d}=e.sdkOptions,c=m(r).global_config_id;let l=t.direction?s:o,_=t.direction?o:s;const f="swap",h=n?t.inputAmount.toString():t.outputAmount.toString(),I=de.getDefaultSqrtPriceLimit(t.direction),C=[i.object(c),i.object(t.poolAddress),l,_,i.pure(t.direction),i.pure(n),i.pure(h),i.pure(I.toString()),i.pure(a),i.object(g)],P=t.direction?[t.fromCoin,t.toCoin]:[t.toCoin,t.fromCoin],F=i.moveCall({target:`${d.published_at}::${ce}::${f}`,typeArguments:P,arguments:C});return l=F[0],_=F[1],s=t.direction?l:_,o=t.direction?_:l,{from:s,to:o,tx:i}}static async buildRouterBasePathTx(e,t,i,n,s){var F;const{clmm_pool:o,integrate:a}=e.sdkOptions,r=m(o).global_config_id,d=t.paths.filter(k=>k&&k.poolAddress),c=Number(d.reduce((k,T)=>k.add(T.amountIn),E).toString()),l=Number(d.reduce((k,T)=>k.add(T.amountOut),E).toString()),_=Math.round(i?Number(l.toString())*(1-t.priceSplitPoint):Number(c.toString())*(1+t.priceSplitPoint)),f=t.paths[0].coinType[0],h=t.paths[0].coinType[t.paths[0].coinType.length-1];let I=(F=S.buildCoinInputForAmount(s,n,BigInt(i?c:_),f,!1))==null?void 0:F.transactionArgument,C=S.moveCallCoinZero(s,h);const P=[];for(const k of d)if(k.poolAddress.length===1){const T=k.a2b[0],G={amount:Number(k.amountIn.toString()),amountLimit:_,poolCoinA:k.a2b[0]?f:h,poolCoinB:k.a2b[0]?h:f},U=T?I:C,J=T?C:I,re=i?k.amountIn.toString():k.amountOut.toString(),Ae=de.getDefaultSqrtPriceLimit(T).toString(),Te=[s.object(r),s.object(k.poolAddress[0]),U,J,s.pure(T),s.pure(i),s.pure(re),s.pure(Ae),s.pure(!1),s.object(g)],pe=[G.poolCoinA,G.poolCoinB],me=s.moveCall({target:`${e.sdkOptions.integrate.published_at}::${ce}::swap`,typeArguments:pe,arguments:Te});I=T?me[0]:me[1],C=T?me[1]:me[0]}else{const T=i?k.amountIn:k.rawAmountLimit[0],G=i?k.rawAmountLimit[0]:k.amountOut;let U="";k.a2b[0]?k.a2b[1]?U="swap_ab_bc":U="swap_ab_cb":k.a2b[1]?U="swap_ba_bc":U="swap_ba_cb";const J=de.getDefaultSqrtPriceLimit(k.a2b[0]),re=de.getDefaultSqrtPriceLimit(k.a2b[1]),Ae=[s.object(r),s.object(k.poolAddress[0]),s.object(k.poolAddress[1]),I,C,s.pure(i),s.pure(T.toString()),s.pure(G.toString()),s.pure(J.toString()),s.pure(re.toString()),s.object(g)],Te=[k.coinType[0],k.coinType[1],k.coinType[2]],pe=s.moveCall({target:`${a.published_at}::${ce}::${U}`,typeArguments:Te,arguments:Ae});I=pe[0],C=pe[1]}return i&&s.moveCall({target:`${a.published_at}::${ce}::check_coin_threshold`,typeArguments:[h],arguments:[C,s.pure(_)]}),P.push(I,C),s.transferObjects(P,s.pure(e.senderAddress)),s}static buildCoinTypePair(e,t){const i=[];if(e.length===2){const n=[];n.push(e[0],e[1]),i.push(n)}else{const n=[];n.push(e[0],e[e.length-1]),i.push(n);for(let s=1;s<e.length-1;s+=1){if(t[s-1]===0)continue;const o=[];o.push(e[0],e[s],e[e.length-1]),i.push(o)}}return i}},z=S;it(z,"moveCallCoinZero",(e,t)=>e.moveCall({target:"0x2::coin::zero",typeArguments:[t]}));var ne=new p(1e9),Me=class{static createAccountCap(e,t,i,n=!1){const{deepbook:s}=t,[o]=i.moveCall({target:`${s.published_at}::${at}::create_account`,typeArguments:[],arguments:[]});return n&&i.transferObjects([o],i.pure(e)),[o,i]}static deleteAccountCap(e,t,i){const{deepbook:n}=t,s=[i.pure(e)];return i.moveCall({target:`${n.published_at}::${Be}::delete_account_cap`,typeArguments:[],arguments:s}),i}static async getAccountCap(e){const t=await e.fullClient.getOwnedObjectsByPage(e.senderAddress,{options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0},filter:{MoveModule:{package:e.sdkOptions.deepbook.package_id,module:Be}}});return t.data.length===0?"":t.data[0].data.objectId}static async getPools(e){const t=e.sdkOptions.deepbook.package_id,i=[];try{(await e.fullClient.queryEventsByPage({MoveEventType:`${t}::clob_v2::PoolCreated`})).data.forEach(s=>{const o=s.parsedJson;o&&i.push({poolID:o.pool_id,tickSize:Number(o.tick_size),lotSize:Number(o.lot_size),takerFeeRate:Number(o.taker_fee_rate),makerRebateRate:Number(o.maker_rebate_rate),baseAsset:o.base_asset.name,quoteAsset:o.quote_asset.name})})}catch(n){console.log("getPoolImmutables",n)}return i}static async getPoolAsks(e,t,i,n){var f;const{simulationAccount:s}=e.sdkOptions,{deepbook_endpoint_v2:o}=e.sdkOptions,a=new b,r=[],d=[i,n],c=[a.pure(t),a.pure("0"),a.pure("999999999999"),a.pure(g)];a.moveCall({target:`${o.published_at}::endpoints_v2::get_level2_book_status_ask_side`,arguments:c,typeArguments:d});const _=(f=(await e.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:s.address})).events)==null?void 0:f.filter(h=>y(h.type).name==="BookStatus");if(_.length===0)return r;for(let h=0;h<_[0].parsedJson.depths.length;h++){const I=_[0].parsedJson.price[h],C=_[0].parsedJson.depths[h],P={price:parseInt(I,10),quantity:parseInt(C,10)};r.push(P)}return r}static async getPoolBids(e,t,i,n){var f;const{simulationAccount:s}=e.sdkOptions,{deepbook_endpoint_v2:o}=e.sdkOptions,a=new b,r=[],d=[i,n],c=[a.pure(t),a.pure("0"),a.pure("999999999999"),a.pure(g)];a.moveCall({target:`${o.published_at}::endpoints_v2::get_level2_book_status_bid_side`,arguments:c,typeArguments:d});const _=(f=(await e.fullClient.devInspectTransactionBlock({transactionBlock:a,sender:s.address})).events)==null?void 0:f.filter(h=>y(h.type).name==="BookStatus");if(_.length===0)return r;for(let h=0;h<_[0].parsedJson.depths.length;h++){const I=_[0].parsedJson.price[h],C=_[0].parsedJson.depths[h],P={price:parseInt(I,10),quantity:parseInt(C,10)};r.push(P)}return r}static async preSwap(e,t,i,n){let s=!1,o=E,a=new p(n),r=E;const d=new p(n);if(i){let c=await this.getPoolBids(e,t.poolID,t.baseAsset,t.quoteAsset);c===null&&(s=!0),c=c.sort((l,_)=>_.price-l.price);for(let l=0;l<c.length;l+=1){const _=new p(c[l].quantity),f=new p(c[l].price),h=_.mul(new p(f)).mul(new p(t.takerFeeRate)).div(ne).div(ne);if(a.gt(_))a=a.sub(_),o=o.add(_.mul(f).div(ne).sub(h)),r=r.add(h);else{const I=a.mul(new p(c[l].price)).div(ne),C=I.mul(new p(t.takerFeeRate)).div(ne);o=o.add(I.sub(C)),a=a.sub(a),r=r.add(C)}if(a.eq(E))break}}else{const c=await this.getPoolAsks(e,t.poolID,t.baseAsset,t.quoteAsset);c===null&&(s=!0);for(let l=0;l<c.length;l+=1){const _=new p(c[l].price).mul(new p(c[l].quantity)).div(new p(1e9)),f=_.mul(new p(t.takerFeeRate)).div(ne),h=_.add(f);if(a.gt(_))o=o.add(new p(c[l].quantity)),a=a.sub(h),r=r.add(f);else{const I=new p(c[l].quantity).div(new p(t.lotSize)),C=h.div(I),P=a.div(C);o=o.add(P.muln(t.lotSize)),a=a.sub(P.mul(C)),r=r.add(P.div(I).mul(f))}if(a.eq(E))break}}return{poolAddress:t.poolID,estimatedAmountIn:d.sub(a).toNumber(),estimatedAmountOut:o.toNumber(),estimatedFeeAmount:r,isExceed:s,amount:Number(n),aToB:i,byAmountIn:!0}}static async simulateSwap(e,t,i,n,s,o){var U;const{deepbook_endpoint_v2:a}=e.sdkOptions;let r=new b;const d=await this.getAccountCap(e);let c;if(d===""){const J=this.createAccountCap(e.senderAddress,e.sdkOptions,r),re=J[0];r=J[1],c=re}else c=r.pure(d);const l=await e.getOwnerCoinAssets(e.senderAddress),_=z.buildCoinInputForAmount(r,l,BigInt(o),i,!1),f=_==null?void 0:_.transactionArgument,h=z.buildCoinInputForAmount(r,l,BigInt(o),n,!1),I=h==null?void 0:h.transactionArgument,C=[i,n],P=[r.pure(t),c,r.pure(o),r.pure(0),r.pure(s),f,I,r.pure(g)];r.moveCall({target:`${a.published_at}::${rt}::swap`,arguments:P,typeArguments:C});const{simulationAccount:F}=e.sdkOptions,T=(U=(await e.fullClient.devInspectTransactionBlock({transactionBlock:r,sender:F.address})).events)==null?void 0:U.filter(J=>y(J.type).name==="DeepbookSwapEvent");if(T.length===0)return null;const G=T[0].parsedJson;return{poolAddress:G.pool,estimatedAmountIn:G.amount_in,estimatedAmountOut:G.amount_out,aToB:G.atob}}},Se="router",ae=1e4,H=class{static buildPoolImmutables(e){const{fields:t}=e.value.fields.value;return{clmm_pool_id:y(t.clmm_pool_id).address,booster_type:y(t.booster_type.fields.name).source_address,pool_id:y(t.pool_id).address,coinTypeA:y(t.coin_type_a.fields.name).source_address,coinTypeB:y(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){const t=A(e),i=[];return t.config.fields.contents.forEach(s=>{i.push({lock_day:Number(s.fields.key),multiplier:Number(u(s.fields.value).div(ae))})}),{basic_percent:Number(u(t.basic_percent).div(ae)),balances:{balances_handle:t.balances.fields.id.id,size:t.balances.fields.size},config:i,lock_positions:{lock_positions_handle:t.lock_positions.fields.id.id,size:t.lock_positions.fields.size},is_open:t.is_open,index:Number(t.index),pool_id:_e(e)}}static buildLockNFT(e){const t=y(_e(e)).address;return{lock_clmm_position:$e(e),locked_nft_id:t}}static buildLockPositionInfo(e){const t=A(e),{value:i}=t.value.fields;return{type:i.type,position_id:i.fields.position_id,start_time:Number(i.fields.start_time),lock_period:Number(i.fields.lock_period),end_time:Number(i.fields.end_time),growth_rewarder:i.fields.growth_rewarder,rewarder_owned:i.fields.rewarder_owned,is_settled:i.fields.is_settled}}static isLocked(e){return e.end_time>Date.parse(new Date().toString())/1e3}},At=class{constructor(e){D(this,"_sdk");D(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var o;const{booster:t}=this._sdk.sdkOptions,i=`${t.package_id}_getPoolImmutables`,n=this.getCache(i,e),s=[];if(n!==void 0)s.push(...n);else{const a=[];(o=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(m(t).booster_pool_handle)).data)==null||o.forEach(c=>{a.push(c.objectId)});const d=await this._sdk.ClmmSDK.fullClient.batchGetObjects(a,{showContent:!0});for(const c of d){const l=A(c);if(l){const _=H.buildPoolImmutables(l);this.updateCache(`${_.pool_id}_getPoolImmutable`,_,v),s.push(_)}}}return this.updateCache(i,s,v),s}async getPoolImmutable(e){const{booster:t}=this._sdk.sdkOptions,i=`${e}_getPoolImmutable`,n=this.getCache(i);if(n!==void 0)return n;const s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:m(t).booster_pool_handle,name:{type:"0x2::object::ID",value:e}}),o=A(s),a=H.buildPoolImmutables(o);return this.updateCache(i,a,v),a}async getPools(){const e=[],i=(await this.getPoolImmutables()).map(s=>s.pool_id),n=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0});for(const s of n){const o=H.buildPoolState(s);if(o){const a={...await this.getPoolImmutable(o.pool_id),...o};e.push(a);const r=`${a.pool_id}_getPoolObject`;this.updateCache(r,a,v)}}return e}async getPool(e,t=!0){const i=`${e}_getPoolObject`,n=this.getCache(i,t),s=await this.getPoolImmutable(e);if(n!==void 0)return{...s,...n};const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),a=H.buildPoolState(o),r={...s,...a};return this.updateCache(i,r,v),r}async getPoolHandleId(e){const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),i=A(t);return i?i.list.fields.id.id:""}async getBoosterInitConfigs(){var n;const{package_id:e}=this.sdk.sdkOptions.booster,t=(n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:n.data,i={booster_config_id:"",booster_pool_handle:""};return t.length>0&&t.forEach(s=>{const o=s.parsedJson;o&&(i.booster_config_id=o.config_id)}),i.booster_pool_handle=await this.getPoolHandleId(i.booster_config_id),i}async getOwnerBoosterPositions(e,t,i){const{booster:n}=this.sdk.sdkOptions,s=[],o=[],a=`${n.package_id}::lock_nft::LockNFT<${this._sdk.ClmmSDK.Position.buildPositionType()}>`,r=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showOwner:!0},filter:{StructType:a}});for(const c of r.data)if(y(V(c)).source_address===a&&c.data){const _=H.buildLockNFT(c);this.updateCache(`${_.locked_nft_id}_getBoosterPositionById`,_,v),_&&(t===void 0||t===_.lock_clmm_position.pool)&&s.push(_)}const d=await this.getLockPositionInfos(i,s.map(c=>c.locked_nft_id));for(const c of s)for(const l of d)if(c.lock_clmm_position.pos_object_id===l.position_id){o.push({...c,...l});break}return o}async getBoosterPosition(e,t){const i=`${t}_getBoosterPositionById`,n=this.getCache(i);let s;if(n!==void 0)s=n;else{const a=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0,showOwner:!0}});s=H.buildLockNFT(a),this.updateCache(i,s,v)}const o=await this.getLockPositionInfo(e,t);return{...s,...o}}async getLockPositionInfos(e,t=[]){var o;const i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e),n=[],s=[];return(o=i.data)==null||o.forEach(a=>{t.length>0?t.includes(a.name.value)&&n.push(a.objectId):n.push(a.objectId)}),n.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showContent:!0})).forEach(r=>{const d=H.buildLockPositionInfo(r);d&&s.push(d)}),s}async getLockPositionInfo(e,t){const i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}});return H.buildLockPositionInfo(i)}calculateXCetusRewarder(e,t,i){let n=t.basic_percent,s="0";e.forEach(r=>{r.coin_address===t.booster_type&&(console.log("find ",t.booster_type),s=r.amount_owed.toString())}),i.is_settled||t.config.forEach(r=>{r.lock_day===i.lock_period&&(n=r.multiplier)});const o=u(s).sub(i.growth_rewarder).mul(n);return u(i.rewarder_owned).add(o).toString()}lockPositionPayload(e){const{booster:t}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,n=new b;return n.moveCall({target:`${t.published_at}::${Se}::lock_position`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[n.pure(m(t).booster_config_id),n.pure(m(i).global_config_id),n.pure(e.booster_pool_id),n.pure(e.clmm_pool_id),n.pure(e.clmm_position_id),n.pure(e.lock_day),n.pure(g)]}),n}canceLockPositionPayload(e){const{booster:t}=this.sdk.sdkOptions,i=new b;return i.moveCall({target:`${t.published_at}::${Se}::cancel_lock`,typeArguments:[e.booster_type],arguments:[i.pure(m(t).booster_config_id),i.pure(e.booster_pool_id),i.pure(e.lock_nft_id),i.pure(g)]}),i}redeemPayload(e){const{booster:t,xcetus:i}=this.sdk.sdkOptions,{clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,s=new b,o=m(i);return s.moveCall({target:`${t.published_at}::${Se}::redeem`,typeArguments:[e.booster_type,e.coinTypeA,e.coinTypeB],arguments:[s.pure(m(t).booster_config_id),s.pure(m(n).global_config_id),s.pure(e.booster_pool_id),s.pure(e.lock_nft_id),s.pure(e.clmm_pool_id),s.pure(o.lock_manager_id),s.pure(o.xcetus_manager_id),s.pure(e.ve_nft_id),s.pure(g)]}),s}updateCache(e,t,i=te){let n=this._cache[e];n?(n.overdueTime=M(i),n.value=t):n=new ie(t,M(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},L="router",We=1e9,B=class{static priceRealToFix(e,t,i){const n=u(t-i).toNumber();return Number(u(e).div(u(10).pow(u(n))).toString())}static priceFixToReal(e,t,i){const n=u(t-i).toNumber();return Number(u(e).mul(u(10).pow(u(n))).toString())}static raiseTotalAmount(e,t,i){const n=u(t-i).abs().toNumber();return t>i?Number(u(e.total_supply).mul(e.current_price).div(u(10).pow(u(n))).toString()):Number(u(e.total_supply).mul(e.current_price).mul(u(10).pow(u(n))).toString())}static buildLaunchPadPool(e){const t=V(e),i=y(t),n=A(e),s={coin_type_sale:i.type_arguments[0],coin_type_raise:i.type_arguments[1],pool_address:Q(_e(e)),is_settle:n.is_settle,current_price:u(n.initialize_price).div(u(We)).toString(),price:n.initialize_price,min_price:"0",max_price:"0",sale_coin_amount:n.sale_coin,raise_coin_amount:n.raise_coin,total_purchase_amount:n.reality_raise_total,total_supply:n.sale_total,min_purchase:n.min_purchase,max_purchase:n.max_purchase,complete_raise_limit:n.least_raise_amount,softcap:n.softcap,max_raise_amount:n.hardcap,sale_decimals:0,raise_decimals:0,liquidity_injection_ratio:Number(n.liquidity_rate)/1e4,is_cancel:n.is_cancel,duration_summary:{start_time:Number(n.duration_manager.fields.start_time),end_time:0,settle_end_time:0,purchase_duration:Number(n.duration_manager.fields.activity_duration),settle_duration:Number(n.duration_manager.fields.settle_duration),lock_up_duration:Number(n.duration_manager.fields.locked_duration)},white_summary:{white_handle:n.white_list.fields.users.fields.id.id,protection_hard_cap:n.white_list.fields.hard_cap_total,protection_limit_used:n.white_list.fields.purchase_total,size:Number(n.white_list.fields.users.fields.size)},unused_sale:n.unused_sale,harvest_raise:n.harvest_raise,tick_spacing:Number(n.tick_spacing),owner:n.recipient,purchase_summary:{purchase_handle:n.purchase_list.fields.id.id,size:Number(n.purchase_list.fields.size)},pool_status:"Failed"};return B.updatePoolStatus(s),s}static updatePoolStatus(e){const t=Number(u(Date.now()/1e3).toFixed(0)),{duration_summary:i}=e,n=i.start_time+i.purchase_duration,s=n+i.settle_duration;if(i.end_time=n,i.settle_end_time=s,e.is_settle)e.pool_status="Ended";else if(e.is_cancel)e.pool_status="Canceled";else if(t<i.start_time)e.pool_status="Upcoming";else if(t>i.start_time&&t<n)e.pool_status="Live";else if(t>n&&t<s){const o=e.raise_coin_amount;Number(o)<Number(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Settle"}return e}static async calculatePoolPrice(e,t){const i=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),n=i[t.coin_type_sale].decimals,s=i[t.coin_type_raise].decimals;t.min_price=this.priceFixToReal(Number(u(t.softcap).div(u(t.total_supply))),n,s).toString(),t.max_price=this.priceFixToReal(Number(u(t.max_raise_amount).div(u(t.total_supply))),n,s).toString(),t.current_price=this.priceFixToReal(Number(t.current_price),n,s).toString(),t.sale_decimals=n,t.raise_decimals=s}static async getWithdrawRaise(e){return e.pool_status==="Ended"?e.harvest_raise:"0"}static async getWithdrawSale(e){return e.pool_status==="Ended"?e.unused_sale:e.sale_coin_amount}static async getHistoryWithdrawRaise(e,t){if(t.pool_status==="Ended"){if(u(t.harvest_raise).equals(u(0))){const n=await e.Launchpad.getSettleEvent(t.pool_address);n&&(t.harvest_raise=n.unused_raise)}const i=p.min(new p(t.total_purchase_amount),new p(t.max_raise_amount));return u(i.toString()).mul(1-t.liquidity_injection_ratio).toString()}return"0"}static async getHistoryWithdrawSale(e,t){if(t.pool_status==="Ended"){const i=await e.Launchpad.getSettleEvent(t.pool_address);return i&&(t.unused_sale=i.unused_sale),t.unused_sale}return"0"}static async getOverrecruitReverseAmount(e,t){const i=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[t.pool_address],!1);if(i.length>0){const n=i[0].purchased_raise_amount,s=(await e.Launchpad.getPurchaseAmount(t.white_summary.white_handle,e.ClmmSDK.senderAddress)).safe_purchased_amount,{protection_limit_used:o}=t.white_summary;return u(n).sub(s).div(u(t.total_purchase_amount).sub(o)).mul(u(t.total_purchase_amount).sub(t.max_raise_amount)).toString()}return"0"}static async getCanPurchaseAmount(e,t){const i=await B.getOverrecruitReverseAmount(e,t),n=await e.Launchpad.getPurchaseMarks(e.ClmmSDK.senderAddress,[t.pool_address],!1);if(n){const s=n[0].purchased_raise_amount;u(s).sub(i).div(t.current_price)}return"0"}},Tt=class{constructor(e){D(this,"_sdk");D(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=[],t=0,i=100,n=!1){var l;const{package_id:s}=this._sdk.sdkOptions.launchpad;if(s===void 0)throw Error("sdk.sdkOptions.launchpad is undefined");const o=`${s}_getPoolImmutables`,a=this.getCache(o,n),r=[],d=[];if(a!==void 0&&r.push(...a),r.length===0)try{((l=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${s}::factory::CreatePoolEvent`}))==null?void 0:l.data).forEach(f=>{const h=f.parsedJson;h&&r.push({pool_address:h.pool_id,coin_type_sale:y(h.sale_coin.name).full_address,coin_type_raise:y(h.raise_coin.name).full_address})}),this.updateCache(o,r,v)}catch(_){console.log("getPoolImmutables",_)}const c=e.length>0;for(let _=0;_<r.length;_+=1){const f=r[_];if(!(c&&!e.includes(f.pool_address))){if(!c){const h=_;if(h<t||h>=t+i)continue}d.push(f)}}return d}async getPoolImmutablesWithPage(e="all",t=!1){const{package_id:i}=this._sdk.sdkOptions.launchpad,n=`${i}_getPoolImmutables`,s=[],o={data:[],hasNextPage:!1},a=e==="all";if(a){const r=this.getCache(n,t);r&&s.push(...r)}if(s.length===0)try{const r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${i}::factory::CreatePoolEvent`},e);o.hasNextPage=r.hasNextPage,o.nextCursor=r.nextCursor,r.data.forEach(d=>{const c=d.parsedJson;c&&s.push({pool_address:c.pool_id,coin_type_sale:y(c.sale_coin.name).full_address,coin_type_raise:y(c.raise_coin.name).full_address})})}catch(r){console.log("getPoolImmutables",r)}return o.data=s,a&&this.updateCache(n,s,v),o}async getPools(e=[],t=0,i=100){const n=[];let s=[];e.length>0?s=[...e]:(await this.getPoolImmutables([],t,i,!1)).forEach(r=>{s.push(r.pool_address)});const o=await this._sdk.ClmmSDK.fullClient.batchGetObjects(s,{showType:!0,showContent:!0});for(const a of o){const r=B.buildLaunchPadPool(a);await B.calculatePoolPrice(this._sdk,r),n.push(r);const d=`${r.pool_address}_getPoolObject`;this.updateCache(d,r,v)}return n}async getPool(e,t=!0){const i=`${e}_getPoolObject`,n=this.getCache(i,t);if(n!==void 0){const a=n;return B.updatePoolStatus(a),a}const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),o=B.buildLaunchPadPool(s);return await B.calculatePoolPrice(this._sdk,o),this.updateCache(i,o),o}async getInitConfig(e=!1){var d;const t=this._sdk.sdkOptions.launchpad.package_id,i=`${t}_getInitEvent`,n=this.getCache(i,e);if(n!==void 0)return n;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=qe(s),a=(d=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:o}))==null?void 0:d.data,r={pools_id:"",admin_cap_id:"",config_cap_id:""};return a.length>0&&(a.forEach(c=>{const l=c.parsedJson;if(l)switch(y(c.type).full_address){case`${t}::config::InitConfigEvent`:r.admin_cap_id=l.admin_cap_id,r.config_cap_id=l.config_cap_id;break;case`${t}::factory::InitFactoryEvent`:r.pools_id=l.pools_id;break}}),this.updateCache(i,r,v)),r}async getLockNFT(e,t=!1){const i=`${e}_getLockNFT`,n=this.getCache(i,t);if(n!==void 0)return n;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!s.error)return $e(s)}async getLockNFTList(e){var s;const{package_id:t}=this._sdk.ClmmSDK.sdkOptions.clmm_pool,{sdkOptions:i}=this._sdk,n=[];try{const o=(s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${i.launchpad.package_id}::lock::LockNFTEvent`}))==null?void 0:s.data;for(const a of o){const r=a.parsedJson;if(r){const d={locked_time:Number(r.locked_time),end_lock_time:Number(r.end_lock_time),nft_type:r.nft_type_name.name,lock_nft_id:r.lock_nft_id,recipient:r.recipient};if(e===d.recipient&&`${t}`===y(d.nft_type).address){const c=await this.getLockNFT(d.lock_nft_id);if(c){const l=y(c.coin_type_a).full_address,_=y(c.coin_type_b).full_address;n.push({...c,coin_type_a:l,coin_type_b:_,...d})}}}}return n}catch(o){return console.log("getLockNFTList:",o),[]}}async creatPoolTransactionPayload(e){const{launchpad:t}=this.sdk.sdkOptions,i=m(t);if(this.assertLuanchpadConfig(),this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const n=B.priceRealToFix(Number(e.initialize_price),e.sale_decimals,e.raise_decimals),s=new b,o=u(e.total_supply).add(u(e.total_supply).mul(u(e.liquidity_rate))).toNumber(),a=await z.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,s,BigInt(o),e.coin_type_sale),r=[s.pure(i.admin_cap_id),s.pure(i.config_cap_id),s.pure(i.pools_id),s.pure(X(e.recipient)),s.pure((n*We).toString()),a,s.pure(e.total_supply.toString()),s.pure(e.min_purchase.toString()),s.pure(e.max_purchase.toString()),s.pure(e.least_raise_amount.toString()),s.pure(e.hardcap.toString()),s.pure((e.liquidity_rate*1e3).toString()),s.pure(e.start_time.toString()),s.pure(e.activity_duration.toString()),s.pure(e.settle_duration.toString()),s.pure(e.locked_duration.toString()),s.pure(e.tick_spacing.toString()),s.pure(g)],d=[e.coin_type_sale,e.coin_type_raise];return s.moveCall({target:`${t.published_at}::${L}::create_launch_pool`,typeArguments:d,arguments:r}),s}async creatPurchasePayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const i=new b,n=await z.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,i,BigInt(e.purchase_amount),e.coin_type_raise),s=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],o=[e.coin_type_sale,e.coin_type_raise];let a;return s?a=[i.pure(e.pool_address),i.pure(m(t).config_cap_id),i.pure(s.id),n,i.pure(e.purchase_amount.toString()),i.pure(g)]:a=[i.pure(e.pool_address),i.pure(m(t).config_cap_id),n,i.pure(e.purchase_amount.toString()),i.pure(g)],i.moveCall({target:`${t.published_at}::${L}::${s===void 0?"create_and_purchase":"purchase"}`,typeArguments:o,arguments:a}),i}async creatClaimPayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");const i=(await this.getPurchaseMarks(this._sdk.ClmmSDK.senderAddress,[e.pool_address],!1))[0],n=new b,s=[e.coin_type_sale,e.coin_type_raise],o=[n.pure(e.pool_address),n.pure(m(t).config_cap_id),n.pure(i==null?void 0:i.id),n.pure(g)];return n.moveCall({target:`${t.published_at}::${L}::claim`,typeArguments:s,arguments:o}),n}async creatSettlePayload(e){var r;const{launchpad:t}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions;if(this._sdk.ClmmSDK.senderAddress.length===0)throw Error("this config sdk senderAddress is empty");this.assertLuanchpadConfig();const n=m(i),{clmm_args:s}=e,o=new b;o.setSender(this.sdk.ClmmSDK.senderAddress);const a=[e.coin_type_sale,e.coin_type_raise];if(s){const d=s.opposite?j.priceToSqrtPriceX64(u(1).div(s.current_price),s.raise_decimals,s.sale_decimals).toString():j.priceToSqrtPriceX64(u(s.current_price),s.sale_decimals,s.raise_decimals).toString(),c=BigInt(d)<BigInt(s.clmm_sqrt_price),l=s.opposite?c?e.coin_type_raise:e.coin_type_sale:c?e.coin_type_sale:e.coin_type_raise,_=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,l);let f=O.calculateTotalBalance(_);O.isSuiCoin(l)&&(f-=BigInt(2e8));const I=(r=z.buildCoinInputForAmount(o,_,f,l))==null?void 0:r.transactionArgument,C=s.opposite?c?"settle_with_reverse_clmm_only_with_a":"settle_with_reverse_clmm_only_with_b":c?"settle_only_with_a":"settle_only_with_b",P=[o.pure(e.pool_address),o.pure(m(t).config_cap_id),o.pure(s.clmm_pool_address),o.pure(n.global_config_id),o.pure(d),I,o.pure(g)];o.moveCall({target:`${t.published_at}::${L}::${C}`,typeArguments:a,arguments:P})}else o.moveCall({target:`${t.published_at}::${L}::settle`,typeArguments:a,arguments:[o.pure(e.pool_address),o.pure(m(t).config_cap_id),o.pure(g)]});return o}creatWithdrawPayload(e){const{launchpad:t}=this.sdk.sdkOptions,i=new b,n=[e.coin_type_sale,e.coin_type_raise],s=[i.object(e.pool_address),i.object(m(t).config_cap_id),i.object(g)];return e.sale_amount>BigInt(0)&&i.moveCall({target:`${t.published_at}::${L}::withdraw_sale`,typeArguments:n,arguments:s}),e.raise_amount>BigInt(0)&&i.moveCall({target:`${t.published_at}::${L}::withdraw_raise`,typeArguments:n,arguments:s}),i}addUserToWhitelisPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const i=new b,n=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(s=>{const o=[i.object(m(t).admin_cap_id),i.object(m(t).config_cap_id),i.object(e.pool_address),i.object(s),i.pure(e.safe_limit_amount),i.object(g)];i.moveCall({target:`${t.published_at}::${L}::add_user_to_whitelist`,typeArguments:n,arguments:o})}),i}updateWhitelistCapPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const i=new b,n=[e.coin_type_sale,e.coin_type_raise];return e.safe_limit_amount>0&&i.moveCall({target:`${t.published_at}::${L}::update_whitelist_member_safe_limit_amount`,typeArguments:n,arguments:[i.object(m(t).admin_cap_id),i.object(m(t).config_cap_id),i.object(e.pool_address),i.pure(e.white_list_member),i.pure(e.safe_limit_amount),i.object(g)]}),e.hard_cap_total>0&&i.moveCall({target:`${t.published_at}::${L}::update_whitelist_hard_cap_total`,typeArguments:n,arguments:[i.object(m(t).admin_cap_id),i.object(m(t).config_cap_id),i.object(e.pool_address),i.pure(e.hard_cap_total),i.object(g)]}),i}creatRemoveWhitelistPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const i=new b,n=[e.coin_type_sale,e.coin_type_raise];return e.user_addrs.forEach(s=>{const o=[i.object(m(t).admin_cap_id),i.object(m(t).config_cap_id),i.object(e.pool_address),i.object(s),i.object(g)];i.moveCall({target:`${t.published_at}::${L}::remove_user_from_whitelist`,typeArguments:n,arguments:o})}),i}creatCancelPoolPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const i=new b,n=[e.coin_type_sale,e.coin_type_raise],s=[i.pure(m(t).admin_cap_id),i.pure(m(t).config_cap_id),i.pure(e.pool_address),i.pure(g)];return i.moveCall({target:`${t.published_at}::${L}::cancel`,typeArguments:n,arguments:s}),i}updateRecipientPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const i=new b,n=[e.coin_type_sale,e.coin_type_raise],s=[i.pure(m(t).admin_cap_id),i.pure(m(t).config_cap_id),i.pure(e.pool_address),i.pure(e.new_recipient),i.pure(g)];return i.moveCall({target:`${t.published_at}::${L}::update_recipient_address`,typeArguments:n,arguments:s}),i}updatePoolDuractionPayload(e){const{launchpad:t}=this.sdk.sdkOptions;this.assertLuanchpadConfig();const i=new b,n=[e.coin_type_sale,e.coin_type_raise],s=[i.pure(m(t).admin_cap_id),i.pure(m(t).config_cap_id),i.pure(e.pool_address),i.pure(e.activity_duration),i.pure(e.settle_duration),i.pure(e.lock_duration),i.pure(g)];return i.moveCall({target:`${t.published_at}::${L}::update_pool_duration`,typeArguments:n,arguments:s}),i}creatUnlockNftPayload(e){const{launchpad:t}=this.sdk.sdkOptions;if(m(t)===void 0)throw Error("getPackagerConfigs(launchpad)  is null");const i=new b,n=[e.nft_type],s=[i.pure(e.lock_nft),i.pure(g)];return i.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:n,arguments:s}),i}async isAdminCap(e){const{launchpad:t}=this._sdk.sdkOptions;if(m(t)===void 0)throw Error("launchpad config is empty");const i=`${e}_isAdminCap`,n=this.getCache(i);if(n)return n;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:m(t).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(s);const o=we(s),a=ke(s);let r=!1;return a&&o&&y(o).source_address===`${t.package_id}::config::AdminCap`&&(r=X(a.AddressOwner)===X(e)),this.updateCache(i,r,v),r}async isWhiteListUser(e,t){const i={type:"address",value:t};try{const n=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:i});return!!(n&&n.data)}catch{return!1}}async getPurchaseAmount(e,t){var n;const i={type:"address",value:t};try{const s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:i}),o=A(s);if(console.log(o),o)return(n=o==null?void 0:o.value)==null?void 0:n.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getPurchaseMarks(e,t=[],i=!0){const{launchpad:n}=this._sdk.sdkOptions,s=`${t}_getPurchaseMark`,o=this.getCache(s,i);if(!i&&o!==void 0)return o;let a=null;const r=[];for(;;){const d=await this._sdk.ClmmSDK.fullClient.getOwnedObjects({owner:e,options:{showType:!0,showContent:!0,showDisplay:!0},cursor:a});for(const c of d.data){const{fields:l}=c.data.content;if(y(V(c)).source_address===`${n.package_id}::pool::PurchaseMark`){console.log("fields: ",l);const f={id:l.id.id,pool_id:y(l.pool_id).address,purchased_raise_amount:l.purchase_total,obtain_sale_amount:l.obtain_sale_amount,used_raise_amount:l.used_raise_amount};t.length>0?t.includes(f.pool_id)&&r.push(f):r.push(f)}}if(d.hasNextPage)a=d.nextCursor;else break}return this.updateCache(s,r,v),r}async getSettleEvent(e){const{launchpad:t}=this._sdk.sdkOptions,i=`${e}_getPurchaseMark`,n=this.getCache(i);if(n!==void 0)return n;const s=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${t.package_id}::pool::SettleEvent`});for(const o of s.data){const a=o.parsedJson;if(e===Q(a.pool_id)){const r={pool_id:a.pool_id,settle_price:a.settle_price,unused_sale:a.unused_sale,unused_raise:a.unused_raise,white_purchase_total:a.white_purchase_total};return this.updateCache(i,r,v),r}}}buildLaunchpadCoinType(e,t){return xe(this._sdk.sdkOptions.launchpad.package_id,"pool",ot,[e,t])}assertLuanchpadConfig(){const{launchpad:e}=this.sdk.sdkOptions;if(m(e)===void 0)throw Error("sdk getPackagerConfigs(launchpad) is null")}updateCache(e,t,i=te){let n=this._cache[e];n?(n.overdueTime=M(i),n.value=t):n=new ie(t,M(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},Z=class{static buildPoolImmutables(e){const{fields:t}=e.value.fields.value;return{clmm_pool_id:y(t.clmm_pool_id).address,bonus_type:y(t.bonus_type.fields.name).source_address,pool_id:y(t.pool_id).address,coinTypeA:y(t.coin_type_a.fields.name).source_address,coinTypeB:y(t.coin_type_b.fields.name).source_address}}static buildPoolState(e){const t=A(e),i=[];return t.config.fields.contents.forEach(s=>{i.push({rate:Number(u(s.fields.key).div(ae)),multiplier:Number(u(s.fields.value).div(ae))})}),{balance:t.balance,config:i,is_open:t.is_open,index:Number(t.index),start_time:Number(t.start_time),interval_day:Number(t.interval_day),minimum_percent_to_reward:Number(u(t.minimum_percent_to_reward).div(ae)),rewarders:{rewarder_handle:t.rewarders.fields.id.id,size:Number(t.rewarders.fields.size)},whale_nfts:{whale_nfts_handle:t.whale_nfts.fields.id.id,size:Number(t.whale_nfts.fields.size)},points:{point_handle:t.points.fields.id.id,size:Number(t.points.fields.size)}}}static buildMarkerPositions(e){const{contents:t}=e.value.fields.value.fields,i=[],n=e.id.id;return t.forEach(s=>{const{key:o,value:a}=s.fields,r={id:o,period_id:n,bonus_num:a.fields.bonus_num,point:a.fields.point,is_burn:a.fields.is_burn,point_after_multiplier:a.fields.point_after_multiplier,percent:Number(u(a.fields.percent).div(ae)),fee_share_rate:0,is_redeemed:a.fields.is_redeemed};i.push(r)}),i}static buildPoolBonusInfo(e){const{fields:t,type:i}=e.value.fields.value;return{type:i,time:Number(t.time),settle_time:Number(t.settle_time),settled_num:t.settled_num,is_settled:t.is_settled,basis_bonus:t.basis_bonus,total_bonus:t.total_bonus,is_vacant:t.is_vacant,redeemed_num:t.redeemed_num}}static getBonusPercent(e,t){let i=0;for(const n of e)t>=n.rate&&n.rate>i&&(i=n.multiplier);return i}},Fe="router",St=class{constructor(e){D(this,"_sdk");D(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e=!1){var o;const{maker_bonus:t}=this._sdk.sdkOptions,i=`${t.package_id}_getPoolImmutables`,n=this.getCache(i,e),s=[];if(n!==void 0)s.push(...n);else{const a=[];(o=(await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(m(t).maker_pool_handle)).data)==null||o.forEach(c=>{a.push(c.objectId)});const d=await this._sdk.ClmmSDK.fullClient.batchGetObjects(a,{showContent:!0});for(const c of d){const l=A(c);l&&s.push(Z.buildPoolImmutables(l))}}return s}async getPoolImmutable(e){const{maker_bonus:t}=this._sdk.sdkOptions,i=`${t.package_id}_getPoolImmutables`,n=this.getCache(i);if(n!==void 0){const a=n.filter(r=>e===r.pool_id);if(a.length>0)return a[0]}const s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:m(t).maker_pool_handle,name:{type:"0x2::object::ID",value:e}}),o=A(s);return Z.buildPoolImmutables(o)}async getPools(){const e=[],t=await this.getPoolImmutables(),i=t.map(o=>o.pool_id),n=await this._sdk.ClmmSDK.fullClient.batchGetObjects(i,{showType:!0,showContent:!0});let s=0;for(const o of n){const a=Z.buildPoolState(o);if(a){const r={...t[s],...a};e.push(r);const d=`${r.pool_id}_getPoolObject`;this.updateCache(d,r,v)}s+=1}return e}async getPool(e,t=!0){const i=`${e}_getPoolObject`,n=this.getCache(i,t),s=await this.getPoolImmutable(e);if(n!==void 0)return n;const o=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),a=Z.buildPoolState(o),r={...s,...a};return this.updateCache(i,r,v),r}async getPoolHandleId(e){const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),i=A(t);return i?i.list.fields.id.id:""}async getMakerPoolPeriods(e,t=!1){const i=[],n=`${e.pool_id}_getMakerPoolPeriods`,s=this.getCache(n,t);return s!==void 0?s:((await this._sdk.ClmmSDK.fullClient.getDynamicFieldsByPage(e.whale_nfts.whale_nfts_handle)).data.forEach(a=>{const r={id:a.objectId,start_time:0,end_time:0,period:Number(a.name.value)};r.start_time=Number(u(e.start_time).add(u(e.interval_day).mul(24*3600).mul(r.period)).toFixed(0,$.ROUND_DOWN)),r.end_time=Number(u(r.start_time).add(u(e.interval_day).mul(24*3600)).toFixed(0,$.ROUND_DOWN)),i.push(r)}),this.updateCache(n,i,v),i)}async getMakerBonusInitConfigs(){var n;const{package_id:e}=this.sdk.sdkOptions.maker_bonus,t=(n=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::config::InitEvent`}))==null?void 0:n.data,i={maker_config_id:"",maker_pool_handle:""};return t.length>0&&t.forEach(s=>{const o=s.parsedJson;o&&(i.maker_config_id=o.config_id)}),i.maker_pool_handle=await this.getPoolHandleId(i.maker_config_id),i}async getPoolMarkerPositionList(e,t,i=!1){const n={},s=[];i||t.forEach(o=>{const a=`${e}_${o.period}_getPoolMarkerPositionList`,r=this.getCache(a);r!==void 0?n[o.period]=r:(n[o.period]=[],s.push(o))});try{s.length>0&&(await this._sdk.ClmmSDK.fullClient.batchGetObjects(s.map(r=>r.id),{showContent:!0})).forEach(r=>{const d=A(r),c=Z.buildMarkerPositions(d);if(c.length>0){const{period_id:l}=c[0],_=t.filter(f=>f.id===l)[0];n[_.period]=c}});const o=[];for(const a in n)n[a].forEach(d=>{o.push(d)});if(o.length>0){const a=await this._sdk.ClmmSDK.Position.getSipmlePositionList(o.map(r=>r.id));for(const r of o)for(const d of a)if(r.id===d.pos_object_id){r.clmm_position=d;break}}}catch(o){console.log(o)}for(const o in n){const a=`${e}_${o}_getPoolMarkerPositionList`;this.updateCache(a,n[o],v)}return n}async updateXCetusRewarderAndFee(e,t,i){const n=await this.calculateTotalPointsAfterMultiper(e,i);for(const s of t)await this.calculateXCetusRewarder(e,s,i.period,n);return t}async calculateXCetusRewarder(e,t,i,n){const s=await this.getPoolBonusInfo(e.rewarders.rewarder_handle,i),{fee_share_rate:o}=this.calculateFeeShareRate(e,t,n),a=u(o).mul(s.total_bonus);return t.is_redeemed?t.bonus_num="0":t.bonus_num=a.toString(),t.bonus_num}calculateFeeShareRate(e,t,i){const n=Z.getBonusPercent(e.config,t.percent),s=u(t.point).mul(n),o=u(s).div(i);return t.point_after_multiplier=s.toString(),t.fee_share_rate=Number(o),{fee_share_rate:Number(o),points_after_multiper:s.toString()}}async calculateTotalPointsAfterMultiper(e,t){const i=await this.getPoolMarkerPositionList(e.whale_nfts.whale_nfts_handle,[t]);let n=u(0);const s=i[t.period];for(const o of s){const a=Z.getBonusPercent(e.config,o.percent),r=u(o.point).mul(a);n=n.add(r)}return n.toString()}async calculateAllXCetusRewarder(e){const t=this._sdk.ClmmSDK.senderAddress;let i=u(0);const n=[];for(const s of e){const o=await this._sdk.MakerModule.getMakerPoolPeriods(s),a=await this._sdk.MakerModule.getPoolMarkerPositionList(s.whale_nfts.whale_nfts_handle,o),r=[];for(const d of o){const c=a[d.period].filter(l=>{var _;return t.length===0?!1:((_=l.clmm_position)==null?void 0:_.owner)===t});c.length>0&&(await this._sdk.MakerModule.updateXCetusRewarderAndFee(s,c,d),c.forEach(l=>{var _;((_=l.clmm_position)==null?void 0:_.position_status)===Xe.Exists&&u(l.bonus_num).greaterThan(0)&&(i=i.add(l.bonus_num),r.includes(l.clmm_position.pos_object_id)||r.push(l.clmm_position.pos_object_id))}))}n.push({bonus_type:s.bonus_type,pool_id:s.pool_id,nft_ids:r})}return{claimtotal:i,claimRecord:n}}async getPoolBonusInfo(e,t,i=!1){const n=`${e}_${t}_getPoolBonusInfo`,s=this.getCache(n,i);if(s!==void 0)return s;const o=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"u64",value:t.toString()}}),a=A(o),r=Z.buildPoolBonusInfo(a);return this.updateCache(n,r,te),r}claimPayload(e){const{maker_bonus:t,xcetus:i}=this.sdk.sdkOptions,n=new b;return n.moveCall({target:`${t.published_at}::${Fe}::claim`,typeArguments:[e.bonus_type],arguments:[n.pure(m(t).maker_config_id),n.pure(e.market_pool_id),n.pure(e.position_nft_id),n.pure(e.phase),n.pure(m(i).lock_manager_id),n.pure(m(i).xcetus_manager_id),n.pure(e.ve_nft_id)]}),n}claimAllPayload(e){const{maker_bonus:t,xcetus:i}=this.sdk.sdkOptions,n=new b;return e.whale_nfts.forEach(s=>{s.nft_ids.forEach(o=>{n.moveCall({target:`${t.published_at}::${Fe}::claim_all`,typeArguments:[s.bonus_type],arguments:[n.object(m(t).maker_config_id),n.object(s.pool_id),n.object(o),n.object(m(i).lock_manager_id),n.object(m(i).xcetus_manager_id),n.object(e.ve_nft_id)]})})}),n}updateCache(e,t,i=te){let n=this._cache[e];n?(n.overdueTime=M(i),n.value=t):n=new ie(t,M(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},se="router",De="router",le=24*3600,Pe=1e3,R=1e11,Y=class{static buildVeNFTDividendInfo(e){const t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(i=>{const n=[];i.fields.value.fields.contents.forEach(s=>{n.push({coin_type:y(s.fields.key.fields.name).source_address,amount:s.fields.value})}),t.rewards.push({period:Number(i.fields.key),rewards:n})}),t}static buildDividendManager(e){const t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(i=>{t.bonus_types.push(y(i.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:ve(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockCetus(e){const t=e.fields,i={id:t.id.id,type:y(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),cetus_amount:t.balance,xcetus_amount:"0",lock_day:0};return i.lock_day=(i.locked_until_time-i.locked_start_time)/le,i}static getAvailableXCetus(e,t){let i=u(0);return t.forEach(n=>{i=i.add(n.xcetus_amount)}),u(e.xcetus_balance).sub(i).toString()}static getWaitUnLockCetuss(e){return e.filter(t=>!Y.isLocked(t))}static getLockingCetuss(e){return e.filter(t=>Y.isLocked(t))}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static buildDividendRewardTypeList(e){const t=new Set;return e.forEach(i=>{i.rewards.forEach(n=>{t.add(n.coin_type)})}),Array.from(t)}static getNextStartTime(e){const t=Date.now()/1e3,{start_time:i,interval_day:n}=e,s=Math.ceil((t-i)/(n*le));return i+s*n*le}},Dt=class{constructor(e){D(this,"_sdk");D(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){const{xcetus:i}=this.sdk.sdkOptions,n=`${e}_getLockUpManagerEvent`,s=this.getCache(n,t);if(s!==void 0)return s;let o;const a=`${i.package_id}::xcetus::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:a}})).data.forEach(d=>{const c=y(V(d)).source_address;if(c===a&&d.data&&d.data.content){const{fields:l}=d.data.content;o={...Ne(d),id:l.id.id,index:l.index,type:c,xcetus_balance:l.xcetus_balance},this.updateCache(n,o,v)}}),o}async getOwnerLockCetuss(e){const{xcetus:t}=this.sdk.sdkOptions,i=[],n=`${t.package_id}::lock_coin::LockedCoin<${this.buileCetusCoinType()}>`,s=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:n}});for(const o of s.data)if(y(V(o)).source_address===n&&o.data){const r=Y.buildLockCetus(o.data.content);r.xcetus_amount=await this.getXCetusAmount(r.id),i.push(r)}return i}async getLockCetus(e){var i;const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((i=t.data)!=null&&i.content){const n=Y.buildLockCetus(t.data.content);return n.xcetus_amount=await this.getXCetusAmount(n.id),n}}async getOwnerCetusCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileCetusCoinType())}mintVeNFTPayload(){const{xcetus:e}=this.sdk.sdkOptions,t=new b;return t.moveCall({target:`${e.published_at}::${se}::mint_venft`,typeArguments:[],arguments:[t.pure(m(e).xcetus_manager_id)]}),t}async convertPayload(e){const{xcetus:t}=this.sdk.sdkOptions,i=new b,n=this.buileCetusCoinType(),s=await z.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,i,BigInt(e.amount),n);return e.venft_id===void 0?i.moveCall({target:`${t.published_at}::${se}::mint_and_convert`,typeArguments:[],arguments:[i.object(m(t).lock_manager_id),i.object(m(t).xcetus_manager_id),s,i.pure(e.amount)]}):i.moveCall({target:`${t.published_at}::${se}::convert`,typeArguments:[],arguments:[i.object(m(t).lock_manager_id),i.object(m(t).xcetus_manager_id),s,i.pure(e.amount),i.pure(e.venft_id)]}),i}redeemLockPayload(e){const{xcetus:t}=this.sdk.sdkOptions,i=new b;return i.moveCall({target:`${t.published_at}::${se}::redeem_lock`,typeArguments:[],arguments:[i.pure(m(t).lock_manager_id),i.pure(m(t).xcetus_manager_id),i.pure(e.venft_id),i.pure(e.amount),i.pure(e.lock_day),i.pure(g)]}),i}redeemPayload(e){const{xcetus:t}=this.sdk.sdkOptions,i=new b;return i.moveCall({target:`${t.published_at}::${se}::redeem`,typeArguments:[],arguments:[i.pure(m(t).lock_manager_id),i.pure(m(t).xcetus_manager_id),i.pure(e.venft_id),i.pure(e.lock_id),i.pure(g)]}),i}redeemDividendPayload(e,t){const{xcetus:i,xcetus_dividends:n}=this.sdk.sdkOptions,s=new b;return t.forEach(o=>{s.moveCall({target:`${i.published_at}::${De}::redeem`,typeArguments:[o],arguments:[s.object(m(n).dividend_manager_id),s.object(e)]})}),s}redeemDividendV2Payload(e,t,i){const{xcetus_dividends:n}=this.sdk.sdkOptions;let s=new b;return t.filter(a=>i.includes(a)).length>0&&(s=this.redeemDividendXTokenPayload(e,s)),t.forEach(a=>{i.includes(a)||s.moveCall({target:`${n.published_at}::${De}::redeem_v2`,typeArguments:[a],arguments:[s.object(m(n).dividend_manager_id),s.object(e),s.object(g)]})}),s}redeemDividendXTokenPayload(e,t){const{xcetus_dividends:i,xcetus:n}=this.sdk.sdkOptions,{xcetus_manager_id:s,lock_manager_id:o}=m(n),{dividend_manager_id:a}=m(i);return t=t===void 0?new b:t,t.moveCall({target:`${i.published_at}::${De}::redeem_xtoken`,typeArguments:[],arguments:[t.object(o),t.object(s),t.object(a),t.object(e),t.object(g)]}),t}buileCetusCoinType(){return`${this.sdk.sdkOptions.cetus_faucet.package_id}::cetus::CETUS`}buileXTokenCoinType(e=this._sdk.sdkOptions.xcetus.package_id,t="xcetus",i="XCETUS"){return`${e}::${t}::${i}`}cancelRedeemPayload(e){const{xcetus:t}=this.sdk.sdkOptions,i=new b;return i.moveCall({target:`${t.published_at}::${se}::cancel_redeem_lock`,typeArguments:[],arguments:[i.pure(m(t).lock_manager_id),i.pure(m(t).xcetus_manager_id),i.pure(e.venft_id),i.pure(e.lock_id),i.pure(g)]}),i}async getInitConfigs(){var a,r;const{package_id:e}=this.sdk.sdkOptions.xcetus,t=`${e}_getInitFactoryEvent`,i=this.getCache(t);if(i!==void 0)return i;const n=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xcetus::InitEvent`}))==null?void 0:a.data,s={xcetus_manager_id:"",lock_manager_id:"",lock_handle_id:""};n.length>0&&n.forEach(d=>{const c=d.parsedJson;c&&(s.xcetus_manager_id=c.xcetus_manager)});const o=(r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:r.data;return o.length>0&&o.forEach(d=>{const c=d.parsedJson;c&&(s.lock_manager_id=c.lock_manager)}),s.lock_handle_id=(await this.getLockUpManager()).lock_infos.lock_handle_id,this.updateCache(t,s,v),s}async getLockUpManager(e=!1){const{lock_manager_id:t}=m(this.sdk.sdkOptions.xcetus),i=`${t}_getLockUpManager`,n=this.getCache(i,e);if(n!==void 0)return n;const s=await this.sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=Y.buildLockUpManager(A(s));return this.updateCache(i,o,v),o}async getDividendConfigs(){var o;const{package_id:e}=this.sdk.sdkOptions.xcetus_dividends,t=`${e}_getDividendManagerEvent`,i=this.getCache(t);if(i!==void 0)return i;const n=(o=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:o.data,s={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""};return n.length>0&&n.forEach(a=>{const r=a.parsedJson;r&&(s.dividend_manager_id=r.manager_id,s.dividend_admin_id=r.admin_id,s.dividend_settle_id=r.settle_id,this.updateCache(t,s,v))}),s}async getDividendManager(e=!1){const{dividend_manager_id:t}=m(this._sdk.sdkOptions.xcetus_dividends),i=`${t}_getDividendManager`,n=this.getCache(i,e);if(n!==void 0)return n;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=A(s),a=Y.buildDividendManager(o);return this.updateCache(i,a,v),a}async getXcetusManager(e=!0){const{xcetus_manager_id:t}=m(this._sdk.sdkOptions.xcetus),i=`${t}_getXcetusManager`,n=this.getCache(i,e);if(n)return n;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=A(s),a={id:o.id.id,index:Number(o.index),has_venft:{handle:o.has_venft.fields.id.id,size:o.has_venft.fields.size},nfts:{handle:o.nfts.fields.id.id,size:o.nfts.fields.size},total_locked:o.total_locked,treasury:o.treasury.fields.total_supply.fields.value};return this.updateCache(i,a),a}async getVeNFTDividendInfo(e,t){try{const i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),n=A(i);return Y.buildVeNFTDividendInfo(n)}catch{return}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const i=await this.getLockUpManager(),n=u(R).mul(u(i.max_lock_day).sub(u(t))).mul(u(i.max_percent_numerator).sub(u(i.min_percent_numerator))).div(u(i.max_lock_day).sub(u(i.min_lock_day))),s=u(R).mul(u(i.max_percent_numerator)).sub(n).div(u(Pe)).div(R);return{amountOut:u(s).mul(u(e)).round().toString(),percent:s.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const i=await this.getLockUpManager(),n=u(R).mul(u(i.max_lock_day).sub(u(t))).mul(u(i.max_percent_numerator).sub(u(i.min_percent_numerator))).div(u(i.max_lock_day).sub(u(i.min_lock_day))),s=u(R).mul(u(i.max_percent_numerator)).sub(n).div(u(Pe)).div(R);return{amountOut:u(e).div(s).toFixed(0,$.ROUND_UP),percent:s.toString()}}async getXCetusAmount(e){const{lock_handle_id:t}=m(this._sdk.sdkOptions.xcetus),i=`${e}_getXCetusAmount`,n=this.getCache(i);if(n!==void 0)return n;try{const s=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),o=A(s);if(o){const{xcetus_amount:a}=o.value.fields.value.fields;return this.updateCache(i,a,v),a}}catch{}return"0"}async getVeNftAmount(e,t){try{const i=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),n=A(i);if(n){const{lock_amount:s,xcetus_amount:o}=n.value.fields.value.fields;return{lock_amount:s,xcetus_amount:o}}}catch{}return{lock_amount:"0",xcetus_amount:"0"}}async getPhaseDividendInfo(e,t=!1){const n=(await this.getDividendManager()).dividends.id,s=`${n}_${e}_getPhaseDividendInfo`,o=this._sdk.getCache(s,t);if(o)return o;const a=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:n,name:{type:"u64",value:e}}),r=A(a),d=r.value.fields.value.fields,c=d.redeemed_num.fields.contents.map(h=>({name:h.fields.key.fields.name,value:h.fields.value})),l=d.bonus_types.map(h=>h.fields.name),_=d.bonus.fields.contents.map(h=>({name:h.fields.key.fields.name,value:h.fields.value})),f={id:_e(a),phase:r.name,settled_num:d.settled_num,register_time:d.register_time,redeemed_num:c,is_settled:d.is_settled,bonus_types:l,bonus:_,phase_end_time:""};return this.updateCache(s,f),f}updateCache(e,t,i=te){let n=this._cache[e];n?(n.overdueTime=M(i),n.value=t):n=new ie(t,M(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},Ot="factory",q="oversubscribe_pool",Ve=1e6,be=1e18,oe="router",Ke="router",x=class{static buildIdoPoolImmutables(e){return{pool_address:Q(e.pool_id),coin_type_sale:y(e.sale_coin_type.name).full_address,coin_type_raise:y(e.raise_coin_type.name).full_address,tick_spacing:Number(e.tick_spacing),total_supply:e.total_supply,min_purchase:e.min_purchase_amount,max_purchase:e.max_purchase_amount}}static buildIdoPool(e){const t=V(e),i=y(t),n=A(e),s={pool_address:Q(n.id.id),coin_type_sale:i.type_arguments[0],coin_type_raise:i.type_arguments[1],tick_spacing:Number(n.tick_spacing),total_supply:n.total_supply,min_purchase:n.min_purchase_amount,max_purchase:n.max_purchase_amount},o={start_time:Number(n.duration_manager.fields.start_time),lock_up_duration:Number(n.duration_manager.fields.lock_up_duration),purchase_duration:Number(n.duration_manager.fields.purchase_duration),end_time:0};o.end_time=o.start_time+o.purchase_duration;const a={complete_raise_limit:n.complete_raise_limit,liquidity_injection_ratio:u(n.liquidity_injection_ratio).div(Ve).toNumber(),current_sqrt_price_min:n.current_sqrt_price_min,current_sqrt_price_max:n.current_sqrt_price_max,owner:n.owner,sale_coin_amount:n.sale_coin,raise_coin_amount:n.raise_coin,price:n.price,current_price:n.price,duration_summary:o,is_cancelled:n.is_cancelled,is_liquidity_injected:n.is_liquidity_injected,liquidity_used_raise_amount:n.liquidity_used_raise_amount,liquidity_used_sale_amount:n.liquidity_used_sale_amount,purchase_summary:{size:Number(n.purchase_manager.fields.purchases.fields.size),purchase_handle:n.purchase_manager.fields.purchases.fields.id.id},total_purchase_amount:n.total_purchase_amount,white_summary:{white_list_id:n.white_list.fields.id.id,protection_limit_used:n.white_list.fields.protection_limit_used,protection_hard_cap:n.white_list.fields.protection_hard_cap,white_handle:n.white_list.fields.addresses.fields.id.id,size:Number(n.white_list.fields.addresses.fields.size)},pool_status:"Upcoming",max_raise_amount:"",sale_decimals:0,raise_decimals:0,is_withdrawn:n.is_withdrawn};return x.updatePoolStatus(a),{...s,...a}}static is_init_period(e){return Number(u(Date.now()/1e3).toFixed(0))<e.start_time}static is_purchase_period(e){const t=Number(u(Date.now()/1e3).toFixed(0));return t>=e.start_time&&t<=e.start_time+e.purchase_duration}static is_claim_period(e){const t=Number(u(Date.now()/1e3).toFixed(0)),i=e.start_time+e.purchase_duration;return t>i}static is_can_inject_liquidity(e){return!e.is_cancelled&&e.liquidity_injection_ratio!==0&&x.is_claim_period(e.duration_summary)&&!e.is_liquidity_injected}static is_can_withdraw(e){return e.is_withdrawn?!1:x.is_sale_failed(e)?!0:(e.liquidity_injection_ratio===0||e.is_liquidity_injected)&&x.is_claim_period(e.duration_summary)}static is_sale_failed(e){return!!(e.is_cancelled||x.is_claim_period(e.duration_summary)&&u(e.total_purchase_amount).lessThan(e.complete_raise_limit))}static buildPurchaseInfo(e){return{...e.value.fields.value.fields,owner:e.name}}static calculateRedeemAmount(e,t){let i,n;if(x.is_sale_failed(e))i="0",n="0";else if(t.is_redeemed)i=t.obtained_sale_amount,n=t.used_raise_amount;else if(u(e.total_purchase_amount).lessThanOrEqualTo(e.max_raise_amount))i=u(t.purchased_raise_amount).mul(be).div(e.price).toString(),n=t.purchased_raise_amount;else{const o=x.redeemForSaleOversubcribe(e,t);i=o.user_obtained_sale_amount,n=o.user_used_raise_amount_ceil}i=$.floor(i);const s=$.floor(u(t.purchased_raise_amount).sub(n).toString());return{obtained_sale_amount:i,refunded_raise_amount:s}}static calculateWithdrawAmount(e){let t,i;const n=u(e.total_supply).mul(e.liquidity_injection_ratio);if(x.is_sale_failed(e))t="0",i=u(n).add(e.total_supply);else{const{max_raise_amount:s}=e;u(e.total_purchase_amount).greaterThanOrEqualTo(s)?(t=u(s).sub(e.liquidity_used_raise_amount).toString(),i="0"):(t=u(e.total_purchase_amount).sub(e.liquidity_used_raise_amount),i=u(e.total_supply).add(n).sub(e.liquidity_used_sale_amount).sub(x.get_sold_amount(e)))}return{obtained_raise_amount:$.floor(t).toString(),refunded_sale_amount:$.ceil(i).toString()}}static get_sold_amount(e){return u(e.total_purchase_amount).greaterThanOrEqualTo(e.max_raise_amount)?e.total_supply:u(e.total_purchase_amount).mul(be).div(e.price)}static redeemForSaleOversubcribe(e,t){const i=t.protection_raise_amount,n=u(t.purchased_raise_amount).sub(i),s=e.max_raise_amount,{protection_limit_used:o}=e.white_summary,a=u(s).sub(o),r=u(e.total_purchase_amount).sub(o),d=$.ceil(n.mul(a).div(r).add(i)),c=$.floor(n.mul(a).div(r).add(i));return{user_obtained_sale_amount:$.floor(u(e.total_supply).mul(c).div(s)),user_used_raise_amount_ceil:d}}static raiseTotalAmount(e){const t=u(e.sale_decimals-e.raise_decimals).abs().toNumber();return e.sale_decimals>e.raise_decimals?u(e.total_supply).mul(e.current_price).div(u(10).pow(u(t))).toString():u(e.total_supply).mul(e.current_price).mul(u(10).pow(u(t))).toString()}static updatePoolStatus(e){const t=Number(u(Date.now()/1e3).toFixed(0)),i=e.duration_summary,n=i.start_time+i.purchase_duration;e.is_cancelled?e.pool_status="Canceled":t<i.start_time?e.pool_status="Upcoming":t>i.start_time&&t<n?e.pool_status="Live":u(e.total_purchase_amount).lessThan(e.complete_raise_limit)?e.pool_status="Failed":e.pool_status="Ended"}static async calculatePoolUiPrice(e,t){const i=await e.ClmmSDK.CetusConfig.getTokenListByCoinTypes([t.coin_type_sale,t.coin_type_raise]),n=i[t.coin_type_sale].decimals,s=i[t.coin_type_raise].decimals;t.current_price=B.priceFixToReal(Number(u(t.price).div(u(be)).toString()),n,s).toString(),t.sale_decimals=n,t.raise_decimals=s,t.max_raise_amount=this.raiseTotalAmount(t)}},Bt=class{constructor(e){D(this,"_sdk");this._sdk=e}async getPools(e=[],t=!1){const i=[];if(e.length>0){if(e.filter(s=>{const o=`${s}_getPool`,a=this._sdk.getCache(o,t);return a?(i.push(a),!1):!0}).length>0){const s=await this._sdk.ClmmSDK.fullClient.batchGetObjects(e,{showType:!0,showContent:!0});for(const o of s){const a=await this.buildIdoWarpPool(o);a&&i.push(a)}}}else{const n=await this._sdk.Launchpad.getPools(),s=await this._sdk.Ido.getPools();n.forEach(o=>{i.push({...o,version:"1"})}),s.forEach(o=>{i.push({...o,version:"2"})})}return i.forEach(n=>{const s=`${n.pool_address}_getPool`;this._sdk.updateCache(s,n)}),i}async getPool(e,t=!0){const i=`${e}_getPool`,n=this._sdk.getCache(i,t);if(n)return n;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),o=await this.buildIdoWarpPool(s);return this._sdk.updateCache(i,o),o}async getJoinPools(e,t){const i=[],n=t.filter(o=>o.version==="1"),s=t.filter(o=>o.version==="2");if(n.length>0){const o=await this._sdk.Launchpad.getPurchaseMarks(e,n.map(a=>a.pool_address),!1);n.forEach(a=>{for(const r of o)if(r.pool_id===a.pool_address){i.push(a);break}})}for(const o of s)await this._sdk.Ido.getPurchaseInfo(o.purchase_summary.purchase_handle,e,!1)&&i.push(o);return i}async getOwnerPools(e,t){return t.filter(i=>i.owner===X(e))}async creatPurchasePayload(e,t){return e.version==="1"?await this._sdk.Launchpad.creatPurchasePayload({pool_address:e.pool_address,purchase_amount:t,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise}):await this._sdk.Ido.creatPurchasePayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,purchase_handle:e.purchase_summary.purchase_handle,raise_amount:t.toString()})}async creatRedeemPayload(e){return e.version==="1"?await this._sdk.Launchpad.creatClaimPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise}):await this._sdk.Ido.redeemPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,purchase_handle:e.purchase_summary.purchase_handle})}async creatWithdrawPayload(e){if(e.version==="1"){const i=await B.getWithdrawSale(e),n=await B.getWithdrawRaise(e);return this._sdk.Launchpad.creatWithdrawPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise,sale_amount:BigInt(i),raise_amount:BigInt(n)})}return this._sdk.Ido.withdrawPayload({pool_address:e.pool_address,coin_type_sale:e.coin_type_sale,coin_type_raise:e.coin_type_raise})}unlockNftPayload(e,t){return e.version==="1"?this._sdk.Launchpad.creatUnlockNftPayload(t):this._sdk.Ido.unlockNftPayload({lock_nft_id:t.lock_nft,nft_type:t.nft_type})}async getLockNFTList(e){let t=[];return e.version==="1"&&(t=await this._sdk.Launchpad.getLockNFTList(e.owner)),t=await this._sdk.Ido.getLockNFTList(e.owner),t.filter(n=>n.coin_type_a===e.coin_type_sale&&n.coin_type_b===e.coin_type_raise||n.coin_type_a===e.coin_type_raise&&n.coin_type_b===e.coin_type_sale)}async isWhiteListUser(e,t){return t.version==="1"?await this._sdk.Launchpad.isWhiteListUser(t.white_summary.white_handle,e):!!await this._sdk.Ido.getWhiteProtectionLimit(t.white_summary.white_handle,e)}async getPurchaseInfo(e,t){if(t.version==="1"){const n=await this._sdk.Launchpad.getPurchaseMarks(e,[t.pool_address]);return n.length>0?n[0]:void 0}return await this._sdk.Ido.getPurchaseInfo(t.purchase_summary.purchase_handle,e)}async getwhiteProtectionInfo(e,t,i=!1){if(t.version==="1")return await this._sdk.Launchpad.getPurchaseAmount(t.white_summary.white_handle,e);const n=await this._sdk.Ido.getPurchaseInfo(t.purchase_summary.purchase_handle,e,i);if(n)return{safe_limit_amount:n.protection_raise_limit,safe_purchased_amount:n.protection_raise_amount};const s=await this._sdk.Ido.getWhiteProtectionLimit(t.white_summary.white_handle,e,!1);return s?{safe_limit_amount:s,safe_purchased_amount:"0"}:{safe_limit_amount:"0",safe_purchased_amount:"0"}}async calculateWithdrawAmount(e){if(e.version==="1"){const t=await B.getHistoryWithdrawRaise(this._sdk,e),i=await B.getHistoryWithdrawSale(this._sdk,e);return{obtained_raise_amount:t,refunded_sale_amount:i}}return x.calculateWithdrawAmount(e)}async buildIdoWarpPool(e){const t=we(e);if(y(t).address===this._sdk.sdkOptions.ido.package_id){const i=x.buildIdoPool(e);return await x.calculatePoolUiPrice(this._sdk,i),{...i,version:"2"}}if(y(t).address===this._sdk.sdkOptions.launchpad.package_id){const i=B.buildLaunchPadPool(e);return await B.calculatePoolPrice(this._sdk,i),{...i,version:"1"}}}},ee=class{static buildVeNFTDividendInfo(e){const t={id:e.id.id,ve_nft_id:e.name,rewards:[]};return e.value.fields.value.fields.dividends.fields.contents.forEach(i=>{const n=[];i.fields.value.fields.contents.forEach(s=>{n.push({coin_type:y(s.fields.key.fields.name).source_address,amount:s.fields.value})}),t.rewards.push({period:Number(i.fields.key),rewards:n})}),t}static buildDividendManager(e){const t={id:e.id.id,dividends:{id:e.dividends.fields.id.id,size:e.dividends.fields.size},venft_dividends:{id:e.venft_dividends.fields.id.id,size:e.venft_dividends.fields.size},bonus_types:[],start_time:Number(e.start_time),interval_day:Number(e.interval_day),balances:{id:e.balances.fields.id.id,size:e.balances.fields.size},is_open:e.is_open};return e.bonus_types.forEach(i=>{t.bonus_types.push(y(i.fields.name).source_address)}),t}static buildLockUpManager(e){return{id:e.id.id,balance:e.balance,treasury_manager:e.treasury_manager,extra_treasury:e.extra_treasury,lock_infos:{lock_handle_id:e.lock_infos.fields.id.id,size:Number(e.lock_infos.fields.size)},type_name:ve(e.type_name.fields.name),min_lock_day:Number(e.min_lock_day),max_lock_day:Number(e.max_lock_day),package_version:Number(e.package_version),max_percent_numerator:Number(e.max_percent_numerator),min_percent_numerator:Number(e.min_percent_numerator)}}static buildLockToken(e){const t=e.fields,i={id:t.id.id,type:y(e.type).source_address,locked_start_time:Number(t.locked_start_time),locked_until_time:Number(t.locked_until_time),token_amount:t.balance,xtoken_amount:"0",lock_day:0};return i.lock_day=(i.locked_until_time-i.locked_start_time)/le,i}static getAvailableXToken(e,t){let i=u(0);return t.forEach(n=>{i=i.add(n.xtoken_amount)}),u(e.xtoken_balance).sub(i).toString()}static getWaitUnLockTokens(e){return e.filter(t=>!ee.isLocked(t))}static getLockingTokens(e){return e.filter(t=>ee.isLocked(t))}static isLocked(e){return e.locked_until_time>Date.parse(new Date().toString())/1e3}static getNextStartTime(e,t=le){const i=Date.now()/1e3,{start_time:n,interval_day:s}=e,o=Math.ceil((i-n)/(s*t));return n+o*s*t}},jt=class{constructor(e){D(this,"_sdk");D(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getPoolImmutables(e="all",t=!1){const{package_id:i}=this._sdk.sdkOptions.ido,n=`${i}_getPoolImmutables`,s=this.getCache(n,t),o={data:[],hasNextPage:!1},a=[];if(s!==void 0&&a.push(...s),a.length===0)try{const r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${i}::oversubscribe_pool::CreatePoolEvent`},e);r.data.forEach(d=>{const c=d.parsedJson;if(c){const l=x.buildIdoPoolImmutables(c);a.push(l)}}),o.hasNextPage=r.hasNextPage,o.nextCursor=r.nextCursor,this.updateCache(n,a,v)}catch(r){console.log("getPoolImmutables",r)}return o.data=a,o}async getPools(e=[],t=!1){const i=[];let n=[];e.length>0?n=[...e]:(await this.getPoolImmutables("all",t)).data.forEach(a=>{n.push(a.pool_address)});const s=await this._sdk.ClmmSDK.fullClient.batchGetObjects(n,{showType:!0,showContent:!0});for(const o of s){const a=x.buildIdoPool(o);await x.calculatePoolUiPrice(this._sdk,a),i.push(a);const r=`${a.pool_address}_getPoolObject`;this.updateCache(r,a,v)}return i}async getPool(e,t=!0){const i=`${e}_getPoolObject`,n=this.getCache(i,t);if(n!==void 0)return n;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0,showType:!0}}),o=x.buildIdoPool(s);return await x.calculatePoolUiPrice(this._sdk,o),this.updateCache(i,o),o}async getIdoConfigs(e=!1){var d;const{package_id:t}=this._sdk.sdkOptions.ido,i=`${t}_getInitEvent`,n=this.getCache(i,e);if(n!==void 0)return n;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showPreviousTransaction:!0}}),o=qe(s),a=(d=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({Transaction:o}))==null?void 0:d.data,r={pools_id:"",admin_cap_id:"",package_version_id:""};return a.length>0&&(a.forEach(c=>{console.log("item: ",c);const l=c.parsedJson;if(l)switch(y(c.type).full_address){case`${t}::config::InitConfigEvent`:r.admin_cap_id=l.admin_cap_id,r.package_version_id=l.package_version_id;break;case`${t}::factory::InitFactoryEvent`:r.pools_id=l.pools_id;break}}),this.updateCache(i,r,v)),r}async getPurchaseInfo(e,t,i=!0){const n=`${e}_${t}_getPurchaseInfo`,s=this.getCache(n,i);if(s)return s;try{const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}}),a=x.buildPurchaseInfo(A(o));return this.updateCache(n,a,te),a}catch{return}}async getLockNFT(e,t=!1){const i=`${e}_getLockNFT`,n=this.getCache(i,t);if(n!==void 0)return n;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0,showDisplay:!0,showOwner:!0}});if(!s.error)return $e(s)}async getLockNFTList(e){var s;const{clmm_pool:t}=this._sdk.ClmmSDK.sdkOptions,{ido:i}=this._sdk.sdkOptions,n=[];try{const o=(s=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{filter:{StructType:`${i.package_id}::lock::LockedNFT<${t.package_id}::position::Position>`},options:{showContent:!0}}))==null?void 0:s.data;for(const a of o){const r=A(a);if(r){const d=r.nft.fields,c={locked_at:Number(r.locked_at),lock_duration:Number(r.lock_duration),lock_nft_id:r.id.id,type:r.nft.type,...d};c.end_lock_time=c.locked_at+c.lock_duration,c.coin_type_a=y(d.coin_type_a.fields.name).full_address,c.coin_type_b=y(d.coin_type_b.fields.name).full_address,c.id=d.id.id,c.tick_lower_index=Ce(BigInt(d.tick_lower_index.fields.bits)),c.tick_upper_index=Ce(BigInt(d.tick_upper_index.fields.bits)),n.push(c)}}return n}catch(o){return console.log("getLockNFTList:",o),[]}}async creatPool(e){const{ido:t}=this.sdk.sdkOptions;yt(X(e.coin_type_sale),X(e.coin_type_raise))&&(e.price_min=u(1).div(e.price_max).toNumber(),e.price_max=u(1).div(e.price_min).toNumber());const n=B.priceRealToFix(Number(e.price),e.sale_decimals,e.raise_decimals),s=j.priceToSqrtPriceX64(u(e.price_min),e.sale_decimals,e.raise_decimals).toString(),o=j.priceToSqrtPriceX64(u(e.price_max),e.sale_decimals,e.raise_decimals).toString(),a=new b,r=u(e.total_supply).add(u(e.total_supply).mul(u(e.liquidity_injection_ratio))).toNumber(),d=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_sale),c=z.buildCoinInputForAmount(a,d,BigInt(r),e.coin_type_sale,!1),l=[a.pure(m(t).admin_cap_id),a.pure(m(t).package_version_id),a.pure(m(t).pools_id),a.pure(X(e.owner)),a.pure(u(n).mul(be).toString()),a.pure(e.total_supply),a.pure(e.complete_raise_limit),a.pure(e.min_purchase_amount),a.pure(e.max_purchase_amount),a.pure(e.start_time),a.pure(e.purchase_duration),a.pure(e.lock_up_duration),a.pure((e.liquidity_injection_ratio*Ve).toString()),a.pure(s),a.pure(o),a.pure(e.tick_spacing.toString()),c.transactionArgument,a.pure(e.protection_hard_cap.toString()),a.pure(g)],_=[e.coin_type_sale,e.coin_type_raise];return a.moveCall({target:`${t.published_at}::${Ot}::create_oversubscribe_pool`,typeArguments:_,arguments:l}),a}async creatPurchasePayload(e){const{ido:t}=this.sdk.sdkOptions,i=new b,n=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1),s=await this._sdk.ClmmSDK.getOwnerCoinAssets(this._sdk.ClmmSDK.senderAddress,e.coin_type_raise),o=z.buildCoinInputForAmount(i,s,BigInt(e.raise_amount),e.coin_type_raise,!1),a=[e.coin_type_sale,e.coin_type_raise];let r,d;return n?(d="purchase",r=[i.object(m(t).package_version_id),i.object(e.pool_address),i.object(n.purchase_certificate_id),i.pure(e.raise_amount.toString()),o.transactionArgument,i.pure(g)]):(d="create_certificate_and_purchase",r=[i.object(m(t).package_version_id),i.object(e.pool_address),i.pure(e.raise_amount.toString()),o.transactionArgument,i.pure(g)]),i.moveCall({target:`${t.published_at}::${q}::${d}`,typeArguments:a,arguments:r}),i}async redeemPayload(e){const{ido:t}=this.sdk.sdkOptions,i=await this.getPurchaseInfo(e.purchase_handle,this._sdk.ClmmSDK.senderAddress,!1);if(i===void 0)throw Error("get purchase certificate fail");const n=new b,s=[e.coin_type_sale,e.coin_type_raise],o=[n.pure(m(t).package_version_id),n.pure(e.pool_address),n.pure(i.purchase_certificate_id),n.pure(g)];return n.moveCall({target:`${t.published_at}::${q}::redeem`,typeArguments:s,arguments:o}),n}injectLiquidityPayload(e){const{ido:t}=this.sdk.sdkOptions,{clmm_pool:i}=this.sdk.ClmmSDK.sdkOptions,n=new b,s=[e.coin_type_sale,e.coin_type_raise],o=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",a=[n.pure(m(t).package_version_id),n.pure(e.pool_address),n.pure(m(i).global_config_id),n.pure(e.clmm_pool_address),n.pure(g)];return n.moveCall({target:`${t.published_at}::${q}::${o}`,typeArguments:s,arguments:a}),n}unPauseInjectLiquidity(e){const{ido:t}=this.sdk.sdkOptions,{integrate:i,clmm_pool:n}=this.sdk.ClmmSDK.sdkOptions,s=new b;s.moveCall({target:`${i.published_at}::${je}::unpause_pool`,typeArguments:[e.coin_type_a,e.coin_type_b],arguments:[s.object(m(n).global_config_id),s.object(e.clmm_pool_address)]});const o=[e.coin_type_sale,e.coin_type_raise],a=e.is_reverse?"inject_liquidity_with_reverse_clmm_pool":"inject_liquidity_with_forward_clmm_pool",r=[s.object(m(t).package_version_id),s.object(e.pool_address),s.object(m(n).global_config_id),s.object(e.clmm_pool_address),s.object(g)];return s.moveCall({target:`${t.published_at}::${q}::${a}`,typeArguments:o,arguments:r}),s}async findClmmPoolForLiquidity(e){let t=null,i=!1;const n=await this.sdk.ClmmSDK.Pool.getPoolImmutables();for(const s of n){if(s.coinTypeA===e.coin_type_sale&&s.coinTypeB===e.coin_type_raise&&Number(s.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(s.poolAddress);break}if(s.coinTypeA===e.coin_type_raise&&s.coinTypeB===e.coin_type_sale&&Number(s.tickSpacing)===e.tick_spacing){t=await this._sdk.ClmmSDK.Pool.getPool(s.poolAddress),i=!0;break}}return t&&(u(t.current_sqrt_price).lessThanOrEqualTo(e.current_sqrt_price_min)||u(t.current_sqrt_price).greaterThanOrEqualTo(e.current_sqrt_price_max))?(console.log("clmmPool: ",t.poolAddress),{is_reverse:i,clmmPool:null}):{is_reverse:i,clmmPool:t}}withdrawPayload(e){const{ido:t}=this.sdk.sdkOptions,i=new b,n=[e.coin_type_sale,e.coin_type_raise],s=[i.object(m(t).package_version_id),i.object(e.pool_address),i.object(g)];return i.moveCall({target:`${t.published_at}::${q}::withdraw`,typeArguments:n,arguments:s}),i}updateWhitelistCapPayload(e){const{ido:t}=this.sdk.sdkOptions,i=new b,n=[e.coin_type_sale,e.coin_type_raise];return e.add_whites&&e.add_whites.addresses.length>0&&i.moveCall({target:`${t.published_at}::${q}::add_white_listed_addresses`,typeArguments:n,arguments:[i.object(m(t).admin_cap_id),i.object(m(t).package_version_id),i.object(e.pool_address),i.makeMoveVec({type:"address",objects:e.add_whites.addresses.map(s=>i.pure(Q(s),"address"))}),i.pure(e.add_whites.protection_limit),i.object(g)]}),e.remove_whites&&e.remove_whites.length>0&&i.moveCall({target:`${t.published_at}::${q}::remove_white_listed_addresses`,typeArguments:n,arguments:[i.object(m(t).admin_cap_id),i.object(m(t).package_version_id),i.object(e.pool_address),i.makeMoveVec({type:"address",objects:e.remove_whites.map(s=>i.pure(Q(s),"address"))}),i.object(g)]}),e.update_whites&&e.update_whites.forEach(s=>{i.moveCall({target:`${t.published_at}::${q}::update_white_listed_address`,typeArguments:n,arguments:[i.object(m(t).admin_cap_id),i.object(m(t).package_version_id),i.object(e.pool_address),i.object(s.address),i.pure(s.protection_limit),i.object(g)]})}),i}creatCancelPoolPayload(e){const{ido:t}=this.sdk.sdkOptions,i=new b,n=[e.coin_type_sale,e.coin_type_raise],s=[i.pure(m(t).admin_cap_id),i.pure(m(t).package_version_id),i.pure(e.pool_address),i.pure(g)];return i.moveCall({target:`${t.published_at}::${q}::cancel`,typeArguments:n,arguments:s}),i}updatePoolOwnerPayload(e,t){const{ido:i}=this.sdk.sdkOptions;t=t===void 0?new b:t;const n=[e.coin_type_sale,e.coin_type_raise],s=[t.object(m(i).admin_cap_id),t.object(m(i).package_version_id),t.object(e.pool_address),t.object(e.new_owner),t.object(g)];return t.moveCall({target:`${i.published_at}::${q}::update_pool_owner`,typeArguments:n,arguments:s}),t}updatePoolDuractionPayload(e,t){const{ido:i}=this.sdk.sdkOptions;t=t===void 0?new b:t;const n=[e.coin_type_sale,e.coin_type_raise],s=[t.object(m(i).admin_cap_id),t.object(m(i).package_version_id),t.object(e.pool_address),t.pure(e.start_time),t.pure(e.purchase_duration),t.pure(e.lock_duration),t.object(g)];return t.moveCall({target:`${i.published_at}::${q}::update_pool_duration`,typeArguments:n,arguments:s}),t}updateProtectionHardCapPayload(e,t){const{ido:i}=this.sdk.sdkOptions;t=t===void 0?new b:t;const n=[e.coin_type_sale,e.coin_type_raise],s=[t.object(m(i).admin_cap_id),t.object(m(i).package_version_id),t.object(e.pool_address),t.pure(e.protection_hard_cap),t.object(g)];return t.moveCall({target:`${i.published_at}::${q}::update_protection_hard_cap`,typeArguments:n,arguments:s}),t}unlockNftPayload(e){const{ido:t}=this.sdk.sdkOptions,i=new b,n=[e.nft_type],s=[i.pure(e.lock_nft_id),i.pure(g)];return i.moveCall({target:`${t.published_at}::lock::unlock_nft`,typeArguments:n,arguments:s}),i}async isAdminCap(e){const{ido:t}=this._sdk.sdkOptions,i=`${t.package_id}_${e}_isAdminCap`,n=this.getCache(i);if(n)return n;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:m(t).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(s);const o=we(s),a=ke(s);let r=!1;return a&&o&&y(o).source_address===`${t.package_id}::config::AdminCap`&&(r=X(a.AddressOwner)===X(e)),this.updateCache(i,r,v),r}async getWhiteProtectionLimit(e,t,i=!0){const n=`${e}_${t}_getWhiteProtectionLimit`,s=this._sdk.getCache(n,i);if(s)return s;try{const o=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"address",value:t}});if(o&&o.data){const a=A(o);return this._sdk.updateCache(n,a.value),a.value}return}catch{return}}async getWhiteList(e,t){var n;const i={type:"address",value:t};try{const s=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:i}),o=A(s);if(console.log(o),o)return(n=o==null?void 0:o.value)==null?void 0:n.fields}catch{}return{safe_limit_amount:"0",safe_purchased_amount:"0"}}async getAdminAddress(){const{ido:e}=this._sdk.sdkOptions,t=`${m(e).admin_cap_id}_getAdminAddress`,i=this.getCache(t);if(i)return i;const n=await this._sdk.ClmmSDK.fullClient.getObject({id:m(e).admin_cap_id,options:{showType:!0,showOwner:!0}});console.log(n);const s=we(n),o=ke(n);if(o&&s&&y(s).source_address===`${e.package_id}::config::AdminCap`){const r=X(o.AddressOwner);return this.updateCache(t,r,v),r}return""}updateCache(e,t,i=v){let n=this._cache[e];n?(n.overdueTime=M(i),n.value=t):n=new ie(t,M(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},xt=class{constructor(e){D(this,"_sdk");D(this,"_cache",{});this._sdk=e}get sdk(){return this._sdk}async getOwnerVeNFT(e,t=!0){const{xtoken:i}=this.sdk.sdkOptions,n=`${e}_getLockUpManagerEvent`,s=this.getCache(n,t);if(s!==void 0)return s;let o;const a=`${i.package_id}::xtoken::VeNFT`;return(await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0,showDisplay:!0},filter:{StructType:a}})).data.forEach(d=>{const c=y(V(d)).source_address;if(c===a&&d.data&&d.data.content){const{fields:l}=d.data.content;o={...Ne(d),id:l.id.id,index:l.index,type:c,xtoken_balance:l.xtoken_balance},this.updateCache(n,o,v)}}),o}async getOwnerLockTokens(e){const{xtoken:t}=this.sdk.sdkOptions,i=[],n=`${t.package_id}::lock_coin::LockedCoin<${this.buileTokenCoinType()}>`,s=await this._sdk.ClmmSDK.fullClient.getOwnedObjectsByPage(e,{options:{showType:!0,showContent:!0},filter:{StructType:n}});for(const o of s.data)if(y(V(o)).source_address===n&&o.data){const r=ee.buildLockToken(o.data.content),d=await this.getLockXToken(r.id);d&&(r.xtoken_amount=d.xtoken_amount),i.push(r)}return i}async getLockToken(e){var i;const t=await this._sdk.ClmmSDK.fullClient.getObject({id:e,options:{showType:!0,showContent:!0}});if((i=t.data)!=null&&i.content){const n=ee.buildLockToken(t.data.content),s=await this.getLockXToken(n.id);return s&&(n.xtoken_amount=s.xtoken_amount),n}}async getOwnerTokenCoins(e){return await this._sdk.ClmmSDK.getOwnerCoinAssets(e,this.buileTokenCoinType())}mintVeNFTPayload(){const{xtoken:e}=this.sdk.sdkOptions,t=new b;return t.moveCall({target:`${e.published_at}::${oe}::mint_venft`,typeArguments:[],arguments:[t.pure(m(e).xtoken_manager_id)]}),t}async convertPayload(e){const{xtoken:t}=this.sdk.sdkOptions,i=new b,n=this.buileTokenCoinType(),s=await z.syncBuildCoinInputForAmount(this._sdk.ClmmSDK,i,BigInt(e.amount),n);return e.venft_id===void 0?i.moveCall({target:`${t.published_at}::${oe}::mint_and_convert`,typeArguments:[],arguments:[i.object(m(t).lock_manager_id),i.object(m(t).xtoken_manager_id),s,i.pure(e.amount)]}):i.moveCall({target:`${t.published_at}::${oe}::convert`,typeArguments:[],arguments:[i.object(m(t).lock_manager_id),i.object(m(t).xtoken_manager_id),s,i.pure(e.amount),i.pure(e.venft_id)]}),i}redeemLockPayload(e){const{xtoken:t}=this.sdk.sdkOptions,i=new b;return i.moveCall({target:`${t.published_at}::${oe}::redeem_lock`,typeArguments:[],arguments:[i.pure(m(t).lock_manager_id),i.pure(m(t).xtoken_manager_id),i.pure(e.venft_id),i.pure(e.amount),i.pure(e.lock_day),i.pure(g)]}),i}redeemPayload(e){const{xtoken:t}=this.sdk.sdkOptions,i=new b;return i.moveCall({target:`${t.published_at}::${oe}::redeem`,typeArguments:[],arguments:[i.pure(m(t).lock_manager_id),i.pure(m(t).xtoken_manager_id),i.pure(e.venft_id),i.pure(e.lock_id),i.pure(g)]}),i}redeemDividendPayload(e,t){const{xtoken_dividends:i}=this.sdk.sdkOptions,n=new b;return t.forEach(s=>{n.moveCall({target:`${i.published_at}::${Ke}::redeem`,typeArguments:[s],arguments:[n.object(m(i).dividend_manager_id),n.object(e)]})}),n}redeemDividendV2Payload(e,t){const{xtoken_dividends:i}=this.sdk.sdkOptions,n=new b;return t.forEach(s=>{n.moveCall({target:`${i.published_at}::${Ke}::redeem_v2`,typeArguments:[s],arguments:[n.object(m(i).dividend_manager_id),n.object(e),n.object(g)]})}),n}buileTokenCoinType(){return`${this.sdk.sdkOptions.token_faucet.package_id}::token::TOKEN`}cancelRedeemPayload(e){const{xtoken:t}=this.sdk.sdkOptions,i=new b;return i.moveCall({target:`${t.published_at}::${oe}::cancel_redeem_lock`,typeArguments:[],arguments:[i.pure(m(t).lock_manager_id),i.pure(m(t).xtoken_manager_id),i.pure(e.venft_id),i.pure(e.lock_id),i.pure(g)]}),i}async getInitConfigs(){var a,r;const{package_id:e}=this.sdk.sdkOptions.xtoken,t=`${e}_getInitFactoryEvent`,i=this.getCache(t);if(i!==void 0)return i;const n=(a=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::xtoken::InitEvent`}))==null?void 0:a.data,s={xtoken_manager_id:"",lock_manager_id:"",lock_handle_id:""};n.length>0&&n.forEach(d=>{const c=d.parsedJson;c&&(s.xtoken_manager_id=c.xtoken_manager)});const o=(r=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::locking::InitializeEvent`}))==null?void 0:r.data;return o.length>0&&o.forEach(d=>{const c=d.parsedJson;c&&(s.lock_manager_id=c.lock_manager)}),s.lock_handle_id=(await this.getLockUpManager()).lock_infos.lock_handle_id,this.updateCache(t,s,v),s}async getLockUpManager(e=!1){const{xtoken:t}=this.sdk.sdkOptions,{lock_manager_id:i}=m(t),n=`${i}_getLockUpManagerEvent`,s=this.getCache(n,e);if(s!==void 0)return s;const o=await this.sdk.ClmmSDK.fullClient.getObject({id:i,options:{showContent:!0}}),a=ee.buildLockUpManager(A(o));return this.updateCache(n,a,v),a}async getLockInfoHandle(e){const t=`${e}_getLockInfoHandle`,i=this.getCache(t);if(i!==void 0)return i;let n="";const s=await this.sdk.ClmmSDK.fullClient.getObject({id:e,options:{showContent:!0}}),o=A(s);return o&&(n=o.lock_infos.fields.id.id,this.updateCache(t,n,v)),n}async getDividendConfigs(){var o;const{package_id:e}=this.sdk.sdkOptions.xtoken_dividends,t=`${e}_getDividendManagerEvent`,i=this.getCache(t);if(i!==void 0)return i;const n=(o=await this._sdk.ClmmSDK.fullClient.queryEventsByPage({MoveEventType:`${e}::dividend::InitEvent`}))==null?void 0:o.data,s={dividend_manager_id:"",dividend_admin_id:"",dividend_settle_id:""};return n.length>0&&n.forEach(a=>{const r=a.parsedJson;r&&(s.dividend_manager_id=r.manager_id,s.dividend_admin_id=r.admin_id,s.dividend_settle_id=r.settle_id,this.updateCache(t,s,v))}),s}async getDividendManager(e=!1){const{dividend_manager_id:t}=m(this.sdk.sdkOptions.xtoken_dividends),i=`${t}_getDividendManager`,n=this.getCache(i,e);if(n!==void 0)return n;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=A(s),a=ee.buildDividendManager(o);return this.updateCache(i,a,v),a}async getXcetusManager(e=!0){const{xtoken_manager_id:t}=m(this.sdk.sdkOptions.xtoken),i=`${t}_getXcetusManager`,n=this.getCache(i,e);if(n)return n;const s=await this._sdk.ClmmSDK.fullClient.getObject({id:t,options:{showContent:!0}}),o=A(s),a={id:o.id.id,index:Number(o.index),has_venft:{handle:o.has_venft.fields.id.id,size:o.has_venft.fields.size},nfts:{handle:o.nfts.fields.id.id,size:o.nfts.fields.size},total_locked:o.total_locked,treasury:o.treasury.fields.total_supply.fields.value};return this.updateCache(i,a),a}async getVeNFTDividendInfo(e,t){try{const i=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),n=A(i);return ee.buildVeNFTDividendInfo(n)}catch{return}}async redeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const i=await this.getLockUpManager(),n=u(R).mul(u(i.max_lock_day).sub(u(t))).mul(u(i.max_percent_numerator).sub(u(i.min_percent_numerator))).div(u(i.max_lock_day).sub(u(i.min_lock_day))),s=u(R).mul(u(i.max_percent_numerator)).sub(n).div(u(Pe)).div(R);return{amountOut:u(s).mul(u(e)).round().toString(),percent:s.toString()}}async reverseRedeemNum(e,t){if(BigInt(e)===BigInt(0))return{amountOut:"0",percent:"0"};const i=await this.getLockUpManager(),n=u(R).mul(u(i.max_lock_day).sub(u(t))).mul(u(i.max_percent_numerator).sub(u(i.min_percent_numerator))).div(u(i.max_lock_day).sub(u(i.min_lock_day))),s=u(R).mul(u(i.max_percent_numerator)).sub(n).div(u(Pe)).div(R);return{amountOut:u(e).div(s).toFixed(0,$.ROUND_UP),percent:s.toString()}}async getLockXToken(e){const{lock_handle_id:t}=m(this._sdk.sdkOptions.xtoken),i=`${e}_getXTokenAmount`,n=this.getCache(i);if(n)return n;try{const s=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:t,name:{type:"0x2::object::ID",value:e}}),o=A(s);if(o){const a=o.value.fields.value.fields;return this.updateCache(i,a,v),a}}catch{}}async getVeNftAmount(e,t){try{const i=await this.sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:e,name:{type:"0x2::object::ID",value:t}}),n=A(i);if(n){const{lock_amount:s,xtoken_amount:o}=n.value.fields.value.fields;return{lock_amount:s,xtoken_amount:o}}}catch{}return{lock_amount:"0",xtoken_amount:"0"}}async getPhaseDividendInfo(e,t=!1){const n=(await this.getDividendManager()).dividends.id,s=`${n}_${e}_getPhaseDividendInfo`,o=this._sdk.getCache(s,t);if(o)return o;const a=await this._sdk.ClmmSDK.fullClient.getDynamicFieldObject({parentId:n,name:{type:"u64",value:e}}),r=A(a),d=r.value.fields.value.fields,c=d.redeemed_num.fields.contents.map(h=>({name:h.fields.key.fields.name,value:h.fields.value})),l=d.bonus_types.map(h=>h.fields.name),_=d.bonus.fields.contents.map(h=>({name:h.fields.key.fields.name,value:h.fields.value})),f={id:_e(a),phase:r.name,settled_num:d.settled_num,register_time:d.register_time,redeemed_num:c,is_settled:d.is_settled,bonus_types:l,bonus:_,phase_end_time:""};return this.updateCache(s,f),f}updateCache(e,t,i=te){let n=this._cache[e];n?(n.overdueTime=M(i),n.value=t):n=new ie(t,M(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}},Lt=class{constructor(e,t){D(this,"_cache",{});D(this,"_sdkOptions");D(this,"_launchpad");D(this,"_ido");D(this,"_xcetusModule");D(this,"_xtokenModule");D(this,"_boosterModule");D(this,"_makerModule");D(this,"_clmmSDK");this._sdkOptions=e,this._clmmSDK=t,this._launchpad=new Tt(this),this._ido=new jt(this),this._xcetusModule=new Dt(this),this._xtokenModule=new xt(this),this._boosterModule=new At(this),this._makerModule=new St(this),Ge(this._sdkOptions)}get ClmmSDK(){return this._clmmSDK}get sdkOptions(){return this._sdkOptions}get Launchpad(){return this._launchpad}get Ido(){return this._ido}get XToken(){return this._xtokenModule}get XCetusModule(){return this._xcetusModule}get BoosterModule(){return this._boosterModule}get MakerModule(){return this._makerModule}updateCache(e,t,i=v){let n=this._cache[e];n?(n.overdueTime=M(i),n.value=t):n=new ie(t,M(i)),this._cache[e]=n}getCache(e,t=!1){const i=this._cache[e];if(!t&&(i!=null&&i.isValid()))return i.value;delete this._cache[e]}};export{Lt as C,x as I,Y as X,Bt as a};
