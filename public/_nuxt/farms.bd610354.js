import{m as Po,e as To,s as z,a as V,u as _o,d as eo,o as Eo,c as q,k as vo}from"./pool.babab3ef.js";import{a as G,l as c,r as W,e as K,o as n,f as t,h as s,v as b,u as w,c as j,w as A,B as bo,j as F,p as to,k as ao,i as T,s as Lo,t as no,x as M,b as Ro,A as ho,F as J,E as oo,P as is,q as go,z as So,N as Jo,M as Mo,S as ls,J as rs,H as ds,Q as cs}from"./entry.f2f5e6b3.js";import{a as io,u as Co}from"./sha256.887a750a.js";import{u as lo}from"./farms.a0188dbf.js";import{R as qo}from"./farms-range.343b20be.js";import{_ as zo}from"./apr-tips.8fe0116c.js";import{i as Ao}from"./import-icon.de3e6c66.js";/* empty css              *//* empty css              *//* empty css              */import{p as Qo}from"./precision.a7a6c57b.js";import{_ as Go}from"./img-connect-wallet_2x.a4c8877e.js";import{_ as Ko}from"./img-no-Positions_2x.8cbde34f.js";import{_ as us}from"./upgrade-loading.915f9a48.js";import"./decimal.0bdeb344.js";import"./icon_rewards_2x.93246efa.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const ms=G({setup(){const o=io(),l=c(()=>o),f=lo(),u=c(()=>f),v=c(()=>u.value.totalRwadrdUsd),a=c(()=>u.value.farmsPositionList),i=c(()=>u.value.farmsAllPositionLoading),d=Co(),y=Po("Sui"),h=To("Sui"),{setIsShowSuccess:_,setIsShowRejected:g,setIsShowWaiting:I,setTransactionDesc:U,setTransactionTxid:e}=d,p=W(!1);return{wallet:l,farms:u,totalRwadrdUsd:v,sFixD:z,claimAllPoolReward:async so=>{p.value=!0,console.log(a.value,"farmsRewardObj###");const Z=[];a.value.forEach(B=>{console.log(so,B,"#position"),B.positionSource=="farming"&&Z.push({pool_id:B.pool_id,position_nft_id:B.id})}),console.log(JSON.stringify(Z),"##params"),e(""),U("Claim Rewards"),I(!0);try{const B=await y.batchHarvest(Z),H=await l.value.currentWallet.signAndExecuteTransactionBlock(B);console.log("0221###sui swap res###",H);let R=h.handleTx(H);if(R&&R.hash){e(R.hash),I(!1),_(!0);let D={res:R.res,title:"Claim",hash:R.hash};h.showTransitionPending(D),await h.watchTransaction(D)&&setTimeout(()=>{f.getFarmsPoolList()},4e3)}else I(!1),g(!0);p.value=!1}catch(B){console.log("Claim all error",B),I(!1),g(!0),p.value=!1}},loading:p,addCommom:V,farmsAllPositionLoading:i}}});const Vo=o=>(to("data-v-0ce47de4"),o=o(),ao(),o),ps={class:"farms-banner-bg"},_s={class:"farms-banner"},fs={class:"farms-banner-center"},vs=Vo(()=>s("div",{class:"title"},"Farms",-1)),hs=Vo(()=>s("div",{class:"desc"},"Stake Liquidity position to earn more rewards.",-1)),gs={class:"claim-rewards"},bs={class:"claim-title"},$s=Vo(()=>s("span",null,"Claimed Rewards",-1)),ws={key:0},ys={key:1},ks={class:"claim-content"};function Is(o,l,f,u,v,a){const i=bo;return n(),t("div",ps,[s("div",_s,[s("div",fs,[vs,hs,s("div",gs,[s("div",bs,[$s,o.wallet.address?(n(),t("span",ws,b(Number(o.totalRwadrdUsd)>0&&Number(o.totalRwadrdUsd)<.01?"<$0.01":`$${("addCommom"in o?o.addCommom:w(V))(("sFixD"in o?o.sFixD:w(z))(o.totalRwadrdUsd||0,2))}`),1)):(n(),t("span",ys,"--"))]),s("div",ks,[o.wallet.address?(n(),j(i,{key:0,class:"claim-btn",loading:o.loading,disabled:Number(o.totalRwadrdUsd)==0||o.farmsAllPositionLoading,onClick:o.claimAllPoolReward},{default:A(()=>[F("Claim All")]),_:1},8,["loading","disabled","onClick"])):(n(),j(i,{key:1,class:"claim-btn",onClick:l[0]||(l[0]=d=>o.wallet.setIsShowWalletModal(!0))},{default:A(()=>[F("Connect")]),_:1}))])])])])])}const Xo=K(ms,[["render",Is],["__scopeId","data-v-0ce47de4"]]),Ss=G({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=W(!0);return{sFixD:z,direct:o}}});const Ps=o=>(to("data-v-14f67ada"),o=o(),ao(),o),Ts={class:"valid-range"},Ls=Ps(()=>s("div",{class:"title"},"Valid Range",-1));function Cs(o,l,f,u,v,a){const i=qo;return n(),t("div",Ts,[Ls,T(i,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const js=K(Ss,[["render",Cs],["__scopeId","data-v-14f67ada"]]),Us=G({props:{poolInfo:{type:Object,default:()=>({})}},setup(){return{}}});const Os={class:"pool"},Rs={class:"pool-info"},As={class:"token-logo"},Fs={alt:""},Ds={alt:""},Ns={class:"token-symbol"},Bs={class:"symbol"},Es={class:"fee-rate"};function Ms(o,l,f,u,v,a){var y,h,_,g;const i=js,d=Lo("image");return n(),t("div",Os,[s("div",Rs,[s("div",As,[no(s("img",Fs,null,512),[[d,(y=o.poolInfo.coinA)==null?void 0:y.logo_url]]),no(s("img",Ds,null,512),[[d,(h=o.poolInfo.coinB)==null?void 0:h.logo_url]])]),s("div",Ns,[s("div",Bs,b((_=o.poolInfo.coinA)==null?void 0:_.symbol)+" - "+b((g=o.poolInfo.coinB)==null?void 0:g.symbol),1),s("div",Es,b(o.poolInfo.fee),1)])]),T(i,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const Yo=K(Us,[["render",Ms],["__scopeId","data-v-c027f63c"]]),qs=G({props:{currentTab:{type:String,default:""},rewardInfo:{type:Object,default:()=>({})}},setup(){const o=_o(),l=c(()=>o);return{sFixD:z,addCommom:V,getCoinIcon:u=>{var v;return((v=l.value.tokensObj[u])==null?void 0:v.logo_url)||Ao("/image/coins/sui-unknown.png")}}}});const Vs={key:0,class:"rewards-day"},Ws={class:"rewards-day-box"},Hs={alt:""};function Js(o,l,f,u,v,a){const i=Lo("image");return o.rewardInfo.allocate_point>0||o.currentTab=="Ended"?(n(),t("div",Vs,[s("div",null,[s("div",Ws,[no(s("img",Hs,null,512),[[i,o.getCoinIcon(o.rewardInfo.reward_coin)]]),s("span",null,b(("addCommom"in o?o.addCommom:w(V))(("sFixD"in o?o.sFixD:w(z))(o.rewardInfo.emission_per_day,4))),1)])])])):M("",!0)}const Zo=K(qs,[["render",Js],["__scopeId","data-v-416b96fb"]]),zs=G({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){console.log(o.positionInfo,"props.positionInfo");const l=_o(),f=c(()=>l);return{addCommom:V,decimalUi:eo,fixD:Eo,getCoinIcon:v=>{var a;return((a=f.value.tokensObj[v])==null?void 0:a.logo_url)||Ao("/image/coins/sui-unknown.png")}}}});const Qs={class:"hover-rewarder"},Gs={class:"rewarder-info"},Ks={class:"left-rewarder"},Xs={alt:""},Ys={class:"right-rewarder"},Zs={class:"amount"},xs={key:0,class:"amount-usd"},oe={key:1,class:"amount-usd"},se={class:"rewarder-info"},ee={class:"left-rewarder"},ne={alt:""},te={class:"right-rewarder"},ae={class:"amount"},ie={key:0,class:"amount-usd"},le={key:1,class:"amount-usd"};function re(o,l,f,u,v,a){const i=Lo("image");return n(),t("div",Qs,[s("div",Gs,[s("div",Ks,[no(s("img",Xs,null,512),[[i,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinB.address:o.positionInfo.coinA.address)]]),s("span",null,b(o.positionInfo.needReverse?o.positionInfo.coinB.symbol:o.positionInfo.coinA.symbol),1)]),s("div",Ys,[s("div",Zs,b(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:w(V))(("decimalUi"in o?o.decimalUi:w(eo))(o.positionInfo.amountB,o.positionInfo.coinB.decimals)):("addCommom"in o?o.addCommom:w(V))(("decimalUi"in o?o.decimalUi:w(eo))(o.positionInfo.amountA,o.positionInfo.coinA.decimals))),1),o.positionInfo.needReverse?(n(),t("div",oe,b(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("fixD"in o?o.fixD:w(Eo))(o.positionInfo.amountBUsd,2):"<$0.01"),1)):(n(),t("div",xs,b(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("fixD"in o?o.fixD:w(Eo))(o.positionInfo.amountAUsd,2):"<$0.01"),1))])]),s("div",se,[s("div",ee,[no(s("img",ne,null,512),[[i,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinA.address:o.positionInfo.coinB.address)]]),s("span",null,b(o.positionInfo.needReverse?o.positionInfo.coinA.symbol:o.positionInfo.coinB.symbol),1)]),s("div",te,[s("div",ae,b(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:w(V))(("decimalUi"in o?o.decimalUi:w(eo))(o.positionInfo.amountA,o.positionInfo.coinA.decimals)):("addCommom"in o?o.addCommom:w(V))(("decimalUi"in o?o.decimalUi:w(eo))(o.positionInfo.amountB,o.positionInfo.coinB.decimals))),1),o.positionInfo.needReverse?(n(),t("div",le,b(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("addCommom"in o?o.addCommom:w(V))(("decimalUi"in o?o.decimalUi:w(eo))(o.positionInfo.amountAUsd,2)):"<$0.01"),1)):(n(),t("div",ie,b(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("addCommom"in o?o.addCommom:w(V))(("decimalUi"in o?o.decimalUi:w(eo))(o.positionInfo.amountBUsd,2)):"<$0.01"),1))])])])}const xo=K(zs,[["render",re],["__scopeId","data-v-d01301e5"]]),de=G({components:{FarmsPositionAmountTips:xo},props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const l=io(),f=c(()=>l);console.log(o.positionInfo,"positionInfo#");const u=lo(),v=c(()=>u),a=To("Sui"),i=Po("Sui"),d=W(!1),y=Co();c(()=>y);const h=Ro(),{setIsShowSuccess:_,setIsShowRejected:g,setIsShowWaiting:I,setTransactionDesc:U,setTransactionTxid:e}=y,p=async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,e(""),U(`Stake ${o.positionInfo.name}`),I(!0);const S={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},P=o.positionInfo.farmsPoolId;try{const O=await i.farmsDeposit(S,P),E=await f.value.currentWallet.signAndExecuteTransactionBlock(O);console.log("0221###sui swap res###",E);let N=a.handleTx(E);if(N&&N.hash){e(N.hash),I(!1),_(!0);let x={res:N.res,title:"Staked",hash:N.hash};a.showTransitionPending(x),await a.watchTransaction(x)&&setTimeout(()=>{u.getPositionByPool(f.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else I(!1),g(!0)}catch(O){console.log("farmsDeposit error",O),I(!1),g(!0),d.value=!1}},Q=async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,e(""),U(`Unstake ${o.positionInfo.name}`),I(!0);const S=o.positionInfo.farmsPoolId,P=o.positionInfo.id;try{const O=await i.farmsWithdraw(S,P),E=await f.value.currentWallet.signAndExecuteTransactionBlock(O);console.log("0221###sui swap res###",E);let N=a.handleTx(E);if(console.log(N,"unStaketx##"),N&&N.hash){e(N.hash),I(!1),_(!0);let x={res:N.res,title:"Unstaked",hash:N.hash};a.showTransitionPending(x),await a.watchTransaction(x)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),u.getPositionByPool(f.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else I(!1),g(!0)}catch(O){console.log("farmsDeposit error",O),I(!1),g(!0),d.value=!1}},so=async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,e(""),U("Claim rewards"),I(!0);const S={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const P=await i.harvestFarms(S),O=await f.value.currentWallet.signAndExecuteTransactionBlock(P);console.log("0221###sui swap res###",O);let E=a.handleTx(O);if(E&&E.hash){e(E.hash),I(!1),_(!0);let N={title:"Claim",res:E.res,hash:E.hash};a.showTransitionPending(N),await a.watchTransaction(N)&&setTimeout(()=>{u.getPositionByPool(f.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else I(!1),g(!0);d.value=!1}catch(P){console.log("farmsDeposit error",P),I(!1),g(!0),d.value=!1}},Z=c(()=>v.value.farmsRewardObj),B=_o(),H=c(()=>B);return{sFixD:z,stake:p,loading:d,unStake:Q,router:h,claim:so,farmsRewardObj:Z,getCoinIcon:S=>{var P;return((P=H.value.tokensObj[S])==null?void 0:P.logo_url)||Ao("/image/coins/sui-unknown.png")},toPositionDetails:S=>{console.log("toPositionDetails:",S),S.positionSource=="clmm"?h.push(`/new-position-detail?collect=${S.collectionName}&&token=${S.tokenName}&&address=${S.pool}&pos=${S.pos_object_id}`):h.push(`/new-position-detail?position_nft_id=${S.id}&positionSource=farming`)}}}}),os=""+globalThis.__publicAssetsURL("sui-image/position-active.png");const Fo=o=>(to("data-v-cebfd51f"),o=o(),ao(),o),ce={class:"farms-position-item"},ue=Fo(()=>s("thead",null,[s("tr",null,[s("th"),s("th",null,"Liquidity"),s("th",null,"Share"),s("th",null,"Earnings"),s("th")])],-1)),me={class:"position-info"},pe={key:0,class:"status-bg"},_e=Fo(()=>s("img",{src:os,alt:""},null,-1)),fe=[_e],ve={class:"status-text"},he={class:"name-range"},ge=Fo(()=>s("span",null,"Details",-1)),be=Fo(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),$e=[ge,be],we={class:"liquidity"},ye={class:"apr"},ke={class:"rewards-day-box"},Ie={alt:""},Se={key:1,class:"rewards-day"},Pe={class:"action-btn"};function Te(o,l,f,u,v,a){const i=qo,d=xo,y=bo,h=is,_=Lo("image");return n(),t("div",ce,[s("table",null,[ue,s("tbody",null,[s("tr",null,[s("td",null,[s("div",me,[s("div",{class:ho(["position-status",o.positionInfo.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionInfo.positionStatus=="Active"?(n(),t("div",pe,fe)):M("",!0),s("div",ve,b(o.positionInfo.positionStatus),1)],2),s("div",he,[s("span",null,b(o.positionInfo.name),1),T(i,{"pool-info":o.positionInfo},null,8,["pool-info"])]),s("div",{class:"details",onClick:l[0]||(l[0]=g=>o.toPositionDetails(o.positionInfo))},$e)])]),s("td",null,[s("div",we,[T(d,{"position-info":o.positionInfo},null,8,["position-info"]),s("span",null,b(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("sFixD"in o?o.sFixD:w(z))(o.positionInfo.positionUSD,2)}`),1)])]),s("td",null,[s("div",ye,b(o.positionInfo.positionShare>0&&o.positionInfo.positionShare<.01?"<0.01":("sFixD"in o?o.sFixD:w(z))(o.positionInfo.positionShare||0,2))+"%",1)]),s("td",null,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),t(J,{key:0},oo(o.positionInfo.rewards,g=>(n(),t("div",{key:g.rewarder_type,class:"rewards-day"},[s("div",null,[s("div",ke,[no(s("img",Ie,null,512),[[_,o.getCoinIcon(g.rewarder_type)]]),s("span",null,b(g.rewarderAmount),1)])])]))),128)):(n(),t("div",Se,"--"))]),s("td",null,[s("div",Pe,[o.positionInfo.positionSource=="clmm"?(n(),t(J,{key:0},[o.positionInfo&&o.positionInfo.positionStatus!=="Active"?(n(),j(h,{key:0},{title:A(()=>[F("Farming rewards are only available for active positions.")]),default:A(()=>[T(y,{class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:A(()=>[F("Stake")]),_:1},8,["loading","disabled","onClick"])]),_:1})):(n(),j(y,{key:1,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:A(()=>[F("Stake")]),_:1},8,["loading","disabled","onClick"]))],64)):(n(),j(y,{key:1,class:"unstake-btn",onClick:o.unStake},{default:A(()=>[F("Unstake")]),_:1},8,["onClick"])),o.positionInfo.positionSource=="clmm"?(n(),j(y,{key:2,class:"claim-btn",disabled:!0},{default:A(()=>[F("↑ Claim")]),_:1})):(n(),j(y,{key:3,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0,onClick:o.claim},{default:A(()=>[F("↑ Claim")]),_:1},8,["disabled","onClick"]))])])])])])])}const ss=K(de,[["render",Te],["__scopeId","data-v-cebfd51f"]]),Le=G({props:{noDataImg:{type:String,default:""},desc:{type:String,default:""},type:{type:String,default:""},addLiquidityUrl:{type:String,default:""}},setup(){return{walletStore:io()}}});const Ce={class:"no-data"},je=["src"],Ue={key:0,class:"desc"};function Oe(o,l,f,u,v,a){const i=bo;return n(),t("div",Ce,[s("img",{src:o.noDataImg,alt:""},null,8,je),o.desc?(n(),t("div",Ue,b(o.desc),1)):M("",!0),o.type=="addLiquidity"?(n(),j(i,{key:1,class:"add-liquidity-btn",onClick:l[0]||(l[0]=d=>o.addLiquidityUrl?o.$router.push(o.addLiquidityUrl):"")},{default:A(()=>[F("Add Liquidity")]),_:1})):M("",!0),o.type=="connectWallet"?(n(),j(i,{key:2,class:"add-liquidity-btn",onClick:l[1]||(l[1]=d=>o.walletStore.setIsShowWalletModal(!0))},{default:A(()=>[F("Connect Wallet")]),_:1})):M("",!0)])}const es=K(Le,[["render",Oe],["__scopeId","data-v-130f9462"]]),Re=G({components:{FarmsPositionItem:ss},props:{currentTab:{type:String,default:""},sortValue:{type:String,default:"APR"}},setup(o){const l=W({}),f=io(),u=c(()=>f),v=lo(),a=c(()=>v),i=c(()=>(console.log(a.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?u.value.address?a.value.myFarmsPoolList:[]:o.currentTab=="Ended"?a.value.farmsPoolList.filter($=>$.status=="Ended"):a.value.farmsPoolList.filter($=>$.status=="Live"))),d=Co(),y=c(()=>d),h=c(()=>y.value.addressLpTokens),_=W([]),g=$=>{const L=i.value.map(r=>{const{stable_farming:m}=h.value[r.clmm_pool_id];return{...r,apr:m.apr,tvl:m.tvl}});$=="APR"?_.value=L.sort((r,m)=>m.apr-r.apr):_.value=L.sort((r,m)=>m.tvl-r.tvl),console.log(_.value,"##farmsPoolList.value")};go(()=>[i.value,o.sortValue,h.value],([$,L,r])=>{console.log(L,"sortValue326"),$&&$.length>0&&L&&r&&!q(r)&&g(L)},{immediate:!0});const I=$=>{l.value[$.clmm_pool_id]?l.value[$.clmm_pool_id]=!1:(l.value[$.clmm_pool_id]=!0,console.log("执行了吗"),v.getPositionByPool(u.value.address,$.clmm_pool_id,$.id))},U=c(()=>a.value.farmsPositionObj),e=c(()=>(console.log(a.value.farmsLoadingObj,"##farms.value.farmsLoadingObj"),a.value.farmsLoadingObj)),p=c(()=>a.value.farmsUserUsd),Q=c(()=>(console.log(a.value.farmsRewardObj,"##farmsRewardObj"),a.value.farmsRewardObj)),so=c(()=>a.value.farmsPositionList),Z=c(()=>a.value.farmsAllPositionLoading),B=Ro(),H=Po("Sui"),R=To("Sui"),{setIsShowSuccess:D,setIsShowRejected:S,setIsShowWaiting:P,setTransactionDesc:O,setTransactionTxid:E}=d,N=async $=>{console.log(so.value,"farmsRewardObj###");const L=[];so.value.forEach(r=>{console.log($,r,"#position"),$==r.clmm_pool_id&&L.push({pool_id:r.pool_id,position_nft_id:r.id})}),console.log(JSON.stringify(L),"##params"),E(""),O("Claim rewards"),P(!0);try{const r=await H.batchHarvest(L),m=await u.value.currentWallet.signAndExecuteTransactionBlock(r);console.log("0221###sui swap res###",m);let k=R.handleTx(m);if(k&&k.hash){E(k.hash),P(!1),D(!0);let C={res:k.res,title:"Claim",hash:k.hash};R.showTransitionPending(C),await R.watchTransaction(C)&&setTimeout(()=>{v.getFarmsPoolList()},4e3)}else P(!1),S(!0)}catch(r){console.log("Claim all error",r),P(!1),S(!0)}},x=_o(),co=c(()=>x),jo=c(()=>(console.log(co.value.poolsObj,"##pools.value.poolsObj"),co.value.poolsObj)),$o=c(()=>co.value.tokensObj),uo=W({}),No=($,L)=>$&&L?Qo.plus(vo($),vo(L)):$||0,mo=$=>{let L=0;return $&&$.forEach(r=>{L+=vo(String(r))}),String(eo(String(L),2))},Bo=($,L,r)=>{console.log($,"poolsObj##473"),Object.keys($).forEach(m=>{var X,po,fo;const k=(X=L[m])==null?void 0:X.apr_7day,C=No((po=L[m])==null?void 0:po.apr_7day,mo((fo=L[m])==null?void 0:fo.rewarder_apr));uo.value[m]={...$[m],apr:String(k).replace("%",""),aprTotal:C},uo.value[m].rewards=[],$[m].rewarderInfo.forEach((Uo,wo)=>{var ko,Io;const Oo=(ko=r[Uo.coinAddress])==null?void 0:ko.symbol,yo=(Io=L[m])==null?void 0:Io.rewarder_apr[wo];console.log(Oo,yo,"getRewardInfo:"),console.log($[m],"## poolsObj[key]"),uo.value[m].rewards.push({symbol:Oo,rewarderApr:yo,rewarder_display:$[m][`rewarder_display${wo+1}`]})})}),console.log(uo.value,"##rewardInfoObj")};return go(()=>[jo.value,h.value,$o.value],([$,L,r])=>{$&&!q($)&&L&&!q(L)&&r&&!q(r)&&Bo($,L,r)},{immediate:!0}),console.log(h.value,"addressLpTokens:"),{wallet:u,walletStore:f,farmsPoolList:_,openMore:I,openMoreObj:l,checkNullObj:q,router:B,farmsPositionObj:U,farmsLoadingObj:e,farmsUserUsd:p,sFixD:z,farmsRewardObj:Q,claimPoolReward:N,farmsAllPositionLoading:Z,addCommom:V,addressLpTokens:h,poolsObj:jo,rewardInfoObj:uo}}});const ro=o=>(to("data-v-d3b3de7b"),o=o(),ao(),o),Ae={class:"farms-table"},Fe=ro(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")])],-1)),De={key:0},Ne=["onClick"],Be={class:"staked-tvl"},Ee={class:"apr"},Me={class:"apr-hover-box"},qe={class:"farms-reward-box"},Ve={key:0,class:"my-staked"},We={key:0,class:"my-staked-loading"},He={key:0,class:"position-usd"},Je={key:1,class:"position-usd"},ze={key:2,class:"position-usd"},Qe={key:3,class:"position-num"},Ge={key:1,class:"my-staked"},Ke=ro(()=>s("div",{class:"position-usd"},"--",-1)),Xe=[Ke],Ye={class:"earned"},Ze={key:0,class:"my-staked-loading"},xe=ro(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),on={key:0},sn={key:1},en={key:2},nn={key:2},tn={class:"actions"},an={class:"actions-btn"},ln=["onClick"],rn=ro(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),dn=[rn],cn={colspan:"7",style:{padding:"0 16px 16px"}},un={key:0,class:"farm-position-list"},mn={key:0,class:"farm-position-loading"},pn={key:1,class:"farm-position-list"},_n=ro(()=>s("tr",{style:{height:"8px"}},null,-1)),fn={key:1},vn={colspan:"7"},hn={key:0,class:"no-data"},gn=ro(()=>s("img",{src:Go,alt:""},null,-1)),bn={key:1,class:"no-data"},$n=ro(()=>s("img",{src:Ko,alt:""},null,-1)),wn=ro(()=>s("span",null,"No farms found",-1)),yn=[$n,wn];function kn(o,l,f,u,v,a){const i=Yo,d=zo,y=Zo,h=Mo,_=bo,g=ls,I=ss,U=es;return n(),t("div",Ae,[s("table",null,[Fe,o.farmsPoolList&&o.farmsPoolList.length>0?(n(),t("tbody",De,[(n(!0),t(J,null,oo(o.farmsPoolList,e=>(n(),t(J,{key:e.id},[s("tr",{onClick:p=>o.openMore(e)},[s("td",null,[T(i,{"pool-info":e},null,8,["pool-info"])]),s("td",null,[s("div",Be," $"+b(("addCommom"in o?o.addCommom:w(V))(o.addressLpTokens&&o.addressLpTokens[e.clmm_pool_id]&&o.addressLpTokens[e.clmm_pool_id].stable_farming&&o.addressLpTokens[e.clmm_pool_id].stable_farming.tvl,2)),1)]),s("td",null,[s("div",Ee,[s("div",Me,[!("checkNullObj"in o?o.checkNullObj:w(q))(o.rewardInfoObj)&&o.rewardInfoObj[e.clmm_pool_id]?(n(),j(d,{key:0,"l-item":o.rewardInfoObj[e.clmm_pool_id],"rewarder-info":o.rewardInfoObj[e.clmm_pool_id].rewards,class:"noHover apr-hover-con"},null,8,["l-item","rewarder-info"])):M("",!0)]),s("span",null,b(("sFixD"in o?o.sFixD:w(z))(o.addressLpTokens&&o.addressLpTokens[e.clmm_pool_id]&&o.addressLpTokens[e.clmm_pool_id].stable_farming&&o.addressLpTokens[e.clmm_pool_id].stable_farming.apr*100,2))+"%",1)])]),s("td",null,[s("div",qe,[(n(!0),t(J,null,oo(e.rewarders,p=>(n(),j(y,{key:p.reward_coin,"reward-info":p,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("td",null,[o.wallet.address?(n(),t("div",Ve,[o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",We,[T(h,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),t(J,{key:1},[o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].amount>0&&o.farmsUserUsd[e.clmm_pool_id].amount>.01?(n(),t("div",He," $"+b(("sFixD"in o?o.sFixD:w(z))(o.farmsUserUsd[e.clmm_pool_id].amount,2)),1)):o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].amount>0&&o.farmsUserUsd[e.clmm_pool_id].amount<.01?(n(),t("div",Je," <$0.01 ")):(n(),t("div",ze,"0")),o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].positionNum?(n(),t("div",Qe,b(o.farmsUserUsd[e.clmm_pool_id].positionNum)+" "+b(o.farmsUserUsd[e.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):M("",!0)],64))])):(n(),t("div",Ge,Xe))]),s("td",null,[s("div",Ye,[o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",Ze,[T(h,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[e.clmm_pool_id]&&o.farmsRewardObj[e.clmm_pool_id].amountUsd?(n(),t(J,{key:1},[xe,Number(o.farmsRewardObj[e.clmm_pool_id].amountUsd)>.01?(n(),t("span",on,"$"+b(("addCommom"in o?o.addCommom:w(V))(("sFixD"in o?o.sFixD:w(z))(o.farmsRewardObj[e.clmm_pool_id].amountUsd||0,2))),1)):Number(o.farmsRewardObj[e.clmm_pool_id].amountUsd)>0&&Number(o.farmsRewardObj[e.clmm_pool_id].amountUsd)<.01?(n(),t("span",sn,"<$0.01")):(n(),t("span",en,"0"))],64)):(n(),t("span",nn,"0"))])]),s("td",null,[s("div",tn,[s("div",an,[T(_,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[e.clmm_pool_id]||o.farmsRewardObj[e.clmm_pool_id].amountUsd<=0,onClick:So(p=>o.claimPoolReward(e.clmm_pool_id),["stop"])},{default:A(()=>[F("Claim")]),_:2},1032,["disabled","onClick"]),T(_,{class:"add-liquidity-btn",onClick:So(p=>o.router.push(`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`),["stop"])},{default:A(()=>[F("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more",onClick:So(p=>o.openMore(e),["stop"])},[(n(),t("svg",{class:ho(["arrow-icon",o.openMoreObj[e.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},dn,2))],8,ln)])])],8,Ne),no(s("tr",null,[s("td",cn,[o.wallet.address?(n(),t("div",un,[!("checkNullObj"in o?o.checkNullObj:w(q))(o.farmsLoadingObj)&&(o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading)?(n(),t("div",mn,[T(g)])):o.farmsPositionObj[e.clmm_pool_id]&&o.farmsPositionObj[e.clmm_pool_id].length>0?(n(!0),t(J,{key:1},oo(o.farmsPositionObj[e.clmm_pool_id],p=>(n(),j(I,{key:p.clmm_pool_id,"current-tab":o.currentTab,"position-info":{...p,clmm_pool_id:e.clmm_pool_id}},null,8,["current-tab","position-info"]))),128)):(n(),j(U,{key:2,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`},null,8,["add-liquidity-url"]))])):(n(),t("div",pn,[T(U,{"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"})]))])],512),[[Jo,!("checkNullObj"in o?o.checkNullObj:w(q))(o.openMoreObj)&&o.openMoreObj[e==null?void 0:e.clmm_pool_id]]]),_n],64))),128))])):(n(),t("tbody",fn,[s("tr",null,[s("td",vn,[!o.wallet.connected&&o.currentTab=="My Farms"?(n(),t("div",hn,[gn,T(_,{class:"connect-wallet",onClick:l[0]||(l[0]=e=>o.wallet.setIsShowWalletModal(!0))},{default:A(()=>[F(b(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(n(),t("div",bn,yn)):M("",!0)])])]))])])}const ns=K(Re,[["render",kn],["__scopeId","data-v-d3b3de7b"]]),In=G({props:{currentTab:{type:String,default:""}},setup(){const o=W(!1),l=io(),f=c(()=>l),u=lo(),v=c(()=>u),a=c(()=>v.value.farmsPoolList);return{isShowMore:o,wallet:f,walletStore:l,farmsPoolList:a}}});const Sn=o=>(to("data-v-6ff18114"),o=o(),ao(),o),Pn={class:"farms-table"},Tn=Sn(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")])],-1)),Ln={class:"pool"},Cn={class:"staked-tvl"},jn={class:"apr"},Un={class:"rewards-day"},On={class:"my-staked"},Rn={class:"earned"},An={class:"actions"};function Fn(o,l,f,u,v,a){const i=Mo;return n(),t("div",Pn,[s("table",null,[Tn,s("tbody",null,[(n(),t(J,null,oo(4,(d,y)=>s("tr",{key:y},[s("td",null,[s("div",Ln,[T(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),T(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Cn,[T(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",jn,[s("span",null,[T(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),s("td",null,[s("div",Un,[T(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",On,[T(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Rn,[T(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",An,[T(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])])),64))])])])}const Dn=K(In,[["render",Fn],["__scopeId","data-v-6ff18114"]]),Nn=G({props:{positionStatus:{type:String,default:"Active"},positionInfo:{type:Object,default:()=>({})}},setup(){return{}}});const Bn=o=>(to("data-v-882c76c0"),o=o(),ao(),o),En={class:"position-info"},Mn={key:0,class:"status-bg"},qn=Bn(()=>s("img",{src:os,alt:""},null,-1)),Vn=[qn],Wn={class:"status-text"},Hn={class:"name-range"};function Jn(o,l,f,u,v,a){const i=qo;return n(),t("div",En,[s("div",{class:ho(["position-status",o.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionStatus=="Active"?(n(),t("div",Mn,Vn)):M("",!0),s("div",Wn,b(o.positionStatus),1)],2),s("div",Hn,[s("span",null,b(o.positionInfo.name),1),o.positionStatus=="Active"?(n(),j(i,{key:0,"pool-info":o.positionInfo},null,8,["pool-info"])):M("",!0)])])}const zn=K(Nn,[["render",Jn],["__scopeId","data-v-882c76c0"]]),Qn=G({props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const l=_o(),f=c(()=>l),u=Ro(),v=H=>{var R;return((R=f.value.tokensObj[H])==null?void 0:R.logo_url)||Ao("/image/coins/sui-unknown.png")},a=To("Sui"),i=Po("Sui"),d=W(!1),y=Co(),h=io(),_=lo(),g=c(()=>h),{setIsShowSuccess:I,setIsShowRejected:U,setIsShowWaiting:e,setTransactionDesc:p,setTransactionTxid:Q}=y;return{getCoinIcon:v,router:u,claim:async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,Q(""),p("Claim rewards"),e(!0);const H={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const R=await i.harvestFarms(H),D=await g.value.currentWallet.signAndExecuteTransactionBlock(R);console.log("0221###sui swap res###",D);let S=a.handleTx(D);if(S&&S.hash){Q(S.hash),e(!1),I(!0);let P={title:"Claim",res:S.res,hash:S.hash};a.showTransitionPending(P),await a.watchTransaction(P)&&setTimeout(()=>{_.getPositionByPool(g.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else e(!1),U(!0);d.value=!1}catch(R){console.log("farmsDeposit error",R),e(!1),U(!0),d.value=!1}},unStake:async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,Q(""),p(`Unstake ${o.positionInfo.name}`),e(!0);const H=o.positionInfo.farmsPoolId,R=o.positionInfo.id;try{const D=await i.farmsWithdraw(H,R),S=await g.value.currentWallet.signAndExecuteTransactionBlock(D);console.log("0221###sui swap res###",S);let P=a.handleTx(S);if(P&&P.hash){Q(P.hash),e(!1),I(!0);let O={res:P.res,title:"Unstaked",hash:P.hash};a.showTransitionPending(O),await a.watchTransaction(O)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),_.getPositionByPool(g.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else e(!1),U(!0)}catch(D){console.log("farmsDeposit error",D),e(!1),U(!0),d.value=!1}},loading:d,stake:async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,Q(""),p(`Stake ${o.positionInfo.name}`),e(!0);const H={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},R=o.positionInfo.farmsPoolId;try{const D=await i.farmsDeposit(H,R),S=await g.value.currentWallet.signAndExecuteTransactionBlock(D);console.log("0221###sui swap res###",S);let P=a.handleTx(S);if(P&&P.hash){Q(P.hash),e(!1),I(!0);let O={res:P.res,title:"Staked",hash:P.hash};a.showTransitionPending(O),await a.watchTransaction(O)&&setTimeout(()=>{_.getPositionByPool(g.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else e(!1),U(!0)}catch(D){console.log("farmsDeposit error",D),e(!1),U(!0),d.value=!1}}}}});const Gn=o=>(to("data-v-cdd84e0e"),o=o(),ao(),o),Kn={class:"farms-position"},Xn={class:"farms-position-box"},Yn=rs('<div class="position-info-block" data-v-cdd84e0e><div class="block-item" data-v-cdd84e0e><div class="leabl" data-v-cdd84e0e>Liquidity</div><div class="text" data-v-cdd84e0e>~$33.57</div></div><div class="block-item" data-v-cdd84e0e><div class="leabl" data-v-cdd84e0e>Share</div><div class="text" data-v-cdd84e0e>0.00007%</div></div></div>',1),Zn={class:"earnings"},xn={class:"block-item"},ot=Gn(()=>s("div",{class:"leabl"},"Earnings",-1)),st={class:"text"},et={key:0},nt={alt:""},tt={key:1,class:"rewards-day"},at={class:"unstake-btn-box"};function it(o,l,f,u,v,a){const i=zn,d=bo,y=Lo("image");return n(),t("div",Kn,[s("div",Xn,[T(i,{"position-info":o.positionInfo},null,8,["position-info"])]),Yn,s("div",Zn,[s("div",xn,[ot,s("div",st,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),t(J,{key:0},oo(o.positionInfo.rewards,h=>(n(),t("div",{key:h.rewarder_type,class:"rewards-day"},[h.rewarderAmount>0?(n(),t("div",et,[no(s("img",nt,null,512),[[y,o.getCoinIcon(h.rewarder_type)]]),s("span",null,b(h.rewarderAmount),1)])):M("",!0)]))),128)):(n(),t("div",tt,"--"))])]),o.positionInfo.positionSource=="clmm"?(n(),j(d,{key:0,class:"add-liquidity-btn claim-btn",onClick:l[0]||(l[0]=h=>o.router.push(`/new-position-detail?collect=${o.positionInfo.collectionName}&&token=${o.positionInfo.tokenName}&&address=${o.positionInfo.pool}&pos=${o.positionInfo.pos_object_id}`))},{default:A(()=>[F("+ Add liquidity")]),_:1})):(n(),j(d,{key:1,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0||o.currentTab=="Ended",onClick:o.claim},{default:A(()=>[F("↑ Claim")]),_:1},8,["disabled","onClick"]))]),s("div",at,[s("div",null,[o.positionInfo.positionSource=="clmm"?(n(),j(d,{key:0,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:A(()=>[F("Stake")]),_:1},8,["loading","disabled","onClick"])):(n(),j(d,{key:1,class:"unstake-btn",onClick:o.unStake},{default:A(()=>[F("Unstake")]),_:1},8,["onClick"]))])])])}const ts=K(Qn,[["render",it],["__scopeId","data-v-cdd84e0e"]]),lt=G({components:{FarmsH5Position:ts},props:{currentTab:{type:String,default:""},sortValue:{type:String,default:"APR"}},setup(o){const l=W(!1),f=io(),u=c(()=>f),v=lo(),a=c(()=>v),i=c(()=>(console.log(a.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?u.value.address?a.value.myFarmsPoolList:[]:o.currentTab=="Ended"?a.value.farmsPoolList.filter(r=>r.status=="Ended"):a.value.farmsPoolList.filter(r=>r.status=="Live"))),d=W([]),y=Co(),h=c(()=>y),_=c(()=>h.value.addressLpTokens),g=r=>{const m=i.value.map(k=>{const{stable_farming:C}=_.value[k.clmm_pool_id];return{...k,apr:C.apr,tvl:C.tvl}});r=="APR"?d.value=m.sort((k,C)=>C.apr-k.apr):d.value=m.sort((k,C)=>C.tvl-k.tvl),console.log(d.value,"##farmsPoolList.value")};go(()=>[i.value,o.sortValue,_.value],([r,m,k])=>{console.log(m,"sortValue326"),r&&r.length>0&&m&&k&&!q(k)&&g(m)},{immediate:!0});const I=c(()=>a.value.farmsUserUsd),U=c(()=>(console.log(a.value.farmsRewardObj,"##farmsRewardObj"),a.value.farmsRewardObj)),e=c(()=>a.value.farmsPositionObj),p=c(()=>a.value.farmsPoolListLoading),Q=c(()=>a.value.farmsPositionList),so=c(()=>(console.log(a.value.farmsLoadingObj,"##farms.value.farmsLoadingObj"),a.value.farmsLoadingObj)),Z=c(()=>a.value.farmsAllPositionLoading),B=W({}),H=r=>{B.value[r.clmm_pool_id]?B.value[r.clmm_pool_id]=!1:(B.value[r.clmm_pool_id]=!0,console.log("执行了吗"),v.getPositionByPool(u.value.address,r.clmm_pool_id,r.id))},R=Po("Sui"),D=To("Sui"),{setIsShowSuccess:S,setIsShowRejected:P,setIsShowWaiting:O,setTransactionDesc:E,setTransactionTxid:N}=y,x=async r=>{console.log(Q.value,"farmsRewardObj###");const m=[];Q.value.forEach(k=>{console.log(r,k,"#position"),r==k.clmm_pool_id&&m.push({pool_id:k.pool_id,position_nft_id:k.id})}),console.log(JSON.stringify(m),"##params"),N(""),E("Claim rewards"),O(!0);try{const k=await R.batchHarvest(m),C=await u.value.currentWallet.signAndExecuteTransactionBlock(k);console.log("0221###sui swap res###",C);let X=D.handleTx(C);if(X&&X.hash){N(X.hash),O(!1),S(!0);let po={res:X.res,title:"Claim",hash:X.hash};D.showTransitionPending(po),await D.watchTransaction(po)&&setTimeout(()=>{v.getFarmsPoolList()},4e3)}else O(!1),P(!0)}catch(k){console.log("Claim all error",k),O(!1),P(!0)}},co=Ro(),jo=_o(),$o=c(()=>jo),uo=c(()=>(console.log($o.value.poolsObj,"##pools.value.poolsObj"),$o.value.poolsObj)),No=c(()=>$o.value.tokensObj),mo=W({}),Bo=(r,m)=>r&&m?Qo.plus(vo(r),vo(m)):r||0,$=r=>{let m=0;return r&&r.forEach(k=>{m+=vo(String(k))}),String(eo(String(m),2))},L=(r,m,k)=>{console.log(r,"poolsObj##473"),Object.keys(r).forEach(C=>{var fo,Uo,wo;const X=(fo=m[C])==null?void 0:fo.apr_7day,po=Bo((Uo=m[C])==null?void 0:Uo.apr_7day,$((wo=m[C])==null?void 0:wo.rewarder_apr));mo.value[C]={...r[C],apr:String(X).replace("%",""),aprTotal:po},mo.value[C].rewards=[],r[C].rewarderInfo.forEach((Oo,yo)=>{var Wo,Ho;const ko=(Wo=k[Oo.coinAddress])==null?void 0:Wo.symbol,Io=(Ho=m[C])==null?void 0:Ho.rewarder_apr[yo];console.log(ko,Io,"getRewardInfo:"),console.log(r[C],"## poolsObj[key]"),mo.value[C].rewards.push({symbol:ko,rewarderApr:Io,rewarder_display:r[C][`rewarder_display${yo+1}`]})})}),console.log(mo.value,"##rewardInfoObj")};return go(()=>[uo.value,_.value,No.value],([r,m,k])=>{r&&!q(r)&&m&&!q(m)&&k&&!q(k)&&L(r,m,k)},{immediate:!0}),{isShowMore:l,wallet:u,farmsPoolList:d,farmsUserUsd:I,sFixD:z,farmsRewardObj:U,farmsPositionObj:e,openMore:H,checkNullObj:q,openMoreObj:B,farmsPoolListLoading:p,claimPoolReward:x,router:co,addCommom:V,farmsLoadingObj:so,farmsAllPositionLoading:Z,addressLpTokens:_,rewardInfoObj:mo}}});const Y=o=>(to("data-v-106b0078"),o=o(),ao(),o),rt={key:0,class:"farms-pool-list"},dt={class:"farms-block"},ct={class:"item-block"},ut=Y(()=>s("div",{class:"leabl"},"Staked TVL",-1)),mt={class:"text"},pt={class:"item-block apr"},_t=Y(()=>s("div",{class:"leabl"},"APR",-1)),ft={class:"text"},vt={class:"apr-hover-box"},ht={class:"item-block"},gt=Y(()=>s("div",{class:"leabl"},"Rewards / day",-1)),bt={class:"text"},$t={class:"item-block my-staked"},wt=Y(()=>s("div",{class:"leabl"},"My Staked",-1)),yt={key:0,class:"text"},kt={class:"position-usd"},It={key:0,class:"position-num"},St={key:1,class:"text"},Pt=Y(()=>s("div",{class:"position-usd"},"--",-1)),Tt=[Pt],Lt={class:"item-block"},Ct=Y(()=>s("div",{class:"leabl"},"Earned",-1)),jt={class:"text earned-box"},Ut={class:"earned"},Ot={key:0,class:"my-staked-loading"},Rt=Y(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),At={key:0},Ft={key:1},Dt={key:2},Nt={key:2},Bt={class:"add-liquidity-box"},Et=["onClick"],Mt=Y(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),qt=[Mt],Vt={key:1,class:"upgrade-loading"},Wt={key:2,class:"no-data"},Ht=Y(()=>s("img",{src:Go,alt:""},null,-1)),Jt={key:3,class:"no-data"},zt=Y(()=>s("img",{src:Ko,alt:""},null,-1)),Qt=Y(()=>s("span",null,"No Data",-1)),Gt=[zt,Qt];function Kt(o,l,f,u,v,a){const i=Yo,d=zo,y=Zo,h=Mo,_=bo,g=ts,I=es,U=us;return n(),t(J,null,[o.farmsPoolListLoading?o.farmsPoolListLoading?(n(),t("div",Vt,[T(U,{type:"poolsCard",loading:!0})])):M("",!0):(n(),t("div",rt,[(n(!0),t(J,null,oo(o.farmsPoolList,e=>(n(),t("div",{key:e.id,class:"farms-item"},[T(i,{"pool-info":e},null,8,["pool-info"]),s("div",dt,[s("div",ct,[ut,s("div",mt,"$"+b(("addCommom"in o?o.addCommom:w(V))(o.addressLpTokens&&o.addressLpTokens[e.clmm_pool_id]&&o.addressLpTokens[e.clmm_pool_id].stable_farming&&o.addressLpTokens[e.clmm_pool_id].stable_farming.tvl,2)),1)]),s("div",pt,[_t,s("div",ft,[F(b(("sFixD"in o?o.sFixD:w(z))(o.addressLpTokens&&o.addressLpTokens[e.clmm_pool_id]&&o.addressLpTokens[e.clmm_pool_id].stable_farming&&o.addressLpTokens[e.clmm_pool_id].stable_farming.apr*100,2))+"% ",1),s("div",vt,[!("checkNullObj"in o?o.checkNullObj:w(q))(o.rewardInfoObj)&&o.rewardInfoObj[e.clmm_pool_id]?(n(),j(d,{key:0,"l-item":o.rewardInfoObj[e.clmm_pool_id],"rewarder-info":o.rewardInfoObj[e.clmm_pool_id].rewards,class:"noHover apr-hover-con"},null,8,["l-item","rewarder-info"])):M("",!0)])])]),s("div",ht,[gt,s("div",bt,[(n(!0),t(J,null,oo(e.rewarders,p=>(n(),j(y,{key:p.reward_coin,"reward-info":p,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("div",$t,[wt,o.wallet.address?(n(),t("div",yt,[s("div",kt," $"+b(("sFixD"in o?o.sFixD:w(z))(o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].positionNum?(n(),t("div",It,b(o.farmsUserUsd[e.clmm_pool_id].positionNum)+" "+b(o.farmsUserUsd[e.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):M("",!0)])):(n(),t("div",St,Tt))]),s("div",Lt,[Ct,s("div",jt,[s("div",Ut,[o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",Ot,[T(h,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[e.clmm_pool_id]&&o.farmsRewardObj[e.clmm_pool_id].amountUsd?(n(),t(J,{key:1},[Rt,o.farmsRewardObj[e.clmm_pool_id].amountUsd>.01?(n(),t("span",At,"$"+b(("addCommom"in o?o.addCommom:w(V))(("sFixD"in o?o.sFixD:w(z))(o.farmsRewardObj[e.clmm_pool_id].amountUsd||0,2))),1)):o.farmsRewardObj[e.clmm_pool_id].amountUsd>0&&o.farmsRewardObj[e.clmm_pool_id].amountUsd<.01?(n(),t("span",Ft,"<$0.01")):(n(),t("span",Dt,"0"))],64)):(n(),t("span",Nt,"--"))]),T(_,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[e.clmm_pool_id]||o.farmsRewardObj[e.clmm_pool_id].amountUsd<=0,onClick:So(p=>o.claimPoolReward(e.clmm_pool_id),["stop"])},{default:A(()=>[F("Claim")]),_:2},1032,["disabled","onClick"])])])]),s("div",Bt,[T(_,{class:"add-liquidity-btn",onClick:So(p=>o.router.push(`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`),["stop"])},{default:A(()=>[F("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more-btn",onClick:p=>o.openMore(e)},[(n(),t("svg",{class:ho(["arrow-icon",!("checkNullObj"in o?o.checkNullObj:w(q))(o.openMoreObj)&&o.openMoreObj[e==null?void 0:e.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},qt,2))],8,Et),(n(!0),t(J,null,oo(o.farmsPositionObj[e.clmm_pool_id],p=>no((n(),j(g,{key:p.clmm_pool_id,"current-tab":o.currentTab,"position-info":{...p,clmm_pool_id:e.clmm_pool_id}},null,8,["current-tab","position-info"])),[[Jo,!("checkNullObj"in o?o.checkNullObj:w(q))(o.openMoreObj)&&o.openMoreObj[e==null?void 0:e.clmm_pool_id]]])),128)),o.farmsPositionObj&&o.farmsPositionObj[e.clmm_pool_id]&&o.farmsPositionObj[e.clmm_pool_id].length==0?(n(),j(I,{key:0,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`},null,8,["add-liquidity-url"])):M("",!0),o.wallet.address?M("",!0):(n(),j(I,{key:1,"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"},null,8,["no-data-img"]))]))),128))])),!o.wallet.connected&&o.currentTab=="My Farms"?(n(),t("div",Wt,[Ht,T(_,{class:"connect-wallet",onClick:l[0]||(l[0]=e=>o.wallet.setIsShowWalletModal(!0))},{default:A(()=>[F(b(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(n(),t("div",Jt,Gt)):M("",!0)],64)}const as=K(lt,[["render",Kt],["__scopeId","data-v-106b0078"]]),Xt=G({setup(o,l){const f=["Live","Ended","My Farms"],u=W("Live"),v=W("APR"),a=W(!1),i=lo(),d=c(()=>i),y=io(),h=c(()=>y),_=c(()=>u.value=="My Farms"?h.value.address?d.value.myFarmsPoolList:[]:u.value=="Ended"?d.value.farmsPoolList.filter(p=>p.status=="Ended"):d.value.farmsPoolList.filter(p=>p.status=="Live"));return{tabList:f,currentTab:u,sortValue:v,clickRefresh:()=>{a.value=!0,i.getFarmsPoolList(),setTimeout(()=>{a.value=!1},1e3)},isRefresh:a,farmsPoolList:_,getListNum:p=>_.value.length,changeTab:p=>{u.value=p,l.emit("changeTab",p)},changeSortValue:p=>{v.value=p,l.emit("changeSortValue",p)}}}});const Do=o=>(to("data-v-346768f7"),o=o(),ao(),o),Yt={class:"farms-tab"},Zt={class:"tab-left"},xt=["onClick"],oa={key:0},sa={class:"tab-right"},ea={class:"sort-select"},na={class:"sort-select-box"},ta=Do(()=>s("div",null,"Sort by",-1)),aa=Do(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),ia=Do(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),la={class:"sort-list"},ra={class:"refresh"},da=Do(()=>s("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),ca=[da];function ua(o,l,f,u,v,a){return n(),t("div",Yt,[s("div",Zt,[(n(!0),t(J,null,oo(o.tabList,i=>(n(),t("div",{key:i,class:ho(["tab-item",o.currentTab==i?"tab-item-active":""]),onClick:d=>o.changeTab(i)},[s("span",null,b(i=="Ended"?"Finished":i),1),o.currentTab==i&&o.getListNum(i)?(n(),t("p",oa,b(o.getListNum(i)),1)):M("",!0)],10,xt))),128))]),s("div",sa,[s("div",ea,[s("div",na,[ta,s("div",null,[s("span",null,b(o.sortValue),1),aa,ia])]),s("div",la,[s("div",{class:"sort-item",onClick:l[0]||(l[0]=i=>o.changeSortValue("APR"))},"APR"),s("div",{class:"sort-item",onClick:l[1]||(l[1]=i=>o.changeSortValue("TVL"))},"TVL")])]),s("div",ra,[(n(),t("svg",{"aria-hidden":"true",class:ho(["refresh-icon",o.isRefresh?"refreshing":""]),onClick:l[2]||(l[2]=(...i)=>o.clickRefresh&&o.clickRefresh(...i))},ca,2))])])])}const ma=K(Xt,[["render",ua],["__scopeId","data-v-346768f7"]]),pa=G({components:{FarmsBanner:Xo,FarmsTabs:ma,FarmsTable:ns,FarmsH5List:as},setup(){const o=lo(),l=c(()=>o),f=c(()=>l.value.farmsPoolListLoading),u=W("APR"),v=c(()=>l.value.farmsPoolList),a=io(),i=c(()=>a),d=_o(),y=c(()=>d);go(()=>[i.value.address,v.value,y.value.tokensObj,y.value.RATES],([_,g,I,U])=>{_&&g.length>0&&!q(I)&&!q(U)&&o.getPositionByAllPool(_)},{immediate:!0}),ds(()=>{o.getFarmsPoolList()}),go(()=>i.value.address,_=>{_||o.logOut()},{immediate:!0});const h=W("Live");return{farmsPoolListLoading:f,currentTab:h,sortValue:u}}});const _a={class:"farm-container"},fa={class:"farm-container-center"};function va(o,l,f,u,v,a){const i=Xo,d=cs("FarmsTabs"),y=ns,h=Dn,_=as;return n(),t("div",_a,[T(i),s("div",fa,[T(d,{onChangeTab:l[0]||(l[0]=g=>{o.currentTab=g}),onChangeSortValue:l[1]||(l[1]=g=>{o.sortValue=g})}),o.farmsPoolListLoading?(n(),j(h,{key:1,"current-tab":o.currentTab},null,8,["current-tab"])):(n(),j(y,{key:0,"current-tab":o.currentTab,"sort-value":o.sortValue},null,8,["current-tab","sort-value"])),T(_,{"current-tab":o.currentTab,"sort-value":o.sortValue},null,8,["current-tab","sort-value"])])])}const Fa=K(pa,[["render",va],["__scopeId","data-v-da31e0f3"]]);export{Fa as default};
