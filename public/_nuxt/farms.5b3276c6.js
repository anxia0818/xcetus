import{u as ho,e as Y,m as Z,T as fo,s as D,a as Po,c as lo}from"./pool.f82ea964.js";import{Q as qo,a as V,l as w,r as J,e as H,o as n,f as d,h as s,v as I,u as B,c as R,w as M,B as co,j as q,p as Q,k as K,z as ao,i as L,s as vo,t as to,b as go,A as ro,x as z,F as G,E as X,N as So,M as Uo,S as Eo,J as Lo,q as Wo,H as Vo,R as Ho}from"./entry.34270a91.js";import{a as eo,u as _o}from"./sha256.3c86449e.js";import{D as F}from"./decimal.0bdeb344.js";import{i as $o}from"./import-icon.de3e6c66.js";/* empty css              *//* empty css              */import{_ as Go}from"./upgrade-loading.d79ebdfe.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const x=qo("farms",{state:()=>({farmsPoolList:[],farmsPoolObj:{},farmsPoolListLoading:!1,cmmPoolInfoObj:{},farmsPositionObj:{},farmsLoadingObj:{},farmsUserUsd:{},farmsRewardObj:{},totalRwadrdUsd:"",farmsPositionList:[],farmsAllPositionLoading:!1,myFarmsPoolList:[]}),getters:{getPoolStore(){return ho()}},actions:{async getFarmsPoolList(){this.farmsPoolListLoading=!0;const r=await Y("Sui").getLpList(),_=Object.fromEntries(r.map((e,a)=>[e.address,e]));console.log(_,"cmmLpObj##");const f=await Z("Sui").getFramsPoolList();console.log("getFarmsPoolList:",f);const l=f.map(e=>{const a=_[e.clmm_pool_id],{tokensObj:h}=this.getPoolStore,g=e.rewarders.map(u=>{const A=u.reward_coin=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":u.reward_coin,y=h[A].decimals;return{...u,reward_coin:A,emission_per_day:new F(u.emission_per_second).div(Math.pow(10,12)).mul(60*60*24).div(Math.pow(10,y)).toString()}}),v=a.coinA.decimals,i=a.coinB.decimals,c=fo.tickIndexToPrice(e.effective_tick_lower,v,i).toString(),t=fo.tickIndexToPrice(e.effective_tick_upper,v,i).toString();return{...e,minPrice:c,maxPrice:t,fee:a.fee*100+"%",coinA:a.coinA,coinB:a.coinB,rewarders:g}});this.farmsPoolList=l,this.farmsPoolObj=Object.fromEntries(f.map(e=>[e.clmm_pool_id,{...e,address:e.clmm_pool_id}])),this.cmmPoolInfoObj=_,this.farmsPoolListLoading=!1},async getPositionByPool(o,r,_){var v,i;this.farmsLoadingObj[r]=!0;const m=Y("Sui"),f=Z("Sui");console.log(o,r,"#account, poolAddress");const e=(await f.getOwnedFramsPositionNFTList(!0)).filter(c=>c.clmm_pool_id==r),a=await m.getPositionList(o,{address:{address:r}})||[],h=e.concat(a);console.log(e,a,"###farmingPositionList"),console.log(h,"###positionGroup"),this.farmsUserUsd[r]={amount:new F(0),positionNum:0};const g=[];for(let c=0;c<h.length;c++){const t=h[c],u=this.cmmPoolInfoObj[t.clmm_pool_id||t.pool];console.log(u,"##poolInfo");const A=u.coinA.decimals,y=u.coinB.decimals;let C,T;t.tick_lower_index==m.TickUtil.getMinIndex(Number(u.tick_spacing))?C="0":C=m.TickMath.tickIndexToPrice(Number(t.tick_lower_index),A,y).toString(),t.tick_upper_index==m.TickUtil.getMaxIndex(Number(u.tick_spacing))?T="∞":T=m.TickMath.tickIndexToPrice(Number(t.tick_upper_index),A,y).toString(),console.log(t,"#position.clmm_pool_id");let j;const P=await m.getPool(t.clmm_pool_id||t.pool),U=fo.sqrtPriceX64ToPrice(P.current_sqrt_price,A,y).toString();Number(U)>=Number(C)&&(T==="∞"||Number(U)<=Number(T))?j="Active":(Number(U)>Number(T)||Number(U)<Number(C))&&(j="Inactive");const S=m.getCoinAmountFromLiquidity({pool:P,position:t,roundUp:!1}),{RATES:$,tokensObj:p}=this.getPoolStore;console.log($,"##cmmPoolStore");const k=((v=$[u.coinA.address])==null?void 0:v.price)||"",b=((i=$[u.coinB.address])==null?void 0:i.price)||"",N=new F(S.coinaAmount).div(Math.pow(10,A)).mul(k),O=new F(S.coinbAmount).div(Math.pow(10,y)).mul(b);t.rewards&&t.rewards.length>0?t.rewards=t.rewards.map(W=>{console.log(W,t,"reward##171");const oo=W.rewarder_type=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":W.reward_type,io=p[oo],so=$[oo].price,mo=new F(W.rewarder_amount).div(new F(Math.pow(10,io.decimals)));console.log(mo,so,"amount,rewardPrice");const po=mo.mul(new F(so)),Mo=this.farmsRewardObj[t.clmm_pool_id]||{amountUsd:new F(0)};return this.farmsRewardObj[t.clmm_pool_id]?this.farmsRewardObj[t.clmm_pool_id].amountUsd=this.farmsRewardObj[t.clmm_pool_id].amountUsd.add(po):(this.farmsRewardObj[t.clmm_pool_id]=Mo,this.farmsRewardObj[t.clmm_pool_id].amountUsd=new F(0).add(po)),console.log(this.farmsRewardObj,"##farmsRewardObj"),this.totalRwadrdUsd=new F(this.totalRwadrdUsd).add(po),{...W,rewarderAmount:mo.toString(),rewarderAmountUsd:po.toString(),rewarderType:oo}}):(t.rewards=[],this.farmsRewardObj[t.clmm_pool_id]={});let E;if(t.id){const W=N.add(O),oo=this.farmsUserUsd[t.clmm_pool_id]||{amount:new F(0),positionNum:0};this.farmsUserUsd[t.clmm_pool_id]?(this.farmsUserUsd[t.clmm_pool_id].amount=this.farmsUserUsd[t.clmm_pool_id].amount.add(W),this.farmsUserUsd[t.clmm_pool_id].positionNum+=1):(this.farmsUserUsd[t.clmm_pool_id]=oo,this.farmsUserUsd[t.clmm_pool_id].amount=this.farmsUserUsd[t.clmm_pool_id].amount.add(W),this.farmsUserUsd[t.clmm_pool_id].positionNum+=1),console.log(t,"potision###");const io=this.farmsPoolObj[t.clmm_pool_id];E=f.calculatePositionShare(t,io,P.current_sqrt_price),console.log(E,"##positionShare")}g.push({...t,minPrice:C,maxPrice:T,positionUSD:N.add(O).toNumber(),clmmPool:t.clmm_pool_id||t.pool,positionStatus:j,positionSource:t.creator?"clmm":"farming",farmsPoolId:_,coinA:u.coinA,coinB:u.coinB,positionShare:E})}this.farmsPositionObj[r]=g,this.farmsLoadingObj[r]=!1},async getPositionByAllPool(o){var h,g;this.farmsAllPositionLoading=!0;const r=Z("Sui"),_=Y("Sui");this.farmsUserUsd={},this.totalRwadrdUsd=0;const m=await r.getOwnedFramsPositionNFTList(!0),f=await _.getPositionList(o,this.farmsPoolObj)||[];console.log(f,"###clmmPositionList");const l=m.concat(f);console.log(l,"##positionGroup");const e=[];for(let v=0;v<l.length;v++){const i=l[v],c=await _.getPool(i.clmm_pool_id||i.pool),t=_.getCoinAmountFromLiquidity({pool:c,position:i,roundUp:!1}),{RATES:u,tokensObj:A}=this.getPoolStore,y=this.cmmPoolInfoObj[i.clmm_pool_id||i.pool],C=((h=u[y.coinA.address])==null?void 0:h.price)||"",T=((g=u[y.coinB.address])==null?void 0:g.price)||"",j=y.coinA.decimals,P=y.coinB.decimals,U=new F(t.coinaAmount).div(Math.pow(10,j)).mul(C),S=new F(t.coinbAmount).div(Math.pow(10,P)).mul(T);let $,p;i.tick_lower_index==_.TickUtil.getMinIndex(Number(y.tick_spacing))?$="0":$=_.TickMath.tickIndexToPrice(Number(i.tick_lower_index),j,P).toString(),i.tick_upper_index==_.TickUtil.getMaxIndex(Number(y.tick_spacing))?p="∞":p=_.TickMath.tickIndexToPrice(Number(i.tick_upper_index),j,P).toString();let k;const b=fo.sqrtPriceX64ToPrice(c.current_sqrt_price,j,P).toString();Number(b)>=Number($)&&(p==="∞"||Number(b)<=Number(p))?k="Active":(Number(b)>Number(p)||Number(b)<Number($))&&(k="Inactive");let N;if(i.id){const O=U.add(S),E=this.farmsUserUsd[i.clmm_pool_id]||{amount:new F(0),positionNum:0};this.farmsUserUsd[i.clmm_pool_id]?(this.farmsUserUsd[i.clmm_pool_id].amount=this.farmsUserUsd[i.clmm_pool_id].amount.add(O),this.farmsUserUsd[i.clmm_pool_id].positionNum+=1):(this.farmsUserUsd[i.clmm_pool_id]=E,this.farmsUserUsd[i.clmm_pool_id].amount=this.farmsUserUsd[i.clmm_pool_id].amount.add(O),this.farmsUserUsd[i.clmm_pool_id].positionNum+=1),console.log(i,"potision###");const W=this.farmsPoolObj[i.clmm_pool_id];N=r.calculatePositionShare(i,W,c.current_sqrt_price),console.log(N,"##positionShare")}i.rewards&&i.rewards.length>0&&(i.rewards=i.rewards.map(O=>{const E=O.rewarder_type=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":O.reward_type,W=A[E],oo=u[E].price,io=new F(O.rewarder_amount).div(new F(Math.pow(10,W.decimals))),so=io.mul(new F(oo)),mo=this.farmsRewardObj[i.clmm_pool_id]||{amountUsd:new F(0)};return this.farmsRewardObj[i.clmm_pool_id]?this.farmsRewardObj[i.clmm_pool_id].amountUsd=this.farmsRewardObj[i.clmm_pool_id].amountUsd.add(so):(this.farmsRewardObj[i.clmm_pool_id]=mo,this.farmsRewardObj[i.clmm_pool_id].amountUsd=new F(0).add(so)),this.totalRwadrdUsd=new F(this.totalRwadrdUsd).add(so),{...O,rewarderAmount:io.toString(),rewarderAmountUsd:so.toString(),rewarderType:E}})),e.push({...i,minPrice:$,maxPrice:p,positionUSD:U.add(S).toNumber(),clmmPool:i.clmm_pool_id||i.pool,positionStatus:k,positionSource:i.creator?"clmm":"farming",farmsPoolId:i.id,coinA:y.coinA,coinB:y.coinB,soucrce:i.id?"farming":"clmm",positionShare:N})}this.farmsPositionList=e;const a={};e.forEach(v=>{a[v.clmm_pool_id||v.pool]||(a[v.clmm_pool_id||v.pool]=[]),a[v.clmm_pool_id||v.pool].push(v)}),this.farmsPositionObj=a,this.farmsAllPositionLoading=!1,console.log(this.farmsPositionObj,"#farmingPositionList"),this.getMyFarms()},getMyFarms(){const o=[];this.farmsPoolList.forEach(r=>{this.farmsPositionObj[r.clmm_pool_id]&&o.push(r)}),this.myFarmsPoolList=o,console.log(o,"##myFarms")}}}),Jo=V({setup(){const o=eo(),r=w(()=>o),_=x(),m=w(()=>_),f=w(()=>m.value.totalRwadrdUsd),l=w(()=>m.value.farmsPositionList),e=_o(),a=Z("Sui"),h=Y("Sui"),{setIsShowSuccess:g,setIsShowRejected:v,setIsShowWaiting:i,setTransactionDesc:c,setTransactionTxid:t}=e,u=J(!1);return{wallet:r,farms:m,totalRwadrdUsd:f,sFixD:D,claimAllPoolReward:async y=>{u.value=!0,console.log(l.value,"farmsRewardObj###");const C=[];l.value.forEach(T=>{console.log(y,T,"#position"),T.positionSource=="farming"&&C.push({pool_id:T.pool_id,position_nft_id:T.id})}),console.log(JSON.stringify(C),"##params"),t(""),c("Claim All"),i(!0);try{const T=await a.batchHarvest(C),j=await r.value.currentWallet.signAndExecuteTransactionBlock(T);console.log("0221###sui swap res###",j);let P=h.handleTx(j);if(P&&P.hash){t(P.hash),i(!1),g(!0);let U={res:P.res,title:"Stake"};h.showTransitionPending(U),await h.watchTransaction(U)&&setTimeout(()=>{_.getFarmsPoolList()},4e3)}else i(!1),v(!0);u.value=!1}catch(T){console.log("Claim all error",T),i(!1),v(!0),u.value=!1}},loading:u}}});const yo=o=>(Q("data-v-87a34b41"),o=o(),K(),o),zo={class:"farms-banner"},Xo={class:"farms-banner-center"},Qo=yo(()=>s("div",{class:"title"},"Farms",-1)),Ko=yo(()=>s("div",{class:"desc"},"Stake Liquidity position to earn more rewards.",-1)),Yo={class:"claim-rewards"},Zo={class:"claim-title"},xo=yo(()=>s("span",null,"Claimed Rewards",-1)),os={key:0},ss={key:1},ts={class:"claim-content"};function es(o,r,_,m,f,l){const e=co;return n(),d("div",zo,[s("div",Xo,[Qo,Ko,s("div",Yo,[s("div",Zo,[xo,o.wallet.address?(n(),d("span",os,"$"+I(("sFixD"in o?o.sFixD:B(D))(o.totalRwadrdUsd||0,4)),1)):(n(),d("span",ss,"--"))]),s("div",ts,[o.wallet.address?(n(),R(e,{key:0,class:"claim-btn",loading:o.loading,disabled:Number(o.totalRwadrdUsd)==0,onClick:o.claimAllPoolReward},{default:M(()=>[q("Claim All")]),_:1},8,["loading","disabled","onClick"])):(n(),R(e,{key:1,class:"claim-btn",onClick:r[0]||(r[0]=a=>o.wallet.setIsShowWalletModal(!0))},{default:M(()=>[q("Connect")]),_:1}))])])])])}const To=H(Jo,[["render",es],["__scopeId","data-v-87a34b41"]]),ns=V({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=J(!0);return{sFixD:D,direct:o}}}),jo=""+globalThis.__publicAssetsURL("sui-image/range.png");const bo=o=>(Q("data-v-faaa65b4"),o=o(),K(),o),is={class:"range"},as={key:0},ls=bo(()=>s("img",{src:jo,alt:""},null,-1)),rs={class:"per"},cs={key:1},ds=bo(()=>s("img",{src:jo,alt:""},null,-1)),us={class:"per"},ms=bo(()=>s("div",null,[s("svg",{class:"icon icon-up","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),_s=bo(()=>s("div",null,[s("svg",{class:"icon icon-down","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ps=[ms,_s];function fs(o,r,_,m,f,l){var e,a,h,g;return n(),d("div",is,[o.direct?(n(),d("p",as,[s("span",null,I(("sFixD"in o?o.sFixD:B(D))(o.poolInfo.minPrice,6)),1),ls,s("span",null,I(("sFixD"in o?o.sFixD:B(D))(o.poolInfo.maxPrice,6)),1),s("span",rs,I((e=o.poolInfo.coinA)==null?void 0:e.symbol)+" per "+I((a=o.poolInfo.coinB)==null?void 0:a.symbol),1)])):(n(),d("p",cs,[s("span",null,I(o.poolInfo.maxPrice!=="∞"?("sFixD"in o?o.sFixD:B(D))(1/o.poolInfo.maxPrice,6):"0"),1),ds,s("span",null,I(o.poolInfo.minPrice!=="0"?("sFixD"in o?o.sFixD:B(D))(1/o.poolInfo.minPrice,6):"∞"),1),s("span",us,I((h=o.poolInfo.coinB)==null?void 0:h.symbol)+" per "+I((g=o.poolInfo.coinA)==null?void 0:g.symbol),1)])),s("div",{class:"icon-change",onClick:r[0]||(r[0]=ao(v=>o.direct=!o.direct,["stop"]))},ps)])}const ko=H(ns,[["render",fs],["__scopeId","data-v-faaa65b4"]]),hs=V({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=J(!0);return{sFixD:D,direct:o}}});const vs=o=>(Q("data-v-14f67ada"),o=o(),K(),o),gs={class:"valid-range"},bs=vs(()=>s("div",{class:"title"},"Valid Range",-1));function ws(o,r,_,m,f,l){const e=ko;return n(),d("div",gs,[bs,L(e,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const $s=H(hs,[["render",ws],["__scopeId","data-v-14f67ada"]]),ys=V({props:{poolInfo:{type:Object,default:()=>({})}},setup(){return{}}});const ks={class:"pool"},Is={class:"pool-info"},Ps={class:"token-logo"},Ss={alt:""},Us={alt:""},Ls={class:"token-symbol"},Ts={class:"symbol"},js={class:"fee-rate"};function Os(o,r,_,m,f,l){var h,g,v,i;const e=$s,a=vo("image");return n(),d("div",ks,[s("div",Is,[s("div",Ps,[to(s("img",Ss,null,512),[[a,(h=o.poolInfo.coinA)==null?void 0:h.logo_url]]),to(s("img",Us,null,512),[[a,(g=o.poolInfo.coinB)==null?void 0:g.logo_url]])]),s("div",Ls,[s("div",Ts,I((v=o.poolInfo.coinA)==null?void 0:v.symbol)+" - "+I((i=o.poolInfo.coinB)==null?void 0:i.symbol),1),s("div",js,I(o.poolInfo.fee),1)])]),L(e,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const Oo=H(ys,[["render",Os],["__scopeId","data-v-b948a1e2"]]),Rs=V({props:{rewardInfo:{type:Object,default:()=>({})}},setup(){const o=ho(),r=w(()=>o);return{sFixD:D,addCommom:Po,getCoinIcon:m=>{var f;return((f=r.value.tokensObj[m])==null?void 0:f.logo_url)||$o("/image/coins/sui-unknown.png")}}}});const As={class:"rewards-day"},Cs={alt:""};function Fs(o,r,_,m,f,l){const e=vo("image");return n(),d("div",As,[s("div",null,[to(s("img",Cs,null,512),[[e,o.getCoinIcon(o.rewardInfo.reward_coin)]]),s("span",null,I(("addCommom"in o?o.addCommom:B(Po))(("sFixD"in o?o.sFixD:B(D))(o.rewardInfo.emission_per_day,4))),1)])])}const Ro=H(Rs,[["render",Fs],["__scopeId","data-v-9e4f9e58"]]),Ns=V({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const r=eo(),_=w(()=>r);console.log(o.positionInfo,"positionInfo#");const m=x(),f=w(()=>m),l=Y("Sui"),e=Z("Sui"),a=J(!1),h=_o();w(()=>h);const g=go(),{setIsShowSuccess:v,setIsShowRejected:i,setIsShowWaiting:c,setTransactionDesc:t,setTransactionTxid:u}=h,A=async()=>{console.log(o.positionInfo,"props.positionInfo"),a.value=!0,u(""),t("Stake"),c(!0);const S={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},$=o.positionInfo.farmsPoolId;try{const p=await e.farmsDeposit(S,$),k=await _.value.currentWallet.signAndExecuteTransactionBlock(p);console.log("0221###sui swap res###",k);let b=l.handleTx(k);if(b&&b.hash){u(b.hash),c(!1),v(!0);let N={res:b.res,title:"Stake"};l.showTransitionPending(N),await l.watchTransaction(N)&&setTimeout(()=>{m.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else c(!1),i(!0);a.value=!1}catch(p){console.log("farmsDeposit error",p),c(!1),i(!0),a.value=!1}},y=async()=>{console.log(o.positionInfo,"props.positionInfo"),a.value=!0,u(""),t("UnStake"),c(!0);const S=o.positionInfo.farmsPoolId,$=o.positionInfo.id;try{const p=await e.farmsWithdraw(S,$),k=await _.value.currentWallet.signAndExecuteTransactionBlock(p);console.log("0221###sui swap res###",k);let b=l.handleTx(k);if(b&&b.hash){u(b.hash),c(!1),v(!0);let N={res:b.res,title:"Unstake"};l.showTransitionPending(N),await l.watchTransaction(N)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),m.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},4e3)}else c(!1),i(!0);a.value=!1}catch(p){console.log("farmsDeposit error",p),c(!1),i(!0),a.value=!1}},C=async()=>{console.log(o.positionInfo,"props.positionInfo"),a.value=!0,u(""),t("Claim"),c(!0);const S={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const $=await e.harvestFarms(S),p=await _.value.currentWallet.signAndExecuteTransactionBlock($);console.log("0221###sui swap res###",p);let k=l.handleTx(p);if(k&&k.hash){u(k.hash),c(!1),v(!0);let b={title:"claim",res:k.res};l.showTransitionPending(b),await l.watchTransaction(b)&&setTimeout(()=>{m.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else c(!1),i(!0);a.value=!1}catch($){console.log("farmsDeposit error",$),c(!1),i(!0),a.value=!1}},T=w(()=>f.value.farmsRewardObj),j=ho(),P=w(()=>j);return{sFixD:D,stake:A,loading:a,unStake:y,router:g,claim:C,farmsRewardObj:T,getCoinIcon:S=>{var $;return(($=P.value.tokensObj[S])==null?void 0:$.logo_url)||$o("/image/coins/sui-unknown.png")}}}}),Ao=""+globalThis.__publicAssetsURL("sui-image/position-active.png");const Io=o=>(Q("data-v-d4d0c97d"),o=o(),K(),o),Ds={class:"farms-position-item"},Bs=Io(()=>s("thead",null,[s("tr",null,[s("th"),s("th",null,"Liquidity"),s("th",null,"Share"),s("th",null,"Earnings"),s("th")])],-1)),Ms={class:"position-info"},qs={key:0,class:"status-bg"},Es=Io(()=>s("img",{src:Ao,alt:""},null,-1)),Ws=[Es],Vs={class:"status-text"},Hs={class:"name-range"},Gs=Io(()=>s("div",{class:"details"},[s("span",null,"Details"),s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})])],-1)),Js={class:"liquidity"},zs={class:"apr"},Xs={alt:""},Qs={key:1,class:"rewards-day"},Ks={class:"action-btn"};function Ys(o,r,_,m,f,l){const e=ko,a=co,h=vo("image");return n(),d("div",Ds,[s("table",null,[Bs,s("tbody",null,[s("tr",null,[s("td",null,[s("div",Ms,[s("div",{class:ro(["position-status",o.positionInfo.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionInfo.positionStatus=="Active"?(n(),d("div",qs,Ws)):z("",!0),s("div",Vs,I(o.positionInfo.positionStatus),1)],2),s("div",Hs,[s("span",null,I(o.positionInfo.name),1),L(e,{"pool-info":o.positionInfo},null,8,["pool-info"])]),Gs])]),s("td",null,[s("div",Js,"~$"+I(("sFixD"in o?o.sFixD:B(D))(o.positionInfo.positionUSD,6)),1)]),s("td",null,[s("div",zs,I(("sFixD"in o?o.sFixD:B(D))(o.positionInfo.positionShare||0,2))+"%",1)]),s("td",null,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),d(G,{key:0},X(o.positionInfo.rewards,g=>(n(),d("div",{key:g.rewarder_type,class:"rewards-day"},[s("div",null,[to(s("img",Xs,null,512),[[h,o.getCoinIcon(g.rewarder_type)]]),s("span",null,I(g.rewarderAmount),1)])]))),128)):(n(),d("div",Qs,"--"))]),s("td",null,[s("div",Ks,[o.positionInfo.positionSource=="clmm"?(n(),R(a,{key:0,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:M(()=>[q("Stake")]),_:1},8,["loading","disabled","onClick"])):(n(),R(a,{key:1,class:"unstake-btn",onClick:o.unStake},{default:M(()=>[q("UnStake")]),_:1},8,["onClick"])),o.positionInfo.positionSource=="clmm"?(n(),R(a,{key:2,class:"add-liquidity-btn",onClick:r[0]||(r[0]=g=>o.router.push(`/new-position-detail?collect=${o.positionInfo.collectionName}&&token=${o.positionInfo.tokenName}&&address=${o.positionInfo.pool}&pos=${o.positionInfo.pos_object_id}`))},{default:M(()=>[q("+ Add liquidity")]),_:1})):(n(),R(a,{key:3,class:"claim-btn",disabled:o.positionInfo&&o.positionInfo.rewards&&o.positionInfo.rewards.length>0,onClick:o.claim},{default:M(()=>[q("↑ Claim")]),_:1},8,["disabled","onClick"]))])])])])])])}const Co=H(Ns,[["render",Ys],["__scopeId","data-v-d4d0c97d"]]),Zs=V({props:{noDataImg:{type:String,default:""},desc:{type:String,default:""},type:{type:String,default:""},addLiquidityUrl:{type:String,default:""}},setup(){return{}}});const xs={class:"no-data"},ot=["src"],st={key:0,class:"desc"};function tt(o,r,_,m,f,l){const e=co;return n(),d("div",xs,[s("img",{src:o.noDataImg,alt:""},null,8,ot),o.desc?(n(),d("div",st,I(o.desc),1)):z("",!0),o.type=="addLiquidity"?(n(),R(e,{key:1,class:"add-liquidity-btn",onClick:r[0]||(r[0]=a=>o.addLiquidityUrl?o.$router.push(o.addLiquidityUrl):"")},{default:M(()=>[q("Add Liquidity")]),_:1})):z("",!0),o.type=="connectWallet"?(n(),R(e,{key:2,class:"add-liquidity-btn"},{default:M(()=>[q("Connect Wallet")]),_:1})):z("",!0)])}const Fo=H(Zs,[["render",tt],["__scopeId","data-v-7d28f356"]]),et=V({components:{FarmsPositionItem:Co},props:{currentTab:{type:String,default:""}},setup(o){const r=J({}),_=eo(),m=w(()=>_),f=x(),l=w(()=>f),e=w(()=>(console.log(l.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?l.value.myFarmsPoolList:l.value.farmsPoolList)),a=p=>{r.value[p.clmm_pool_id]?r.value[p.clmm_pool_id]=!1:(r.value[p.clmm_pool_id]=!0,console.log("执行了吗"),f.getPositionByPool(m.value.address,p.clmm_pool_id,p.id))},h=w(()=>l.value.farmsPositionObj),g=w(()=>(console.log(l.value.farmsLoadingObj,"##farms.value.farmsLoadingObj"),l.value.farmsLoadingObj)),v=w(()=>l.value.farmsUserUsd),i=w(()=>(console.log(l.value.farmsRewardObj,"##farmsRewardObj"),l.value.farmsRewardObj)),c=w(()=>l.value.farmsPositionList),t=w(()=>l.value.farmsAllPositionLoading),u=go(),A=_o(),y=Z("Sui"),C=Y("Sui"),{setIsShowSuccess:T,setIsShowRejected:j,setIsShowWaiting:P,setTransactionDesc:U,setTransactionTxid:S}=A;return{wallet:m,walletStore:_,farmsPoolList:e,openMore:a,openMoreObj:r,checkNullObj:lo,router:u,farmsPositionObj:h,farmsLoadingObj:g,farmsUserUsd:v,sFixD:D,farmsRewardObj:i,claimPoolReward:async p=>{console.log(c.value,"farmsRewardObj###");const k=[];c.value.forEach(b=>{console.log(p,b,"#position"),p==b.clmm_pool_id&&k.push({pool_id:b.pool_id,position_nft_id:b.id})}),console.log(JSON.stringify(k),"##params"),S(""),U("Claim All"),P(!0);try{const b=await y.batchHarvest(k),N=await m.value.currentWallet.signAndExecuteTransactionBlock(b);console.log("0221###sui swap res###",N);let O=C.handleTx(N);if(O&&O.hash){S(O.hash),P(!1),T(!0);let E={res:O.res,title:"Stake"};C.showTransitionPending(E),await C.watchTransaction(E)&&setTimeout(()=>{f.getFarmsPoolList()},4e3)}else P(!1),j(!0)}catch(b){console.log("Claim all error",b),P(!1),j(!0)}},farmsAllPositionLoading:t}}});const no=o=>(Q("data-v-002c5821"),o=o(),K(),o),nt={class:"farms-table"},it=no(()=>s("thead",null,[s("tr",null,[s("th",null,"Pool"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")])],-1)),at=["onClick"],lt=no(()=>s("td",null,[s("div",{class:"staked-tvl"},"$19,885,003.12")],-1)),rt=no(()=>s("td",null,[s("div",{class:"apr"},[s("span",null,"22.20%")])],-1)),ct={key:0,class:"my-staked"},dt={key:0,class:"my-staked-loading"},ut={class:"position-usd"},mt={key:0,class:"position-num"},_t={key:1,class:"my-staked"},pt=no(()=>s("div",{class:"position-usd"},"--",-1)),ft=[pt],ht={class:"earned"},vt={key:0,class:"my-staked-loading"},gt=no(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),bt={key:2},wt={class:"actions"},$t={class:"actions-btn"},yt=["onClick"],kt=no(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),It=[kt],Pt={colspan:"7"},St={key:0,class:"farm-position-list"},Ut={key:0,class:"farm-position-loading"},Lt={key:1,class:"farm-position-list"},Tt=no(()=>s("tr",{style:{height:"8px"}},null,-1));function jt(o,r,_,m,f,l){const e=Oo,a=Ro,h=Uo,g=co,v=Eo,i=Co,c=Fo;return n(),d("div",nt,[s("table",null,[it,s("tbody",null,[(n(!0),d(G,null,X(o.farmsPoolList,t=>(n(),d(G,{key:t.id},[s("tr",{onClick:u=>o.openMore(t)},[s("td",null,[L(e,{"pool-info":t},null,8,["pool-info"])]),lt,rt,s("td",null,[(n(!0),d(G,null,X(t.rewarders,u=>(n(),R(a,{key:u.reward_coin,"reward-info":u},null,8,["reward-info"]))),128))]),s("td",null,[o.wallet.address?(n(),d("div",ct,[o.farmsLoadingObj[t.clmm_pool_id]||o.farmsAllPositionLoading?(n(),d("div",dt,[L(h,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),d(G,{key:1},[s("div",ut," $"+I(("sFixD"in o?o.sFixD:B(D))(o.farmsUserUsd&&o.farmsUserUsd[t.clmm_pool_id]&&o.farmsUserUsd[t.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[t.clmm_pool_id]&&o.farmsUserUsd[t.clmm_pool_id].positionNum?(n(),d("div",mt,I(o.farmsUserUsd[t.clmm_pool_id].positionNum)+" Positions ",1)):z("",!0)],64))])):(n(),d("div",_t,ft))]),s("td",null,[s("div",ht,[o.farmsLoadingObj[t.clmm_pool_id]||o.farmsAllPositionLoading?(n(),d("div",vt,[L(h,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address?(n(),d(G,{key:1},[gt,s("span",null,"$"+I(("sFixD"in o?o.sFixD:B(D))(o.farmsRewardObj&&o.farmsRewardObj[t.clmm_pool_id]&&o.farmsRewardObj[t.clmm_pool_id].amountUsd||0,2)),1)],64)):(n(),d("span",bt,"--"))])]),s("td",null,[s("div",wt,[s("div",$t,[L(g,{class:"claim-btn",disabled:!o.wallet.address,onClick:ao(u=>o.claimPoolReward(t.clmm_pool_id),["stop"])},{default:M(()=>[q("Claim")]),_:2},1032,["disabled","onClick"]),L(g,{class:"add-liquidity-btn",onClick:ao(u=>o.router.push(`/liquidity/deposit?poolAddress=${t.clmm_pool_id}`),["stop"])},{default:M(()=>[q("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more",onClick:ao(u=>o.openMore(t),["stop"])},[(n(),d("svg",{class:ro(["arrow-icon",o.openMoreObj[t.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},It,2))],8,yt)])])],8,at),to(s("tr",null,[s("td",Pt,[o.wallet.address?(n(),d("div",St,[!("checkNullObj"in o?o.checkNullObj:B(lo))(o.farmsLoadingObj)&&o.farmsLoadingObj[t.clmm_pool_id]?(n(),d("div",Ut,[L(v)])):o.farmsPositionObj[t.clmm_pool_id]&&o.farmsPositionObj[t.clmm_pool_id].length>0?(n(!0),d(G,{key:1},X(o.farmsPositionObj[t.clmm_pool_id],u=>(n(),R(i,{key:u.clmm_pool_id,"position-info":{...u,clmm_pool_id:t.clmm_pool_id}},null,8,["position-info"]))),128)):(n(),R(c,{key:2,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${t.clmm_pool_id}`},null,8,["add-liquidity-url"]))])):(n(),d("div",Lt,[L(c,{"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"})]))])],512),[[So,!("checkNullObj"in o?o.checkNullObj:B(lo))(o.openMoreObj)&&o.openMoreObj[t==null?void 0:t.clmm_pool_id]]]),Tt],64))),128))])])])}const No=H(et,[["render",jt],["__scopeId","data-v-002c5821"]]),Ot=V({setup(){const o=J(!1),r=eo(),_=w(()=>r),m=x(),f=w(()=>m),l=w(()=>f.value.farmsPoolList);return{isShowMore:o,wallet:_,walletStore:r,farmsPoolList:l}}});const Rt=o=>(Q("data-v-c65dcb9d"),o=o(),K(),o),At={class:"farms-table"},Ct=Rt(()=>s("thead",null,[s("tr",null,[s("th",null,"Pool"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")])],-1)),Ft={class:"pool"},Nt={class:"staked-tvl"},Dt={class:"apr"},Bt={class:"rewards-day"},Mt={class:"my-staked"},qt={class:"earned"},Et={class:"actions"};function Wt(o,r,_,m,f,l){const e=Uo;return n(),d("div",At,[s("table",null,[Ct,s("tbody",null,[(n(),d(G,null,X(4,(a,h)=>s("tr",{key:h},[s("td",null,[s("div",Ft,[L(e,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),L(e,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Nt,[L(e,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Dt,[s("span",null,[L(e,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),s("td",null,[s("div",Bt,[L(e,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Mt,[L(e,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",qt,[L(e,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Et,[L(e,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])])),64))])])])}const Vt=H(Ot,[["render",Wt],["__scopeId","data-v-c65dcb9d"]]),Ht=V({props:{positionStatus:{type:String,default:"Active"},positionInfo:{type:Object,default:()=>({})}},setup(){return{}}});const Gt=o=>(Q("data-v-882c76c0"),o=o(),K(),o),Jt={class:"position-info"},zt={key:0,class:"status-bg"},Xt=Gt(()=>s("img",{src:Ao,alt:""},null,-1)),Qt=[Xt],Kt={class:"status-text"},Yt={class:"name-range"};function Zt(o,r,_,m,f,l){const e=ko;return n(),d("div",Jt,[s("div",{class:ro(["position-status",o.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionStatus=="Active"?(n(),d("div",zt,Qt)):z("",!0),s("div",Kt,I(o.positionStatus),1)],2),s("div",Yt,[s("span",null,I(o.positionInfo.name),1),o.positionStatus=="Active"?(n(),R(e,{key:0,"pool-info":o.positionInfo},null,8,["pool-info"])):z("",!0)])])}const xt=H(Ht,[["render",Zt],["__scopeId","data-v-882c76c0"]]),oe=V({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const r=ho(),_=w(()=>r),m=go(),f=P=>{var U;return((U=_.value.tokensObj[P])==null?void 0:U.logo_url)||$o("/image/coins/sui-unknown.png")},l=Y("Sui"),e=Z("Sui"),a=J(!1),h=_o(),g=eo(),v=x(),i=w(()=>g),{setIsShowSuccess:c,setIsShowRejected:t,setIsShowWaiting:u,setTransactionDesc:A,setTransactionTxid:y}=h;return{getCoinIcon:f,router:m,claim:async()=>{console.log(o.positionInfo,"props.positionInfo"),a.value=!0,y(""),A("Claim"),u(!0);const P={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const U=await e.harvestFarms(P),S=await i.value.currentWallet.signAndExecuteTransactionBlock(U);console.log("0221###sui swap res###",S);let $=l.handleTx(S);if($&&$.hash){y($.hash),u(!1),c(!0);let p={title:"claim",res:$.res};l.showTransitionPending(p),await l.watchTransaction(p)&&setTimeout(()=>{v.getPositionByPool(i.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else u(!1),t(!0);a.value=!1}catch(U){console.log("farmsDeposit error",U),u(!1),t(!0),a.value=!1}},unStake:async()=>{console.log(o.positionInfo,"props.positionInfo"),a.value=!0,y(""),A("UnStake"),u(!0);const P=o.positionInfo.farmsPoolId,U=o.positionInfo.id;try{const S=await e.farmsWithdraw(P,U),$=await i.value.currentWallet.signAndExecuteTransactionBlock(S);console.log("0221###sui swap res###",$);let p=l.handleTx($);if(p&&p.hash){y(p.hash),u(!1),c(!0);let k={res:p.res,title:"Unstake"};l.showTransitionPending(k),await l.watchTransaction(k)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),v.getPositionByPool(i.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else u(!1),t(!0);a.value=!1}catch(S){console.log("farmsDeposit error",S),u(!1),t(!0),a.value=!1}},loading:a,stake:async()=>{console.log(o.positionInfo,"props.positionInfo"),a.value=!0,y(""),A("Stake"),u(!0);const P={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},U=o.positionInfo.farmsPoolId;try{const S=await e.farmsDeposit(P,U),$=await i.value.currentWallet.signAndExecuteTransactionBlock(S);console.log("0221###sui swap res###",$);let p=l.handleTx($);if(p&&p.hash){y(p.hash),u(!1),c(!0);let k={res:p.res,title:"Stake"};l.showTransitionPending(k),await l.watchTransaction(k)&&setTimeout(()=>{v.getPositionByPool(i.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else u(!1),t(!0);a.value=!1}catch(S){console.log("farmsDeposit error",S),u(!1),t(!0),a.value=!1}}}}});const se=o=>(Q("data-v-1a543f25"),o=o(),K(),o),te={class:"farms-position"},ee={class:"farms-position-box"},ne=Lo('<div class="position-info-block" data-v-1a543f25><div class="block-item" data-v-1a543f25><div class="leabl" data-v-1a543f25>Liquidity</div><div class="text" data-v-1a543f25>~$33.57</div></div><div class="block-item" data-v-1a543f25><div class="leabl" data-v-1a543f25>Share</div><div class="text" data-v-1a543f25>0.00007%</div></div></div>',1),ie={class:"earnings"},ae={class:"block-item"},le=se(()=>s("div",{class:"leabl"},"Earnings",-1)),re={class:"text"},ce={alt:""},de={key:1,class:"rewards-day"},ue={class:"unstake-btn-box"};function me(o,r,_,m,f,l){const e=xt,a=co,h=vo("image");return n(),d("div",te,[s("div",ee,[L(e,{"position-info":o.positionInfo},null,8,["position-info"])]),ne,s("div",ie,[s("div",ae,[le,s("div",re,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),d(G,{key:0},X(o.positionInfo.rewards,g=>(n(),d("div",{key:g.rewarder_type,class:"rewards-day"},[s("div",null,[to(s("img",ce,null,512),[[h,o.getCoinIcon(g.rewarder_type)]]),s("span",null,I(g.rewarderAmount),1)])]))),128)):(n(),d("div",de,"--"))])]),o.positionInfo.positionSource=="clmm"?(n(),R(a,{key:0,class:"add-liquidity-btn claim-btn",onClick:r[0]||(r[0]=g=>o.router.push(`/new-position-detail?collect=${o.positionInfo.collectionName}&&token=${o.positionInfo.tokenName}&&address=${o.positionInfo.pool}&pos=${o.positionInfo.pos_object_id}`))},{default:M(()=>[q("+ Add liquidity")]),_:1})):(n(),R(a,{key:1,class:"claim-btn",disabled:o.positionInfo&&o.positionInfo.rewards&&o.positionInfo.rewards.length==0,onClick:o.claim},{default:M(()=>[q("↑ Claim")]),_:1},8,["disabled","onClick"]))]),s("div",ue,[s("div",null,[o.positionInfo.positionSource=="clmm"?(n(),R(a,{key:0,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:M(()=>[q("Stake")]),_:1},8,["loading","disabled","onClick"])):(n(),R(a,{key:1,class:"unstake-btn",onClick:o.unStake},{default:M(()=>[q("UnStake")]),_:1},8,["onClick"]))])])])}const Do=H(oe,[["render",me],["__scopeId","data-v-1a543f25"]]),_e=V({components:{FarmsH5Position:Do},props:{currentTab:{type:String,default:""}},setup(o){const r=J(!1),_=eo(),m=w(()=>_),f=x(),l=w(()=>f),e=w(()=>(console.log(l.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?l.value.myFarmsPoolList:l.value.farmsPoolList)),a=w(()=>l.value.farmsUserUsd),h=w(()=>(console.log(l.value.farmsRewardObj,"##farmsRewardObj"),l.value.farmsRewardObj)),g=w(()=>l.value.farmsPositionObj),v=w(()=>l.value.farmsPoolListLoading),i=w(()=>l.value.farmsPositionList),c=J({}),t=p=>{c.value[p.clmm_pool_id]?c.value[p.clmm_pool_id]=!1:(c.value[p.clmm_pool_id]=!0,console.log("执行了吗"),f.getPositionByPool(m.value.address,p.clmm_pool_id,p.id))},u=_o(),A=Z("Sui"),y=Y("Sui"),{setIsShowSuccess:C,setIsShowRejected:T,setIsShowWaiting:j,setTransactionDesc:P,setTransactionTxid:U}=u,S=async p=>{console.log(i.value,"farmsRewardObj###");const k=[];i.value.forEach(b=>{console.log(p,b,"#position"),p==b.clmm_pool_id&&k.push({pool_id:b.pool_id,position_nft_id:b.id})}),console.log(JSON.stringify(k),"##params"),U(""),P("Claim All"),j(!0);try{const b=await A.batchHarvest(k),N=await m.value.currentWallet.signAndExecuteTransactionBlock(b);console.log("0221###sui swap res###",N);let O=y.handleTx(N);if(O&&O.hash){U(O.hash),j(!1),C(!0);let E={res:O.res,title:"Stake"};y.showTransitionPending(E),await y.watchTransaction(E)&&setTimeout(()=>{f.getFarmsPoolList()},4e3)}else j(!1),T(!0)}catch(b){console.log("Claim all error",b),j(!1),T(!0)}},$=go();return{isShowMore:r,wallet:m,farmsPoolList:e,farmsUserUsd:a,sFixD:D,farmsRewardObj:h,farmsPositionObj:g,openMore:t,checkNullObj:lo,openMoreObj:c,farmsPoolListLoading:v,claimPoolReward:S,router:$}}});const uo=o=>(Q("data-v-84e4b8a4"),o=o(),K(),o),pe={key:0,class:"farms-pool-list"},fe={class:"farms-block"},he=Lo('<div class="item-block" data-v-84e4b8a4><div class="leabl" data-v-84e4b8a4>Staked TVL</div><div class="text" data-v-84e4b8a4>$19,885,003.12</div></div><div class="item-block apr" data-v-84e4b8a4><div class="leabl" data-v-84e4b8a4>APR</div><div class="text" data-v-84e4b8a4>22.20%</div></div>',2),ve={class:"item-block"},ge=uo(()=>s("div",{class:"leabl"},"Rewards / day",-1)),be={class:"text"},we={class:"item-block my-staked"},$e=uo(()=>s("div",{class:"leabl"},"My Staked",-1)),ye={key:0,class:"text"},ke={class:"position-usd"},Ie={key:0,class:"position-num"},Pe={key:1,class:"text"},Se=uo(()=>s("div",{class:"position-usd"},"--",-1)),Ue=[Se],Le={class:"item-block"},Te=uo(()=>s("div",{class:"leabl"},"Earned",-1)),je={class:"text earned-box"},Oe={class:"earned"},Re={key:0,class:"ratio-bg"},Ae=uo(()=>s("div",{class:"ratio"},null,-1)),Ce=[Ae],Fe={key:1},Ne={key:2},De={class:"add-liquidity-box"},Be=["onClick"],Me=uo(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),qe=[Me],Ee={key:1,class:"upgrade-loading"};function We(o,r,_,m,f,l){const e=Oo,a=Ro,h=co,g=Do,v=Fo,i=Go;return o.farmsPoolListLoading?(n(),d("div",Ee,[L(i,{type:"poolsCard",loading:!0})])):(n(),d("div",pe,[(n(!0),d(G,null,X(o.farmsPoolList,c=>(n(),d("div",{key:c.id,class:"farms-item"},[L(e,{"pool-info":c},null,8,["pool-info"]),s("div",fe,[he,s("div",ve,[ge,s("div",be,[(n(!0),d(G,null,X(c.rewarders,t=>(n(),R(a,{key:t.reward_coin,"reward-info":t},null,8,["reward-info"]))),128))])]),s("div",we,[$e,o.wallet.address?(n(),d("div",ye,[s("div",ke," $"+I(("sFixD"in o?o.sFixD:B(D))(o.farmsUserUsd&&o.farmsUserUsd[c.clmm_pool_id]&&o.farmsUserUsd[c.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[c.clmm_pool_id]&&o.farmsUserUsd[c.clmm_pool_id].positionNum?(n(),d("div",Ie,I(o.farmsUserUsd[c.clmm_pool_id].positionNum)+" Positions ",1)):z("",!0)])):(n(),d("div",Pe,Ue))]),s("div",Le,[Te,s("div",je,[s("div",Oe,[o.wallet.address?(n(),d("div",Re,Ce)):z("",!0),o.wallet.address?(n(),d("span",Fe,"$"+I(("sFixD"in o?o.sFixD:B(D))(o.farmsRewardObj&&o.farmsRewardObj[c.clmm_pool_id]&&o.farmsRewardObj[c.clmm_pool_id].amountUsd||0,2)),1)):(n(),d("span",Ne,"--"))]),L(h,{class:"claim-btn",disabled:!o.wallet.address,onClick:ao(t=>o.claimPoolReward(c.clmm_pool_id),["stop"])},{default:M(()=>[q("Claim")]),_:2},1032,["disabled","onClick"])])])]),s("div",De,[L(h,{class:"add-liquidity-btn",onClick:ao(t=>o.router.push(`/liquidity/deposit?poolAddress=${c.clmm_pool_id}`),["stop"])},{default:M(()=>[q("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more-btn",onClick:t=>o.openMore(c)},[(n(),d("svg",{class:ro(["arrow-icon",!("checkNullObj"in o?o.checkNullObj:B(lo))(o.openMoreObj)&&o.openMoreObj[c==null?void 0:c.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},qe,2))],8,Be),(n(!0),d(G,null,X(o.farmsPositionObj[c.clmm_pool_id],t=>to((n(),R(g,{key:t.clmm_pool_id,"position-info":{...t,clmm_pool_id:c.clmm_pool_id}},null,8,["position-info"])),[[So,!("checkNullObj"in o?o.checkNullObj:B(lo))(o.openMoreObj)&&o.openMoreObj[c==null?void 0:c.clmm_pool_id]]])),128)),o.wallet.address?z("",!0):(n(),R(v,{key:0,"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"},null,8,["no-data-img"]))]))),128))]))}const Bo=H(_e,[["render",We],["__scopeId","data-v-84e4b8a4"]]),Ve=V({setup(o,r){const _=["Live","Ended","My Farms"],m=J("Live"),f=J("APR"),l=J(!1),e=x(),a=w(()=>e),h=w(()=>m.value=="My Farms"?a.value.myFarmsPoolList:a.value.farmsPoolList);return{tabList:_,currentTab:m,sortValue:f,clickRefresh:()=>{l.value=!0,e.getFarmsPoolList(),setTimeout(()=>{l.value=!1},1e3)},isRefresh:l,farmsPoolList:h,getListNum:c=>h.value.length,changeTab:c=>{m.value=c,r.emit("changeTab",c)}}}});const wo=o=>(Q("data-v-630a286b"),o=o(),K(),o),He={class:"farms-tab"},Ge={class:"tab-left"},Je=["onClick"],ze={key:0},Xe={class:"tab-right"},Qe={class:"sort-select"},Ke={class:"sort-select-box"},Ye=wo(()=>s("div",null,"Sort by",-1)),Ze=wo(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),xe=wo(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),on={class:"sort-list"},sn={class:"refresh"},tn=wo(()=>s("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),en=[tn];function nn(o,r,_,m,f,l){return n(),d("div",He,[s("div",Ge,[(n(!0),d(G,null,X(o.tabList,e=>(n(),d("div",{key:e,class:ro(["tab-item",o.currentTab==e?"tab-item-active":""]),onClick:a=>o.changeTab(e)},[s("span",null,I(e),1),o.currentTab==e&&o.getListNum(e)?(n(),d("p",ze,I(o.getListNum(e)),1)):z("",!0)],10,Je))),128))]),s("div",Xe,[s("div",Qe,[s("div",Ke,[Ye,s("div",null,[s("span",null,I(o.sortValue),1),Ze,xe])]),s("div",on,[s("div",{class:"sort-item",onClick:r[0]||(r[0]=e=>o.sortValue="APR")},"APR"),s("div",{class:"sort-item",onClick:r[1]||(r[1]=e=>o.sortValue="TVL")},"TVL")])]),s("div",sn,[(n(),d("svg",{"aria-hidden":"true",class:ro(["refresh-icon",o.isRefresh?"refreshing":""]),onClick:r[2]||(r[2]=(...e)=>o.clickRefresh&&o.clickRefresh(...e))},en,2))])])])}const an=H(Ve,[["render",nn],["__scopeId","data-v-630a286b"]]),ln=V({components:{FarmsBanner:To,FarmsTabs:an,FarmsTable:No,FarmsH5List:Bo},setup(){const o=x(),r=w(()=>o),_=w(()=>r.value.farmsPoolListLoading),m=w(()=>r.value.farmsPoolList),f=eo(),l=w(()=>f);Wo(()=>[l.value.address,m.value],([a,h])=>{a&&h.length>0&&o.getPositionByAllPool(a)},{immediate:!0}),Vo(()=>{o.getFarmsPoolList()});const e=J("Live");return{farmsPoolListLoading:_,currentTab:e}}});const rn={class:"farm-container"},cn={class:"farm-container-center"};function dn(o,r,_,m,f,l){const e=To,a=Ho("FarmsTabs"),h=No,g=Vt,v=Bo;return n(),d("div",rn,[L(e),s("div",cn,[L(a,{onChangeTab:r[0]||(r[0]=i=>{o.currentTab=i})}),o.farmsPoolListLoading?(n(),R(g,{key:1})):(n(),R(h,{key:0,"current-tab":o.currentTab},null,8,["current-tab"])),L(v,{"current-tab":o.currentTab},null,8,["current-tab"])])])}const $n=H(ln,[["render",dn],["__scopeId","data-v-6705d608"]]);export{$n as default};
