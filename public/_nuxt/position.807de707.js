import{_ as _e}from"./status-block.7cadb9e0.js";import{a as oe,_ as O,b as Re,u as de,j as J,g as S,h as f,c as Q,f as U,i as Ne}from"./pool.ccb2d30f.js";import{x as se,a as ne,b as c,e as te,o as n,f as a,l as $,u as r,t as s,c as me,w as F,h as o,j as b,s as j,D as Se,y as ue,r as R,A as q,F as G,i as z,J as pe,p as ce,m as ve,q as De,z as Ue,L as Ae,U as ie,k as Z,W as Ce,B as Fe,K as le,X as Le}from"./entry.555960f3.js";/* empty css              */import{i as ee}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as he}from"./icon-arrow_2x.948aedb2.js";import{_ as ke}from"./icon-arrow_2x.4ffddb8e.js";import{_ as be}from"./icon_on_2x.ae77fc4a.js";import{u as Oe}from"./notifi.af1216a6.js";import{_ as je,a as Pe}from"./img-no-Positions_2x.01c4e398.js";const Te=se({props:{pItem:{type:Object,required:!0},currentStatus:{type:String,required:!0},rewarderInfo:{type:Number,required:!0},aprAmount:{type:Number,required:!0}},setup(){const{t:e}=ne(),m=oe(),y=c(()=>m),A=c(()=>y.value.chainName),_=c(()=>O[A.value]);return{store:y,config:_,t:e}}});const Be={key:0,class:"owner-addres"},Ee=["href"],Ve=["href"],qe={class:"fee-tier"};function Ge(e,m,y,A,_,P){const I=_e,d=Se;return n(),a("div",{class:j(["position-status",`position-status-${e.pItem.currentStatus.toLowerCase()}`])},[$(I,{class:"status-block","current-status":e.pItem.currentStatus||"","is-pause":e.pItem.is_pause,"apr-amount":e.aprAmount,"block-name":"position"},null,8,["current-status","is-pause","apr-amount"]),e.pItem.tokenName?(n(),a("div",Be,[e.pItem.tokenName.length<=24?(n(),a("a",{key:0,href:e.store.theme=="default"?`${("config"in e?e.config:r(O)).explorerUrl}/token/${e.pItem.nftHash}/0`:`${("config"in e?e.config:r(O)).explorerUrl}/object/${e.pItem.nftHash}`,target:"_blank"},s(e.pItem.tokenName),9,Ee)):(n(),me(d,{key:1,placement:"bottom","arrow-point-at-center":""},{title:F(()=>[o("span",null,s(e.pItem.tokenName),1)]),default:F(()=>[o("a",{target:"_blank",href:e.store.theme=="default"?`${("config"in e?e.config:r(O)).explorerUrl}/token/${e.pItem.nftHash}/0?network=${("config"in e?e.config:r(O)).network}`:`${("config"in e?e.config:r(O)).explorerUrl}/object/${e.pItem.nftHash}`},s(e.pItem.tokenName.substr(0,4))+" ... "+s(e.pItem.tokenName.substr(e.pItem.tokenName.length-4,4)),9,Ve)]),_:1}))])):b("",!0),o("div",qe,s(e.$t("common.fee"))+" "+s(e.pItem.fee*100)+"%",1)],2)}const ze=te(Te,[["render",Ge],["__scopeId","data-v-0a37ba0d"]]),Ke=se({props:{pItem:{type:Object,required:!0}},setup(e){const{t:m}=ne(),y=ue(),A=oe(),_=c(()=>A);c(()=>_.value.chainName?Re(_.value.chainName):{});function P(g){return!g.liquity||g.liquity.toString()=="0"?"Closed":Number(g.currentPriceView)>=Number(g.minPrice)&&Number(g.currentPriceView)<=Number(g.maxPrice)||!Number(g.minPrice)&&isNaN(Number(g.maxPrice))?"Active":"Inactive"}const I=de(),d=c(()=>I),t=()=>{_.value.chainName==="Aptos"?y.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`):y.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}&pos=${e.pItem.pos_object_id}`)},D=c(()=>d.value.allTokenObj&&e.pItem.token_a.address&&d.value.allTokenObj[e.pItem.token_a.address]&&d.value.allTokenObj[e.pItem.token_a.address].logo_url),h=c(()=>d.value.allTokenObj&&e.pItem.token_b.address&&d.value.allTokenObj[e.pItem.token_b.address]&&d.value.allTokenObj[e.pItem.token_b.address].logo_url),K=c(()=>d.value.feeOwedObj[e.pItem.tokenName]&&d.value.feeOwedObj[e.pItem.tokenName].feeOwed),N=c(()=>d.value.feeOwedObj[e.pItem.tokenName]&&d.value.feeOwedObj[e.pItem.tokenName].feesResult),v=c(()=>d.value.rewarderObj[e.pItem.tokenName]&&d.value.rewarderObj[e.pItem.tokenName].pendingRewarder),w=c(()=>d.value.rewarderObj[e.pItem.tokenName]&&d.value.rewarderObj[e.pItem.tokenName].pendingRewarderView),T=c(()=>d.value.rewarderObj[e.pItem.tokenName]&&d.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr),B=R(0),Y=R();return q(()=>d.value.RATES,g=>{g&&(Y.value=g)},{immediate:!0}),console.log(e.pItem,"===>pItem"),{showNum:J,fromCoinUrl:D,toCoinUrl:h,decimalFormat:S,clickDetails:t,t:m,addCommom:f,importIcon:ee,getCurrentStatus:P,router:y,store:_,pendingRewarder:v,pendingFees:K,pendingRewarderArr:T,pendingFeesArr:N,checkNullObj:Q,fixD:U,pendingRewarderView:w,aprAmount:B}}});const fe=e=>(ce("data-v-188cc2e9"),e=e(),ve(),e),He={class:"position-item"},We={class:"card-content"},Je={class:"left"},Me={class:"top card-header"},Xe={class:"token-item"},Ze={class:"item"},Qe=["src"],Ye={class:"item"},xe=["src"],eo={class:"min-and-max"},oo={class:"text"},so={key:0,src:he,alt:""},no={key:1,src:ke,alt:""},to={class:"text"},ao={class:"bottom"},ro={class:"info-block-container"},io={class:"leabl"},lo={class:"text"},mo={key:0,class:"hover-rewarder"},uo={class:"rewarder-info"},po={class:"left-rewarder"},co=["src"],vo={class:"right-rewarder"},ho={class:"amount"},ko={key:0,class:"amount-usd"},bo={key:1,class:"amount-usd"},fo={class:"rewarder-info"},Io={class:"left-rewarder"},go=["src"],$o={class:"right-rewarder"},wo={class:"amount"},yo={key:0,class:"amount-usd"},_o={key:1,class:"amount-usd"},Ro={class:"leabl"},No={key:0,class:"text"},So={key:1,class:"text"},Do={key:2,class:"text"},Uo={key:3,class:"hover-rewarder"},Ao={class:"left-rewarder"},Co=["src"],Fo={class:"right-rewarder"},Lo={class:"amount"},Oo={class:"amount-usd"},jo={class:"leabl"},Po={key:0,class:"text"},To={key:1,class:"text"},Bo={key:2,class:"hover-rewarder"},Eo={class:"left-rewarder"},Vo=["src"],qo={class:"right-rewarder"},Go={class:"amount"},zo={class:"amount-usd"},Ko=fe(()=>o("div",{class:"more-img"},null,-1)),Ho={class:"min-and-max"},Wo={class:"text"},Jo={key:0,src:he,alt:""},Mo={key:1,src:ke,alt:""},Xo={class:"text"},Zo={class:"info-block-container"},Qo={class:"left"},Yo={class:"info-block"},xo={class:"leabl"},es={class:"text"},os={class:"info-block cursor-block"},ss={class:"leabl"},ns={key:0,class:"text"},ts={key:1,class:"text"},as={key:2,class:"hover-rewarder"},rs={class:"left-rewarder"},is=["src"],ls={class:"right-rewarder"},ds={class:"amount"},ms={class:"amount-usd"},us={key:0,class:"info-block cursor-block"},ps={class:"leabl"},cs={key:0,class:"text"},vs={key:1,class:"text"},hs={key:2,class:"hover-rewarder"},ks={class:"left-rewarder"},bs=["src"],fs={class:"right-rewarder"},Is={class:"amount"},gs={class:"amount-usd"},$s=fe(()=>o("div",{class:"right"},[o("div",{class:"more-img"})],-1));function ws(e,m,y,A,_,P){const I=ze,d=pe;return n(),a("div",He,[o("div",We,[o("div",Je,[$(I,{"p-item":e.pItem,"current-status":e.getCurrentStatus(e.pItem)||"","rewarder-info":e.pendingRewarder,"apr-amount":e.aprAmount},null,8,["p-item","current-status","rewarder-info","apr-amount"])]),o("div",{class:"right",onClick:m[0]||(m[0]=(...t)=>e.clickDetails&&e.clickDetails(...t))},[o("div",Me,[o("div",Xe,[o("div",Ze,[o("img",{src:(e.pItem.needReverse?e.toCoinUrl:e.fromCoinUrl)||("importIcon"in e?e.importIcon:r(ee))(`/image/coins/${e.pItem.needReverse?e.pItem.token_b.symbol.toLowerCase():e.pItem.token_a.symbol.toLowerCase()}.png`)},null,8,Qe),o("div",null,[o("span",null,s(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1),o("p",null,s(e.pItem.needReverse?e.pItem.token_b.name:e.pItem.token_a.name)+" "+s(e.pItem.needReverse?e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:"":e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:""),1)])]),o("div",Ye,[o("img",{src:(e.pItem.needReverse?e.fromCoinUrl:e.toCoinUrl)||("importIcon"in e?e.importIcon:r(ee))(`/image/coins/${e.pItem.needReverse?e.pItem.token_a.symbol.toLowerCase():e.pItem.token_b.symbol.toLowerCase()}.png`)},null,8,xe),o("div",null,[o("span",null,s(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1),o("p",null,s(e.pItem.needReverse?e.pItem.token_a.name:e.pItem.token_b.name)+" "+s(e.pItem.needReverse?e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:"":e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:""),1)])])]),o("div",eo,[o("div",oo,s(e.pItem.needReverse?("addCommom"in e?e.addCommom:r(f))(("decimalFormat"in e?e.decimalFormat:r(S))(1/e.pItem.maxPrice,6),6):("addCommom"in e?e.addCommom:r(f))(("decimalFormat"in e?e.decimalFormat:r(S))(e.pItem.minPrice,6),6)),1),e.store.theme=="default"?(n(),a("img",so)):(n(),a("img",no)),o("div",to,s(e.pItem.maxPrice.indexOf("+")>-1?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:r(f))(("decimalFormat"in e?e.decimalFormat:r(S))(1/e.pItem.minPrice,6),6):("addCommom"in e?e.addCommom:r(f))(("decimalFormat"in e?e.decimalFormat:r(S))(e.pItem.maxPrice,6),6))+" "+s(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+s(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)])]),o("div",ao,[o("div",ro,[o("div",{class:j(["info-block cursor-block",e.pItem.amountUSD=="--"||Number(e.pItem.amountUSD)==0?"block-none":""])},[o("div",io,s(e.$t("common.liquidity")),1),o("div",lo," $"+s(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:r(f))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(n(),a("div",mo,[o("div",uo,[o("div",po,[o("img",{src:e.pItem.needReverse?e.pItem.token_b.logoURI:e.pItem.token_a.logoURI,alt:""},null,8,co),o("span",null,s(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),o("div",vo,[o("div",ho,s(e.pItem.needReverse?("showNum"in e?e.showNum:r(J))(e.pItem.amountB,e.pItem.token_b.decimals):("showNum"in e?e.showNum:r(J))(e.pItem.amountA,e.pItem.token_a.decimals)),1),e.pItem.needReverse?(n(),a("div",bo,s(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:r(U))(e.pItem.tokenBRates,2):"<$0.01"),1)):(n(),a("div",ko,s(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:r(U))(e.pItem.tokenARates,2):"<$0.01"),1))])]),o("div",fo,[o("div",Io,[o("img",{src:e.pItem.needReverse?e.pItem.token_a.logoURI:e.pItem.token_b.logoURI,alt:""},null,8,go),o("span",null,s(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),o("div",$o,[o("div",wo,s(e.pItem.needReverse?("showNum"in e?e.showNum:r(J))(e.pItem.amountA,e.pItem.token_a.decimals):("showNum"in e?e.showNum:r(J))(e.pItem.amountB,e.pItem.token_b.decimals)),1),e.pItem.needReverse?(n(),a("div",_o,s(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:r(U))(e.pItem.tokenARates,2):"<$0.01"),1)):(n(),a("div",yo,s(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:r(U))(e.pItem.tokenBRates,2):"<$0.01"),1))])])])):b("",!0)],2),o("div",{class:j(["info-block cursor-block",e.pendingFees==0?"block-none":""])},[o("div",Ro,s(e.$t("newAdd.pendingFees")),1),e.pendingFees==="--"?(n(),a("div",No," -- ")):isNaN(e.pendingFees)?(n(),a("div",Do,[$(d,{size:"small"})])):(n(),a("div",So,s(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:r(f))(e.pendingFees,2)),1)),e.pendingFees>0?(n(),a("div",Uo,[(n(!0),a(G,null,z(e.pendingFeesArr,t=>(n(),a("div",{key:t,class:"rewarder-info"},[o("div",Ao,[o("img",{src:t.logoURI,alt:""},null,8,Co),o("span",null,s(t.symbol),1)]),o("div",Fo,[o("div",Lo,s(Number(t.amount)==0?0:Number(t.amount)>1e-6?("addCommom"in e?e.addCommom:r(f))(("decimalFormat"in e?e.decimalFormat:r(S))(t.amount,t.decimals),t.decimals):"<0.000001"),1),o("div",Oo,s(Number(t.amountUSD)==0?"$0":Number(t.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:r(f))(t.amountUSD,2):"<$0.01"),1)])]))),128))])):b("",!0)],2),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:r(Q))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(n(),a("div",{key:0,class:j(["info-block cursor-block",e.pendingRewarder==0?"block-none":""])},[o("div",jo,s(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(n(),a("div",Po," $"+s(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(n(),a("div",To,[$(d,{size:"small"})])),e.pendingRewarder>0?(n(),a("div",Bo,[(n(!0),a(G,null,z(e.pendingRewarderArr,t=>(n(),a("div",{key:t,class:"rewarder-info"},[o("div",Eo,[o("img",{src:t.logoURI,alt:""},null,8,Vo),o("span",null,s(t.symbol),1)]),o("div",qo,[o("div",Go,s(("fixD"in e?e.fixD:r(U))(t.amount,t.decimals)),1),o("div",zo,s(Number(t.amountUSD)==0?"$0":Number(t.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:r(f))(t.amountUSD,2):"<$0.01"),1)])]))),128))])):b("",!0)],2)):b("",!0),Ko])])])]),o("div",{class:"h5-bottom",onClick:m[1]||(m[1]=(...t)=>e.clickDetails&&e.clickDetails(...t))},[o("div",Ho,[o("div",Wo,s(e.pItem.needReverse?("decimalFormat"in e?e.decimalFormat:r(S))(1/e.pItem.minPrice,6):("decimalFormat"in e?e.decimalFormat:r(S))(e.pItem.minPrice,6)),1),e.store.theme=="default"?(n(),a("img",Jo)):(n(),a("img",Mo)),o("div",Xo,s(e.pItem.maxPrice.indexOf("+")>-1?"∞":e.pItem.needReverse?("decimalFormat"in e?e.decimalFormat:r(S))(1/e.pItem.maxPrice,6):("decimalFormat"in e?e.decimalFormat:r(S))(e.pItem.maxPrice,6))+" "+s(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+s(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),o("div",Zo,[o("div",Qo,[o("div",Yo,[o("div",xo,s(e.$t("common.liquidity")),1),o("div",es," $"+s(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:r(f))(e.pItem.amountUSD,2)),1)]),o("div",os,[o("div",ss,s(e.$t("newAdd.pendingFees")),1),isNaN(e.pendingFees)?(n(),a("div",ts,[$(d,{size:"small"})])):(n(),a("div",ns,s(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:r(f))(e.pendingFees,2)),1)),e.pendingFees>0?(n(),a("div",as,[(n(!0),a(G,null,z(e.pendingFeesArr,t=>(n(),a("div",{key:t,class:"rewarder-info"},[o("div",rs,[o("img",{src:t.logoURI,alt:""},null,8,is),o("span",null,s(t.symbol),1)]),o("div",ls,[o("div",ds,s(Number(t.amount)==0?0:Number(t.amount)>1e-6?("addCommom"in e?e.addCommom:r(f))(("fixD"in e?e.fixD:r(U))(t.amount,t.decimals),t.decimals):"<0.000001"),1),o("div",ms,s(Number(t.amountUSD)==0?"$0":Number(t.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:r(f))(t.amountUSD,2):"<$0.01"),1)])]))),128))])):b("",!0)]),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:r(Q))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(n(),a("div",us,[o("div",ps,s(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(n(),a("div",cs," $"+s(e.pendingRewarder>0?("fixD"in e?e.fixD:r(U))(e.pendingRewarder,2):0),1)):(n(),a("div",vs,[$(d,{size:"small"})])),e.pendingRewarder>0?(n(),a("div",hs,[(n(!0),a(G,null,z(e.pendingRewarderArr,t=>(n(),a("div",{key:t,class:"rewarder-info"},[o("div",ks,[o("img",{src:t.logoURI,alt:""},null,8,bs),o("span",null,s(t.symbol),1)]),o("div",fs,[o("div",Is,s(t.amount),1),o("div",gs,"$"+s(("fixD"in e?e.fixD:r(U))(t.amountUSD,2)),1)])]))),128))])):b("",!0)])):b("",!0)]),$s])])])}const ys=te(Ke,[["render",ws],["__scopeId","data-v-188cc2e9"]]),_s=se({setup(){const e=R(!1),{t:m}=ne(),y=R(["position"]),A=ue(),_=R(""),P=oe(),I=c(()=>P),d=c(()=>I.value.chainName?O[I.value.chainName]:{});let t=R([]);const D=de(),h=c(()=>D),K=Ne(),N=c(()=>K),v=R(!1),w=R(m("tab.all")),T=R([m("tab.layerZero"),m("tab.wormhole"),m("tab.celer")]),B=R(!0),Y=R("TVL"),g=()=>{e.value=!0,t.value=[],N.value.address&&D.getMyPositons(N.value.address,h.value.poolsObj,I.value.chainName),setTimeout(()=>{e.value=!1},1e3)};De(()=>{t.value=[],document.addEventListener("click",()=>{v.value=!1}),D.setMyPositionsLoading(!0)}),Ue(()=>{document.addEventListener("click",()=>{v.value=!1})}),Ae(()=>{N.value.connected||(t.value=[])});const x=p=>{e.value=!0;let u=[];if(h.value.myPositions.forEach(i=>{var W,E,V,M,X,re;let l;const k=i.amountA*((W=h.value.RATES[i.token_a.address])==null?void 0:W.price),L=i.amountB*((E=h.value.RATES[i.token_b.address])==null?void 0:E.price);console.log("0330###updateLpList####ele.amountA##",i.amountA),console.log("0330###updateLpList####ele.amountB##",i.amountB),console.log("0330###updateLpList####ele.token_a.address##",i.token_a.address),console.log("0330###updateLpList####ele.token_b.address##",i.token_b.address),console.log("0330###updateLpList####pools.value.RATES[ele.token_a.address]?.price##",(V=h.value.RATES[i.token_a.address])==null?void 0:V.price),console.log("0330###updateLpList####pools.value.RATES[ele.token_b.address]?.price##",(M=h.value.RATES[i.token_b.address])==null?void 0:M.price),(X=h.value.RATES[i.token_a.address])!=null&&X.price&&((re=h.value.RATES[i.token_b.address])!=null&&re.price)?l=k+L:l=" --",u.push({...i,amountUSD:l,tokenARates:k,tokenBRates:L})}),w.value!="All"){const i=[];u.forEach(l=>{var k;((k=l==null?void 0:l.labels)==null?void 0:k.indexOf(w.value))!==-1&&i.push(l)}),B.value?(t.value=i.sort((l,k)=>k.amountUSD-l.amountUSD),e.value=!1):(t.value=i.sort((l,k)=>l.amountUSD-k.amountUSD),e.value=!1)}else B.value?(t.value=u.sort((i,l)=>l.amountUSD-i.amountUSD),e.value=!1):(t.value=u.sort((i,l)=>i.amountUSD-l.amountUSD),e.value=!1);console.log(t.value,"list.value========>")};q(()=>[h.value.myPositions,h.value.RATES],([p,u])=>{p&&u&&x()},{immediate:!0}),q(()=>[N.value.address,h.value.poolConfigList,h.value.poolsObj,I.value.chainName],([p,u,i,l])=>{var k;p&&u&&u.length>0&&l&&(l!=null&&l.toLowerCase().includes((k=u[0])==null?void 0:k.chain))&&!Q(i)&&u.length===Object.values(i).length&&D.getMyPositons(N.value.address,i,l)},{immediate:!0,deep:!0}),q(()=>w.value,p=>{x()}),q(()=>B.value,p=>{x()});const ge=p=>{const u=[];T.value.forEach((i,l)=>{i==p?u[l]=w.value:u[l]=i}),T.value=u,w.value=p},H=Oe(),C=c(()=>H),ae=c(()=>D),$e=async p=>{console.log("执行了"),await H.getSourceGroups();const u=C.value.sourceGroups&&C.value.sourceGroups.length>0&&C.value.sourceGroups[0]&&C.value.sourceGroups[0].sources||[];let i;for(let l=0;l<u.length;l++){const{pool_address:k,position_index:L}=JSON.parse(u[l].blockchainAddress);let W=!1,E;for(let V=0;V<p.length;V++){const{poolAddress:M,index:X}=p[V];k==M&&Number(X)==Number(L)&&(W=!0),E={pool_address:k,position_index:L},console.log(i,"====>hasPositionInfo"),console.log(E,"","取消订阅的仓位")}W||await H.subscribePosition(E,"",!1,!1)}},we=async()=>{await H.getSourceGroups(),console.log("全部取消");const p=C.value.sourceGroups&&C.value.sourceGroups.length>0&&C.value.sourceGroups[0]&&C.value.sourceGroups[0].sources||[];for(let u=0;u<p.length;u++){const{pool_address:i,position_index:l}=JSON.parse(p[u].blockchainAddress),{name:k}=p[u],L={pool_address:i,position_index:l};await H.subscribePosition(L,k,!1,!1)}},ye=c(()=>ae.value.myPositionsLoading);return q(()=>ae.value.myPositions,(p,u)=>{console.log(p,u,"===>newMyPositions, oldMyposition"),d.value.hasNotifi&&(p&&p.length>0&&u&&u.length!==p.length?$e(p):p&&p.length==0&&!ye.value&&we())},{immediate:!0}),{changeSortLabel:ge,label:v,labelList:T,labelValue:w,select:B,selectValue:Y,t:m,pools:h,store:I,wallet:N,list:t,clickRefresh:g,refresh:e,current:y,router:A,searchKey:_}}}),Rs=""+new URL("img-connect-wallet_2x.ff62feba.png",import.meta.url).href,Ns=""+new URL("img-connect-wallet_2x.deb6e876.png",import.meta.url).href;const Ie=e=>(ce("data-v-398accef"),e=e(),ve(),e),Ss={class:"position-title"},Ds=Ie(()=>o("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),Us=[Ds],As={class:"position-tab"},Cs={class:"search-tab"},Fs={key:0,class:"positionNum"},Ls={class:"search-container"},Os={class:"value"},js=Ie(()=>o("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ps=[js],Ts={key:0,class:"select-item"},Bs=["onClick"],Es={key:0,src:be,alt:""},Vs={key:1,class:"fan-img",src:be,alt:""},qs={key:0,class:"loading-global position-loading"},Gs={key:1,class:"position-list"},zs={key:2,class:"no-data"},Ks={key:0,src:je,alt:""},Hs={key:1,src:Pe,alt:""},Ws={key:3,class:"no-data"},Js={key:0,src:Rs,alt:""},Ms={key:1,src:Ns,alt:""};function Xs(e,m,y,A,_,P){const I=le("mail-outlined"),d=Le,t=le("appstore-outlined"),D=Ce,h=pe,K=ys,N=Fe;return n(),a("div",{class:j(e.list&&e.list.length===0&&e.wallet.connected||!e.wallet.connected?"position-center position-list-container":"position-list-container")},[o("div",Ss,[o("div",null,s(e.$t("common.concentratedPools")),1),(n(),a("svg",{"aria-hidden":"true",class:j(e.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:m[0]||(m[0]=(...v)=>e.clickRefresh&&e.clickRefresh(...v))},Us,2))]),o("div",As,[o("div",Cs,[$(D,{selectedKeys:e.current,"onUpdate:selectedKeys":m[2]||(m[2]=v=>e.current=v),mode:"horizontal"},{default:F(()=>[$(d,{key:"pools",onClick:m[1]||(m[1]=v=>e.router.push("/pools"))},{icon:F(()=>[$(I)]),default:F(()=>[Z(" "+s(e.$t("menu.pools")),1)]),_:1}),$(d,{key:"position"},{icon:F(()=>[$(t)]),default:F(()=>[Z(" "+s(e.$t("common.myPosition")),1),e.list.length>0?(n(),a("span",Fs," ("+s(e.list.length)+")",1)):b("",!0)]),_:1})]),_:1},8,["selectedKeys"])]),o("div",Ls,[e.store.theme=="default"?(n(),a("div",{key:0,class:"search-label",onClick:m[3]||(m[3]=ie(v=>e.label=!e.label,["stop"]))},[o("span",null,s(e.$t("newAdd.label")),1),o("div",Os,s(e.labelValue),1),(n(),a("svg",{"aria-hidden":"true",class:j(e.label?"show-icon icon":"icon")},Ps,2)),e.label?(n(),a("div",Ts,[(n(!0),a(G,null,z(e.labelList,(v,w)=>(n(),a("div",{key:w,class:"select-menu-item",onClick:T=>e.changeSortLabel(v)},s(v),9,Bs))),128))])):b("",!0)])):b("",!0),o("div",{class:"search-select",onClick:m[4]||(m[4]=ie(v=>e.select=!e.select,["stop"]))},[o("div",null,[Z(" TVL "),e.select?(n(),a("img",Es)):(n(),a("img",Vs))])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(n(),a("div",qs,[$(h)])):b("",!0),e.list&&e.list.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(n(),a("div",Gs,[(n(!0),a(G,null,z(e.list,(v,w)=>(n(),me(K,{key:w,"p-item":v},null,8,["p-item"]))),128))])):b("",!0),e.list&&e.list.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(n(),a("div",zs,[e.store.theme=="default"?(n(),a("img",Ks)):(n(),a("img",Hs)),o("span",null,s(e.$t("common.noLiquidityPositions")),1)])):b("",!0),e.wallet.connected?b("",!0):(n(),a("div",Ws,[e.store.theme=="default"?(n(),a("img",Js)):(n(),a("img",Ms)),$(N,{class:"connect-wallet",onClick:m[5]||(m[5]=v=>e.wallet.setIsShowWalletModal(!0))},{default:F(()=>[Z(s(e.$t("button.connectWallet")),1)]),_:1})]))],2)}const ln=te(_s,[["render",Xs],["__scopeId","data-v-398accef"]]);export{ln as default};
