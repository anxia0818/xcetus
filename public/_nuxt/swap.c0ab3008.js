import{_ as ln,a as un}from"./token-warning-modal.c620374b.js";import{_ as rn,a as dn}from"./coin-select.85a70f78.js";import{a as Se,u as ke,b as ko,c as ge,D as g,s as J,d as j,j as $o,h as Ge,z as bo,f as Ce,_ as Me,w as yo,p as fe,g as _e,e as Le}from"./pool.a131edf2.js";import{e as $e,a as Oe,a1 as Io,a2 as To,r as v,m as b,A as Y,o as a,f,h as o,c as q,s as _,j as z,t as s,x as ce,u as O,J as No,S as Bo,p as Ie,k as Te,M as xe,l as Fo,K as eo,w as ne,i as de,B as oo,a4 as cn,F as Ve,q as wo,b as Ao,v as mn,z as vn,a7 as je,D as pn}from"./entry.aedf112d.js";/* empty css              *//* empty css              */import"./decimal.9c745ba3.js";import{i as ie}from"./import-icon.de3e6c66.js";import{a as fn,_ as gn}from"./network-tips.b5e28d22.js";/* empty css              */import{u as Cn}from"./swapRouter.d345c903.js";import{_ as hn}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./icon-selected_3x.350736e2.js";import"./token-warning.50369a5f.js";/* empty css              */import"./img-no-Positions_2x.aad029ed.js";const bn=""+globalThis.__publicAssetsURL("sui-image/route-view.png");const yn=Oe({props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},routertotalPercents:{type:Array,default:()=>[]},routerPool:{type:Array,default:()=>[]},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1}},setup(e){const t=Io(To,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),h=v(!1),C=Se(),$=b(()=>C),R=b(()=>$.value.slippage),c=b(()=>$.isShowRouterModal);Y(()=>e,A=>{console.log(A,"==>newValue")},{immediate:!0,deep:!0});const L=ke(),P=b(()=>L),W=ko("Sui"),B=v({}),X=v({}),K=v({});Y(()=>[e.suiPreSwapdata,P.value.tokensObj],async([A,p])=>{A&&!ge(A)&&p&&!ge(p)&&(A.coinTypeA&&(B.value=p[A.coinTypeA]||(await W.getTokenListByCoinType([A.coinTypeA]))[0]),A.coinTypeB&&(X.value=p[A.coinTypeB]||(await W.getTokenListByCoinType([A.coinTypeB]))[0]),A.coinTypeC&&(K.value=p[A.coinTypeC]||(await W.getTokenListByCoinType([A.coinTypeC]))[0]))},{immediate:!0});const T=v(0),Z=v(0);return Y(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,R.value],([A,p,le,N,G,u])=>{if(A&&p&&le&&N&&u)if(G){const d=new g(p).mul(new g(u/100));Z.value=new g(p).sub(d).toString()}else{const d=new g(A).mul(new g(u/100));T.value=new g(A).sub(d).toString()}},{immediate:!0}),{sFixD:J,getCoinIcon:A=>{var p;return(A==null?void 0:A.logoURI)||(A==null?void 0:A.logo_url)||((p=P.value.tokensObj[A==null?void 0:A.address])==null?void 0:p.logo_url)||($.theme==="default"?ie("/image/coins/unknown.png"):ie("/image/coins/sui-unknown.png"))},indicator:t,rateChange:h,slippage:R,isShowRouterModal:c,indexStore:C,coinTypeA:B,coinTypeB:X,coinTypeC:K,maximumSold:T,minimumReceived:Z,addCommom:j}}}),he=e=>(Ie("data-v-a0858c7b"),e=e(),Te(),e),wn={key:0,class:"swap-info"},An={class:"loading-swap"},Sn={key:1,class:"swap-rate"},kn={key:0},$n=["src"],In={key:0},Tn=["src"],Nn={key:1},Bn={key:0},Fn=["src"],_n=["src"],On=he(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Pn=he(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Un=[On,Pn],Rn={key:2},Dn={class:"trade-info"},Ln={class:"trade-block"},jn=he(()=>o("div",{class:"lebal"},"Price Impact",-1)),Mn={key:0,class:"icon","aria-hidden":"true"},En=he(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),qn=[En],Wn={class:"trade-block"},Xn={class:"lebal"},Qn={key:0,class:"text"},Hn={class:"trade-block"},zn=he(()=>o("div",{class:"lebal"},"Fee",-1)),Jn={key:0,class:"text"},Kn={key:0,class:"trade-block"},Zn=he(()=>o("div",{class:"lebal"},"Route",-1)),Yn={key:0,class:"text"},Gn={key:0},Vn={key:1},xn={key:2},es=he(()=>o("img",{src:bn,alt:""},null,-1));function os(e,t,h,C,$,R){const c=No,L=Bo;return e.swapLoading||e.fromCoinAmount&&e.toCoinAmount&&!e.insufficientLiquidity?(a(),f("div",wn,[o("div",An,[e.swapLoading||e.swapRouterLoading?(a(),q(c,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):_("",!0),e.swapLoading?e.swapLoading?(a(),f("span",Rn,"Best route and price")):_("",!0):(a(),f("div",Sn,[e.rateChange?(a(),f("span",Nn,[e.fromCoinAmount&&e.toCoinAmount?(a(),f("span",Bn,[o("img",{src:e.getCoinIcon(e.toCoin)},null,8,Fn),z(" 1 "+s(e.toCoin.symbol)+" ≈ ",1),o("img",{src:e.getCoinIcon(e.fromCoin)},null,8,_n),z(s(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+s(e.fromCoin.symbol),1)])):(a(),q(c,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(a(),f("span",kn,[o("img",{src:e.getCoinIcon(e.fromCoin)},null,8,$n),z(" 1 "+s(e.fromCoin.symbol)+" ≈ ",1),e.fromCoinAmount&&e.toCoinAmount?(a(),f("span",In,[o("img",{src:e.getCoinIcon(e.toCoin)},null,8,Tn),z(s(e.oneToAmount==1/0?0:e.oneToAmount)+" "+s(e.toCoin.symbol),1)])):(a(),q(c,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"right",onClick:t[0]||(t[0]=P=>e.rateChange=!e.rateChange)},Un)]))]),o("div",Dn,[o("div",Ln,[jn,e.swapRouterLoading?(a(),q(L,{key:1,paragraph:!1,active:""})):(a(),f("div",{key:0,class:ce(["text",e.impact<1?"impact-s":e.impact<10&&e.impact>1?"impact-w":"impact-e"])},[z(s(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(a(),f("svg",Mn,qn)):_("",!0)],2))]),o("div",Wn,[o("div",Xn,s(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(a(),q(L,{key:1,paragraph:!1,active:""})):(a(),f("div",Qn,s(e.fixedFromCoin?("addCommom"in e?e.addCommom:O(j))(("sFixD"in e?e.sFixD:O(J))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:O(j))(("sFixD"in e?e.sFixD:O(J))(e.maximumSold,e.fromCoin.decimals)))+" "+s(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",Hn,[zn,e.swapRouterLoading?(a(),q(L,{key:1,paragraph:!1,active:""})):(a(),f("div",Jn,s(e.suiSwapFee),1))]),e.insufficientLiquidity?_("",!0):(a(),f("div",Kn,[Zn,e.swapRouterLoading?(a(),q(L,{key:1,paragraph:!1,active:""})):(a(),f("div",{key:0,class:"text",onClick:t[1]||(t[1]=P=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[e.swapRouterLoading?_("",!0):(a(),f("div",Yn,[e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeA?(a(),f("span",Gn,s(e.coinTypeA.symbol)+" "+s(e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeB?"> ":""),1)):_("",!0),e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeB?(a(),f("span",Vn,s(e.coinTypeB.symbol)+" "+s(e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeC?"> ":""),1)):_("",!0),e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeC?(a(),f("span",xn,s(e.coinTypeC.symbol),1)):_("",!0)])),es]))]))])])):_("",!0)}const ns=$e(yn,[["render",os],["__scopeId","data-v-a0858c7b"]]),So={SUI:{symbol:"SUI",name:"Sui Coin",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::BTC"},sBTC:{symbol:"sBTC",name:"Wrapped BTC",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::BTC"},sETH:{symbol:"sETH",name:"Wrapped Ether",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::ETH"},USDC:{symbol:"USDC",name:"USDC Coin",decimals:6,balance:12e3,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDC"},USDT:{symbol:"USDT",name:"Tether USD",decimals:6,balance:1e4,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDT"}},ss={"USDT-USDC":{symbol:"USDT-USDC",name:"USDT-USDC",decimals:6,coinA:So.USDT,coinB:So.USDC,feeDenominator:"10000",feeNumerator:"1",fee:"0.01",address:"0x1ce98d89494e9d3d7935bc3bd5fc714fc2abb99db3f024162552c4ba172f4d28::amm_swap::PoolLiquidityCoin<0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDT,0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDC>"}};function as(e,t){const h=Object.values(ss).filter(C=>e===C.coinA.symbol&&t===C.coinB.symbol||e===C.coinB.symbol&&t===C.coinA.symbol);return h&&h[0]||null}const ts=Oe({components:{Modal:xe},props:{fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},impact:{type:Number,required:!0},fee:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},formatFee:{type:String,default:""}},emits:["to-swap","on-close"],setup(e,t){const{t:h,locale:C}=Fo(),$=Se(),R=$o();b(()=>R);const c=b(()=>{const N=as(e.fromCoin.symbol,e.toCoin.symbol);return Ge(bo(e.fromCoinAmount).mul(bo(N.fee).div(100)).toString(),e.fromCoin.decimals)}),L=v($.slippage||.5),P=v(!0),W=v(!1);function B(N){P.value=N}const X=async()=>{t.emit("to-swap")},K=ke(),T=b(()=>K),Z=b(()=>T.value.tokensObj&&e.fromCoin.address&&T.value.tokensObj[e.fromCoin.address]&&T.value.tokensObj[e.fromCoin.address].logoURI),ee=b(()=>T.value.tokensObj&&e.toCoin.address&&T.value.tokensObj[e.toCoin.address]&&T.value.tokensObj[e.toCoin.address].logoURI),A=Se(),p=b(()=>A);return{fromCoinUrl:Z,toCoinUrl:ee,t:h,importIcon:ie,fixD:Ce,decimalFormat:Ge,direct:P,changeDirect:B,rateChange:W,clickNextBtn:X,slippage:L,liquidityProviderFee:c,getCoinIcon:N=>{var G;return(N==null?void 0:N.logoURI)||(N==null?void 0:N.logo_url)||((G=T.value.tokensObj[N==null?void 0:N.address])==null?void 0:G.logo_url)||(p.value.theme==="default"?ie("/image/coins/unknown.png"):ie("/image/coins/sui-unknown.png"))},addCommom:j,sFixD:J}}});const Ee=e=>(Ie("data-v-39c58222"),e=e(),Te(),e),is=Ee(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ls={class:"swap-confirm-container"},us={class:"card-content"},rs={class:"top"},ds={class:"coin"},cs=["src"],ms=Ee(()=>o("div",{class:"svg-box"},[o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-swap2"})])],-1)),vs={class:"coin"},ps=["src"],fs={class:"bottom"},gs={class:"induction"},Cs={class:"item"},hs={class:"induction-text"},bs={class:"induction-value induction-value-change"},ys={key:0},ws={key:1},As=Ee(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Ss=[As],ks={class:"item"},$s={class:"induction-text"},Is={class:"induction-value"},Ts={class:"item"},Ns={class:"induction-text"},Bs={class:"induction-value"},Fs={key:0,class:"item"},_s={class:"induction-text"},Os={key:0,class:"icon","aria-hidden":"true"},Ps=Ee(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Us=[Ps],Rs={key:1,class:"item"},Ds={class:"induction-text"},Ls={key:0,class:"induction-value"},js={key:1,class:"induction-value"};function Ms(e,t,h,C,$,R){const c=oo,L=eo("Modal");return a(),q(L,{width:"440px",visible:!0,footer:null,title:e.$t("modal.swapConfirmTitle"),class:"swap-confirm-modal",onCancel:t[2]||(t[2]=P=>e.$emit("on-close"))},{closeIcon:ne(()=>[is]),default:ne(()=>[o("div",ls,[o("div",us,[o("div",rs,[o("div",ds,[o("img",{src:e.fromCoinUrl||e.getCoinIcon(e.fromCoin)},null,8,cs),o("p",null,s(e.fromCoinAmount),1),z("    "),o("p",null,s(e.fromCoin.symbol),1)]),ms,o("div",vs,[o("img",{src:e.toCoinUrl||e.getCoinIcon(e.toCoin)},null,8,ps),o("p",null,s(e.toCoinAmount),1),z("    "),o("p",null,s(e.toCoin.symbol),1)])]),o("div",fs,[o("div",gs,[o("div",Cs,[o("div",hs,s(e.$t("common.rate")),1),o("div",bs,[e.rateChange?(a(),f("span",ws," 1 "+s(e.toCoin.symbol)+" ≈ "+s(("addCommom"in e?e.addCommom:O(j))(("sFixD"in e?e.sFixD:O(J))(Number(e.fromCoinAmount)/Number(e.toCoinAmount),e.toCoin.decimals)))+" "+s(e.fromCoin.symbol),1)):(a(),f("span",ys," 1 "+s(e.fromCoin.symbol)+" ≈ "+s(("addCommom"in e?e.addCommom:O(j))(("sFixD"in e?e.sFixD:O(J))(Number(e.toCoinAmount)/Number(e.fromCoinAmount),e.toCoin.decimals)))+" "+s(e.toCoin.symbol),1)),(a(),f("svg",{class:"icon-change","aria-hidden":"true",onClick:t[0]||(t[0]=P=>e.rateChange=!e.rateChange)},Ss))])]),o("div",ks,[o("div",$s,s(e.$t("modal.slippageTolerance")),1),o("div",Is,s(e.slippage)+"%",1)]),o("div",Ts,[o("div",Ns,s(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",Bs,s(e.fixedFromCoin?("addCommom"in e?e.addCommom:O(j))(("sFixD"in e?e.sFixD:O(J))(e.toCoinAmount-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals)):("addCommom"in e?e.addCommom:O(j))(("sFixD"in e?e.sFixD:O(J))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals)))+" "+s(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),e.chainName=="Sui"?(a(),f("div",Fs,[o("div",_s,s(e.$t("common.priceImpact")),1),o("div",{class:ce(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>1?"impact-w":"impact-e"])},[z(s(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(a(),f("svg",Os,Us)):_("",!0)],2)])):_("",!0),e.fee?(a(),f("div",Rs,[o("div",Ds,s(e.$t("common.fee")),1),e.chainName=="Aptos"?(a(),f("div",Ls,s(e.formatFee)+" "+s(e.fromCoin.symbol)+" ("+s(e.fee*100)+"%) ",1)):(a(),f("div",js,s(e.fee),1))])):_("",!0)])])])]),de(c,{class:"big-btn swap-confirm-btn",onClick:t[1]||(t[1]=P=>e.clickNextBtn())},{default:ne(()=>[z(s(e.$t("button.confirmSwap")),1)]),_:1})]),_:1},8,["title"])}const Es=$e(ts,[["render",Ms],["__scopeId","data-v-39c58222"]]);async function qs(e){const{prices:t}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=1&interval=hourly`,{headers:{Connection:"keep-alive",Accept:"*/*"}});return t}const Ws={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""}},setup(e,t){const{$echarts:h}=cn();let C=null,$;const R=v(!0),c=(u,d,U)=>{$={xAxis:{type:"category",boundaryGap:!1,show:!1,data:d},yAxis:{type:"value",show:!1,min:function(F){return F.min-F.min*.1},max:function(F){return F.max+F.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:T.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(F){return`<div class="chart-tip">
              <div>${F&&F[0]&&F[0].name}</div>
              <div>$${Ce(F&&F[0]&&F[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:T.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:T.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:u,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:T.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},$&&C.clear(),$&&C.setOption($,!0),C.resize(),R.value=!1},L=ke(),P=b(()=>L),W=v(""),B=v(""),X=async u=>{var se,pe;const d=[],U=[],F=await qs(u);W.value=F&&F.length>1&&(F[F.length-1][1]-F[0][1])/F[0][1]*100,B.value=F&&F.length>1&&F[F.length-1][1],F.forEach(M=>{d.push(M[1]);const H=yo(M[0],"MD"),i=yo(M[0],"HM");U.push(H+" "+i)});let be=document.getElementById(`main${(se=e.coin)==null?void 0:se.name}`);C=h.init(be),c(d,U,(pe=e.coin)==null?void 0:pe.name)},K=Se(),T=b(()=>K),Z=b(()=>T.value.chainName),ee=b(()=>Me[Z.value]);Y(()=>e.id,(u,d)=>{console.log(u,d,"===>oldValue"),console.log(!R.value,"!isFirst.value"),u&&(W.value="",B.value="",setTimeout(()=>{X(u)},1e3))},{immediate:!0});const A=v(""),p=v(""),le=v(""),N=v("");Y(()=>[P.value.tokensObj,e.coin],([u,d])=>{var U,F;u&&d&&u[d.address]&&(console.log(u[d.address],"===>newValue[coin.address]"),p.value=((U=u[d.address])==null?void 0:U.labels)&&((F=u[d.address])==null?void 0:F.labels[0]),A.value=u[d.address].name,le.value=u[d.address].symbol,N.value=u[d.address].address)},{immediate:!0,deep:!0}),Y(()=>e.refresh,u=>{u&&X(e.id)});const G=b(()=>T.value.theme);return console.log(e.coin.address=="0x2::sui::SUI","0x2::sui::SUI"),{theme:G,store:K,importIcon:ie,fixD:Ce,config:ee,price_rate_24h:W,nowPrice:B,coinName:A,coinLabels:p,coinSymbol:le,address:N}}};const Xs=e=>(Ie("data-v-079780ad"),e=e(),Te(),e),Qs={class:"token-info"},Hs={class:"token-info-padding"},zs={class:"token-info-header"},Js={class:"left"},Ks=["src","onerror"],Zs={class:"name"},Ys={class:"desc"},Gs={class:"right"},Vs={class:"price"},xs={class:"token-info-footer"},ea={class:"left"},oa={class:"address"},na={key:0,class:"pc-address"},sa={key:1,class:"pc-address"},aa={class:"h5-address"},ta=Xs(()=>o("use",{"xlink:href":"#icon-icon-copy"},null,-1)),ia=[ta],la={class:"right"},ua=["id"];function ra(e,t,h,C,$,R){var c;return a(),f("div",Qs,[o("div",Hs,[o("div",zs,[o("div",Js,[o("img",{src:h.coin.logoURI||C.importIcon(`/image/coins/${h.coin.symbol.toLowerCase()}.png`),onerror:C.theme=="default"?C.importIcon("/image/coins/unknown.png"):C.importIcon("/image/coins/sui-unknown.png")},null,8,Ks),o("div",null,[o("div",Zs,s(C.coinSymbol),1),o("div",Ys,[o("span",null,s(C.coinName)+" "+s(C.coinLabels?`(${C.coinLabels})`:""),1)])])]),o("div",Gs,[o("div",Vs,"$"+s(C.fixD(C.nowPrice,2)),1),C.price_rate_24h?(a(),f("div",{key:0,class:ce(C.price_rate_24h>0?"increase up":C.price_rate_24h<0?"increase down":"increase up")},s(C.price_rate_24h>0?`+ ${C.fixD(C.price_rate_24h,2)}`:C.price_rate_24h<0?+`${C.fixD(C.price_rate_24h,2)}`:`+${C.fixD(C.price_rate_24h,2)}`)+"% ",3)):_("",!0)])]),o("div",xs,[o("div",ea,[o("div",oa,[h.coin&&C.address!=="0x2::sui::SUI"?(a(),f("span",na,s(h.coin&&h.coin.address.substr(0,13))+" ... "+s(h.coin&&h.coin.address.substr(h.coin.address.length-13,13)),1)):(a(),f("span",sa,s(h.coin&&h.coin.address),1)),o("span",aa,s(h.coin&&h.coin.address.substr(0,4))+" ... "+s(h.coin&&h.coin.address.substr(h.coin.address.length-4,4)),1),(a(),f("svg",{class:"icon","aria-hidden":"true",onClick:t[0]||(t[0]=L=>C.store.copy(h.coin&&h.coin.address))},ia))])]),o("div",la,[o("div",{id:`main${(c=h.coin)==null?void 0:c.name}`,class:"main"},null,8,ua)])])])])}const da=$e(Ws,[["render",ra],["__scopeId","data-v-079780ad"]]);const ca=Oe({components:{Modal:xe},props:{routertotalPercents:{type:Array,default:()=>[]},routerPool:{type:Array,default:()=>[]},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},routerTotalAmounts:{type:String,default:""}},setup(e){const t=ke(),h=b(()=>t),C=v([]);return Y(()=>[e.routerPool,h.value.poolConfigObj,e.routerTotalAmounts,e.fromCoin,e.toCoin],([$,R,c,L,P])=>{if(console.log(e,"props=====>100"),$&&$.length>0&&R&&!ge(R)&&c){const W=[];$.forEach(B=>{console.log(c,"===>routerTotalAmounts"),console.log(B,"ele.amountIn===>");const X="100",K=B.amountIn.toString(),T=fe(B.amountOut.toString(),P.decimals),Z=B.poolAddress.map((ee,A)=>{const p=R&&R[ee];return console.log(B,"ele===>118"),{...p}});W.push({percent:X,...B,amountIn:K,amountOut:T,poolAddress:Z})}),console.log(W,"result===>"),C.value=W}},{immediate:!0}),b(()=>{var $,R;return(R=($=h.value)==null?void 0:$.poolInfo)==null?void 0:R.needReverse}),{addCommom:j,routerStep:C}}}),qe=e=>(Ie("data-v-a3281978"),e=e(),Te(),e),ma=qe(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),va={class:"route-top"},pa={class:"token-a"},fa=["src"],ga={class:"token-num"},Ca={class:"token-symbol"},ha={class:"token-b"},ba={class:"token-num"},ya={class:"token-symbol"},wa=["src"],Aa={class:"route-bottom"},Sa=qe(()=>o("div",{class:"left-round"},null,-1)),ka=qe(()=>o("div",{class:"right-round"},null,-1)),$a={class:"percent"},Ia={class:"pool-info"},Ta=["src"],Na=["src"],Ba={key:0,class:"icon","aria-hidden":"true"},Fa=qe(()=>o("use",{"xlink:href":"#icon-icon_on1"},null,-1)),_a=[Fa];function Oa(e,t,h,C,$,R){const c=eo("Modal");return a(),q(c,{title:"Route",width:"600px",visible:!0,footer:null,onCancel:t[0]||(t[0]=L=>e.$emit("onClose"))},{closeIcon:ne(()=>[ma]),default:ne(()=>{var L,P,W,B;return[o("div",va,[o("div",pa,[o("img",{src:(L=e.fromCoin)==null?void 0:L.logo_url,alt:""},null,8,fa),o("span",ga,s(("addCommom"in e?e.addCommom:O(j))(e.fromCoinAmount)),1),o("span",Ca,s((P=e.fromCoin)==null?void 0:P.symbol),1)]),o("div",ha,[o("span",ba,s(("addCommom"in e?e.addCommom:O(j))(e.toCoinAmount)),1),o("span",ya,s((W=e.toCoin)==null?void 0:W.symbol),1),o("img",{src:(B=e.toCoin)==null?void 0:B.logo_url,alt:""},null,8,wa)])]),o("div",Aa,[Sa,ka,(a(!0),f(Ve,null,wo(e.routerStep,(X,K)=>(a(),f("div",{key:X,class:ce(["route-path",K!==0?"route-path-active":""])},[o("div",$a,[o("span",null,s(X.percent)+"%",1),o("span",null,s(("addCommom"in e?e.addCommom:O(j))(X.amountOut))+" "+s(e.toCoin.symbol),1)]),(a(!0),f(Ve,null,wo(X.poolAddress,(T,Z)=>(a(),f("div",{key:Z,class:"pool-info-box"},[o("div",Ia,[o("img",{class:"token-a-img",src:T.needReverse?T.coinB.logo_url:T.coinA.logo_url,alt:""},null,8,Ta),o("img",{class:"token-b-img",src:T.needReverse?T.coinA.logo_url:T.coinB.logo_url,alt:""},null,8,Na),o("span",null,s(T.fee*100)+"%",1)]),Z!==X.poolAddress.length-1?(a(),f("svg",Ba,_a)):_("",!0)]))),128))],2))),128))])]}),_:1})}const Pa=$e(ca,[["render",Oa],["__scopeId","data-v-a3281978"]]),Ua=Oe({components:{Modal:xe},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"998041.711793"},slippage:{type:String,default:""},impact:{type:Number,required:!0},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!0},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!0}},setup(e,t){const h=ke(),C=b(()=>h),$=Se(),R=b(()=>$),c=B=>{var X;return(B==null?void 0:B.logoURI)||(B==null?void 0:B.logo_url)||((X=C.value.tokensObj[B==null?void 0:B.address])==null?void 0:X.logo_url)||(R.value.theme==="default"?ie("/image/coins/unknown.png"):ie("/image/coins/sui-unknown.png"))},L=v(!1),P=b(()=>R.value.chainName),W=async()=>{t.emit("to-swap")};return console.log(e.swapLoading,"swapLoading===>"),{getCoinIcon:c,addCommom:j,sFixD:J,rateChange:L,chainName:P,clickNextBtn:W}}});const me=e=>(Ie("data-v-56c8d875"),e=e(),Te(),e),Ra=me(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Da={class:"new-swap-contnet"},La={class:"coin-info"},ja={class:"from-coin-info"},Ma={class:"left"},Ea={class:"coin-amount"},qa={class:"coin-symbol"},Wa={class:"right"},Xa=["src"],Qa={class:"to-coin-info"},Ha={class:"left"},za={class:"coin-amount"},Ja={class:"coin-symbol"},Ka={class:"right"},Za=["src"],Ya=me(()=>o("div",{class:"to-swap-logo"},null,-1)),Ga={class:"coin-rate"},Va={key:0},xa={class:"left"},et=["src"],ot=["src"],nt=me(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),st=me(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),at=[nt,st],tt={key:1},it={class:"left"},lt=["src"],ut=["src"],rt=me(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),dt=me(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ct=[rt,dt],mt={class:"bottom"},vt={class:"induction"},pt={class:"item"},ft={class:"induction-text"},gt={class:"induction-value"},Ct={class:"item"},ht={class:"induction-text"},bt={class:"induction-value"},yt={key:0,class:"item"},wt={class:"induction-text"},At={key:0,class:"icon","aria-hidden":"true"},St=me(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),kt=[St],$t={key:1,class:"item"},It={class:"induction-text"},Tt={key:0,class:"induction-value"},Nt={key:1,class:"induction-value"},Bt={key:0,class:"price-updated"},Ft=me(()=>o("span",null,"Price updated",-1));function _t(e,t,h,C,$,R){const c=oo,L=eo("Modal");return a(),q(L,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:t[4]||(t[4]=P=>e.$emit("on-close"))},{closeIcon:ne(()=>[Ra]),default:ne(()=>[o("div",Da,[o("div",La,[o("div",ja,[o("div",Ma,[o("div",Ea,s(e.fromCoinAmount&&("addCommom"in e?e.addCommom:O(j))(e.fromCoinAmount)),1),o("div",qa,s(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",Wa,[o("img",{src:e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)},null,8,Xa)])]),o("div",Qa,[o("div",Ha,[o("div",za,s(e.toCoinAmount&&("addCommom"in e?e.addCommom:O(j))(e.toCoinAmount)),1),o("div",Ja,s(e.toCoin&&e.toCoin.symbol),1)]),o("div",Ka,[o("img",{src:e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.fromCoin)},null,8,Za)]),Ya]),o("div",Ga,[e.rateChange?(a(),f("div",tt,[o("div",it,[o("img",{src:e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)},null,8,lt),o("span",null,"1 "+s(e.toCoin&&e.toCoin.symbol)+" ≈",1),o("img",{src:e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)},null,8,ut),o("span",null,s(("addCommom"in e?e.addCommom:O(j))(("sFixD"in e?e.sFixD:O(J))(Number(e.fromCoinAmount)/Number(e.toCoinAmount),e.fromCoin.decimals)))+" "+s(e.fromCoin.symbol),1)]),o("div",{class:"right",onClick:t[1]||(t[1]=P=>e.rateChange=!e.rateChange)},ct)])):(a(),f("div",Va,[o("div",xa,[o("img",{src:e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)},null,8,et),o("span",null,"1 "+s(e.fromCoin&&e.fromCoin.symbol)+" ≈",1),o("img",{src:e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)},null,8,ot),o("span",null,s(("addCommom"in e?e.addCommom:O(j))(("sFixD"in e?e.sFixD:O(J))(Number(e.toCoinAmount)/Number(e.fromCoinAmount),e.toCoin.decimals)))+" "+s(e.toCoin.symbol),1)]),o("div",{class:"right",onClick:t[0]||(t[0]=P=>e.rateChange=!e.rateChange)},at)]))])]),o("div",mt,[o("div",vt,[o("div",pt,[o("div",ft,s(e.$t("modal.slippageTolerance")),1),o("div",gt,s(e.slippage)+"%",1)]),o("div",Ct,[o("div",ht,s(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",bt,s(e.fixedFromCoin?("addCommom"in e?e.addCommom:O(j))(("sFixD"in e?e.sFixD:O(J))(e.toCoinAmount-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals)):("addCommom"in e?e.addCommom:O(j))(("sFixD"in e?e.sFixD:O(J))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals)))+" "+s(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),e.chainName=="Sui"?(a(),f("div",yt,[o("div",wt,s(e.$t("common.priceImpact")),1),o("div",{class:ce(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>1?"impact-w":"impact-e"])},[z(s(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(a(),f("svg",At,kt)):_("",!0)],2)])):_("",!0),e.fee?(a(),f("div",$t,[o("div",It,s(e.$t("common.fee")),1),e.chainName=="Aptos"?(a(),f("div",Tt,s(e.formatFee)+" "+s(e.fromCoin.symbol)+" ("+s(e.fee*100)+"%) ",1)):(a(),f("div",Nt,s(e.fee),1))])):_("",!0)])])]),e.isShowAccept?(a(),f("div",Bt,[Ft,de(c,{class:"accept-btn",loading:e.swapLoading,onClick:t[2]||(t[2]=P=>e.$emit("accept",e.fixedFromCoin))},{default:ne(()=>[z("Accept")]),_:1},8,["loading"])])):(a(),q(c,{key:1,class:"big-btn swap-confirm-btn",onClick:t[3]||(t[3]=P=>e.clickNextBtn())},{default:ne(()=>[z(s(e.$t("button.confirmSwap")),1)]),_:1}))]),_:1},8,["title"])}const Ot=$e(Ua,[["render",_t],["__scopeId","data-v-56c8d875"]]),Pt=Oe({setup(){const e=Ao(),t=Io(To,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:h,locale:C}=Fo(),$=Se(),R=ke(),c=b(()=>R);let L=v(!1),P=v(!1),W=v(!1),B=v(!1),X=v(!1),K=v(!1);const T=v("fromCoin"),Z=v(""),ee=v(""),A=v(!1),p=v(!0),le=v(!1),N=v(!1),G=v(!1),u=v(""),d=v(""),U=v(20),F=v(0),be=v(null),se=v(!1),pe=b(()=>$.slippage),M=b(()=>$.chainName),H=b(()=>M.value?ko(M.value):{}),i=v(),m=v(),We=b(()=>Me&&Me[M.value]&&Me[M.value].hasRouter),no=b(()=>R.getPoolInfoSuccess),_o=b(()=>{var n;return k.value&&((n=k.value)!=null&&n.is_pause)?"Pool Closed":!i.value||!m.value?h("modal.selectTokenModalTitle"):!We.value&&!k.value&&no.value?"Pool Not Found":We.value&&Ne.value?"No Available Route":(console.log(se.value,"===>insufficientLiquidity.value"),se.value?h("button.insufficientLiquidity"):!Number(u.value)&&!Number(d.value)?h("button.enterAmount"):Number(u.value)>Number(oe.value)?h("button.insufficientBalance",{name:i.value.symbol}):h("button.swap"))}),Oo=n=>{var r,l,y,S;T.value=n,n==="fromCoin"?(Z.value=((r=m.value)==null?void 0:r.address)||"",ee.value=((l=i.value)==null?void 0:l.address)||""):(Z.value=((y=i.value)==null?void 0:y.address)||"",ee.value=((S=m.value)==null?void 0:S.address)||""),A.value=!0},Xe=v({}),Qe=v({}),Po=n=>{T.value==="fromCoin"?(Xe.value=n,Je(n)):(Qe.value=n,Je(n))},Uo=n=>{n==="fromCoin"?(p.value=!0,M.value==="Aptos"?u.value=oe.value>0?i.value.symbol=="APT"?new g(Number(oe.value)).sub(new g(.1)).lt(new g(0))?"0":new g(Number(oe.value)).sub(new g(.1)).toString():String(oe.value):"":u.value=oe.value>0?i.value.symbol=="SUI"?new g(Number(oe.value)).sub(new g(.05)).lt(new g(0))?"0":new g(Number(oe.value)).sub(new g(.05)).toString():String(oe.value):""):(p.value=!1,M.value==="Aptos"?d.value=te.value>0?m.value.symbol=="APT"?new g(Number(te.value)).sub(new g(.1)).lt(new g(0))?"0":new g(Number(te.value)).sub(new g(.1)).toString():String(te.value):"":d.value=te.value>0?m.value.symbol=="SUI"?new g(Number(te.value)).sub(new g(.05)).lt(new g(0))?"0":new g(Number(te.value)).sub(new g(.05)).toString():String(te.value):"")},Ro=n=>{n==="fromCoin"?(p.value=!0,u.value=oe.value>0?J(new g(Number(oe.value)).div(2).toString(),i.value.decimals).toString():""):(p.value=!1,d.value=te.value>0?J(new g(Number(te.value)).div(2).toString(),m.value.decimals).toString():"")};mn(()=>{so()}),vn(()=>{clearInterval(be.value)});const He=b(()=>$),Do=()=>{!k.value&&!We.value||(clearInterval(be.value),R.setPoolConfigList(He.value.chainName,He.value.filterCoinsObj),F.value=0,P.value=!0,k.value&&R.updateCurrentPools(k.value.poolAddress,M.value),Ae(p.value?u.value:d.value),$.getStatsData(M.value,He.value.filterCoinsObj),setTimeout(()=>{P.value=!1,so()},1e3))},so=()=>{be.value=setInterval(()=>{P.value=!1,le.value||F.value<U.value&&(F.value+=1,F.value===U.value&&(k.value&&k.value.poolAddress&&R.updateCurrentPools(k.value.poolAddress,M.value),F.value=0,P.value=!0))},1e3)};Y(p,je((n,r)=>{p.value=n},500));const ye=v(!1);Y(u,je((n,r)=>{n&&n!==0&&p.value&&Ae(n),n==""&&p.value&&(d.value="")},500)),Y(d,je((n,r)=>{n&&n!==0&&!p.value&&Ae(n),n==""&&!p.value&&(u.value="")},500));const we=v(1e-4),ze=async n=>{let r=n;if(console.log(r,"poolInfo====>"),M.value==="Aptos"&&!r.current_sqrt_price&&u.value&&d.value){const l=await H.value.getPools([r.address]);l&&l[0]&&(r={...n,...l[0],fee:Number(l[0].fee_rate)/1e6})}if(r.current_sqrt_price&&u.value&&d.value){const y=(i.value.address===r.coinA.address&&m.value.address===r.coinB.address?0:1)==0,S=new g(u.value),w=new g(d.value),E=S.sub(S.mul(new g(r.fee)));console.log("getImpact###poolInfo.fee####",r.fee),console.log("getImpact###fAmount####",S.toString()),console.log("getImpact###tAmount####",w.toString()),console.log("getImpact###f####",E.toString());const Q=w.div(E);console.log("getImpact####rates####",Q.toString());const I=H.value.getPriceImpactPct(r,Q.toString(),y);return console.log(I,"t===>"),I}return"--"},ao=v(0),to=v(0),Lo=v(),ae=v({}),jo=async n=>{if(k.value&&(console.log(Number(u.value)==0,"===>Number(fromCoinAmount.value)==0"),!(p.value&&Number(u.value)==0)&&!(!p.value&&Number(d.value)==0)))if(i.value&&m.value&&(u.value||d.value)){N.value=!0,G.value=!0,se.value=!1;const r=i.value.address===k.value.coinA.address&&m.value.address===k.value.coinB.address?0:1;console.log(k.value,"poolInfo=====>451"),console.log(p.value?u.value:d.value,"fixedFromCoin.value ? fromCoinAmount.value : toCoinAmount.value"),console.log(r,"===>direct");try{let l=await H.value.preSwap({pool:k.value,a2b:r==0,byAmountIn:p.value,amount:p.value?u.value:d.value});console.log(l,"preSwapRespreSwapRes"),se.value=l==null?void 0:l.isExceed,Lo.value=l==null?void 0:l.estimatedFeeAmount,p.value?(d.value=l.estimatedAmountOut,X.value?Pe.value=(n/Number(l.estimatedAmountOut)).toString():Ue.value=(Number(l.estimatedAmountOut)/n).toString()):(u.value=l.estimatedAmountIn,X.value?Pe.value=(Number(l.estimatedAmountIn)/n).toString():Ue.value=(n/Number(l.estimatedAmountIn)).toString()),ao.value=new g(d.value).div(u.value).toString(),to.value=new g(u.value).div(d.value).toString(),console.log("0524###getAmount###toAddLiquidiPoolInfo.value ###",ae.value),console.log("0524###getAmount###poolInfo.value ###",k.value),we.value=M.value=="Aptos"?await ze(k.value):await ze(ae.value||k.value),N.value=!1,G.value=!1}catch(l){console.log("pre swap error",l),N.value=!1,G.value=!1}}else p.value?d.value="":u.value="",N.value=!1,G.value=!1},Mo=$o(),ue=b(()=>Mo),Eo=v({}),Pe=v(""),Ue=v(""),oe=b(()=>ue.value.assets&&i.value&&ue.value.assets[i.value.address]?fe(ue.value.assets[i.value.address].balance,i.value.decimals):0),te=b(()=>ue.value.assets&&m.value&&ue.value.assets[m.value.address]?fe(ue.value.assets[m.value.address].balance,m.value.decimals):0),qo=Ao();Y(()=>c.value.tokensObj,async n=>{if(!ge(n)){console.log(n,"===>newValue626"),console.log(qo,"===>route625");const r=e?e.currentRoute.value.query.to:"",l=e?e.currentRoute.value.query.from:"";l?i.value=await H.value.getTokenBySymbol(n,l):!l&&!i.value&&(i.value=await H.value.getTokenBySymbol(n,$.chainName==="Aptos"?"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T":"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN"),console.log(i.value,"===>fromCoin.value")),r?m.value=await H.value.getTokenBySymbol(n,r):!r&&!m.value&&(m.value=await H.value.getTokenBySymbol(n,$.chainName==="Aptos"?"0x1::aptos_coin::AptosCoin":"0x2::sui::SUI")),!l&&r&&(i.value="")}},{immediate:!0});const k=b(()=>{var n,r,l,y,S;if(i.value&&m.value){let w=null,E={};if(console.log(m.value.address,"===>toCoin.value.address930"),Object.values(c.value.poolConfigList).forEach(I=>{var D,V,x,re;(I.coinA.address.toUpperCase()===((D=i.value.address)==null?void 0:D.toUpperCase())&&I.coinB.address.toUpperCase()===((V=m.value.address)==null?void 0:V.toUpperCase())||I.coinB.address.toUpperCase()===((x=i.value.address)==null?void 0:x.toUpperCase())&&I.coinA.address.toUpperCase()===((re=m.value.address)==null?void 0:re.toUpperCase()))&&(console.log(I,"p===>"),E[I.address]={...I})}),M.value=="Aptos"&&c.value.poolsObj&&!ge(c.value.poolsObj))for(const I in c.value.poolsObj){const D=c.value.poolsObj[I];(D.token_a.address.toUpperCase()===((n=i.value.address)==null?void 0:n.toUpperCase())&&D.token_b.address.toUpperCase()===((r=m.value.address)==null?void 0:r.toUpperCase())||D.token_b.address.toUpperCase()===((l=i.value.address)==null?void 0:l.toUpperCase())&&D.token_a.address.toUpperCase()===((y=m.value.address)==null?void 0:y.toUpperCase()))&&(E[D.address]={...D})}console.log(E,"===>currentPoolsObj");const Q=Object.values(E).sort((I,D)=>I.fee-D.fee);console.log("0507####swap###poolInfo###poolSortList###",Q);for(let I=0;I<Q.length;I++)if(!((S=Q[I])!=null&&S.is_pause)){w=Q[I];break}return w=Object.values(E).sort((I,D)=>I.fee-D.fee)[0],console.log(E,"currentPoolsObj===>"),console.log("0507####swap###poolInfo###info###",w),w&&!ge(w)?w:null}return null}),io=v(!0),lo=v(!1),Wo=async n=>{n&&M.value=="Aptos"&&(Ae(p.value?u.value:d.value),lo.value=!0,n.coinA.symbol.toLowerCase()===i.value.symbol.toLowerCase()&&n.coinB.symbol.toLowerCase()===m.value.symbol.toLowerCase()?io.value=!0:io.value=!1,se.value=!1)};Y(()=>k.value,(n,r)=>{n&&(!r||n.address!==r.address||n.current_sqrt_price!==r.current_sqrt_price)&&Wo(n)},{immediate:!0,deep:!0});const Xo=b(()=>c.value.tokensObj&&i.value&&i.value.address&&c.value.tokensObj[i.value.address]&&c.value.tokensObj[i.value.address].logoURI),Qo=b(()=>(console.log(c.value.tokensObj,"===>pools.value.tokensObj"),c.value.tokensObj&&m.value&&m.value.address&&c.value.tokensObj[m.value.address]&&c.value.tokensObj[m.value.address].logoURI)),Ho=b(()=>c.value.tokensObj&&i.value&&i.value.address&&c.value.tokensObj[i.value.address]&&c.value.tokensObj[i.value.address].coingecko_id||null),zo=b(()=>c.value.tokensObj&&m.value&&m.value.address&&c.value.tokensObj[m.value.address]&&c.value.tokensObj[m.value.address].coingecko_id||null),Jo=b(()=>{var y,S,w;const n=new g(u.value);console.log(ae.value,"===>toAddLiquidiPoolInfo"),console.log((y=ae==null?void 0:ae.value)==null?void 0:y.fee,"toAddLiquidiPoolInfo?.value?.fee");const r=new g(M.value=="Aptos"?(S=k==null?void 0:k.value)==null?void 0:S.fee:(w=ae==null?void 0:ae.value)==null?void 0:w.fee),l=n.mul(r).toString();return console.log(l,"===>fee"),Number(l)<1/Math.pow(10,i.value.decimals)?`<${new g(1).div(new g(Math.pow(10,i.value.decimals))).toString()}`:J(l,i.value.decimals)}),{setIsShowSuccess:Ko,setIsShowRejected:uo,setIsShowWaiting:Re,setTransactionDesc:Zo,setTransactionTxid:ro}=$,Yo=async()=>{var r,l,y,S,w,E,Q,I;K.value=!1,N.value=!0,clearInterval(Fe),window.clearInterval(Fe),ro(""),Zo(h("tips.swapping",{from:`${u.value} ${(r=i.value)==null?void 0:r.symbol}`,to:`${d.value} ${(l=m.value)==null?void 0:l.symbol}`})),Re(!0);let n;M.value=="Aptos"&&(n=i.value.address===k.value.token_a.address&&m.value.address===k.value.token_b.address?0:1);try{console.log("0221####swap start####",M.value,"###",H),console.log("0412###toSwap###poolInfo.value###",k.value);let D;M.value=="Aptos"?D=await H.value.getSwapTransactionPayload({pool:k.value,a2b:n==0,byAmountIn:p.value,amount:p.value?u.value:d.value,slippage:Number(pe.value)/100}):(console.log(ae.value,"===>toAddLiquidiPoolInfo.value"),D=await De.value.swapRouterContract.getSwapRouterPayload(p.value,Ze.value.createTxParams)),console.log("0221####swap###swapPayload###",D);let V;if(M.value==="Aptos")V=await ue.value.currentWallet.signAndSubmitTransaction(D);else{console.log("0221###swap###sui##signAndExecuteTransaction前###",M.value,"###swapPayload###",D);const x=await ue.value.currentWallet.signAndExecuteTransactionBlock(D);console.log("0221###sui swap res###",x),V=H.value.handleTx(x),console.log("0221###swap###sui##tx###",V)}if(V&&V.hash){ro(V.hash),Re(!1),Ko(!0);const x={title:h("tips.swap"),desc:h("tips.swapSuccessText",{from:`${u.value} ${(y=i.value)==null?void 0:y.symbol}`,to:`${d.value} ${(S=m.value)==null?void 0:S.symbol}`}),hash:V.hash,tit:"Swap",icon:"icon-icon-swap1",tokenInfo:{tokena:`${(w=i.value)==null?void 0:w.address}`,numa:`- ${u.value}`,logoa:c.value.tokensObj&&i.value&&i.value.address&&c.value.tokensObj[i.value.address]&&c.value.tokensObj[i.value.address].logoURI,tokenb:`${(E=m.value)==null?void 0:E.address}`,numb:`+ ${d.value}`,logob:c.value.tokensObj&&m.value&&m.value.address&&c.value.tokensObj[m.value.address]&&c.value.tokensObj[m.value.address].logoURI},text:`Pay ${u.value} ${(Q=i.value)==null?void 0:Q.symbol} to receive ${d.value} ${(I=m.value)==null?void 0:I.symbol}`};M.value!=="Aptos"&&(x.res=V.res),H.value.showTransitionPending(x);const re=await H.value.watchTransaction(x);console.log("0221###swap###transitionStatus####",re),re&&setTimeout(()=>{M.value=="Aptos"&&R.updateCurrentPools(k.value.poolAddress,M.value),H.value.getAccount(ue.value.address)},1e3)}else Re(!1),uo(!0);u.value="",d.value="",N.value=!1}catch(D){u.value="",d.value="",console.log("Swap Error###",D),N.value=!1,Re(!1),uo(!0)}},Go=n=>{var r;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((r=c.value.tokensObj[n==null?void 0:n.address])==null?void 0:r.logo_url)||($.theme==="default"?ie("/image/coins/unknown.png"):ie("/image/coins/sui-unknown.png"))},co=v([]);Y(()=>[i.value,m.value,c.value.poolConfigList],([n,r,l])=>{if(l&&l.length>0&&n&&r){const y=[];l.forEach(S=>{var w,E,Q,I;(S.coinA.address.toUpperCase()===((w=n.address)==null?void 0:w.toUpperCase())&&S.coinB.address.toUpperCase()===((E=r.address)==null?void 0:E.toUpperCase())||S.coinB.address.toUpperCase()===((Q=n.address)==null?void 0:Q.toUpperCase())&&S.coinA.address.toUpperCase()===((I=r.address)==null?void 0:I.toUpperCase()))&&(S!=null&&S.is_pause||y.push(S.address))}),console.log(y,"result===>"),co.value=y}},{immediate:!0});const Je=n=>{console.log(T.value,"===>currentCoinKey.value"),console.log(n);const r=localStorage.getItem(n.address);console.log(c.value.tokensObj,"===>pools.value.tokensObj"),console.log(r,"===>coinLocak"),c.value.tokensObj&&c.value.tokensObj[n.address]&&c.value.tokensObj[n.address].isSelfBuilt&&!r?Ke.value=!0:(T.value==="fromCoin"?(u.value="",m.value&&n.address.toLowerCase()===(m==null?void 0:m.value.address.toLowerCase())&&(m.value=null),i.value=n):(i.value&&(d.value="",n.address.toLowerCase()===(i==null?void 0:i.value.address.toLowerCase())&&(i.value=null)),m.value=n),mo())},Ke=v(!1),mo=()=>{Qe.value={},Xe.value={},Ke.value=!1},Vo=b(()=>$.isShowRouterModal),vo=v([]),po=v(""),xo=v(!1),fo=Cn(),De=b(()=>fo),Ne=v(!1),Ze=v({}),Ye=v(""),en=n=>{if(n&&n.paths&&n.paths.length>0){const r=n.paths[0];if(n.coinTypeA&&n.coinTypeB&&n.coinTypeC){const l=c.value.poolConfigObj[r.poolAddress[0]],y=c.value.poolConfigObj[r.poolAddress[1]],S=fe(n.paths[0].amountIn.toString(),i.value.decimals)*l.fee;let w,E=y.token_a.address==m.value.address?y.token_b.decimals:y.token_a.decimals;p.value?w=fe(r.rawAmountLimit[0].toString(),E)*y.fee:w=fe(r.rawAmountLimit[1].toString(),E)*y.fee;let Q;console.log(y.token_a.address,m.value.address,"===>toCoin.value.address"),l.token_a.address==i.value.address?Q=!1:Q=!0;let I;Q?I=H.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],l.token_a.decimals,l.token_b.decimals).toString():I=1/H.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],l.token_a.decimals,l.token_b.decimals).toString(),console.log(l,"===>1398 poolA"),console.log(E,"===>1398feeBDecimals"),console.log(Q,"a2b1398"),console.log(I,1/I,w,"===>1398");const D=S+w*I;l.fee*100+"",Ye.value=D>0&&D<1e-6?`<0.000001 ${i.value.symbol}`:j(J(D,i.value.decimals))+` ${i.value.symbol}`}else{const l=c.value.poolConfigObj[r.poolAddress[0]],y=fe(n.paths[0].amountIn.toString(),i.value.decimals)*l.fee;Ye.value=y>0&&y<1e-6?`<0.000001 ${i.value.symbol} (${l.fee*100}%)`:j(J(y,i.value.decimals))+` ${i.value.symbol} (${l.fee*100}%)`}}},on=async n=>{if(console.log(n,"==>swapRouter"),n&&n.paths&&n.paths.length>0){console.log("这里执行了吗1");const r=n.paths[0];if(console.log(n.coinTypeA,"===>swapRouter.coinTypeA"),console.log(i.value.address,"===>fromCoin.value.address"),console.log(n.coinTypeC,"====>toCoin.value.address"),console.log(m.value.address,"===>toCoin.value.address"),n.coinTypeA&&n.coinTypeB&&n.coinTypeC&&n.coinTypeA==i.value.address&&n.coinTypeC==m.value.address){const l=c.value.poolConfigObj[r.poolAddress[0]],y=H.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],l.coinA.decimals,l.coinB.decimals).toNumber(),S=c.value.poolConfigObj[r.poolAddress[1]],w=H.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[1],S.coinA.decimals,S.coinB.decimals).toNumber();console.log(l,"poolA"),console.log(i.value.address,m.value.address,"===>1343"),console.log(l.token_a.address,l.token_b.address,"poolA1465"),console.log(S.token_a.address,S.token_b.address,"poolB1465");let E,Q;l.token_a.address==i.value.address?E=!0:E=!1,S.token_b.address==m.value.address?Q=!0:Q=!1,console.log(E,Q,"a2bb2c"),new g(u.value).div(d.value).toNumber();const I=new g(d.value).div(u.value).toNumber();console.log(y,w,"池子A当前价格 池子A交易后价格 池子B当前价格 池子B交易后价格");let D;const V=E?new g(y):new g(1).div(new g(y)),x=Q?new g(w):new g(1).div(new g(w));console.log(V.toString(),x.toString(),I,"==>currentPriceDirectA");const re=new g(V.mul(x)).sub(I).div(new g(V.mul(x))).mul(new g(100)).toNumber();D=re,console.log(re,"==>priceImpact"),D>100&&(console.log("我大于100了"),we.value=100),we.value=Number(Ce(Math.abs(D),2))}else if(n&&n.currentSqrtPrice&&n.currentSqrtPrice.length==1&&r&&!ge(r)){console.log("这里执行了吗");const l={...c.value.poolConfigObj[r.poolAddress[0]],current_sqrt_price:n.currentSqrtPrice[0]};console.log(l,"pool===>"),we.value=await ze(l),console.log(we.value,"==>impact.value")}}},go=async n=>{if(i.value&&m.value&&(Number(u.value)>0||Number(d.value)>0)){console.log(new Date().getTime(),"开始计算时间戳"),console.log("执行吧"),(!u.value&&d.value||u.value&&!d.value)&&(N.value=!0),ye.value=!0,Ne.value=!1,console.log(k.value,"==>poolInfo.value.");let r;k.value&&(r=i.value.address===k.value.coinA.address&&m.value.address===k.value.coinB.address?0:1);try{let l;if(p.value){const E=new g(u.value).mul(Math.pow(10,i.value.decimals)).toString();l=new Le(E)}else{const E=new g(d.value).mul(Math.pow(10,m.value.decimals)).toString();l=new Le(E)}console.log(l.toString(),"====>1498");const y=Number(pe.value)/100;console.log(De.value,"===>swapRouterContract.value");const S=k.value?{poolAddresses:co.value,coinTypeA:k.value.coin_a_address,coinTypeB:k.value.coin_b_address,decimalsA:k.value.coinA.decimals,decimalsB:k.value.coinB.decimals,a2b:r==0,byAmountIn:p.value,amount:p.value?u.value:d.value}:"",w=await De.value.swapRouterContract.getSwapRouter(i,m,l,p.value,y,"",k.value?S:"");console.log(new Date().getTime(),"计算完成时间戳"),console.log(w,"===> swapRouter1454"),w?(Ze.value=w,vo.value=w.paths,se.value=w.isExceed,console.log(w.isExceed,se.value,"===>swapRouter.isExceed"),po.value=w.amountIn,en(w),p.value?u.value&&(d.value=w.amountOut):d.value&&(u.value=w.amountIn),Pe.value=j(_e(new g(u.value).div(new g(d.value).toString()),i.value.decimals)),Ue.value=j(_e(new g(d.value).div(u.value).toString(),m.value.decimals)),on(w),N.value=!1,Ne.value=!1,ye.value=!1):(N.value=!1,Ne.value=!0,ye.value=!1)}catch(l){console.log("pre swap error",l),N.value=!1,ye.value=!1}}else p.value?d.value="":u.value="",N.value=!1,ye.value=!1;console.log(N.value,"====>routerSwaping")},Be=v(!1),Co=async n=>{console.log("3s执行一次");try{let r;if(p.value){const S=new g(u.value).mul(Math.pow(10,i.value.decimals)).toString();r=new Le(S)}else{const S=new g(d.value).mul(Math.pow(10,m.value.decimals)).toString();r=new Le(S)}const l=Number(pe.value)/100,y=await De.value.swapRouterContract.getSwapRouter(i,m,r,p.value,l,"");y&&(p.value?d.value!==y.amountOut?Be.value=!0:Be.value=!1:u.value!==y.amountIn?Be.value=!0:Be.value=!1)}catch(r){console.log("pre swap error",r)}};let Fe=v(null);Y(()=>K.value,n=>{n?(console.log("我开启了"),Fe.value=setInterval(()=>{Co(p.value)},3e3)):(console.log("我关闭了"),clearInterval(Fe.value),window.clearInterval(Fe.value))},{immediate:!0});const Ae=async n=>{M.value=="Aptos"?jo(n):(console.log("调用sui"),go())},nn=b(()=>fo),sn=b(()=>nn.value.isInitRouter);Y(()=>sn.value,n=>{n||Ae(p.value?u.value:d.value)},{immediate:!0}),Y(()=>[i.value,m.value],([n,r])=>{n&&r&&Ae(p.value?u.value:d.value)},{immediate:!0});function an(n,r=500){let l=null;return function(...y){clearTimeout(l),l=setTimeout(()=>{n.call(this,...y)},r)}}const tn=an(ho);function ho(){console.log("====>调用了几次");const n=i.value;i.value=m.value,m.value=n,L.value=!0,p.value=!p.value,p.value?(u.value=d.value,d.value=""):(d.value=u.value,u.value=""),setTimeout(()=>{L.value=!1},300)}return{clickExchange:ho,debounceClickExchange:tn,closeTokenWarning:mo,isShowTokenWarning:Ke,getTokenSource:Je,hasPool:lo,getPoolInfoSuccess:no,halfBtnSelect:Ro,formCoinId:Ho,toCoinId:zo,fromCoinUrl:Xo,toCoinUrl:Qo,t:h,indicator:t,wallet:ue,currentLpInfo:Eo,fixD:Ce,decimalFormat:Ge,impact:we,oneFromAmount:Pe,oneToAmount:Ue,importIcon:ie,clickRefresh:Do,refresh:P,change:L,isShowAddress:W,isShowSwapSetting:B,fromCoin:i,toCoin:m,slippage:pe,openCoinSelect:Oo,onCoinSelect:Po,existingCoins:Z,lastSelectCoin:ee,currentCoinKey:T,showCoinSelect:A,fromCoinAmount:u,toCoinAmount:d,maxBtnSelect:Uo,fixedFromCoin:p,swapBtnText:_o,toSwap:Yo,loading:le,swaping:N,autoRefreshTime:U,countdown:F,marketTimer:be,rateChange:X,isSwapConfirmMpdal:K,fromCoinBlance:oe,toCoinBlance:te,poolInfo:k,chainName:M,swapRouterLoading:ye,formatFee:Jo,calculating:G,currentRate:ao,currentRateReverse:to,getCoinIcon:Go,toAddLiquidiPoolInfo:ae,decimalUi:_e,warningToCoin:Qe,warningFromCoin:Xe,isShowRouterModal:Vo,toSwapLoading:xo,insufficientLiquidity:se,routerPool:vo,routerTotalAmounts:po,store:$,suiPreSwapdata:Ze,suiSwapFee:Ye,addCommom:j,debounce:je,notFoundRouter:Ne,getSuiAmountAccept:Co,isShowAccept:Be,getSuiAmount:go}}}),Ut="data:image/png;base64,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";const ve=e=>(Ie("data-v-27948de7"),e=e(),Te(),e),Rt={class:"swap-container"},Dt={class:"title"},Lt={class:"left"},jt={class:"right title-right"},Mt=ve(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Et={class:"swap-card"},qt={class:"card-container"},Wt={class:"card-item"},Xt={class:"card-item"},Qt=ve(()=>o("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),Ht=[Qt],zt={key:1,class:"induction"},Jt={key:0,class:"exchange-rate-btn"},Kt={key:0},Zt=["src"],Yt={key:0},Gt=["src"],Vt={key:0},xt={key:1},ei={key:0},oi=["src"],ni=["src"],si=ve(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),ai=[si],ti={class:"item"},ii={class:"induction-text"},li={key:0,class:"icon","aria-hidden":"true"},ui=ve(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),ri=[ui],di={class:"item"},ci={class:"induction-text"},mi={key:0,class:"induction-value"},vi={class:"item"},pi={class:"induction-text"},fi={key:0,class:"induction-value"},gi={key:0,class:"icon","aria-hidden":"true"},Ci=ve(()=>o("use",{"xlink:href":"#icon-icon-swap"},null,-1)),hi=[Ci],bi={key:3,class:"token-info-container"},yi={class:"token-info-title"},wi=ve(()=>o("span",{class:"coingecko"},"Ref. CoinGecko",-1)),Ai=ve(()=>o("img",{src:Ut,alt:""},null,-1)),Si=ve(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1));function ki(e,t,h,C,$,R){var u,d;const c=ln,L=rn,P=ns,W=No,B=Bo,X=oo,K=fn,T=dn,Z=gn,ee=Es,A=pn,p=da,le=un,N=Pa,G=Ot;return a(),f("div",Rt,[o("div",Dt,[o("div",Lt,s(e.$t("menu.swap")),1),o("div",jt,[o("div",{class:"slippage-icon",onClick:t[0]||(t[0]=U=>e.isShowSwapSetting=!0)},[Mt,o("span",null,s(e.slippage)+"%",1)]),de(c,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),o("div",Et,[o("div",qt,[o("div",Wt,[de(L,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[1]||(t[1]=U=>e.fromCoinAmount=U),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From",onOnMax:t[2]||(t[2]=U=>e.maxBtnSelect("fromCoin")),onOnHalf:t[3]||(t[3]=U=>e.halfBtnSelect("fromCoin")),onOnInput:t[4]||(t[4]=U=>{e.fromCoinAmount=U,e.fixedFromCoin=!0}),onOnSelect:t[5]||(t[5]=U=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("div",Xt,[de(L,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[6]||(t[6]=U=>e.toCoinAmount=U),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",onOnInput:t[7]||(t[7]=U=>{e.toCoinAmount=U,e.fixedFromCoin=!1}),onOnSelect:t[8]||(t[8]=U=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("img",{class:ce(e.change?"gang animationex":"gang"),src:hn,alt:""},null,2),o("div",{class:"exchange",onClick:t[9]||(t[9]=(...U)=>e.debounceClickExchange&&e.debounceClickExchange(...U))},[(a(),f("svg",{class:ce(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Ht,2))])]),e.chainName=="Sui"&&!e.notFoundRouter?(a(),q(P,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.impact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFee,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(a(),f("div",zt,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(a(),f("div",Jt,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(a(),f("span",xt,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(a(),f("span",ei,[o("img",{src:e.toCoinUrl||e.getCoinIcon(e.toCoin)},null,8,oi),z(" 1 "+s(e.toCoin.symbol)+" ≈ ",1),o("img",{src:e.fromCoinUrl||e.getCoinIcon(e.fromCoin)},null,8,ni),o("span",null,s(("addCommom"in e?e.addCommom:O(j))(("decimalUi"in e?e.decimalUi:O(_e))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),z("  "+s(e.fromCoin.symbol),1)])):(a(),q(W,{key:1,indicator:e.indicator},null,8,["indicator"]))])):_("",!0):(a(),f("span",Kt,[o("img",{src:e.fromCoinUrl||e.getCoinIcon(e.fromCoin)},null,8,Zt),z(" 1 "+s(e.fromCoin.symbol)+" ≈ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(a(),f("span",Yt,[o("img",{src:e.toCoinUrl||e.getCoinIcon(e.toCoin)},null,8,Gt),e.calculating?_("",!0):(a(),f("span",Vt,s(("addCommom"in e?e.addCommom:O(j))(("decimalUi"in e?e.decimalUi:O(_e))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(a(),q(W,{key:1,indicator:e.indicator},null,8,["indicator"])):_("",!0),z("  "+s(e.toCoin.symbol),1)])):(a(),q(W,{key:1,indicator:e.indicator},null,8,["indicator"]))])),(a(),f("svg",{class:"icon-change","aria-hidden":"true",onClick:t[10]||(t[10]=U=>e.rateChange=!e.rateChange)},ai))])):_("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(a(),f(Ve,{key:1},[o("div",ti,[o("div",ii,s(e.$t("common.priceImpact")),1),e.swaping?(a(),q(B,{key:1,paragraph:!1,active:""})):(a(),f("div",{key:0,class:ce(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[z(s(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(a(),f("svg",li,ri)):_("",!0)],2))]),o("div",di,[o("div",ci,s(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(a(),q(B,{key:1,paragraph:!1,active:""})):(a(),f("div",mi,s(e.fixedFromCoin?("addCommom"in e?e.addCommom:O(j))(("fixD"in e?e.fixD:O(Ce))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:O(j))(("fixD"in e?e.fixD:O(Ce))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+s(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",vi,[o("div",pi,s(e.$t("common.fee")),1),e.swaping?(a(),q(B,{key:1,paragraph:!1,active:""})):(a(),f("div",fi,s(("addCommom"in e?e.addCommom:O(j))(e.formatFee,e.fromCoin.decimals))+" "+s(e.fromCoin.symbol)+" ("+s(e.chainName=="Aptos"?e.poolInfo.fee*100:((u=e.toAddLiquidiPoolInfo)==null?void 0:u.fee)*100)+"%) ",1))])],64)):_("",!0)])):_("",!0)]),de(X,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((d=e.poolInfo)==null?void 0:d.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.chainName=="Aptos"?e.swaping:!1,onClick:t[11]||(t[11]=U=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ne(()=>[e.wallet.connected?(a(),f("svg",gi,hi)):_("",!0),o("span",null,s(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),de(K),e.showCoinSelect?(a(),q(T,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:t[12]||(t[12]=U=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):_("",!0),e.isShowSwapSetting?(a(),q(Z,{key:1,onOnClose:t[13]||(t[13]=U=>e.isShowSwapSetting=!1)})):_("",!0),e.isSwapConfirmMpdal&&e.chainName=="Aptos"?(a(),q(ee,{key:2,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,impact:e.impact,fee:e.chainName=="Aptos"?e.poolInfo.fee:e.suiSwapFee,"format-fee":e.chainName=="Aptos"?e.formatFee:e.suiSwapFee,onOnClose:t[14]||(t[14]=U=>e.isSwapConfirmMpdal=!1),onToSwap:e.toSwap},null,8,["fixed-from-coin","from-coin","to-coin","from-coin-amount","to-coin-amount","impact","fee","format-fee","onToSwap"])):_("",!0),e.chainName&&(e.formCoinId||e.toCoinId)?(a(),f("div",bi,[o("div",yi,[wi,Ai,de(A,{placement:"top","arrow-point-at-center":""},{title:ne(()=>[z(" The following price is only an external reference from CoinGecko, which may not reflect actual data on Cetus. ")]),default:ne(()=>[Si]),_:1})]),e.fromCoin&&e.formCoinId?(a(),q(p,{key:0,id:e.formCoinId,coin:e.fromCoin,refresh:e.refresh},null,8,["id","coin","refresh"])):_("",!0),e.toCoin&&e.toCoinId?(a(),q(p,{key:1,id:e.toCoinId,coin:e.toCoin,refresh:e.refresh},null,8,["id","coin","refresh"])):_("",!0)])):_("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(a(),q(le,{key:4,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):_("",!0),e.isShowRouterModal?(a(),q(N,{key:5,"router-pool":e.routerPool,"routertotal-percents":e.routertotalPercents,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"router-total-amounts":e.routerTotalAmounts,onOnClose:t[15]||(t[15]=U=>e.store.setIsShowRouterModal(!1))},null,8,["router-pool","routertotal-percents","from-coin","to-coin","from-coin-amount","to-coin-amount","router-total-amounts"])):_("",!0),e.isSwapConfirmMpdal&&e.chainName=="Sui"?(a(),q(G,{key:6,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.impact,"fixed-from-coin":e.fixedFromCoin,fee:e.suiSwapFee,"format-fee":e.suiSwapFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,onOnClose:t[16]||(t[16]=U=>e.isSwapConfirmMpdal=!1),onToSwap:e.toSwap,onAccept:e.getSuiAmount},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","onToSwap","onAccept"])):_("",!0)])}const Wi=$e(Pt,[["render",ki],["__scopeId","data-v-27948de7"]]);export{Wi as default};
