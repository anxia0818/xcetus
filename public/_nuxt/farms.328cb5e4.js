import{m as jo,e as Co,s as z,a as H,u as _o,d as eo,o as Eo,c as q,k as go}from"./pool.a37afa52.js";import{a as K,l as c,r as W,e as X,o as e,f as t,h as s,v as g,u as y,c as U,w as A,B as wo,j as F,p as ao,k as io,i as P,s as Oo,t as to,x as N,b as Ro,A as fo,F as J,E as so,P as ds,q as $o,z as bo,N as Jo,M as Mo,S as cs,H as zo,Q as us}from"./entry.1a38dbaf.js";import{a as lo,u as To}from"./sha256.a76639dd.js";import{u as ro}from"./farms.0ce1d361.js";import{R as qo}from"./farms-range.14d71f97.js";import{_ as Qo}from"./apr-tips.baf17d66.js";import{i as Ao}from"./import-icon.de3e6c66.js";/* empty css              *//* empty css              *//* empty css              */import{p as Go}from"./precision.a7a6c57b.js";import{_ as Ko}from"./img-connect-wallet_2x.31e15480.js";import{_ as Xo}from"./img-no-Positions_2x.3fc96c37.js";import{_ as ms}from"./upgrade-loading.c8b16caf.js";import"./decimal.0bdeb344.js";import"./icon_rewards_2x.6c8faba7.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const ps=K({setup(){const o=lo(),l=c(()=>o),h=ro(),u=c(()=>h),_=c(()=>u.value.totalRwadrdUsd),a=c(()=>u.value.farmsPositionList),i=c(()=>u.value.farmsAllPositionLoading),d=To(),w=jo("Sui"),v=Co("Sui"),{setIsShowSuccess:p,setIsShowRejected:f,setIsShowWaiting:k,setTransactionDesc:O,setTransactionTxid:n}=d,I=W(!1);return{wallet:l,farms:u,totalRwadrdUsd:_,sFixD:z,claimAllPoolReward:async no=>{I.value=!0,console.log(a.value,"farmsRewardObj###");const oo=[];a.value.forEach(E=>{console.log(no,E,"#position"),E.positionSource=="farming"&&oo.push({pool_id:E.pool_id,position_nft_id:E.id})}),console.log(JSON.stringify(oo),"##params"),n(""),O("Claim Rewards"),k(!0);try{const E=await w.batchHarvest(oo),Q=await l.value.currentWallet.signAndExecuteTransactionBlock(E);console.log("0221###sui swap res###",Q);let L=v.handleTx(Q);if(L&&L.hash){n(L.hash),k(!1),p(!0);let D={res:L.res,title:"Claim",hash:L.hash};v.showTransitionPending(D),await v.watchTransaction(D)&&setTimeout(()=>{h.getFarmsPoolList()},4e3)}else k(!1),f(!0);I.value=!1}catch(E){console.log("Claim all error",E),k(!1),f(!0),I.value=!1}},loading:I,addCommom:H,farmsAllPositionLoading:i}}});const Wo=o=>(ao("data-v-75cd64ff"),o=o(),io(),o),fs={class:"farms-banner-bg"},_s={class:"farms-banner"},hs={class:"farms-banner-center"},vs=Wo(()=>s("div",{class:"title"},"Farms",-1)),gs=Wo(()=>s("div",{class:"desc"},"Stake your positions to earn higher yield.",-1)),bs={class:"claim-rewards"},$s={class:"claim-title"},ws=Wo(()=>s("span",null,"Unclaimed Rewards",-1)),ys={key:0},Is={key:1},ks={class:"claim-content"};function Ss(o,l,h,u,_,a){const i=wo;return e(),t("div",fs,[s("div",_s,[s("div",hs,[vs,gs,s("div",bs,[s("div",$s,[ws,o.wallet.address?(e(),t("span",ys,g(Number(o.totalRwadrdUsd)>0&&Number(o.totalRwadrdUsd)<.01?"<$0.01":`$${("addCommom"in o?o.addCommom:y(H))(("sFixD"in o?o.sFixD:y(z))(o.totalRwadrdUsd||0,2))}`),1)):(e(),t("span",Is,"--"))]),s("div",ks,[o.wallet.address?(e(),U(i,{key:0,class:"claim-btn",loading:o.loading,disabled:Number(o.totalRwadrdUsd)==0||o.farmsAllPositionLoading,onClick:o.claimAllPoolReward},{default:A(()=>[F("Claim All")]),_:1},8,["loading","disabled","onClick"])):(e(),U(i,{key:1,class:"claim-btn",onClick:l[0]||(l[0]=d=>o.wallet.setIsShowWalletModal(!0))},{default:A(()=>[F("Connect")]),_:1}))])])])])])}const Yo=X(ps,[["render",Ss],["__scopeId","data-v-75cd64ff"]]),Ps=K({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=W(!0);return{sFixD:z,direct:o}}});const js=o=>(ao("data-v-14f67ada"),o=o(),io(),o),Cs={class:"valid-range"},Os=js(()=>s("div",{class:"title"},"Valid Range",-1));function Ts(o,l,h,u,_,a){const i=qo;return e(),t("div",Cs,[Os,P(i,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const Us=X(Ps,[["render",Ts],["__scopeId","data-v-14f67ada"]]),Ls=K({props:{poolInfo:{type:Object,default:()=>({})}},setup(){return{}}});const Rs={class:"pool"},As={class:"pool-info"},Fs={class:"token-logo"},Ds={alt:""},Ns={alt:""},Bs={class:"token-symbol"},Es={class:"symbol"},Ms={class:"fee-rate"};function qs(o,l,h,u,_,a){var w,v,p,f;const i=Us,d=Oo("image");return e(),t("div",Rs,[s("div",As,[s("div",Fs,[to(s("img",Ds,null,512),[[d,(w=o.poolInfo.coinA)==null?void 0:w.logo_url]]),to(s("img",Ns,null,512),[[d,(v=o.poolInfo.coinB)==null?void 0:v.logo_url]])]),s("div",Bs,[s("div",Es,g((p=o.poolInfo.coinA)==null?void 0:p.symbol)+" - "+g((f=o.poolInfo.coinB)==null?void 0:f.symbol),1),s("div",Ms,g(o.poolInfo.fee),1)])]),P(i,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const Zo=X(Ls,[["render",qs],["__scopeId","data-v-c027f63c"]]),Ws=K({props:{currentTab:{type:String,default:""},rewardInfo:{type:Object,default:()=>({})}},setup(){const o=_o(),l=c(()=>o);return{sFixD:z,addCommom:H,getCoinIcon:u=>{var _;return((_=l.value.tokensObj[u])==null?void 0:_.logo_url)||Ao("/image/coins/sui-unknown.png")}}}});const Vs={key:0,class:"rewards-day"},Hs={class:"rewards-day-box"},Js={alt:""};function zs(o,l,h,u,_,a){const i=Oo("image");return o.rewardInfo.allocate_point>0||o.currentTab=="Ended"?(e(),t("div",Vs,[s("div",null,[s("div",Hs,[to(s("img",Js,null,512),[[i,o.getCoinIcon(o.rewardInfo.reward_coin)]]),s("span",null,g(("addCommom"in o?o.addCommom:y(H))(("sFixD"in o?o.sFixD:y(z))(o.rewardInfo.emission_per_day,4))),1)])])])):N("",!0)}const xo=X(Ws,[["render",zs],["__scopeId","data-v-416b96fb"]]),Qs=K({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){console.log(o.positionInfo,"props.positionInfo");const l=_o(),h=c(()=>l);return{addCommom:H,decimalUi:eo,fixD:Eo,getCoinIcon:_=>{var a;return((a=h.value.tokensObj[_])==null?void 0:a.logo_url)||Ao("/image/coins/sui-unknown.png")}}}});const Gs={class:"hover-rewarder"},Ks={class:"rewarder-info"},Xs={class:"left-rewarder"},Ys={alt:""},Zs={class:"right-rewarder"},xs={class:"amount"},on={key:0,class:"amount-usd"},sn={key:1,class:"amount-usd"},nn={class:"rewarder-info"},en={class:"left-rewarder"},tn={alt:""},an={class:"right-rewarder"},ln={class:"amount"},rn={key:0,class:"amount-usd"},dn={key:1,class:"amount-usd"};function cn(o,l,h,u,_,a){const i=Oo("image");return e(),t("div",Gs,[s("div",Ks,[s("div",Xs,[to(s("img",Ys,null,512),[[i,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinB.address:o.positionInfo.coinA.address)]]),s("span",null,g(o.positionInfo.needReverse?o.positionInfo.coinB.symbol:o.positionInfo.coinA.symbol),1)]),s("div",Zs,[s("div",xs,g(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:y(H))(("decimalUi"in o?o.decimalUi:y(eo))(o.positionInfo.amountB,o.positionInfo.coinB.decimals)):("addCommom"in o?o.addCommom:y(H))(("decimalUi"in o?o.decimalUi:y(eo))(o.positionInfo.amountA,o.positionInfo.coinA.decimals))),1),o.positionInfo.needReverse?(e(),t("div",sn,g(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("fixD"in o?o.fixD:y(Eo))(o.positionInfo.amountBUsd,2):"<$0.01"),1)):(e(),t("div",on,g(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("fixD"in o?o.fixD:y(Eo))(o.positionInfo.amountAUsd,2):"<$0.01"),1))])]),s("div",nn,[s("div",en,[to(s("img",tn,null,512),[[i,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinA.address:o.positionInfo.coinB.address)]]),s("span",null,g(o.positionInfo.needReverse?o.positionInfo.coinA.symbol:o.positionInfo.coinB.symbol),1)]),s("div",an,[s("div",ln,g(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:y(H))(("decimalUi"in o?o.decimalUi:y(eo))(o.positionInfo.amountA,o.positionInfo.coinA.decimals)):("addCommom"in o?o.addCommom:y(H))(("decimalUi"in o?o.decimalUi:y(eo))(o.positionInfo.amountB,o.positionInfo.coinB.decimals))),1),o.positionInfo.needReverse?(e(),t("div",dn,g(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("addCommom"in o?o.addCommom:y(H))(("decimalUi"in o?o.decimalUi:y(eo))(o.positionInfo.amountAUsd,2)):"<$0.01"),1)):(e(),t("div",rn,g(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("addCommom"in o?o.addCommom:y(H))(("decimalUi"in o?o.decimalUi:y(eo))(o.positionInfo.amountBUsd,2)):"<$0.01"),1))])])])}const os=X(Qs,[["render",cn],["__scopeId","data-v-d01301e5"]]),un=K({components:{FarmsPositionAmountTips:os},props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const l=lo(),h=c(()=>l);console.log(o.positionInfo,"positionInfo#");const u=ro(),_=c(()=>u),a=Co("Sui"),i=jo("Sui"),d=W(!1),w=To();c(()=>w);const v=Ro(),{setIsShowSuccess:p,setIsShowRejected:f,setIsShowWaiting:k,setTransactionDesc:O,setTransactionTxid:n}=w,I=async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,n(""),O(`Stake ${o.positionInfo.name}`),k(!0);const b={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},R=o.positionInfo.farmsPoolId;try{const V=await i.farmsDeposit(b,R),G=await h.value.currentWallet.signAndExecuteTransactionBlock(V);console.log("0221###sui swap res###",G);let B=a.handleTx(G);if(B&&B.hash){n(B.hash),k(!1),p(!0);let Y={res:B.res,title:"Staked",hash:B.hash};a.showTransitionPending(Y),await a.watchTransaction(Y)&&setTimeout(()=>{u.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else k(!1),f(!0)}catch(V){console.log("farmsDeposit error",V),k(!1),f(!0),d.value=!1}},T=async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,n(""),O(`Unstake ${o.positionInfo.name}`),k(!0);const b=o.positionInfo.farmsPoolId,R=o.positionInfo.id;try{const V=await i.farmsWithdraw(b,R),G=await h.value.currentWallet.signAndExecuteTransactionBlock(V);console.log("0221###sui swap res###",G);let B=a.handleTx(G);if(console.log(B,"unStaketx##"),B&&B.hash){n(B.hash),k(!1),p(!0);let Y={res:B.res,title:"Unstaked",hash:B.hash};a.showTransitionPending(Y),await a.watchTransaction(Y)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),u.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else k(!1),f(!0)}catch(V){console.log("farmsDeposit error",V),k(!1),f(!0),d.value=!1}},no=async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,n(""),O("Claim rewards"),k(!0);const b={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const R=await i.harvestFarms(b),V=await h.value.currentWallet.signAndExecuteTransactionBlock(R);console.log("0221###sui swap res###",V);let G=a.handleTx(V);if(G&&G.hash){n(G.hash),k(!1),p(!0);let B={title:"Claim",res:G.res,hash:G.hash};a.showTransitionPending(B),await a.watchTransaction(B)&&setTimeout(()=>{u.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else k(!1),f(!0);d.value=!1}catch(R){console.log("farmsDeposit error",R),k(!1),f(!0),d.value=!1}},oo=c(()=>_.value.farmsRewardObj),E=_o(),Q=c(()=>E),L=c(()=>_.value.farmsLoadingObj);return{sFixD:z,stake:I,loading:d,unStake:T,router:v,claim:no,farmsRewardObj:oo,getCoinIcon:b=>{var R;return((R=Q.value.tokensObj[b])==null?void 0:R.logo_url)||Ao("/image/coins/sui-unknown.png")},toPositionDetails:b=>{console.log("toPositionDetails:",b),b.positionSource=="clmm"?v.push(`/new-position-detail?collect=${b.collectionName}&&token=${b.tokenName}&&address=${b.pool}&pos=${b.pos_object_id}`):v.push(`/new-position-detail?position_nft_id=${b.id}&positionSource=farming`)},farmsLoadingObj:L}}}),ss=""+globalThis.__publicAssetsURL("sui-image/position-active.png");const Fo=o=>(ao("data-v-4eb3a3a3"),o=o(),io(),o),mn={class:"farms-position-item"},pn=Fo(()=>s("thead",null,[s("tr",null,[s("th"),s("th",null,"Liquidity"),s("th",null,"Earnings"),s("th")])],-1)),fn={class:"position-info"},_n={key:0,class:"status-bg"},hn=Fo(()=>s("img",{src:ss,alt:""},null,-1)),vn=[hn],gn={class:"status-text"},bn={class:"name-range"},$n=Fo(()=>s("span",null,"Details",-1)),wn=Fo(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),yn=[$n,wn],In={class:"liquidity"},kn={class:"rewards-day-box"},Sn={alt:""},Pn={key:1,class:"rewards-day"},jn={class:"action-btn"};function Cn(o,l,h,u,_,a){const i=qo,d=os,w=wo,v=ds,p=Oo("image");return e(),t("div",mn,[s("table",null,[pn,s("tbody",null,[s("tr",null,[s("td",null,[s("div",fn,[s("div",{class:fo(["position-status",o.positionInfo.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionInfo.positionStatus=="Active"?(e(),t("div",_n,vn)):N("",!0),s("div",gn,g(o.positionInfo.positionStatus),1)],2),s("div",bn,[s("span",null,g(o.positionInfo.name),1),P(i,{"pool-info":o.positionInfo},null,8,["pool-info"])]),s("div",{class:"details",onClick:l[0]||(l[0]=f=>o.toPositionDetails(o.positionInfo))},yn)])]),s("td",null,[s("div",In,[P(d,{"position-info":o.positionInfo},null,8,["position-info"]),s("span",null,g(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("sFixD"in o?o.sFixD:y(z))(o.positionInfo.positionUSD,2)}`),1)])]),s("td",null,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(e(!0),t(J,{key:0},so(o.positionInfo.rewards,f=>(e(),t("div",{key:f.rewarder_type,class:"rewards-day"},[s("div",null,[s("div",kn,[to(s("img",Sn,null,512),[[p,o.getCoinIcon(f.rewarder_type)]]),s("span",null,g(f.rewarderAmount),1)])])]))),128)):(e(),t("div",Pn,"0"))]),s("td",null,[s("div",jn,[o.positionInfo.positionSource=="clmm"?(e(),t(J,{key:0},[o.positionInfo&&o.positionInfo.positionStatus!=="Active"?(e(),U(v,{key:0},{title:A(()=>[F("Farming rewards are only available for active positions.")]),default:A(()=>[P(w,{class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:A(()=>[F("Stake")]),_:1},8,["loading","disabled","onClick"])]),_:1})):(e(),U(w,{key:1,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:A(()=>[F("Stake")]),_:1},8,["loading","disabled","onClick"]))],64)):(e(),U(w,{key:1,class:"unstake-btn",onClick:o.unStake},{default:A(()=>[F("Unstake")]),_:1},8,["onClick"])),o.positionInfo.positionSource=="clmm"?(e(),U(w,{key:2,class:"claim-btn",disabled:!0},{default:A(()=>[F("↑ Claim")]),_:1})):(e(),U(w,{key:3,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0,onClick:o.claim},{default:A(()=>[F("↑ Claim")]),_:1},8,["disabled","onClick"]))])])])])])])}const ns=X(un,[["render",Cn],["__scopeId","data-v-4eb3a3a3"]]),On=K({props:{noDataImg:{type:String,default:""},desc:{type:String,default:""},type:{type:String,default:""},addLiquidityUrl:{type:String,default:""}},setup(){return{walletStore:lo()}}});const Tn={class:"no-data"},Un=["src"],Ln={key:0,class:"desc"};function Rn(o,l,h,u,_,a){const i=wo;return e(),t("div",Tn,[s("img",{src:o.noDataImg,alt:""},null,8,Un),o.desc?(e(),t("div",Ln,g(o.desc),1)):N("",!0),o.type=="addLiquidity"?(e(),U(i,{key:1,class:"add-liquidity-btn",onClick:l[0]||(l[0]=d=>o.addLiquidityUrl?o.$router.push(o.addLiquidityUrl):"")},{default:A(()=>[F("Add Liquidity")]),_:1})):N("",!0),o.type=="connectWallet"?(e(),U(i,{key:2,class:"add-liquidity-btn",onClick:l[1]||(l[1]=d=>o.walletStore.setIsShowWalletModal(!0))},{default:A(()=>[F("Connect Wallet")]),_:1})):N("",!0)])}const es=X(On,[["render",Rn],["__scopeId","data-v-130f9462"]]),An=K({components:{FarmsPositionItem:ns},props:{currentTab:{type:String,default:""},sortValue:{type:String,default:"APR"}},setup(o){const l=W({}),h=lo(),u=c(()=>h),_=ro(),a=c(()=>_),i=c(()=>(console.log(a.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?u.value.address?a.value.myFarmsPoolList:[]:o.currentTab=="Ended"?a.value.farmsPoolList.filter($=>$.status=="Ended"):a.value.farmsPoolList.filter($=>$.status=="Live"))),d=To(),w=c(()=>d),v=c(()=>w.value.addressLpTokens),p=W([]),f=$=>{const j=i.value.map(r=>{const{stable_farming:m}=v.value[r.clmm_pool_id];return{...r,apr:m.apr,tvl:m.tvl}});$=="APR"?p.value=j.sort((r,m)=>m.apr-r.apr):p.value=j.sort((r,m)=>m.tvl-r.tvl),console.log(p.value,"##farmsPoolList.value")};$o(()=>[i.value,o.sortValue,v.value],([$,j,r])=>{console.log(j,"sortValue326"),$&&$.length>0&&j&&r&&!q(r)&&f(j)},{immediate:!0});const k=$=>{l.value[$.clmm_pool_id]?l.value[$.clmm_pool_id]=!1:(l.value[$.clmm_pool_id]=!0,console.log("执行了吗"),_.getPositionByPool(u.value.address,$.clmm_pool_id,$.id))},O=c(()=>a.value.farmsPositionObj),n=c(()=>(console.log(a.value.farmsLoadingObj,"##farms.value.farmsLoadingObj"),a.value.farmsLoadingObj)),I=c(()=>a.value.farmsUserUsd),T=c(()=>(console.log(a.value.farmsRewardObj,"##farmsRewardObj"),a.value.farmsRewardObj)),no=c(()=>a.value.farmsPositionList),oo=c(()=>a.value.farmsAllPositionLoading),E=Ro(),Q=jo("Sui"),L=Co("Sui"),{setIsShowSuccess:D,setIsShowRejected:M,setIsShowWaiting:b,setTransactionDesc:R,setTransactionTxid:V}=d,G=async $=>{console.log(no.value,"farmsRewardObj###");const j=[];no.value.forEach(r=>{console.log($,r,"#position"),$==r.clmm_pool_id&&j.push({pool_id:r.pool_id,position_nft_id:r.id})}),console.log(JSON.stringify(j),"##params"),V(""),R("Claim rewards"),b(!0);try{const r=await Q.batchHarvest(j),m=await u.value.currentWallet.signAndExecuteTransactionBlock(r);console.log("0221###sui swap res###",m);let S=L.handleTx(m);if(S&&S.hash){V(S.hash),b(!1),D(!0);let C={res:S.res,title:"Claim",hash:S.hash};L.showTransitionPending(C),await L.watchTransaction(C)&&setTimeout(()=>{_.getFarmsPoolList()},4e3)}else b(!1),M(!0)}catch(r){console.log("Claim all error",r),b(!1),M(!0)}},B=_o(),Y=c(()=>B),ho=c(()=>(console.log(Y.value.poolsObj,"##pools.value.poolsObj"),Y.value.poolsObj)),yo=c(()=>Y.value.tokensObj),uo=W({}),No=($,j)=>$&&j?Go.plus(go($),go(j)):$||0,mo=$=>{let j=0;return $&&$.forEach(r=>{j+=go(String(r))}),String(eo(String(j),2))},Bo=($,j,r)=>{console.log($,"poolsObj##473"),Object.keys($).forEach(m=>{var Z,po,vo;const S=(Z=j[m])==null?void 0:Z.apr_7day,C=No((po=j[m])==null?void 0:po.apr_7day,mo((vo=j[m])==null?void 0:vo.rewarder_apr));uo.value[m]={...$[m],apr:String(S).replace("%",""),aprTotal:C},uo.value[m].rewards=[],$[m].rewarderInfo.forEach((Uo,Io)=>{var So,Po;const Lo=(So=r[Uo.coinAddress])==null?void 0:So.symbol,ko=(Po=j[m])==null?void 0:Po.rewarder_apr[Io];console.log(Lo,ko,"getRewardInfo:"),console.log($[m],"## poolsObj[key]"),uo.value[m].rewards.push({symbol:Lo,rewarderApr:ko,rewarder_display:$[m][`rewarder_display${Io+1}`]})})}),console.log(uo.value,"##rewardInfoObj")};return $o(()=>[ho.value,v.value,yo.value],([$,j,r])=>{$&&!q($)&&j&&!q(j)&&r&&!q(r)&&Bo($,j,r)},{immediate:!0}),console.log(v.value,"addressLpTokens:"),{wallet:u,walletStore:h,farmsPoolList:p,openMore:k,openMoreObj:l,checkNullObj:q,router:E,farmsPositionObj:O,farmsLoadingObj:n,farmsUserUsd:I,sFixD:z,farmsRewardObj:T,claimPoolReward:G,farmsAllPositionLoading:oo,addCommom:H,addressLpTokens:v,poolsObj:ho,rewardInfoObj:uo}}});const co=o=>(ao("data-v-62f7cd4c"),o=o(),io(),o),Fn={class:"farms-table"},Dn=co(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")]),s("tr",{style:{height:"4px"}})],-1)),Nn={key:0},Bn=["onClick"],En={class:"staked-tvl"},Mn={class:"apr"},qn={class:"apr-hover-box"},Wn={class:"farms-reward-box"},Vn={key:0,class:"my-staked"},Hn={key:0,class:"my-staked-loading"},Jn={key:0,class:"position-usd"},zn={key:1,class:"position-usd"},Qn={key:2,class:"position-usd"},Gn={key:3,class:"position-num"},Kn={key:1,class:"my-staked"},Xn=co(()=>s("div",{class:"position-usd"},"--",-1)),Yn=[Xn],Zn={class:"earned"},xn={key:0,class:"my-staked-loading"},oe={key:0,class:"ratio-bg"},se=co(()=>s("div",{class:"ratio"},null,-1)),ne=[se],ee={key:1},te={key:2},ae={key:3},ie={key:2},le={class:"actions"},re={class:"actions-btn"},de=["onClick"],ce=co(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),ue=[ce],me={colspan:"7",style:{padding:"0 16px 16px"}},pe={key:0,class:"farm-position-list"},fe={key:0,class:"farm-position-loading"},_e={key:1,class:"farm-position-list"},he=co(()=>s("tr",{style:{height:"8px"}},null,-1)),ve={key:1},ge={colspan:"7"},be={key:0,class:"no-data"},$e=co(()=>s("img",{src:Ko,alt:""},null,-1)),we={key:1,class:"no-data"},ye=co(()=>s("img",{src:Xo,alt:""},null,-1)),Ie=co(()=>s("span",null,"No farms found",-1)),ke=[ye,Ie];function Se(o,l,h,u,_,a){const i=Zo,d=Qo,w=xo,v=Mo,p=wo,f=cs,k=ns,O=es;return e(),t("div",Fn,[s("table",null,[Dn,o.farmsPoolList&&o.farmsPoolList.length>0?(e(),t("tbody",Nn,[(e(!0),t(J,null,so(o.farmsPoolList,n=>(e(),t(J,{key:n.id},[s("tr",{onClick:I=>o.openMore(n)},[s("td",null,[P(i,{"pool-info":n},null,8,["pool-info"])]),s("td",null,[s("div",En," $"+g(("addCommom"in o?o.addCommom:y(H))(n.stable_farming.tvl,2)),1)]),s("td",null,[s("div",Mn,[s("div",qn,[!("checkNullObj"in o?o.checkNullObj:y(q))(o.rewardInfoObj)&&o.rewardInfoObj[n.clmm_pool_id]?(e(),U(d,{key:0,"l-item":o.rewardInfoObj[n.clmm_pool_id],"rewarder-info":o.rewardInfoObj[n.clmm_pool_id].rewards,class:"noHover apr-hover-con"},null,8,["l-item","rewarder-info"])):N("",!0)]),s("span",null,g(n.stable_farming.apr*100>0&&n.stable_farming.apr*100<.01?"<0.01%":`${("sFixD"in o?o.sFixD:y(z))(n.stable_farming.apr*100,2)}%`),1)])]),s("td",null,[s("div",Wn,[(e(!0),t(J,null,so(n.rewarders,I=>(e(),U(w,{key:I.reward_coin,"reward-info":I,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("td",null,[o.wallet.address?(e(),t("div",Vn,[o.farmsLoadingObj[n.clmm_pool_id]||o.farmsAllPositionLoading?(e(),t("div",Hn,[P(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):(e(),t(J,{key:1},[o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].amount>0&&o.farmsUserUsd[n.clmm_pool_id].amount>.01?(e(),t("div",Jn," $"+g(("sFixD"in o?o.sFixD:y(z))(o.farmsUserUsd[n.clmm_pool_id].amount,2)),1)):o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].amount>0&&o.farmsUserUsd[n.clmm_pool_id].amount<.01?(e(),t("div",zn," <$0.01 ")):(e(),t("div",Qn,"0")),o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].positionNum?(e(),t("div",Gn,g(o.farmsUserUsd[n.clmm_pool_id].positionNum)+" "+g(o.farmsUserUsd[n.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):N("",!0)],64))])):(e(),t("div",Kn,Yn))]),s("td",null,[s("div",Zn,[o.farmsLoadingObj[n.clmm_pool_id]||o.farmsAllPositionLoading?(e(),t("div",xn,[P(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[n.clmm_pool_id]&&o.farmsRewardObj[n.clmm_pool_id].amountUsd?(e(),t(J,{key:1},[o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[n.clmm_pool_id]&&o.farmsRewardObj[n.clmm_pool_id].amountUsd>0?(e(),t("div",oe,ne)):N("",!0),Number(o.farmsRewardObj[n.clmm_pool_id].amountUsd)>.01?(e(),t("span",ee,"$"+g(("addCommom"in o?o.addCommom:y(H))(("sFixD"in o?o.sFixD:y(z))(o.farmsRewardObj[n.clmm_pool_id].amountUsd||0,2))),1)):Number(o.farmsRewardObj[n.clmm_pool_id].amountUsd)>0&&Number(o.farmsRewardObj[n.clmm_pool_id].amountUsd)<.01?(e(),t("span",te,"<$0.01")):(e(),t("span",ae,"0"))],64)):(e(),t("span",ie,"0"))])]),s("td",null,[s("div",le,[s("div",re,[P(p,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[n.clmm_pool_id]||o.farmsRewardObj[n.clmm_pool_id].amountUsd<=0,onClick:bo(I=>o.claimPoolReward(n.clmm_pool_id),["stop"])},{default:A(()=>[F("Claim")]),_:2},1032,["disabled","onClick"]),P(p,{class:"add-liquidity-btn",onClick:bo(I=>o.router.push(`/liquidity/deposit?poolAddress=${n.clmm_pool_id}`),["stop"])},{default:A(()=>[F("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more",onClick:bo(I=>o.openMore(n),["stop"])},[(e(),t("svg",{class:fo(["arrow-icon",o.openMoreObj[n.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},ue,2))],8,de)])])],8,Bn),to(s("tr",null,[s("td",me,[o.wallet.address?(e(),t("div",pe,[!("checkNullObj"in o?o.checkNullObj:y(q))(o.farmsLoadingObj)&&o.farmsLoadingObj[n.clmm_pool_id]||o.farmsAllPositionLoading?(e(),t("div",fe,[P(f)])):o.farmsPositionObj[n.clmm_pool_id]&&o.farmsPositionObj[n.clmm_pool_id].length>0?(e(!0),t(J,{key:1},so(o.farmsPositionObj[n.clmm_pool_id],I=>(e(),U(k,{key:I.clmm_position_id,"current-tab":o.currentTab,"position-info":{...I,clmm_pool_id:n.clmm_pool_id}},null,8,["current-tab","position-info"]))),128)):(e(),U(O,{key:2,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${n.clmm_pool_id}`},null,8,["add-liquidity-url"]))])):(e(),t("div",_e,[P(O,{"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"})]))])],512),[[Jo,!("checkNullObj"in o?o.checkNullObj:y(q))(o.openMoreObj)&&o.openMoreObj[n==null?void 0:n.clmm_pool_id]]]),he],64))),128))])):(e(),t("tbody",ve,[s("tr",null,[s("td",ge,[!o.wallet.connected&&o.currentTab=="My Farms"?(e(),t("div",be,[$e,P(p,{class:"connect-wallet",onClick:l[0]||(l[0]=n=>o.wallet.setIsShowWalletModal(!0))},{default:A(()=>[F(g(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(e(),t("div",we,ke)):N("",!0)])])]))])])}const ts=X(An,[["render",Se],["__scopeId","data-v-62f7cd4c"]]),Pe=K({props:{currentTab:{type:String,default:""}},setup(){const o=W(!1),l=lo(),h=c(()=>l),u=ro(),_=c(()=>u),a=c(()=>_.value.farmsPoolList);return{isShowMore:o,wallet:h,walletStore:l,farmsPoolList:a}}});const as=o=>(ao("data-v-d863b1fb"),o=o(),io(),o),je={class:"farms-table"},Ce=as(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")]),s("tr",{style:{height:"4px",background:"unset"}})],-1)),Oe={class:"pool"},Te={class:"staked-tvl"},Ue={class:"apr"},Le={class:"my-staked"},Re={class:"actions"},Ae={class:"actions"},Fe={class:"actions"},De=as(()=>s("tr",{style:{height:"8px",background:"unset !important"}},null,-1));function Ne(o,l,h,u,_,a){const i=Mo;return e(),t("div",je,[s("table",null,[Ce,s("tbody",null,[(e(),t(J,null,so(4,(d,w)=>(e(),t(J,{key:w},[s("tr",null,[s("td",null,[s("div",Oe,[P(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),P(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Te,[P(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Ue,[s("span",null,[P(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),s("td",null,[s("div",Le,[P(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Re,[P(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Ae,[P(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Fe,[P(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),De],64))),64))])])])}const Be=X(Pe,[["render",Ne],["__scopeId","data-v-d863b1fb"]]),Ee=K({props:{positionStatus:{type:String,default:"Active"},positionInfo:{type:Object,default:()=>({})}},setup(){return{}}});const Me=o=>(ao("data-v-882c76c0"),o=o(),io(),o),qe={class:"position-info"},We={key:0,class:"status-bg"},Ve=Me(()=>s("img",{src:ss,alt:""},null,-1)),He=[Ve],Je={class:"status-text"},ze={class:"name-range"};function Qe(o,l,h,u,_,a){const i=qo;return e(),t("div",qe,[s("div",{class:fo(["position-status",o.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionStatus=="Active"?(e(),t("div",We,He)):N("",!0),s("div",Je,g(o.positionStatus),1)],2),s("div",ze,[s("span",null,g(o.positionInfo.name),1),o.positionStatus=="Active"?(e(),U(i,{key:0,"pool-info":o.positionInfo},null,8,["pool-info"])):N("",!0)])])}const Ge=X(Ee,[["render",Qe],["__scopeId","data-v-882c76c0"]]),Ke=K({props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const l=_o(),h=c(()=>l),u=Ro(),_=Q=>{var L;return((L=h.value.tokensObj[Q])==null?void 0:L.logo_url)||Ao("/image/coins/sui-unknown.png")},a=Co("Sui"),i=jo("Sui"),d=W(!1),w=To(),v=lo(),p=ro(),f=c(()=>v),{setIsShowSuccess:k,setIsShowRejected:O,setIsShowWaiting:n,setTransactionDesc:I,setTransactionTxid:T}=w;return{getCoinIcon:_,router:u,claim:async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,T(""),I("Claim rewards"),n(!0);const Q={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const L=await i.harvestFarms(Q),D=await f.value.currentWallet.signAndExecuteTransactionBlock(L);console.log("0221###sui swap res###",D);let M=a.handleTx(D);if(M&&M.hash){T(M.hash),n(!1),k(!0);let b={title:"Claim",res:M.res,hash:M.hash};a.showTransitionPending(b),await a.watchTransaction(b)&&setTimeout(()=>{p.getPositionByPool(f.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else n(!1),O(!0);d.value=!1}catch(L){console.log("farmsDeposit error",L),n(!1),O(!0),d.value=!1}},unStake:async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,T(""),I(`Unstake ${o.positionInfo.name}`),n(!0);const Q=o.positionInfo.farmsPoolId,L=o.positionInfo.id;try{const D=await i.farmsWithdraw(Q,L),M=await f.value.currentWallet.signAndExecuteTransactionBlock(D);console.log("0221###sui swap res###",M);let b=a.handleTx(M);if(b&&b.hash){T(b.hash),n(!1),k(!0);let R={res:b.res,title:"Unstaked",hash:b.hash};a.showTransitionPending(R),await a.watchTransaction(R)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),p.getPositionByPool(f.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else n(!1),O(!0)}catch(D){console.log("farmsDeposit error",D),n(!1),O(!0),d.value=!1}},loading:d,stake:async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,T(""),I(`Stake ${o.positionInfo.name}`),n(!0);const Q={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},L=o.positionInfo.farmsPoolId;try{const D=await i.farmsDeposit(Q,L),M=await f.value.currentWallet.signAndExecuteTransactionBlock(D);console.log("0221###sui swap res###",M);let b=a.handleTx(M);if(b&&b.hash){T(b.hash),n(!1),k(!0);let R={res:b.res,title:"Staked",hash:b.hash};a.showTransitionPending(R),await a.watchTransaction(R)&&setTimeout(()=>{p.getPositionByPool(f.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else n(!1),O(!0)}catch(D){console.log("farmsDeposit error",D),n(!1),O(!0),d.value=!1}},sFixD:z}}});const is=o=>(ao("data-v-371272e0"),o=o(),io(),o),Xe={class:"farms-position"},Ye={class:"farms-position-box"},Ze={class:"position-info-block"},xe={class:"block-item"},ot=is(()=>s("div",{class:"leabl"},"Liquidity",-1)),st={class:"text"},nt={class:"earnings"},et={class:"block-item"},tt=is(()=>s("div",{class:"leabl"},"Earnings",-1)),at={class:"text"},it={key:0},lt={alt:""},rt={key:1,class:"rewards-day"},dt={class:"unstake-btn-box"};function ct(o,l,h,u,_,a){const i=Ge,d=wo,w=Oo("image");return e(),t("div",Xe,[s("div",Ye,[P(i,{"position-info":o.positionInfo},null,8,["position-info"])]),s("div",Ze,[s("div",xe,[ot,s("div",st,g(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("sFixD"in o?o.sFixD:y(z))(o.positionInfo.positionUSD,2)}`),1)])]),s("div",nt,[s("div",et,[tt,s("div",at,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(e(!0),t(J,{key:0},so(o.positionInfo.rewards,v=>(e(),t("div",{key:v.rewarder_type,class:"rewards-day"},[v.rewarderAmount>0?(e(),t("div",it,[to(s("img",lt,null,512),[[w,o.getCoinIcon(v.rewarder_type)]]),s("span",null,g(v.rewarderAmount),1)])):N("",!0)]))),128)):(e(),t("div",rt,"--"))])]),o.positionInfo.positionSource=="clmm"?(e(),U(d,{key:0,class:"add-liquidity-btn claim-btn",onClick:l[0]||(l[0]=v=>o.router.push(`/new-position-detail?collect=${o.positionInfo.collectionName}&&token=${o.positionInfo.tokenName}&&address=${o.positionInfo.pool}&pos=${o.positionInfo.pos_object_id}`))},{default:A(()=>[F("+ Add liquidity")]),_:1})):(e(),U(d,{key:1,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0||o.currentTab=="Ended",onClick:o.claim},{default:A(()=>[F("↑ Claim")]),_:1},8,["disabled","onClick"]))]),s("div",dt,[s("div",null,[o.positionInfo.positionSource=="clmm"?(e(),U(d,{key:0,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:A(()=>[F("Stake")]),_:1},8,["loading","disabled","onClick"])):(e(),U(d,{key:1,class:"unstake-btn",onClick:o.unStake},{default:A(()=>[F("Unstake")]),_:1},8,["onClick"]))])])])}const ls=X(Ke,[["render",ct],["__scopeId","data-v-371272e0"]]),ut=K({components:{FarmsH5Position:ls},props:{currentTab:{type:String,default:""},sortValue:{type:String,default:"APR"}},setup(o){const l=W(!1),h=lo(),u=c(()=>h),_=ro(),a=c(()=>_),i=c(()=>(console.log(a.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?u.value.address?a.value.myFarmsPoolList:[]:o.currentTab=="Ended"?a.value.farmsPoolList.filter(r=>r.status=="Ended"):a.value.farmsPoolList.filter(r=>r.status=="Live"))),d=W([]),w=To(),v=c(()=>w),p=c(()=>v.value.addressLpTokens),f=r=>{const m=i.value.map(S=>{const{stable_farming:C}=p.value[S.clmm_pool_id];return{...S,apr:C.apr,tvl:C.tvl}});r=="APR"?d.value=m.sort((S,C)=>C.apr-S.apr):d.value=m.sort((S,C)=>C.tvl-S.tvl),console.log(d.value,"##farmsPoolList.value")};$o(()=>[i.value,o.sortValue,p.value],([r,m,S])=>{console.log(m,"sortValue326"),r&&r.length>0&&m&&S&&!q(S)&&f(m)},{immediate:!0});const k=c(()=>a.value.farmsUserUsd),O=c(()=>(console.log(a.value.farmsRewardObj,"##farmsRewardObj"),a.value.farmsRewardObj)),n=c(()=>a.value.farmsPositionObj),I=c(()=>a.value.farmsPoolListLoading),T=c(()=>a.value.farmsPositionList),no=c(()=>(console.log(a.value.farmsLoadingObj,"##farms.value.farmsLoadingObj"),a.value.farmsLoadingObj)),oo=c(()=>a.value.farmsAllPositionLoading),E=W({}),Q=r=>{E.value[r.clmm_pool_id]?E.value[r.clmm_pool_id]=!1:(E.value[r.clmm_pool_id]=!0,console.log("执行了吗"),_.getPositionByPool(u.value.address,r.clmm_pool_id,r.id))},L=jo("Sui"),D=Co("Sui"),{setIsShowSuccess:M,setIsShowRejected:b,setIsShowWaiting:R,setTransactionDesc:V,setTransactionTxid:G}=w,B=async r=>{console.log(T.value,"farmsRewardObj###");const m=[];T.value.forEach(S=>{console.log(r,S,"#position"),r==S.clmm_pool_id&&m.push({pool_id:S.pool_id,position_nft_id:S.id})}),console.log(JSON.stringify(m),"##params"),G(""),V("Claim rewards"),R(!0);try{const S=await L.batchHarvest(m),C=await u.value.currentWallet.signAndExecuteTransactionBlock(S);console.log("0221###sui swap res###",C);let Z=D.handleTx(C);if(Z&&Z.hash){G(Z.hash),R(!1),M(!0);let po={res:Z.res,title:"Claim",hash:Z.hash};D.showTransitionPending(po),await D.watchTransaction(po)&&setTimeout(()=>{_.getFarmsPoolList()},4e3)}else R(!1),b(!0)}catch(S){console.log("Claim all error",S),R(!1),b(!0)}},Y=Ro(),ho=_o(),yo=c(()=>ho),uo=c(()=>(console.log(yo.value.poolsObj,"##pools.value.poolsObj"),yo.value.poolsObj)),No=c(()=>yo.value.tokensObj),mo=W({}),Bo=(r,m)=>r&&m?Go.plus(go(r),go(m)):r||0,$=r=>{let m=0;return r&&r.forEach(S=>{m+=go(String(S))}),String(eo(String(m),2))},j=(r,m,S)=>{console.log(r,"poolsObj##473"),Object.keys(r).forEach(C=>{var vo,Uo,Io;const Z=(vo=m[C])==null?void 0:vo.apr_7day,po=Bo((Uo=m[C])==null?void 0:Uo.apr_7day,$((Io=m[C])==null?void 0:Io.rewarder_apr));mo.value[C]={...r[C],apr:String(Z).replace("%",""),aprTotal:po},mo.value[C].rewards=[],r[C].rewarderInfo.forEach((Lo,ko)=>{var Vo,Ho;const So=(Vo=S[Lo.coinAddress])==null?void 0:Vo.symbol,Po=(Ho=m[C])==null?void 0:Ho.rewarder_apr[ko];console.log(So,Po,"getRewardInfo:"),console.log(r[C],"## poolsObj[key]"),mo.value[C].rewards.push({symbol:So,rewarderApr:Po,rewarder_display:r[C][`rewarder_display${ko+1}`]})})}),console.log(mo.value,"##rewardInfoObj")};return $o(()=>[uo.value,p.value,No.value],([r,m,S])=>{r&&!q(r)&&m&&!q(m)&&S&&!q(S)&&j(r,m,S)},{immediate:!0}),{isShowMore:l,wallet:u,farmsPoolList:d,farmsUserUsd:k,sFixD:z,farmsRewardObj:O,farmsPositionObj:n,openMore:Q,checkNullObj:q,openMoreObj:E,farmsPoolListLoading:I,claimPoolReward:B,router:Y,addCommom:H,farmsLoadingObj:no,farmsAllPositionLoading:oo,addressLpTokens:p,rewardInfoObj:mo}}});const x=o=>(ao("data-v-7b462608"),o=o(),io(),o),mt={key:0,class:"farms-pool-list"},pt={class:"farms-block"},ft={class:"item-block"},_t=x(()=>s("div",{class:"leabl"},"Staked TVL",-1)),ht={class:"text"},vt={class:"item-block apr"},gt=x(()=>s("div",{class:"leabl"},"APR",-1)),bt={class:"text"},$t={class:"apr-hover-box"},wt={class:"item-block"},yt=x(()=>s("div",{class:"leabl"},"Rewards / day",-1)),It={class:"text"},kt={class:"item-block my-staked"},St=x(()=>s("div",{class:"leabl"},"My Staked",-1)),Pt={key:0,class:"text"},jt={class:"position-usd"},Ct={key:0,class:"position-num"},Ot={key:1,class:"text"},Tt=x(()=>s("div",{class:"position-usd"},"--",-1)),Ut=[Tt],Lt={class:"item-block"},Rt=x(()=>s("div",{class:"leabl"},"Earned",-1)),At={class:"text earned-box"},Ft={class:"earned"},Dt={key:0,class:"my-staked-loading"},Nt=x(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),Bt={key:0},Et={key:1},Mt={key:2},qt={key:2},Wt={class:"add-liquidity-box"},Vt=["onClick"],Ht=x(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Jt=[Ht],zt={key:1,class:"upgrade-loading"},Qt={key:2,class:"no-data"},Gt=x(()=>s("img",{src:Ko,alt:""},null,-1)),Kt={key:3,class:"no-data"},Xt=x(()=>s("img",{src:Xo,alt:""},null,-1)),Yt=x(()=>s("span",null,"No Data",-1)),Zt=[Xt,Yt];function xt(o,l,h,u,_,a){const i=Zo,d=Qo,w=xo,v=Mo,p=wo,f=ls,k=es,O=ms;return e(),t(J,null,[o.farmsPoolListLoading?o.farmsPoolListLoading?(e(),t("div",zt,[P(O,{type:"poolsCard",loading:!0})])):N("",!0):(e(),t("div",mt,[(e(!0),t(J,null,so(o.farmsPoolList,n=>(e(),t("div",{key:n.id,class:"farms-item"},[P(i,{"pool-info":n},null,8,["pool-info"]),s("div",pt,[s("div",ft,[_t,s("div",ht,"$"+g(("addCommom"in o?o.addCommom:y(H))(n.stable_farming.tvl,2)),1)]),s("div",vt,[gt,s("div",bt,[F(g(n.stable_farming.apr*100>0&&n.stable_farming.apr*100<.01?"<0.01%":("sFixD"in o?o.sFixD:y(z))(n.stable_farming.apr*100,2))+"% ",1),s("div",$t,[!("checkNullObj"in o?o.checkNullObj:y(q))(o.rewardInfoObj)&&o.rewardInfoObj[n.clmm_pool_id]?(e(),U(d,{key:0,"l-item":o.rewardInfoObj[n.clmm_pool_id],"rewarder-info":o.rewardInfoObj[n.clmm_pool_id].rewards,class:"noHover apr-hover-con"},null,8,["l-item","rewarder-info"])):N("",!0)])])]),s("div",wt,[yt,s("div",It,[(e(!0),t(J,null,so(n.rewarders,I=>(e(),U(w,{key:I.reward_coin,"reward-info":I,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("div",kt,[St,o.wallet.address?(e(),t("div",Pt,[s("div",jt," $"+g(("sFixD"in o?o.sFixD:y(z))(o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[n.clmm_pool_id]&&o.farmsUserUsd[n.clmm_pool_id].positionNum?(e(),t("div",Ct,g(o.farmsUserUsd[n.clmm_pool_id].positionNum)+" "+g(o.farmsUserUsd[n.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):N("",!0)])):(e(),t("div",Ot,Ut))]),s("div",Lt,[Rt,s("div",At,[s("div",Ft,[o.farmsLoadingObj[n.clmm_pool_id]||o.farmsAllPositionLoading?(e(),t("div",Dt,[P(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[n.clmm_pool_id]&&o.farmsRewardObj[n.clmm_pool_id].amountUsd?(e(),t(J,{key:1},[Nt,o.farmsRewardObj[n.clmm_pool_id].amountUsd>.01?(e(),t("span",Bt,"$"+g(("addCommom"in o?o.addCommom:y(H))(("sFixD"in o?o.sFixD:y(z))(o.farmsRewardObj[n.clmm_pool_id].amountUsd||0,2))),1)):o.farmsRewardObj[n.clmm_pool_id].amountUsd>0&&o.farmsRewardObj[n.clmm_pool_id].amountUsd<.01?(e(),t("span",Et,"<$0.01")):(e(),t("span",Mt,"0"))],64)):(e(),t("span",qt,"--"))]),P(p,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[n.clmm_pool_id]||o.farmsRewardObj[n.clmm_pool_id].amountUsd<=0,onClick:bo(I=>o.claimPoolReward(n.clmm_pool_id),["stop"])},{default:A(()=>[F("Claim")]),_:2},1032,["disabled","onClick"])])])]),s("div",Wt,[P(p,{class:"add-liquidity-btn",onClick:bo(I=>o.router.push(`/liquidity/deposit?poolAddress=${n.clmm_pool_id}`),["stop"])},{default:A(()=>[F("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more-btn",onClick:I=>o.openMore(n)},[(e(),t("svg",{class:fo(["arrow-icon",!("checkNullObj"in o?o.checkNullObj:y(q))(o.openMoreObj)&&o.openMoreObj[n==null?void 0:n.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},Jt,2))],8,Vt),(e(!0),t(J,null,so(o.farmsPositionObj[n.clmm_pool_id],I=>to((e(),U(f,{key:I.clmm_pool_id,"current-tab":o.currentTab,"position-info":{...I,clmm_pool_id:n.clmm_pool_id}},null,8,["current-tab","position-info"])),[[Jo,!("checkNullObj"in o?o.checkNullObj:y(q))(o.openMoreObj)&&o.openMoreObj[n==null?void 0:n.clmm_pool_id]]])),128)),o.farmsPositionObj&&o.farmsPositionObj[n.clmm_pool_id]&&o.farmsPositionObj[n.clmm_pool_id].length==0?(e(),U(k,{key:0,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${n.clmm_pool_id}`},null,8,["add-liquidity-url"])):N("",!0),o.wallet.address?N("",!0):(e(),U(k,{key:1,"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"},null,8,["no-data-img"]))]))),128))])),!o.wallet.connected&&o.currentTab=="My Farms"?(e(),t("div",Qt,[Gt,P(p,{class:"connect-wallet",onClick:l[0]||(l[0]=n=>o.wallet.setIsShowWalletModal(!0))},{default:A(()=>[F(g(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(e(),t("div",Kt,Zt)):N("",!0)],64)}const rs=X(ut,[["render",xt],["__scopeId","data-v-7b462608"]]),oa=K({setup(o,l){const h=["Live","Ended","My Farms"],u=W("Live"),_=W("APR"),a=W(!1),i=W(!1),d=ro(),w=c(()=>d),v=lo(),p=c(()=>v),f=c(()=>u.value=="My Farms"?p.value.address?w.value.myFarmsPoolList:[]:u.value=="Ended"?w.value.farmsPoolList.filter(T=>T.status=="Ended"):w.value.farmsPoolList.filter(T=>T.status=="Live")),k=T=>f.value.length,O=()=>{a.value=!0,d.getFarmsPoolList(),setTimeout(()=>{a.value=!1},1e3)},n=T=>{u.value=T,l.emit("changeTab",T)},I=T=>{_.value=T,l.emit("changeSortValue",T)};return zo(()=>{document.addEventListener("click",()=>{i.value=!1})}),{isOpenList:i,tabList:h,currentTab:u,sortValue:_,clickRefresh:O,isRefresh:a,farmsPoolList:f,getListNum:k,changeTab:n,changeSortValue:I}}});const Do=o=>(ao("data-v-835ab7a6"),o=o(),io(),o),sa={class:"farms-tab"},na={class:"tab-left"},ea=["onClick"],ta={key:0},aa={class:"tab-right"},ia={class:"sort-select"},la=Do(()=>s("div",null,"Sort by",-1)),ra=Do(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),da=Do(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),ca=[da],ua={key:0,class:"sort-list"},ma={class:"refresh"},pa=Do(()=>s("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),fa=[pa];function _a(o,l,h,u,_,a){return e(),t("div",sa,[s("div",na,[(e(!0),t(J,null,so(o.tabList,i=>(e(),t("div",{key:i,class:fo(["tab-item",o.currentTab==i?"tab-item-active":""]),onClick:d=>o.changeTab(i)},[s("span",null,g(i=="Ended"?"Finished":i),1),o.currentTab==i&&o.getListNum(i)?(e(),t("p",ta,g(o.getListNum(i)),1)):N("",!0)],10,ea))),128))]),s("div",aa,[s("div",ia,[s("div",{class:"sort-select-box",onClick:l[0]||(l[0]=bo(i=>o.isOpenList=!o.isOpenList,["stop"]))},[la,s("div",null,[s("span",null,g(o.sortValue),1),ra,(e(),t("svg",{class:fo(["arrow-icon",o.isOpenList?"arrow-icon-active":""]),"aria-hidden":"true"},ca,2))])]),o.isOpenList?(e(),t("div",ua,[s("div",{class:"sort-item",onClick:l[1]||(l[1]=i=>o.changeSortValue("APR"))},"APR"),s("div",{class:"sort-item",onClick:l[2]||(l[2]=i=>o.changeSortValue("TVL"))},"TVL")])):N("",!0)]),s("div",ma,[(e(),t("svg",{"aria-hidden":"true",class:fo(["refresh-icon",o.isRefresh?"refreshing":""]),onClick:l[3]||(l[3]=(...i)=>o.clickRefresh&&o.clickRefresh(...i))},fa,2))])])])}const ha=X(oa,[["render",_a],["__scopeId","data-v-835ab7a6"]]),va=K({components:{FarmsBanner:Yo,FarmsTabs:ha,FarmsTable:ts,FarmsH5List:rs},setup(){const o=ro(),l=c(()=>o),h=c(()=>l.value.farmsPoolListLoading),u=W("APR"),_=c(()=>l.value.farmsPoolList),a=lo(),i=c(()=>a),d=_o(),w=c(()=>d);$o(()=>[i.value.address,_.value,w.value.tokensObj,w.value.RATES],([p,f,k,O])=>{p&&f.length>0&&!q(k)&&!q(O)&&o.getPositionByAllPool(p)},{immediate:!0}),zo(()=>{o.getFarmsPoolList()}),$o(()=>i.value.address,p=>{p||o.logOut()},{immediate:!0});const v=W("Live");return{farmsPoolListLoading:h,currentTab:v,sortValue:u}}});const ga={class:"farm-container"},ba={class:"farm-container-center"};function $a(o,l,h,u,_,a){const i=Yo,d=us("FarmsTabs"),w=ts,v=Be,p=rs;return e(),t("div",ga,[P(i),s("div",ba,[P(d,{onChangeTab:l[0]||(l[0]=f=>{o.currentTab=f}),onChangeSortValue:l[1]||(l[1]=f=>{o.sortValue=f})}),o.farmsPoolListLoading?(e(),U(v,{key:1,"current-tab":o.currentTab},null,8,["current-tab"])):(e(),U(w,{key:0,"current-tab":o.currentTab,"sort-value":o.sortValue},null,8,["current-tab","sort-value"])),P(p,{"current-tab":o.currentTab,"sort-value":o.sortValue},null,8,["current-tab","sort-value"])])])}const Ea=X(va,[["render",$a],["__scopeId","data-v-da31e0f3"]]);export{Ea as default};
