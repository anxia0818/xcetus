import{b as ht,e as Wt,n as mt,d as ge,u as Lt,c as Oe,s as vt,a as Xe,T as Ct,p as _t,f as Ue,h as Pt}from"./pool.e39ccd2c.js";import{a as tt,r as F,l as $,E as At,H as $e,e as ot,o as B,f as Q,c as Ge,s as ee,h as r,q as Nt,J as Zt,K as ft,t as se,u as fe,F as rt,L as kt,p as qt,k as Mt,x as $t,y as wt,G as Bt,m as Gt,C as Tt,A as ut,i as ze,w as gt,j as Rt,O as Kt,b as Jt,B as Qt}from"./entry.9b70370c.js";/* empty css              */import{s as at,m as Yt,l as Vt,b as eo,a as to,_ as oo}from"./transform.b2106d1a.js";import{D as a}from"./decimal.0e8aa3f1.js";import{u as yt,a as no}from"./sha256.160e359b.js";import{d as Ot,_ as Ft,c as Ut,a as zt,b as io}from"./new-liquidity-title.821d3c10.js";import{i as pt}from"./import-icon.de3e6c66.js";/* empty css              */import"./decimal.633e31ee.js";import{positionError as Ye,fromCoin as h,toCoin as b,tickList as Qe,direction as Ae,minPrice as O,maxPrice as T,currentPriceTab as D,currentPrice as lt,currentPriceReverse as bt,defaultMinPrice as ct,defaultMaxPrice as dt,toggle as jt,isInputTotalAmount as xe,priceConfigObj as Ke,fromCoinAmount as w,toCoinAmount as y,fixedFromCoin as ye,resetTickList as St,resetData as ao}from"./data.b8da8384.js";import{_ as ro}from"./coin-select.b6797b04.js";import{_ as lo}from"./viewDetail.c05f4624.js";import{b as so}from"./new-add-or-create.39966ae0.js";import{u as uo}from"./notifi.07bfbd19.js";import{_ as co,a as mo}from"./icon-Add-Liquidity_2x.0acb06cb.js";import"./img-lock_2x.9450c7d2.js";import"./lock.82d921f6.js";/* empty css              *//* empty css              */import"./tick.505fdad3.js";import"./token-warning.d79fffb2.js";import"./refresh-icon.803fb5b7.js";/* empty css              */import"./swap-setting.487a0fff.js";/* empty css              */import"./img-no-Positions_2x.f0b7ea62.js";import"./status-block.c7ec4803.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./useWhale.a18ca3fc.js";import"./index.282dab4e.js";function It(e,d,ke){const ue=new a(10).pow(d-ke);return new a(1.0001).pow(e).mul(ue)}const vo=tt({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""},zoom:{type:Number,default:1}},setup(e,d){const ke=F(""),ue=F(""),R=$(()=>{var n,k,c,v,U,Z;return console.log(e.poolInfo,"===>props.poolInfo"),(n=e.poolInfo)!=null&&n.current_sqrt_price&&((k=e.poolInfo)!=null&&k.coinA.decimals)&&((c=e.poolInfo)!=null&&c.coinB.decimals)?i.sqrtPriceX64ToPrice((v=e.poolInfo)==null?void 0:v.current_sqrt_price,(U=e.poolInfo)==null?void 0:U.coinA.decimals,(Z=e.poolInfo)==null?void 0:Z.coinB.decimals).toString():"0"}),_e=$(()=>{let n=0;return e.direction?n=(Number(e.minPrice)/Number(R.value)-1)*100:n=(Number(e.minPrice)/Number(1/Number(R.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),x=$(()=>{let n=0;return e.direction?n=(Number(e.maxPrice)/Number(R.value)-1)*100:n=(Number(e.maxPrice)/Number(1/Number(R.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),X=yt(),S=$(()=>X),Y=$(()=>S.value.chainName?ht(S.value.chainName):{}),{TickMath:i,getNearestTickByTick:A}=Y.value,te=(n=[])=>{let k=6;const c=Math.abs(Number(n[0])-Number(n[n.length-1]));return c>=6?k=0:c>=1?k=1:c>=.1?k=2:c>=.01?k=3:c>=.001?k=4:c>=1e-4?k=5:c>=1e-5?k=6:c>=1e-6?k=7:c>=1e-7&&(k=8),k},Pe=(n,k=1)=>{if(n&&n.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const c=Number(e.poolInfo.current_tick_index);console.log("0117###dataProcessing###currentTick###",c),console.log("0117###dataProcessing###props.poolInfo###",e.poolInfo),console.log("0117###dataProcessing###minPrice###",e.minPrice),console.log("0117###dataProcessing###maxPrice###",e.maxPrice),console.log("0117###dataProcessing###poolInfo###",e.poolInfo);let v=c+100*k,U=c-100*k,Z,re;if(e.maxPrice==="∞")re=Y.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?re=i.priceToTickIndex(new a(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):re=i.priceToTickIndex(new a(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{re=443636}if(e.minPrice==="0")Z=Y.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?Z=i.priceToTickIndex(new a(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):Z=i.priceToTickIndex(new a(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{Z=-443636}let we=0;if(e.currentPriceTab!=="full range"){if(c>=Z&&c<=re){const C=c-Z,oe=re-c;we=Math.max(Math.abs(C),Math.abs(oe))}else c<Z?we=Math.abs(re-c):we=Math.abs(c-Z);v=c+we+100*k,U=c-we-100*k}else{const C=(Math.abs(c)>5e3,2e4);v=c+C*k,U=c-C*k}U<-443636&&(U=-443636),v>443636&&(v=443636);const f=new a(n.liquidity).div(Math.pow(10,8)).toString(),N=e.tickList;console.log("0117####drawChart####tick_info_array####",N);const M=[],I=[];let L={};for(let C=0;C<N.length;C++){if(L=N[C],L.index<=c&&L.index>=U){if(M.length<1&&C!==0){const oe=N[C-1];M.unshift({...oe,index:U,source:"left"})}M.unshift(L)}else if(L.index>c&&L.index<=v&&(I.push(L),M.length<1&&C!==0)){const oe=N[C-1];M.push({...oe,index:U,source:"left"})}if(L.index>v){const oe=N[C];if(I.push({...oe,index:v,source:"right"}),M.length<1&&C!==0){const Je=N[C-1];M.push({...Je,index:U,source:"left"})}break}}let G="0";for(let C=M.length-1;C>=0;C--)G=new a(G).plus(new a(M[C].liquidityNet.toString()).div(Math.pow(10,8))).toString(),M[C].liquityAmount=G;let z=f;for(let C=0;C<I.length;C++)z=new a(z).plus(new a(I[C].liquidityNet.toString()).div(Math.pow(10,8))).toString(),I[C].liquityAmount=z;let K=[];const q=N&&N.length>0?{index:c,liquityAmount:Number(f)}:{index:c,liquityAmount:0};(M.length>0||I.length>0)&&(K=[...M.reverse(),q,...I],e.direction||(K=K.reverse()));const Fe=[];N.forEach(C=>{Fe.push({...C,liquidityGross:C.liquidityGross.toString(),liquidityNet:C.liquidityNet.toString()})}),console.log("0117####drawChart####testTickInfoArray####",Fe),console.log("0117####drawChart####currentLiquity####",f),ne(K,U,v,Z,re,c)}};let Ce=F(!1);const m=F(!1);At(()=>{const n=document.body.clientWidth;m.value=!0,n<750?Ce.value=!1:Ce.value=!0,window.onresize=()=>{document.body.clientWidth<750?Ce.value=!1:Ce.value=!0,console.log("这里执行了吗"),Pe(e.poolInfo,e.zoom)}});const ne=(n,k,c,v,U,Z)=>{console.log("0117####drawChart####chartData####",n),console.log("0117####drawChart####tickMin####",k),console.log("0117####drawChart####tickMax####",c),console.log("0117####drawChart####minPriceTick####",v),console.log("0117####drawChart####maxPriceTick####",U),console.log("0117####drawChart####currentTick####",Z),console.log("0117####drawChart####props.direction####",e.direction),console.log("0518###newd3###props.before7dContractPriceLowest###",e.before7dContractPriceLowest),console.log("0518###newd3###props.before7dContractPriceHighest###",e.before7dContractPriceHighest);let re,we;e.direction?(re=e.before7dContractPriceLowest?i.priceToTickIndex(new a(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",we=e.before7dContractPriceHighest?i.priceToTickIndex(new a(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(re=e.before7dContractPriceLowest?i.priceToTickIndex(new a(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",we=e.before7dContractPriceHighest?i.priceToTickIndex(new a(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const f={top:30,right:35,bottom:20,left:80};let N,M;Ce.value?(N=460-f.left-f.right,M=205-f.top-f.bottom):(N=340-f.left-f.right,M=205-f.top-f.bottom);const I=c-k,L=parseInt(String(I/4));let G=[k+L/4,k+L,k+2*L,c-L,c-L/4];const z=k,K=c,q=N/(K-z);e.currentPriceTab==="full range"&&(G=[k,k+2*L,c]),console.log("0117####drawChart####xArr####",G),console.log("0117####drawChart####utickMin####",z),console.log("0117####drawChart####utickMax####",K),console.log("0117####drawChart####unit####",q);const Fe=G.map(l=>e.direction?It(l,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new a(1).div(It(l,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),C=te(Fe);at("#chart").selectAll("*").remove();const oe=at("#chart").attr("width",N+f.left+f.right).attr("height",M+f.top+f.bottom).append("g").attr("transform",`translate(${f.left},${f.right})`),Je=Yt(n,function(l){return Number(Math.abs(l.liquityAmount))})||0,Ne=Vt().range([0,M]).domain([Je,0]);eo().rangeRound([0,N]).padding(.1);const t=oe.append("g").attr("id","barsBox").selectAll("rect").data(n).enter().append("rect");S.value.theme=="default"?t.attr("x",function(l,s){return s===0?0:e.direction?Math.abs(l.index-z)*q:Math.abs(K-l.index)*q}).attr("y",function(l,s){return e.direction?s===n.length-1?0:Ne(l.liquityAmount):s===n.length-1?0:Ne(n[s+1].liquityAmount)}).attr("width",function(l,s){return s===0&&n.length===1&&l.liquityAmount>0?N:(e.direction,s!==n.length-1?Math.abs(n[s+1].index-l.index)*q:0)}).attr("height",function(l,s){return s===0&&n.length===1&&l.liquityAmount>0?M:e.direction?s===n.length-1?0:M-Ne(l.liquityAmount):s===n.length-1?0:M-Ne(n[s+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):t.attr("x",function(l,s){return s===0?0:e.direction?Math.abs(l.index-z)*q:Math.abs(K-l.index)*q}).attr("y",function(l,s){return e.direction?s===n.length-1?0:Ne(Math.abs(l.liquityAmount)):s===n.length-1?0:Ne(Math.abs(n[s+1].liquityAmount))}).attr("width",function(l,s){return s===0&&n.length===1&&l.liquityAmount>0?N:(e.direction,s!==n.length-1?Math.abs(n[s+1].index-l.index)*q:0)}).attr("height",function(l,s){if(s===0&&n.length===1&&l.liquityAmount>0)return M;if(e.direction)return s===n.length-1?0:Number(l.liquityAmount)?M-Ne(Math.abs(l.liquityAmount)):0;{if(s===n.length-1)return 0;const Be=M-Ne(Math.abs(n[s+1].liquityAmount));return Number(n[s+1].liquityAmount)?Be:0}}).attr("fill",function(l,s){return"#417494"}).attr("class","bars").attr("stroke-width",1).attr("stroke",function(l,s){return"#417494"});const g=oe.append("g");g.append("line").attr("x1",0).attr("y1",155).attr("x2",N).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const P=g.append("g");let _=0;if(e.direction){for(let l=0;l<G.length;l++){const s=ge(Fe[l],C)||"0";console.log("0423####price####",s),Fe.push(s);const Be=Math.abs(G[l]-z)*q;let me=0;for(let ve=0;ve<s.length;ve++)s[ve]==="1"?me+=4.02:s[ve]==="."?me+=2.64:s[ve]==="7"?me+=5.48:me+=6;console.log(Be,"x=>>>"),P.append("text").text(s).attr("x",Be-me/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}_=Math.abs(Z-z)*q}else{for(let l=G.length-1;l>=0;l--){const s=ge(Fe[l],C)||0;Fe.push(s);const Be=Math.abs(G[l]-K)*q;let me=0;for(let ve=0;ve<s.length;ve++)s[ve]==="1"?me+=4.02:s[ve]==="."?me+=2.64:s[ve]==="7"?me+=5.48:me+=6;P.append("text").text(s).attr("x",Be-me/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}_=Math.abs(Z-K)*q}console.log(Z,K,q,"######currentPricePositon"),(S.value.theme=="default"?oe.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):oe.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+_+", 0)");let j,ce,Ee,je;e.direction?(console.log("0525###d3###select###minPriceTick###",v),console.log("0525###d3###select###maxPriceTick###",U),console.log("0525###d3###select###props.minPrice###",e.minPrice),console.log("0525###d3###select###props.maxPrice###",e.maxPrice),j=v<z?-100:parseInt(String(Math.abs(v-z)*q)),ce=U<z?-100:parseInt(String(Math.abs(U-z)*q)),Ee=re<z?-100:Math.abs(re-z)*q,je=we<z?-100:Math.abs(we-z)*q):(ce=v<z?-100:Math.abs(K-v)*q,j=U<z?-100:Math.abs(K-U)*q,je=re<z?-100:Math.abs(K-re)*q,Ee=we<z?-100:Math.abs(K-we)*q),e.minPrice==="0"&&(j=0),e.maxPrice==="∞"&&(ce=N),console.log(j,"==>minPriceTickX"),Ce.value,ke.value=N-j+87+"px",ue.value=ce+98+"px",re&&Ee<N&&oe.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+Ee+", 0)"),we&&je<N&&oe.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+je+", 0)");const Se=oe.append("g").attr("id","left-handle"),de=oe.append("g").attr("id","right-handle");S.value.theme=="default"?(Se.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Se.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),Se.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),Se.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),de.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),de.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),de.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),de.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(Se.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Se.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),Se.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),Se.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),de.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),de.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),de.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),de.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),console.log("0525###d3###select###minPriceTickX###",j),console.log("0525###d3###select###maxPriceTickX###",ce),Se.attr("transform","translate("+j+", 0)"),de.attr("transform","translate("+ce+", 0)");const De=to().extent([[0,0],[N,M]]).handleSize(30).on("end",it);oe.append("g").attr("class","brush").call(De).call(De.move,[j,ce]);function it(l){if(!l.sourceEvent||!l.selection)return;Se.attr("transform","translate("+l.selection[0]+", 0)"),de.attr("transform","translate("+l.selection[1]+", 0)"),Ce.value,ke.value=N-l.selection[0]+87+"px",ue.value=l.selection[1]+74+"px";let s,Be;console.log("0525###d3###select###e.selection[0]###",l.selection[0]),console.log("0525###d3###select###e.selection[0]###",l.selection[1]),console.log("0525###d3###select###props.direction###",e.direction),console.log("0525###d3###select###width###",N),console.log("0525###d3###select###unit###",q),console.log("0525###d3###select###utickMin###",z),console.log("0525###d3###select###utickMax###",K),console.log("0525###d3###select###props.poolInfo###",e.poolInfo);let me=0,ve=0;e.direction?(me=A(parseInt(String(l.selection[0]/q+z)),Number(e.poolInfo.tickSpacing)),s=i.tickIndexToPrice(me,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),ve=A(parseInt(String(l.selection[1]/q+z)),Number(e.poolInfo.tickSpacing)),Be=i.tickIndexToPrice(ve,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),console.log("0525###d3###select###minTick###",me),console.log("0525###d3###select###maxTick###",ve),console.log("0525###d3###select###minPrice###",s),console.log("0525###d3###select###maxPrice###",Be)):(ve=A(K-l.selection[0]/q,Number(e.poolInfo.tickSpacing)),s=1/i.tickIndexToPrice(ve,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),me=A(K-l.selection[1]/q,Number(e.poolInfo.tickSpacing)),Be=1/i.tickIndexToPrice(me,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),d.emit("onChangeMinPrice",String(ge(String(s),6))),d.emit("onChangeMaxPrice",String(ge(String(Be),6)))}S.value.theme=="default"?at(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):at(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632"),m.value=!1};return F(""),$e(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab,e.zoom],([n,k,c,v,U])=>{console.log(n,k,c,c>k,"poolInfo && minPrice && maxPrice && (maxPrice > minPrice)"),n&&k&&c&&(n!=null&&n.liquidity)&&(v!=="Custom"||console.log("绘制"),Pe(n,U))},{immediate:!0}),console.log(e,"props===>"),{store:S,loading:m,rangeSizeLower:_e,rangeSizeUpper:x,rangeSizeLowerPosition:ke,rangeSizeUpperPosition:ue,decimalFormat:Wt,numberformat:mt}}});const fo=e=>(qt("data-v-cde4ccfd"),e=e(),Mt(),e),go={class:"chart-box"},po={class:"chart"},bo=fo(()=>r("svg",{id:"chart"},null,-1));function ho(e,d,ke,ue,R,_e){const x=kt;return B(),Q(rt,null,[e.tickList&&e.tickList.length>0&&e.loading?(B(),Ge(x,{key:0})):ee("",!0),r("div",go,[Nt(r("div",po,[e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="∞"?(B(),Q("div",{key:0,class:"range-size range-size-lower",style:ft({right:e.rangeSizeLowerPosition})},se(("numberformat"in e?e.numberformat:fe(mt))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):ee("",!0),e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="∞"?(B(),Q("div",{key:1,class:"range-size range-size-upper",style:ft({left:e.rangeSizeUpperPosition})},se(("numberformat"in e?e.numberformat:fe(mt))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):ee("",!0),bo],512),[[Zt,!e.loading]])])],64)}const Ht=ot(vo,[["render",ho],["__scopeId","data-v-cde4ccfd"]]),ko=tt({props:{lever:{type:String,default:""}},setup(){return{}}});const wo=e=>(qt("data-v-619778e2"),e=e(),Mt(),e),yo={class:"lever"},Co=wo(()=>r("div",{class:"lever-title"},"Leverage",-1)),_o={class:"lever-text"};function Po(e,d,ke,ue,R,_e){return B(),Q("div",yo,[Co,r("div",_o,se(e.lever),1)])}const To=ot(ko,[["render",Po],["__scopeId","data-v-619778e2"]]),So=tt({components:{NewLiquidityD3Chart:Ht,NewLiquidityPrice:Ot},setup(){const{t:e,locale:d}=$t(),ke=F("liquidity"),ue=yt(),R=$(()=>ue),_e=$(()=>R.value.chainName),x=Lt(),X=$(()=>x),S=$(()=>R.value.chainName?ht(R.value.chainName):{});At(()=>{Ye.value=!1});const Y=wt(),i=$(()=>{let t=null;for(let g=0;g<X.value.poolConfigList.length;g++){const P=X.value.poolConfigList[g];P.address==Y.query.poolAddress&&(t=P)}return console.log(t,"===>basePoolInfo"),t}),A=$(()=>{let t=null;for(const g in X.value.poolsObj){const P=X.value.poolsObj[g];P.address==Y.query.poolAddress&&(console.log(P,"p===>"),t=P)}return t}),te=F(),Pe=F(!0),Ce=async(t,g)=>{if(console.log(Pe.value,"==>chartLoading.value"),g){Qe.value=[],m.value=[],Pe.value=!0;const P=t.token_a.decimals,_=t.token_b.decimals;console.log(t,"pool===>1111"),lt.value=Ct.sqrtPriceX64ToPrice(t==null?void 0:t.current_sqrt_price,P,_).toString(),bt.value=new a(1).div(Ct.sqrtPriceX64ToPrice(t==null?void 0:t.current_sqrt_price,P,_)).toString(),h.value=t.needReverse?t.token_b:t.token_a,b.value=t.needReverse?t.token_a:t.token_b,te.value=t.needReverse,t.token_a.address.toLowerCase()===h.value.address.toLowerCase()&&t.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Ae.value=!0:Ae.value=!1,console.log(t,"187===>"),console.log(t,"###pool===>");let Te={poolAddress:t.address,coinTypeA:t.coin_a_address,coinTypeB:t.coin_b_address};const j=await S.value.getTicks(Te);Qe.value=j?S.value.getTickDataFromUrlData(j):[],console.log(Qe.value,"===>chartLoadingtickList.value"),Pe.value=!1,n(t)}},m=F([]),ne=F(),n=t=>{const g=t.token_a.decimals,P=t.token_b.decimals;let _=X.value.poolPriceConfigObj&&X.value.poolPriceConfigObj[t.address]&&X.value.poolPriceConfigObj[t.address].recommend_ranges||{};const Te=X.value.poolPriceConfigObj&&X.value.poolPriceConfigObj[t.address]&&X.value.poolPriceConfigObj[t.address].type||"";console.log(_,"===>priceConfigList");let j,ce;const Ee=t.current_tick_index;ne.value=t.current_tick_index,console.log(Ee,t.tickSpacing,"==>pool.tickSpacing"),j=Ee-Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3),ce=Ee+Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3);const je=S.value.TickMath.tickIndexToPrice(j,g,P).toString(),Se=S.value.TickMath.tickIndexToPrice(ce,g,P).toString();_["full range"]={lower:S.value.TickUtil.getMinIndex(Number(A.value.tickSpacing)),upper:S.value.TickUtil.getMaxIndex(Number(A.value.tickSpacing))},_.custom={lower:j,upper:ce,minPrice:je,maxPrice:Se};const de=[];for(let De in _)_[De]&&(console.log(De,"j==>"),de.push({..._[De],key:De}));console.log(de,"priceList"),console.log(t,"###pool.type 504"),Te&&de&&de.length>2?t.isSelfBuilt?D.value="custom":Te=="stable"?D.value="suggested":D.value="passive":D.value="custom",m.value=de,Ke.value=_,v({key:D.value,..._[D.value]})},k=F(""),c=F(""),v=t=>{console.log("priceTab====>",t),console.log("priceTab###poolInfo###",A.value),D.value=t.key.toLowerCase();const g=A.value.token_a.decimals,P=A.value.token_b.decimals,{lower:_,upper:Te}=t;xe.value=!1;const j=S.value.TickMath.tickIndexToPrice(_,g,P).toString(),ce=S.value.TickMath.tickIndexToPrice(Te,g,P).toString();if(t.key=="full range"){k.value=_,c.value=Te,U();return}console.log(Ae.value,"===>direct.value"),Ae.value?(ct.value=String(j),O.value=String(j),dt.value=String(ce),T.value=String(ce),k.value=_,c.value=Te):(ct.value=String(1/Number(ce)),O.value=String(1/Number(ce)),dt.value=String(1/Number(j)),T.value=String(1/Number(j)),k.value=S.value.TickMath.priceToTickIndex(new a(1/Number(ce)),g,P),c.value=S.value.TickMath.priceToTickIndex(new a(1/Number(j)),g,P)),console.log(O.value,T.value,"===>111")},U=t=>{O.value="0",T.value="∞"};$e(()=>A.value,(t,g)=>{console.log(g,"===>oldVal"),console.log(t,"===>newVal"),(!g&&t&&!Oe(t)||g&&t&&g.address!==t.address)&&(console.log("池子信息"),Ce(t,!g||t.address!==g.address))},{immediate:!0}),Bt(()=>{h.value=F(),b.value=F(),Qe.value=[]}),$e(()=>[i.value,A.value,X.value.recommendRangesObj],(t,g)=>{var P,_;console.log(t,"===>newValue369"),console.log(g,"===>oldValue369"),(!g||t[0]&&t[1]&&t[2]&&!Oe(t[0])&&!Oe(t[1]&&!Oe(t[2]))||((P=t[0])==null?void 0:P.address)!==((_=g[0])==null?void 0:_.address))&&t[0]&&t[2]&&!Oe(t[0])&&!Oe(t[2])&&(console.log(t[0],t[2],"======>374"),x.setSinglePool(t[0],t[2],_e.value))},{immediate:!0,deep:!0});const Z=t=>{if(_e.value=="Sui")switch(t){case"passive":return"/sui-image/icon_ conservative@2x.png";case"active":return"/sui-image/icon_active@2x.png";case"full range":return"/sui-image/icon_fullrange@2x.png";case"custom":return"/sui-image/icon_costom@2x.png";case"suggested":return"/sui-image/icon_stabel@2x.png"}else switch(t){case"passive":return"/image/icon_ conservative@2x.png";case"active":return"/image/icon_active@2x.png";case"full range":return"/image/icon_fullrange@2x.png";case"custom":return"/image/icon_costom@2x.png";case"suggested":return"/image/icon_stabel@2x.png"}},re=t=>{switch(t){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"full range":return e("newAdd.fullRange");case"custom":return e("newAdd.custom")}},we=t=>{var P,_;const g=X.value.poolPriceConfigObj&&X.value.poolPriceConfigObj[(P=A.value)==null?void 0:P.address]&&X.value.poolPriceConfigObj[(_=A.value)==null?void 0:_.address].type||"";if(console.log(g,t,"==>poolType"),m.value.length>2)if(g=="unstable")switch(t){case"active":return{top:"35%"};case"passive":return{top:"10%"};case"full range":return{top:"60%"};case"custom":return{top:"85%"}}else switch(t){case"suggested":return{top:"23%"};case"full range":return{top:"48%"};case"custom":return{top:"73%"}}else if(g=="unstable")switch(t){case"active":return{top:"35%"};case"passive":return{top:"10%"};case"full range":return{top:"60%"};case"custom":return{top:"85%"}}else switch(t){case"full range":return{top:"35%"};case"custom":return{top:"60%"}}},f=F(1),N=()=>{const t=f.value/2;f.value=t},M=()=>{const t=f.value*2;f.value=t};console.log(m.value,"==>priceTablList");const I=$(()=>{var t,g,P;return!A.value||Oe(R.value.addressHistTokens)||!R.value.addressHistTokens[(t=A.value)==null?void 0:t.poolAddress]?null:Object.fromEntries((P=R.value.addressHistTokens[(g=A.value)==null?void 0:g.poolAddress])==null?void 0:P.data.map(_=>[_.key,_.value]))}),L=F(30),G=F("30D"),z=$(()=>Ae.value?I.value&&ge(L.value==7?I.value.before_7_d_contract_price_lowest:L.value==24?I.value.before_24_h_contract_price_lowest:I.value.before_30_d_contract_price_lowest,6)||0:I.value&&ge(new a(1).div(L.value==7?I.value.before_7_d_contract_price_highest:L.value==24?I.value.before_24_h_contract_price_highest:I.value.before_30_d_contract_price_highest).toString(),6)||0),K=$(()=>Ae.value?I.value&&ge(L.value==7?I.value.before_7_d_contract_price_highest:L.value==24?I.value.before_24_h_contract_price_highest:I.value.before_30_d_contract_price_highest,6)||0:(I.value&&ge(1/Number(L.value==7?I.value.before_7_d_contract_price_lowest:L.value==24?I.value.before_24_h_contract_price_lowest:I.value.before_30_d_contract_price_lowest),6))==1/0?0:I.value&&ge(1/Number(L.value==7?I.value.before_7_d_contract_price_lowest:L.value==24?I.value.before_24_h_contract_price_lowest:I.value.before_30_d_contract_price_lowest),6)||0),q=$(()=>{const t=Number(O.value),g=Number(T.value);if(O.value==T.value||D.value=="full range")return"--";if(O.value&&T.value&&O.value!=="0"&&T.value!=="∞"){const P=vt(1/(1-Number((t/g)**.25)),2);return Number(P)>0?P+"x":"--"}else return 1}),Fe=$(()=>{var t,g,P,_,Te,j;return((t=h.value)==null?void 0:t.isSelfBuilt)||((g=b.value)==null?void 0:g.isSelfBuilt)||((_=X.value.tokensObj[(P=h.value)==null?void 0:P.address])==null?void 0:_.isSelfBuilt)||((j=X.value.tokensObj[(Te=b.value)==null?void 0:Te.address])==null?void 0:j.isSelfBuilt)}),C=t=>{console.log(t,"####0731 priceRangeChangeMin"),t!==O.value&&D.value=="full range"?(console.log(m.value,"===>priceTablList"),v({key:"custom",...m.value.custom})):D.value!=="full range"&&D.value!=="custom"?(D.value="custom",O.value=t):O.value=t},oe=t=>{console.log(t,"###priceRangeChangeMax maxPirce"),t!==T.value&&D.value=="full range"?v({key:"custom",...m.value.custom}):D.value!=="full range"&&D.value!=="custom"?(D.value="custom",t=="0"?T.value="∞":T.value=t):t=="0"?T.value="∞":T.value=t};return console.log(O.value,T.value,"683==>"),$e(()=>[O.value,T.value],([t,g])=>{console.log(t,g,"minmax new-liquidity-left")},{deep:!0,immediate:!0}),{positionError:Ye,getCoinIcon:t=>{var g;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((g=X.value.tokensObj[t==null?void 0:t.address])==null?void 0:g.logo_url)||(R.value.theme==="default"?pt("/image/coins/unknown.png"):pt("/image/coins/sui-unknown.png"))},chainName:_e,store:R,currentTab:ke,currentPrice:lt,currentPriceReverse:bt,fromCoin:h,toCoin:b,direction:Ae,needReverse:te,addCommom:Xe,decimalUi:ge,priceTablList:m,currentPriceTab:D,sliderStyle:we,poolInfo:A,tickList:Qe,getPriceTabImage:Z,getPriceTabText:re,defaultMinPrice:ct,defaultMaxPrice:dt,minPrice:O,maxPrice:T,currentTick:ne,chartLoading:Pe,zoomOut:N,zoomIn:M,zoom:f,priceTab:v,before7dContractPriceLowest:z,before7dContractPriceHighest:K,aprRewardsTime:G,lever:q,aprRewardsParameter:L,isSelfBuilt:Fe,priceRangeChangeMin:C,priceRangeChangeMax:oe,toggle:jt,getPirceTabTips:t=>{switch(t){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"full range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"custom":return e("newAdd.customTips")}},timeList:[{label:"24H",value:24},{label:"7D",value:7},{label:"30D",value:30}]}}});const Io={class:"new-liquidity-left"},Lo=r("span",{class:"selectRange"},"Select Range",-1),Ao={class:"price-info"},No={class:"left"},qo={class:"base-coin"},Mo={class:"base-coin-title"},$o=r("span",null,"Base coin",-1),Bo=r("svg",{class:"icon icon-up","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-exchange_up1"})],-1),Ro=r("svg",{class:"icon icon-down","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-exchange_down1"})],-1),Oo=[Bo,Ro],Fo={class:"base-coin-bottom"},Uo={alt:""},zo={class:"current-price"},jo=r("div",{class:"current-price-title"},"Current Price",-1),Ho={key:0,class:"from-pre-to"},xo={class:"right"},Xo={class:"price-range"},Eo={class:"left"},Do={class:"price-slider"},Wo={class:"slider"},Zo=r("div",{class:"slider-ratio-content"},null,-1),Go=[Zo],Ko={class:"price-tab-list"},Jo=["onClick"],Qo=["src"],Yo={class:"right"},Vo={class:"price-zoom"},en={class:"current-price"},tn=r("div",{class:"current-price-title"},"Current Price",-1),on={key:0,class:"from-pre-to"},nn={class:"price-zoom-right"},an={class:"leverage"},rn=r("div",{class:"left"},null,-1),ln={class:"right"},sn={class:"right-time"},un={key:0,class:"day-7-price-range"},cn=r("i",null,null,-1),dn={class:"gray"},mn={class:"time-list"},vn=["onClick"],fn={class:"right-price-h5"},gn={class:"apr-leverage"},pn={key:0,class:"position-tips"},bn=["src"],hn={class:"error"};function kn(e,d,ke,ue,R,_e){var te,Pe,Ce,m,ne,n,k,c;const x=Kt,X=Ht,S=kt,Y=To,i=Ot,A=Gt("image");return B(),Q("div",Io,[Lo,r("div",Ao,[r("div",No,[r("div",qo,[r("div",Mo,[$o,r("div",{class:"change-price",onClick:d[0]||(d[0]=(...v)=>e.toggle&&e.toggle(...v))},Oo)]),r("div",Fo,[Nt(r("img",Uo,null,512),[[A,e.getCoinIcon(e.fromCoin)]]),r("span",null,se((te=e.fromCoin)==null?void 0:te.symbol),1)])]),r("div",zo,[jo,r("div",null,[r("span",null,se(e.poolInfo?e.direction?("addCommom"in e?e.addCommom:fe(Xe))(("decimalUi"in e?e.decimalUi:fe(ge))(e.currentPrice,6)):("addCommom"in e?e.addCommom:fe(Xe))(("decimalUi"in e?e.decimalUi:fe(ge))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(B(),Q("span",Ho,se((Pe=e.toCoin)==null?void 0:Pe.symbol)+" per "+se((Ce=e.fromCoin)==null?void 0:Ce.symbol),1)):ee("",!0)])])]),r("div",xo,[e.currentTab=="liquidity"?(B(),Q("div",{key:0,class:"zoom-out",onClick:d[1]||(d[1]=(...v)=>e.zoomOut&&e.zoomOut(...v))}," + ")):ee("",!0),e.currentTab=="liquidity"?(B(),Q("div",{key:1,class:"zoom-in",onClick:d[2]||(d[2]=(...v)=>e.zoomIn&&e.zoomIn(...v))}," - ")):ee("",!0)])]),r("div",Xo,[r("div",Eo,[r("div",Do,[r("div",Wo,[r("div",{class:"slider-ratio",style:ft(e.sliderStyle(e.currentPriceTab))},Go,4)])]),r("div",Ko,[(B(!0),Q(rt,null,Tt(e.priceTablList,v=>(B(),Q("div",{key:v.key,class:ut(["price-tab-item",e.currentPriceTab==v.key?"price-tab-item-active":""]),onClick:U=>e.priceTab(v)},[ze(x,{placement:"bottom","arrow-point-at-center":""},{title:gt(()=>[Rt(se(e.getPirceTabTips(v.key)),1)]),default:gt(()=>[r("img",{src:e.getPriceTabImage(v.key),alt:""},null,8,Qo),r("span",null,se(e.getPriceTabText(v.key)),1)]),_:2},1024)],10,Jo))),128))])]),r("div",Yo,[r("div",Vo,[r("div",en,[tn,r("div",null,[r("span",null,se(e.poolInfo?e.direction&&!e.needReverse?("addCommom"in e?e.addCommom:fe(Xe))(("decimalUi"in e?e.decimalUi:fe(ge))(e.currentPrice,6)):("addCommom"in e?e.addCommom:fe(Xe))(("decimalUi"in e?e.decimalUi:fe(ge))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(B(),Q("span",on,se(e.direction&&!e.needReverse?`${(m=e.fromCoin)==null?void 0:m.symbol} per ${(ne=e.toCoin)==null?void 0:ne.symbol}`:`${(n=e.toCoin)==null?void 0:n.symbol} per ${(k=e.fromCoin)==null?void 0:k.symbol}`),1)):ee("",!0)])]),r("div",nn,[e.currentTab=="liquidity"?(B(),Q("div",{key:0,class:"zoom-out",onClick:d[3]||(d[3]=(...v)=>e.zoomOut&&e.zoomOut(...v))}," + ")):ee("",!0),e.currentTab=="liquidity"?(B(),Q("div",{key:1,class:"zoom-in",onClick:d[4]||(d[4]=(...v)=>e.zoomIn&&e.zoomIn(...v))}," - ")):ee("",!0)])]),e.fromCoin&&e.toCoin&&e.poolInfo&&e.currentTab=="liquidity"&&e.tickList.length>0?(B(),Ge(X,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direction,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,zoom:e.zoom,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","zoom","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):ee("",!0),((c=e.tickList)==null?void 0:c.length)<=0&&e.chartLoading?(B(),Ge(S,{key:1})):ee("",!0)])]),r("div",an,[rn,r("div",ln,[r("div",sn,[e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(B(),Q("div",un,[cn,r("span",dn,se(e.aprRewardsParameter==7?"7D":e.aprRewardsParameter==24?"24H":"30D")+" Price Range",1),r("span",null,se(("addCommom"in e?e.addCommom:fe(Xe))(("decimalUi"in e?e.decimalUi:fe(ge))(e.before7dContractPriceLowest,6)))+" - "+se(("addCommom"in e?e.addCommom:fe(Xe))(("decimalUi"in e?e.decimalUi:fe(ge))(e.before7dContractPriceHighest,6))),1)])):ee("",!0),r("div",mn,[(B(!0),Q(rt,null,Tt(e.timeList,v=>(B(),Q("div",{key:v.value,class:ut(["time-item",v.value==e.aprRewardsParameter?"time-item-active":""]),onClick:U=>e.aprRewardsParameter=v.value},se(v.label),11,vn))),128))])]),r("div",fn,[r("span",null,se(("addCommom"in e?e.addCommom:fe(Xe))(("decimalUi"in e?e.decimalUi:fe(ge))(e.before7dContractPriceLowest,6)))+" - "+se(("addCommom"in e?e.addCommom:fe(Xe))(("decimalUi"in e?e.decimalUi:fe(ge))(e.before7dContractPriceHighest,6))),1)])])]),r("div",{class:ut(["apr-and-price",e.positionError&&e.poolInfo?"padding-apr-and-price":""])},[r("div",gn,[ze(Y,{lever:e.lever},null,8,["lever"])]),ze(i,{min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direction,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["min","max","from-coin","to-coin","direct","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice"]),e.positionError&&e.poolInfo?(B(),Q("div",pn,[r("img",{src:("importIcon"in e?e.importIcon:fe(pt))("/image/icon-tips-error@2x.png"),alt:""},null,8,bn),r("p",hn,se(e.$t("tips.positionError")),1)])):ee("",!0)],2)])}const xt=ot(So,[["render",kn]]),wn=tt({components:{NewLiquidityTitle:Ft,NewLiquidityAssetsCard:Ut,NewLiquidityDepositRatio:zt},setup(){const{t:e,locale:d}=$t(),ke=yt(),ue=$(()=>ke),R=$(()=>ue.value.chainName),_e=Lt(),x=$(()=>_e),X=no(),S=$(()=>X),Y=wt(),i=$(()=>{let o=null;for(const u in x.value.poolsObj){const p=x.value.poolsObj[u];p.address==Y.query.poolAddress&&(console.log(p,"p===>"),o=p)}return o}),A=F(!1),te=F(!1),Pe=$(()=>ue.value.theme),Ce=async(o,u)=>{h.value=o.needReverse?o.token_b:o.token_a,b.value=o.needReverse?o.token_a:o.token_b,w.value="",y.value=""};$e(()=>i.value,(o,u)=>{console.log(u,"===>oldVal"),console.log(o,"===>newVal"),(!u&&o&&!Oe(o)||u&&o&&u.address!==o.address)&&(console.log("池子信息"),Ce(o,!u||o.address!==u.address))},{immediate:!0});const m=$(()=>S.value.assets&&h.value&&S.value.assets[h.value.address]?_t(S.value.assets[h.value.address].balance,h.value.decimals):"0"),ne=$(()=>S.value.assets&&b.value&&S.value.assets[b.value.address]?_t(S.value.assets[b.value.address].balance,b.value.decimals):"0"),n=o=>{o==="fromCoin"?(ye.value=!0,R.value==="Aptos"?w.value=Number(m.value)>0?h.value.symbol=="APT"?new a(Number(m.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(m.value)).sub(new a(.1)).toString():String(m.value):"":w.value=Number(m.value)>0?h.value.symbol=="SUI"?new a(Number(m.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(m.value)).sub(new a(.05)).toString():String(m.value):""):(ye.value=!1,R.value==="Aptos"?y.value=Number(ne.value)>0?b.value.symbol=="APT"?new a(Number(ne.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(ne.value)).sub(new a(.1)).toString():String(ne.value):"":y.value=Number(ne.value)>0?b.value.symbol=="SUI"?new a(Number(ne.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(ne.value)).sub(new a(.05)).toString():String(ne.value):"")},k=o=>{o==="fromCoin"?(ye.value=!0,w.value=Number(m.value)>0?vt(new a(Number(m.value)).div(2).toString(),h.value.decimals).toString():""):(ye.value=!1,y.value=Number(ne.value)>0?vt(new a(Number(ne.value)).div(2).toString(),b.value.decimals).toString():"")},c=F(),v=F(),U=F(),Z=F(!1),re=o=>{var u,p,ie,H;c.value=o,o==="fromCoin"?(v.value=((u=b.value)==null?void 0:u.address)||"",U.value=Y.query.actions=="new-position"?(p=h.value)==null?void 0:p.address:i.value.needReverse?i.value.token_b.address:i.value.token_a.address):(v.value=((ie=h.value)==null?void 0:ie.address)||"",U.value=Y.query.actions=="new-position"?(H=b.value)==null?void 0:H.address:i.value.needReverse?i.value.token_a.address:i.value.token_b.address),Z.value=!0,console.log(Z.value,"==>showCoinSelect.value ")},we=o=>{var ie,H,ae,le,V,J,W,pe;const u=i.value.needReverse?i.value.token_b:i.value.token_a,p=i.value.needReverse?i.value.token_a:i.value.token_b;c.value==="fromCoin"?(((ie=h.value)==null?void 0:ie.address)===(u==null?void 0:u.address)||!((H=h.value)!=null&&H.address)?(b.value&&o.address.toLowerCase()===((ae=b)==null?void 0:ae.value.address.toLowerCase())&&(b.value=null),h.value=o):(h.value&&o.address.toLowerCase()===((le=h)==null?void 0:le.value.address.toLowerCase())&&(h.value=null),b.value=o),Y.query.action||(Y.query.fee="")):((V=b.value)==null?void 0:V.address)===(p==null?void 0:p.address)||!((J=b.value)!=null&&J.address)?(h.value&&o.address.toLowerCase()===((W=h)==null?void 0:W.value.address.toLowerCase())&&(h.value=null),b.value=o):(b.value&&o.address.toLowerCase()===((pe=b)==null?void 0:pe.value.address.toLowerCase())&&(b.value=null),h.value=o),Z.value=!1},f=$(()=>ue.value.chainName?ht(ue.value.chainName):{}),N=$(()=>ue.value.slippage),M=F(),I=async()=>{var Re,Le,qe,Me;if(xe.value)return console.log("跳出"),!1;if(!O.value&&!T.value)return!1;if(!w.value&&!y.value&&!O.value&&!T.value)return;const o=i.value||{};if(Oe(o))return;const{TickUtil:u,TickMath:p,getNearestTickByTick:ie}=f.value,H=o==null?void 0:o.token_a.decimals,ae=o==null?void 0:o.token_b.decimals;let le,V,J,W,pe,Ie,We,Ze,be=o==null?void 0:o.current_tick_index,E;if(o.token_a.address.toLowerCase()===h.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===b.value.address.toLowerCase()?E=!0:E=!1,O.value==="0"&&T.value==="∞")J=u.getMinIndex(Number(o.tickSpacing)),W=u.getMaxIndex(Number(o.tickSpacing)),pe=p.tickIndexToSqrtPriceX64(J),Ie=p.tickIndexToSqrtPriceX64(W),console.log(J,W,"#######updateAmounts 513");else if(D.value=="custom"){console.log(E,"===>directs1866"),E?(le=Number(O.value),V=Number(T.value)):(le=T.value!=="∞"?new a(1).div(T.value).toString():1/0,V=new a(1).div(O.value).toString());try{We=le==0?-443636:p.priceToTickIndex(new a(le),H,ae)}catch{We=-443636}try{Ze=p.priceToTickIndex(new a(V),H,ae)}catch{Ze=443636}J=ie(We,Number(o.tickSpacing)),W=ie(Ze,Number(o.tickSpacing));try{pe=p.priceToSqrtPriceX64(new a(le),H,ae)}catch{(V===1/0||V==="∞")&&(pe=p.tickIndexToSqrtPriceX64(u.getMinIndex(Number(o.tickSpacing))))}try{Ie=p.priceToSqrtPriceX64(new a(V),H,ae)}catch{console.log("0523###test###max###",V),(V===1/0||V==="∞")&&(console.log("0523###test###max###11111"),Ie=p.tickIndexToSqrtPriceX64(u.getMaxIndex(Number(o.tickSpacing))))}console.log("0518###pre###tick_lower###",J,W,be),console.log("0518###pre###tick_upper###",W)}else J=(Re=Ke.value[D.value])==null?void 0:Re.lower,W=(Le=Ke.value[D.value])==null?void 0:Le.upper,pe=p.tickIndexToSqrtPriceX64(J),Ie=p.tickIndexToSqrtPriceX64(W);if(T.value!=="∞"&&J>=W){A.value=!0,w.value="",te.value=!0,y.value="";return}if(console.log(W,be,J,"1922"),T.value==="∞"||be>=J&&be<=W){A.value=!1,te.value=!1;let he;if(w.value||y.value){if(ye.value){const st=new a(w.value).mul(Math.pow(10,h.value.decimals)).toString();he=new Ue(st)}else{const st=new a(y.value).mul(Math.pow(10,b.value.decimals)).toString();he=new Ue(st)}console.log(E,"======>directs");const{liquidityAmount:He,tokenMaxA:Ve,tokenMaxB:et,tokenMaxAOrigin:Et,tokenMaxBOrigin:Dt}=f.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:o.token_a,tokenB:o.token_b,lowerTick:J,upperTick:W,coinAmount:he,iscoinA:E?ye.value:!ye.value,roundUp:!0,slippage:Number(N.value)/100,curSqrtPrice:new Ue(o.current_sqrt_price)});M.value={liquidityAmount:He,tokenMaxA:Ve,tokenMaxB:et,tokenMaxAOrigin:Et,tokenMaxBOrigin:Dt},console.log(Ve,et,"preAdd"),E?ye.value?y.value=Number(et)>0?et:"":w.value=Number(Ve)>0?Ve:"":ye.value?y.value=Ve:w.value=et}}else if(be>W){if(E?w.value="":y.value="",A.value=E,te.value=!E,w.value||y.value){let he;if(E){const He=new a(y.value).mul(Math.pow(10,(qe=b.value)==null?void 0:qe.decimals)).toString();he=new Ue(He),M.value={liquidityAmount:f.value.estimateLiquidityForCoinB(pe,Ie,he),tokenMaxA:0,tokenMaxB:y.value}}else{const He=new a(w.value).mul(Math.pow(10,(Me=h.value)==null?void 0:Me.decimals)).toString();he=new Ue(He),M.value={liquidityAmount:f.value.estimateLiquidityForCoinB(pe,Ie,he),tokenMaxA:0,tokenMaxB:w.value}}}}else if(be<J){if(A.value=!E,te.value=E,E?y.value="":w.value="",w.value||y.value){let he;if(E){const He=new a(w.value).mul(Math.pow(10,h.value.decimals)).toString();he=new Ue(He),M.value={liquidityAmount:f.value.estimateLiquidityForCoinA(pe,Ie,he),tokenMaxA:w.value,tokenMaxB:0}}else{const He=new a(y.value).mul(Math.pow(10,b.value.decimals)).toString();he=new Ue(He),M.value={liquidityAmount:f.value.estimateLiquidityForCoinA(pe,Ie,he),tokenMaxA:y.value,tokenMaxB:0}}}}else A.value=!0,w.value="",te.value=!0,y.value=""};$e(w,(o,u)=>{console.log(w,"===>fromCoinAmount"),o==""&&ye.value&&(y.value=""),o&&ye.value&&!xe.value&&I()}),$e(y,(o,u)=>{console.log(o,"===>>>>newValsda"),o==""&&!ye.value&&(w.value=""),o&&!ye.value&&!xe.value&&I()}),$e(()=>Ae.value,(o,u)=>{w.value&&y.value&&I()}),$e(()=>[h.value,b.value],([o,u])=>{o&&u&&(A.value=!1,te.value=!1)});const L=F("--"),G=$(()=>x.value.RATES),z=()=>{const o=G.value&&G.value[h.value.address]&&G.value[h.value.address].price,u=G.value&&G.value[b.value.address]&&G.value[b.value.address].price;if(o&&u){const p=new a(w.value>0?w.value:0).mul(o),ie=new a(y.value>0?y.value:0).mul(u),H=p.add(ie).toNumber();L.value=H>0&&H<.01?"$<0.01":"$"+Xe(H,2)}else L.value="--"};$e(()=>[w.value,y.value,xe.value],([o,u,p])=>{(o||u)&&!p?z():(!o||!u)&&!p&&(L.value="--")},{immediate:!0}),$e(()=>L,o=>{console.log(o,"71911111")},{immediate:!0});const K=F(),q=async()=>{var E,Re;if(!O.value&&!T.value)return!1;if(!w.value&&!y.value&&!O.value&&!T.value)return;const o=i.value;if(Oe(o))return;const{TickUtil:u,TickMath:p,getNearestTickByTick:ie}=f.value,H=o==null?void 0:o.token_a.decimals,ae=o==null?void 0:o.token_b.decimals;let le,V,J,W,pe,Ie,We;if(o.token_a.address.toLowerCase()===h.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===b.value.address.toLowerCase()?We=!0:We=!1,O.value==="0"&&T.value==="∞")J=u.getMinIndex(Number(o.tickSpacing)),W=u.getMaxIndex(Number(o.tickSpacing));else if(D.value=="custom"){We?(le=Number(O.value),V=Number(T.value)):(le=new a(1).div(T.value).toString(),V=new a(1).div(O.value).toString());try{pe=le==0?-443636:p.priceToTickIndex(new a(le),H,ae)}catch{pe=-443636}try{Ie=p.priceToTickIndex(new a(V),H,ae)}catch{Ie=443636}J=ie(pe,Number(o.tickSpacing)),W=ie(Ie,Number(o.tickSpacing))}else J=(E=Ke.value[D.value])==null?void 0:E.lower,W=(Re=Ke.value[D.value])==null?void 0:Re.upper;const Ze=G.value[o==null?void 0:o.token_a.address].price,be=G.value[o==null?void 0:o.token_b.address].price;Ae.value?new Ue(o.current_sqrt_price):new Ue(1/o.current_sqrt_price),console.log(Ae.value,"===>direction.value"),console.log(o,"poolInfos===>"),console.log(J,W,"####tick_lower tick_upper 889"),console.log(L.value,"liquidityTotalAmount.value");try{const{amountA:Le,amountB:qe,tokenAmountsInfo:Me}=await f.value.estCoinAmountsFromTotalAmount({lowerTick:J,upperTick:W,decimalsA:H,decimalsB:ae,curSqrtPrice:new Ue(o.current_sqrt_price),totalAmount:L.value.replace(/[^\d.]/g,""),tokenPriceA:Ze,tokenPriceB:be});console.log(Le,qe,"###estCoinAmountsFromTotalAmount 844"),console.log(o.needReverse,Ae.value,"===>849"),K.value=Me,o.needReverse?Ae.value?(w.value=Le,y.value=qe):(w.value=qe,y.value=Le):(w.value=Le,y.value=qe)}catch(Le){console.log(Le,"e===>")}};$e([O,T],([o,u])=>{console.log(o,u,"==>minPrice,maxPrice"),xe.value?xe.value&&q():I(),u!=="∞"&&Number(o)!==0&&Number(u)!==0&&Number(o)>=Number(u)?Ye.value=!0:Ye.value=!1,Number(o)==0&&Number(u)==0&&lt.value&&(Ye.value=!0,console.log("价格区间错误"))},{deep:!0,immediate:!0});const Fe=o=>{console.log(o,"e");const u=o.replace(/[^\d.]/g,""),p="$"+Xe(u);xe.value=!0,L.value=p,u>0?q():(w.value="",y.value="")},C=F(!1),{setTransactionTxid:oe,setTransactionDesc:Je,setIsShowWaiting:Ne,setIsShowSuccess:nt,setPositiomNum:t,setIsShowRejected:g}=ke,P=uo(),_=$(()=>x.value.currentPositionInfo),Te=F(!1),j=async o=>{var pe,Ie,We,Ze;console.log(i.value,"===> poolInfo.value"),C.value=!1,x.value.currentPositionInfo={},oe(""),Je(e("tips.increaseLiquiditySuccess",{from:A.value?"":`${w.value} ${(pe=h.value)==null?void 0:pe.symbol}`,and:!A.value&&!te.value?"and":"",to:te.value?"":`${y.value} ${(Ie=b.value)==null?void 0:Ie.symbol}`})),Ne(!0);const u=Ae.value?ye.value:!ye.value;let p,ie,H,ae,le,V;const J=i.value.token_a.decimals,W=i.value.token_b.decimals;if(O.value==="0"&&T.value==="∞")H=f.value.TickUtil.getMinIndex(Number(i.value.tickSpacing)),ae=f.value.TickUtil.getMaxIndex(Number(i.value.tickSpacing));else if(D.value=="custom"){Ae.value?(p=Number(O.value),ie=Number(T.value)):(p=new a(1).div(T.value).toString(),ie=new a(1).div(O.value).toString()),console.log("0519###toAdd###min###",p),console.log("0519###toAdd###max###",ie),console.log("0519###toAdd###minPrice.value###",O.value),console.log("0519###toAdd###maxPrice.value###",T.value);try{le=p==0?f.value.TickUtil.getMinIndex(Number(i.value.tickSpacing)):f.value.TickMath.priceToTickIndex(new a(p),J,W)}catch{le=f.value.TickUtil.getMinIndex(Number(i.value.tickSpacing))}try{V=f.value.TickMath.priceToTickIndex(new a(ie),J,W)}catch{V=f.value.TickUtil.getMaxIndex(Number(i.value.tickSpacing))}H=f.value.getNearestTickByTick(le,Number(i.value.tickSpacing)),ae=f.value.getNearestTickByTick(V,Number(i.value.tickSpacing))}else H=Ke.value[D.value].lower,ae=Ke.value[D.value].upper;console.log(H,ae,"####tick_lower tick_upper 889"),console.log(i.value,"==>poolInfo.value.curSqrtPrice");try{let be;xe.value?be=await f.value.getCreateAddLiquidityPayload({pool:i.value,curSqrtPrice:new Ue(i.value.current_sqrt_price),tickLower:H,tickUpper:ae,slippage:Number(N.value)/100,tokenAmounts:K.value}):be=await f.value.getAddLiquidityTransactionPayload({pool:{poolAddress:i.value.poolAddress,token_a:i.value.token_a,token_b:i.value.token_b},amount:ye.value?w.value:y.value,fix_amount_a:u,tick_lower:H,tick_upper:ae,index:0,slippage:Number(N.value)/100,roundUp:!0,collect_fee:!1,curSqrtPrice:new Ue(i.value.current_sqrt_price)}),console.log(be,"payload===?");let E;if(R.value==="Aptos")E=await S.value.currentWallet.signAndSubmitTransaction(be);else{const Re=await S.value.currentWallet.signAndExecuteTransactionBlock(be);E=f.value.handleTx(Re)}if(console.log("0410###tx###",E),E&&E.hash){oe(E.hash),Ne(!1),nt(!0);let Re;i.value.needReverse?i.value.token_a.address.toLowerCase()===h.value.address.toLowerCase()&&i.value.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Re=!1:Re=!0:i.value.token_a.address.toLowerCase()===h.value.address.toLowerCase()&&i.value.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Re=!0:Re=!1,console.log(Re,"===>directs");const Le={title:"Supplied",desc:e("tips.addLiquiditySuccessText",{from:A.value?"":`${w.value} ${(We=h.value)==null?void 0:We.symbol}`,and:!A.value&&!te.value?"and":"",to:te.value?"":`${y.value} ${(Ze=b.value)==null?void 0:Ze.symbol}`}),hash:E.hash,tit:"Position Created",icon:"icon-icon-Position-Created"};R.value!=="Aptos"&&(Le.res=E.res),f.value.showTransitionPending(Le);const qe=await f.value.watchTransaction(Le,!0);if(qe.status){if(nt(!1),x.value.setCurrentPositionLoading(!0),Te.value=!0,console.log(qe.nftInfo,"===> watchInfo.nftInfo"),R.value==="Aptos"){if(await x.value.setCurrentPositionInfo(qe.nftInfo[0].data.id.creator,qe.nftInfo[0].data.id.collection,qe.nftInfo[0].data.name,R.value),o)try{await P.subscribePosition({pool_address:_.value.poolAddress,position_index:_.value.index},_.value.nftHash)}catch(Me){console.log(Me,"e")}}else{const Me=qe.nftInfo,he=await Pt(2e3);if(await x.value.setCurrentPositionInfo(Me==null?void 0:Me.pool,"","",R.value,Me==null?void 0:Me.position),await Pt(1e3),console.log("0529###nftInfo###",Me),console.log("0529###currentPositionInfo.value.index###",_.value.index),o)try{await P.subscribePosition({pool_address:_.value.poolAddress,position_index:_.value.index},_.value.nftHash)}catch(He){console.log(He)}}setTimeout(()=>{_e.updateCurrentPools(i.value.poolAddress,R.value),f.value.getAccount(S.value.address)},3e3),setTimeout(async()=>{St(f,i)},3e3)}t()}else Ne(!1),g(!0);w.value="",y.value=""}catch(be){w.value="",y.value="",console.log("0330###Add liquidity Error###",be),Ne(!1),g(!0)}},ce=$(()=>!w.value&&!y.value?(console.log("addLiquidityBtnDisabled11111"),!0):Number(w.value)>Number(m.value)||Number(y.value)>Number(ne.value)?(console.log("addLiquidityBtnDisabled22222"),!0):je.value!==e("button.addLiquidity")&&je.value!==e("newAdd.preview")?(console.log("addLiquidityBtnDisabled33333###",je.value),!0):i.value&&i.value&&i.value.is_pause?(console.log("addLiquidityBtnDisabled44444"),!0):Number(w.value)<=0&&Number(y.value)<=0||!A.value&&Number(w.value)==0||!te.value&&Number(y.value)==0),Ee=$(()=>!h.value||!b.value),je=$(()=>i.value&&i.value.is_pause?"Pool Closed":!h.value||!b.value||Ee.value?e("modal.selectTokenModalTitle"):Number(w.value)>Number(m.value)?e("button.insufficientBalance",{name:h.value.symbol}):Number(y.value)>Number(ne.value)?e("button.insufficientBalance",{name:b.value.symbol}):!Number(w.value)&&!Number(y.value)?e("button.enterAmount"):T.value!=="∞"&&Number(O.value)>=Number(T.value)?e("newAdd.invalidRange"):e("button.addLiquidity")),Se=F({}),de=F({}),De=F(!1),it=(o,u)=>{console.log(c.value,"===>currentCoinKey.value"),console.log(o);const p=localStorage.getItem(o.address);console.log(x.value.tokensObj,"===>pools.value.tokensObj"),console.log(p,"===>coinLocak"),x.value.tokensObj&&x.value.tokensObj[o.address]&&x.value.tokensObj[o.address].isSelfBuilt&&!p&&(u=="fromCoin"&&(Se.value=o),u=="toCoin"&&(de.value=o),De.value=!0)};$e(()=>[h.value,b.value],([o,u])=>{o&&!Oe(o)&&it(o,"fromCoin"),u&&!Oe(u)&&it(u,"toCoin")},{immediate:!0});const l=Jt(),s=()=>{R.value!=="Aptos"?l.push("/pool/list"):l.push("/pools")},Be=o=>{xe.value,j(o)},me=()=>{Y.query.action!=="create-pool"&&Y.query.actions!=="new-position"&&(St(f,i),I(),_e.updateCurrentPools(i.value.poolAddress,R.value)),_e.setPoolConfigList(R.value,ue.value.filterCoinsObj)},ve=$(()=>{var p,ie,H,ae,le,V;const o=(H=G.value[(ie=(p=h)==null?void 0:p.value)==null?void 0:ie.address])==null?void 0:H.price,u=(V=G.value[(le=(ae=b)==null?void 0:ae.value)==null?void 0:le.address])==null?void 0:V.price;return!!(o&&u)});return $e(()=>[Y,x.value.tokensObj],([o,u])=>{var p;u&&!Oe(u)&&(b.value||(b.value=x.value.tokensObj[(p=o==null?void 0:o.query)==null?void 0:p.toCoin]))},{immediate:!0,deep:!0}),{positionError:Ye,decimalUi:ge,poolInfo:i,fromCoinAmount:w,toCoinAmount:y,fromCoin:h,toCoin:b,theme:Pe,showFromCoinLock:A,showToCoinLock:te,fromCoinBlance:m,toCoinBlance:ne,maxBtnSelect:n,halfBtnSelect:k,fixedFromCoin:ye,openCoinSelect:re,currentCoinKey:c,existingCoins:v,lastSelectCoin:U,showCoinSelect:Z,onCoinSelect:we,liquidityTotalAmount:L,toggle:jt,onInput:Fe,isInputTotalAmount:xe,isViewDetail:Te,addLiquidityBtnDisabled:ce,addLiquidityBtnText:je,isShowTokenWarning:De,chainName:R,closeTokenWarning:s,warningFromCoin:Se,warningToCoin:de,isShowLiquidityModal:C,currentPrice:lt,currentPriceReverse:bt,currentPriceTab:D,minPrice:O,maxPrice:T,toAdd:j,direction:Ae,wallet:S,getAddLiquidityType:Be,clickRefresh:me,isShowtotalAmount:ve}}});const yn={class:"new-liquidity-right"},Cn={class:"deposit-title"},_n={class:"card-container"},Pn={key:0,class:"lock"},Tn={class:"card-item"},Sn={class:"card-item"},In={key:0,class:"total-amount"},Ln=r("span",null,"Total Amount",-1);function An(e,d,ke,ue,R,_e){const x=Ft,X=io,S=Ut,Y=oo,i=zt,A=Qt,te=ro,Pe=lo,Ce=so;return B(),Q("div",yn,[r("div",Cn,[ze(x,{"pool-info":e.poolInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"])]),r("div",_n,[e.positionError?(B(),Q("div",Pn,[ze(X)])):ee("",!0),r("div",Tn,[ze(S,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":d[0]||(d[0]=m=>e.fromCoinAmount=m),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:d[1]||(d[1]=m=>e.maxBtnSelect("fromCoin")),onOnHalf:d[2]||(d[2]=m=>e.halfBtnSelect("fromCoin")),onOnInput:d[3]||(d[3]=m=>{e.fromCoinAmount=m,e.fixedFromCoin=!0,e.isInputTotalAmount=!1}),onOnSelect:d[4]||(d[4]=m=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.positionError?(B(),Ge(Y,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):ee("",!0)]),r("div",Sn,[ze(S,{modelValue:e.toCoinAmount,"onUpdate:modelValue":d[5]||(d[5]=m=>e.toCoinAmount=m),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:d[6]||(d[6]=m=>e.maxBtnSelect("toCoin")),onOnHalf:d[7]||(d[7]=m=>e.halfBtnSelect("toCoin")),onOnInput:d[8]||(d[8]=m=>{e.toCoinAmount=m,e.fixedFromCoin=!1,e.isInputTotalAmount=!1}),onOnSelect:d[9]||(d[9]=m=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.positionError?(B(),Ge(Y,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):ee("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme=="default"?(B(),Q("img",{key:1,class:"add",src:co,alt:"",onClick:d[10]||(d[10]=(...m)=>e.toggle&&e.toggle(...m))})):ee("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme!=="default"?(B(),Q("img",{key:2,class:"add",src:mo,alt:"",onClick:d[11]||(d[11]=(...m)=>e.toggle&&e.toggle(...m))})):ee("",!0)]),e.isShowtotalAmount?(B(),Q("div",In,[Ln,r("span",null,se(e.liquidityTotalAmount)+" ",1)])):ee("",!0),ze(i,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"fixed-from-coin":e.fixedFromCoin,"is-input-total-amount":e.isInputTotalAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price-tab":e.currentPriceTab,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","fixed-from-coin","is-input-total-amount","min-price","max-price","current-price-tab","current-price","current-price-reverse"]),ze(A,{class:"add-liquidity-btn",disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,onClick:d[12]||(d[12]=m=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:gt(()=>[Rt(se(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),e.showCoinSelect?(B(),Ge(te,{key:1,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:d[13]||(d[13]=m=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):ee("",!0),e.isViewDetail?(B(),Ge(Pe,{key:2,"pool-info":e.poolInfo,onOnClose:d[14]||(d[14]=m=>e.isViewDetail=!1)},null,8,["pool-info"])):ee("",!0),e.isShowLiquidityModal?(B(),Ge(Ce,{key:3,"pool-info":e.poolInfo,title:e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direction,"is-increase":!1,onToAdd:e.getAddLiquidityType,onOnClose:d[15]||(d[15]=m=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onToAdd"])):ee("",!0)])}const Xt=ot(wn,[["render",An]]),Nn=tt({components:{NewLiquidityLeft:xt,NewLiquidityRight:Xt},setup(){Bt(()=>{ao()});const e=wt();return{tickList:Qe,route:e}}});const qn={key:0,class:"loading-spin-liquidity loading-global"},Mn={class:"privide-liquidity"};function $n(e,d,ke,ue,R,_e){var Y,i;const x=kt,X=xt,S=Xt;return B(),Q(rt,null,[!e.tickList&&((i=(Y=e.route)==null?void 0:Y.query)!=null&&i.poolAddress)?(B(),Q("div",qn,[ze(x)])):ee("",!0),r("div",Mn,[ze(X),ze(S)])],64)}const mi=ot(Nn,[["render",$n],["__scopeId","data-v-fc58011a"]]);export{mi as default};
