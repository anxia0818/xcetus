import{u as K,a as _e}from"./sha256.85e68528.js";import{a as J,C as S,e as Q,o as g,f as T,r as C,E as ne,D as B,h as r,t as w,i as E,w as W,v as H,R as re,x as V,I as se,z as ue,B as ce,j as G,l as Pe,O as ye,P as he,G as Se,c as z,H as Ce,u as Y,S as $e,a7 as Te,p as de,k as me,K as ie,U as we,A as Ie,b as Ne}from"./entry.49ba3563.js";import{_ as Ae}from"./img-lock_2x.a28135f4.js";import{_ as Me}from"./lock.55768897.js";/* empty css              *//* empty css              */import{e as fe,d as U,u as te,a as x,k as ve,c as oe,f as Oe,b as Z}from"./pool.05eab7a0.js";import{D as y}from"./decimal.0bdeb344.js";import{g as ae,t as le}from"./tick.80bde78c.js";import{i as ee}from"./import-icon.de3e6c66.js";import{_ as pe}from"./token-warning.9711d1e5.js";/* empty css              *//* empty css              */import{_ as Be}from"./refresh-icon.a84fa01a.js";import{_ as je}from"./swap-setting.1b512470.js";const Re=J({setup(){const e=K();return{storeIndex:S(()=>e)}}});const Le={class:"create-pool-lock"},qe={key:0,src:Ae,alt:""},Fe={key:1,src:Me,alt:""};function De(e,t,s,f,b,c){return g(),T("div",Le,[e.storeIndex.theme=="default"?(g(),T("img",qe)):(g(),T("img",Fe))])}const Zn=Q(Re,[["render",De],["__scopeId","data-v-fb497971"]]),Ue=J({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},emits:["onInput"],setup(e,t){const s=C(""),f=C("");let b=C(""),c=C("");const n=ne(),P=K(),d=S(()=>P),A=S(()=>d.value.chainName?fe(d.value.chainName):{}),$=()=>{if(!(Number.isNaN(s.value)||Number(s.value)!==0&&!s.value||!e.poolInfo.tickSpacing))try{const o=ae(new y(s.value.toString()),Number(u.value.tickSpacing)),l=le(o+Number(u.value.tickSpacing));if(e.pType=="Min"&&Number(l.toString())>=Number(c.value.toString()))return;const k=l.toString();t.emit("onInput",k)}catch{t.emit("onInput","")}},q=()=>{try{if(Number.isNaN(s.value)||!s.value||!e.poolInfo.tickSpacing)return;const o=ae(new y(s.value),Number(u.value.tickSpacing)),l=le(o-Number(u.value.tickSpacing)),k=l.toString();if(e.pType=="Max"&&Number(l)<=Number(b.value))return;t.emit("onInput",k)}catch{t.emit("onInput","")}},F=o=>{let l=o.toString().replace(/[^\d.]/g,"");const k=/^\d+(\.\d+)?$/;l.split(".").length>2&&!k.exec(l)&&(l=l.substr(0,l.length-1)),f.value=String(l),console.log(l,"v===>")},i=o=>{if(o&&o!=="0"&&o!=="∞"){s.value=o;const k=o.toString().split(".")[1];f.value=o!=="0"&&o!=="∞"&&k&&k.length>6?U(o.toString(),6):o.toString()}else(o=="0"||o=="∞"||n.query.action)&&(f.value=o)},I=o=>{var v,m,p,N;const{TickUtil:l,TickMath:k,getNearestTickByTick:M}=A.value;console.log("1113###newLiquiditySetPrice###onBlur###event###",o);const h=o.target.value;console.log("1113###newLiquiditySetPrice###onBlur###value###",h);let O;if(h==="0"){O=-443636,t.emit("onInput","0");return}else if(h!=="0"&&h){const D=k.priceToTickIndex(new y(h),(v=u.value.token_a)==null?void 0:v.decimals,(m=u.value.token_b)==null?void 0:m.decimals);console.log("1113###newLiquiditySetPrice###onBlur###t###",D),O=M(Number(D),Number(u.value.tickSpacing)),console.log("1113###newLiquiditySetPrice###onBlur###tick###",O);const R=k.tickIndexToPrice(new y(O),(p=u.value.token_a)==null?void 0:p.decimals,(N=u.value.token_b)==null?void 0:N.decimals);console.log("1113###newLiquiditySetPrice###onBlur###price###",R.toString()),i(R.toString()),t.emit("onInput",R.toString())}else t.emit("onInput")};B(()=>e.defaultMinPrice,(o,l)=>{o!==l&&(console.log(e.defaultMinPrice,"props.defaultMinPrice===>"),b.value=e.defaultMinPrice,console.log(b.value,"props.minPrice.value===>"))},{immediate:!0}),B(()=>e.defaultMaxPrice,(o,l)=>{o!==l&&(c.value=e.defaultMaxPrice)},{immediate:!0}),B(()=>[e.inputValue,n.query.action],([o])=>{console.log("1113###newLiquiditySetPrice###watch###newValue###",o),i(o)},{immediate:!0});const u=C({});B(()=>e.poolInfo,(o,l)=>{o&&(u.value=o)},{immediate:!0});const a=C("");return B(()=>e.currentPriceTab,o=>{a.value=o,console.log(e.currentPriceTab,"===>props.currentPriceTab")},{immediate:!0}),console.log(e,"props=======>"),{addPrice:$,minusPrice:q,oValue:f,changeValue:F,isDisabled:a,route:n,onBlur:I}}});const Ve={class:"set-price-item"},Ee={class:"title"},We={class:"input-box"},ze={key:0,class:"minus-btn"},He={key:1,class:"plus-btn"};function Ge(e,t,s,f,b,c){const n=se,P=re;return g(),T("div",Ve,[r("div",Ee,w(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),E(P,{loading:e.loading,active:"",paragraph:!1},{default:W(()=>[r("div",We,[e.currentPriceTab!=="full range"?(g(),T("a",ze,[r("div",{class:H(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"reductionDis":"reduction"),onClick:t[0]||(t[0]=(...d)=>e.minusPrice&&e.minusPrice(...d))},"-",2)])):V("",!0),E(n,{id:"pValu",value:e.oValue,"onUpdate:value":t[1]||(t[1]=d=>e.oValue=d),disabled:e.route.query.action&&!e.intPrice,autocomplete:"off",placeholder:"0",onChange:t[2]||(t[2]=d=>e.changeValue(d.target.value)),onBlur:t[3]||(t[3]=d=>e.onBlur(d))},null,8,["value","disabled"]),e.currentPriceTab!=="full range"?(g(),T("a",He,[r("div",{class:H(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"addDis":"add"),onClick:t[4]||(t[4]=(...d)=>e.addPrice&&e.addPrice(...d))},"+",2)])):V("",!0)])]),_:1},8,["loading"]),r("p",{class:H(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},w(e.toCoin&&e.toCoin.symbol)+" per "+w(e.fromCoin&&e.fromCoin.symbol),3)])}const ge=Q(Ue,[["render",Ge],["__scopeId","data-v-5485c082"]]),Ke=J({components:{NewLiquiditySetPrice:ge},props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},setup(e,t){let s=C(""),f=C(""),b=C(),c=C(!1),n=C(!1);const P=C({}),d=K(),A=S(()=>d);ue(()=>{s.value=e.min,f.value=e.max}),B(()=>e.currentPriceTab,(a,o)=>{a!==o&&(b.value=e.currentPriceTab)},{immediate:!0}),B(()=>e.min,(a,o)=>{a!==o&&(s.value=a,console.log(e.min,"===> props.min"))}),B(()=>e.max,(a,o)=>{a!==o&&(f.value=a)}),B(()=>e.poolInfo,(a,o)=>{a&&(P.value=a)},{immediate:!0});const $=C("");B(()=>e.intPrice,a=>{console.log(e.intPrice,"===>props.intPrice"),$.value=a},{immediate:!0,deep:!0});const q=a=>{console.log(a,"val===>123"),s.value=a,t.emit("onChangeMinPrice",a)},F=a=>{console.error("1113###new-liquidity-set-price###changeMaxPrice###val###",a),f.value=a,t.emit("onChangeMaxPrice",a)};B(c,(a,o)=>{a!==o&&t.emit("onChangeFullRange",a)});const i=()=>{s.value=e.defaultMinPrice,f.value=e.defaultMaxPrice,n.value=!1,c.value=!1},I=()=>{n.value=!1,s.value="0",f.value="∞"};return B(c,(a,o)=>{a!==o&&t.emit("onChangeFullRange",a)}),{store:A,changeMinPrice:q,changeMaxPrice:F,importIcon:ee,resetPrice:i,changeShowUnderStand:()=>{c.value=!c.value,c.value?n.value=!0:i(),n.value||(s.value=e.defaultMinPrice,f.value=e.defaultMaxPrice)},showUnderStand:n,minPrice:s,maxPrice:f,understand:I,isRadio:c,initPirce:$}}});const Je={class:"set-price"},Qe={class:"card-container"},Xe={key:0,class:"card"},Ye={key:1,class:"understand"},Ze={class:"left"},xe={class:"right"};function en(e,t,s,f,b,c){const n=ge,P=ce;return g(),T("div",Je,[r("div",Qe,[e.showUnderStand?(g(),T("div",Ye,[r("div",Ze,[r("p",null,w(e.$t("common.lowerEfficiency")),1),r("p",null,w(e.$t("common.lowerEfficiencyTips")),1)]),r("div",xe,[E(P,{onClick:e.understand},{default:W(()=>[G(w(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(g(),T("div",Xe,[E(n,{value:e.minPrice,"onUpdate:value":t[0]||(t[0]=d=>e.minPrice=d),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,"int-price":e.initPirce,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","int-price","onOnInput","onAddValue","onDelValue"]),E(n,{value:e.maxPrice,"onUpdate:value":t[1]||(t[1]=d=>e.maxPrice=d),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"int-price":e.initPirce,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","int-price","current-price-tab","onOnInput","onAddValue","onDelValue"])]))])])}const xn=Q(Ke,[["render",en],["__scopeId","data-v-d95990c1"]]),nn=J({components:{TokenWarning:pe},props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,t){const{t:s,locale:f}=Pe(),b=K(),c=S(()=>b),n=S(()=>new y(Number(e.balance)).div(2)),P=ye(he,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function d(){this.$emit("onSelect")}const A=v=>{const m=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(l==null?void 0:l.value)&&(l==null?void 0:l.value)}})?).*$`);v.target.value=v.target.value.replace(m,"$1")},$=_e(),q=S(()=>$),F=te(),i=S(()=>F),I=S(()=>i.value.tokensWarningObj);let u={};B(()=>i.value.RATES,v=>{v&&(console.log(v,"price====>"),u=v)},{immediate:!0});const a=S(()=>(console.log(e.inputValue,"==>props.inputValue"),console.log(e.coinName,"===>props.coinName"),Oe(Number(e.inputValue)*Number(u&&u[e.address]&&u[e.address].price),2))),o=S(()=>{var v,m,p;return console.log((v=i.value.tokensObj[e.address])==null?void 0:v.labels,"===> pool.value.tokensObj[props.address]?.labels"),i.value.tokensObj&&e.address&&i.value.tokensObj[e.address]&&((m=i.value.tokensObj[e.address])==null?void 0:m.labels)&&((p=i.value.tokensObj[e.address])==null?void 0:p.labels[0])}),l=S(()=>{var v;return i.value.tokensObj&&e.address&&i.value.tokensObj[e.address]&&((v=i.value.tokensObj[e.address])==null?void 0:v.decimals)}),k=S(()=>{var v,m,p,N;return e.coinIcon||((m=(v=i==null?void 0:i.value)==null?void 0:v.tokensObj[e.address])==null?void 0:m.logo_url)||((N=(p=i==null?void 0:i.value)==null?void 0:p.tokensObj[e.address])==null?void 0:N.logoURI)||(c.value.theme==="default"?ee("/image/coins/unknown.png"):ee("/image/coins/sui-unknown.png"))}),M=S(()=>i.value.tokensObj),h=S(()=>c.value.theme);return{route:ne(),theme:h,currentIcon:k,tokensObj:M,pool:i,halfBalance:n,coinLabels:o,t:s,addCommom:x,store:c,wallet:q,indicator:P,inputChange:A,importIcon:ee,selectCoin:d,amountPirce:a,coinDecimals:l,formatNumber:ve,tokensWarningObj:I,checkNullObj:oe}}});const tn=e=>(de("data-v-3a378845"),e=e(),me(),e),on={class:"card"},an={class:"top"},ln={key:1,class:"input-div"},rn={key:0},sn={class:"loading-token"},un={key:1},cn={key:0},dn=tn(()=>r("use",{"xlink:href":"#icon-icon_on"},null,-1)),mn=[dn],fn={class:"bottom"},vn={key:0,class:"amount-price"},pn={key:1},gn={class:"top"},bn={class:"right"},kn={class:"balance"};function _n(e,t,s,f,b,c){const n=se,P=$e,d=Te,A=pe,$=re,q=ce,F=Se("image");return g(),T("div",on,[r("div",an,[e.inputDisabled?(g(),T("div",ln,[e.inputValue?(g(),T("span",rn,w(e.inputValue),1)):(g(),z(P,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(g(),z(n,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:t[0]||(t[0]=i=>e.$emit("onInput",i.target.value)),onFocus:t[1]||(t[1]=i=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),r("div",{class:H(["left",[e.hasArrow?"":"nohands",e.route.name=="swap"?"left-opcity":""].join("")]),onClick:t[2]||(t[2]=i=>e.pool.isTokenLoading?"":e.selectCoin())},[r("div",sn,[e.pool.isTokenLoading?(g(),z(d,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):e.address?Ce((g(),T("img",un,null,512)),[[F,e.currentIcon]]):V("",!0),E(A,{address:e.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),E($,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:W(()=>[r("div",null,[r("p",null,w(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(g(),T("p",cn,w(e.coinLabels),1)):V("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(g(),T("svg",{key:0,class:H(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},mn,2)):V("",!0)],2)]),r("div",fn,[e.inputValue&&e.amountPirce!="--"?(g(),T("div",vn," $"+w(("formatNumber"in e?e.formatNumber:Y(ve))(e.amountPirce)),1)):(g(),T("div",pn)),r("div",gn,[r("div",bn,[G(w(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),r("span",kn,w(e.wallet.connected?("addCommom"in e?e.addCommom:Y(x))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(g(),z(q,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:Y(x))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:t[3]||(t[3]=i=>e.$emit("onHalf"))},{default:W(()=>[G(w("Half"))]),_:1},8,["disabled"])):V("",!0),e.havemax&&e.wallet.connected?(g(),z(q,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:Y(x))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:t[4]||(t[4]=i=>e.$emit("onMax"))},{default:W(()=>[G(w(e.$t("button.max")),1)]),_:1},8,["disabled"])):V("",!0)])])])])}const et=Q(nn,[["render",_n],["__scopeId","data-v-3a378845"]]),Pn=J({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fixedFromCoin:{type:Boolean,defalut:!0},isInputTotalAmount:{type:Boolean,default:!1},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},createPoolInfo:{type:Object,default:()=>({})},currentPrice:{type:Number,default:0},currentPriceReverse:{type:Number,default:0},currentPriceTab:{type:String,default:""}},setup(e){const t=te(),s=S(()=>t),f=K(),b=S(()=>f),c=ne(),n=S(()=>{let i=null;if(console.log(c.name,"91==>"),c.name=="liquidity-create")i=e.createPoolInfo;else for(const I in s.value.poolsObj){const u=s.value.poolsObj[I];u.address==c.query.poolAddress&&(console.log(u,"p===>"),i=u)}return i}),P=S(()=>b.value.chainName?fe(b.value.chainName):{}),d=S(()=>b.value.slippage),A=C(),$=C(),q=async()=>{if(!e.minPrice&&!e.maxPrice)return;const{TickUtil:i,TickMath:I,getNearestTickByTick:u}=P.value,a=n.value.token_a.decimals,o=n.value.token_b.decimals;let l,k,M,h,O,v,m,p=1,N=1;const D=n.value.current_tick_index;console.log(D,"==>currentTickIndex");let R=s.value.poolPriceConfigObj&&s.value.poolPriceConfigObj[n.value.address]&&s.value.poolPriceConfigObj[n.value.address].recommend_ranges||{};if(n.value.token_a.address.toLowerCase()===e.fromCoin.address.toLowerCase()&&n.value.token_b.address.toLowerCase()===e.toCoin.address.toLowerCase()?m=!0:m=!1,console.log(e.minPrice==="0"&&e.maxPrice==="∞","#### getRatio 171"),e.minPrice==="0"&&e.maxPrice==="∞")M=i.getMinIndex(n.value.tickSpacing),h=i.getMaxIndex(n.value.tickSpacing);else if(e.currentPriceTab=="custom"){m?(l=Number(e.minPrice),k=Number(e.maxPrice)):(l=e.maxPrice!=="∞"?new y(1).div(e.maxPrice).toString():1/0,k=new y(1).div(e.minPrice).toString()),console.log(l,k,"min===>");try{O=I.priceToTickIndex(new y(l),a,o)}catch{O=-443636}try{v=I.priceToTickIndex(new y(k),a,o)}catch{v=443636}l==0&&(O=-443636),M=u(O,Number(n.value.tickSpacing)),h=u(v,Number(n.value.tickSpacing)),console.log(M,h,"===>tick_upper")}else M=R&&R[e.currentPriceTab]&&R[e.currentPriceTab].lower,h=R&&R[e.currentPriceTab]&&R[e.currentPriceTab].upper;if(e.maxPrice==="∞"||D>=M&&D<=h){let L;if(e.fixedFromCoin){const X=new y(e.fromCoinAmount||1).mul(Math.pow(10,e.fromCoin.decimals)).toString();L=new Z(X)}else{const X=new y(e.toCoinAmount||1).mul(Math.pow(10,e.toCoin.decimals)).toString();L=new Z(X)}const{tokenMaxA:j,tokenMaxB:_}=await P.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:n.value.token_a,tokenB:n.value.token_b,lowerTick:M,upperTick:h,coinAmount:L,iscoinA:m?e.fixedFromCoin:!e.fixedFromCoin,roundUp:!0,slippage:Number(d.value)/100,curSqrtPrice:new Z(n.value.current_sqrt_price)});console.log(j,_,"===>tokenMaxA, tokenMaxB"),m?e.fixedFromCoin?(N=Number(_)>0?_:"",p=Number(j)>0?j:""):(p=Number(j)>0?j:"",N=Number(_)>0?_:""):(e.fixedFromCoin,N=j,p=_)}else D>h?m?(N=1,p=0):(p=1,N=0):D<M&&(m?(N=0,p=1):(N=1,p=0));if(e.minPrice=="0"&&e.maxPrice=="∞")A.value=50,$.value=50;else{const L=p?Number(p):0,j=N?Number(N):0;console.log(L,j,"amountA===>amountB");const _=new y(j).add(new y(m?new y(L*e.currentPrice):new y(L*e.currentPriceReverse)));console.log(_,"===>totalAmount");const X=U(new y(L).mul(new y(m?e.currentPrice:e.currentPriceReverse)).div(_).mul(100).toNumber().toFixed(2),2),ke=U(new y(j).div(_).mul(100).toNumber().toFixed(2),2);A.value=X,$.value=ke,console.log(A.value,$.value,l,k,"====>336")}},F=()=>{var N,D,R,L,j;if(!e.minPrice&&!e.maxPrice)return;const{TickUtil:i,TickMath:I,getNearestTickByTick:u}=P.value,a=(N=n.value)==null?void 0:N.token_a.decimals,o=(D=n.value)==null?void 0:D.token_b.decimals;let l,k,M,h,O,v,m;console.log(n.value,"==>currentTickIndex"),n.value.current_tick_index;let p=s.value.poolPriceConfigObj&&s.value.poolPriceConfigObj[n.value.address]&&s.value.poolPriceConfigObj[n.value.address].recommend_ranges||{};if(((R=n.value)==null?void 0:R.token_a.address.toLowerCase())===e.fromCoin.address.toLowerCase()&&((L=n.value)==null?void 0:L.token_b.address.toLowerCase())===e.toCoin.address.toLowerCase()?m=!0:m=!1,console.log(m,"===>directs178"),e.minPrice==="0"&&e.maxPrice==="∞")M=i.getMinIndex(n.value.tickSpacing),h=i.getMaxIndex(n.value.tickSpacing);else if(e.currentPriceTab=="custom"||(j=c==null?void 0:c.query)!=null&&j.action){m?(l=Number(e.minPrice),k=Number(e.maxPrice)):(l=e.maxPrice!=="∞"?new y(1).div(e.maxPrice).toString():1/0,k=new y(1).div(e.minPrice).toString()),console.log(l,k,"min===>");try{O=I.priceToTickIndex(new y(l),a,o)}catch{O=-443636}try{v=I.priceToTickIndex(new y(k),a,o)}catch{v=443636}l==0&&(O=-443636),M=u(O,Number(n.value.tickSpacing)),h=u(v,Number(n.value.tickSpacing)),console.log(M,h,"===>tick_upper")}else M=p&&p[e.currentPriceTab]&&p[e.currentPriceTab].lower,h=p&&p[e.currentPriceTab]&&p[e.currentPriceTab].upper;try{const _=P.value.calculateDepositRatioFixTokenA(M,h,new Z(n.value.current_sqrt_price));console.log(_.ratioB.toNumber(),_.ratioA.toNumber(),"ratio===>"),console.log(m,"===>directs"),n.value.needReverse?m?(A.value=U(_.ratioA.mul(100).toNumber().toFixed(2),2),$.value=U(_.ratioB.mul(100).toNumber().toFixed(2),2)):(A.value=U(_.ratioB.mul(100).toNumber().toFixed(2),2),$.value=U(_.ratioA.mul(100).toNumber().toFixed(2),2)):(A.value=U(_.ratioA.mul(100).toNumber().toFixed(2),2),$.value=U(_.ratioB.mul(100).toNumber().toFixed(2),2))}catch(_){console.log(_,"###calculateDepositRatioFixTokenA error")}};return B(()=>[n.value,e.minPrice,e.maxPrice,e.fromCoinAmount,e.toCoinAmount,e.isInputTotalAmount],([i,I,u])=>{console.log("0421####ratio###watch###poolInfo###",i),console.log("0421####ratio###watch###minPrice###",I),console.log("0421####ratio###watch###maxPrice###",u),e.isInputTotalAmount?F():I&&u&&i&&!oe(i)&&(I!=="0"||u!=="0")?(q(),console.log("getRatio")):(console.log("0421####ratio###watch###clear###"),A.value="",$.value="")},{immediate:!0,deep:!0}),{fromCoinRatio:A,toCoinRatio:$}}});const yn={class:"deposit-ratio"},hn={class:"deposit-ratio-text"},Sn=r("span",null,"Deposit Ratio",-1),Cn=r("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-icon-tips1"})],-1),$n={class:"deposit-ratio-content"},Tn={class:"coin-ratio"},wn={class:"coin-a-ratio"},In={class:"coin-b-ratio"},Nn={class:"ratio-progress"};function An(e,t,s,f,b,c){var P,d;const n=we;return g(),T("div",yn,[r("div",hn,[Sn,E(n,{placement:"bottom","arrow-point-at-center":""},{title:W(()=>[r("span",null,w(e.$t("newAdd.depositRatioTips")),1)]),default:W(()=>[Cn]),_:1})]),r("div",$n,[r("div",Tn,[r("div",wn,[r("span",null,w((P=e.fromCoin)==null?void 0:P.symbol),1),G(" "+w(e.fromCoinRatio)+"% ",1)]),r("div",In,[r("span",null,w((d=e.toCoin)==null?void 0:d.symbol),1),G(" "+w(e.toCoinRatio)+"% ",1)])]),r("div",Nn,[r("div",{class:"from-percent",style:ie({width:e.fromCoinRatio+"%"})},null,4),r("div",{class:"to-percent",style:ie({width:e.toCoinRatio+"%"})},null,4)])])])}const nt=Q(Pn,[["render",An]]),Mn=J({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,t){const s=C(!1),f=C(null),b=C(0);let c=C(!1);const n=C(20),P=te(),d=K(),A=C(!1);ue(()=>{}),Ie(()=>{clearInterval(f.value)});const $=()=>{c.value=!1,f.value=setInterval(()=>{var a;A.value||b.value<n.value&&(b.value+=1,b.value===n.value&&((a=e==null?void 0:e.poolInfo)!=null&&a.poolAddress&&P.updateCurrentPools(e.poolInfo.poolAddress,d.chainName),b.value=0))},1e3)},q=S(()=>d.slippage),F=()=>{t.emit("clearAll")},i=()=>{c.value=!0,b.value=0,t.emit("clickRefresh"),setTimeout(()=>{c.value=!1,$()},1e3)};B(()=>e.poolInfo,a=>{a&&!f.value&&$()},{immediate:!0});const I=Ne(),u=ne();return console.log(u,"route"),{refresh:c,clickRefresh:i,isShowSwapSetting:s,countdown:b,autoRefreshTime:n,slippage:q,clearAll:F,checkNullObj:oe,router:I,route:u}}});const be=e=>(de("data-v-2e458a1a"),e=e(),me(),e),On={class:"title"},Bn=be(()=>r("div",{class:"left"},[r("span",null,"Deposit Amounts")],-1)),jn=be(()=>r("svg",{class:"icon","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Rn={key:0,class:"deposit-progress"};function Ln(e,t,s,f,b,c){const n=Be,P=je;return g(),T("div",On,[Bn,r("div",{class:H(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[r("div",{class:"slippage-icon",onClick:t[0]||(t[0]=d=>e.isShowSwapSetting=!0)},[jn,r("span",null,w(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(g(),T("div",Rn,[E(n,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):V("",!0)],2),e.isShowSwapSetting?(g(),z(P,{key:0,onOnClose:t[1]||(t[1]=d=>e.isShowSwapSetting=!1)})):V("",!0)])}const tt=Q(Mn,[["render",Ln],["__scopeId","data-v-2e458a1a"]]);export{tt as _,nt as a,Zn as b,et as c,xn as d};
