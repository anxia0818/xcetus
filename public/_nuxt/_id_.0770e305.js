import{_ as Ze}from"./new-position-title.6589875d.js";import{_ as fe}from"./token-warning.081c9d15.js";import{_ as qe}from"./auto-pool-apy-tips.7df9c5d7.js";import{u as Yo,a as C,g as re,c as zo,f as Ke,d as le,s as G,p as Re,b as Be,T as Po,e as to,h as Qe,i as xe,j as on}from"./pool.b13e860e.js";import{u as ye,a as ge}from"./sha256.de86593b.js";import{u as Jo,a as Ne}from"./autoPool.2ea49777.js";import{i as ae}from"./import-icon.de3e6c66.js";import{a as Uo,l as y,m as Zo,r as I,q as wo,e as No,s as $e,o as v,f as P,h as e,t as Oo,i as z,v as d,j as ce,x,u as M,p as Fo,k as Vo,y as ie,M as en,z as de,c as ro,w as Do,A as Me,C as we,D as Ie,E as Le,F as he,B as Oe,G as _e,b as nn,H as tn,I as sn,J as ln}from"./entry.c9ca09af.js";import"./decimal.633e31ee.js";import{D as i}from"./decimal.0e8aa3f1.js";import{_ as De}from"./assets-card.0b3a5b3b.js";import{_ as Ue}from"./coin-lock.af047681.js";import{_ as Fe,a as Ve}from"./auto-pool-remove-modal.785da074.js";import{afterCurrentPrice as pe}from"./data.56342f74.js";import{V as ke}from"./index.91953c1f.js";/* empty css              *//* empty css              */import"./back.a6c9dcbd.js";import"./swap-setting.a757bdd2.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.b53567cb.js";const an=Uo({components:{AutoPoolApyTips:qe},setup(){const o=ye(),s=y(()=>o),X=Yo(),W=y(()=>X),D=Jo(),T=y(()=>D),_=y(()=>s.value.theme),c=Zo(),$=I();wo(()=>[T.value.positionInfoObj,c.params.id],([a,u])=>{a&&!zo(a)&&u&&($.value=a[u],console.log($.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const h=y(()=>{var a;return(a=$.value)==null?void 0:a.needReverse}),t=a=>{var u;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((u=W.value.tokensObj[a==null?void 0:a.address])==null?void 0:u.logo_url)||(_.value==="default"?ae("/image/coins/unknown.png"):ae("/image/coins/sui-unknown.png"))},n=y(()=>{var a,u;return console.log((a=$==null?void 0:$.value)==null?void 0:a.poolUSD,"##positionInfo?.value?.poolUSD"),(u=$==null?void 0:$.value)==null?void 0:u.poolUSD}),A=y(()=>{var a,u;return T.value.apyObj&&((u=T.value.apyObj[(a=$.value)==null?void 0:a.id])==null?void 0:u.apr)||"--"});return{positionInfo:$,needReverse:h,getCoinIcon:t,tvl:n,apy:A,addCommom:C,getExplorerUrl:re}}});const Io=o=>(Fo("data-v-a77dba1b"),o=o(),Vo(),o),un={class:"auto-pool-v2-info"},rn={class:"pool-info"},dn={class:"left"},vn={class:"coin-a"},mn={alt:""},cn={class:"coin-b"},pn={alt:""},fn={class:"position-name"},yn={key:0,class:"pool-fee"},bn=Io(()=>e("span",null,"Fee tier",-1)),_n={class:"vault-address"},hn=["href"],kn=Io(()=>e("span",null,"Vault Address",-1)),gn=Io(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),$n=[kn,gn],wn={class:"pool-address"},In=["href"],Cn=Io(()=>e("span",null,"Pool Address",-1)),An=Io(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),Sn=[Cn,An],Pn={class:"apy-and-tvl"},Tn={class:"apy"},Rn=Io(()=>e("div",{class:"apy-title"},"APY",-1)),qn={class:"apy-text"},Bn={class:"tvl"},Nn=Io(()=>e("div",{class:"tvl-title"},"TVL",-1)),Mn={class:"tvl-text"},Ln={class:"pool-info h5-pool-info"},On={class:"left"},Dn={class:"coin-a"},Un={alt:""},Fn={class:"coin-b"},Vn={alt:""},En={class:"position-name"},Wn={key:0,class:"pool-fee"},Xn=Io(()=>e("span",null,"Fee tier",-1)),jn={class:"left"},Gn={class:"vault-address"},Hn=["href"],zn=Io(()=>e("span",null,"Vault Address",-1)),Yn=Io(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),Jn=[zn,Yn],Zn={class:"pool-address"},Kn=["href"],Qn=Io(()=>e("span",null,"Pool Address",-1)),xn=Io(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),ot=[Qn,xn],et={class:"apy-and-tvl"},nt={class:"apy"},tt=Io(()=>e("div",{class:"apy-title"},"APY",-1)),st={class:"apy-text"},lt={class:"tvl"},it=Io(()=>e("div",{class:"tvl-title"},"TVL",-1)),at={class:"tvl-text"};function ut(o,s,X,W,D,T){var h,t,n,A,a,u,R,r,m,q,L,O,J,f,p,w,U,E,so,F,g,lo,fo,yo,io,Z,ao,uo,k,K,Ro,go,Ko,Eo,To,qo,Wo,Xo,Qo,xo,vo,mo,oe,jo,Go,ee,b,B;const _=fe,c=qe,$=$e("image");return v(),P("div",un,[e("div",rn,[e("div",dn,[e("div",vn,[Oo(e("img",mn,null,512),[[$,o.needReverse?o.getCoinIcon((t=o.positionInfo)==null?void 0:t.token_b):o.getCoinIcon((h=o.positionInfo)==null?void 0:h.token_a)]]),z(_,{address:o.needReverse?(u=(a=o.positionInfo)==null?void 0:a.token_b)==null?void 0:u.address:(A=(n=o.positionInfo)==null?void 0:n.token_a)==null?void 0:A.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",cn,[Oo(e("img",pn,null,512),[[$,o.needReverse?o.getCoinIcon((r=o.positionInfo)==null?void 0:r.token_a):o.getCoinIcon((R=o.positionInfo)==null?void 0:R.token_b)]]),z(_,{address:o.needReverse?(O=(L=o.positionInfo)==null?void 0:L.token_a)==null?void 0:O.address:(q=(m=o.positionInfo)==null?void 0:m.token_b)==null?void 0:q.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",fn,d(o.needReverse?(f=(J=o.positionInfo)==null?void 0:J.token_b)==null?void 0:f.symbol:(w=(p=o.positionInfo)==null?void 0:p.token_a)==null?void 0:w.symbol)+" - "+d(o.needReverse?(E=(U=o.positionInfo)==null?void 0:U.token_a)==null?void 0:E.symbol:(F=(so=o.positionInfo)==null?void 0:so.token_b)==null?void 0:F.symbol),1),(g=o.positionInfo)!=null&&g.fee?(v(),P("div",yn,[bn,ce(" "+d(((lo=o.positionInfo)==null?void 0:lo.fee)*100)+"% ",1)])):x("",!0),e("div",_n,[e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:M(re))("poolAddress",(fo=o.positionInfo)==null?void 0:fo.id),target:"_blank"},$n,8,hn)]),e("div",wn,[e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:M(re))("poolAddress",(yo=o.positionInfo)==null?void 0:yo.address),target:"_blank"},Sn,8,In)])]),e("div",Pn,[e("div",Tn,[Rn,e("div",qn,[ce(d(o.apy)+" ",1),z(c)])]),e("div",Bn,[Nn,e("div",Mn,"$"+d(("addCommom"in o?o.addCommom:M(C))(o.tvl,2)),1)])])]),e("div",Ln,[e("div",On,[e("div",Dn,[Oo(e("img",Un,null,512),[[$,o.needReverse?o.getCoinIcon((Z=o.positionInfo)==null?void 0:Z.token_b):o.getCoinIcon((io=o.positionInfo)==null?void 0:io.token_a)]]),z(_,{address:o.needReverse?(K=(k=o.positionInfo)==null?void 0:k.token_b)==null?void 0:K.address:(uo=(ao=o.positionInfo)==null?void 0:ao.token_a)==null?void 0:uo.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Fn,[Oo(e("img",Vn,null,512),[[$,o.needReverse?o.getCoinIcon((go=o.positionInfo)==null?void 0:go.token_a):o.getCoinIcon((Ro=o.positionInfo)==null?void 0:Ro.token_b)]]),z(_,{address:o.needReverse?(qo=(To=o.positionInfo)==null?void 0:To.token_a)==null?void 0:qo.address:(Eo=(Ko=o.positionInfo)==null?void 0:Ko.token_b)==null?void 0:Eo.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",En,d(o.needReverse?(Xo=(Wo=o.positionInfo)==null?void 0:Wo.token_b)==null?void 0:Xo.symbol:(xo=(Qo=o.positionInfo)==null?void 0:Qo.token_a)==null?void 0:xo.symbol)+" - "+d(o.needReverse?(mo=(vo=o.positionInfo)==null?void 0:vo.token_a)==null?void 0:mo.symbol:(jo=(oe=o.positionInfo)==null?void 0:oe.token_b)==null?void 0:jo.symbol),1),(Go=o.positionInfo)!=null&&Go.fee?(v(),P("div",Wn,[Xn,ce(" "+d(((ee=o.positionInfo)==null?void 0:ee.fee)*100)+"% ",1)])):x("",!0)]),e("div",jn,[e("div",Gn,[e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:M(re))("poolAddress",(b=o.positionInfo)==null?void 0:b.id),target:"_blank"},Jn,8,Hn)]),e("div",Zn,[e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:M(re))("poolAddress",(B=o.positionInfo)==null?void 0:B.address),target:"_blank"},ot,8,Kn)])]),e("div",et,[e("div",nt,[tt,e("div",st,[ce(d(o.apy)+" ",1),z(c)])]),e("div",lt,[it,e("div",at,"$"+d(("addCommom"in o?o.addCommom:M(C))(o.tvl,2)),1)])])])])}const Ee=No(an,[["render",ut],["__scopeId","data-v-a77dba1b"]]),rt=Uo({setup(){const o=I(!0),s=Yo(),X=y(()=>s),W=Jo(),D=y(()=>W),T=Zo(),_=I();wo(()=>[D.value.positionInfoObj,T.params.id],([t,n])=>{t&&!zo(t)&&n&&(_.value=t[n],console.log(_.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const c=y(()=>{var t;return(t=_.value)==null?void 0:t.needReverse}),$=t=>{var n;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((n=X.value.tokensObj[t==null?void 0:t.address])==null?void 0:n.logo_url)||ae("/image/coins/sui-unknown.png")},h=y(()=>{var u,R,r;const t=(u=_==null?void 0:_.value)==null?void 0:u.price,n=(R=_==null?void 0:_.value)==null?void 0:R.minPrice,A=(r=_==null?void 0:_.value)==null?void 0:r.maxPrice;let a;if(t>=n&&t<=A){const m=new i(n).add(new i(A)).div(2).toNumber();a=t>m?50+new i(t).sub(m).div(m).toNumber():50-new i(t).sub(m).div(m).toNumber()}else t<n?(a=new i(t).sub(new i(n)).mul(100).toNumber()+15,console.log(a,"##result")):t>A&&(a=new i(t).sub(new i(A)).div(new i(A)).mul(100).toNumber()+70+15);return Number(Ke(a,0))});return{direct:o,positionInfo:_,needReverse:c,getCoinIcon:$,decimalUi:le,addCommom:C,sFixD:G,moveRatio:h}}}),dt=""+globalThis.__publicAssetsURL("sui-image/icon_currentprice@2x.png");const Mo=o=>(Fo("data-v-4a250835"),o=o(),Vo(),o),vt={class:"v2-position-range"},mt={class:"position-range-top"},ct=Mo(()=>e("div",null,"Position Range",-1)),pt={class:"base-coin"},ft={key:0},yt={alt:""},bt={key:1},_t={alt:""},ht={key:2},kt={key:3},gt=Mo(()=>e("p",null,"Base coin",-1)),$t={class:"coin-rate"},wt=Mo(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),It=Mo(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Ct=[wt,It],At={class:"position-range-bottom"},St=Mo(()=>e("div",{class:"current-price-title"},"Current Price",-1)),Pt={key:0,class:"current-price-text"},Tt={key:1,class:"current-price-text"},Rt=Mo(()=>e("div",{class:"current-price-title"},"Current Price",-1)),qt={key:0,class:"current-price-text"},Bt={key:1,class:"current-price-text"},Nt={class:"price-range"},Mt=Mo(()=>e("div",{class:"price-range-bg"},[e("div",{class:"price-range-border"})],-1)),Lt={class:"min-price"},Ot=Mo(()=>e("div",null,"Min Price",-1)),Dt={key:0},Ut={key:1},Ft={class:"max-price"},Vt=Mo(()=>e("div",null,"Max Price",-1)),Et={key:0},Wt={key:1};function Xt(o,s,X,W,D,T){var $,h,t,n,A,a,u,R,r,m,q,L,O,J,f,p,w,U,E,so,F,g,lo,fo,yo,io,Z,ao,uo,k,K,Ro;const _=fe,c=$e("image");return v(),P("div",vt,[e("div",mt,[ct,e("div",pt,[o.needReverse?(v(),P("div",bt,[Oo(e("img",_t,null,512),[[c,o.direct?o.getCoinIcon((R=o.positionInfo)==null?void 0:R.token_b):o.getCoinIcon((u=o.positionInfo)==null?void 0:u.token_a)]]),z(_,{address:o.direct?(L=(q=o.positionInfo)==null?void 0:q.token_b)==null?void 0:L.address:(m=(r=o.positionInfo)==null?void 0:r.token_a)==null?void 0:m.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(v(),P("div",ft,[Oo(e("img",yt,null,512),[[c,o.direct?o.getCoinIcon(($=o.positionInfo)==null?void 0:$.token_a):o.getCoinIcon((h=o.positionInfo)==null?void 0:h.token_b)]]),z(_,{address:o.direct?(n=(t=o.positionInfo)==null?void 0:t.token_a)==null?void 0:n.address:(a=(A=o.positionInfo)==null?void 0:A.token_b)==null?void 0:a.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),o.needReverse?(v(),P("span",kt,d(o.direct?(U=(w=o.positionInfo)==null?void 0:w.token_b)==null?void 0:U.symbol:(so=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:so.symbol),1)):(v(),P("span",ht,d(o.direct?(J=(O=o.positionInfo)==null?void 0:O.token_a)==null?void 0:J.symbol:(p=(f=o.positionInfo)==null?void 0:f.token_b)==null?void 0:p.symbol),1)),gt,e("div",$t,[e("div",{onClick:s[0]||(s[0]=go=>o.direct=!o.direct)},Ct)])])]),e("div",At,[e("div",{class:"current-price",style:ie({left:`${o.moveRatio>40&&o.moveRatio-60?o.moveRatio:o.moveRatio>92?92:o.moveRatio<=13?10:o.moveRatio-13}%`})},[St,(o.needReverse?!o.direct:o.direct)?(v(),P("div",Pt,d(("addCommom"in o?o.addCommom:M(C))(("decimalUi"in o?o.decimalUi:M(le))((F=o.positionInfo)==null?void 0:F.price,6))),1)):(v(),P("div",Tt,d(("addCommom"in o?o.addCommom:M(C))(("decimalUi"in o?o.decimalUi:M(le))(1/((g=o.positionInfo)==null?void 0:g.price),6))),1))],4),e("div",{class:"current-price h5-current-price",style:ie({left:`${o.moveRatio>40&&o.moveRatio-60?o.moveRatio:o.moveRatio>92?92:o.moveRatio<=23?0:o.moveRatio-13}%`})},[Rt,(o.needReverse?!o.direct:o.direct)?(v(),P("div",qt,d(("addCommom"in o?o.addCommom:M(C))(("decimalUi"in o?o.decimalUi:M(le))((lo=o.positionInfo)==null?void 0:lo.price,6))),1)):(v(),P("div",Bt,d(("addCommom"in o?o.addCommom:M(C))(("decimalUi"in o?o.decimalUi:M(le))(1/((fo=o.positionInfo)==null?void 0:fo.price),6))),1))],4),e("div",Nt,[Mt,e("img",{style:ie({left:`${o.moveRatio}%`}),src:dt,alt:""},null,4),e("div",Lt,[Ot,o.direct?(v(),P("div",Dt,d(((yo=o.positionInfo)==null?void 0:yo.minPrice)&&("sFixD"in o?o.sFixD:M(G))((io=o.positionInfo)==null?void 0:io.minPrice,6)),1)):(v(),P("div",Ut,d(((Z=o.positionInfo)==null?void 0:Z.maxPrice)&&("sFixD"in o?o.sFixD:M(G))(1/((ao=o.positionInfo)==null?void 0:ao.maxPrice),6)),1))]),e("div",Ft,[Vt,o.direct?(v(),P("div",Et,d(((uo=o.positionInfo)==null?void 0:uo.maxPrice)&&("sFixD"in o?o.sFixD:M(G))((k=o.positionInfo)==null?void 0:k.maxPrice,6)),1)):(v(),P("div",Wt,d(((K=o.positionInfo)==null?void 0:K.minPrice)&&("sFixD"in o?o.sFixD:M(G))(1/((Ro=o.positionInfo)==null?void 0:Ro.minPrice),6)),1))])])])])}const We=No(rt,[["render",Xt],["__scopeId","data-v-4a250835"]]),jt=Uo({components:{Modal:en},props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const s=y(()=>{var W,D;const X=G(((W=o.positionInfo)==null?void 0:W.poolUSD)/((D=o.positionInfo)==null?void 0:D.quoteUSD)*100,0);return console.log(X,"Pool Capacity Ratio"),Number(X)});return{sFixD:G,addCommom:C,ratio:s}}});const Ce=o=>(Fo("data-v-992de09d"),o=o(),Vo(),o),Gt=Ce(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ht={class:"deposit-slider"},zt={class:"info-block"},Yt=Ce(()=>e("div",{class:"leabl"},"Current Deposit：",-1)),Jt={class:"text"},Zt={class:"info-block"},Kt=Ce(()=>e("div",{class:"leabl"},"Max Capacity：",-1)),Qt={class:"text"};function xt(o,s,X,W,D,T){const _=de("Modal");return v(),ro(_,{width:"440px",visible:!0,footer:null,title:"Pool Capacity",onCancel:s[0]||(s[0]=c=>o.$emit("onClose"))},{closeIcon:Do(()=>[Gt]),default:Do(()=>{var c,$;return[e("div",Ht,[e("div",{class:"current-deposit",style:ie({width:`${o.ratio>100?100:o.ratio}%`})},null,4)]),e("div",zt,[Yt,e("div",Jt,"$"+d(("addCommom"in o?o.addCommom:M(C))(("sFixD"in o?o.sFixD:M(G))((c=o.positionInfo)==null?void 0:c.poolUSD,2))),1)]),e("div",Zt,[Kt,e("div",Qt,"$"+d(("addCommom"in o?o.addCommom:M(C))(("sFixD"in o?o.sFixD:M(G))(($=o.positionInfo)==null?void 0:$.quoteUSD,2))),1)])]}),_:1})}const Xe=No(jt,[["render",xt],["__scopeId","data-v-992de09d"]]),os=Uo({components:{AutoPoolV2PoolCapacity:Xe},setup(){const o=Yo(),s=y(()=>o),X=Jo(),W=y(()=>X),D=Zo(),T=I();wo(()=>[W.value.positionInfoObj,D.params.id],([h,t])=>{console.log(h,"##positionInfoObj"),h&&!zo(h)&&t&&(T.value=h[t],console.log(T.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const _=y(()=>{var h;return(h=T.value)==null?void 0:h.needReverse}),c=h=>{var t;return console.log(h,"info##"),(h==null?void 0:h.logoURI)||(h==null?void 0:h.logo_url)||((t=s.value.tokensObj[h==null?void 0:h.address])==null?void 0:t.logo_url)||ae("/image/coins/sui-unknown.png")},$=I(!1);return{needReverse:_,positionInfo:T,getCoinIcon:c,addCommom:C,isShowModal:$}}});const es=o=>(Fo("data-v-c6233d3e"),o=o(),Vo(),o),ns={class:"pool-composition"},ts={class:"pool-composition-top"},ss=es(()=>e("span",null,"Pool Composition",-1)),ls={class:"pool-composition-bottom"},is={class:"token-ratio"},as={class:"before-coin"},us={alt:""},rs={class:"after-coin"},ds={alt:""},vs={class:"token-num"},ms={class:"num-box"},cs={class:"num-box"};function ps(o,s,X,W,D,T){var h,t,n,A,a,u,R,r,m,q,L,O,J,f,p,w,U,E,so,F,g,lo,fo,yo,io,Z,ao,uo;const _=fe,c=Xe,$=$e("image");return v(),P("div",ns,[e("div",ts,[ss,e("div",{class:"pool-capacity",onClick:s[0]||(s[0]=k=>o.isShowModal=!0)},"Pool Capacity")]),e("div",ls,[e("div",is,[e("div",as,[e("div",null,[z(_,{address:o.needReverse?(A=(n=o.positionInfo)==null?void 0:n.token_b)==null?void 0:A.address:(t=(h=o.positionInfo)==null?void 0:h.token_a)==null?void 0:t.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),Oo(e("img",us,null,512),[[$,o.needReverse?o.getCoinIcon((u=o.positionInfo)==null?void 0:u.token_b):o.getCoinIcon((a=o.positionInfo)==null?void 0:a.token_a)]])]),e("span",null,d((R=o.positionInfo)==null?void 0:R.poolCoinARatio)+"%",1)]),e("div",rs,[e("span",null,d((r=o.positionInfo)==null?void 0:r.poolCoinBRatio)+"%",1),e("div",null,[Oo(e("img",ds,null,512),[[$,o.needReverse?o.getCoinIcon((q=o.positionInfo)==null?void 0:q.token_a):o.getCoinIcon((m=o.positionInfo)==null?void 0:m.token_b)]]),z(_,{address:o.needReverse?(f=(J=o.positionInfo)==null?void 0:J.token_a)==null?void 0:f.address:(O=(L=o.positionInfo)==null?void 0:L.token_b)==null?void 0:O.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),e("div",vs,[e("div",{class:"token-a-bg",style:ie({width:`${(p=o.positionInfo)==null?void 0:p.poolCoinARatio}%`})},null,4),e("div",{class:"token-b-bg",style:ie({width:`${(w=o.positionInfo)==null?void 0:w.poolCoinBRatio}%`})},null,4),e("div",ms,[e("div",null,d(("addCommom"in o?o.addCommom:M(C))((U=o.positionInfo)==null?void 0:U.poolCoinANum))+" "+d(o.needReverse?(g=(F=o.positionInfo)==null?void 0:F.token_b)==null?void 0:g.symbol:(so=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:so.symbol),1),e("div",null,"$"+d(("addCommom"in o?o.addCommom:M(C))((lo=o.positionInfo)==null?void 0:lo.poolCoinAUSD)),1)]),e("div",cs,[e("div",null,d(("addCommom"in o?o.addCommom:M(C))((fo=o.positionInfo)==null?void 0:fo.poolCoinBNum))+" "+d(o.needReverse?(ao=(Z=o.positionInfo)==null?void 0:Z.token_a)==null?void 0:ao.symbol:(io=(yo=o.positionInfo)==null?void 0:yo.token_b)==null?void 0:io.symbol),1),e("div",null,"$"+d(("addCommom"in o?o.addCommom:M(C))((uo=o.positionInfo)==null?void 0:uo.poolCoinBUSD)),1)])])]),o.isShowModal?(v(),ro(c,{key:0,"position-info":o.positionInfo,onOnClose:s[1]||(s[1]=k=>o.isShowModal=!1)},null,8,["position-info"])):x("",!0)])}const je=No(os,[["render",ps],["__scopeId","data-v-c6233d3e"]]),fs=Uo({setup(){const o=Yo(),s=y(()=>o),X=Jo(),W=y(()=>X),D=Zo(),T=I();wo(()=>[W.value.positionInfoObj,D.params.id],([t,n])=>{console.log(t,"##positionInfoObj"),t&&!zo(t)&&n&&(T.value=t[n],console.log(T.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const _=y(()=>{var t;return(t=T.value)==null?void 0:t.needReverse}),c=t=>{var n;return console.log(t,"info##"),(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((n=s.value.tokensObj[t==null?void 0:t.address])==null?void 0:n.logo_url)||ae("/image/coins/sui-unknown.png")},$=ge(),h=y(()=>$);return{needReverse:_,positionInfo:T,getCoinIcon:c,addCommom:C,wallet:h}}});const ve=o=>(Fo("data-v-c9de826f"),o=o(),Vo(),o),ys={class:"my-liquidity"},bs={class:"my-liquidity-top"},_s=ve(()=>e("div",null,"My Liquidity",-1)),hs=ve(()=>e("p",null,"My share of pool",-1)),ks={class:"my-liquidity-bottom"},gs={class:"lp-token"},$s=ve(()=>e("div",null,[e("span",null,"LP Token Balance ")],-1)),ws={class:"lp-balance"},Is={class:"token-num-content"},Cs={class:"token-num token-a-num"},As={class:"logo"},Ss=["src"],Ps={class:"text"},Ts={class:"lp-logo"},Rs=["src"],qs=ve(()=>e("div",null,"Pooled Assets",-1)),Bs={class:"token-num"},Ns={class:"logo"},Ms=["src"],Ls={class:"text"},Os=ve(()=>e("div",{class:"token-num-content-bg"},null,-1));function Ds(o,s,X,W,D,T){var c,$,h,t,n,A,a,u,R,r,m,q,L,O,J,f,p,w,U,E,so,F,g,lo,fo,yo,io,Z;const _=fe;return v(),P("div",ys,[e("div",bs,[_s,e("div",null,[hs,e("p",null,d(o.wallet.connected?(c=o.positionInfo)==null?void 0:c.myShare:"--")+"%",1)])]),e("div",ks,[e("div",gs,[$s,e("div",null,[e("span",ws,d(o.wallet.connected?("addCommom"in o?o.addCommom:M(C))(($=o.positionInfo)==null?void 0:$.myLiquidity):"--")+" LP",1),e("span",null,"$"+d(o.wallet.connected?("addCommom"in o?o.addCommom:M(C))((h=o.positionInfo)==null?void 0:h.myLiquidityUSD):"--"),1)])]),e("div",Is,[e("div",Cs,[e("div",As,[e("img",{src:o.needReverse?o.getCoinIcon((n=o.positionInfo)==null?void 0:n.token_b):o.getCoinIcon((t=o.positionInfo)==null?void 0:t.token_a),alt:""},null,8,Ss),z(_,{address:o.needReverse?(R=(u=o.positionInfo)==null?void 0:u.token_b)==null?void 0:R.address:(a=(A=o.positionInfo)==null?void 0:A.token_a)==null?void 0:a.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),e("div",Ps,[e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:M(C))((r=o.positionInfo)==null?void 0:r.amountA):"--")+" "+d(o.needReverse?(O=(L=o.positionInfo)==null?void 0:L.token_b)==null?void 0:O.symbol:(q=(m=o.positionInfo)==null?void 0:m.token_a)==null?void 0:q.symbol),1),e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:M(C))((J=o.positionInfo)==null?void 0:J.myAmountAUSD):"--"),1)])]),e("div",Ts,[e("img",{src:o.getCoinIcon((f=o.positionInfo)==null?void 0:f.lpInfo),alt:""},null,8,Rs),qs]),e("div",Bs,[e("div",Ns,[e("img",{src:o.needReverse?o.getCoinIcon((w=o.positionInfo)==null?void 0:w.token_a):o.getCoinIcon((p=o.positionInfo)==null?void 0:p.token_b),alt:""},null,8,Ms),z(_,{address:o.needReverse?(F=(so=o.positionInfo)==null?void 0:so.token_a)==null?void 0:F.address:(E=(U=o.positionInfo)==null?void 0:U.token_b)==null?void 0:E.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),e("div",Ls,[e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:M(C))((g=o.positionInfo)==null?void 0:g.amountB):"--")+" "+d(o.needReverse?(io=(yo=o.positionInfo)==null?void 0:yo.token_a)==null?void 0:io.symbol:(fo=(lo=o.positionInfo)==null?void 0:lo.token_b)==null?void 0:fo.symbol),1),e("div",null,d(o.wallet.connected?("addCommom"in o?o.addCommom:M(C))((Z=o.positionInfo)==null?void 0:Z.myAmountBUSD):"--"),1)])]),Os])])])}const Ge=No(fs,[["render",Ds],["__scopeId","data-v-c9de826f"]]),Us=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const Fs={},He=o=>(Fo("data-v-fcbc716b"),o=o(),Vo(),o),Vs={class:"status"},Es=He(()=>e("img",{src:Us,alt:""},null,-1)),Ws=He(()=>e("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),Xs=[Es,Ws];function js(o,s){return v(),P("div",Vs,Xs)}const ze=No(Fs,[["render",js],["__scopeId","data-v-fcbc716b"]]),Gs=Uo({components:{AutoPoolAddModal:Fe,AutoPoolV2PoolStatus:ze},setup(){const o=ge(),s=I(!1),X=ye(),W=y(()=>X),D=y(()=>W.value.chainName),T=y(()=>o),_=Jo(),c=y(()=>_),$=Yo(),h=y(()=>$),t=I(),n=Zo(),A=I(!1);wo(()=>[c.value.positionInfoObj,n.params.id],([b,B])=>{b&&!zo(b)&&B&&(t.value=b[B],console.log(t.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const a=y(()=>{var b,B;return console.log((b=t.value)==null?void 0:b.needReverse,"##positionInfo.value?.needReverse"),(B=t.value)==null?void 0:B.needReverse}),u=I(),R=I(),r=I(),m=I(),q=I(!0),L=y(()=>T.value.assets&&u.value&&T.value.assets[u.value.address]?Re(T.value.assets[u.value.address].balance,u.value.decimals):0),O=y(()=>T.value.assets&&R.value&&T.value.assets[R.value.address]?Re(T.value.assets[R.value.address].balance,R.value.decimals):0),J=b=>{b==="fromCoin"?(q.value=!0,r.value=L.value>0?u.value.symbol=="SUI"?new i(Number(L.value)).sub(new i(.05)).lt(new i(0))?"0":new i(Number(L.value)).sub(new i(.05)).toString():String(L.value):""):(q.value=!1,m.value=O.value>0?R.value.symbol=="SUI"?new i(Number(O.value)).sub(new i(.05)).lt(new i(0))?"0":new i(Number(O.value)).sub(new i(.05)).toString():String(O.value):"")},f=b=>{b==="fromCoin"?(q.value=!0,r.value=L.value>0?G(new i(Number(L.value)).div(2).toString(),u.value.decimals).toString():""):(q.value=!1,m.value=O.value>0?G(new i(Number(O.value)).div(2).toString(),R.value.decimals).toString():"")},p=y(()=>D.value?Be(D.value):{}),w=y(()=>W.value.slippage),U=I("--"),E=I("--"),so=b=>{const B=new i(t.value.autoPoolPositionInfo.liquidity),no=new i(b.toString());if(B.toNumber()>0&&no.toNumber()>0){const H=no.add(B);console.log("totalLiquidity:",no.div(H).mul(100).toString());const Co=no.div(H).mul(100).toNumber(),Q=on(Co),bo=Q==-1?2:Q+2,co=G(no.div(H).mul(100).toNumber(),bo);console.log(t.value.decimals,"##positionInfo.value.decimal");const _o=new i(1).div(new i(Math.pow(10,t.value.lpInfo.decimals))).toString();console.log(co,_o,"###288"),Number(co)<Number(_o)?U.value=`<${_o}`:U.value=co}else no.toNumber()>0&&B.toNumber()<=0?U.value="100":U.value="--"},F=b=>{const B=new i(b.toString()),no=new i(w.value).div(100),H=B.mul(no),Co=B.sub(H),Q=ke.get_lp_amount_by_liquidity({liquidity:t.value.liquidity,total_supply:t.value.total_supply},Co),bo=new i(Math.pow(10,t.value.lpInfo.decimals)),co=new i(Q).div(bo).toString();E.value=co},g=I(!1),lo=I(!1),fo=I(""),yo=I(),io=async()=>{if(!t.value)return;const b=t.value.autoPoolPositionInfo.tick_lower_index,B=t.value.autoPoolPositionInfo.tick_upper_index,no=Po.sqrtPriceX64ToTickIndex(new to(t.value.current_sqrt_price));let H=Po.tickIndexToSqrtPriceX64(b),Co=Po.tickIndexToSqrtPriceX64(B);no<b&&(a.value?g.value=!0:lo.value=!0),no>B&&(a.value?lo.value=!0:g.value=!0);let Q;if(console.log(r.value||m.value,"#fromCoinAmount.value || toCoinAmount.value"),r.value||m.value){q.value?Q=new i(r.value).mul(Math.pow(10,u.value.decimals)).toString():Q=new i(m.value).mul(Math.pow(10,R.value.decimals)).toString();let bo,co=q.value;if(console.log("执行##"),vo.value||mo.value){console.log(a.value?q.value:!q.value,"#needReverse.value?fixedFromCoin.value:!fixedFromCoin.value");const N=await Qo.calculateDepositSwapAmount({lowerTick:b,upperTick:B,curSqrtPrice:new to(t.value.current_sqrt_price),fix_amount_a:co,input_amount:Q,coinTypeA:t.value.autoPoolPositionInfo.coin_type_a,coinTypeB:t.value.autoPoolPositionInfo.coin_type_b,clmm_pool:t.value.address,slippage:Number(w.value)/100,decimals:vo.value?u.value.decimals:R.value.decimals});if(console.log(N,"###swapResult"),N){A.value=N.is_exceed,bo=new to(N.afterSqrtPrice),Q=new to(N.swapOutAmount),yo.value={swap_amount:N.swapInAmount,a2b:co},co=!co;const Y=t.value.token_a.decimals,V=t.value.token_b.decimals;pe.value=Po.sqrtPriceX64ToPrice(N.afterSqrtPrice,Y,V).toString(),console.log(pe.value,"##afterCurrentPrice.value");const oo=new i(N.swapInAmount).div(new i(Math.pow(10,Y))).toString(),ho=new i(N.swapOutAmountLimit).div(new i(Math.pow(10,V))).toString(),po=a.value?t.value.token_b.symbol:t.value.token_a.symbol,j=a.value?t.value.token_a.symbol:t.value.token_b.symbol;fo.value=`To deposit ${C(vo.value?r.value:m.value)} ${vo.value?po:j},
          ${C(oo)} ${vo.value?po:j}  will be traded for ${C(ho)} ${vo.value?j:po} added to the pool.`}else bo=t.value.current_sqrt_price,Q=new to(Q),pe.value=""}else A.value=!1,bo=t.value.current_sqrt_price,Q=new to(Q),pe.value="",fo.value="";console.log(yo,"##swapParams");let _o,l,S;if(no>=b&&no<=B){const N=p.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:u.value,tokenB:R.value,lowerTick:b,upperTick:B,coinAmount:Q,iscoinA:co,roundUp:!0,slippage:Number(w.value)/100,curSqrtPrice:new to(bo)});_o=N.liquidityAmount,l=N.tokenMaxA,S=N.tokenMaxB,!vo.value&&!mo.value&&(q.value?m.value=Number(S)>0?S:"":r.value=Number(l)>0?l:"")}else no<B?_o={liquidityAmount:Qe(H,Co,Q),tokenMaxA:0,tokenMaxB:m.value}.liquidityAmount:_o={liquidityAmount:xe(H,Co,Q),tokenMaxA:r.value,tokenMaxB:0}.liquidityAmount;console.log(_o.toString(),"liquidityAmount###"),so(_o),F(_o)}};wo(()=>t.value,b=>{b&&!zo(b)&&(u.value=b==null?void 0:b.token_a,R.value=b==null?void 0:b.token_b,g.value=!1,lo.value=!1,io())},{immediate:!0});const Z=y(()=>h.value.RATES),ao=y(()=>{var b,B,no,H,Co,Q,bo,co,_o,l;if((B=Z.value[(b=u.value)==null?void 0:b.address])!=null&&B.price&&((H=Z.value[(no=R.value)==null?void 0:no.address])!=null&&H.price)){console.log((Q=Z.value[(Co=u.value)==null?void 0:Co.address])==null?void 0:Q.price,"RATES.value[fromCoin.value?.address]?.price");const S=new i(r.value||0).mul(new i((co=Z.value[(bo=u.value)==null?void 0:bo.address])==null?void 0:co.price)),N=new i(m.value||0).mul(new i((l=Z.value[(_o=R.value)==null?void 0:_o.address])==null?void 0:l.price));return le(S.add(N).toString(),2)}else return"--"});wo(()=>r.value,(b,B)=>{b?io():(U.value="--",m.value="",E.value="--")},{immediate:!0}),wo(()=>m.value,(b,B)=>{b?io():(r.value="",U.value="--",E.value="--")},{immediate:!0});const{t:uo,locale:k}=Me(),K=y(()=>{const b=Number(r.value)>Number(L.value),B=Number(m.value)>Number(O.value);return!r.value&&!m.value?uo("button.enterAmount"):b?uo("button.insufficientBalance",{name:u.value.symbol}):B?uo("button.insufficientBalance",{name:R.value.symbol}):A.value?uo("button.insufficientLiquidity"):Number(t.value.quoteUSD)>0&&Number(ao.value)>Number(t.value.quoteUSD)?"Exceeds maximum capacity":"Add Liquidity"}),Ro=y(()=>{const b=Number(r.value)>Number(L.value),B=Number(m.value)>Number(O.value);return!!(!r.value&&!m.value||b||B||r.value<=0&&m.value<=0||A.value||jo.value!=="STATUS_RUNNING"||(console.log(ao.value,t.value.quoteUSD,"positionInfo.value.quoteUSD#"),Number(t.value.quoteUSD)>0&&Number(ao.value)>Number(t.value.quoteUSD)))}),go=I(!0),{setIsShowSuccess:Ko,setIsShowRejected:Eo,setIsShowWaiting:To,setTransactionDesc:qo,setTransactionTxid:Wo,setPositiomNum:Xo}=X,Qo=Ne("Sui"),xo=async()=>{var _o,l;s.value=!1,go.value=!0,Wo("");const b=`${C(r.value)} ${(_o=u.value)==null?void 0:_o.symbol}`,B=`${C(m.value)} ${(l=R.value)==null?void 0:l.symbol}`;qo(`Deposit ${r.value>0?b:""} ${m.value>0&&r.value>0?"and":""} ${m.value>0?B:""}`),To(!0);const no=q.value,H=t.value.autoPoolPositionInfo.tick_lower_index,Co=t.value.autoPoolPositionInfo.tick_upper_index,Q=Po.sqrtPriceX64ToTickIndex(new to(t.value.current_sqrt_price));let bo;q.value?bo=new i(r.value).mul(Math.pow(10,u.value.decimals)).toString():bo=new i(m.value).mul(Math.pow(10,R.value.decimals)).toString();const co=t.value.rewarderInfo.map(S=>S.coinAddress);try{const S={lowerTick:H,upperTick:Co,coinAmount:bo,fix_amount_a:no,slippage:Number(w.value)/100,curSqrtPrice:new to(t.value.current_sqrt_price),id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.pool,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coin_type_a,coinTypeB:t.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:co,swapParams:yo.value,isOnlyA:vo.value,isOnlyB:mo.value,currentTickIndex:Q},N=await Qo.deposit(S);console.log(N,"===>payloadAdd11111");const Y=await T.value.currentWallet.signAndExecuteTransactionBlock(N);let V=p.value.handleTx(Y);if(console.log("toAdd###tx###",V),V&&V.hash){Wo(V.hash),To(!1),Ko(!0),console.log(t,"===>positionInfo");const oo={title:"Supplied",desc:`Deposit ${r.value>0?b:""} ${m.value>0&&r.value>0?"and":""} ${m.value>0?B:""}`,hash:V.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${r.value>0?b:""} ${m.value>0&&r.value>0?"and":""} ${m.value>0?B:""}`};D.value!=="Aptos"&&(oo.res=V.res),p.value.showTransitionPending(oo),await p.value.watchTransaction(oo)&&setTimeout(()=>{_.updatePositionItem(t.value.id),p.value.getAccount(T.value.address)},1e3),Xo()}else To(!1),Eo(!0);r.value="",m.value="",go.value=!1}catch(S){r.value="",m.value="",console.log("addError###",S),go.value=!1,To(!1),Eo(!0)}},vo=I(!1),mo=I(!1),oe=b=>{r.value="",m.value="",fo.value="",b=="only-a"?(vo.value=!vo.value,mo.value=!1):(mo.value=!mo.value,vo.value=!1)},jo=y(()=>c.value.currentAutoPoolStatus),Go=I(),ee=()=>{Go.value=window.setInterval(()=>{(r.value||m.value)&&io()},2e4)};return we(()=>{ee()}),Ie(()=>{window.clearInterval(Go.value)}),{currentAutoPoolStatus:jo,wallet:T,positionInfo:t,isShowAddModal:s,needReverse:a,fromCoin:u,toCoin:R,fromCoinAmount:r,toCoinAmount:m,fromCoinBlance:L,toCoinBlance:O,fixedFromCoin:q,maxBtnSelect:J,halfBtnSelect:f,totalAmountUSD:ao,addCommom:C,shareOfPool:U,minimumReceivedLP:E,addLiquidityBtnText:K,addLiquidityBtnDisabled:Ro,toAdd:xo,showToCoinLock:lo,showFromCoinLock:g,isOnlyA:vo,isOnlyB:mo,onlyToken:oe,onlyText:fo}}});const ue=o=>(Fo("data-v-e478607b"),o=o(),Vo(),o),Hs={class:"auto-pool-add"},zs={class:"auto-pool-add-content"},Ys={class:"liquidity-action-tab"},Js=ue(()=>e("div",{class:"increase tab-active"},"Add",-1)),Zs={class:"only-token"},Ks=ue(()=>e("div",null,"Deposit Amounts",-1)),Qs={key:0},xs={key:0},ol={key:0,class:"card-item"},el={key:1,class:"card-item"},nl=ue(()=>e("span",null,"Pool Closed",-1)),tl={class:"add-info"},sl={key:0,class:"only-text"},ll={class:"total-amount"},il=ue(()=>e("span",null,"Total Amount",-1)),al={class:"total-amount"},ul=ue(()=>e("span",null,"Share of Pool",-1)),rl={class:"total-amount"},dl=ue(()=>e("span",null,"Minimum Received LP",-1));function vl(o,s,X,W,D,T){var n,A,a,u,R,r,m,q,L,O,J,f,p;const _=De,c=Ue,$=de("AutoPoolV2PoolStatus"),h=Oe,t=Fe;return v(),P("div",Hs,[e("div",zs,[e("div",Ys,[Js,e("div",{class:"remove",onClick:s[0]||(s[0]=Le(w=>o.$emit("changeCurrentTab"),["stop"]))},"Remove")]),e("div",Zs,[Ks,e("div",null,[e("div",{class:"only-a",onClick:s[1]||(s[1]=w=>o.onlyToken("only-a"))},[e("p",null,[o.isOnlyA?(v(),P("span",Qs)):x("",!0)]),e("span",null,d(o.needReverse?(u=(a=o.positionInfo)==null?void 0:a.token_b)==null?void 0:u.symbol:(A=(n=o.positionInfo)==null?void 0:n.token_a)==null?void 0:A.symbol)+" only",1)]),e("div",{class:"only-b",onClick:s[2]||(s[2]=w=>o.onlyToken("only-b"))},[e("p",null,[o.isOnlyB?(v(),P("span",xs)):x("",!0)]),e("span",null,d(o.needReverse?(q=(m=o.positionInfo)==null?void 0:m.token_a)==null?void 0:q.symbol:(r=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:r.symbol)+" only",1)])])]),e("div",{class:he(o.needReverse?"card-container reverse":"card-container")},[(o.needReverse?!o.isOnlyA:!o.isOnlyB)?(v(),P("div",ol,[z(_,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":s[3]||(s[3]=w=>o.fromCoinAmount=w),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[4]||(s[4]=w=>o.maxBtnSelect("fromCoin")),onOnHalf:s[5]||(s[5]=w=>o.halfBtnSelect("fromCoin")),onOnInput:s[6]||(s[6]=w=>{o.fromCoinAmount=w}),onOnFocus:s[7]||(s[7]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock&&!o.isOnlyA?(v(),ro(c,{key:0})):x("",!0)])):x("",!0),(o.needReverse?!o.isOnlyB:!o.isOnlyA)?(v(),P("div",el,[z(_,{modelValue:o.toCoinAmount,"onUpdate:modelValue":s[8]||(s[8]=w=>o.toCoinAmount=w),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[9]||(s[9]=w=>o.maxBtnSelect("toCoin")),onOnHalf:s[10]||(s[10]=w=>o.halfBtnSelect("toCoin")),onOnInput:s[11]||(s[11]=w=>{o.toCoinAmount=w}),onOnFocus:s[12]||(s[12]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock&&!o.isOnlyB?(v(),ro(c,{key:0})):x("",!0)])):x("",!0)],2)]),o.currentAutoPoolStatus=="STATUS_REBALANCING"?(v(),ro($,{key:0})):x("",!0),(L=o.positionInfo)!=null&&L.is_pause?(v(),ro(h,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:Do(()=>[nl]),_:1})):o.wallet.connected?(v(),ro(h,{key:2,class:"big-btn liquidity-btn",disabled:o.addLiquidityBtnDisabled,onClick:s[13]||(s[13]=w=>o.isShowAddModal=!0)},{default:Do(()=>[e("span",null,d(o.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(v(),ro(h,{key:3,class:"big-btn liquidity-btn",onClick:s[14]||(s[14]=w=>o.wallet.setIsShowWalletModal(!0))},{default:Do(()=>[e("span",null,d(o.$t("button.connectWallet")),1)]),_:1})),e("div",tl,[o.onlyText?(v(),P("div",sl,d(o.onlyText),1)):x("",!0),e("div",ll,[il,e("span",null,"$"+d(("addCommom"in o?o.addCommom:M(C))(o.totalAmountUSD)),1)]),e("div",al,[ul,e("span",null,d(o.shareOfPool)+"%",1)]),e("div",rl,[dl,e("span",null,d(("addCommom"in o?o.addCommom:M(C))(o.minimumReceivedLP))+" "+d(o.needReverse?(O=o.toCoin)==null?void 0:O.symbol:(J=o.fromCoin)==null?void 0:J.symbol)+"-"+d(o.needReverse?(f=o.fromCoin)==null?void 0:f.symbol:(p=o.toCoin)==null?void 0:p.symbol),1)])]),o.isShowAddModal?(v(),ro(t,{key:4,"pool-info":o.positionInfo,"from-coin":o.needReverse?o.positionInfo.token_b:o.positionInfo.token_a,"to-coin":o.needReverse?o.positionInfo.token_a:o.positionInfo.token_b,"from-coin-amount":o.needReverse?o.toCoinAmount:o.fromCoinAmount,"to-coin-amount":o.needReverse?o.fromCoinAmount:o.toCoinAmount,"total-amount":o.totalAmountUSD,"share-of-pool":o.shareOfPool,"minimum-received-l-p":o.minimumReceivedLP,"is-only-a":o.isOnlyA,"is-only-b":o.isOnlyB,onOnClose:s[15]||(s[15]=w=>o.isShowAddModal=!1),onToAdd:o.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):x("",!0)])}const ml=No(Gs,[["render",vl],["__scopeId","data-v-e478607b"]]),cl=Uo({components:{AutoPoolRemoveModal:Ve,AutoPoolV2PoolStatus:ze},setup(){const o=ge(),s=y(()=>o),X=ye(),W=y(()=>X),D=y(()=>W.value.slippage),T=y(()=>W.value.chainName),_=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],c=I(25),$=Zo(),h=Jo(),t=y(()=>h),n=y(()=>(console.log(t.value.positionInfoObj[$.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),t.value.positionInfoObj[$.params.id])),A=y(()=>{var l;return(l=n.value)==null?void 0:l.needReverse}),a=I(),u=I(),R=I(!1),r=I(),m=y(()=>{var l;return(l=n.value)==null?void 0:l.myLiquidity}),q=I(!0),L=y(()=>T.value?Be(T.value):{}),O=I(),J=Ne("Sui"),f=I(""),p=I(""),w=I("--"),U=I(!1),E=I(!1),so=I(),F=I(!0),g=I(),lo=Yo(),fo=y(()=>lo),yo=y(()=>fo.value.RATES),io=async()=>{if(q.value||!n.value)return;const l=n.value.autoPoolPositionInfo.tick_lower_index,S=n.value.autoPoolPositionInfo.tick_upper_index,N=Po.sqrtPriceX64ToTickIndex(new to(n.value.current_sqrt_price));N<l&&(A.value?U.value=!0:E.value=!0),N>S&&(A.value?E.value=!0:U.value=!0);let Y;if(console.log(f.value||p.value,"#fromCoinAmount.value || toCoinAmount.value"),f.value||p.value){F.value?Y=new i(f.value).mul(Math.pow(10,a.value.decimals)).toString():Y=new i(p.value).mul(Math.pow(10,u.value.decimals)).toString();let V,oo=F.value;if(k.value||K.value){const eo=await J.calculateRemoveSwapAmount({lowerTick:l,upperTick:S,curSqrtPrice:new to(n.value.current_sqrt_price),fix_amount_a:oo,receiveAmount:Y,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(D.value)/100,decimals:k.value?a.value.decimals:u.value.decimals});if(console.log(eo,"###swapResult"),eo){O.value=eo.is_exceed,Y=new to(eo.swapOutAmount),V=n.value.current_sqrt_price,so.value={swap_amount:eo.swapInAmount,liquidity:eo.liquidity,a2b:!oo},oo=!oo;const Bo=n.value.token_a.decimals,Ho=n.value.token_b.decimals,$o=new i(eo.swapInAmount).div(new i(Math.pow(10,Bo))).toString(),ne=new i(eo.swapOutAmountLimit).div(new i(Math.pow(10,Ho))).toString(),ko=A.value?n.value.token_b.symbol:n.value.token_a.symbol,Ao=A.value?n.value.token_a.symbol:n.value.token_b.symbol;g.value=f.value==H.value||p.value==H.value?`To withdraw ${C(k.value?f.value:p.value)} ${k.value?ko:Ao},
          ${C(k.value?n.value.amountB:n.value.amountA)} ${k.value?Ao:ko} 
           in the pool will be traded for ${$o} ${k.value?ko:Ao}`:`To withdraw ${C(k.value?f.value:p.value)} ${k.value?ko:Ao},
          ${C($o)} ${k.value?Ao:ko}  in the pool will be traded for ${C(ne)} ${k.value?ko:Ao}`}else V=n.value.current_sqrt_price,Y=new to(Y),g.value=""}else O.value=!1,V=n.value.current_sqrt_price,Y=new to(Y);console.log(V,"##curSqrtPrice"),console.log("执行了吗##");const{liquidityAmount:ho,tokenMaxA:po,tokenMaxB:j}=L.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:a.value,tokenB:u.value,lowerTick:l,upperTick:S,coinAmount:Y,iscoinA:oo,roundUp:!1,slippage:Number(D.value)/100,curSqrtPrice:new to(V)});if(console.log(n.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(j.toString(),po.toString(),n.value,"###323"),!k.value&&!K.value&&(F.value?p.value=Number(j)>0?j:"":f.value=Number(po)>0?po:""),(k.value||K.value)&&(f.value==H.value||p.value==H.value)){r.value=n.value.myLiquidity;const eo=new i(100);w.value=new i(n.value.myLiquidity).mul(new i(Math.pow(10,n.value.lpInfo.decimals))).toString(),Z.value=ho.toString(),c.value=eo.toNumber()}else{const eo=ke.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},ho.toString());r.value=new i(eo).div(new i(Math.pow(10,n.value.lpInfo.decimals))).toString();const Bo=new i(r.value).div(new i(m.value)).mul(100);console.log(r.value,m.value,"####lpBalance.value"),w.value=eo,Z.value=ho.toString(),c.value=Bo.toNumber()}}},Z=I(),ao=y(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountA}),uo=y(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountB}),k=I(!1),K=I(!1),Ro=y(()=>{var oo,ho,po,j;const l=(ho=yo.value[(oo=a==null?void 0:a.value)==null?void 0:oo.address])==null?void 0:ho.price,S=(j=yo.value[(po=u==null?void 0:u.value)==null?void 0:po.address])==null?void 0:j.price;console.log(l,S,f.value,p.value,"####totalWithdraw");let N=f.value!=="--"&&f.value!==""?f.value:0,Y=p.value!=="--"&&p.value!==""?p.value:0,V;return l&&S&&(k.value||K.value?V=new i(k.value?N:Y).mul(new i(k.value?l:S)).toString():(V=new i(N).mul(new i(l)).add(new i(Y).mul(new i(S))).toString(),console.log(V,"result##"))),V>0&&V<.01?"<$0.01":`$${C(G(V,2))}`}),go=async l=>{var Bo,Ho,$o,ne,ko,Ao,be,Ae,Se,Pe;if(!q.value)return;q.value=!0,(Ho=(Bo=n.value)==null?void 0:Bo.token_a)==null||Ho.decimals,(ne=($o=n.value)==null?void 0:$o.token_b)==null||ne.decimals;const S=(ko=n.value)==null?void 0:ko.tick_lower_index,N=(Ao=n.value)==null?void 0:Ao.tick_upper_index;Po.tickIndexToSqrtPriceX64(S),Po.tickIndexToSqrtPriceX64(N);const Y=(Ae=(be=n.value)==null?void 0:be.autoPoolPositionInfo)==null?void 0:Ae.tick_lower_index,V=(Pe=(Se=n.value)==null?void 0:Se.autoPoolPositionInfo)==null?void 0:Pe.tick_upper_index,oo=Po.sqrtPriceX64ToTickIndex(new to(n.value.current_sqrt_price));oo<Y&&(A.value?U.value=!0:E.value=!0),oo>V&&(A.value?E.value=!0:U.value=!0);let ho="",po,j;console.log(l.value,"##item.value"),console.log(j,"##coinAmount");let eo=F.value;if(console.log("执行##"),k.value||K.value&&!U.value&&!E.value){if(k.value){const Lo=new i(H.value).mul(Math.pow(10,a.value.decimals)).mul(l.value).toString();console.log(Lo,"##amount"),j=G(Lo,0),f.value=G(new i(H.value).mul(l.value).toString(),a.value.decimals)}if(K.value){const Lo=new i(H.value).mul(l.value).mul(Math.pow(10,u.value.decimals)).toString();j=G(Lo,0),p.value=G(new i(H.value).mul(l.value).toString(),u.value.decimals)}console.log(f.value,"##fromCoinAmount.value");const So=await J.calculateRemoveSwapAmount({lowerTick:S,upperTick:N,curSqrtPrice:new to(n.value.current_sqrt_price),fix_amount_a:eo,receiveAmount:j,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(D.value)/100,decimals:k.value?a.value.decimals:u.value.decimals});if(console.log(So,"###swapResult536"),So){O.value=So.is_exceed,j=new to(So.swapOutAmount),n.value.current_sqrt_price,so.value={swap_amount:So.swapInAmount,liquidity:So.liquidity,a2b:!eo},eo=!eo;const Lo=n.value.token_a.decimals,Ye=n.value.token_b.decimals,Je=new i(So.swapInAmount).div(new i(Math.pow(10,Lo))).toString(),Te=new i(So.swapOutAmountLimit).div(new i(Math.pow(10,Ye))).toString(),te=A.value?n.value.token_b.symbol:n.value.token_a.symbol,se=A.value?n.value.token_a.symbol:n.value.token_b.symbol;g.value=l.value==1?`To withdraw ${C(k.value?f.value:p.value)} ${k.value?te:se},
          ${C(k.value?n.value.amountB:n.value.amountA)} ${k.value?se:te}  in the pool will be traded for ${C(Te)} ${k.value?te:se}`:`To withdraw ${C(k.value?f.value:p.value)} ${k.value?te:se},
          ${C(Je)} ${k.value?se:te}  in the pool will be traded for ${C(Te)} ${k.value?te:se}`,ho=So.liquidity}else n.value.current_sqrt_price,j=new to(j),g.value="";console.log(po,"result###"),w.value=new i(n.value.myLiquidity).mul(new i(l.value)).toString(),console.log(n.value,n.value.liquidity,ho,w.value,"###positionInfo.value.liquidity"),console.log(w.value,"##lpTokenAmount.value"),r.value=new i(w.value),Z.value=ho}else{O.value=!1;const So=new i(ao.value).mul(Math.pow(10,a.value.decimals)).mul(l.value).toString();j=G(So,0),f.value=G(new i(ao.value).mul(l.value).toString(),a.value.decimals);const Lo=new i(uo.value).mul(l.value).mul(Math.pow(10,u.value.decimals)).toString();j=G(Lo,0),p.value=G(new i(uo.value).mul(l.value).toString(),u.value.decimals),n.value.current_sqrt_price,j=new to(j),l.value!==1?po=new i(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(l.value).toString():po=new i(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),r.value=new i(po).div(Math.pow(10,n.value.lpInfo.decimals)),ho=ke.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},po),w.value=G(po,0),Z.value=G(ho,0),console.log(ho,"###newLiquidity525")}};wo(c,_e((l,S)=>{l!==S&&(Number(l)>100?c.value=100:l&&n.value?(console.log("687===>"),c.value=l,go({value:c.value/100})):(f.value="",p.value=""))},300)),wo(()=>f.value,_e((l,S)=>{l?io():(p.value="",c.value=0)},500),{immediate:!0}),wo(()=>p.value,_e((l,S)=>{l?io():(f.value="",c.value=0)},500),{immediate:!0});const Ko=nn(),{setIsShowSuccess:Eo,setIsShowRejected:To,setIsShowWaiting:qo,setTransactionDesc:Wo,setTransactionTxid:Xo,setPositiomNum:Qo,setTransactionDescText:xo}=X,vo=I(!1),{t:mo}=Me(),oe=async()=>{var Bo,Ho;vo.value=!0,Xo("");const l=Number(f.value)>0?`${C(f.value,a.value.decimals)} ${a.value.symbol}`:"",S=Number(p.value)>0?`${C(p.value,u.value.decimals)} ${u.value.symbol}`:"";console.log(l,S,"###transactionDescTo"),Wo(mo("tips.removeLiquidiyText",{from:A.value?S:l,and:Number(f.value)>0&&Number(p.value)>0?"and":"",to:A.value?l:S})),qo(!0);const N=mo("modal.removeLiquidityText2");xo(N);const Y=n.value.autoPoolPositionInfo.tick_lower_index,V=n.value.autoPoolPositionInfo.tick_upper_index,oo=Po.tickIndexToSqrtPriceX64(Y),ho=Po.tickIndexToSqrtPriceX64(V),po=n.value.rewarderInfo.map($o=>$o.coinAddress);console.log(w.value,"##lpTokenAmount.value431");let j;F.value?j=new i(f.value).mul(Math.pow(10,a.value.decimals)).toString():j=new i(p.value).mul(Math.pow(10,u.value.decimals)).toString(),console.log();const eo={lowerSqrtPrice:oo,upperSqrtPrice:ho,lpTokenAmount:w.value,liquidity:Z.value,curSqrtPrice:new to(n.value.object.current_sqrt_price),slippage:Number(D.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.pool,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:po,swapParams:so.value,fix_amount_a:F.value,isOnlyA:!U.value&&!E.value?k.value:!1,isOnlyB:!E.value&&!U.value?K.value:!1,lowerTick:Y,upperTick:V,receiveAmount:j,sliderVal:c.value,positionInfo:n.value};try{const $o=await J.remove(eo);console.log($o,"移除流动性payload");const ne=await s.value.currentWallet.signAndExecuteTransactionBlock($o);let ko=L.value.handleTx(ne);if(console.log("0331###remove###tx####",ko),ko&&ko.hash){Xo(ko.hash),qo(!1),Eo(!0);const Ao={title:mo("common.removeLiquidity"),desc:"",hash:ko.hash,descTransactions:`Remove ${l} ${Number(f.value)>0&&Number(p.value)>0?"and":""} ${S} from the pool`,sender:s.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${f.value} ${(Bo=a.value)==null?void 0:Bo.symbol} and ${p.value} ${(Ho=u.value)==null?void 0:Ho.symbol}`};Ao.res=ko.res,L.value.showTransitionPending(Ao),await L.value.watchTransaction(Ao)&&(f.value="",p.value="",r.value="",c.value=0,setTimeout(()=>{h.updatePositionItem(n.value.id),L.value.getAccount(s.value.address)},1e3),Number(c.value)==100&&$.name=="auto-pool-detail"&&Ko.push("/pool/auto"))}else qo(!1),To(!0);vo.value=!1}catch($o){console.log("Remove error",$o),vo.value=!1,qo(!1),To(!0)}};wo(()=>n.value,(l,S)=>{l&&!zo(l)&&(a.value=l==null?void 0:l.token_a,u.value=l==null?void 0:l.token_b,console.log("触发###"),(!S||S&&S.address!==l.address)&&(c.value=c.value>0?c.value:25,go({value:c.value/100})))},{immediate:!0});const jo=y(()=>{const l=Number(r.value)>Number(m.value);return!f.value&&!p.value||!r.value||r.value<=0||!f.value&&k.value||!p.value&&K.value?mo("button.enterAmount"):l?"Invalid Amount":O.value?mo("button.insufficientLiquidity"):mo("button.remove")}),Go=y(()=>{const l=Number(r.value)>Number(m.value);return!!(!f.value&&!p.value||Number(f.value)<=0&&k.value||Number(p.value)<=0&&K.value||!r.value||r.value<=0||l||O.value||bo.value!=="STATUS_RUNNING")}),ee=l=>(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||ae("/image/coins/sui-unknown.png"),b=l=>{f.value="",p.value="",q.value=!0,g.value="",l=="only-a"?(k.value=!k.value,K.value=!1,F.value=!0):(K.value=!K.value,k.value=!1,F.value=!1)},B=l=>{q.value=!0,c.value=100,l==="fromCoin"?F.value=!0:F.value=!1},no=l=>{q.value=!0,c.value=50,l==="fromCoin"?F.value=!0:F.value=!1},H=I(),Co=async()=>{F.value;const l=n.value.token_a.decimals,S=n.value.token_b.decimals,N=k.value?uo.value:ao.value;console.log(N,"###receiveAmount");const Y=k.value?u.value.address===n.value.token_a.address:a.value.address===n.value.token_a.address;if(k.value||K.value){console.log(N,"##receiveAmount");let V=await L.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:Y,byAmountIn:!0,amount:N});console.log(V,V.estimatedAmountOut,l,S,"##preSwapRes");const oo=new i(V.estimatedAmountOut);H.value=oo.sub(oo.mul(Number(D.value)/100)).add(new i(k.value?ao.value:uo.value)).toString(),console.log(H.value,"###onlyTokenBalance.value"),go({value:c.value/100})}};wo(()=>[k.value,K.value,ao.value,uo.value],([l,S])=>{l||S?Co():go({value:c.value/100})},{immediate:!0});const Q=l=>`${l}%`,bo=y(()=>t.value.currentAutoPoolStatus),co=I(),_o=()=>{co.value=window.setInterval(()=>{(f.value||p.value)&&!q.value?io():go({value:c.value/100})},2e4)};return we(()=>{_o()}),Ie(()=>{window.clearInterval(co.value)}),{removeLiquidityBtnText:jo,removeLiquidityBtnDisabled:Go,wallet:s,ratioArr:_,positionInfo:n,isShowRemoveModal:R,needReverse:A,fromCoin:a,toCoin:u,lpAmount:r,lpBalance:m,sliderVal:c,sFixD:G,isSlider:q,fromCoinAmount:f,toCoinAmount:p,setPercent:go,toRemove:oe,addCommom:C,getCoinIcon:ee,isOnlyA:k,isOnlyB:K,onlyToken:b,fixedFromCoin:F,maxBtnSelect:B,halfBtnSelect:no,fromCoinBlance:ao,toCoinBlance:uo,showFromCoinLock:U,showToCoinLock:E,removeText:g,onlyTokenBalance:H,totalWithdraw:Ro,formatter:Q,currentAutoPoolStatus:bo}}});const me=o=>(Fo("data-v-8fb25810"),o=o(),Vo(),o),pl={class:"auto-pool-add"},fl={class:"auto-pool-add-content"},yl={class:"liquidity-action-tab"},bl=me(()=>e("div",{class:"remove tab-active"},"Remove",-1)),_l={key:0,class:"only-token"},hl=me(()=>e("div",null,"Deposit Amounts",-1)),kl={key:0},gl={key:0},$l={key:0,class:"card-item"},wl={key:1,class:"card-item"},Il={class:"remove-ratio"},Cl={class:"remove-ratio-select"},Al={key:0,class:"ratio"},Sl={key:1,class:"ratio"},Pl={class:"ratio-list"},Tl=["onClick"],Rl=me(()=>e("span",null,"Pool Closed",-1)),ql={key:4,class:"remove-info"},Bl={key:0,class:"remove-text total-amount"},Nl={class:"total-amount"},Ml=me(()=>e("span",null,"Total Withdraw",-1)),Ll={class:"total-amount"},Ol=me(()=>e("span",null,"LP Burn Amount",-1)),Dl={key:0},Ul={key:1};function Fl(o,s,X,W,D,T){var A,a,u,R,r,m,q,L,O,J,f,p,w,U,E,so,F;const _=De,c=Ue,$=ln,h=de("AutoPoolV2PoolStatus"),t=Oe,n=Ve;return v(),P("div",pl,[e("div",fl,[e("div",yl,[e("div",{class:"increase",onClick:s[0]||(s[0]=Le(g=>o.$emit("changeCurrentTab"),["stop"]))},"Add"),bl]),!o.showFromCoinLock&&!o.showToCoinLock?(v(),P("div",_l,[hl,e("div",null,[e("div",{class:"only-a",onClick:s[1]||(s[1]=g=>o.onlyToken("only-a"))},[e("p",null,[o.isOnlyA?(v(),P("span",kl)):x("",!0)]),e("span",null,d(o.needReverse?(R=(u=o.positionInfo)==null?void 0:u.token_b)==null?void 0:R.symbol:(a=(A=o.positionInfo)==null?void 0:A.token_a)==null?void 0:a.symbol)+" only",1)]),e("div",{class:"only-b",onClick:s[2]||(s[2]=g=>o.onlyToken("only-b"))},[e("p",null,[o.isOnlyB?(v(),P("span",gl)):x("",!0)]),e("span",null,d(o.needReverse?(L=(q=o.positionInfo)==null?void 0:q.token_a)==null?void 0:L.symbol:(m=(r=o.positionInfo)==null?void 0:r.token_b)==null?void 0:m.symbol)+" only",1)])])])):x("",!0),e("div",{class:he(o.needReverse?"card-container reverse":"card-container")},[(o.needReverse?!o.isOnlyA:!o.isOnlyB)?(v(),P("div",$l,[z(_,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":s[3]||(s[3]=g=>o.fromCoinAmount=g),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.isOnlyA?o.onlyTokenBalance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:s[4]||(s[4]=g=>o.maxBtnSelect("fromCoin")),onOnHalf:s[5]||(s[5]=g=>o.halfBtnSelect("fromCoin")),onOnInput:s[6]||(s[6]=g=>{o.isSlider=!1,o.fromCoinAmount=g}),onOnFocus:s[7]||(s[7]=()=>{o.isSlider=!1,o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock?(v(),ro(c,{key:0})):x("",!0)])):x("",!0),(o.needReverse?!o.isOnlyB:!o.isOnlyA)?(v(),P("div",wl,[z(_,{modelValue:o.toCoinAmount,"onUpdate:modelValue":s[8]||(s[8]=g=>o.toCoinAmount=g),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.isOnlyB?o.onlyTokenBalance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:s[9]||(s[9]=g=>o.maxBtnSelect("toCoin")),onOnHalf:s[10]||(s[10]=g=>o.halfBtnSelect("toCoin")),onOnInput:s[11]||(s[11]=g=>{o.isSlider=!1,o.toCoinAmount=g}),onOnFocus:s[12]||(s[12]=()=>{o.isSlider=!1,o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock?(v(),ro(c,{key:0})):x("",!0)])):x("",!0)],2),e("div",Il,[e("div",Cl,[Number(o.lpBalance)>=Number(o.lpAmount)?(v(),P("div",Al,d(o.sliderVal>0&&Number(("sFixD"in o?o.sFixD:M(G))(o.sliderVal,2))<.01?"<0.01":("sFixD"in o?o.sFixD:M(G))(o.sliderVal,2))+"% ",1)):(v(),P("div",Sl,"--")),e("div",Pl,[(v(!0),P(tn,null,sn(o.ratioArr,(g,lo)=>(v(),P("div",{key:lo,class:he(["ratio-item",o.sliderVal==g.value?"ratio-item-active":""]),onClick:()=>{o.isSlider=!0,o.sliderVal=g.value}},d(g.name),11,Tl))),128))])]),z($,{value:o.sliderVal,"onUpdate:value":s[13]||(s[13]=g=>o.sliderVal=g),"tip-formatter":o.formatter,onChange:s[14]||(s[14]=g=>o.isSlider=!0)},null,8,["value","tip-formatter"])])]),o.currentAutoPoolStatus=="STATUS_REBALANCING"?(v(),ro(h,{key:0})):x("",!0),(O=o.positionInfo)!=null&&O.is_pause?(v(),ro(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:Do(()=>[Rl]),_:1})):o.wallet.connected?(v(),ro(t,{key:2,class:"big-btn liquidity-btn",disabled:o.removeLiquidityBtnDisabled,onClick:s[15]||(s[15]=g=>o.toRemove())},{default:Do(()=>[e("span",null,d(o.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(v(),ro(t,{key:3,class:"big-btn liquidity-btn",onClick:s[16]||(s[16]=g=>o.wallet.setIsShowWalletModal(!0))},{default:Do(()=>[e("span",null,d(o.$t("button.connectWallet")),1)]),_:1})),o.removeLiquidityBtnDisabled?x("",!0):(v(),P("div",ql,[o.removeText&&(o.isOnlyA&&o.fromCoinAmount||o.isOnlyB&&o.toCoinAmount)?(v(),P("div",Bl,d(o.removeText),1)):x("",!0),e("div",Nl,[Ml,e("span",null,d(o.totalWithdraw),1)]),e("div",Ll,[Ol,o.fromCoinAmount||o.toCoinAmount?(v(),P("span",Dl,d(("addCommom"in o?o.addCommom:M(C))(o.lpAmount))+" "+d(o.needReverse?(J=o.toCoin)==null?void 0:J.symbol:(f=o.fromCoin)==null?void 0:f.symbol)+"-"+d(o.needReverse?(p=o.fromCoin)==null?void 0:p.symbol:(w=o.toCoin)==null?void 0:w.symbol),1)):(v(),P("span",Ul,"0 "+d(o.needReverse?(U=o.toCoin)==null?void 0:U.symbol:(E=o.fromCoin)==null?void 0:E.symbol)+"-"+d(o.needReverse?(so=o.fromCoin)==null?void 0:so.symbol:(F=o.toCoin)==null?void 0:F.symbol),1))])])),o.isShowRemoveModal?(v(),ro(n,{key:5,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,onOnClose:s[17]||(s[17]=g=>o.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):x("",!0)])}const Vl=No(cl,[["render",Fl],["__scopeId","data-v-8fb25810"]]),El=Uo({components:{AutoPoolV2Info:Ee,AutoPoolV2PositionRange:We,AutoPoolV2PoolComposition:je,AutoPoolV2PoolLiquidity:Ge,AutoPoolV2PoolAdd:ml,AutoPoolV2PoolRemove:Vl},setup(){const o=Jo();Yo();const s=ye();y(()=>s);const X=()=>{o.getAutoPoolAPY(),o.getVault(D.params.id)},W=I(),D=Zo();wo(()=>D.query.action,c=>{c&&(W.value=c)},{immediate:!0});const T=I(),_=()=>{T.value=window.setInterval(()=>{o.getVault(D.params.id)},6e4)};return we(()=>{console.log(D,"route##"),_()}),Ie(()=>{window.clearInterval(T.value)}),{clickRefresh:X,currentTab:W}}});const Wl={class:"auto-pool-detail-v2"},Xl={class:"detail-top"},jl={class:"detail-bottom pc-detail"},Gl={class:"detail-bottom-left"},Hl={class:"detail-bottom-right"},zl={class:"h5-detail"};function Yl(o,s,X,W,D,T){const _=Ze,c=Ee,$=We,h=je,t=Ge,n=de("AutoPoolV2PoolAdd"),A=de("AutoPoolV2PoolRemove");return v(),P("div",Wl,[e("div",Xl,[z(_,{onClickRefresh:o.clickRefresh},null,8,["onClickRefresh"]),z(c)]),e("div",jl,[e("div",Gl,[z($),z(h),z(t)]),e("div",Hl,[o.currentTab=="add"?(v(),ro(n,{key:0,onChangeCurrentTab:s[0]||(s[0]=a=>o.currentTab="remove")})):(v(),ro(A,{key:1,onChangeCurrentTab:s[1]||(s[1]=a=>o.currentTab="add")}))])]),e("div",zl,[o.currentTab=="add"?(v(),ro(n,{key:0,onChangeCurrentTab:s[2]||(s[2]=a=>o.currentTab="remove")})):(v(),ro(A,{key:1,onChangeCurrentTab:s[3]||(s[3]=a=>o.currentTab="add")})),z($),z(h),z(t)])])}const ki=No(El,[["render",Yl],["__scopeId","data-v-7345b955"]]);export{ki as default};
