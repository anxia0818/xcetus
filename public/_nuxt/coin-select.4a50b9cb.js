import{_ as ae}from"./token-warning.e0de2c62.js";import{i as _}from"./import-icon.de3e6c66.js";import{a as K,D as ke,j as te,u as le,f as he,d as D,B as ie,b as ge,p as _e,E as ye}from"./pool.4229c787.js";import{a as re,l as ue,m as p,a1 as Ce,a2 as de,A as Z,e as ce,o as a,f as r,h as t,c as N,t as c,x as q,u as h,i as j,w as k,s as B,j as E,I as we,J as me,aa as $e,S as Se,B as Te,p as pe,k as ve,M as Le,r as P,v as Ie,ab as Oe,K as H,E as Ne,a3 as je,F as ne,q as se,D as Be,ac as Ae}from"./entry.aa3353d5.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{_ as Pe,a as De}from"./img-no-Positions_2x.eabdf0a3.js";const Me=re({components:{TokenWarning:ae},props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,d){const{t:i,locale:U}=ue(),R=K(),v=p(()=>R),y=p(()=>new ke(Number(e.balance)).div(2)),m=Ce(de,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function I(){this.$emit("onSelect")}const g=n=>{const f=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(b==null?void 0:b.value)&&(b==null?void 0:b.value)}})?).*$`);n.target.value=n.target.value.replace(f,"$1")},S=te(),T=p(()=>S),s=le(),u=p(()=>s);let L={};Z(()=>u.value.RATES,n=>{n&&(console.log(n,"price====>"),L=n)},{immediate:!0});const z=p(()=>(console.log(e.inputValue,"==>props.inputValue"),console.log(e.coinName,"===>props.coinName"),he(Number(e.inputValue)*Number(L&&L[e.address]&&L[e.address].price),2))),C=p(()=>{var n,f,w;return console.log((n=u.value.tokensObj[e.address])==null?void 0:n.labels,"===> pool.value.tokensObj[props.address]?.labels"),u.value.tokensObj&&e.address&&u.value.tokensObj[e.address]&&((f=u.value.tokensObj[e.address])==null?void 0:f.labels)&&((w=u.value.tokensObj[e.address])==null?void 0:w.labels[0])}),b=p(()=>{var n;return u.value.tokensObj&&e.address&&u.value.tokensObj[e.address]&&((n=u.value.tokensObj[e.address])==null?void 0:n.decimals)}),F=p(()=>{var n,f;return e.coinIcon||((f=(n=u==null?void 0:u.value)==null?void 0:n.tokensObj[e.address])==null?void 0:f.logo_url)||(v.value.theme==="default"?_("/image/coins/unknown.png"):_("/image/coins/sui-unknown.png"))}),V=p(()=>u.value.tokensObj);return{theme:p(()=>v.value.theme),currentIcon:F,tokensObj:V,pool:u,halfBalance:y,coinLabels:C,t:i,addCommom:D,store:v,wallet:T,indicator:m,inputChange:g,importIcon:_,selectCoin:I,amountPirce:z,coinDecimals:b,formatNumber:ie}}});const Re=e=>(pe("data-v-022f5d23"),e=e(),ve(),e),Fe={class:"card"},Ve={class:"top"},Ee={key:1,class:"input-div"},ze={key:0},Ze={class:"loading-token"},qe=["src","onerror"],Ue={key:0},We=Re(()=>t("use",{"xlink:href":"#icon-icon_on"},null,-1)),He=[We],Ke={class:"bottom"},Je={key:0,class:"amount-price"},Ge={key:1},Qe={class:"top"},Xe={class:"right"},Ye={class:"balance"};function xe(e,d,i,U,R,v){const y=we,m=me,I=$e,g=ae,S=Se,T=Te;return a(),r("div",Fe,[t("div",Ve,[e.inputDisabled?(a(),r("div",Ee,[e.inputValue?(a(),r("span",ze,c(e.inputValue),1)):(a(),N(m,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(a(),N(y,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:d[0]||(d[0]=s=>e.$emit("onInput",s.target.value)),onFocus:d[1]||(d[1]=s=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),t("div",{class:q(["left",e.hasArrow?"":"nohands"]),onClick:d[2]||(d[2]=s=>e.hasArrow&&!e.pool.isTokenLoading?e.selectCoin():"")},[t("div",Ze,[e.pool.isTokenLoading?(a(),N(I,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):(a(),r("img",{key:1,src:e.currentIcon,onerror:e.theme=="default"?("importIcon"in e?e.importIcon:h(_))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:h(_))("/image/coins/sui-unknown.png")},null,8,qe)),j(g,{address:e.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),j(S,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:k(()=>[t("div",null,[t("p",null,c(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(a(),r("p",Ue,c(e.coinLabels),1)):B("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(a(),r("svg",{key:0,class:q(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},He,2)):B("",!0)],2)]),t("div",Ke,[e.inputValue&&e.amountPirce!="--"?(a(),r("div",Je," $"+c(("formatNumber"in e?e.formatNumber:h(ie))(e.amountPirce)),1)):(a(),r("div",Ge)),t("div",Qe,[t("div",Xe,[E(c(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),t("span",Ye,c(e.wallet.connected?("addCommom"in e?e.addCommom:h(D))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(a(),N(T,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:h(D))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:d[3]||(d[3]=s=>e.$emit("onHalf"))},{default:k(()=>[E(c("Half"))]),_:1},8,["disabled"])):B("",!0),e.havemax&&e.wallet.connected?(a(),N(T,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:h(D))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:d[4]||(d[4]=s=>e.$emit("onMax"))},{default:k(()=>[E(c(e.$t("button.max")),1)]),_:1},8,["disabled"])):B("",!0)])])])])}const Uo=ce(Me,[["render",xe],["__scopeId","data-v-022f5d23"]]);const eo=re({components:{Modal:Le,LoadingOutlined:de},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""},isCreatePoolToCoin:{type:Boolean,default:!1},isCreatePoolFromCoin:{type:Boolean,default:!1}},setup(e,d){const{t:i,locale:U}=ue(),R=te(),v=p(()=>R),y=le(),m=p(()=>y),I=K(),g=p(()=>I),S=p(()=>{var n;return(n=g.value)==null?void 0:n.filterCreatePoolCoin}),T=P([i("tab.all"),i("tab.native"),i("tab.layerZero"),i("tab.wormhole"),i("tab.celer")]),s=P(i("tab.all")),u=P(i("tab.all")),L=K(),z=p(()=>L.chainName),C=P([]);console.log(C,"===>tokenList");const b=P(null);Ie(()=>{});const F=P(!1);Z(s,n=>{n!==i("tab.all")&&(F.value=!1),n==i("tab.all")?u.value=i("tab.all"):n==i("tab.layerZero")?u.value=i("tab.layerZero"):n==i("tab.wormhole")?u.value=i("tab.wormhole"):n==i("tab.celer")?u.value=i("tab.celer"):n==i("tab.native")&&(u.value=i("tab.native")),V(b.value)});const V=async n=>{var G,Q,X,Y,x,ee,oe;let f=[],w=m.value.tokens;if(!(g.value.chainName&&w&&w[0]&&g.value.chainName.toLowerCase().includes((G=w[0])==null?void 0:G.chain))){C.value=[];return}let W=w;if(n&&n.split("::")&&n.split("::").length==3&&z.value=="Sui"){const l=ge("Sui");try{const o=m.value.tokensObj[n]||await l.getTokenBySymbol(m.value.tokens,n);o&&((Q=w.filter($=>($==null?void 0:$.address)===(o==null?void 0:o.address)))==null?void 0:Q.length)<1&&(y.setNewTokens({[n]:o}),W=w.concat(o))}catch(o){console.log("searchToken##err##",o)}}for(const l of Object.keys(W)){let o=Oe(W[l]);const $=v.value.assets[o.address]&&v.value.assets[o.address].balance?_e(v.value.assets&&v.value.assets[o.address].balance,o.decimals):0;e.lastSelectCoin&&o&&o.address===e.lastSelectCoin?o.unusable=!0:o.unusable=!1;const be=((X=m.value.tokensObj[o.address])==null?void 0:X.labels)&&((Y=m.value.tokensObj[o.address])==null?void 0:Y.labels[0]),fe=m.value.tokensObj[o.address]?(x=m.value.tokensObj[o.address])==null?void 0:x.name:o.name;o={...o,balance:$,labels:be,name:fe,sort:o.symbol=="APT"||o.symbol=="SUI"?1:-1},f.push(o)}let A;v.value.address?A=f.sort((l,o)=>o.balance-l.balance):A=f;let O=[];if(n){console.log(A,"sortResult=====>");const l=A.filter(o=>o.symbol.toLowerCase().indexOf(n.toLowerCase())!==-1||o.address.toLowerCase().indexOf(n.toLowerCase())!==-1||o.address.toLowerCase().indexOf(ye(n).full_address.toLowerCase())!==-1);console.log(l,"===>result"),s.value!==i("tab.all")?O=l.filter($=>s.value==i("tab.native")?!$.labels:$.labels&&$.labels.toLowerCase()==s.value.toLowerCase()):O=l}else console.log(s.value,"===>currentTab.value"),s.value!==i("tab.all")?O=A.filter(o=>s.value==i("tab.native")?!o.labels:o.labels&&o.labels.toLowerCase()==s.value.toLowerCase()):O=A;e.isCreatePoolToCoin?C.value=(ee=O.filter(l=>S.value[l==null?void 0:l.address]))==null?void 0:ee.sort((l,o)=>o.sort-l.sort).sort((l,o)=>o.unusable-l.unusable):C.value=O.sort((l,o)=>o.sort-l.sort).sort((l,o)=>o.unusable-l.unusable),e.isCreatePoolFromCoin&&(C.value=(oe=O.filter(l=>!S.value[l==null?void 0:l.address]))==null?void 0:oe.sort((l,o)=>o.sort-l.sort).sort((l,o)=>o.unusable-l.unusable)),console.log(C.value,"tokenList.value===>322")},J=n=>{n.unusable||(d.emit("onSelect",n),d.emit("onClose"))};return Z(()=>[b.value,F.value],([n,f])=>{console.log(n,"===>keyword"),V(n)},{immediate:!0}),Z(()=>m.value.tokens,n=>{n&&(console.log(m.value.tokens,"===>pools.value.tokens"),V(b.value))},{immediate:!0}),{pools:m,t:i,chainName:z,tabList:T,currentTab:s,addCommom:D,tokenList:C,importIcon:_,keyword:b,wallet:v,toSelect:J,store:g,isShowAll:F}}}),oo=""+globalThis.__publicAssetsURL("image/warning@2x.png");const M=e=>(pe("data-v-913d1ef5"),e=e(),ve(),e),no=M(()=>t("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),so={class:"coin-select-modal"},ao={class:"search-input"},to=["placeholder"],lo=M(()=>t("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),io=[lo],ro={key:0,class:"tab-list"},uo=["onClick"],co={class:"item"},mo=M(()=>t("div",{class:"line"},null,-1)),po={class:"coin-list-box"},vo={key:0,class:"coin-list"},bo=["onClick"],fo={class:"left"},ko=["src"],ho=["src"],go={class:"name-box"},_o=M(()=>t("img",{src:oo,alt:""},null,-1)),yo={class:"balance-box"},Co={class:"balance"},wo={key:0},$o={key:1},So={key:2},To={key:3},Lo=M(()=>t("p",null,null,-1)),Io={key:1,class:"no-data"},Oo={key:0,class:"token-loading"},No={key:1,class:"no-data-content"},jo={key:0,src:Pe},Bo={key:1,src:De},Ao=M(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-information"})],-1));function Po(e,d,i,U,R,v){const y=Be,m=H("loading-outlined"),I=Ae,g=me,S=H("vue-scroll"),T=H("Modal");return a(),N(T,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:d[2]||(d[2]=s=>e.$emit("onClose"))},{closeIcon:k(()=>[no]),default:k(()=>[t("div",so,[t("div",ao,[Ne(t("input",{"onUpdate:modelValue":d[0]||(d[0]=s=>e.keyword=s),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,to),[[je,e.keyword]]),e.keyword?(a(),r("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:d[1]||(d[1]=s=>e.keyword="")},io)):B("",!0)]),e.chainName!=="Sui"?(a(),r("div",ro,[(a(!0),r(ne,null,se(e.tabList,(s,u)=>(a(),r("div",{key:u,class:q(["item-container",e.currentTab==s?"item-container-active item-container":"item-container"]),onClick:L=>e.currentTab=s},[t("div",co,c(s),1)],10,uo))),128))])):B("",!0),mo,t("div",po,[j(S,null,{default:k(()=>[e.tokenList&&e.tokenList.length>0?(a(),r("ul",vo,[(a(!0),r(ne,null,se(e.tokenList,(s,u)=>(a(),r("li",{key:u,class:q(s.unusable?"unusable":""),onClick:L=>e.toSelect(s)},[t("div",fo,[s.isChinaToken?(a(),r("img",{key:1,src:e.store.theme=="default"?("importIcon"in e?e.importIcon:h(_))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:h(_))("/image/coins/sui-unknown.png"),alt:""},null,8,ho)):(a(),r("img",{key:0,src:s.icon||s.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:h(_))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:h(_))("/image/coins/sui-unknown.png"))},null,8,ko)),t("div",go,[t("span",null,[E(c(s.symbol)+" ",1),s.isSelfBuilt?(a(),N(y,{key:0,placement:"right","arrow-point-at-center":""},{title:k(()=>[t("span",null,c(e.t("newAdd.notCetusTokenList")),1)]),default:k(()=>[_o]),_:1})):B("",!0)]),t("p",null,c(s.name)+" "+c(s.labels?`(${s.labels})`:""),1)])]),t("div",yo,[t("div",Co,[e.wallet.loading?(a(),r("div",wo,[j(I,null,{default:k(()=>[j(m)]),_:1})])):s.balance&&e.wallet.connected?(a(),r("div",$o,c(("addCommom"in e?e.addCommom:h(D))(s.balance,s.decimals)),1)):!s.balance&&e.wallet.connected?(a(),r("div",So,"0")):(a(),r("div",To))]),Lo])],10,bo))),128))])):(a(),r("div",Io,[e.pools.isTokenLoading?(a(),r("div",Oo,[j(g)])):(a(),r("div",No,[e.store.theme=="default"?(a(),r("img",jo)):(a(),r("img",Bo)),t("p",null,c(e.t("newAdd.noTokensFound")),1),t("div",null,[E(c(e.t("newAdd.enterCoinType"))+" ",1),j(y,{placement:"bottom","arrow-point-at-center":""},{title:k(()=>[t("span",null,c(e.t("newAdd.uniqueIdOfCoin")),1)]),default:k(()=>[Ao]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const Wo=ce(eo,[["render",Po],["__scopeId","data-v-913d1ef5"]]);export{Uo as _,Wo as a};
