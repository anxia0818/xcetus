import{_ as un}from"./back.cedb220a.js";import{_ as rn}from"./refresh-icon.9e89f67c.js";import{a as Ve,a1 as Vo,y as Io,r as _,ah as dn,e as Me,Q as oo,o as u,c as Z,w as fe,h as o,i as W,j as Oe,v as m,f as $,F as eo,E as Eo,A as Te,x as z,ai as vn,I as mn,B as So,p as Ee,k as He,H as mo,K as Ao,l as h,q as Ae,b as Co,m as Ze,s as Po,t as Qe,u as S,G as Ho,O as _o,D as ao,C as cn,L as pn,z as Wo,P as fn,M as jo,S as gn}from"./entry.407a4bfc.js";/* empty css              */import{a as yn,b as bn,_ as kn}from"./icon-error_2x.d4a8a3c0.js";import{u as ze,a as Xo}from"./autoPool.576fc1f8.js";import{u as Je,c as Xe,a as N,g as $o,d as Le,s as T,T as Fe,b as me,p as Fo,e as zo,f as hn,V as wo}from"./pool.1782f336.js";import{_ as co}from"./token-warning.e9c4a456.js";import{_ as Go}from"./auto-pool-apy-tips.a529167b.js";import{u as po,a as To}from"./sha256.5889471c.js";import{i as lo}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as Yo}from"./assets-card.93c41513.js";import{_ as Ko}from"./coin-lock.a86d589f.js";import{_ as Qo,a as Zo}from"./auto-pool-remove-modal.0f981e33.js";/* empty css              *//* empty css              */import{D as a}from"./decimal.0bdeb344.js";/* empty css              */import{u as _n}from"./swapRouter.ec4df524.js";/* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.4a4cb6b4.js";const $n=Ve({components:{Modal:Vo},setup(e,i){const{t:G,locale:Y}=Io(),q=ze(),C=["0.1","0.5","1"],p=_(q.slippage||.1),{setSlippage:P}=q,w=dn();console.log(p.value,"slippage.value");const l=_(!1);function t(n,v){l.value=!1,p.value=v}function B(){P(p.value),i.emit("onClose",!1)}return{settingArr:C,changeActiveIndex:t,confirm:B,emit:w,slippage:p,t:G,isInput:l,inputChange:n=>{const v=new RegExp(/[^\d^\.]+/g);n.target.value=n.target.value.replace(v,""),p.value=n.target.value}}}});const Jo=e=>(Ee("data-v-c5b99de4"),e=e(),He(),e),wn=Jo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),In={class:"setting-container"},Sn={class:"title"},An=Jo(()=>o("img",{src:kn,alt:""},null,-1)),Cn={class:"tag-list"},Pn={key:0,src:yn,alt:""},Tn={key:1,src:bn,alt:""},qn={class:"footer"};function Nn(e,i,G,Y,q,C){const p=vn,P=mn,w=So,l=oo("Modal");return u(),Z(l,{title:"Settings",class:"setting",centered:"",visible:!0,width:"400px",onCancel:i[3]||(i[3]=t=>e.$emit("onClose"))},{closeIcon:fe(()=>[wn]),footer:fe(()=>[o("div",qn,[W(w,{type:"cancel",class:"cancel-btn cancel-btn-new",onClick:i[2]||(i[2]=t=>e.$emit("onClose"))},{default:fe(()=>[Oe(m(e.$t("button.cancel")),1)]),_:1}),W(w,{class:"confirmbtn",disabled:Number(e.slippage)==0||Number(e.slippage)>1||Number(e.slippage)<.01,onClick:e.confirm},{default:fe(()=>[Oe(m(e.$t("button.confirm")),1)]),_:1},8,["disabled","onClick"])])]),default:fe(()=>[o("div",In,[o("div",Sn,[An,o("span",null,m(e.$t("modal.slippageTolerance")),1)]),o("div",Cn,[(u(!0),$(eo,null,Eo(e.settingArr,(t,B)=>(u(),Z(p,{key:B,class:Te(!e.isInput&&t==e.slippage?"tag-active":""),onClick:f=>e.changeActiveIndex(B,t)},{default:fe(()=>[Oe(m(t)+"% ",1)]),_:2},1032,["class","onClick"]))),128)),W(p,{class:Te(["input-tag",e.isInput?"tag-active":""]),onClick:i[1]||(i[1]=t=>e.isInput=!0)},{default:fe(()=>[W(P,{value:e.slippage,"onUpdate:value":i[0]||(i[0]=t=>e.slippage=t),placeholder:"",suffix:"%",class:Te(["slippage-input",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-input-waring":Number(e.slippage)>1?"slippage-input-error":""]),onChange:e.inputChange},null,8,["value","class","onChange"])]),_:1},8,["class"])])]),Number(e.slippage)>.5&&Number(e.slippage)<1||Number(e.slippage)>1?(u(),$("div",{key:0,class:Te(["slippage-hint",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-hint-waring":Number(e.slippage)>1?"slippage-hint-error":""])},[Number(e.slippage)>.5&&1>=Number(e.slippage)?(u(),$("img",Pn)):z("",!0),Number(e.slippage)>1?(u(),$("img",Tn)):z("",!0),o("p",null,m(Number(e.slippage)>.5&&1>=Number(e.slippage)?e.$t("tips.slippageTolerance2"):Number(e.slippage)>1?e.$t("tips.slippageTolerance1"):""),1)],2)):z("",!0)]),_:1})}const Rn=Me($n,[["render",Nn],["__scopeId","data-v-c5b99de4"]]),Bn=Ve({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,i){const G=_(!1),Y=_(null),q=_(0);let C=_(!1);const p=_(20);Je();const P=ze(),w=_(!1);mo(()=>{}),Ao(()=>{clearInterval(Y.value)});const l=()=>{C.value=!1,Y.value=setInterval(()=>{var d;w.value||q.value<p.value&&(q.value+=1,q.value===p.value&&((d=e==null?void 0:e.poolInfo)!=null&&d.address&&f(),q.value=0))},1e3)},t=h(()=>P.slippage),B=()=>{i.emit("clearAll")},f=()=>{C.value||(C.value=!0,q.value=0,i.emit("clickRefresh"),setTimeout(()=>{C.value=!1},1e3))};Ae(()=>e.poolInfo,d=>{d&&!Y.value&&l()},{immediate:!0});const n=Co(),v=Ze();return console.log(v,"route"),{refresh:C,clickRefresh:f,isShowSwapSetting:G,countdown:q,autoRefreshTime:p,slippage:t,clearAll:B,checkNullObj:Xe,router:n,route:v}}});const Dn=e=>(Ee("data-v-71491a33"),e=e(),He(),e),Ln={class:"title"},Un={class:"left"},On=Dn(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Mn={key:0,class:"deposit-progress"};function Fn(e,i,G,Y,q,C){const p=un,P=rn,w=Rn;return u(),$("div",Ln,[o("div",Un,[W(p)]),o("div",{class:Te(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[o("div",{class:"slippage-icon",onClick:i[0]||(i[0]=l=>e.isShowSwapSetting=!0)},[On,o("span",null,m(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(u(),$("div",Mn,[W(P,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):z("",!0)],2),e.isShowSwapSetting?(u(),Z(w,{key:0,onOnClose:i[1]||(i[1]=l=>e.isShowSwapSetting=!1)})):z("",!0)])}const Vn=Me(Bn,[["render",Fn],["__scopeId","data-v-71491a33"]]),En=Ve({components:{AutoPoolApyTips:Go},setup(){const e=po(),i=h(()=>e),G=Je(),Y=h(()=>G),q=ze(),C=h(()=>q),p=h(()=>i.value.theme),P=Ze(),w=_();Ae(()=>[C.value.positionInfoObj,P.params.id],([v,d])=>{v&&!Xe(v)&&d&&(w.value=v[d],console.log(w.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const l=h(()=>{var v;return(v=w.value)==null?void 0:v.needReverse}),t=v=>{var d;return(v==null?void 0:v.logoURI)||(v==null?void 0:v.logo_url)||((d=Y.value.tokensObj[v==null?void 0:v.address])==null?void 0:d.logo_url)||(p.value==="default"?lo("/image/coins/unknown.png"):lo("/image/coins/sui-unknown.png"))},B=h(()=>{var v,d;return console.log((v=w==null?void 0:w.value)==null?void 0:v.poolUSD,"##positionInfo?.value?.poolUSD"),(d=w==null?void 0:w.value)==null?void 0:d.poolUSD}),f=h(()=>{var v,d;return C.value.apyObj&&((d=C.value.apyObj[(v=w.value)==null?void 0:v.id])==null?void 0:d.apr)||"--"}),n=h(()=>i.value.currentExplorer);return{positionInfo:w,needReverse:l,getCoinIcon:t,tvl:B,apy:f,addCommom:N,getExplorerUrl:$o,currentExplorer:n}}});const We=e=>(Ee("data-v-e1816651"),e=e(),He(),e),Hn={class:"auto-pool-v2-info"},Wn={class:"pool-info"},jn={class:"left"},Xn={class:"coin-a"},zn={alt:""},Gn={class:"coin-b"},Yn={alt:""},Kn={class:"position-name"},Qn={key:0,class:"pool-fee"},Zn=We(()=>o("span",null,"Fee tier",-1)),Jn={class:"vault-address"},xn=["href"],et=We(()=>o("span",null,"Vault Address",-1)),ot=We(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),nt=[et,ot],tt={class:"apy-and-tvl"},it={class:"apy"},st=We(()=>o("div",{class:"apy-title"},"APY",-1)),lt={class:"apy-text"},at={class:"tvl"},ut=We(()=>o("div",{class:"tvl-title"},"TVL",-1)),rt={class:"tvl-text"},dt={class:"pool-info h5-pool-info"},vt={class:"left"},mt={class:"coin-a"},ct={alt:""},pt={class:"coin-b"},ft={alt:""},gt={class:"position-name"},yt={key:0,class:"pool-fee"},bt=We(()=>o("span",null,"Fee tier",-1)),kt={class:"left"},ht={class:"vault-address"},_t=["href"],$t=We(()=>o("span",null,"Vault Address",-1)),wt=We(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),It=[$t,wt],St={class:"apy-and-tvl"},At={class:"apy"},Ct=We(()=>o("div",{class:"apy-title"},"APY",-1)),Pt={class:"apy-text"},Tt={class:"tvl"},qt=We(()=>o("div",{class:"tvl-title"},"TVL",-1)),Nt={class:"tvl-text"};function Rt(e,i,G,Y,q,C){var l,t,B,f,n,v,d,b,I,r,L,O,H,ee,ue,le,k,y,K,te,ie,re,j,oe,ge,ye,ae,A,D,ce,se,pe,g,J,Ce,ke,Ue,qe,Re,_e,Pe,xe,no,to,je,Ne;const p=co,P=Go,w=Po("image");return u(),$("div",Hn,[o("div",Wn,[o("div",jn,[o("div",Xn,[Qe(o("img",zn,null,512),[[w,e.needReverse?e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_b):e.getCoinIcon((l=e.positionInfo)==null?void 0:l.token_a)]]),W(p,{address:e.needReverse?(v=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:v.address:(f=(B=e.positionInfo)==null?void 0:B.token_a)==null?void 0:f.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Gn,[Qe(o("img",Yn,null,512),[[w,e.needReverse?e.getCoinIcon((b=e.positionInfo)==null?void 0:b.token_a):e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_b)]]),W(p,{address:e.needReverse?(O=(L=e.positionInfo)==null?void 0:L.token_a)==null?void 0:O.address:(r=(I=e.positionInfo)==null?void 0:I.token_b)==null?void 0:r.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Kn,m(e.needReverse?(ee=(H=e.positionInfo)==null?void 0:H.token_b)==null?void 0:ee.symbol:(le=(ue=e.positionInfo)==null?void 0:ue.token_a)==null?void 0:le.symbol)+" - "+m(e.needReverse?(y=(k=e.positionInfo)==null?void 0:k.token_a)==null?void 0:y.symbol:(te=(K=e.positionInfo)==null?void 0:K.token_b)==null?void 0:te.symbol),1),(ie=e.positionInfo)!=null&&ie.fee?(u(),$("div",Qn,[Zn,Oe(" "+m(((re=e.positionInfo)==null?void 0:re.fee)*100)+"% ",1)])):z("",!0),o("div",Jn,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:S($o))(e.currentExplorer,"poolAddress",(j=e.positionInfo)==null?void 0:j.id),target:"_blank"},nt,8,xn)])]),o("div",tt,[o("div",it,[st,o("div",lt,[Oe(m(e.apy)+" ",1),W(P)])]),o("div",at,[ut,o("div",rt,"$"+m(("addCommom"in e?e.addCommom:S(N))(e.tvl,2)),1)])])]),o("div",dt,[o("div",vt,[o("div",mt,[Qe(o("img",ct,null,512),[[w,e.needReverse?e.getCoinIcon((ge=e.positionInfo)==null?void 0:ge.token_b):e.getCoinIcon((oe=e.positionInfo)==null?void 0:oe.token_a)]]),W(p,{address:e.needReverse?(D=(A=e.positionInfo)==null?void 0:A.token_b)==null?void 0:D.address:(ae=(ye=e.positionInfo)==null?void 0:ye.token_a)==null?void 0:ae.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",pt,[Qe(o("img",ft,null,512),[[w,e.needReverse?e.getCoinIcon((se=e.positionInfo)==null?void 0:se.token_a):e.getCoinIcon((ce=e.positionInfo)==null?void 0:ce.token_b)]]),W(p,{address:e.needReverse?(Ce=(J=e.positionInfo)==null?void 0:J.token_a)==null?void 0:Ce.address:(g=(pe=e.positionInfo)==null?void 0:pe.token_b)==null?void 0:g.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",gt,m(e.needReverse?(Ue=(ke=e.positionInfo)==null?void 0:ke.token_b)==null?void 0:Ue.symbol:(Re=(qe=e.positionInfo)==null?void 0:qe.token_a)==null?void 0:Re.symbol)+" - "+m(e.needReverse?(Pe=(_e=e.positionInfo)==null?void 0:_e.token_a)==null?void 0:Pe.symbol:(no=(xe=e.positionInfo)==null?void 0:xe.token_b)==null?void 0:no.symbol),1),(to=e.positionInfo)!=null&&to.fee?(u(),$("div",yt,[bt,Oe(" "+m(((je=e.positionInfo)==null?void 0:je.fee)*100)+"% ",1)])):z("",!0)]),o("div",kt,[o("div",ht,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:S($o))(e.currentExplorer,"poolAddress",(Ne=e.positionInfo)==null?void 0:Ne.id),target:"_blank"},It,8,_t)])]),o("div",St,[o("div",At,[Ct,o("div",Pt,[Oe(m(e.apy)+" ",1),W(P)])]),o("div",Tt,[qt,o("div",Nt,"$"+m(("addCommom"in e?e.addCommom:S(N))(e.tvl,2)),1)])])])])}const xo=Me(En,[["render",Rt],["__scopeId","data-v-e1816651"]]),Bt=Ve({components:{Slider:Ho},setup(){const e=_(!0),i=Je(),G=h(()=>i),Y=ze(),q=h(()=>Y),C=Ze(),p=_();Ae(()=>[q.value.positionInfoObj,C.params.id],([f,n])=>{f&&!Xe(f)&&n&&(p.value=f[n],console.log(p.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const P=h(()=>{var f;return(f=p.value)==null?void 0:f.needReverse}),w=f=>{var n;return(f==null?void 0:f.logoURI)||(f==null?void 0:f.logo_url)||((n=G.value.tokensObj[f==null?void 0:f.address])==null?void 0:n.logo_url)||lo("/image/coins/sui-unknown.png")},l=h(()=>{var b,I,r,L,O,H,ee;const f=e.value?((b=p.value)==null?void 0:b.minPrice)&&T(p==null?void 0:p.value.minPrice,6):((I=p.value)==null?void 0:I.maxPrice)&&T(1/(p==null?void 0:p.value.maxPrice),6),n=e.value?((r=p.value)==null?void 0:r.maxPrice)&&T((L=p.value)==null?void 0:L.maxPrice,6):((O=p.value)==null?void 0:O.minPrice)&&T(1/(p==null?void 0:p.value.minPrice),6),v=(P.value?!e.value:e.value)?T((H=p.value)==null?void 0:H.price,6):T(1/((ee=p.value)==null?void 0:ee.price),6);let d={};return d[f]={label:"Min Price"},d[n]={label:"Max Price"},v>f&&v<n?d[v]={label:"Current Price"}:v<f?d[Number(f)+1e-9]={label:"Current Price"}:v>n&&(d[Number(n)-1e-9]={label:"Current Price"}),console.log(d,"obj###"),d}),t=h(()=>{var n,v;const f=(P.value?!e.value:e.value)?Le((n=p.value)==null?void 0:n.price,6):Le(1/((v=p.value)==null?void 0:v.price),6);return console.log(f,"result##"),f}),B=h(()=>{var n,v;const f=(P.value?!e.value:e.value)?Le((n=p.value)==null?void 0:n.price,6):Le(1/((v=p.value)==null?void 0:v.price),6);return console.log(f,"result##111"),f});return{direct:e,positionInfo:p,needReverse:P,getCoinIcon:w,decimalUi:Le,addCommom:N,sFixD:T,marks:l,currentPrice:t,currentPriceResever:B}}});const fo=e=>(Ee("data-v-794c305c"),e=e(),He(),e),Dt={class:"v2-position-range"},Lt={class:"position-range-top"},Ut=fo(()=>o("div",null,"Position Range",-1)),Ot={class:"base-coin"},Mt={key:0},Ft={alt:""},Vt={key:1},Et={alt:""},Ht={key:2},Wt={key:3},jt=fo(()=>o("p",null,"Base coin",-1)),Xt={class:"coin-rate"},zt=fo(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Gt=fo(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Yt=[zt,Gt],Kt={class:"position-range-bottom"},Qt={class:"price-range"},Zt={class:"price-range-bg"},Jt={key:0,class:"min-price"},xt={key:0},ei={key:1},oi={key:1,class:"max-price"},ni={key:0},ti={key:1},ii={key:0,class:"min-price"},si={key:0},li={key:1},ai={key:1,class:"max-price"},ui={key:0},ri={key:1};function di(e,i,G,Y,q,C){var l,t,B,f,n,v,d,b,I,r,L,O,H,ee,ue,le,k,y,K,te,ie,re,j,oe,ge,ye,ae,A;const p=co,P=oo("Slider"),w=Po("image");return u(),$("div",Dt,[o("div",Lt,[Ut,o("div",Ot,[e.needReverse?(u(),$("div",Vt,[Qe(o("img",Et,null,512),[[w,e.direct?e.getCoinIcon((b=e.positionInfo)==null?void 0:b.token_b):e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_a)]]),W(p,{address:e.direct?(O=(L=e.positionInfo)==null?void 0:L.token_b)==null?void 0:O.address:(r=(I=e.positionInfo)==null?void 0:I.token_a)==null?void 0:r.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(u(),$("div",Mt,[Qe(o("img",Ft,null,512),[[w,e.direct?e.getCoinIcon((l=e.positionInfo)==null?void 0:l.token_a):e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_b)]]),W(p,{address:e.direct?(f=(B=e.positionInfo)==null?void 0:B.token_a)==null?void 0:f.address:(v=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:v.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(u(),$("span",Wt,m(e.direct?(y=(k=e.positionInfo)==null?void 0:k.token_b)==null?void 0:y.symbol:(te=(K=e.positionInfo)==null?void 0:K.token_a)==null?void 0:te.symbol),1)):(u(),$("span",Ht,m(e.direct?(ee=(H=e.positionInfo)==null?void 0:H.token_a)==null?void 0:ee.symbol:(le=(ue=e.positionInfo)==null?void 0:ue.token_b)==null?void 0:le.symbol),1)),jt,o("div",Xt,[o("div",{onClick:i[0]||(i[0]=D=>e.direct=!e.direct)},Yt)])])]),o("div",Kt,[o("div",Qt,[o("div",Zt,[e.direct?(u(),Z(P,{key:0,value:e.currentPrice,class:Te(["position-slider",e.currentPrice<Number(("sFixD"in e?e.sFixD:S(T))((ie=e.positionInfo)==null?void 0:ie.minPrice,6))||e.currentPrice>Number(("sFixD"in e?e.sFixD:S(T))((re=e.positionInfo)==null?void 0:re.maxPrice,6))?"hide-handler":""]),step:null,marks:e.marks,disabled:!0,min:Number(("decimalUi"in e?e.decimalUi:S(Le))((j=e.positionInfo)==null?void 0:j.minPrice,6)),max:Number(("decimalUi"in e?e.decimalUi:S(Le))((oe=e.positionInfo)==null?void 0:oe.maxPrice,6))},{mark:fe(({label:D})=>{var ce,se,pe,g,J,Ce,ke,Ue,qe,Re,_e,Pe;return[D=="Min Price"?(u(),$("div",Jt,[o("div",null,m(D),1),e.direct?(u(),$("div",xt,m(((ce=e.positionInfo)==null?void 0:ce.minPrice)&&("sFixD"in e?e.sFixD:S(T))((se=e.positionInfo)==null?void 0:se.minPrice,6)),1)):(u(),$("div",ei,m(((pe=e.positionInfo)==null?void 0:pe.maxPrice)&&("sFixD"in e?e.sFixD:S(T))(1/((g=e.positionInfo)==null?void 0:g.maxPrice),6)),1))])):z("",!0),D=="Max Price"?(u(),$("div",oi,[o("div",null,m(D),1),e.direct?(u(),$("div",ni,m(((J=e.positionInfo)==null?void 0:J.maxPrice)&&("sFixD"in e?e.sFixD:S(T))((Ce=e.positionInfo)==null?void 0:Ce.maxPrice,6)),1)):(u(),$("div",ti,m(((ke=e.positionInfo)==null?void 0:ke.minPrice)&&("sFixD"in e?e.sFixD:S(T))(1/((Ue=e.positionInfo)==null?void 0:Ue.minPrice),6)),1))])):z("",!0),D=="Current Price"?(u(),$("div",{key:2,class:Te(["current-price",e.currentPrice<Number(("sFixD"in e?e.sFixD:S(T))((qe=e.positionInfo)==null?void 0:qe.minPrice,6))?"current-price-left":e.currentPrice>Number(("sFixD"in e?e.sFixD:S(T))((Re=e.positionInfo)==null?void 0:Re.maxPrice,6))?"current-price-right":""])},[o("div",null,m(D),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(u(),$(eo,{key:0},[Oe(m(("addCommom"in e?e.addCommom:S(N))(("decimalUi"in e?e.decimalUi:S(Le))((_e=e.positionInfo)==null?void 0:_e.price,6))),1)],64)):(u(),$(eo,{key:1},[Oe(m(("addCommom"in e?e.addCommom:S(N))(("decimalUi"in e?e.decimalUi:S(Le))(1/((Pe=e.positionInfo)==null?void 0:Pe.price),6))),1)],64))])],2)):z("",!0)]}),_:1},8,["value","class","marks","min","max"])):(u(),Z(P,{key:1,value:e.currentPriceResever,class:Te(["position-slider",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:S(T))(1/((ge=e.positionInfo)==null?void 0:ge.maxPrice),6))||e.currentPriceResever>Number(("sFixD"in e?e.sFixD:S(T))(1/((ye=e.positionInfo)==null?void 0:ye.minPrice),6))?"hide-handler":""]),step:null,min:Number(("decimalUi"in e?e.decimalUi:S(Le))(1/((ae=e.positionInfo)==null?void 0:ae.maxPrice),6)),max:Number(("decimalUi"in e?e.decimalUi:S(Le))(1/((A=e.positionInfo)==null?void 0:A.minPrice),6)),marks:e.marks,disabled:!0},{mark:fe(({label:D})=>{var ce,se,pe,g,J,Ce,ke,Ue,qe,Re,_e,Pe;return[D=="Min Price"?(u(),$("div",ii,[o("div",null,m(D),1),e.direct?(u(),$("div",si,m(((ce=e.positionInfo)==null?void 0:ce.minPrice)&&("sFixD"in e?e.sFixD:S(T))((se=e.positionInfo)==null?void 0:se.minPrice,6)),1)):(u(),$("div",li,m(((pe=e.positionInfo)==null?void 0:pe.maxPrice)&&("sFixD"in e?e.sFixD:S(T))(1/((g=e.positionInfo)==null?void 0:g.maxPrice),6)),1))])):z("",!0),D=="Max Price"?(u(),$("div",ai,[o("div",null,m(D),1),e.direct?(u(),$("div",ui,m(((J=e.positionInfo)==null?void 0:J.maxPrice)&&("sFixD"in e?e.sFixD:S(T))((Ce=e.positionInfo)==null?void 0:Ce.maxPrice,6)),1)):(u(),$("div",ri,m(((ke=e.positionInfo)==null?void 0:ke.minPrice)&&("sFixD"in e?e.sFixD:S(T))(1/((Ue=e.positionInfo)==null?void 0:Ue.minPrice),6)),1))])):z("",!0),D=="Current Price"?(u(),$("div",{key:2,class:Te(["current-price current-price-direct",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:S(T))(1/((qe=e.positionInfo)==null?void 0:qe.maxPrice),6))?"current-price-left":e.currentPriceResever>Number(("sFixD"in e?e.sFixD:S(T))(1/((Re=e.positionInfo)==null?void 0:Re.minPrice),6))?"current-price-right":""])},[o("div",null,m(D),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(u(),$(eo,{key:0},[Oe(m(("addCommom"in e?e.addCommom:S(N))(("decimalUi"in e?e.decimalUi:S(Le))((_e=e.positionInfo)==null?void 0:_e.price,6))),1)],64)):(u(),$(eo,{key:1},[Oe(m(("addCommom"in e?e.addCommom:S(N))(("decimalUi"in e?e.decimalUi:S(Le))(1/((Pe=e.positionInfo)==null?void 0:Pe.price),6))),1)],64))])],2)):z("",!0)]}),_:1},8,["value","class","min","max","marks"]))])])])])}const en=Me(Bt,[["render",di],["__scopeId","data-v-794c305c"]]),vi=Ve({components:{Modal:Vo},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const i=h(()=>{var Y,q;const G=Math.ceil(((Y=e.positionInfo)==null?void 0:Y.poolUSD)/((q=e.positionInfo)==null?void 0:q.quoteUSD)*100);return console.log(G,"Pool Capacity Ratio"),Number(G)});return{sFixD:T,addCommom:N,ratio:i}}});const qo=e=>(Ee("data-v-78a51262"),e=e(),He(),e),mi=qo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ci={class:"deposit-slider"},pi={class:"info-block"},fi=qo(()=>o("div",{class:"leabl"},"Current Deposit：",-1)),gi={class:"text"},yi={class:"info-block"},bi=qo(()=>o("div",{class:"leabl"},"Max Capacity：",-1)),ki={class:"text"};function hi(e,i,G,Y,q,C){const p=oo("Modal");return u(),Z(p,{width:"440px",visible:!0,footer:null,title:"Vault Capacity",onCancel:i[0]||(i[0]=P=>e.$emit("onClose"))},{closeIcon:fe(()=>[mi]),default:fe(()=>{var P,w,l,t;return[o("div",ci,[o("div",{class:"current-deposit",style:_o({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",pi,[fi,o("div",gi,m(("addCommom"in e?e.addCommom:S(N))(("sFixD"in e?e.sFixD:S(T))((P=e.positionInfo)==null?void 0:P.currentDeposit,2)))+" "+m((w=e.positionInfo)==null?void 0:w.quoteCoinInfo.symbol),1)]),o("div",yi,[bi,o("div",ki,m(("addCommom"in e?e.addCommom:S(N))(("sFixD"in e?e.sFixD:S(T))((l=e.positionInfo)==null?void 0:l.quoteUSD,2)))+" "+m((t=e.positionInfo)==null?void 0:t.quoteCoinInfo.symbol),1)])]}),_:1})}const on=Me(vi,[["render",hi],["__scopeId","data-v-78a51262"]]),_i=Ve({components:{AutoPoolV2PoolCapacity:on},setup(){const e=Je(),i=h(()=>e),G=ze(),Y=h(()=>G),q=Ze(),C=_();Ae(()=>[Y.value.positionInfoObj,q.params.id],([l,t])=>{console.log(l,"##positionInfoObj"),l&&!Xe(l)&&t&&(C.value=l[t],console.log(C.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const p=h(()=>{var l;return(l=C.value)==null?void 0:l.needReverse}),P=l=>{var t;return console.log(l,"info##"),(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||((t=i.value.tokensObj[l==null?void 0:l.address])==null?void 0:t.logo_url)||lo("/image/coins/sui-unknown.png")},w=_(!1);return{needReverse:p,positionInfo:C,getCoinIcon:P,addCommom:N,isShowModal:w}}});const $i=e=>(Ee("data-v-ad8a33e9"),e=e(),He(),e),wi={class:"pool-composition"},Ii={class:"pool-composition-top"},Si=$i(()=>o("span",null,"Vault Composition",-1)),Ai={class:"pool-composition-bottom"},Ci={class:"token-ratio"},Pi={class:"before-coin"},Ti={alt:""},qi={class:"after-coin"},Ni={alt:""},Ri={class:"token-num"},Bi={class:"num-box"},Di={class:"num-box"};function Li(e,i,G,Y,q,C){var l,t,B,f,n,v,d,b,I,r,L,O,H,ee,ue,le,k,y,K,te,ie,re,j,oe,ge,ye,ae,A,D;const p=co,P=on,w=Po("image");return u(),$("div",wi,[o("div",Ii,[Si,Number((l=e.positionInfo)==null?void 0:l.quoteUSD)>0?(u(),$("div",{key:0,class:"pool-capacity",onClick:i[0]||(i[0]=ce=>e.isShowModal=!0)},"Vault Capacity")):z("",!0)]),o("div",Ai,[o("div",Ci,[o("div",Pi,[o("div",null,[W(p,{address:e.needReverse?(n=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:n.address:(B=(t=e.positionInfo)==null?void 0:t.token_a)==null?void 0:B.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),Qe(o("img",Ti,null,512),[[w,e.needReverse?e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_b):e.getCoinIcon((v=e.positionInfo)==null?void 0:v.token_a)]])]),o("span",null,m((b=e.positionInfo)==null?void 0:b.poolCoinARatio)+"%",1)]),o("div",qi,[o("span",null,m((I=e.positionInfo)==null?void 0:I.poolCoinBRatio)+"%",1),o("div",null,[Qe(o("img",Ni,null,512),[[w,e.needReverse?e.getCoinIcon((L=e.positionInfo)==null?void 0:L.token_a):e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_b)]]),W(p,{address:e.needReverse?(ue=(ee=e.positionInfo)==null?void 0:ee.token_a)==null?void 0:ue.address:(H=(O=e.positionInfo)==null?void 0:O.token_b)==null?void 0:H.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",Ri,[o("div",{class:"token-a-bg",style:_o({width:`${(le=e.positionInfo)==null?void 0:le.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:_o({width:`${(k=e.positionInfo)==null?void 0:k.poolCoinBRatio}%`})},null,4),o("div",Bi,[o("div",null,m(("addCommom"in e?e.addCommom:S(N))((y=e.positionInfo)==null?void 0:y.poolCoinANum))+" "+m(e.needReverse?(re=(ie=e.positionInfo)==null?void 0:ie.token_b)==null?void 0:re.symbol:(te=(K=e.positionInfo)==null?void 0:K.token_a)==null?void 0:te.symbol),1),o("div",null,"$"+m(("addCommom"in e?e.addCommom:S(N))((j=e.positionInfo)==null?void 0:j.poolCoinAUSD)),1)]),o("div",Di,[o("div",null,m(("addCommom"in e?e.addCommom:S(N))((oe=e.positionInfo)==null?void 0:oe.poolCoinBNum))+" "+m(e.needReverse?(A=(ae=e.positionInfo)==null?void 0:ae.token_a)==null?void 0:A.symbol:(ye=(ge=e.positionInfo)==null?void 0:ge.token_b)==null?void 0:ye.symbol),1),o("div",null,"$"+m(("addCommom"in e?e.addCommom:S(N))((D=e.positionInfo)==null?void 0:D.poolCoinBUSD)),1)])])]),e.isShowModal?(u(),Z(P,{key:0,"position-info":e.positionInfo,onOnClose:i[1]||(i[1]=ce=>e.isShowModal=!1)},null,8,["position-info"])):z("",!0)])}const nn=Me(_i,[["render",Li],["__scopeId","data-v-ad8a33e9"]]),Ui=Ve({setup(){const e=Je(),i=h(()=>e),G=ze(),Y=h(()=>G),q=Ze(),C=_();Ae(()=>[Y.value.positionInfoObj,q.params.id],([t,B])=>{console.log(t,"##positionInfoObj"),t&&!Xe(t)&&B&&(C.value=t[B],console.log(C.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const p=h(()=>{var t;return(t=C.value)==null?void 0:t.needReverse}),P=t=>{var B;return console.log(t,"info##"),(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((B=i.value.tokensObj[t==null?void 0:t.address])==null?void 0:B.logo_url)||lo("/image/coins/sui-unknown.png")},w=To(),l=h(()=>w);return{needReverse:p,positionInfo:C,getCoinIcon:P,addCommom:N,wallet:l}}});const uo=e=>(Ee("data-v-61c3efe6"),e=e(),He(),e),Oi={class:"my-liquidity"},Mi={class:"my-liquidity-top"},Fi=uo(()=>o("div",null,"My Liquidity",-1)),Vi=uo(()=>o("p",null,"My share of pool",-1)),Ei={class:"my-liquidity-bottom"},Hi={class:"lp-token"},Wi=uo(()=>o("div",null,[o("span",null,"LP Token Balance ")],-1)),ji={class:"lp-balance"},Xi={class:"token-num-content"},zi={class:"token-num token-a-num"},Gi={class:"logo"},Yi=["src"],Ki={class:"text"},Qi={class:"lp-logo"},Zi=["src"],Ji=uo(()=>o("div",null,"Pooled Assets",-1)),xi={class:"token-num"},es={class:"logo"},os=["src"],ns={class:"text"},ts=uo(()=>o("div",{class:"token-num-content-bg"},null,-1));function is(e,i,G,Y,q,C){var P,w,l,t,B,f,n,v,d,b,I,r,L,O,H,ee,ue,le,k,y,K,te,ie,re,j,oe,ge,ye,ae;const p=co;return u(),$("div",Oi,[o("div",Mi,[Fi,o("div",null,[Vi,o("p",null,m(e.wallet.connected?(P=e.positionInfo)==null?void 0:P.myShare:"--")+"%",1)])]),o("div",Ei,[o("div",Hi,[Wi,o("div",null,[o("span",ji,m(e.wallet.connected?("addCommom"in e?e.addCommom:S(N))((w=e.positionInfo)==null?void 0:w.myLiquidity):"--")+" LP",1),o("span",null,m(e.wallet.connected?((l=e.positionInfo)==null?void 0:l.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in e?e.addCommom:S(N))((t=e.positionInfo)==null?void 0:t.myLiquidityUSD)}`:"<$0.01":"--"),1)])]),o("div",Xi,[o("div",zi,[o("div",Gi,[o("img",{src:e.needReverse?e.getCoinIcon((f=e.positionInfo)==null?void 0:f.token_b):e.getCoinIcon((B=e.positionInfo)==null?void 0:B.token_a),alt:""},null,8,Yi),W(p,{address:e.needReverse?(b=(d=e.positionInfo)==null?void 0:d.token_b)==null?void 0:b.address:(v=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:v.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",Ki,[o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:S(N))((I=e.positionInfo)==null?void 0:I.amountA):"--")+" "+m(e.needReverse?(H=(O=e.positionInfo)==null?void 0:O.token_b)==null?void 0:H.symbol:(L=(r=e.positionInfo)==null?void 0:r.token_a)==null?void 0:L.symbol),1),o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:S(N))((ee=e.positionInfo)==null?void 0:ee.myAmountAUSD):"--"),1)])]),o("div",Qi,[o("img",{src:e.getCoinIcon((ue=e.positionInfo)==null?void 0:ue.lpInfo),alt:""},null,8,Zi),Ji]),o("div",xi,[o("div",es,[o("img",{src:e.needReverse?e.getCoinIcon((k=e.positionInfo)==null?void 0:k.token_a):e.getCoinIcon((le=e.positionInfo)==null?void 0:le.token_b),alt:""},null,8,os),W(p,{address:e.needReverse?(ie=(te=e.positionInfo)==null?void 0:te.token_a)==null?void 0:ie.address:(K=(y=e.positionInfo)==null?void 0:y.token_b)==null?void 0:K.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",ns,[o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:S(N))((re=e.positionInfo)==null?void 0:re.amountB):"--")+" "+m(e.needReverse?(ye=(ge=e.positionInfo)==null?void 0:ge.token_a)==null?void 0:ye.symbol:(oe=(j=e.positionInfo)==null?void 0:j.token_b)==null?void 0:oe.symbol),1),o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:S(N))((ae=e.positionInfo)==null?void 0:ae.myAmountBUSD):"--"),1)])]),ts])])])}const tn=Me(Ui,[["render",is],["__scopeId","data-v-61c3efe6"]]),ss=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const ls={},sn=e=>(Ee("data-v-fcbc716b"),e=e(),He(),e),as={class:"status"},us=sn(()=>o("img",{src:ss,alt:""},null,-1)),rs=sn(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),ds=[us,rs];function vs(e,i){return u(),$("div",as,ds)}const ln=Me(ls,[["render",vs],["__scopeId","data-v-fcbc716b"]]),ms=Ve({components:{AutoPoolAddModal:Qo,AutoPoolV2PoolStatus:ln},setup(){const e=To(),i=_(!1),G=po(),Y=h(()=>G),q=h(()=>Y.value.chainName),C=h(()=>e),p=ze(),P=h(()=>p),w=Je(),l=h(()=>w),t=_(),B=Ze(),f=_(!1),n=_(!1);Ae(()=>[P.value.positionInfoObj,B.params.id],([c,F])=>{c&&!Xe(c)&&F&&(t.value=c[F],console.log(t.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const v=h(()=>{var c,F;return console.log((c=t.value)==null?void 0:c.needReverse,"##positionInfo.value?.needReverse"),(F=t.value)==null?void 0:F.needReverse}),d=_(),b=_(),I=_(),r=_(),L=_(!0),O=h(()=>C.value.assets&&d.value&&C.value.assets[d.value.address]?Fo(C.value.assets[d.value.address].balance,d.value.decimals):0),H=h(()=>C.value.assets&&b.value&&C.value.assets[b.value.address]?Fo(C.value.assets[b.value.address].balance,b.value.decimals):0),ee=c=>{c==="fromCoin"?(L.value=!0,I.value=O.value>0?d.value.symbol=="SUI"?new a(Number(O.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(O.value)).sub(new a(.05)).toString():String(O.value):""):(L.value=!1,r.value=H.value>0?b.value.symbol=="SUI"?new a(Number(H.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(H.value)).sub(new a(.05)).toString():String(H.value):"")},ue=c=>{c==="fromCoin"?(L.value=!0,I.value=O.value>0?T(new a(Number(O.value)).div(2).toString(),d.value.decimals).toString():""):(L.value=!1,r.value=H.value>0?T(new a(Number(H.value)).div(2).toString(),b.value.decimals).toString():"")},le=h(()=>q.value?zo(q.value):{}),k=h(()=>P.value.slippage),y=_("--"),K=_("--"),te=c=>{const F=new a(t.value.autoPoolPositionInfo.liquidity),ve=new a(c.toString());if(F.toNumber()>0&&ve.toNumber()>0){const U=ve.add(F);console.log("totalLiquidity:",ve.div(U).mul(100).toString());const $e=ve.div(U).mul(100).toNumber(),be=hn($e),s=be==-1?2:be+2,R=T(ve.div(U).mul(100).toNumber(),s);console.log(t.value.decimals,"##positionInfo.value.decimal");const ne=new a(1).div(new a(Math.pow(10,t.value.lpInfo.decimals))).toString();console.log(R,ne,"###288"),Number(R)<Number(ne)?y.value=`<${ne}`:y.value=R}else ve.toNumber()>0&&F.toNumber()<=0?y.value="100":y.value="--"},ie=c=>{if(t.value.total_supply==0){K.value="";return}const F=new a(c.toString()),ve=new a(k.value).div(100);console.log(ve.toString(),"#slippageNum");const U=wo.get_lp_amount_by_liquidity({liquidity:t.value.liquidity,total_supply:t.value.total_supply},c.toString()),$e=new a(Math.pow(10,t.value.lpInfo.decimals)),be=new a(U).div($e).toString(),s=new a(be).mul(ve);console.log(U,s.toString(),"###409");const R=new a(be).sub(s);console.log(R.toString(),"##minLp"),console.log(F.toString(),U,be,"lpDecimalNum##"),K.value=T(R.toString(),t.value.decimals)},re=_(!1),j=_(!1),oe=_(""),ge=_(),ye=_(!1),ae=_(!1),A=_(!1),D=_(!1),ce=async()=>{if(console.log(A.value,D.value,"isOnlyA.value||isOnlyB.value"),console.log(t.value,"positionInfo.value###432"),!t.value)return;if(console.log(I.value,r.value,"####updateAmounts"),t.value.supportHaedalStake&&D.value&&r.value<10){ae.value=!0;return}n.value=!1,ye.value=!0;const c=t.value.autoPoolPositionInfo.tick_lower_index,F=t.value.autoPoolPositionInfo.tick_upper_index,ve=Fe.sqrtPriceX64ToTickIndex(new me(t.value.current_sqrt_price));Fe.tickIndexToSqrtPriceX64(c),Fe.tickIndexToSqrtPriceX64(F),ve<c&&(v.value?re.value=!0:j.value=!0),ve>F&&(v.value?j.value=!0:re.value=!0);let U;if(console.log(I.value||r.value,"#fromCoinAmount.value || toCoinAmount.value"),I.value||r.value){L.value?U=new a(I.value).mul(Math.pow(10,d.value.decimals)).toString():U=new a(r.value).mul(Math.pow(10,b.value.decimals)).toString();let $e,be=L.value;if(console.log("执行##"),console.log(ve,c,F,"###520"),A.value||D.value){const V=new a(1);if(console.log(V.toString(),U,"decimalNum###"),new a(U).lte(V))return n.value=!0,!1;console.log(v.value?L.value:!L.value,"#needReverse.value?fixedFromCoin.value:!fixedFromCoin.value"),console.log(U,"##coinAmount"),console.log("1106###needReverse.value####",v.value),console.log("1106###calculateDepositSwapAmount###params###",{lowerTick:c,upperTick:F,curSqrtPrice:new me(t.value.current_sqrt_price),fix_amount_a:be,input_amount:U,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number(k.value)/100,decimals:A.value?d.value.decimals:b.value.decimals,use_Haedal_stake:t.value.supportHaedalStake&&D.value,shouldRequestStake:!1});const M=await je.calculateDepositSwapAmount({lowerTick:c,upperTick:F,curSqrtPrice:new me(t.value.current_sqrt_price),fix_amount_a:be,input_amount:U,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number(k.value)/100,decimals:A.value?d.value.decimals:b.value.decimals,request_id:U,staking_id:t.value.supportHaedalStake&&(D.value&&!t.value.isTokenA||A.value&&t.value.isTokenA)?t.value.staking_id:"",shouldRequestStake:!1});if(console.log(M,"###swapResult"),console.log("1106###calculateDepositSwapAmount###result###",M),M=="HaedalStakeSuiAmountError"){f.value=!1,ae.value=!0;return}else if(M){if(M.request_id!==U)return;ae.value=!1,f.value=t.value.supportHaedalStake?!1:M.is_exceed,$e=new me(M.afterSqrtPrice),U=M.fixAmountA===be?new me(new a(U).sub(M.swapInAmount).toString()):new me(M.swapOutAmount),ge.value={swap_amount:M.swapInAmount,route_obj:M.route_obj,a2b:be,input_amount:U,staking_id:M.staking_id},be=M.fixAmountA;const de=t.value.token_a.decimals,X=t.value.token_b.decimals,E=new a(M.swapInAmount).div(new a(Math.pow(10,de))).toString(),x=T(new a(M.swapOutAmountLimit).div(new a(Math.pow(10,X))).toString(),X),we=v.value?t.value.token_b.symbol:t.value.token_a.symbol,he=v.value?t.value.token_a.symbol:t.value.token_b.symbol,Ie=`To deposit ${N(A.value?I.value:r.value)} ${A.value?we:he},
            ${N(E)} ${A.value?we:he}  will be traded for ${N(x)} ${A.value?he:we} added to the pool.`,Ye=`By depositing ${r.value} ${he}, ${N(x)} ${he} will be converted to ${we} via Haedal 
            liquid staking and added to the pool together.`;oe.value=t.value.supportHaedalStake&&D.value?Ye:Ie}else $e=t.value.current_sqrt_price,U=new me(U)}else f.value=!1,$e=t.value.current_sqrt_price,U=new me(U),oe.value="";console.log(ge,"##swapParams");let s,R,ne;const Q=le.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:d.value,tokenB:b.value,lowerTick:c,upperTick:F,coinAmount:U,iscoinA:be,roundUp:!0,slippage:Number(k.value)/100,curSqrtPrice:new me($e)});console.log("amount#",Q),s=Q.liquidityAmount,R=Q.tokenMaxA,ne=Q.tokenMaxB,!A.value&&!D.value&&(L.value?r.value=Number(ne)>0?ne:"":I.value=Number(R)>0?R:""),console.log(s.toString(),"liquidityAmount###"),te(s),ie(s),ye.value=!1}};Ae(()=>t.value,c=>{c&&!Xe(c)&&(d.value=c==null?void 0:c.token_a,b.value=c==null?void 0:c.token_b,re.value=!1,j.value=!1,ce())},{immediate:!0});const se=h(()=>l.value.RATES),pe=h(()=>{var c,F,ve,U,$e,be,s,R,ne,Q;if((F=se.value[(c=d.value)==null?void 0:c.address])!=null&&F.price&&((U=se.value[(ve=b.value)==null?void 0:ve.address])!=null&&U.price)){console.log((be=se.value[($e=d.value)==null?void 0:$e.address])==null?void 0:be.price,"RATES.value[fromCoin.value?.address]?.price");const V=new a(I.value||0).mul(new a((R=se.value[(s=d.value)==null?void 0:s.address])==null?void 0:R.price)),M=new a(r.value||0).mul(new a((Q=se.value[(ne=b.value)==null?void 0:ne.address])==null?void 0:Q.price));return V.add(M).toNumber()}else return"--"});Ae(()=>I.value,ao((c,F)=>{console.log(c,"##newVal"),c?ce():(y.value="--",r.value="",K.value="--")},500),{immediate:!0}),Ae(()=>r.value,ao((c,F)=>{c?ce():(I.value="",y.value="--",K.value="--")},500),{immediate:!0});const{t:g,locale:J}=Io(),Ce=h(()=>{var c,F;if(A.value||D.value){const ve=A.value?I.value:r.value,U=A.value?d.value:b.value;if((c=se.value[U==null?void 0:U.address])!=null&&c.price)return new a(ve||0).mul(new a((F=se.value[U==null?void 0:U.address])==null?void 0:F.price)).toNumber()}return 0}),ke=h(()=>{const c=Number(I.value)>Number(O.value),F=Number(r.value)>Number(H.value);return!I.value&&!r.value?g("button.enterAmount"):ae.value?"Minimum deposit 10 SUI":c?g("button.insufficientBalance",{name:d.value.symbol}):F?g("button.insufficientBalance",{name:b.value.symbol}):f.value?g("button.insufficientLiquidity"):Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(pe.value)>Number(t.value.remainingTokenUSD)?"Exceeded the max capacity":n.value?g("button.enterAmount"):(console.log(Ce.value),"Add Liquidity")}),Ue=h(()=>{const c=Number(I.value)>Number(O.value),F=Number(r.value)>Number(H.value);return!!(!I.value&&!r.value||c||F||I.value<=0&&r.value<=0||f.value||ro.value!=="STATUS_RUNNING"||(console.log(pe.value,t.value.quoteUSD,"positionInfo.value.quoteUSD#"),Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(pe.value)>Number(t.value.remainingTokenUSD))||n.value||t.value.supportHaedalStake&&!D.value&&Ce.value>1e4||!t.value.supportHaedalStake&&Ce.value>1e4||ae.value)}),qe=_(!0),{setIsShowSuccess:Re,setIsShowRejected:_e,setIsShowWaiting:Pe,setTransactionDesc:xe,setTransactionTxid:no,setPositiomNum:to}=G,je=Xo("Sui"),Ne=async()=>{var ne,Q;i.value=!1,qe.value=!0,no("");const c=`${N(I.value)} ${(ne=d.value)==null?void 0:ne.symbol}`,F=`${N(r.value)} ${(Q=b.value)==null?void 0:Q.symbol}`;xe(`Deposit ${I.value>0?c:""} ${r.value>0&&I.value>0?"and":""} ${r.value>0?F:""}`),Pe(!0);const ve=L.value,U=t.value.autoPoolPositionInfo.tick_lower_index,$e=t.value.autoPoolPositionInfo.tick_upper_index,be=Fe.sqrtPriceX64ToTickIndex(new me(t.value.current_sqrt_price));let s;L.value?s=new a(I.value).mul(Math.pow(10,d.value.decimals)).toString():s=new a(r.value).mul(Math.pow(10,b.value.decimals)).toString();const R=t.value.rewarderInfo.map(V=>V.coinAddress);console.log("1109###deposit###positionInfo###",t);try{const V={lowerTick:U,upperTick:$e,coinAmount:s,fix_amount_a:ve,slippage:Number(k.value)/100,curSqrtPrice:new me(t.value.current_sqrt_price),id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:R,swapParams:ge.value,isOnlyA:A.value,isOnlyB:D.value,currentTickIndex:be,decimal_b:t.value.coinB.decimals,request_id:s,staking_id:t.value.supportHaedalStake&&(D.value&&!t.value.isTokenA||A.value&&t.value.isTokenA)?t.value.staking_id:"",shouldRequestStake:t.value.supportHaedalStake&&D.value,farming_pool:t.value.autoPoolPositionInfo.pool_id};console.log("1106###deposit###params###",V);const M=await je.deposit(V);console.log(M,"===>payloadAdd11111");const de=await C.value.currentWallet.signAndExecuteTransactionBlock(M);let X=le.value.handleTx(de);if(console.log("toAdd###tx###",X),X&&X.hash){no(X.hash),Pe(!1),Re(!0),console.log(t,"===>positionInfo");const E={title:"Supplied",desc:`Deposit ${I.value>0?c:""} ${r.value>0&&I.value>0?"and":""} ${r.value>0?F:""}`,hash:X.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${I.value>0?c:""} ${r.value>0&&I.value>0?"and":""} ${r.value>0?F:""}`};q.value!=="Aptos"&&(E.res=X.res),le.value.showTransitionPending(E),await le.value.watchTransaction(E)&&setTimeout(()=>{p.updatePositionItem(t.value.id),le.value.getAccount(C.value.address)},1e3),to()}else Pe(!1),_e(!0);I.value="",r.value="",qe.value=!1}catch(V){I.value="",r.value="",console.log("addError###",V),qe.value=!1,Pe(!1),_e(!0)}},yo=c=>{I.value="",r.value="",oe.value="",ae.value=!1,c=="only-a-b"?(A.value=!1,D.value=!1):c=="only-a"?(A.value=!0,D.value=!1):(D.value=!0,A.value=!1)},ro=h(()=>P.value.currentAutoPoolStatus),vo=_(),bo=()=>{vo.value=window.setInterval(()=>{(I.value||r.value)&&ce()},2e4)};mo(()=>{bo()}),Ao(()=>{window.clearInterval(vo.value)});const ko=cn(pn,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0});return{currentAutoPoolStatus:ro,wallet:C,positionInfo:t,isShowAddModal:i,needReverse:v,fromCoin:d,toCoin:b,fromCoinAmount:I,toCoinAmount:r,fromCoinBlance:O,toCoinBlance:H,fixedFromCoin:L,maxBtnSelect:ee,halfBtnSelect:ue,totalAmountUSD:pe,addCommom:N,shareOfPool:y,minimumReceivedLP:K,addLiquidityBtnText:ke,addLiquidityBtnDisabled:Ue,toAdd:Ne,showToCoinLock:j,showFromCoinLock:re,isOnlyA:A,isOnlyB:D,onlyToken:yo,onlyText:oe,onlyTokenUSD:Ce,calculateLoading:ye,indicator:ko,depositTokenTips:"You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",depositHaedalTokenTips:"When you deposit in only SUI tokens, a part of your SUI amount will be converted to haSUI via Haedal liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved."}}});const Ge=e=>(Ee("data-v-b377e881"),e=e(),He(),e),cs={class:"auto-pool-add"},ps={class:"auto-pool-add-content"},fs={class:"liquidity-action-tab"},gs=Ge(()=>o("div",{class:"increase tab-active"},"Add",-1)),ys={class:"only-token"},bs=Ge(()=>o("div",null,"Deposit Amounts",-1)),ks=Ge(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),hs=Ge(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),_s={key:0,class:"card-item"},$s={key:1,class:"card-item"},ws=Ge(()=>o("span",null,"Pool Closed",-1)),Is={key:0,class:"add-info"},Ss={key:0,class:"only-text"},As={class:"total-amount"},Cs=Ge(()=>o("span",null,"Total Amount",-1)),Ps={key:0},Ts={class:"total-amount"},qs=Ge(()=>o("span",null,"Share of Pool",-1)),Ns={key:0},Rs={class:"total-amount"},Bs=Ge(()=>o("span",null,"Minimum Received LP",-1)),Ds={key:0},Ls={key:1,class:"add-info only-add-info"},Us=Ge(()=>o("div",{class:"only-text"},"Single-asset deposit can't be higher than $10,000 at a time.",-1)),Os=[Us];function Ms(e,i,G,Y,q,C){var n,v,d,b,I,r,L,O,H,ee,ue,le,k,y,K,te,ie,re,j,oe,ge,ye,ae;const p=fn,P=Yo,w=Ko,l=oo("AutoPoolV2PoolStatus"),t=So,B=jo,f=Qo;return u(),$("div",cs,[o("div",ps,[o("div",fs,[gs,o("div",{class:"remove",onClick:i[0]||(i[0]=Wo(A=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",ys,[bs,o("div",null,[o("div",{class:Te(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:i[1]||(i[1]=A=>e.onlyToken("only-a-b"))},[o("span",null,m(e.needReverse?(b=(d=e.positionInfo)==null?void 0:d.token_b)==null?void 0:b.symbol:(v=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:v.symbol)+" + "+m(e.needReverse?(O=(L=e.positionInfo)==null?void 0:L.token_a)==null?void 0:O.symbol:(r=(I=e.positionInfo)==null?void 0:I.token_b)==null?void 0:r.symbol),1)],2),o("div",{class:Te(["only-a",e.isOnlyA?"active-only":""]),onClick:i[2]||(i[2]=A=>e.onlyToken("only-a"))},[o("span",null,m(e.needReverse?(le=(ue=e.positionInfo)==null?void 0:ue.token_b)==null?void 0:le.symbol:(ee=(H=e.positionInfo)==null?void 0:H.token_a)==null?void 0:ee.symbol)+" only",1),W(p,{placement:"bottom","arrow-point-at-center":""},{title:fe(()=>[o("span",null,m(e.depositTokenTips),1)]),default:fe(()=>[ks]),_:1})],2),o("div",{class:Te(["only-b",e.isOnlyB?"active-only":""]),onClick:i[3]||(i[3]=A=>e.onlyToken("only-b"))},[o("span",null,m(e.needReverse?(te=(K=e.positionInfo)==null?void 0:K.token_a)==null?void 0:te.symbol:(y=(k=e.positionInfo)==null?void 0:k.token_b)==null?void 0:y.symbol)+" only",1),W(p,{placement:"bottom","arrow-point-at-center":""},{title:fe(()=>[o("span",null,m(e.positionInfo.supportHaedalStake?e.depositHaedalTokenTips:e.depositTokenTips),1)]),default:fe(()=>[hs]),_:1})],2)])]),o("div",{class:Te(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(u(),$("div",_s,[W(P,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":i[4]||(i[4]=A=>e.fromCoinAmount=A),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:i[5]||(i[5]=A=>e.maxBtnSelect("fromCoin")),onOnHalf:i[6]||(i[6]=A=>e.halfBtnSelect("fromCoin")),onOnInput:i[7]||(i[7]=A=>{e.fromCoinAmount=A}),onOnFocus:i[8]||(i[8]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(u(),Z(w,{key:0})):z("",!0)])):z("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(u(),$("div",$s,[W(P,{modelValue:e.toCoinAmount,"onUpdate:modelValue":i[9]||(i[9]=A=>e.toCoinAmount=A),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:i[10]||(i[10]=A=>e.maxBtnSelect("toCoin")),onOnHalf:i[11]||(i[11]=A=>e.halfBtnSelect("toCoin")),onOnInput:i[12]||(i[12]=A=>{e.toCoinAmount=A}),onOnFocus:i[13]||(i[13]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(u(),Z(w,{key:0})):z("",!0)])):z("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(u(),Z(l,{key:0})):z("",!0),(ie=e.positionInfo)!=null&&ie.is_pause?(u(),Z(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:fe(()=>[ws]),_:1})):e.wallet.connected?(u(),Z(t,{key:2,class:"big-btn liquidity-btn",disabled:e.addLiquidityBtnDisabled,onClick:i[14]||(i[14]=A=>e.isShowAddModal=!0)},{default:fe(()=>[o("span",null,m(e.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(u(),Z(t,{key:3,class:"big-btn liquidity-btn",onClick:i[15]||(i[15]=A=>e.wallet.setIsShowWalletModal(!0))},{default:fe(()=>[o("span",null,m(e.$t("button.connectWallet")),1)]),_:1})),(((re=e.positionInfo)==null?void 0:re.quoteUSD)==0||Number((j=e.positionInfo)==null?void 0:j.remainingTokenUSD)>Number(e.totalAmountUSD))&&(Number(e.fromCoinAmount)>0||Number(e.toCoinAmount)>0)?(u(),$(eo,{key:4},[e.onlyTokenUSD<=1e4?(u(),$("div",Is,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount>0||e.isOnlyB&&e.toCoinAmount>0)?(u(),$("div",Ss,m(e.onlyText),1)):z("",!0),o("div",As,[Cs,e.calculateLoading?(u(),Z(B,{key:1,paragraph:!1,active:""})):(u(),$("span",Ps,m(Number(e.totalAmountUSD)>0&&Number(e.totalAmountUSD)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:S(N))(e.totalAmountUSD,2)}`),1))]),o("div",Ts,[qs,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(u(),$("span",Ns,m(e.shareOfPool)+"%",1)):(u(),Z(B,{key:1,paragraph:!1,active:""}))]),o("div",Rs,[Bs,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(u(),$("span",Ds,m(("addCommom"in e?e.addCommom:S(N))(e.minimumReceivedLP))+" "+m(e.needReverse?(oe=e.toCoin)==null?void 0:oe.symbol:(ge=e.fromCoin)==null?void 0:ge.symbol)+"-"+m(e.needReverse?(ye=e.fromCoin)==null?void 0:ye.symbol:(ae=e.toCoin)==null?void 0:ae.symbol),1)):(u(),Z(B,{key:1,paragraph:!1,active:""}))])])):e.positionInfo.supportHaedalStake&&!e.isOnlyB&&e.onlyTokenUSD>1e4||!e.positionInfo.supportHaedalStake&&e.onlyTokenUSD>1e4?(u(),$("div",Ls,Os)):z("",!0)],64)):z("",!0),e.isShowAddModal?(u(),Z(f,{key:5,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:i[16]||(i[16]=A=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):z("",!0)])}const Fs=Me(ms,[["render",Ms],["__scopeId","data-v-b377e881"]]),Vs=Ve({components:{AutoPoolRemoveModal:Zo,AutoPoolV2PoolStatus:ln},setup(){const e=To(),i=h(()=>e),G=po(),Y=h(()=>G),q=h(()=>f.value.slippage),C=h(()=>Y.value.chainName),p=_n(),P=h(()=>p),w=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],l=_(25),t=Ze(),B=ze(),f=h(()=>B),n=h(()=>(console.log(f.value.positionInfoObj[t.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),f.value.positionInfoObj[t.params.id])),v=h(()=>{var s;return(s=n.value)==null?void 0:s.needReverse}),d=_(),b=_(),I=_(!1),r=_(),L=h(()=>{var s;return(s=n.value)==null?void 0:s.myLiquidity}),O=_(!0),H=h(()=>C.value?zo(C.value):{}),ee=_(),ue=_(),le=Xo("Sui"),k=_(""),y=_(""),K=_("--"),te=_(!1),ie=_(!1),re=_(),j=_(!0),oe=_(),ge=Je(),ye=h(()=>ge),ae=h(()=>ye.value.RATES),A=_(!1),D=async()=>{if(O.value||!n.value||n.value.positionLiquidity==0)return;ue.value=!1,A.value=!0;const s=n.value.autoPoolPositionInfo.tick_lower_index,R=n.value.autoPoolPositionInfo.tick_upper_index,ne=Fe.sqrtPriceX64ToTickIndex(new me(n.value.current_sqrt_price));ne<s&&(v.value?te.value=!0:ie.value=!0),ne>R&&(v.value?ie.value=!0:te.value=!0);let Q;if(console.log(k.value||y.value,"#fromCoinAmount.value || toCoinAmount.value"),k.value||y.value){j.value?Q=new a(k.value).mul(Math.pow(10,d.value.decimals)).toString():Q=new a(y.value).mul(Math.pow(10,b.value.decimals)).toString();let V,M=j.value;if(g.value||J.value){g.value?Number(k.value)/Number(c.value):Number(y.value)/Number(c.value);const x=await le.calculateRemoveSwapAmount({lowerTick:s,upperTick:R,curSqrtPrice:new me(n.value.current_sqrt_price),fix_amount_a:M,receiveAmount:Q,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(q.value)/100,decimals:g.value?d.value.decimals:b.value.decimals,liquidity:k.value==c.value||y.value==c.value?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:Q});if(console.log(x,"###swapResult"),x){if(x.request_id!==Q)return;ee.value=x.is_exceed,Q=new me(x.swapOutAmount),V=n.value.current_sqrt_price,re.value={swap_amount:x.swapInAmount,liquidity:x.liquidity,a2b:!M,route_obj:x.route_obj},M=!M;const we=n.value.token_a.decimals,he=n.value.token_b.decimals,Ie=new a(x.swapInAmount).div(new a(Math.pow(10,we))).toString(),Ye=T(new a(x.swapOutAmountLimit).div(new a(Math.pow(10,he))).toString(),he),Se=v.value?n.value.token_b.symbol:n.value.token_a.symbol,Be=v.value?n.value.token_a.symbol:n.value.token_b.symbol;oe.value=k.value==c.value||y.value==c.value?`To withdraw ${N(g.value?k.value:y.value)} ${g.value?Se:Be},
          ${N(g.value?n.value.amountB:n.value.amountA)} ${g.value?Be:Se} 
           in the pool will be traded for ${Ie} ${g.value?Se:Be}`:`To withdraw ${N(g.value?k.value:y.value)} ${g.value?Se:Be},
          ${N(Ie)} ${g.value?Be:Se}  in the pool will be traded for ${N(Ye)} ${g.value?Se:Be}`}else{ue.value=!0,oe.value="";return}}else ee.value=!1,V=n.value.current_sqrt_price,Q=new me(Q);console.log(V,"##curSqrtPrice"),console.log("执行了吗##");const{liquidityAmount:de,tokenMaxA:X,tokenMaxB:E}=H.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:d.value,tokenB:b.value,lowerTick:s,upperTick:R,coinAmount:Q,iscoinA:M,roundUp:!1,slippage:Number(q.value)/100,curSqrtPrice:new me(V)});if(console.log(n.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(E.toString(),X.toString(),n.value,"###323"),!g.value&&!J.value&&(j.value?y.value=Number(E)>0?E:"":k.value=Number(X)>0?X:""),(g.value||J.value)&&(Number(k.value)>=Number(c.value)||Number(y.value)>=Number(c.value))){console.log("执行这里了吗"),r.value=n.value.myLiquidity;const x=new a(100);K.value=new a(n.value.myLiquidity).mul(new a(Math.pow(10,n.value.lpInfo.decimals))).toString(),ce.value=de.toString(),l.value=x.toNumber()}else{console.log("执行这里了吗1");const x=wo.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},de.toString()),we=new a(x).div(new a(Math.pow(10,n.value.lpInfo.decimals))).toString();console.log(we,L.value,de.toString(),n.value.liquidity,n.value.total_supply,"##lpBalance.value");const he=new a(we).div(new a(L.value)).mul(100);console.log(we,L.value,he.toNumber(),"lp##"),r.value=new a(L.value).mul(he.div(100)).toString(),K.value=x,ce.value=de.toString(),l.value=he.toNumber()}A.value=!1}},ce=_(),se=h(()=>{var s;return(s=n==null?void 0:n.value)==null?void 0:s.amountA}),pe=h(()=>{var s;return(s=n==null?void 0:n.value)==null?void 0:s.amountB}),g=_(!1),J=_(!1),Ce=h(()=>{var M,de,X,E;const s=(de=ae.value[(M=d==null?void 0:d.value)==null?void 0:M.address])==null?void 0:de.price,R=(E=ae.value[(X=b==null?void 0:b.value)==null?void 0:X.address])==null?void 0:E.price;console.log(s,R,k.value,y.value,"####totalWithdraw");let ne=k.value!=="--"&&k.value!==""?k.value:0,Q=y.value!=="--"&&y.value!==""?y.value:0,V;return s&&R&&(g.value||J.value?V=new a(g.value?ne:Q).mul(new a(g.value?s:R)).toString():(V=new a(ne).mul(new a(s)).add(new a(Q).mul(new a(R))).toString(),console.log(V,"result##"))),V>0&&V<.01?"<$0.01":`$${N(T(V,2))}`}),ke=async s=>{var we,he,Ie,Ye,Se,Be,ho,Bo,Do,Lo,Uo;if(!O.value)return;O.value=!0,ue.value=!1,(he=(we=n.value)==null?void 0:we.token_a)==null||he.decimals,(Ye=(Ie=n.value)==null?void 0:Ie.token_b)==null||Ye.decimals;const R=(Se=n.value)==null?void 0:Se.tick_lower_index,ne=(Be=n.value)==null?void 0:Be.tick_upper_index;Fe.tickIndexToSqrtPriceX64(R),Fe.tickIndexToSqrtPriceX64(ne);const Q=(Bo=(ho=n.value)==null?void 0:ho.autoPoolPositionInfo)==null?void 0:Bo.tick_lower_index,V=(Lo=(Do=n.value)==null?void 0:Do.autoPoolPositionInfo)==null?void 0:Lo.tick_upper_index,M=Fe.sqrtPriceX64ToTickIndex(new me((Uo=n==null?void 0:n.value)==null?void 0:Uo.current_sqrt_price));M<Q&&(v.value?te.value=!0:ie.value=!0),M>V&&(v.value?ie.value=!0:te.value=!0);let de="",X,E;console.log(s.value,"##item.value"),console.log(E,"##coinAmount");let x=j.value;if(console.log("执行##"),g.value||J.value&&!te.value&&!ie.value){if(g.value){const Ke=new a(c.value).mul(Math.pow(10,d.value.decimals)).mul(s.value).toString();console.log(Ke,"##amount"),E=T(Ke,0),k.value=T(new a(c.value).mul(s.value).toString(),d.value.decimals)}if(J.value){const Ke=new a(c.value).mul(s.value).mul(Math.pow(10,b.value.decimals)).toString();E=T(Ke,0),y.value=T(new a(c.value).mul(s.value).toString(),b.value.decimals)}console.log(k.value,"##fromCoinAmount.value");const De=await le.calculateRemoveSwapAmount({lowerTick:R,upperTick:ne,curSqrtPrice:new me(n.value.current_sqrt_price),fix_amount_a:x,receiveAmount:E,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(q.value)/100,decimals:g.value?d.value.decimals:b.value.decimals,liquidity:s.value==1?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:E});if(console.log(De,"###swapResult536"),De){if(De.request_id!==E)return;ee.value=De.is_exceed,E=new me(De.swapOutAmount),n.value.current_sqrt_price,re.value={swap_amount:De.swapInAmount,liquidity:De.liquidity,route_obj:De.route_obj,a2b:!x},x=!x;const Ke=n.value.token_a.decimals,Oo=n.value.token_b.decimals,an=new a(De.swapInAmount).div(new a(Math.pow(10,Ke))).toString(),Mo=T(new a(De.swapOutAmountLimit).div(new a(Math.pow(10,Oo))).toString(),Oo),io=v.value?n.value.token_b.symbol:n.value.token_a.symbol,so=v.value?n.value.token_a.symbol:n.value.token_b.symbol;oe.value=s.value==1?`To withdraw ${N(g.value?k.value:y.value)} ${g.value?io:so},
          ${N(g.value?n.value.amountB:n.value.amountA)} ${g.value?so:io}  in the pool will be traded for ${N(Mo)} ${g.value?io:so}`:`To withdraw ${N(g.value?k.value:y.value)} ${g.value?io:so},
          ${N(an)} ${g.value?so:io}  in the pool will be traded for ${N(Mo)} ${g.value?io:so}`,de=De.liquidity}else n.value.current_sqrt_price,E=new me(E),oe.value="",ue.value=!0;console.log(X,"result###"),K.value=new a(n.value.myLiquidity).mul(new a(s.value)).toString(),console.log(n.value,n.value.liquidity,de,K.value,"###positionInfo.value.liquidity"),console.log(K.value,"##lpTokenAmount.value"),r.value=new a(K.value),ce.value=de}else{ee.value=!1;const De=new a(se.value).mul(Math.pow(10,d.value.decimals)).mul(s.value).toString();E=T(De,0),k.value=T(new a(se.value).mul(s.value).toString(),d.value.decimals);const Ke=new a(pe.value).mul(s.value).mul(Math.pow(10,b.value.decimals)).toString();E=T(Ke,0),y.value=T(new a(pe.value).mul(s.value).toString(),b.value.decimals),n.value.current_sqrt_price,E=new me(E),s.value!==1?X=new a(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(s.value).toString():X=new a(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),r.value=new a(X).div(Math.pow(10,n.value.lpInfo.decimals)),de=wo.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},X),K.value=T(X,0),ce.value=T(de,0),console.log(de,"###newLiquidity525")}};Ae(l,ao((s,R)=>{s!==R&&(Number(s)>100?l.value=100:s&&n.value?(console.log("687===>"),l.value=s,ke({value:l.value/100})):(k.value="",y.value=""))},300)),Ae(()=>k.value,ao((s,R)=>{s?D():!g.value&&!J.value&&(y.value="",l.value=0)},500),{immediate:!0}),Ae(()=>y.value,ao((s,R)=>{s?D():!g.value&&!J.value&&(k.value="",l.value=0)},500),{immediate:!0});const Ue=Co(),{setIsShowSuccess:qe,setIsShowRejected:Re,setIsShowWaiting:_e,setTransactionDesc:Pe,setTransactionTxid:xe,setPositiomNum:no,setTransactionDescText:to}=G,je=_(!1),{t:Ne}=Io(),yo=async()=>{var we,he;je.value=!0,xe("");const s=Number(k.value)>0?`${N(k.value,d.value.decimals)} ${d.value.symbol}`:"",R=Number(y.value)>0?`${N(y.value,b.value.decimals)} ${b.value.symbol}`:"";console.log(s,R,"###transactionDescTo"),Pe(Ne("tips.removeLiquidiyText",{from:v.value?R:s,and:Number(k.value)>0&&Number(y.value)>0?"and":"",to:v.value?s:R})),_e(!0);const ne=Ne("modal.removeLiquidityText2");to(ne);const Q=n.value.autoPoolPositionInfo.tick_lower_index,V=n.value.autoPoolPositionInfo.tick_upper_index,M=Fe.tickIndexToSqrtPriceX64(Q),de=Fe.tickIndexToSqrtPriceX64(V),X=n.value.rewarderInfo.map(Ie=>Ie.coinAddress);console.log(K.value,"##lpTokenAmount.value431");let E;j.value?E=new a(k.value).mul(Math.pow(10,d.value.decimals)).toString():E=new a(y.value).mul(Math.pow(10,b.value.decimals)).toString(),console.log();const x={lowerSqrtPrice:M,upperSqrtPrice:de,lpTokenAmount:K.value,liquidity:ce.value,curSqrtPrice:new me(n.value.object.current_sqrt_price),slippage:Number(q.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:X,swapParams:re.value,fix_amount_a:j.value,isOnlyA:!te.value&&!ie.value?g.value:!1,isOnlyB:!ie.value&&!te.value?J.value:!1,lowerTick:Q,upperTick:V,receiveAmount:E,sliderVal:l.value,positionInfo:n.value,maxLiquidity:n.value.positionLiquidity,farming_pool:n.value.autoPoolPositionInfo.pool_id};try{const Ie=await le.remove(x);console.log(Ie,"移除流动性payload");const Ye=await i.value.currentWallet.signAndExecuteTransactionBlock(Ie);let Se=H.value.handleTx(Ye);if(console.log("0331###remove###tx####",Se),Se&&Se.hash){xe(Se.hash),_e(!1),qe(!0);const Be={title:Ne("common.removeLiquidity"),desc:"",hash:Se.hash,descTransactions:`Remove ${s} ${Number(k.value)>0&&Number(y.value)>0?"and":""} ${R} from the pool`,sender:i.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${k.value} ${(we=d.value)==null?void 0:we.symbol} and ${y.value} ${(he=b.value)==null?void 0:he.symbol}`};Be.res=Se.res,H.value.showTransitionPending(Be),await H.value.watchTransaction(Be)&&(k.value="",y.value="",r.value="",l.value=0,setTimeout(()=>{B.updatePositionItem(n.value.id),H.value.getAccount(i.value.address)},1e3),Number(l.value)==100&&t.name=="auto-pool-detail"&&Ue.push("/vaults"))}else _e(!1),Re(!0);je.value=!1}catch(Ie){console.log("Remove error",Ie),je.value=!1,_e(!1),Re(!0)}};Ae(()=>n.value,(s,R)=>{s&&!Xe(s)&&(d.value=s==null?void 0:s.token_a,b.value=s==null?void 0:s.token_b,console.log("触发###"),(!R||R&&R.address!==s.address)&&(l.value=l.value>0?l.value:25,ke({value:l.value/100})),R&&R.current_sqrt_price!==s.current_sqrt_price&&(O.value?ke({value:l.value/100}):D()))},{immediate:!0});const ro=h(()=>{if(n.value.positionLiquidity==0)return"Insufficient LP Amount";const s=Number(r.value)>Number(L.value);return!k.value&&!y.value||!r.value||r.value<=0||!k.value&&g.value||!y.value&&J.value?Ne("button.enterAmount"):s?"Invalid Amount":ee.value?Ne("button.insufficientLiquidity"):ue.value?Ne("button.enterAmount"):(console.log(k.value,c.value,y.value,"856##"),g.value&&Number(k.value)>Number(c.value)||J.value&&Number(y.value)>Number(c.value)?"Invalid Amount":Ne("button.remove"))}),vo=h(()=>{if(n.value.positionLiquidity==0)return!0;const s=Number(r.value)>Number(L.value);return!!(!k.value&&!y.value||Number(k.value)<=0&&g.value||Number(y.value)<=0&&J.value||!r.value||r.value<=0||s||ee.value||U.value!=="STATUS_RUNNING"||ue.value||g.value&&Number(k.value)>Number(c.value)||J.value&&Number(y.value)>Number(c.value))}),bo=s=>(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||lo("/image/coins/sui-unknown.png"),ko=s=>{k.value="",y.value="",O.value=!0,oe.value="",s=="only-a"?(g.value=!g.value,J.value=!1,j.value=!0):(J.value=!J.value,g.value=!1,j.value=!1)},No=s=>{O.value=!0,l.value=100,s==="fromCoin"?j.value=!0:j.value=!1},Ro=s=>{O.value=!0,l.value=50,s==="fromCoin"?j.value=!0:j.value=!1},c=_(),F=async()=>{const s=n.value.token_a.decimals,R=n.value.token_b.decimals,ne=new a(se.value).mul(new a(Math.pow(10,s))).toNumber(),Q=new a(pe.value).mul(new a(Math.pow(10,R))).toNumber(),V=g.value?Q:ne,M=g.value?b.value.address===n.value.token_a.address:d.value.address===n.value.token_a.address;try{const de=await P.value.swapRouterContract.getSwapRouter(g.value?b:d,g.value?d:b,V,!0,Number(q.value)/100,"",void 0,[{pool_id:n.value.address,tick_lower:n.value.autoPoolPositionInfo.tick_lower_index,tick_upper:n.value.autoPoolPositionInfo.tick_upper_index,delta_liquidity:Number(n.value.positionLiquidity),is_increase:!1}]),X=new a(de.amountOut);c.value=X.sub(X.mul(Number(q.value)/100)).add(new a(g.value?se.value:pe.value)).toString()}catch{if(g.value||J.value){console.log(V,"##receiveAmount");let X=await H.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:M,byAmountIn:!0,amount:V});console.log(X,X.estimatedAmountOut,s,R,"##preSwapRes");const E=new a(X.estimatedAmountOut);c.value=E.sub(E.mul(Number(q.value)/100)).add(new a(g.value?se.value:pe.value)).toString(),console.log("转换之后数量:",X.estimatedAmountOut),console.log("转换之后滑点数量:",E.mul(Number(q.value)/100).toNumber()),console.log("原有数量减滑点数量:",E.sub(E.mul(Number(q.value)/100)).toNumber()),console.log("fromCoin原有数量:",se.value),console.log(c.value,"###onlyTokenBalance.value"),g.value?k.value=T(new a(c.value).mul(l.value/100).toString(),d.value.decimals):y.value=T(new a(c.value).mul(l.value/100).toString(),b.value.decimals),ke({value:l.value/100})}}ke({value:l.value/100})};Ae(()=>[g.value,J.value,se.value,pe.value],([s,R])=>{s||R?F():ke({value:l.value/100})},{immediate:!0});const ve=s=>`${s}%`,U=h(()=>f.value.currentAutoPoolStatus),$e=_(),be=()=>{$e.value=window.setInterval(()=>{(k.value||y.value)&&!O.value?D():ke({value:l.value/100})},2e4)};return mo(()=>{be()}),Ao(()=>{window.clearInterval($e.value)}),{removeLiquidityBtnText:ro,removeLiquidityBtnDisabled:vo,wallet:i,ratioArr:w,positionInfo:n,isShowRemoveModal:I,needReverse:v,fromCoin:d,toCoin:b,lpAmount:r,lpBalance:L,sliderVal:l,sFixD:T,isSlider:O,fromCoinAmount:k,toCoinAmount:y,setPercent:ke,toRemove:yo,addCommom:N,getCoinIcon:bo,isOnlyA:g,isOnlyB:J,onlyToken:ko,fixedFromCoin:j,maxBtnSelect:No,halfBtnSelect:Ro,fromCoinBlance:se,toCoinBlance:pe,showFromCoinLock:te,showToCoinLock:ie,removeText:oe,onlyTokenBalance:c,totalWithdraw:Ce,formatter:ve,currentAutoPoolStatus:U,calculateLoading:A}}});const go=e=>(Ee("data-v-992ae66a"),e=e(),He(),e),Es={class:"auto-pool-add"},Hs={class:"auto-pool-add-content"},Ws={class:"liquidity-action-tab"},js=go(()=>o("div",{class:"remove tab-active"},"Remove",-1)),Xs={key:0,class:"card-item"},zs={key:1,class:"card-item"},Gs={class:"remove-ratio"},Ys={class:"remove-ratio-select"},Ks={key:0,class:"ratio"},Qs={key:1,class:"ratio"},Zs={class:"ratio-list"},Js=["onClick"],xs=go(()=>o("span",null,"Pool Closed",-1)),el={key:4,class:"remove-info"},ol={key:0,class:"remove-text total-amount"},nl={class:"total-amount"},tl=go(()=>o("span",null,"Total Withdraw",-1)),il={key:0},sl={class:"total-amount"},ll=go(()=>o("span",null,"LP Burn Amount",-1)),al={key:0};function ul(e,i,G,Y,q,C){var n,v,d,b,I;const p=Yo,P=Ko,w=Ho,l=oo("AutoPoolV2PoolStatus"),t=So,B=jo,f=Zo;return u(),$("div",Es,[o("div",Hs,[o("div",Ws,[o("div",{class:"increase",onClick:i[0]||(i[0]=Wo(r=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),js]),o("div",{class:Te(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(u(),$("div",Xs,[W(p,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":i[1]||(i[1]=r=>e.fromCoinAmount=r),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:i[2]||(i[2]=r=>e.maxBtnSelect("fromCoin")),onOnHalf:i[3]||(i[3]=r=>e.halfBtnSelect("fromCoin")),onOnInput:i[4]||(i[4]=r=>{e.isSlider=!1,e.fromCoinAmount=r}),onOnFocus:i[5]||(i[5]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(u(),Z(P,{key:0})):z("",!0)])):z("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(u(),$("div",zs,[W(p,{modelValue:e.toCoinAmount,"onUpdate:modelValue":i[6]||(i[6]=r=>e.toCoinAmount=r),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:i[7]||(i[7]=r=>e.maxBtnSelect("toCoin")),onOnHalf:i[8]||(i[8]=r=>e.halfBtnSelect("toCoin")),onOnInput:i[9]||(i[9]=r=>{e.isSlider=!1,e.toCoinAmount=r}),onOnFocus:i[10]||(i[10]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(u(),Z(P,{key:0})):z("",!0)])):z("",!0)],2),o("div",Gs,[o("div",Ys,[Number(e.lpBalance)>=Number(e.lpAmount)?(u(),$("div",Ks,m(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:S(T))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:S(T))(e.sliderVal,2))+"% ",1)):(u(),$("div",Qs,"--")),o("div",Zs,[(u(!0),$(eo,null,Eo(e.ratioArr,(r,L)=>(u(),$("div",{key:L,class:Te(["ratio-item",e.sliderVal==r.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=r.value}},m(r.name),11,Js))),128))])]),W(w,{value:e.sliderVal,"onUpdate:value":i[11]||(i[11]=r=>e.sliderVal=r),"tip-formatter":e.formatter,onChange:i[12]||(i[12]=r=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(u(),Z(l,{key:0})):z("",!0),(n=e.positionInfo)!=null&&n.is_pause?(u(),Z(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:fe(()=>[xs]),_:1})):e.wallet.connected?(u(),Z(t,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:i[13]||(i[13]=r=>e.toRemove())},{default:fe(()=>[o("span",null,m(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(u(),Z(t,{key:3,class:"big-btn liquidity-btn",onClick:i[14]||(i[14]=r=>e.wallet.setIsShowWalletModal(!0))},{default:fe(()=>[o("span",null,m(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?z("",!0):(u(),$("div",el,[e.removeText&&(e.isOnlyA&&Number(e.fromCoinAmount)>0||e.isOnlyB&&Number(e.toCoinAmount)>0)?(u(),$("div",ol,m(e.removeText),1)):z("",!0),o("div",nl,[tl,e.calculateLoading?(u(),Z(B,{key:1,paragraph:!1,active:""})):(u(),$("span",il,m(e.totalWithdraw),1))]),o("div",sl,[ll,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(u(),$("span",al,m(("addCommom"in e?e.addCommom:S(N))(("sFixD"in e?e.sFixD:S(T))(e.lpAmount,e.positionInfo.decimals)))+" "+m(e.needReverse?(v=e.toCoin)==null?void 0:v.symbol:(d=e.fromCoin)==null?void 0:d.symbol)+"-"+m(e.needReverse?(b=e.fromCoin)==null?void 0:b.symbol:(I=e.toCoin)==null?void 0:I.symbol),1)):(u(),Z(B,{key:1,paragraph:!1,active:""}))])])),e.isShowRemoveModal?(u(),Z(f,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:i[15]||(i[15]=r=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):z("",!0)])}const rl=Me(Vs,[["render",ul],["__scopeId","data-v-992ae66a"]]),dl=Ve({components:{AutoPoolV2Info:xo,AutoPoolV2PositionRange:en,AutoPoolV2PoolComposition:nn,AutoPoolV2PoolLiquidity:tn,AutoPoolV2PoolAdd:Fs,AutoPoolV2PoolRemove:rl},setup(){const e=ze();Je();const i=po(),G=h(()=>i),Y=h(()=>e),q=Ze(),C=_();Ae(()=>[Y.value.positionInfoObj,q.params.id],([l,t])=>{l&&!Xe(l)&&t&&(C.value=l[t],console.log(C.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const p=async()=>{console.log("重新获取数据"),e.getAutoPoolAPY(),e.getVault(q.params.id,"refresh")},P=_();Ae(()=>q.query.action,l=>{l&&(P.value=l)},{immediate:!0}),mo(()=>{e.getVault(q.params.id,!1)}),h(()=>G.value.chainName),Co();const w=h(()=>Y.value.autoPoolLoading);return{clickRefresh:p,currentTab:P,positionInfo:C,autoPoolLoading:w}}});const vl={class:"auto-pool-detail-v2"},ml={class:"detail-top"},cl={class:"detail-bottom pc-detail"},pl={class:"detail-bottom-left"},fl={class:"detail-bottom-right"},gl={class:"h5-detail"},yl={key:0,class:"loading-global"};function bl(e,i,G,Y,q,C){const p=Vn,P=xo,w=en,l=nn,t=tn,B=oo("AutoPoolV2PoolAdd"),f=oo("AutoPoolV2PoolRemove"),n=gn;return u(),$("div",vl,[o("div",ml,[W(p,{"pool-info":e.positionInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"]),W(P)]),o("div",cl,[o("div",pl,[W(w),W(l),W(t)]),o("div",fl,[e.currentTab=="deposit"?(u(),Z(B,{key:0,onChangeCurrentTab:i[0]||(i[0]=v=>e.currentTab="remove")})):(u(),Z(f,{key:1,onChangeCurrentTab:i[1]||(i[1]=v=>e.currentTab="deposit")}))])]),o("div",gl,[e.currentTab=="deposit"?(u(),Z(B,{key:0,onChangeCurrentTab:i[2]||(i[2]=v=>e.currentTab="remove")})):(u(),Z(f,{key:1,onChangeCurrentTab:i[3]||(i[3]=v=>e.currentTab="deposit")})),W(w),W(l),W(t)]),e.autoPoolLoading?(u(),$("div",yl,[W(n)])):z("",!0)])}const Hl=Me(dl,[["render",bl],["__scopeId","data-v-5f6b7979"]]);export{Hl as default};
