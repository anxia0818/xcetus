import{_ as gt}from"./xwhale-header.5c296211.js";import{r as f,X as Ye,q as V,e as q,o as c,f as w,h as a,v as y,j as D,y as de,l as i,s as je,x as F,t as Pe,c as U,M as qe,p as te,k as ne,i as O,F as Re,E as Ee,w as X,B as me,Q as Ge,u as De,A as Se,a as Le,C as ht,L as _t,I as pt,a1 as ft,H as wt,K as bt,a8 as Ct,G as yt}from"./entry.58564c79.js";/* empty css              */import{a as se,u as ve}from"./sha256.21b2e963.js";import{u as Ue}from"./xcetus.a7ccdbf3.js";import{i as Z}from"./import-icon.de3e6c66.js";import{a as P,s as Te,e as We,u as Me,c as ee,p as J,z as ye}from"./pool.a1941d40.js";import{u as Oe}from"./useWhale.78600248.js";import{_ as ze}from"./xWHALE-icon.2df34cd4.js";import{_ as Ke}from"./WHALE-icon.28f954ba.js";import{_ as St}from"./head-switch.3615817c.js";/* empty css              */import{_ as Tt}from"./icon-selected_3x.09e9a6f0.js";/* empty css              *//* empty css              */import{D as Xe}from"./decimal.0bdeb344.js";import{u as kt}from"./useTheme.490a95dd.js";import{_ as It}from"./img-leverage_2x.1c577303.js";const $t={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,t){const s=f("--"),n=f("--"),I=f("--"),C=f("--");let d=null;Ye(()=>{window.clearInterval(d)});const b=()=>{const _=new Date().getTime()/1e3;Number(_)<=Number(e.startTime)&&S(e.startTime),Number(_)>Number(e.startTime)&&Number(_)<=Number(e.endTime)&&S(e.endTime)},S=_=>{clearInterval(d),window.clearInterval(d),d=setInterval(()=>{let g=new Date().getTime()/1e3,m=_-parseInt(String(g));if(m==0){t.emit("countDown"),clearInterval(d),window.clearInterval(d),d=null;return}else m<0&&(clearInterval(d),window.clearInterval(d),t.emit("countDown"),d=null);m--;let v=parseInt(String(m/60/60/24));v=(v<10,v);let l=parseInt(String(m/60/60%24));l=(l<10,l);let T=parseInt(String(m/60%60));T=(T<10,T);let E=parseInt(String(m%60));E=E<10?+E:E,s.value=v,n.value=l,I.value=T,C.value=E},1e3)};return V(()=>e.startTime,(_,g)=>{_!==g&&b()},{immediate:!0}),{day:s,hour:n,min:I,sec:C}}};const xt={class:"count-time"};function At(e,t,s,n,I,C){return c(),w("div",xt,[a("p",null,y(n.day)+"d",1),D(" : "),a("p",null,y(n.hour)+"h",1),D(" : "),a("p",null,y(n.min)+"m",1),D(" : "),a("p",null,y(n.sec)+"s",1)])}const Nt=q($t,[["render",At],["__scopeId","data-v-ce10c596"]]),Bt={props:{titleText:{type:String,default:""},tipsText:{type:String,default:""},imgIcon:{type:String,default:""},value:{type:String,default:"--"},tokenSymbol:{type:String,default:""},logo:{type:String,default:""}},setup(e){const{t}=de();console.log(e.value,"props.value####");const s=se(),n=i(()=>s);return{t,wallet:n}}};const Rt=e=>(te("data-v-844310a2"),e=e(),ne(),e),Et={class:"table-rewards"},Dt={key:0,class:"logo"},Pt=["src"],Lt={class:"text-top-all"},Ut={key:0,class:"icon-hover-box"},Wt=Rt(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1)),Mt={class:"tips-text-box"},Ot={key:0},Vt={key:0,alt:""},Ft={key:2};function Ht(e,t,s,n,I,C){const d=qe,b=je("image");return c(),w("div",Et,[s.logo?(c(),w("div",Dt,[a("img",{src:s.logo,alt:""},null,8,Pt)])):F("",!0),a("div",null,[a("div",Lt,[a("p",null,y(s.titleText),1),s.tipsText?(c(),w("div",Ut,[Wt,a("div",Mt,y(s.titleText=="est.APR"?"Estimated APR of the current epoch for all xCETUS holders.":"The number of qualified positions in this epoch."),1)])):F("",!0)]),a("span",null,[s.value!=="--"?(c(),w("p",Ot,[s.imgIcon?Pe((c(),w("img",Vt,null,512)),[[b,s.imgIcon]]):F("",!0),D(y(s.value)+" ",1),a("span",null,y(s.tokenSymbol),1)])):s.value=="--"&&n.wallet&&n.wallet.address?(c(),U(d,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})):(c(),w("p",Ft,"--"))])])])}const Xt=q(Bt,[["render",Ht],["__scopeId","data-v-844310a2"]]),Yt={setup(e){const{t}=de(),s=Ue(),n=i(()=>s),I=i(()=>n.value.pendingAmount),C=i(()=>n.value.newPendingAmount),d=i(()=>n.value.rewardCoinAmount),b=i(()=>(console.log(n.value.nextStartTime,"===>xcetus.value.nextStartTime"),n.value.nextStartTime)),S=i(()=>1683094391),_=i(()=>n.value.xcetusShare&&P(n.value.xcetusShare,3)),g=se(),r=i(()=>g),m=i(()=>n.value.cetusApr&&n.value.cetusApr>.01?P(Te(n.value.cetusApr,2),2):P(n.value.cetusApr,2)),v=i(()=>n.value.pendingCoinInfo),l=i(()=>n.value.newPendingCoinInfo),T=i(()=>n.value.rewardCoin),E=f("");V(()=>v.value,h=>{h&&ee(h),E.value="Pending yield"},{immediate:!0});const ie=f("");V(()=>l.value,h=>{h&&!ee(h)?ie.value=`Pending yield (${h.symbol})`:ie.value="Pending yield"},{immediate:!0});const re=f();V(()=>T.value,h=>{h&&!ee(h)?re.value=`Pending yield (${h.symbol})`:re.value="Pending yield"},{immediate:!0});const Ie=()=>{setTimeout(()=>{s.getDividendManager()},3e3)},_e=i(()=>n.value.dividendManagerInfo),$e=i(()=>{const h=parseInt(String(new Date().getTime()/1e3)),L=_e.value.interval_day,x=(h-Number(_e.value.start_time))/(L*60);return console.log(parseInt(String(x))>0,"====>(parseInt(String(time))) > 0"),parseInt(String(x))>0}),j=ve(),pe=i(()=>j),{setIsShowSuccess:G,setIsShowRejected:fe,setIsShowWaiting:ae,setTransactionDesc:B,setTransactionTxid:z}=j,xe=Oe("Sui"),K=f(!1),Ae=i(()=>n.value.venft_id),A=i(()=>pe.value.chainName?We(pe.value.chainName):{}),Y=async()=>{K.value=!0,ae(!0),z("");let h=`${t("tips.claimingPendingYield")} `,L="";$.value.forEach((x,k)=>{L=L+`${P(x.amount)} ${x.symbol} ${k==$.value.length-1?"":"and "}`}),console.log(h,"#desc"),B(h+L);try{let x;const k=await xe.getRedeemDividendV2Payload(Ae.value);console.log(k,"payload==>");const Q=await A.value.signAndExecuteTransactionBlock(r.value.currentWallet,k);if(x=A.value.handleTx(Q),x&&x.hash){z(x.hash),ae(!1),G(!0);const W={title:"Claim",desc:`Claimed ${L} successfully.`,hash:x.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:v.value.symbol,numa:`+ ${I.value}`,logoa:v.value.logo_url}};A.value.showTransitionPending(W);const oe=await A.value.watchTransaction(W);console.log("0221###swap###transitionStatus####",oe),oe&&setTimeout(()=>{s.getVeNFTDividendInfo(),K.value=!1},3e3),s.getOwnerLockCetuss(r.value.address)}else ae(!1),fe(!0),K.value=!1}catch(x){ae(!1),fe(!0),K.value=!1,console.log(x,"error===>")}},we=Me(),p=i(()=>we),be=h=>{var L;return(h==null?void 0:h.logoURI)||(h==null?void 0:h.logo_url)||((L=p.value.tokensObj[h==null?void 0:h.address])==null?void 0:L.logo_url)},$=i(()=>n.value.xcetusRewardList);return{t,pendingAmount:I,nextStartTime:b,wallet:r,myShare:_,importIcon:Z,nextEndTime:S,pendingYieldText:E,cetusApr:m,pendingCoinInfo:v,getNextEpoch:Ie,canClaim:$e,claimPendingYield:Y,claimLoading:K,addCommom:P,newPendingCoinInfo:l,newPendingAmount:C,newPendingYieldText:ie,rewardCoin:T,rewardCoinAmount:d,rewardCoinYieldText:re,getCoinIcon:be,xcetusRewardList:$}}},jt=""+new URL("staking-rewards-banner-h5.1c7401db.png",import.meta.url).href,qt=""+globalThis.__publicAssetsURL("sui-image/icon_pendingyield@2x.png");const ge=e=>(te("data-v-5ebe8e76"),e=e(),ne(),e),Gt={class:"top-banner"},zt=ge(()=>a("img",{src:jt,alt:""},null,-1)),Kt=ge(()=>a("p",null,"Convert CETUS to xCETUS to start earning",-1)),Qt={class:"bot-count"},Jt=ge(()=>a("span",null,"Reward distribution in ",-1)),Zt={class:"holder-rewards"},en=ge(()=>a("div",{class:"title"},[a("div",{class:"left"},[a("span",null,"xCETUS Staking Rewards")])],-1)),tn={class:"rewards-value"},nn={key:0,class:"pending-yield"},an=ge(()=>a("div",{class:"pending-yield-title"},[a("img",{src:qt,alt:""}),a("span",null,"Pending Yield")],-1)),on={class:"pending-yield-list"},ln={alt:""},sn={class:"claim-btn-box"};function rn(e,t,s,n,I,C){const d=Nt,b=Xt,S=me,_=je("image");return c(),w("div",null,[a("div",Gt,[zt,Kt,a("div",Qt,[Jt,O(d,{"start-time":n.nextStartTime,onCountDown:t[0]||(t[0]=g=>e.$emit("getNextEpoch"))},null,8,["start-time"])])]),a("div",Zt,[en,a("div",tn,[O(b,{"title-text":"est.APR","tips-text":"good",value:"≈"+n.cetusApr+"%",logo:"/sui-image/icon_estapr@2x.png"},null,8,["title-text","value"]),O(b,{"title-text":"My share",value:n.myShare!=="--"?"≈"+n.myShare+"%":"--",logo:"/sui-image/icon_myshare@2x.png"},null,8,["value"]),n.xcetusRewardList&&n.xcetusRewardList.length==0?(c(),U(b,{key:0,"title-text":"Pending yield",value:n.wallet&&n.wallet.address?"0":"--",logo:"/sui-image/icon_pendingyield@2x.png"},null,8,["value"])):F("",!0)]),n.wallet&&n.wallet.address&&n.xcetusRewardList&&n.xcetusRewardList.length>0?(c(),w("div",nn,[an,a("div",on,[(c(!0),w(Re,null,Ee(n.xcetusRewardList,(g,r)=>(c(),w("div",{key:r,class:"pending-yield-item"},[a("div",null,[Pe(a("img",ln,null,512),[[_,n.getCoinIcon(g)]]),a("span",null,y(g.symbol),1)]),a("div",null,y(n.addCommom(g.amount,6)),1)]))),128)),a("div",sn,[n.wallet&&n.wallet.address&&n.xcetusRewardList&&n.xcetusRewardList.length>0?(c(),U(S,{key:0,class:"claim-btn",loading:n.claimLoading,disabled:!n.canClaim||n.xcetusRewardList&&n.xcetusRewardList.length==0,onClick:n.claimPendingYield},{default:X(()=>[D(" Claim ")]),_:1},8,["loading","disabled","onClick"])):F("",!0)])])])):F("",!0)])])}const un=q(Yt,[["render",rn],["__scopeId","data-v-5ebe8e76"]]),cn={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,t){const s=f("--"),n=f("--"),I=f("--"),C=f("--");let d=null;Ye(()=>{window.clearInterval(d)});const b=()=>{const _=new Date().getTime()/1e3;Number(_)<=Number(e.startTime)&&S(e.startTime),Number(_)>Number(e.startTime)&&Number(_)<=Number(e.endTime)&&S(e.endTime)},S=_=>{d=setInterval(()=>{let g=new Date().getTime()/1e3,m=_-parseInt(String(g));if(m==0){t.emit("countDown"),clearInterval(d),window.clearInterval(d),d=null;return}else m<0&&(clearInterval(d),window.clearInterval(d),t.emit("countDown"),d=null);m--;let v=parseInt(String(m/60/60/24));v=v<10?"0"+v:v;let l=parseInt(String(m/60/60%24));l=l<10?"0"+l:l;let T=parseInt(String(m/60%60));T=T<10?"0"+T:T;let E=parseInt(String(m%60));E=E<10?"0"+E:E,s.value=v,n.value=l,I.value=T,C.value=E},1e3)};return V(()=>e.startTime,(_,g)=>{_!==g&&b()},{immediate:!0}),{day:s,hour:n,min:I,sec:C}}};const ke=e=>(te("data-v-131b3f4e"),e=e(),ne(),e),dn={class:"count-down"},mn=ke(()=>a("span",null,"D : ",-1)),vn=ke(()=>a("span",null,"H : ",-1)),gn=ke(()=>a("span",null,"M : ",-1)),hn=ke(()=>a("span",null,"S",-1));function _n(e,t,s,n,I,C){return c(),w("div",dn,[D(y(n.day)+" ",1),mn,D(" "+y(n.hour)+" ",1),vn,D(" "+y(n.min)+" ",1),gn,D(" "+y(n.sec)+" ",1),hn])}const pn=q(cn,[["render",_n],["__scopeId","data-v-131b3f4e"]]),fn={components:{WcountDown:pn},props:{vItem:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},setup(e,t){const{t:s}=de();console.log(e.vItem,"vItem");const n=Ue(),I=ve(),C=i(()=>I),d=v=>{t.emit("claim",v),n.setClaimLoading(v.id)},b=i(()=>n),S=i(()=>new Date().getTime()/1e3>e.vItem.locked_until_time),_=v=>{t.emit("cancelRedeemPayload",v),n.setClaimLoading(v.id)};i(()=>C.value.chainName),Oe("Sui");const g=se();return i(()=>g),i(()=>b.value.venft_id),i(()=>C.value.chainName?We(C.value.chainName):{}),{t:s,prettyAmount:J,claimBoolean:S,toClaim:d,toCancel:_,claimWhale:v=>{t.emit("claimWhale",v)},cancelRedeemPayload:v=>{t.emit("cancelRedeemPayload",v)}}}};const Ve=e=>(te("data-v-22a782cd"),e=e(),ne(),e),wn={class:"vesting-box"},bn={class:"left"},Cn=Ve(()=>a("img",{src:ze,alt:""},null,-1)),yn=Ve(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-swap2"})],-1)),Sn=Ve(()=>a("img",{src:Ke,alt:""},null,-1)),Tn={class:"available-all"},kn={class:"available"},In={key:0},$n={key:1};function xn(e,t,s,n,I,C){const d=Ge("WcountDown"),b=me;return c(),w("div",wn,[a("div",bn,[a("p",null,[a("span",null,[Cn,D(" "+y(("addCommom"in e?e.addCommom:De(P))(n.prettyAmount(s.vItem.xcetus_amount,9),9))+" xCETUS ",1)]),yn,a("span",null,[Sn,D(" "+y(("addCommom"in e?e.addCommom:De(P))(n.prettyAmount(s.vItem.cetus_amount,9),9))+" CETUS ",1)])]),a("div",Tn,[a("div",kn,[a("span",null,y(n.claimBoolean?"Available":"Available in"),1),n.claimBoolean?F("",!0):(c(),U(d,{key:0,"start-time":s.vItem.locked_start_time,"end-time":s.vItem.locked_until_time,onCountDown:t[0]||(t[0]=S=>e.$emit("countDown"))},null,8,["start-time","end-time"]))]),a("div",{class:Se(n.claimBoolean?"highlight right-h5":"right-h5")},[n.claimBoolean?(c(),w("span",In,"Claim")):(c(),w("span",$n,"Cancel"))],2)])]),n.claimBoolean?(c(),U(b,{key:0,disabled:!n.claimBoolean||s.loading,loading:s.loading,onClick:t[1]||(t[1]=S=>n.claimWhale(s.vItem))},{default:X(()=>[D(y(n.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"])):(c(),U(b,{key:1,type:"text",class:"right",disabled:s.loading,loading:s.loading,onClick:t[2]||(t[2]=S=>n.cancelRedeemPayload(s.vItem))},{default:X(()=>[D(y(n.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"]))])}const An=q(fn,[["render",xn],["__scopeId","data-v-22a782cd"]]),Nn=Le({props:{inputValue:{type:String,default:""},coinSymbol:{type:String,default:""},whaleDirection:{type:String,default:""},address:{type:String,default:""},balance:{type:String,default:""}},setup(e,t){const{t:s,locale:n}=de(),I=ve(),C=i(()=>I),d=ht(_t,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),b=se(),S=i(()=>b),_=Me(),g=i(()=>_),r=v=>{const T=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");v.target.value=v.target.value.replace(T,"$1")},m=i(()=>{var v;return g.value.tokensObj&&e.address&&g.value.tokensObj[e.address]&&((v=g.value.tokensObj[e.address])==null?void 0:v.decimals)});return V(()=>g.value.RATES,v=>{v&&console.log(v,"price====>")},{immediate:!0}),{pool:g,t:s,addCommom:P,store:C,wallet:S,indicator:d,inputChange:r,importIcon:Z,coinDecimals:m}}});const Bn=e=>(te("data-v-c5336450"),e=e(),ne(),e),Rn={class:"card"},En={class:"top"},Dn={class:"left"},Pn={class:"loading-token"},Ln={key:0,src:Ke,alt:""},Un={key:1,src:ze,alt:""},Wn={class:"bottom"},Mn=Bn(()=>a("div",null,null,-1)),On={class:"top"},Vn={class:"right"},Fn={key:0,class:"balance"},Hn={key:2,class:"balance"};function Xn(e,t,s,n,I,C){var _,g;const d=pt,b=qe,S=me;return c(),w("div",Rn,[a("div",En,[O(d,{value:e.inputValue,placeholder:"0.0",onChange:e.inputChange,onInput:t[0]||(t[0]=r=>e.$emit("onInput",r.target.value)),onFocus:t[1]||(t[1]=r=>e.$emit("onFocus"))},null,8,["value","onChange"]),a("div",Dn,[a("div",Pn,[e.coinSymbol=="CETUS"?(c(),w("img",Ln)):(c(),w("img",Un)),a("div",null,[a("p",null,y(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1)])])])]),a("div",Wn,[Mn,a("div",On,[a("div",Vn,[a("span",null,y(e.$t("common.balance")),1),e.balance!=="--"?(c(),w("span",Fn,y(e.balance>1?("addCommom"in e?e.addCommom:De(P))(e.balance):e.balance),1)):e.balance=="--"&&e.wallet&&e.wallet.address?(c(),U(b,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})):(c(),w("span",Hn,"--")),e.whaleDirection=="From"?(c(),U(S,{key:3,class:"max-btn",disabled:!e.balance||e.balance==0||!((_=e.wallet)!=null&&_.address),onClick:t[2]||(t[2]=r=>e.$emit("halfBalanne"))},{default:X(()=>[D(y("Half"))]),_:1},8,["disabled"])):F("",!0),e.whaleDirection=="From"?(c(),U(S,{key:4,class:"max-btn",disabled:!e.balance||e.balance==0||!((g=e.wallet)!=null&&g.address),onClick:t[3]||(t[3]=r=>e.$emit("maxBalanne"))},{default:X(()=>[D(y(e.$t("button.max")),1)]),_:1},8,["disabled"])):F("",!0)])])])])}const Yn=q(Nn,[["render",Xn],["__scopeId","data-v-c5336450"]]);const jn=Le({components:{Modal:ft},setup(e,t){const s=ve(),n=f(!1);i(()=>s);const I=se(),C=i(()=>I);return{store:s,isSelect:n,clickConvert:()=>{n.value&&localStorage.setItem(`notRemind${C.value.address}`,!0),t.emit("clickConvert")}}}}),Fe=e=>(te("data-v-ee04003a"),e=e(),ne(),e),qn=Fe(()=>a("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),Gn=[qn],zn={class:"token-waring-conetnt"},Kn=Fe(()=>a("div",{class:"tips-text"},[D(" Please note that after conversion, if you want to convert xCETUS back to CETUS, a vesting period will be applied & different vesting durations correspond to different redeem ratios. "),a("a",{href:"https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus",target:"_blank"}," Learn more")],-1)),Qn={class:"read-text"},Jn={key:0,src:Tt},Zn=Fe(()=>a("span",null," Do not remind again. ",-1));function ea(e,t,s,n,I,C){const d=me,b=Ge("Modal");return c(),U(b,{width:"440px",visible:!0,footer:null,title:null,"mask-closable":!0,onCancel:t[3]||(t[3]=S=>e.$emit("close"))},{closeIcon:X(()=>[(c(),w("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:t[0]||(t[0]=S=>e.$emit("close"))},Gn))]),default:X(()=>[a("div",zn,[Kn,a("div",Qn,[a("div",{class:"radio",onClick:t[1]||(t[1]=S=>e.isSelect=!e.isSelect)},[e.isSelect?(c(),w("img",Jn)):F("",!0)]),Zn]),O(d,{class:"big-btn continue",onClick:t[2]||(t[2]=()=>e.clickConvert())},{default:X(()=>[D("Convert")]),_:1})])]),_:1})}const ta=q(jn,[["render",ea],["__scopeId","data-v-ee04003a"]]),na=Le({setup(){const e=Ue(),t=i(()=>e),s=i(()=>t.value.venft_id),n=i(()=>t.value.venftInfo),I=Me(),C=i(()=>I),d=ve(),b=i(()=>d),S=kt();i(()=>C.value.tokensObj&&C.value.tokensObj["0x2a4f647bc73f070182436658bff75060246019857c769ad9268c22c4472bca7f::cetus::CETUS"]);const _=f("");let g=f(!1);const r=f(""),m=f(""),v=f(!1),l=f("convert"),{t:T}=de(),E=f([{time:"15 D",num:15},{time:"30 D",num:30},{time:"90 D",num:90},{time:"180 D",num:180}]),ie=f([{name:"est.APR",value:"100.12%"},{name:"My share",value:"<0.1%"},{name:"Pending yield (USDC)",value:0}]),re=f([{name:"My total locked",value:"$100.12"},{name:"Pending rewards (xCETUS)",value:"100.12"},{name:"",value:""}]),Ie=f([{name:"My positions",value:"12"},{name:"My qualified positions",value:"0"},{name:"Pending rewards (xCETUS)",value:"100.12"}]),_e=window.setInterval(()=>{e.getXcetusApr(),p.value.address&&(e.getMyShare(p.value.address),e.getVeNFTDividendInfo())},6e4),$e=window.setInterval(async()=>{await e.getAccountWhaleBalance(p.value.address)},1e4);wt(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||e.getDividendManager()}),e.getDividendManager()}),bt(()=>{window.clearInterval(_e),window.clearInterval($e),document.removeEventListener("visibilitychange",()=>{console.log("移除监听")})}),V(()=>b.value.theme,o=>{o!=="sui"&&S.selectSuiTheme()},{immediate:!0});const j=i(()=>(console.log(t.value.whaleBalance,"==>xcetus.value.whaleBalance"),t.value.whaleBalance)),pe=i(()=>t.value.xWhaleBalance),G=i(()=>t.value.availableXwhale),fe=i(()=>t.value.redeemingXwhale),ae=i(()=>{if(l.value=="convert"){if(Number(r.value)>Number(j.value))return!0}else if(Number(r.value)>Number(G.value))return!0;return!r.value||!m.value||Number(r.value)==0||Number(m.value)==0}),B=f("180"),z=i(()=>(console.log(l.value=="convert","===>1212211"),l.value=="convert"&&Number(r.value)>Number(j.value)?T("button.insufficientBalance",{name:"CETUS"}):l.value!=="convert"&&Number(r.value)>Number(G.value)?T("button.insufficientBalance",{name:"xCETUS"}):Number(B.value)<15?"Minimum vesting duration is 15 days":l.value=="convert"&&s?"Convert":l.value!=="convert"&&s?"Redeem":"Convert"));console.log(z.value,"btnText.value===>");const xe=o=>{r.value="",m.value="",l.value=o},K=()=>{g.value=!0,setTimeout(()=>{g.value=!1},300)},Ae=o=>{B.value=o},A=f(!1),Y=Oe("Sui"),we=se(),p=i(()=>we),be=i(()=>t.value.ownerLocks);V(()=>p.value.address,o=>{console.log("触发",o),o?(e.getOwnerVeNFT(o),e.getAccountWhaleBalance(o),e.getOwnerLockCetuss(o),e.getMyShare(o),e.getAccountWhaleBalance(o)):e.loginOut()},{immediate:!0});const $=i(()=>b.value.chainName?We(b.value.chainName):{}),h=i(()=>b.value.chainName),{setIsShowSuccess:L,setIsShowRejected:x,setIsShowWaiting:k,setTransactionDesc:Q,setTransactionTxid:W}=d,oe=async()=>{A.value=!0,k(!0),W(""),Q(T("tips.converting",{from:`${P(r.value,9)} CETUS`,and:"to",to:`${P(r.value,9)} xCETUS`}));try{let o;const u=ye(r.value,9);console.log(s.value,"===>venft_id.value");const N=await Y.depositCetus(u,s.value);console.log(N,"payload==>");const M=await $.value.signAndExecuteTransactionBlock(p.value.currentWallet,N);if(o=$.value.handleTx(M),o&&o.hash){W(o.hash),k(!1),L(!0);const R={title:"Converted",desc:`Converted ${P(r.value,9)} xCETUS successfully`,hash:o.hash,tit:"Converted",icon:"icon-icon-Swap",tokenInfo:{tokena:"CETUS",numa:`- ${r.value}`,logoa:Z("/sui-image/WHALE-icon.png"),tokenb:"xCETUS",numb:`+ ${r.value}`,logob:Z("/sui-image/xWHALE-icon.png")}};h.value!=="Aptos"&&(R.res=o.res),$.value.showTransitionPending(R);const H=await $.value.watchTransaction(R);console.log("0221###swap###transitionStatus####",H),H&&setTimeout(()=>{e.getAccountWhaleBalance(p.value.address),e.getOwnerVeNFT(p.value.address),e.getOwnerLockCetuss(p.value.address),e.getMyShare(p.value.address)},3e3),A.value=!1}else k(!1),x(!0),A.value=!1;r.value=""}catch(o){k(!1),x(!0),A.value=!1,r.value="",console.log(o,"error===>")}},le=f(!0),Ne=f("0"),Qe=async()=>{const o=ye(r.value,9),u=await Y.redeemNum(o,Number(B.value));m.value=J(u.amountOut,9),console.log("===>amount2222"),Ne.value=u.percent},Je=async()=>{const o=ye(m.value,9),u=await Y.reverseRedeemNum(o,Number(B.value));console.log(u,"===>amount111"),r.value=J(u.amountOut,9),Ne.value=u.percent};V(()=>[r.value,B.value,le.value],([o,u,N])=>{console.log(o,"===>>>>>>>fromCoinAmount",typeof o),o&&u&&N&&Number(u)>=15&&Qe(),!o&&N&&(m.value="")},{immediate:!0}),V(()=>[m.value,B.value,le.value],([o,u,N])=>{o&&u&&!N&&Number(u)>=15&&(Je(),console.log(o,"===>toCoinAmount")),!o&&!N&&(r.value="")},{immediate:!0}),V(()=>[B.value,le.value],([o,u])=>{Number(o)>180?B.value="180":Number(o)<15?u?m.value="":r.value="":o||(u?r.value="":m.value="")},{immediate:!0});const Ze=()=>{le.value=!0,r.value=Te(new Xe(l.value!=="convert"?G.value:j.value).div(new Xe(2)).toString(),9)},et=()=>{le.value=!0,r.value=l.value!=="convert"?Te(G.value,9):Te(j.value,9)},He=async()=>{A.value=!0,k(!0),W(""),Q(T("tips.redeeming",{from:`${P(r.value,9)} xCETUS`,to:`${P(m.value,9)} CETUS`}));try{let o;const u=ye(r.value,9);console.log(u.toString(),"538====>");const N=await Y.getRedeemLockPayload(u,s.value,Number(B.value));console.log(N,"payload==>");const M=await $.value.signAndExecuteTransactionBlock(p.value.currentWallet,N);if(o=$.value.handleTx(M),o&&o.hash){W(o.hash),k(!1),L(!0);const R={title:"Redemption",desc:"Redemption transaction submitted successfully.",hash:o.hash,tit:"Vesting",icon:"icon-icon-Removed",tokenInfo:{tokena:"xCETUS",numa:`- ${r.value}`,logoa:Z("/sui-image/xWHALE-icon.png")}};h.value!=="Aptos"&&(R.res=o.res),$.value.showTransitionPending(R);const H=await $.value.watchTransaction(R);console.log("0221###swap###transitionStatus####",H),H&&setTimeout(()=>{e.getAccountWhaleBalance(p.value.address),e.getOwnerVeNFT(p.value.address),e.getOwnerLockCetuss(p.value.address),e.getMyShare(p.value.address)},3e3),A.value=!1}else k(!1),x(!0),A.value=!1;r.value="",m.value=""}catch(o){k(!1),x(!0),A.value=!1,r.value="",m.value="",console.log(o,"error===>")}};V(()=>[s.value,be.value,n.value,p.value.address],([o,u,N,M])=>{M&&(o&&e.getVeNFTDividendInfo(),o&&!ee(N)&&u&&u.length>0&&(console.log("执行了",u),e.getAvailableXCetus()))},{immediate:!0,deep:!0});const tt=async o=>{A.value=!0,k(!0),W(""),Q("");try{let u;console.log(o.id,"==>vItem.id");const N=await Y.getCancelRedeemPayload(o.id,s.value);console.log(N,"payload==>");const M=await $.value.signAndExecuteTransactionBlock(p.value.currentWallet,N);if(u=$.value.handleTx(M),u&&u.hash){W(u.hash),k(!1),L(!0);const R={title:"Cancelled Redemption",desc:"Cancelled redemption successfully.",hash:u.hash,tit:"Cancelled Redemption",icon:"icon-a-icon-Shutdown",tokenInfo:{tokena:"xCETUS",numa:`+ ${J(o.xcetus_amount,9)}`,logoa:Z("/sui-image/xWHALE-icon.png")}};h.value!=="Aptos"&&(R.res=u.res),$.value.showTransitionPending(R);const H=await $.value.watchTransaction(R);console.log("0221###swap###transitionStatus####",H),H&&setTimeout(()=>{e.getOwnerVeNFT(p.value.address),e.getOwnerLockCetuss(p.value.address),A.value=!1},3e3)}else k(!1),x(!0),A.value=!1;r.value="",m.value=""}catch(u){k(!1),x(!0),A.value=!1,r.value="",m.value="",e.setClaimLoading(""),console.log(u,"error===>")}},nt=f({}),at=()=>{console.log("倒计时结束"),e.getOwnerLockCetuss(p.value.address)},ot=async o=>{console.log(o,"vItem===>"),A.value=!0,k(!0),W(""),Q(`${T("tips.claimingPendingYield")} ${P(J(o.cetus_amount,9),9)} CETUS`);try{let u;const N=await Y.getRedeemPayload(o.id,s.value);console.log(N,"payload==>");const M=await $.value.signAndExecuteTransactionBlock(p.value.currentWallet,N);if(u=$.value.handleTx(M),u&&u.hash){W(u.hash),k(!1),L(!0);const R={title:"Claimed",desc:`Claimed ${P(J(o.cetus_amount,9),9)} CETUS successfully.`,hash:u.hash,tit:"CETUS Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:"CETUS",numa:`+ ${J(o.cetus_amount,9)}`,logoa:Z("/sui-image/WHALE-icon.png")}};h.value!=="Aptos"&&(R.res=u.res),$.value.showTransitionPending(R);const H=await $.value.watchTransaction(R);console.log("0221###swap###transitionStatus####",H),H&&setTimeout(()=>{e.getOwnerLockCetuss(p.value.address),e.getAccountWhaleBalance(p.value.address),e.getOwnerVeNFT(p.value.address),e.getMyShare(p.value.address),e.getAvailableXCetus(),A.value=!1},3e3)}else k(!1),x(!0),A.value=!1;r.value="",m.value=""}catch(u){k(!1),x(!0),A.value=!1,r.value="",m.value="",e.setClaimLoading(""),console.log(u,"error===>")}},Be=f(!1),lt=()=>{!localStorage.getItem(`notRemind${p.value.address}`)&&z.value=="Convert"?Be.value=!0:z.value=="Redeem"?He():oe()},st=()=>{Be.value=!1,oe()},ue=i(()=>t.value.pendingCoinInfo),ce=i(()=>t.value.pendingAmount),Ce=f(!1),it=async()=>{Ce.value=!0,k(!0),W(""),Q(`${T("tips.claimingPendingYield")} ${ce.value} ${ue.value.symbol}`),console.log(`${T("tips.claimingPendingYield")} ${ce.value} ${ue.value.symbol}`,"dsadas");try{let o;const u=await Y.getRedeemDividendV2Payload(s.value);console.log(u,"payload==>");const N=await $.value.signAndExecuteTransactionBlock(p.value.currentWallet,u);if(o=$.value.handleTx(N),o&&o.hash){W(o.hash),k(!1),L(!0);const M={title:"Claim",desc:`Claimed ${ce.value} ${ue.value.symbol} successfully.`,hash:o.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:ue.value.symbol,numa:`+ ${ce.value}`,logoa:ue.value.logo_url}};h.value!=="Aptos"&&(M.res=o.res),$.value.showTransitionPending(M);const R=await $.value.watchTransaction(M);console.log("0221###swap###transitionStatus####",R),R&&setTimeout(()=>{e.getVeNFTDividendInfo(),Ce.value=!1},3e3),e.getOwnerLockCetuss(p.value.address)}else k(!1),x(!0),Ce.value=!1,A.value=!1}catch(o){k(!1),x(!0),Ce.value=!1,console.log(o,"error===>")}},rt=()=>{Number(B.value)<15&&(B.value="15")},ut=()=>{B.value&&(B.value=B.value.replace(/[^\d]/g,""),B.value.charAt(0)==="0"&&(B.value=B.value.slice(1)))},ct=()=>{e.getDividendManager()},dt=i(()=>C.value.tokensObj||{}),mt=i(()=>C.value.RATES||{}),vt=i(()=>t.value.dividendManagerInfo||{});return V(()=>[dt.value,mt.value,vt.value],([o,u,N])=>{!ee(o)&&!ee(u)&&!ee(N)&&e.getXcetusApr()},{immediate:!0}),{clickModalConvert:st,openConfirmModal:Be,validateInput:ut,countDown:at,value:_,change:g,clickExchange:K,fromCoinAmount:r,toCoinAmount:m,showCoinSelect:v,headSwitchValue:l,headSwitchChange:xe,vestingDateList:E,vestingParameter:B,vestingTab:Ae,holderList:ie,lockupList:re,leaderboardList:Ie,whaleBalance:j,depositCetus:oe,btnText:z,loading:A,redeemRatio:Ne,halfBalanne:Ze,maxBalanne:et,xWhaleBalance:pe,availableXwhale:G,redeemingXwhale:fe,withdrawWhale:He,ownerLocks:be,cancelRedeemPayload:tt,holderInfo:nt,btnDisabled:ae,fixedFromCoin:le,walletStore:we,claimWhale:ot,wallet:p,depositOrWithdraw:lt,pendingAmount:ce,claimPendingYield:it,inputBlur:rt,getNextEpoch:ct}}});const he=e=>(te("data-v-9bf66bc4"),e=e(),ne(),e),aa={class:"dashboard-all"},oa={class:"dashboard-content"},la={class:"content-left"},sa={key:0,class:"vesting"},ia=he(()=>a("p",null,"Vesting",-1)),ra={class:"content-right"},ua={key:0,class:"card-container"},ca={class:"card-item"},da={class:"card-item"},ma={class:"exchange"},va=he(()=>a("use",{"xlink:href":"#icon-icon-swap2"},null,-1)),ga=[va],ha={key:1,class:"card-redeem"},_a={class:"card-item"},pa={class:"vesting-duration"},fa=he(()=>a("p",null,"Vesting duration",-1)),wa={class:"vesting-content"},ba={class:"vesting-left"},Ca={class:"value-days"},ya=he(()=>a("span",null,"days",-1)),Sa={class:"vesting-right"},Ta=["onClick"],ka={class:"card-item"},Ia={class:"redeem-ratio"},$a=he(()=>a("span",null,"Redeem ratio",-1));function xa(e,t,s,n,I,C){const d=gt,b=un,S=An,_=St,g=Yn,r=yt,m=me,v=ta;return c(),w("div",aa,[O(d,{title:"Dashboard","total-xwhale":e.xWhaleBalance,"available-xwhale":e.availableXwhale,"redeeming-xwhale":e.redeemingXwhale},null,8,["total-xwhale","available-xwhale","redeeming-xwhale"]),a("div",oa,[a("div",la,[O(b,{"holder-info":e.holderInfo,"pending-amount":e.pendingAmount,"claim-loading":e.claimLoading,onClaimPendingYield:e.claimPendingYield,onGetNextEpoch:e.getNextEpoch},null,8,["holder-info","pending-amount","claim-loading","onClaimPendingYield","onGetNextEpoch"]),e.ownerLocks&&e.ownerLocks.length>0?(c(),w("div",sa,[ia,(c(!0),w(Re,null,Ee(e.ownerLocks,l=>(c(),U(S,{key:l,"v-item":l,loading:e.loading,onCountDown:e.countDown,onClaimWhale:e.claimWhale,onCancelRedeemPayload:e.cancelRedeemPayload},null,8,["v-item","loading","onCountDown","onClaimWhale","onCancelRedeemPayload"]))),128))])):F("",!0)]),a("div",ra,[O(_,{"head-switch-value":e.headSwitchValue,"left-text":"Get xCETUS","right-text":"Redeem CETUS",onHeadSwitchChange:t[0]||(t[0]=l=>{e.headSwitchChange(l)})},null,8,["head-switch-value"]),e.headSwitchValue=="convert"?(c(),w("div",ua,[a("div",ca,[O(g,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[1]||(t[1]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"CETUS","whale-direction":"From",balance:e.whaleBalance,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:t[2]||(t[2]=l=>{e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),a("div",da,[O(g,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[3]||(t[3]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"To",balance:e.availableXwhale,onOnInput:t[4]||(t[4]=l=>{e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance"])]),a("img",{class:Se(e.change?"gang animationex":"gang"),src:It,alt:""},null,2),a("div",ma,[(c(),w("svg",{class:Se(e.change?"icon animationex":"icon"),"aria-hidden":"true"},ga,2))])])):(c(),w("div",ha,[a("div",_a,[O(g,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[5]||(t[5]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"From",balance:e.availableXwhale,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:t[6]||(t[6]=l=>{e.fixedFromCoin=!0,e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),a("div",pa,[fa,a("div",wa,[a("div",ba,[a("div",Ca,[Pe(a("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>e.vestingParameter=l),onInput:t[8]||(t[8]=(...l)=>e.validateInput&&e.validateInput(...l)),onBlur:t[9]||(t[9]=(...l)=>e.inputBlur&&e.inputBlur(...l))},null,544),[[Ct,e.vestingParameter]])]),ya]),a("div",Sa,[(c(!0),w(Re,null,Ee(e.vestingDateList,l=>(c(),w("div",{key:l.time,class:Se(["box-table",{"box-table-active":l.num===Number(e.vestingParameter)}]),onClick:T=>e.vestingTab(l.num)},y(l.time),11,Ta))),128))])]),O(r,{value:e.vestingParameter,"onUpdate:value":t[10]||(t[10]=l=>e.vestingParameter=l),max:180,min:15},null,8,["value"])]),a("div",ka,[O(g,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[11]||(t[11]=l=>e.toCoinAmount=l),"input-value":e.toCoinAmount,"coin-symbol":"CETUS","whale-direction":"To",balance:e.whaleBalance,onOnInput:t[12]||(t[12]=l=>{e.fixedFromCoin=!1,e.toCoinAmount=l})},null,8,["modelValue","input-value","balance"])]),a("div",Ia,[$a,a("p",null,y(e.redeemRatio)+"%",1)])])),e.wallet&&e.wallet.address?(c(),U(m,{key:2,class:"big-btn",loading:e.loading,disabled:e.btnDisabled,onClick:e.depositOrWithdraw},{default:X(()=>[a("span",null,y(e.btnText),1)]),_:1},8,["loading","disabled","onClick"])):(c(),U(m,{key:3,class:"big-btn",onClick:t[13]||(t[13]=l=>e.walletStore.setIsShowWalletModal(!0))},{default:X(()=>[a("span",null,y(e.$t("button.connectWallet")),1)]),_:1}))])]),e.openConfirmModal?(c(),U(v,{key:0,onClickConvert:e.clickModalConvert,onClose:t[14]||(t[14]=()=>e.openConfirmModal=!e.openConfirmModal)},null,8,["onClickConvert"])):F("",!0)])}const qa=q(na,[["render",xa],["__scopeId","data-v-9bf66bc4"]]);export{qa as default};
