import{s as Rs,a as j,u as hs,d as as,c as H}from"./pool.ce74b2c7.js";import{a as ss,l as h,r as I,e as os,o as t,f as n,h as o,i as p,v as _,u as $,S as Js,p as is,k as ds,j as N,F as M,E as cs,M as Os,b as vs,Q as gs,s as js,w as rs,t as Z,B as ks,y as Vs,c as ns,x as O,z as ps,A as x,H as Ts,q as X,K as Ks}from"./entry.a4dcc678.js";/* empty css              */import{a as es,u as ys}from"./sha256.5f654787.js";import{_ as Ns}from"./auto-pool-apy-tips.50690fc1.js";/* empty css              */import{u as Qs}from"./farms.3616683e.js";import{_ as Gs}from"./upgrade-loading.a3838f12.js";import{_ as Ds}from"./token-warning.30011086.js";import{_ as Xs}from"./coin-tips.4aa373f4.js";import{i as ls}from"./import-icon.de3e6c66.js";import{u as us}from"./autoPool.1a07f3c7.js";import{R as Us}from"./farms-range.af4baa8c.js";import{_ as qs}from"./img-connect-wallet_2x.438c46ca.js";import{_ as Ms}from"./token-warning_2x.efdea1f7.js";import{_ as Zs}from"./img-no-Positions_2x.18917fbc.js";import"./decimal.0bdeb344.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const xs=ss({props:{list:{type:Array,default:()=>[]},listLoading:{type:Boolean,default:!1},totalTVL:{type:String,default:""}},setup(s){const l=es(),b=h(()=>l),g=I(!1);return{wallet:b,sFixD:Rs,loading:g,addCommom:j}}});const $s=s=>(is("data-v-4d380896"),s=s(),ds(),s),so={class:"farms-banner-bg"},oo={class:"vaults-banner"},eo={class:"vaults-banner-center"},to=$s(()=>o("div",{class:"title"},"Vaults",-1)),no=$s(()=>o("div",{class:"desc"},"Harvesting, compounding & rebalancing is automated.Stake your tokens to earn.",-1)),lo={class:"claim-rewards"},ao={class:"claim-title"},io=$s(()=>o("span",null,"Total Value Locked",-1)),co={key:0,class:"loading-spin"},ro={key:1},uo={key:2};function _o(s,l,b,g,L,m){const u=Js;return t(),n("div",so,[o("div",oo,[o("div",eo,[to,no,o("div",lo,[o("div",ao,[io,s.listLoading?(t(),n("span",co,[p(u)])):s.wallet.address?(t(),n("span",ro,"$"+_(("addCommom"in s?s.addCommom:$(j))(("sFixD"in s?s.sFixD:$(Rs))(s.totalTVL||0,2))),1)):(t(),n("span",uo,"--"))])])])])])}const po=os(xs,[["render",_o],["__scopeId","data-v-4d380896"]]),ho=ss({setup(){const s=I(!1),l=es(),b=h(()=>l),g=Qs(),L=h(()=>g),m=h(()=>L.value.farmsPoolList);return{isShowMore:s,wallet:b,walletStore:l,farmsPoolList:m}}});const ts=s=>(is("data-v-68073b49"),s=s(),ds(),s),vo={class:"vaults-table"},go=ts(()=>o("th",null,"Vaults",-1)),ko=ts(()=>o("th",null,"TVL",-1)),yo=ts(()=>o("th",null,"Your Deposit",-1)),$o=ts(()=>o("th",null,"Actions",-1)),fo=ts(()=>o("tr",{style:{height:"4px",background:"unset"}},null,-1)),bo={class:"pool"},mo={class:"staked-tvl"},wo={class:"apr"},So={class:"my-staked"},Co={class:"actions"},Lo=ts(()=>o("tr",{style:{height:"8px",background:"unset !important"}},null,-1));function Ao(s,l,b,g,L,m){const u=Ns,v=Os;return t(),n("div",vo,[o("table",null,[o("thead",null,[o("tr",null,[go,ko,o("th",null,[o("span",null,[N("APY "),p(u)])]),yo,$o]),fo]),o("tbody",null,[(t(),n(M,null,cs(4,(A,w)=>(t(),n(M,{key:w},[o("tr",null,[o("td",null,[o("div",bo,[p(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),p(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",mo,[p(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",wo,[o("span",null,[p(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),o("td",null,[o("div",So,[p(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",Co,[p(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),Lo],64))),64))])])])}const Po=os(ho,[["render",Ao],["__scopeId","data-v-68073b49"]]),Bo=ss({components:{Range:Us},props:{pItem:{type:Object,default:()=>({})}},setup(s){const l=ys(),b=h(()=>l),g=hs(),L=h(()=>g),m=a=>{var c;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((c=L.value.tokensObj[a==null?void 0:a.address])==null?void 0:c.logo_url)||(b.value.theme==="default"?ls("/image/coins/unknown.png"):ls("/image/coins/sui-unknown.png"))},u=I(!0),v=us(),A=h(()=>v),w=h(()=>A.value.positionInfoObj[s.pItem.id]),P=vs(),S=(a,c)=>{P.push(`/vaults-detail/${a.id}?action=${c}`)},B=a=>{const c=a.needReverse,R=c?a.token_b.address:a.token_a.address,q=c?a.token_a.address:a.token_b.address;P.push(`/swap?from=${R}&to=${q}`)},V=es(),e=h(()=>V);return console.log(s.pItem,"pItem##"),{getCoinIcon:m,direct:u,decimalUi:as,addCommom:j,autoPool:A,positionInfo:w,toAutoPoolDetail:S,toSwap:B,wallet:e}}}),Ys=""+globalThis.__publicAssetsURL("sui-image/range-vaults.png");const J=s=>(is("data-v-4026a30a"),s=s(),ds(),s),Io={class:"vaults-position-card"},Ro={class:"auto-position-card-conetent"},Oo={key:0,class:"no-vaults-data no-data"},jo=J(()=>o("img",{src:qs},null,-1)),Vo={key:1,class:"auto-position-card"},To={class:"position-range"},No=J(()=>o("div",{class:"inrange"},[o("img",{src:Ys,alt:""}),o("span",null,"In range")],-1)),Do={class:"right"},Uo={class:"top"},qo=J(()=>o("p",null,"Position Range",-1)),Mo={key:0},Yo={key:1},Wo={class:"item lp-tokens"},Fo=J(()=>o("div",{class:"top"},"Your LP Tokens",-1)),Eo={class:"bottom"},zo={key:0,class:"lp-num"},Ho={key:1,class:"lp-num"},Jo={class:"item share"},Ko=J(()=>o("div",{class:"top"},"Share",-1)),Qo={class:"bottom"},Go={key:0},Xo={key:1},Zo={class:"item yourBanlance"},xo=J(()=>o("div",{class:"top"},"Your Balance",-1)),se={class:"bottom"},oe={class:"token-info"},ee={class:"token-num"},te={alt:""},ne={key:0},le={key:1},ae=J(()=>o("p",null,"--",-1)),ie=[ae],de={class:"token-num"},ce={alt:""},re={key:0},ue={key:1},_e=J(()=>o("p",null,"--",-1)),pe=[_e],he={class:"action"};function ve(s,l,b,g,L,m){var w,P,S,B,V,e,a,c;const u=ks,v=gs("Range"),A=js("image");return t(),n("div",Io,[o("div",Ro,[s.wallet.address?(t(),n("div",Vo,[o("div",To,[No,o("div",Do,[o("div",Uo,[qo,s.direct?(t(),n("span",Mo,_(("addCommom"in s?s.addCommom:$(j))(("decimalUi"in s?s.decimalUi:$(as))(s.pItem.price,6)))+" Current",1)):(t(),n("span",Yo,_(("addCommom"in s?s.addCommom:$(j))(("decimalUi"in s?s.decimalUi:$(as))(1/s.pItem.price,6)))+" Current",1))]),p(v,{"pool-info":s.positionInfo,"prop-direct":s.direct,"use-props-direct":!0,onClickChange:l[1]||(l[1]=R=>s.direct=!s.direct)},null,8,["pool-info","prop-direct"])])]),o("div",Wo,[Fo,o("div",Eo,[(w=s.wallet)!=null&&w.connected?(t(),n("div",zo,_(("addCommom"in s?s.addCommom:$(j))((P=s.positionInfo)==null?void 0:P.myLiquidity))+" LP",1)):(t(),n("div",Ho,"--"))])]),o("div",Jo,[Ko,o("div",Qo,[(S=s.wallet)!=null&&S.connected?(t(),n("span",Go,_((B=s.positionInfo)==null?void 0:B.myShare)+"%",1)):(t(),n("span",Xo,"--%"))])]),o("div",Zo,[xo,o("div",se,[o("div",oe,[o("div",ee,[Z(o("img",te,null,512),[[A,s.pItem.needReverse?s.pItem.coinB.logo_url:s.pItem.coinA.logo_url]]),(V=s.wallet)!=null&&V.connected?(t(),n("div",ne,[o("span",null,_(("addCommom"in s?s.addCommom:$(j))((e=s.positionInfo)==null?void 0:e.amountA)),1)])):(t(),n("div",le,ie))]),o("div",de,[Z(o("img",ce,null,512),[[A,s.pItem.needReverse?s.pItem.coinA.logo_url:s.pItem.coinB.logo_url]]),(a=s.wallet)!=null&&a.connected?(t(),n("div",re,[o("span",null,_(("addCommom"in s?s.addCommom:$(j))((c=s.positionInfo)==null?void 0:c.amountB)),1)])):(t(),n("div",ue,pe))])])])]),o("div",he,[o("div",null,[o("div",{class:"remove-btn",onClick:l[2]||(l[2]=R=>s.toAutoPoolDetail(s.pItem,"remove"))},"Withdraw")])])])):(t(),n("div",Oo,[jo,p(u,{class:"add-liquidity-btn",onClick:l[0]||(l[0]=R=>s.wallet.setIsShowWalletModal(!0))},{default:rs(()=>[N("Connect Wallet")]),_:1})]))])])}const ge=os(Bo,[["render",ve],["__scopeId","data-v-4026a30a"]]),ke=ss({components:{TokenWarning:Ds,Range:Us},props:{list:{type:Array,default:()=>[]}},setup(){const{t:s}=Vs(),l=ys(),b=h(()=>l),g=hs(),L=h(()=>g),m=i=>{var T;return(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((T=L.value.tokensObj[i==null?void 0:i.address])==null?void 0:T.logo_url)||(b.value.theme==="default"?ls("/image/coins/unknown.png"):ls("/image/coins/sui-unknown.png"))},u=h(()=>L.value.tokensObj),v=h(()=>b.value.statsData),A=h(()=>b.value.theme),w=us(),P=h(()=>w),S=I({}),B=i=>{S.value[i]?S.value[i]=!1:S.value[i]=!0,console.log(S.value,"##isShowPosition.value")},V=h(()=>P.value.positionInfoObj),e=es(),a=h(()=>e),c=I(!1),R=vs(),q=(i,T)=>{R.push(`/vaults-detail/${i.id}?action=${T}`)},D=i=>{const T=i.needReverse,Y=T?i.token_b.address:i.token_a.address,W=T?i.token_a.address:i.token_b.address;R.push(`/swap?from=${Y}&to=${W}`)},U=I(!0);return{router:R,getCoinIcon:m,tokensObj:u,t:s,statsData:v,checkNullObj:H,addCommom:j,importIcon:ls,theme:A,isShowPosition:S,togglePosition:B,positionInfo:V,wallet:a,isShowDetail:c,toAutoPoolDetail:q,toSwap:D,direct:U}}});const C=s=>(is("data-v-9076398a"),s=s(),ds(),s),ye={class:"vaults-table-contianer"},$e={class:"table pc-pool-item"},fe={class:"table-header"},be={class:"table-tr"},me=C(()=>o("th",null,"Vaults",-1)),we=C(()=>o("th",null,"TVL",-1)),Se=C(()=>o("th",null,"Your Deposit",-1)),Ce=C(()=>o("th",null,"Actions",-1)),Le=C(()=>o("tr",{style:{height:"4px",background:"unset"}},null,-1)),Ae={class:"table-body"},Pe=["onClick"],Be={class:"token"},Ie={class:"img-box"},Re=["src"],Oe={class:"img-box img-last-box"},je=["src"],Ve={class:"name"},Te={class:"top"},Ne={class:"token-name"},De={class:"tokena"},Ue={class:"tokenb"},qe={class:"fee-warning"},Me={class:"fee-tier-top"},Ye={key:0,class:"pool-warning"},We=C(()=>o("img",{src:Ms,alt:""},null,-1)),Fe={class:"hover-text"},Ee={key:0},ze={class:"skeleton-box"},He={key:1},Je={key:2},Ke={class:"skeleton-box"},Qe={key:3},Ge={key:4},Xe={class:"skeleton-box"},Ze={key:5},xe={class:"show-position"},st={class:"svg-icon"},ot=C(()=>o("use",{"xlink:href":"#icon-icon_on"},null,-1)),et=[ot],tt={key:0,class:"table-tr view-table-tr"},nt={colspan:"5"},lt=C(()=>o("td",null,null,-1)),at=C(()=>o("tr",{style:{height:"8px",background:"unset"}},null,-1)),it={class:"h5-pool-item"},dt={class:"token"},ct={class:"img-box"},rt={key:0,class:"pool-warning"},ut={class:"img-box img-last-box"},_t={key:0,class:"pool-warning"},pt={class:"name"},ht={class:"top"},vt={class:"token-name"},gt={class:"tokena"},kt={class:"tokenb"},yt={class:"fee-warning"},$t={class:"fee-tier-top"},ft={key:0,class:"pool-warning"},bt=C(()=>o("img",{src:Ms,alt:""},null,-1)),mt={class:"hover-text"},wt={class:"bottom"},St={class:"row"},Ct=C(()=>o("div",{class:"left"},"TVL",-1)),Lt={key:0,class:"right"},At={key:1,class:"right"},Pt={class:"row"},Bt=C(()=>o("div",{class:"left"},"APY",-1)),It={key:0,class:"right"},Rt={key:1,class:"right theme-right"},Ot={class:"row"},jt=C(()=>o("div",{class:"left"},"Your Deposit",-1)),Vt={key:0,class:"right"},Tt={key:1,class:"right"},Nt=["onClick"],Dt=C(()=>o("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ut=[Dt],qt={key:0,class:"h5-auto-pool-details"},Mt={class:"position-range"},Yt=C(()=>o("div",{class:"inrange"},[o("img",{src:Ys,alt:""}),o("span",null,"In range")],-1)),Wt={class:"right"},Ft={class:"top"},Et=C(()=>o("p",null,"Position Range",-1)),zt={key:0},Ht={key:1},Jt={class:"h5-item lp-tokens"},Kt=C(()=>o("div",{class:"top"},"Your LP Tokens",-1)),Qt={class:"bottom"},Gt={key:0,class:"lp-num"},Xt={key:1,class:"lp-num"},Zt={class:"h5-item share"},xt=C(()=>o("div",{class:"top"},"Share",-1)),sn={class:"bottom"},on={key:0},en={key:1},tn={class:"h5-item yourBanlance"},nn=C(()=>o("div",{class:"top"},"Your Balance",-1)),ln={class:"bottom"},an={class:"token-info"},dn={class:"token-num"},cn={alt:""},rn={key:0},un={key:1},_n=C(()=>o("p",null,"--",-1)),pn=[_n],hn={class:"token-num"},vn={alt:""},gn={key:0},kn={key:1},yn=C(()=>o("p",null,"--",-1)),$n=[yn],fn={class:"action"};function bn(s,l,b,g,L,m){const u=Ns,v=Ds,A=Xs,w=Os,P=ks,S=ge,B=gs("Range"),V=js("image");return t(),n("div",ye,[o("table",$e,[o("thead",fe,[o("tr",be,[me,we,o("th",null,[o("span",null,[N("APY "),p(u)])]),Se,Ce]),Le]),o("tbody",Ae,[(t(!0),n(M,null,cs(s.list,(e,a)=>{var c,R,q,D,U,i,T,Y,W,K,F,Q,E,d,f;return t(),n(M,{key:a},[o("tr",{class:"table-tr",onClick:k=>s.togglePosition(a)},[o("td",null,[o("div",Be,[o("div",Ie,[o("img",{src:s.getCoinIcon(e.needReverse?e.coinB:e.coinA)},null,8,Re),p(v,{address:e.needReverse?(R=e==null?void 0:e.coinB)==null?void 0:R.address:(c=e==null?void 0:e.coinA)==null?void 0:c.address,"style-params":{right:0,bottom:0,width:"12px",height:"12px"}},null,8,["address"])]),o("div",Oe,[o("img",{src:s.getCoinIcon(e.needReverse?e.coinA:e.coinB)},null,8,je),p(v,{address:e.needReverse?(D=e.coinA)==null?void 0:D.address:(q=e==null?void 0:e.coinB)==null?void 0:q.address,"style-params":{right:0,bottom:0,width:"12px",height:"12px"}},null,8,["address"])]),o("div",Ve,[o("div",Te,[o("p",Ne,[o("span",De,[N(_(e.needReverse?(i=e==null?void 0:e.coinB)==null?void 0:i.symbol:(U=e==null?void 0:e.coinA)==null?void 0:U.symbol)+" ",1),e!=null&&e.coinB&&(e!=null&&e.coinA)?(t(),ns(A,{key:0,"coin-info":e.needReverse?e==null?void 0:e.coinB:e==null?void 0:e.coinA},null,8,["coin-info"])):O("",!0)]),N(" - "),o("span",Ue,[N(_(e.needReverse?(T=e==null?void 0:e.coinA)==null?void 0:T.symbol:(Y=e==null?void 0:e.coinB)==null?void 0:Y.symbol)+" ",1),e!=null&&e.coinB&&(e!=null&&e.coinA)?(t(),ns(A,{key:0,"coin-info":e.needReverse?e==null?void 0:e.coinA:e==null?void 0:e.coinB},null,8,["coin-info"])):O("",!0)])]),o("div",qe,[o("div",Me,_((e==null?void 0:e.fee)*100)+"%",1),(K=s.tokensObj[(W=e.coinA)==null?void 0:W.address])!=null&&K.isSelfBuilt||(Q=s.tokensObj[(F=e.coinB)==null?void 0:F.address])!=null&&Q.isSelfBuilt?(t(),n("div",Ye,[We,o("div",Fe,_(s.t("newAdd.poolWarning")),1)])):O("",!0)])])])])]),("checkNullObj"in s?s.checkNullObj:$(H))(s.statsData)?(t(),n("td",Ee,[o("div",ze,[p(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",He," $"+_(Number(e.poolUSD)!==0&&Number(e.poolUSD)<.01?"<0.01":("addCommom"in s?s.addCommom:$(j))(e.poolUSD,2)),1)),("checkNullObj"in s?s.checkNullObj:$(H))(s.statsData)?(t(),n("td",Je,[o("div",Ke,[p(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",Qe,_(e.apy),1)),(E=s.wallet)!=null&&E.connected&&!s.positionInfo[e.id].myLiquidityUSD?(t(),n("td",Ge,[o("div",Xe,[p(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",Ze,[s.wallet.connected?(t(),n(M,{key:0},[N(_(((d=s.positionInfo[e.id])==null?void 0:d.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in s?s.addCommom:$(j))((f=s.positionInfo[e.id])==null?void 0:f.myLiquidityUSD)}`:"<$0.01"),1)],64)):(t(),n(M,{key:1},[N("--")],64))])),o("td",null,[o("div",xe,[p(P,{class:"add-liquidity-btn",onClick:ps(k=>s.router.push(`/vaults-detail/${e.id}?action=deposit`),["stop"])},{default:rs(()=>[N("Deposit")]),_:2},1032,["onClick"]),o("div",st,[(t(),n("svg",{"aria-hidden":"true",class:x(["icon",s.isShowPosition&&s.isShowPosition[a]?"icon-open":""])},et,2))])])])],8,Pe),s.isShowPosition&&s.isShowPosition[a]?(t(),n("tr",tt,[o("td",nt,[p(S,{"p-item":e},null,8,["p-item"])]),lt])):O("",!0),at],64)}),128))])]),o("div",it,[(t(!0),n(M,null,cs(s.list,(e,a)=>{var c,R,q,D,U,i,T,Y,W,K,F,Q,E,d;return t(),n("div",{key:e.address,class:"item"},[o("div",dt,[o("div",ct,[Z(o("img",null,null,512),[[V,s.getCoinIcon(e.needReverse?e.coinB:e.coinA)]]),(e.needReverse?(R=s.tokensObj[e.coinB.address])!=null&&R.isSelfBuilt:(c=s.tokensObj[e.coinA.address])!=null&&c.isSelfBuilt)?(t(),n("div",rt)):O("",!0)]),o("div",ut,[Z(o("img",null,null,512),[[V,s.getCoinIcon(e.needReverse?e.coinA:e.coinB)]]),(e.needReverse?(q=s.tokensObj[e.coinA.address])!=null&&q.isSelfBuilt:(D=s.tokensObj[e.coinB.address])!=null&&D.isSelfBuilt)?(t(),n("div",_t)):O("",!0)]),o("div",pt,[o("div",ht,[o("p",vt,[o("span",gt,[N(_(e.needReverse?e.coinB.symbol:e.coinA.symbol)+" ",1),e&&e.coinB&&e.coinA?(t(),ns(A,{key:0,"coin-info":e.needReverse?e==null?void 0:e.coinB:e==null?void 0:e.coinA},null,8,["coin-info"])):O("",!0)]),N(" - "),o("span",kt,[N(_(e.needReverse?e.coinA.symbol:e.coinB.symbol)+" ",1),e&&e.coinB&&e.coinA?(t(),ns(A,{key:0,"coin-info":e.needReverse?e==null?void 0:e.coinA:e==null?void 0:e.coinB},null,8,["coin-info"])):O("",!0)])]),o("div",yt,[o("div",$t,_((e==null?void 0:e.fee)*100)+"%",1),(U=s.tokensObj[e.coinA.address])!=null&&U.isSelfBuilt||(i=s.tokensObj[e.coinB.address])!=null&&i.isSelfBuilt?(t(),n("div",ft,[bt,o("div",mt,_(s.t("newAdd.poolWarning")),1)])):O("",!0)])])])]),o("div",wt,[o("div",St,[Ct,("checkNullObj"in s?s.checkNullObj:$(H))(s.statsData)?(t(),n("div",Lt,[p(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",At," $"+_(Number(e.poolUSD)!==0&&Number(e.poolUSD)<.01?"<0.01":("addCommom"in s?s.addCommom:$(j))(e.poolUSD,2)),1))]),o("div",Pt,[Bt,("checkNullObj"in s?s.checkNullObj:$(H))(s.statsData)?(t(),n("div",It,[p(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",Rt,[o("i",null,_(e.apy),1),p(u)]))]),o("div",Ot,[jt,("checkNullObj"in s?s.checkNullObj:$(H))(s.positionInfo)&&((T=s.wallet)!=null&&T.connected)?(t(),n("div",Vt,[p(w,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",Tt,[(Y=s.wallet)!=null&&Y.connected?(t(),n(M,{key:0},[N(_(((W=s.positionInfo[e.id])==null?void 0:W.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in s?s.addCommom:$(j))((K=s.positionInfo[e.id])==null?void 0:K.myLiquidityUSD)}`:"<$0.01"),1)],64)):(t(),n(M,{key:1},[N("--")],64))]))])]),p(P,{class:"h5-add-liquidity-btn",onClick:ps(f=>s.router.push(`/vaults-detail/${e.id}?action=deposit`),["stop"])},{default:rs(()=>[N("Deposit")]),_:2},1032,["onClick"]),o("div",{class:x(["details-btn",s.isShowPosition&&s.isShowPosition[a]?"details-btn-text-active":""]),onClick:f=>s.togglePosition(a)},[(t(),n("svg",{"aria-hidden":"true",class:x(["icon",s.isShowPosition&&s.isShowPosition[a]?"icon-active":""])},Ut,2))],10,Nt),s.isShowPosition&&s.isShowPosition[a]?(t(),n("div",qt,[o("div",Mt,[Yt,o("div",Wt,[o("div",Ft,[Et,s.direct?(t(),n("span",zt,_(("addCommom"in s?s.addCommom:$(j))(("decimalUi"in s?s.decimalUi:$(as))(e.price,6)))+" Current",1)):(t(),n("span",Ht,_(("addCommom"in s?s.addCommom:$(j))(("decimalUi"in s?s.decimalUi:$(as))(1/e.price,6)))+" Current",1))]),p(B,{"pool-info":e,"prop-direct":s.direct,"use-props-direct":!0,onClickChange:l[0]||(l[0]=f=>s.direct=!s.direct)},null,8,["pool-info","prop-direct"])])]),o("div",Jt,[Kt,o("div",Qt,[(F=s.wallet)!=null&&F.connected?(t(),n("div",Gt,_(("addCommom"in s?s.addCommom:$(j))(e==null?void 0:e.myLiquidity))+" LP",1)):(t(),n("div",Xt,"--"))])]),o("div",Zt,[xt,o("div",sn,[(Q=s.wallet)!=null&&Q.connected?(t(),n("span",on,_(e==null?void 0:e.myShare)+"%",1)):(t(),n("span",en,"--%"))])]),o("div",tn,[nn,o("div",ln,[o("div",an,[o("div",dn,[Z(o("img",cn,null,512),[[V,e.needReverse?e.coinB.logo_url:e.coinA.logo_url]]),(E=s.wallet)!=null&&E.connected?(t(),n("div",rn,[o("span",null,_(("addCommom"in s?s.addCommom:$(j))(e==null?void 0:e.amountA)),1)])):(t(),n("div",un,pn))]),o("div",hn,[Z(o("img",vn,null,512),[[V,e.needReverse?e.coinA.logo_url:e.coinB.logo_url]]),(d=s.wallet)!=null&&d.connected?(t(),n("div",gn,[o("span",null,_(("addCommom"in s?s.addCommom:$(j))(e==null?void 0:e.amountB)),1)])):(t(),n("div",kn,$n))])])])]),o("div",fn,[o("div",null,[o("div",{class:"remove-btn",onClick:l[1]||(l[1]=f=>s.toAutoPoolDetail(s.pItem,"remove"))},"Withdraw")])])])):O("",!0)])}),128))])])}const mn=os(ke,[["render",bn],["__scopeId","data-v-9076398a"]]),wn=ss({props:{selectValue:{type:String,default:""},showList:{type:Object,default:()=>({})}},setup(s,l){const b=["All Vaults","My Vaults"],g=I("All Vaults"),L=I(s.selectValue),m=I(!1),u=I(!1),v=es(),A=h(()=>v),w=us(),P=h(()=>w),S=h(()=>P.value.autoPoolList),B=()=>s.showList.length,V=()=>{l.emit("clickRefresh")},e=c=>{L.value=c,l.emit("changeSort",c)},a=c=>{g.value=c,console.log(c,"itemitem"),c=="My Vaults"?l.emit("changeTab",!0):l.emit("changeTab",!1)};return Ts(()=>{document.addEventListener("click",()=>{u.value=!1})}),{isOpenList:u,wallet:A,changeSort:e,tabList:b,currentTab:g,sortValue:L,clickRefresh:V,isRefresh:m,vaultsPoolList:S,getListNum:B,changeTab:a}}});const _s=s=>(is("data-v-c45bd271"),s=s(),ds(),s),Sn={class:"vaults-tab"},Cn={class:"tab-left"},Ln=["onClick"],An={key:0},Pn={class:"tab-right"},Bn={class:"sort-select"},In=_s(()=>o("div",null,"Sort by",-1)),Rn=_s(()=>o("svg",{class:"sort-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),On=_s(()=>o("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),jn=[On],Vn={key:0,class:"sort-list"},Tn={class:"refresh"},Nn=_s(()=>o("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),Dn=[Nn];function Un(s,l,b,g,L,m){return t(),n("div",Sn,[o("div",Cn,[(t(!0),n(M,null,cs(s.tabList,u=>(t(),n("div",{key:u,class:x(["tab-item",s.currentTab==u?"tab-item-active":""]),onClick:v=>s.changeTab(u)},[o("span",null,_(u),1),s.currentTab==u&&s.getListNum()?(t(),n("p",An,_(s.currentTab=="My Vaults"&&!s.wallet.address?0:s.getListNum()),1)):O("",!0)],10,Ln))),128))]),o("div",Pn,[o("div",Bn,[o("div",{class:"sort-select-box",onClick:l[0]||(l[0]=ps(u=>s.isOpenList=!s.isOpenList,["stop"]))},[In,o("div",null,[o("span",null,_(s.sortValue),1),Rn,(t(),n("svg",{class:x(["arrow-icon",s.isOpenList?"arrow-icon-active":""]),"aria-hidden":"true"},jn,2))])]),s.isOpenList?(t(),n("div",Vn,[o("div",{class:"sort-item",onClick:l[1]||(l[1]=u=>s.changeSort("APY"))},"APY"),o("div",{class:"sort-item",onClick:l[2]||(l[2]=u=>s.changeSort("TVL"))},"TVL")])):O("",!0)]),o("div",Tn,[(t(),n("svg",{"aria-hidden":"true",class:x(["refresh-icon",s.isRefresh?"refreshing":""]),onClick:l[3]||(l[3]=(...u)=>s.clickRefresh&&s.clickRefresh(...u))},Dn,2))])])])}const qn=os(wn,[["render",Un],["__scopeId","data-v-c45bd271"]]),Mn=ss({components:{VaultsTabs:qn},setup(){Vs();const s=ys(),l=h(()=>s),b=hs(),g=h(()=>b),L=us(),m=h(()=>L),u=es(),v=h(()=>u),A=h(()=>m.value.positionInfoObj),w=h(()=>l.value.chainName),P=I(!1),S=I(!1),B=I("TVL"),V=I(["APY"]),e=I(!1),a=d=>{console.log(d,"w121");const f=[];f.push(B.value),V.value.forEach((k,r)=>{k!=d&&f.push(k)}),V.value=f,B.value=d,q(m.value.positionInfoList)};Ts(()=>{document.addEventListener("click",()=>{F("")})});const c=I([]),R=I(!0),q=d=>{console.log(d,"##poolList");const f=[];d.filter(r=>!r.is_pause).forEach(r=>{var fs,bs,ms,ws,Ss,Cs,Ls,As,Ps,Bs,Is;const y=l.value.addressLpTokens[r.address],z=g.value.poolsObj[r.address];console.log(m.value.apyObj,"##autoPool.value.apyObj");const G=((fs=m.value.apyObj[r.id])==null?void 0:fs.apr)||"0%",Ws=((bs=m.value.apyObj[r.id])==null?void 0:bs.resultApr)||"0",Fs=((ms=m.value.apyObj[r.id])==null?void 0:ms.tvl)||0;console.log(r.autoPoolPositionInfo.id,"###watchPools 246"),console.log(y,"##statsObj");const Es=r.needReverse?((Ls=g.value.tokensObj[(Cs=r.coinB)==null?void 0:Cs.address])==null?void 0:Ls.labels)||[]:((Ss=g.value.tokensObj[(ws=r.coinA)==null?void 0:ws.address])==null?void 0:Ss.labels)||[],zs=r.needReverse?((Ps=g.value.tokensObj[(As=r.coinA)==null?void 0:As.address])==null?void 0:Ps.labels)||[]:((Is=g.value.tokensObj[(Bs=r.coinB)==null?void 0:Bs.address])==null?void 0:Is.labels)||[],Hs=[...new Set(Es.concat(zs))];f.push({...r,liqidity:Fs,vol:y?y.vol_in_usd_24h:"0",fee:r.fee?r.fee:z!=null&&z.fee?z.fee:"--",labels:Hs,isFarming:r==null?void 0:r.isFarming,fee_24_h:y&&y.fee_24_h,apy:G,resultApr:Ws})});let k=[];B.value=="APY"?k=f.sort((r,y)=>y.resultApr-r.resultApr):k=f.sort((r,y)=>y.liqidity-r.liqidity),c.value=k,R.value=!1,console.log(c.value.length,"##list.value.length"),b.setAutoPoolNum(c.value.length),console.log(c.value,"##list.value")};X(()=>[m.value.positionInfoList,m.value.apyObj,g.value.poolConfigObj],([d,f,k])=>{console.log("执行次数###",k),d&&d.length>0&&k&&!H(k)&&(console.log(d,"###autoPoolList"),q(d))},{immediate:!0,deep:!0}),X(()=>[v.value.address,m.value.autoPoolList,g.value.poolConfigObj],([d,f,k])=>{d&&f&&f.length>0&&k&&!H(k)&&L.getMyAutoPoolPosition()},{immediate:!0});const D=I(null),U=h(()=>D.value&&D.value.firstToken?D.value.firstToken:null),i=h(()=>D.value&&D.value.lastToken?D.value.lastToken:null),T=I(),Y=I(""),W=()=>{let d=[];d=c.value,console.log(d,"##pageList");const f=d.filter((y,z)=>U.value&&i.value?y.coinA.address==U.value.address&&y.coinB.address==i.value.address||y.coinA.address==i.value.address&&y.coinB.address==U.value.address:U.value?y.coinA.address.toLowerCase().includes(U.value.address.toLowerCase())||y.coinB.address.toLowerCase().includes(U.value.address.toLowerCase()):i.value?y.coinA.address.toLowerCase().includes(i.value.address.toLowerCase())||y.coinB.address.toLowerCase().includes(i.value.address.toLowerCase()):d);let k=[],r=[];console.log(f,"##filterArr"),f.forEach((y,z)=>{console.log(y,"irem##");const G=A.value&&A.value[y.id];console.log(G,"##positionInfo"),P.value&&Number(G==null?void 0:G.myLiquidity)>0&&v.value.connected?r.push(y):k.push({...y})}),Y.value=k.reduce((y,z)=>y+z.poolUSD,0),console.log(k,"121arrnewValnewValnewVal"),T.value=P.value&&v.value.connected?r:k,console.log(T.value,"##showList.value "),R.value||(P.value&&v.value.connected?b.setAutoPoolNum(r.length):b.setAutoPoolNum(k.length))};X(()=>[U.value,i.value,c.value,P.value,v.value.address],([d,f,k,r])=>{(d||f||k||r)&&(console.log("newValnewValnewVal",d,f,k,JSON.stringify(k)),W())},{immediate:!0}),Ks(()=>{b.setAutoPoolNum("--")});const K=h(()=>g.value.autoPoolNum),F=d=>{d=="label"?(s.setIsSelect("pools"),e.value=!e.value,S.value=!1,l.value.setIsShowMore(!1)):d=="select"?(s.setIsSelect("pools"),S.value=!S.value,e.value=!1,l.value.setIsShowMore(!1)):(S.value=!1,e.value=!1)};X(()=>l.value.isSelect,d=>{d!=="pools"&&F("")},{immediate:!0});const Q=vs(),E=()=>{R.value=!0,L.getAutoPoolList(),L.getAutoPoolAPY()};return X(()=>l.value.isRefresh,d=>{E()},{immediate:!0}),X(()=>w.value,d=>{d=="Aptos"&&Q.push("/pools")},{immediate:!0}),{totalTVL:Y,clickRefresh:E,isMyLiquidity:P,chainName:w,store:l,select:S,selectValue:B,selectList:V,label:e,changeSort:a,list:c,listLoading:R,showList:T,childTokenSelectRef:D,wallet:v,autoPoolNum:K}}});const Yn={class:"vaults-container-new"},Wn={class:"vaults-container-center"},Fn={class:"auto-pool"},En={key:0,class:"no-vaults-data no-data"},zn=o("img",{src:qs},null,-1),Hn={key:0,class:"upgrade-loading pc-loading"},Jn={key:1,class:"upgrade-loading h5-loading"},Kn={key:3,class:"no-vaults-data"},Qn=o("img",{src:Zs},null,-1),Gn=o("span",{class:"no-vaults"},"No vaults found",-1),Xn=[Qn,Gn];function Zn(s,l,b,g,L,m){const u=po,v=gs("VaultsTabs"),A=ks,w=Po,P=Gs,S=mn;return t(),n("div",Yn,[p(u,{list:s.showList,"total-t-v-l":s.totalTVL,"list-loading":s.listLoading},null,8,["list","total-t-v-l","list-loading"]),o("div",Wn,[p(v,{"select-value":s.selectValue,"show-list":s.showList,onChangeSort:l[0]||(l[0]=B=>s.changeSort(B)),onChangeTab:l[1]||(l[1]=B=>{s.isMyLiquidity=B}),onClickRefresh:s.clickRefresh},null,8,["select-value","show-list","onClickRefresh"]),o("div",Fn,[s.isMyLiquidity&&!s.wallet.address?(t(),n("div",En,[zn,p(A,{class:"add-liquidity-btn",onClick:l[2]||(l[2]=B=>s.wallet.setIsShowWalletModal(!0))},{default:rs(()=>[N("Connect Wallet")]),_:1})])):O("",!0),s.isMyLiquidity&&s.wallet.address&&s.listLoading||!s.isMyLiquidity&&s.listLoading?(t(),n(M,{key:1},[s.listLoading?(t(),n("div",Hn,[p(w)])):O("",!0),s.listLoading?(t(),n("div",Jn,[p(P,{type:"poolsCard",loading:!0})])):O("",!0)],64)):O("",!0),s.isMyLiquidity&&s.wallet.address&&!s.listLoading||!s.isMyLiquidity&&!s.listLoading?(t(),ns(S,{key:2,list:s.showList},null,8,["list"])):O("",!0),s.autoPoolNum!=="--"&&Number(s.autoPoolNum)<=0&&!s.listLoading?(t(),n("div",Kn,Xn)):O("",!0)])])])}const yl=os(Mn,[["render",Zn]]);export{yl as default};
