import{m as mo,e as po,s as R,a as E,u as _o,d as io,o as wo,c as Z}from"./pool.492f4a12.js";import{a as H,l as c,r as W,e as J,o as n,f as t,h as s,v as u,u as $,c as U,w as j,B as uo,j as D,p as x,k as oo,z as ro,i as I,s as fo,t as no,x as V,b as go,A as co,F as q,E as Y,P as Vo,q as vo,N as Lo,M as Io,S as Wo,J as Ho,H as Jo,Q as zo}from"./entry.58c4f6ff.js";import{a as eo,u as ho}from"./sha256.c8d2f150.js";import{u as to}from"./farms.1d375354.js";import{i as $o}from"./import-icon.de3e6c66.js";/* empty css              *//* empty css              *//* empty css              */import{_ as Co}from"./img-connect-wallet_2x.24a56be4.js";import{_ as Uo}from"./img-no-Positions_2x.95e9cc7f.js";import{_ as Qo}from"./upgrade-loading.3bd89a88.js";import"./decimal.0bdeb344.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const Go=H({setup(){const o=eo(),l=c(()=>o),_=to(),d=c(()=>_),f=c(()=>d.value.totalRwadrdUsd),a=c(()=>d.value.farmsPositionList),i=c(()=>d.value.farmsAllPositionLoading),r=ho(),v=mo("Sui"),p=po("Sui"),{setIsShowSuccess:g,setIsShowRejected:h,setIsShowWaiting:y,setTransactionDesc:e,setTransactionTxid:m}=r,P=W(!1);return{wallet:l,farms:d,totalRwadrdUsd:f,sFixD:R,claimAllPoolReward:async so=>{P.value=!0,console.log(a.value,"farmsRewardObj###");const X=[];a.value.forEach(B=>{console.log(so,B,"#position"),B.positionSource=="farming"&&X.push({pool_id:B.pool_id,position_nft_id:B.id})}),console.log(JSON.stringify(X),"##params"),m(""),e("Claim Rewards"),y(!0);try{const B=await v.batchHarvest(X),M=await l.value.currentWallet.signAndExecuteTransactionBlock(B);console.log("0221###sui swap res###",M);let C=p.handleTx(M);if(C&&C.hash){m(C.hash),y(!1),g(!0);let O={res:C.res,title:"Claim",hash:C.hash};p.showTransitionPending(O),await p.watchTransaction(O)&&setTimeout(()=>{_.getFarmsPoolList()},4e3)}else y(!1),h(!0);P.value=!1}catch(B){console.log("Claim all error",B),y(!1),h(!0),P.value=!1}},loading:P,addCommom:E,farmsAllPositionLoading:i}}});const So=o=>(x("data-v-d52e0b0d"),o=o(),oo(),o),Ko={class:"farms-banner-bg"},Xo={class:"farms-banner"},Yo={class:"farms-banner-center"},Zo=So(()=>s("div",{class:"title"},"Farms",-1)),xo=So(()=>s("div",{class:"desc"},"Stake Liquidity position to earn more rewards.",-1)),os={class:"claim-rewards"},ss={class:"claim-title"},ns=So(()=>s("span",null,"Claimed Rewards",-1)),es={key:0},ts={key:1},as={class:"claim-content"};function is(o,l,_,d,f,a){const i=uo;return n(),t("div",Ko,[s("div",Xo,[s("div",Yo,[Zo,xo,s("div",os,[s("div",ss,[ns,o.wallet.address?(n(),t("span",es,u(Number(o.totalRwadrdUsd)>0&&Number(o.totalRwadrdUsd)<.01?"<$0.01":("addCommom"in o?o.addCommom:$(E))(("sFixD"in o?o.sFixD:$(R))(o.totalRwadrdUsd||0,2))),1)):(n(),t("span",ts,"--"))]),s("div",as,[o.wallet.address?(n(),U(i,{key:0,class:"claim-btn",loading:o.loading,disabled:Number(o.totalRwadrdUsd)==0||o.farmsAllPositionLoading,onClick:o.claimAllPoolReward},{default:j(()=>[D("Claim All")]),_:1},8,["loading","disabled","onClick"])):(n(),U(i,{key:1,class:"claim-btn",onClick:l[0]||(l[0]=r=>o.wallet.setIsShowWalletModal(!0))},{default:j(()=>[D("Connect")]),_:1}))])])])])])}const jo=J(Go,[["render",is],["__scopeId","data-v-d52e0b0d"]]),ls=H({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=W(!0);return{sFixD:R,direct:o}}}),Ro=""+globalThis.__publicAssetsURL("sui-image/range.png");const bo=o=>(x("data-v-99c4cf44"),o=o(),oo(),o),rs={class:"range"},ds={key:0},cs=bo(()=>s("img",{src:Ro,alt:""},null,-1)),us={class:"per"},ms={key:1},ps=bo(()=>s("img",{src:Ro,alt:""},null,-1)),_s={class:"per"},fs=bo(()=>s("div",null,[s("svg",{class:"icon icon-up","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),hs=bo(()=>s("div",null,[s("svg",{class:"icon icon-down","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),vs=[fs,hs];function gs(o,l,_,d,f,a){var i,r,v,p;return n(),t("div",rs,[o.direct?(n(),t("p",ds,[s("span",null,u(("sFixD"in o?o.sFixD:$(R))(o.poolInfo.minPrice,6)),1),cs,s("span",null,u(("sFixD"in o?o.sFixD:$(R))(o.poolInfo.maxPrice,6)),1),s("span",us,u((i=o.poolInfo.coinB)==null?void 0:i.symbol)+" per "+u((r=o.poolInfo.coinA)==null?void 0:r.symbol),1)])):(n(),t("p",ms,[s("span",null,u(o.poolInfo.maxPrice!=="∞"?("sFixD"in o?o.sFixD:$(R))(1/o.poolInfo.maxPrice,6):"0"),1),ps,s("span",null,u(o.poolInfo.minPrice!=="0"?("sFixD"in o?o.sFixD:$(R))(1/o.poolInfo.minPrice,6):"∞"),1),s("span",_s,u((v=o.poolInfo.coinA)==null?void 0:v.symbol)+" per "+u((p=o.poolInfo.coinB)==null?void 0:p.symbol),1)])),s("div",{class:"icon-change",onClick:l[0]||(l[0]=ro(g=>o.direct=!o.direct,["stop"]))},vs)])}const Po=J(ls,[["render",gs],["__scopeId","data-v-99c4cf44"]]),$s=H({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=W(!0);return{sFixD:R,direct:o}}});const bs=o=>(x("data-v-14f67ada"),o=o(),oo(),o),ys={class:"valid-range"},ks=bs(()=>s("div",{class:"title"},"Valid Range",-1));function ws(o,l,_,d,f,a){const i=Po;return n(),t("div",ys,[ks,I(i,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const Is=J($s,[["render",ws],["__scopeId","data-v-14f67ada"]]),Ss=H({props:{poolInfo:{type:Object,default:()=>({})}},setup(){return{}}});const Ps={class:"pool"},Ts={class:"pool-info"},Ls={class:"token-logo"},Cs={alt:""},Us={alt:""},js={class:"token-symbol"},Rs={class:"symbol"},Os={class:"fee-rate"};function As(o,l,_,d,f,a){var v,p,g,h;const i=Is,r=fo("image");return n(),t("div",Ps,[s("div",Ts,[s("div",Ls,[no(s("img",Cs,null,512),[[r,(v=o.poolInfo.coinA)==null?void 0:v.logo_url]]),no(s("img",Us,null,512),[[r,(p=o.poolInfo.coinB)==null?void 0:p.logo_url]])]),s("div",js,[s("div",Rs,u((g=o.poolInfo.coinA)==null?void 0:g.symbol)+" - "+u((h=o.poolInfo.coinB)==null?void 0:h.symbol),1),s("div",Os,u(o.poolInfo.fee),1)])]),I(i,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const Oo=J(Ss,[["render",As],["__scopeId","data-v-c027f63c"]]),Fs=H({props:{currentTab:{type:String,default:""},rewardInfo:{type:Object,default:()=>({})}},setup(){const o=_o(),l=c(()=>o);return{sFixD:R,addCommom:E,getCoinIcon:d=>{var f;return((f=l.value.tokensObj[d])==null?void 0:f.logo_url)||$o("/image/coins/sui-unknown.png")}}}});const Ds={key:0,class:"rewards-day"},Bs={class:"rewards-day-box"},Ns={alt:""};function Es(o,l,_,d,f,a){const i=fo("image");return o.rewardInfo.allocate_point>0||o.currentTab=="Ended"?(n(),t("div",Ds,[s("div",null,[s("div",Bs,[no(s("img",Ns,null,512),[[i,o.getCoinIcon(o.rewardInfo.reward_coin)]]),s("span",null,u(("addCommom"in o?o.addCommom:$(E))(("sFixD"in o?o.sFixD:$(R))(o.rewardInfo.emission_per_day,4))),1)])])])):V("",!0)}const Ao=J(Fs,[["render",Es],["__scopeId","data-v-416b96fb"]]),Ms=H({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){console.log(o.positionInfo,"props.positionInfo");const l=_o(),_=c(()=>l);return{addCommom:E,decimalUi:io,fixD:wo,getCoinIcon:f=>{var a;return((a=_.value.tokensObj[f])==null?void 0:a.logo_url)||$o("/image/coins/sui-unknown.png")}}}});const qs={class:"hover-rewarder"},Vs={class:"rewarder-info"},Ws={class:"left-rewarder"},Hs={alt:""},Js={class:"right-rewarder"},zs={class:"amount"},Qs={key:0,class:"amount-usd"},Gs={key:1,class:"amount-usd"},Ks={class:"rewarder-info"},Xs={class:"left-rewarder"},Ys={alt:""},Zs={class:"right-rewarder"},xs={class:"amount"},on={key:0,class:"amount-usd"},sn={key:1,class:"amount-usd"};function nn(o,l,_,d,f,a){const i=fo("image");return n(),t("div",qs,[s("div",Vs,[s("div",Ws,[no(s("img",Hs,null,512),[[i,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinB.address:o.positionInfo.coinA.address)]]),s("span",null,u(o.positionInfo.needReverse?o.positionInfo.coinB.symbol:o.positionInfo.coinA.symbol),1)]),s("div",Js,[s("div",zs,u(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:$(E))(("decimalUi"in o?o.decimalUi:$(io))(o.positionInfo.amountB,o.positionInfo.coinB.decimals)):("addCommom"in o?o.addCommom:$(E))(("decimalUi"in o?o.decimalUi:$(io))(o.positionInfo.amountA,o.positionInfo.coinA.decimals))),1),o.positionInfo.needReverse?(n(),t("div",Gs,u(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("fixD"in o?o.fixD:$(wo))(o.positionInfo.amountBUsd,2):"<$0.01"),1)):(n(),t("div",Qs,u(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("fixD"in o?o.fixD:$(wo))(o.positionInfo.amountAUsd,2):"<$0.01"),1))])]),s("div",Ks,[s("div",Xs,[no(s("img",Ys,null,512),[[i,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinA.address:o.positionInfo.coinB.address)]]),s("span",null,u(o.positionInfo.needReverse?o.positionInfo.coinA.symbol:o.positionInfo.coinB.symbol),1)]),s("div",Zs,[s("div",xs,u(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:$(E))(("decimalUi"in o?o.decimalUi:$(io))(o.positionInfo.amountA,o.positionInfo.coinA.decimals)):("addCommom"in o?o.addCommom:$(E))(("decimalUi"in o?o.decimalUi:$(io))(o.positionInfo.amountB,o.positionInfo.coinB.decimals))),1),o.positionInfo.needReverse?(n(),t("div",sn,u(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("addCommom"in o?o.addCommom:$(E))(("decimalUi"in o?o.decimalUi:$(io))(o.positionInfo.amountAUsd,2)):"<$0.01"),1)):(n(),t("div",on,u(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("addCommom"in o?o.addCommom:$(E))(("decimalUi"in o?o.decimalUi:$(io))(o.positionInfo.amountBUsd,2)):"<$0.01"),1))])])])}const Fo=J(Ms,[["render",nn],["__scopeId","data-v-d01301e5"]]),en=H({components:{FarmsPositionAmountTips:Fo},props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const l=eo(),_=c(()=>l);console.log(o.positionInfo,"positionInfo#");const d=to(),f=c(()=>d),a=po("Sui"),i=mo("Sui"),r=W(!1),v=ho();c(()=>v);const p=go(),{setIsShowSuccess:g,setIsShowRejected:h,setIsShowWaiting:y,setTransactionDesc:e,setTransactionTxid:m}=v,P=async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,m(""),e(`Stake ${o.positionInfo.name}`),y(!0);const k={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},w=o.positionInfo.farmsPoolId;try{const T=await i.farmsDeposit(k,w),N=await _.value.currentWallet.signAndExecuteTransactionBlock(T);console.log("0221###sui swap res###",N);let A=a.handleTx(N);if(A&&A.hash){m(A.hash),y(!1),g(!0);let S={res:A.res,title:"Staked",hash:A.hash};a.showTransitionPending(S),await a.watchTransaction(S)&&setTimeout(()=>{d.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),r.value=!1},2e3)}else y(!1),h(!0)}catch(T){console.log("farmsDeposit error",T),y(!1),h(!0),r.value=!1}},z=async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,m(""),e(`Unstake ${o.positionInfo.name}`),y(!0);const k=o.positionInfo.farmsPoolId,w=o.positionInfo.id;try{const T=await i.farmsWithdraw(k,w),N=await _.value.currentWallet.signAndExecuteTransactionBlock(T);console.log("0221###sui swap res###",N);let A=a.handleTx(N);if(console.log(A,"unStaketx##"),A&&A.hash){m(A.hash),y(!1),g(!0);let S={res:A.res,title:"Unstaked",hash:A.hash};a.showTransitionPending(S),await a.watchTransaction(S)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),d.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),r.value=!1},2e3)}else y(!1),h(!0)}catch(T){console.log("farmsDeposit error",T),y(!1),h(!0),r.value=!1}},so=async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,m(""),e("Claim rewards"),y(!0);const k={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const w=await i.harvestFarms(k),T=await _.value.currentWallet.signAndExecuteTransactionBlock(w);console.log("0221###sui swap res###",T);let N=a.handleTx(T);if(N&&N.hash){m(N.hash),y(!1),g(!0);let A={title:"Claim",res:N.res,hash:N.hash};a.showTransitionPending(A),await a.watchTransaction(A)&&setTimeout(()=>{d.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else y(!1),h(!0);r.value=!1}catch(w){console.log("farmsDeposit error",w),y(!1),h(!0),r.value=!1}},X=c(()=>f.value.farmsRewardObj),B=_o(),M=c(()=>B);return{sFixD:R,stake:P,loading:r,unStake:z,router:p,claim:so,farmsRewardObj:X,getCoinIcon:k=>{var w;return((w=M.value.tokensObj[k])==null?void 0:w.logo_url)||$o("/image/coins/sui-unknown.png")},toPositionDetails:k=>{console.log("toPositionDetails:",k),k.positionSource=="clmm"?p.push(`/new-position-detail?collect=${k.collectionName}&&token=${k.tokenName}&&address=${k.pool}&pos=${k.pos_object_id}`):p.push(`/new-position-detail?position_nft_id=${k.id}&positionSource=farming`)}}}}),Do=""+globalThis.__publicAssetsURL("sui-image/position-active.png");const yo=o=>(x("data-v-9b889db0"),o=o(),oo(),o),tn={class:"farms-position-item"},an=yo(()=>s("thead",null,[s("tr",null,[s("th"),s("th",null,"Liquidity"),s("th",null,"Share"),s("th",null,"Earnings"),s("th")])],-1)),ln={class:"position-info"},rn={key:0,class:"status-bg"},dn=yo(()=>s("img",{src:Do,alt:""},null,-1)),cn=[dn],un={class:"status-text"},mn={class:"name-range"},pn=yo(()=>s("span",null,"Details",-1)),_n=yo(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),fn=[pn,_n],hn={class:"liquidity"},vn={class:"apr"},gn={class:"rewards-day-box"},$n={alt:""},bn={key:1,class:"rewards-day"},yn={class:"action-btn"};function kn(o,l,_,d,f,a){const i=Po,r=Fo,v=uo,p=Vo,g=fo("image");return n(),t("div",tn,[s("table",null,[an,s("tbody",null,[s("tr",null,[s("td",null,[s("div",ln,[s("div",{class:co(["position-status",o.positionInfo.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionInfo.positionStatus=="Active"?(n(),t("div",rn,cn)):V("",!0),s("div",un,u(o.positionInfo.positionStatus),1)],2),s("div",mn,[s("span",null,u(o.positionInfo.name),1),I(i,{"pool-info":o.positionInfo},null,8,["pool-info"])]),s("div",{class:"details",onClick:l[0]||(l[0]=h=>o.toPositionDetails(o.positionInfo))},fn)])]),s("td",null,[s("div",hn,[I(r,{"position-info":o.positionInfo},null,8,["position-info"]),s("span",null,u(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("sFixD"in o?o.sFixD:$(R))(o.positionInfo.positionUSD,2)}`),1)])]),s("td",null,[s("div",vn,u(o.positionInfo.positionShare>0&&o.positionInfo.positionShare<.01?"<0.01":("sFixD"in o?o.sFixD:$(R))(o.positionInfo.positionShare||0,2))+"%",1)]),s("td",null,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),t(q,{key:0},Y(o.positionInfo.rewards,h=>(n(),t("div",{key:h.rewarder_type,class:"rewards-day"},[s("div",null,[s("div",gn,[no(s("img",$n,null,512),[[g,o.getCoinIcon(h.rewarder_type)]]),s("span",null,u(h.rewarderAmount),1)])])]))),128)):(n(),t("div",bn,"--"))]),s("td",null,[s("div",yn,[o.positionInfo.positionSource=="clmm"?(n(),t(q,{key:0},[o.positionInfo&&o.positionInfo.positionStatus!=="Active"?(n(),U(p,{key:0},{title:j(()=>[D("Farming rewards are only available for active positions.")]),default:j(()=>[I(v,{class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:j(()=>[D("Stake")]),_:1},8,["loading","disabled","onClick"])]),_:1})):(n(),U(v,{key:1,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:j(()=>[D("Stake")]),_:1},8,["loading","disabled","onClick"]))],64)):(n(),U(v,{key:1,class:"unstake-btn",onClick:o.unStake},{default:j(()=>[D("Unstake")]),_:1},8,["onClick"])),o.positionInfo.positionSource=="clmm"?(n(),U(v,{key:2,class:"claim-btn",disabled:!0},{default:j(()=>[D("↑ Claim")]),_:1})):(n(),U(v,{key:3,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0||o.currentTab=="Ended",onClick:o.claim},{default:j(()=>[D("↑ Claim")]),_:1},8,["disabled","onClick"]))])])])])])])}const Bo=J(en,[["render",kn],["__scopeId","data-v-9b889db0"]]),wn=H({props:{noDataImg:{type:String,default:""},desc:{type:String,default:""},type:{type:String,default:""},addLiquidityUrl:{type:String,default:""}},setup(){return{walletStore:eo()}}});const In={class:"no-data"},Sn=["src"],Pn={key:0,class:"desc"};function Tn(o,l,_,d,f,a){const i=uo;return n(),t("div",In,[s("img",{src:o.noDataImg,alt:""},null,8,Sn),o.desc?(n(),t("div",Pn,u(o.desc),1)):V("",!0),o.type=="addLiquidity"?(n(),U(i,{key:1,class:"add-liquidity-btn",onClick:l[0]||(l[0]=r=>o.addLiquidityUrl?o.$router.push(o.addLiquidityUrl):"")},{default:j(()=>[D("Add Liquidity")]),_:1})):V("",!0),o.type=="connectWallet"?(n(),U(i,{key:2,class:"add-liquidity-btn",onClick:l[1]||(l[1]=r=>o.walletStore.setIsShowWalletModal(!0))},{default:j(()=>[D("Connect Wallet")]),_:1})):V("",!0)])}const No=J(wn,[["render",Tn],["__scopeId","data-v-130f9462"]]),Ln=H({components:{FarmsPositionItem:Bo},props:{currentTab:{type:String,default:""},sortValue:{type:String,default:"APR"}},setup(o){const l=W({}),_=eo(),d=c(()=>_),f=to(),a=c(()=>f),i=c(()=>(console.log(a.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?d.value.address?a.value.myFarmsPoolList:[]:o.currentTab=="Ended"?a.value.farmsPoolList.filter(S=>S.status=="Ended"):a.value.farmsPoolList.filter(S=>S.status=="Live"))),r=ho(),v=c(()=>r),p=c(()=>v.value.addressLpTokens),g=W([]),h=S=>{const Q=i.value.map(b=>{const{stable_farming:F}=p.value[b.clmm_pool_id];return{...b,apr:F.apr,tvl:F.tvl}});S=="APR"?g.value=Q.sort((b,F)=>F.apr-b.apr):g.value=Q.sort((b,F)=>F.tvl-b.tvl),console.log(g.value,"##farmsPoolList.value")};vo(()=>[i.value,o.sortValue,p.value],([S,Q,b])=>{console.log(Q,"sortValue326"),S&&S.length>0&&Q&&b&&!Z(b)&&h(Q)},{immediate:!0});const y=S=>{l.value[S.clmm_pool_id]?l.value[S.clmm_pool_id]=!1:(l.value[S.clmm_pool_id]=!0,console.log("执行了吗"),f.getPositionByPool(d.value.address,S.clmm_pool_id,S.id))},e=c(()=>a.value.farmsPositionObj),m=c(()=>(console.log(a.value.farmsLoadingObj,"##farms.value.farmsLoadingObj"),a.value.farmsLoadingObj)),P=c(()=>a.value.farmsUserUsd),z=c(()=>(console.log(a.value.farmsRewardObj,"##farmsRewardObj"),a.value.farmsRewardObj)),so=c(()=>a.value.farmsPositionList),X=c(()=>a.value.farmsAllPositionLoading),B=go(),M=mo("Sui"),C=po("Sui"),{setIsShowSuccess:O,setIsShowRejected:k,setIsShowWaiting:w,setTransactionDesc:T,setTransactionTxid:N}=r,A=async S=>{console.log(so.value,"farmsRewardObj###");const Q=[];so.value.forEach(b=>{console.log(S,b,"#position"),S==b.clmm_pool_id&&Q.push({pool_id:b.pool_id,position_nft_id:b.id})}),console.log(JSON.stringify(Q),"##params"),N(""),T("Claim rewards"),w(!0);try{const b=await M.batchHarvest(Q),F=await d.value.currentWallet.signAndExecuteTransactionBlock(b);console.log("0221###sui swap res###",F);let L=C.handleTx(F);if(L&&L.hash){N(L.hash),w(!1),O(!0);let G={res:L.res,title:"Claim",hash:L.hash};C.showTransitionPending(G),await C.watchTransaction(G)&&setTimeout(()=>{f.getFarmsPoolList()},4e3)}else w(!1),k(!0)}catch(b){console.log("Claim all error",b),w(!1),k(!0)}};return console.log(p.value,"addressLpTokens:"),{wallet:d,walletStore:_,farmsPoolList:g,openMore:y,openMoreObj:l,checkNullObj:Z,router:B,farmsPositionObj:e,farmsLoadingObj:m,farmsUserUsd:P,sFixD:R,farmsRewardObj:z,claimPoolReward:A,farmsAllPositionLoading:X,addCommom:E,addressLpTokens:p}}});const ao=o=>(x("data-v-68197824"),o=o(),oo(),o),Cn={class:"farms-table"},Un=ao(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")])],-1)),jn={key:0},Rn=["onClick"],On={class:"staked-tvl"},An={class:"apr"},Fn={key:0,class:"my-staked"},Dn={key:0,class:"my-staked-loading"},Bn={class:"position-usd"},Nn={key:0,class:"position-num"},En={key:1,class:"my-staked"},Mn=ao(()=>s("div",{class:"position-usd"},"--",-1)),qn=[Mn],Vn={class:"earned"},Wn={key:0,class:"my-staked-loading"},Hn=ao(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),Jn={key:0},zn={key:1},Qn={key:2},Gn={key:2},Kn={class:"actions"},Xn={class:"actions-btn"},Yn=["onClick"],Zn=ao(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),xn=[Zn],oe={colspan:"7",style:{padding:"0 16px 16px"}},se={key:0,class:"farm-position-list"},ne={key:0,class:"farm-position-loading"},ee={key:1,class:"farm-position-list"},te=ao(()=>s("tr",{style:{height:"8px"}},null,-1)),ae={key:1},ie={colspan:"7"},le={key:0,class:"no-data"},re=ao(()=>s("img",{src:Co,alt:""},null,-1)),de={key:1,class:"no-data"},ce=ao(()=>s("img",{src:Uo,alt:""},null,-1)),ue=ao(()=>s("span",null,"No farms found",-1)),me=[ce,ue];function pe(o,l,_,d,f,a){const i=Oo,r=Ao,v=Io,p=uo,g=Wo,h=Bo,y=No;return n(),t("div",Cn,[s("table",null,[Un,o.farmsPoolList&&o.farmsPoolList.length>0?(n(),t("tbody",jn,[(n(!0),t(q,null,Y(o.farmsPoolList,e=>(n(),t(q,{key:e.id},[s("tr",{onClick:m=>o.openMore(e)},[s("td",null,[I(i,{"pool-info":e},null,8,["pool-info"])]),s("td",null,[s("div",On,"$"+u(("addCommom"in o?o.addCommom:$(E))(o.addressLpTokens&&o.addressLpTokens[e.clmm_pool_id]&&o.addressLpTokens[e.clmm_pool_id].stable_farming&&o.addressLpTokens[e.clmm_pool_id].stable_farming.tvl,2)),1)]),s("td",null,[s("div",An,[s("span",null,u(("sFixD"in o?o.sFixD:$(R))(o.addressLpTokens&&o.addressLpTokens[e.clmm_pool_id]&&o.addressLpTokens[e.clmm_pool_id].stable_farming&&o.addressLpTokens[e.clmm_pool_id].stable_farming.apr*100,2))+"%",1)])]),s("td",null,[(n(!0),t(q,null,Y(e.rewarders,m=>(n(),U(r,{key:m.reward_coin,"reward-info":m,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))]),s("td",null,[o.wallet.address?(n(),t("div",Fn,[o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",Dn,[I(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),t(q,{key:1},[s("div",Bn," $"+u(("sFixD"in o?o.sFixD:$(R))(o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].positionNum?(n(),t("div",Nn,u(o.farmsUserUsd[e.clmm_pool_id].positionNum)+" "+u(o.farmsUserUsd[e.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):V("",!0)],64))])):(n(),t("div",En,qn))]),s("td",null,[s("div",Vn,[o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",Wn,[I(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[e.clmm_pool_id]&&o.farmsRewardObj[e.clmm_pool_id].amountUsd?(n(),t(q,{key:1},[Hn,o.farmsRewardObj[e.clmm_pool_id].amountUsd>.01?(n(),t("span",Jn,"$"+u(("addCommom"in o?o.addCommom:$(E))(("sFixD"in o?o.sFixD:$(R))(o.farmsRewardObj[e.clmm_pool_id].amountUsd||0,2))),1)):o.farmsRewardObj[e.clmm_pool_id].amountUsd>0&&o.farmsRewardObj[e.clmm_pool_id].amountUsd<.01?(n(),t("span",zn,"<$0.01")):(n(),t("span",Qn,"0"))],64)):(n(),t("span",Gn,"0"))])]),s("td",null,[s("div",Kn,[s("div",Xn,[I(p,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[e.clmm_pool_id]||o.farmsRewardObj[e.clmm_pool_id].amountUsd<=0,onClick:ro(m=>o.claimPoolReward(e.clmm_pool_id),["stop"])},{default:j(()=>[D("Claim")]),_:2},1032,["disabled","onClick"]),I(p,{class:"add-liquidity-btn",onClick:ro(m=>o.router.push(`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`),["stop"])},{default:j(()=>[D("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more",onClick:ro(m=>o.openMore(e),["stop"])},[(n(),t("svg",{class:co(["arrow-icon",o.openMoreObj[e.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},xn,2))],8,Yn)])])],8,Rn),no(s("tr",null,[s("td",oe,[o.wallet.address?(n(),t("div",se,[!("checkNullObj"in o?o.checkNullObj:$(Z))(o.farmsLoadingObj)&&(o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading)?(n(),t("div",ne,[I(g)])):o.farmsPositionObj[e.clmm_pool_id]&&o.farmsPositionObj[e.clmm_pool_id].length>0?(n(!0),t(q,{key:1},Y(o.farmsPositionObj[e.clmm_pool_id],m=>(n(),U(h,{key:m.clmm_pool_id,"current-tab":o.currentTab,"position-info":{...m,clmm_pool_id:e.clmm_pool_id}},null,8,["current-tab","position-info"]))),128)):(n(),U(y,{key:2,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`},null,8,["add-liquidity-url"]))])):(n(),t("div",ee,[I(y,{"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"})]))])],512),[[Lo,!("checkNullObj"in o?o.checkNullObj:$(Z))(o.openMoreObj)&&o.openMoreObj[e==null?void 0:e.clmm_pool_id]]]),te],64))),128))])):(n(),t("tbody",ae,[s("tr",null,[s("td",ie,[!o.wallet.connected&&o.currentTab=="My Farms"?(n(),t("div",le,[re,I(p,{class:"connect-wallet",onClick:l[0]||(l[0]=e=>o.wallet.setIsShowWalletModal(!0))},{default:j(()=>[D(u(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(n(),t("div",de,me)):V("",!0)])])]))])])}const Eo=J(Ln,[["render",pe],["__scopeId","data-v-68197824"]]),_e=H({props:{currentTab:{type:String,default:""}},setup(){const o=W(!1),l=eo(),_=c(()=>l),d=to(),f=c(()=>d),a=c(()=>f.value.farmsPoolList);return{isShowMore:o,wallet:_,walletStore:l,farmsPoolList:a}}});const fe=o=>(x("data-v-6ff18114"),o=o(),oo(),o),he={class:"farms-table"},ve=fe(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")])],-1)),ge={class:"pool"},$e={class:"staked-tvl"},be={class:"apr"},ye={class:"rewards-day"},ke={class:"my-staked"},we={class:"earned"},Ie={class:"actions"};function Se(o,l,_,d,f,a){const i=Io;return n(),t("div",he,[s("table",null,[ve,s("tbody",null,[(n(),t(q,null,Y(4,(r,v)=>s("tr",{key:v},[s("td",null,[s("div",ge,[I(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),I(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",$e,[I(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",be,[s("span",null,[I(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),s("td",null,[s("div",ye,[I(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",ke,[I(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",we,[I(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Ie,[I(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])])),64))])])])}const Pe=J(_e,[["render",Se],["__scopeId","data-v-6ff18114"]]),Te=H({props:{positionStatus:{type:String,default:"Active"},positionInfo:{type:Object,default:()=>({})}},setup(){return{}}});const Le=o=>(x("data-v-882c76c0"),o=o(),oo(),o),Ce={class:"position-info"},Ue={key:0,class:"status-bg"},je=Le(()=>s("img",{src:Do,alt:""},null,-1)),Re=[je],Oe={class:"status-text"},Ae={class:"name-range"};function Fe(o,l,_,d,f,a){const i=Po;return n(),t("div",Ce,[s("div",{class:co(["position-status",o.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionStatus=="Active"?(n(),t("div",Ue,Re)):V("",!0),s("div",Oe,u(o.positionStatus),1)],2),s("div",Ae,[s("span",null,u(o.positionInfo.name),1),o.positionStatus=="Active"?(n(),U(i,{key:0,"pool-info":o.positionInfo},null,8,["pool-info"])):V("",!0)])])}const De=J(Te,[["render",Fe],["__scopeId","data-v-882c76c0"]]),Be=H({props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const l=_o(),_=c(()=>l),d=go(),f=M=>{var C;return((C=_.value.tokensObj[M])==null?void 0:C.logo_url)||$o("/image/coins/sui-unknown.png")},a=po("Sui"),i=mo("Sui"),r=W(!1),v=ho(),p=eo(),g=to(),h=c(()=>p),{setIsShowSuccess:y,setIsShowRejected:e,setIsShowWaiting:m,setTransactionDesc:P,setTransactionTxid:z}=v;return{getCoinIcon:f,router:d,claim:async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,z(""),P("Claim rewards"),m(!0);const M={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const C=await i.harvestFarms(M),O=await h.value.currentWallet.signAndExecuteTransactionBlock(C);console.log("0221###sui swap res###",O);let k=a.handleTx(O);if(k&&k.hash){z(k.hash),m(!1),y(!0);let w={title:"Claim",res:k.res,hash:k.hash};a.showTransitionPending(w),await a.watchTransaction(w)&&setTimeout(()=>{g.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else m(!1),e(!0);r.value=!1}catch(C){console.log("farmsDeposit error",C),m(!1),e(!0),r.value=!1}},unStake:async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,z(""),P(`Unstake ${o.positionInfo.name}`),m(!0);const M=o.positionInfo.farmsPoolId,C=o.positionInfo.id;try{const O=await i.farmsWithdraw(M,C),k=await h.value.currentWallet.signAndExecuteTransactionBlock(O);console.log("0221###sui swap res###",k);let w=a.handleTx(k);if(w&&w.hash){z(w.hash),m(!1),y(!0);let T={res:w.res,title:"Unstaked",hash:w.hash};a.showTransitionPending(T),await a.watchTransaction(T)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),g.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),r.value=!1},2e3)}else m(!1),e(!0)}catch(O){console.log("farmsDeposit error",O),m(!1),e(!0),r.value=!1}},loading:r,stake:async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,z(""),P(`Stake ${o.positionInfo.name}`),m(!0);const M={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},C=o.positionInfo.farmsPoolId;try{const O=await i.farmsDeposit(M,C),k=await h.value.currentWallet.signAndExecuteTransactionBlock(O);console.log("0221###sui swap res###",k);let w=a.handleTx(k);if(w&&w.hash){z(w.hash),m(!1),y(!0);let T={res:w.res,title:"Staked",hash:w.hash};a.showTransitionPending(T),await a.watchTransaction(T)&&setTimeout(()=>{g.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),r.value=!1},2e3)}else m(!1),e(!0)}catch(O){console.log("farmsDeposit error",O),m(!1),e(!0),r.value=!1}}}}});const Ne=o=>(x("data-v-cdd84e0e"),o=o(),oo(),o),Ee={class:"farms-position"},Me={class:"farms-position-box"},qe=Ho('<div class="position-info-block" data-v-cdd84e0e><div class="block-item" data-v-cdd84e0e><div class="leabl" data-v-cdd84e0e>Liquidity</div><div class="text" data-v-cdd84e0e>~$33.57</div></div><div class="block-item" data-v-cdd84e0e><div class="leabl" data-v-cdd84e0e>Share</div><div class="text" data-v-cdd84e0e>0.00007%</div></div></div>',1),Ve={class:"earnings"},We={class:"block-item"},He=Ne(()=>s("div",{class:"leabl"},"Earnings",-1)),Je={class:"text"},ze={key:0},Qe={alt:""},Ge={key:1,class:"rewards-day"},Ke={class:"unstake-btn-box"};function Xe(o,l,_,d,f,a){const i=De,r=uo,v=fo("image");return n(),t("div",Ee,[s("div",Me,[I(i,{"position-info":o.positionInfo},null,8,["position-info"])]),qe,s("div",Ve,[s("div",We,[He,s("div",Je,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),t(q,{key:0},Y(o.positionInfo.rewards,p=>(n(),t("div",{key:p.rewarder_type,class:"rewards-day"},[p.rewarderAmount>0?(n(),t("div",ze,[no(s("img",Qe,null,512),[[v,o.getCoinIcon(p.rewarder_type)]]),s("span",null,u(p.rewarderAmount),1)])):V("",!0)]))),128)):(n(),t("div",Ge,"--"))])]),o.positionInfo.positionSource=="clmm"?(n(),U(r,{key:0,class:"add-liquidity-btn claim-btn",onClick:l[0]||(l[0]=p=>o.router.push(`/new-position-detail?collect=${o.positionInfo.collectionName}&&token=${o.positionInfo.tokenName}&&address=${o.positionInfo.pool}&pos=${o.positionInfo.pos_object_id}`))},{default:j(()=>[D("+ Add liquidity")]),_:1})):(n(),U(r,{key:1,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0||o.currentTab=="Ended",onClick:o.claim},{default:j(()=>[D("↑ Claim")]),_:1},8,["disabled","onClick"]))]),s("div",Ke,[s("div",null,[o.positionInfo.positionSource=="clmm"?(n(),U(r,{key:0,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:j(()=>[D("Stake")]),_:1},8,["loading","disabled","onClick"])):(n(),U(r,{key:1,class:"unstake-btn",onClick:o.unStake},{default:j(()=>[D("Unstake")]),_:1},8,["onClick"]))])])])}const Mo=J(Be,[["render",Xe],["__scopeId","data-v-cdd84e0e"]]),Ye=H({components:{FarmsH5Position:Mo},props:{currentTab:{type:String,default:""},sortValue:{type:String,default:"APR"}},setup(o){const l=W(!1),_=eo(),d=c(()=>_),f=to(),a=c(()=>f),i=c(()=>(console.log(a.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?d.value.address?a.value.myFarmsPoolList:[]:o.currentTab=="Ended"?a.value.farmsPoolList.filter(b=>b.status=="Ended"):a.value.farmsPoolList.filter(b=>b.status=="Live"))),r=W([]),v=ho(),p=c(()=>v),g=c(()=>p.value.addressLpTokens),h=b=>{const F=i.value.map(L=>{const{stable_farming:G}=g.value[L.clmm_pool_id];return{...L,apr:G.apr,tvl:G.tvl}});b=="APR"?r.value=F.sort((L,G)=>G.apr-L.apr):r.value=F.sort((L,G)=>G.tvl-L.tvl),console.log(r.value,"##farmsPoolList.value")};vo(()=>[i.value,o.sortValue,g.value],([b,F,L])=>{console.log(F,"sortValue326"),b&&b.length>0&&F&&L&&!Z(L)&&h(F)},{immediate:!0});const y=c(()=>a.value.farmsUserUsd),e=c(()=>(console.log(a.value.farmsRewardObj,"##farmsRewardObj"),a.value.farmsRewardObj)),m=c(()=>a.value.farmsPositionObj),P=c(()=>a.value.farmsPoolListLoading),z=c(()=>a.value.farmsPositionList),so=c(()=>(console.log(a.value.farmsLoadingObj,"##farms.value.farmsLoadingObj"),a.value.farmsLoadingObj)),X=c(()=>a.value.farmsAllPositionLoading),B=W({}),M=b=>{B.value[b.clmm_pool_id]?B.value[b.clmm_pool_id]=!1:(B.value[b.clmm_pool_id]=!0,console.log("执行了吗"),f.getPositionByPool(d.value.address,b.clmm_pool_id,b.id))},C=mo("Sui"),O=po("Sui"),{setIsShowSuccess:k,setIsShowRejected:w,setIsShowWaiting:T,setTransactionDesc:N,setTransactionTxid:A}=v,S=async b=>{console.log(z.value,"farmsRewardObj###");const F=[];z.value.forEach(L=>{console.log(b,L,"#position"),b==L.clmm_pool_id&&F.push({pool_id:L.pool_id,position_nft_id:L.id})}),console.log(JSON.stringify(F),"##params"),A(""),N("Claim rewards"),T(!0);try{const L=await C.batchHarvest(F),G=await d.value.currentWallet.signAndExecuteTransactionBlock(L);console.log("0221###sui swap res###",G);let lo=O.handleTx(G);if(lo&&lo.hash){A(lo.hash),T(!1),k(!0);let To={res:lo.res,title:"Claim",hash:lo.hash};O.showTransitionPending(To),await O.watchTransaction(To)&&setTimeout(()=>{f.getFarmsPoolList()},4e3)}else T(!1),w(!0)}catch(L){console.log("Claim all error",L),T(!1),w(!0)}},Q=go();return{isShowMore:l,wallet:d,farmsPoolList:r,farmsUserUsd:y,sFixD:R,farmsRewardObj:e,farmsPositionObj:m,openMore:M,checkNullObj:Z,openMoreObj:B,farmsPoolListLoading:P,claimPoolReward:S,router:Q,addCommom:E,farmsLoadingObj:so,farmsAllPositionLoading:X,addressLpTokens:g}}});const K=o=>(x("data-v-4c938dfd"),o=o(),oo(),o),Ze={key:0,class:"farms-pool-list"},xe={class:"farms-block"},ot={class:"item-block"},st=K(()=>s("div",{class:"leabl"},"Staked TVL",-1)),nt={class:"text"},et={class:"item-block apr"},tt=K(()=>s("div",{class:"leabl"},"APR",-1)),at={class:"text"},it={class:"item-block"},lt=K(()=>s("div",{class:"leabl"},"Rewards / day",-1)),rt={class:"text"},dt={class:"item-block my-staked"},ct=K(()=>s("div",{class:"leabl"},"My Staked",-1)),ut={key:0,class:"text"},mt={class:"position-usd"},pt={key:0,class:"position-num"},_t={key:1,class:"text"},ft=K(()=>s("div",{class:"position-usd"},"--",-1)),ht=[ft],vt={class:"item-block"},gt=K(()=>s("div",{class:"leabl"},"Earned",-1)),$t={class:"text earned-box"},bt={class:"earned"},yt={key:0,class:"my-staked-loading"},kt=K(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),wt={key:0},It={key:1},St={key:2},Pt={key:2},Tt={class:"add-liquidity-box"},Lt=["onClick"],Ct=K(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Ut=[Ct],jt={key:1,class:"upgrade-loading"},Rt={key:2,class:"no-data"},Ot=K(()=>s("img",{src:Co,alt:""},null,-1)),At={key:3,class:"no-data"},Ft=K(()=>s("img",{src:Uo,alt:""},null,-1)),Dt=K(()=>s("span",null,"No Data",-1)),Bt=[Ft,Dt];function Nt(o,l,_,d,f,a){const i=Oo,r=Ao,v=Io,p=uo,g=Mo,h=No,y=Qo;return n(),t(q,null,[o.farmsPoolListLoading?o.farmsPoolListLoading?(n(),t("div",jt,[I(y,{type:"poolsCard",loading:!0})])):V("",!0):(n(),t("div",Ze,[(n(!0),t(q,null,Y(o.farmsPoolList,e=>(n(),t("div",{key:e.id,class:"farms-item"},[I(i,{"pool-info":e},null,8,["pool-info"]),s("div",xe,[s("div",ot,[st,s("div",nt,"$"+u(("addCommom"in o?o.addCommom:$(E))(o.addressLpTokens&&o.addressLpTokens[e.clmm_pool_id]&&o.addressLpTokens[e.clmm_pool_id].stable_farming&&o.addressLpTokens[e.clmm_pool_id].stable_farming.tvl,2)),1)]),s("div",et,[tt,s("div",at,u(("sFixD"in o?o.sFixD:$(R))(o.addressLpTokens&&o.addressLpTokens[e.clmm_pool_id]&&o.addressLpTokens[e.clmm_pool_id].stable_farming&&o.addressLpTokens[e.clmm_pool_id].stable_farming.apr*100,2))+"%",1)]),s("div",it,[lt,s("div",rt,[(n(!0),t(q,null,Y(e.rewarders,m=>(n(),U(r,{key:m.reward_coin,"reward-info":m,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("div",dt,[ct,o.wallet.address?(n(),t("div",ut,[s("div",mt," $"+u(("sFixD"in o?o.sFixD:$(R))(o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].positionNum?(n(),t("div",pt,u(o.farmsUserUsd[e.clmm_pool_id].positionNum)+" "+u(o.farmsUserUsd[e.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):V("",!0)])):(n(),t("div",_t,ht))]),s("div",vt,[gt,s("div",$t,[s("div",bt,[o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",yt,[I(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[e.clmm_pool_id]&&o.farmsRewardObj[e.clmm_pool_id].amountUsd?(n(),t(q,{key:1},[kt,o.farmsRewardObj[e.clmm_pool_id].amountUsd>.01?(n(),t("span",wt,"$"+u(("addCommom"in o?o.addCommom:$(E))(("sFixD"in o?o.sFixD:$(R))(o.farmsRewardObj[e.clmm_pool_id].amountUsd||0,2))),1)):o.farmsRewardObj[e.clmm_pool_id].amountUsd>0&&o.farmsRewardObj[e.clmm_pool_id].amountUsd<.01?(n(),t("span",It,"<$0.01")):(n(),t("span",St,"0"))],64)):(n(),t("span",Pt,"--"))]),I(p,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[e.clmm_pool_id]||o.farmsRewardObj[e.clmm_pool_id].amountUsd<=0,onClick:ro(m=>o.claimPoolReward(e.clmm_pool_id),["stop"])},{default:j(()=>[D("Claim")]),_:2},1032,["disabled","onClick"])])])]),s("div",Tt,[I(p,{class:"add-liquidity-btn",onClick:ro(m=>o.router.push(`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`),["stop"])},{default:j(()=>[D("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more-btn",onClick:m=>o.openMore(e)},[(n(),t("svg",{class:co(["arrow-icon",!("checkNullObj"in o?o.checkNullObj:$(Z))(o.openMoreObj)&&o.openMoreObj[e==null?void 0:e.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},Ut,2))],8,Lt),(n(!0),t(q,null,Y(o.farmsPositionObj[e.clmm_pool_id],m=>no((n(),U(g,{key:m.clmm_pool_id,"current-tab":o.currentTab,"position-info":{...m,clmm_pool_id:e.clmm_pool_id}},null,8,["current-tab","position-info"])),[[Lo,!("checkNullObj"in o?o.checkNullObj:$(Z))(o.openMoreObj)&&o.openMoreObj[e==null?void 0:e.clmm_pool_id]]])),128)),o.farmsPositionObj&&o.farmsPositionObj[e.clmm_pool_id]&&o.farmsPositionObj[e.clmm_pool_id].length==0?(n(),U(h,{key:0,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`},null,8,["add-liquidity-url"])):V("",!0),o.wallet.address?V("",!0):(n(),U(h,{key:1,"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"},null,8,["no-data-img"]))]))),128))])),!o.wallet.connected&&o.currentTab=="My Farms"?(n(),t("div",Rt,[Ot,I(p,{class:"connect-wallet",onClick:l[0]||(l[0]=e=>o.wallet.setIsShowWalletModal(!0))},{default:j(()=>[D(u(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(n(),t("div",At,Bt)):V("",!0)],64)}const qo=J(Ye,[["render",Nt],["__scopeId","data-v-4c938dfd"]]),Et=H({setup(o,l){const _=["Live","Ended","My Farms"],d=W("Live"),f=W("APR"),a=W(!1),i=to(),r=c(()=>i),v=eo(),p=c(()=>v),g=c(()=>d.value=="My Farms"?p.value.address?r.value.myFarmsPoolList:[]:d.value=="Ended"?r.value.farmsPoolList.filter(P=>P.status=="Ended"):r.value.farmsPoolList.filter(P=>P.status=="Live"));return{tabList:_,currentTab:d,sortValue:f,clickRefresh:()=>{a.value=!0,i.getFarmsPoolList(),setTimeout(()=>{a.value=!1},1e3)},isRefresh:a,farmsPoolList:g,getListNum:P=>g.value.length,changeTab:P=>{d.value=P,l.emit("changeTab",P)},changeSortValue:P=>{f.value=P,l.emit("changeSortValue",P)}}}});const ko=o=>(x("data-v-346768f7"),o=o(),oo(),o),Mt={class:"farms-tab"},qt={class:"tab-left"},Vt=["onClick"],Wt={key:0},Ht={class:"tab-right"},Jt={class:"sort-select"},zt={class:"sort-select-box"},Qt=ko(()=>s("div",null,"Sort by",-1)),Gt=ko(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),Kt=ko(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),Xt={class:"sort-list"},Yt={class:"refresh"},Zt=ko(()=>s("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),xt=[Zt];function oa(o,l,_,d,f,a){return n(),t("div",Mt,[s("div",qt,[(n(!0),t(q,null,Y(o.tabList,i=>(n(),t("div",{key:i,class:co(["tab-item",o.currentTab==i?"tab-item-active":""]),onClick:r=>o.changeTab(i)},[s("span",null,u(i=="Ended"?"Finished":i),1),o.currentTab==i&&o.getListNum(i)?(n(),t("p",Wt,u(o.getListNum(i)),1)):V("",!0)],10,Vt))),128))]),s("div",Ht,[s("div",Jt,[s("div",zt,[Qt,s("div",null,[s("span",null,u(o.sortValue),1),Gt,Kt])]),s("div",Xt,[s("div",{class:"sort-item",onClick:l[0]||(l[0]=i=>o.changeSortValue("APR"))},"APR"),s("div",{class:"sort-item",onClick:l[1]||(l[1]=i=>o.changeSortValue("TVL"))},"TVL")])]),s("div",Yt,[(n(),t("svg",{"aria-hidden":"true",class:co(["refresh-icon",o.isRefresh?"refreshing":""]),onClick:l[2]||(l[2]=(...i)=>o.clickRefresh&&o.clickRefresh(...i))},xt,2))])])])}const sa=J(Et,[["render",oa],["__scopeId","data-v-346768f7"]]),na=H({components:{FarmsBanner:jo,FarmsTabs:sa,FarmsTable:Eo,FarmsH5List:qo},setup(){const o=to(),l=c(()=>o),_=c(()=>l.value.farmsPoolListLoading),d=W("APR"),f=c(()=>l.value.farmsPoolList),a=eo(),i=c(()=>a),r=_o(),v=c(()=>r);vo(()=>[i.value.address,f.value,v.value.tokensObj,v.value.RATES],([g,h,y,e])=>{g&&h.length>0&&!Z(y)&&!Z(e)&&o.getPositionByAllPool(g)},{immediate:!0}),Jo(()=>{o.getFarmsPoolList()}),vo(()=>i.value.address,g=>{g||o.logOut()},{immediate:!0});const p=W("Live");return{farmsPoolListLoading:_,currentTab:p,sortValue:d}}});const ea={class:"farm-container"},ta={class:"farm-container-center"};function aa(o,l,_,d,f,a){const i=jo,r=zo("FarmsTabs"),v=Eo,p=Pe,g=qo;return n(),t("div",ea,[I(i),s("div",ta,[I(r,{onChangeTab:l[0]||(l[0]=h=>{o.currentTab=h}),onChangeSortValue:l[1]||(l[1]=h=>{o.sortValue=h})}),o.farmsPoolListLoading?(n(),U(p,{key:1,"current-tab":o.currentTab},null,8,["current-tab"])):(n(),U(v,{key:0,"current-tab":o.currentTab,"sort-value":o.sortValue},null,8,["current-tab","sort-value"])),I(g,{"current-tab":o.currentTab,"sort-value":o.sortValue},null,8,["current-tab","sort-value"])])])}const ya=J(na,[["render",aa],["__scopeId","data-v-da31e0f3"]]);export{ya as default};
