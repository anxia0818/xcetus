import{m as io,e as lo,s as A,a as V,u as ro,d as no,o as vo,c as Z}from"./pool.e7d0a5a3.js";import{a as E,l as f,r as H,e as M,o as n,f as t,h as s,v as m,u as y,c as P,w as L,B as ao,j as U,p as G,k as K,z as to,i as w,s as co,t as X,x as B,b as po,A as eo,F as N,E as Q,P as Bo,N as yo,M as bo,S as No,J as Io,q as Eo,H as Mo,Q as qo}from"./entry.f8228b21.js";import{a as x,u as uo}from"./sha256.35235ac7.js";import{u as oo}from"./farms.1fae135e.js";import{i as mo}from"./import-icon.de3e6c66.js";/* empty css              *//* empty css              *//* empty css              */import{_ as ko}from"./img-connect-wallet_2x.5274f491.js";import{_ as wo}from"./img-no-Positions_2x.919a5df8.js";import{_ as Wo}from"./upgrade-loading.73fa98ae.js";import"./decimal.0bdeb344.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const Vo=E({setup(){const o=x(),i=f(()=>o),h=oo(),u=f(()=>h),g=f(()=>u.value.totalRwadrdUsd),e=f(()=>u.value.farmsPositionList),a=uo(),d=io("Sui"),_=lo("Sui"),{setIsShowSuccess:$,setIsShowRejected:b,setIsShowWaiting:v,setTransactionDesc:l,setTransactionTxid:r}=a,p=H(!1);return{wallet:i,farms:u,totalRwadrdUsd:g,sFixD:A,claimAllPoolReward:async O=>{p.value=!0,console.log(e.value,"farmsRewardObj###");const J=[];e.value.forEach(D=>{console.log(O,D,"#position"),D.positionSource=="farming"&&J.push({pool_id:D.pool_id,position_nft_id:D.id})}),console.log(JSON.stringify(J),"##params"),r(""),l("Claim All"),v(!0);try{const D=await d.batchHarvest(J),W=await i.value.currentWallet.signAndExecuteTransactionBlock(D);console.log("0221###sui swap res###",W);let T=_.handleTx(W);if(T&&T.hash){r(T.hash),v(!1),$(!0);let j={res:T.res,title:"Stake",hash:T.hash};_.showTransitionPending(j),await _.watchTransaction(j)&&setTimeout(()=>{h.getFarmsPoolList()},4e3)}else v(!1),b(!0);p.value=!1}catch(D){console.log("Claim all error",D),v(!1),b(!0),p.value=!1}},loading:p,addCommom:V}}});const go=o=>(G("data-v-d81c5c86"),o=o(),K(),o),Ho={class:"farms-banner"},Jo={class:"farms-banner-center"},zo=go(()=>s("div",{class:"title"},"Farms",-1)),Qo=go(()=>s("div",{class:"desc"},"Stake Liquidity position to earn more rewards.",-1)),Go={class:"claim-rewards"},Ko={class:"claim-title"},Xo=go(()=>s("span",null,"Claimed Rewards",-1)),Yo={key:0},Zo={key:1},xo={class:"claim-content"};function os(o,i,h,u,g,e){const a=ao;return n(),t("div",Ho,[s("div",Jo,[zo,Qo,s("div",Go,[s("div",Ko,[Xo,o.wallet.address?(n(),t("span",Yo,"$"+m(("addCommom"in o?o.addCommom:y(V))(("sFixD"in o?o.sFixD:y(A))(o.totalRwadrdUsd||0,2))),1)):(n(),t("span",Zo,"--"))]),s("div",xo,[o.wallet.address?(n(),P(a,{key:0,class:"claim-btn",loading:o.loading,disabled:Number(o.totalRwadrdUsd)==0,onClick:o.claimAllPoolReward},{default:L(()=>[U("Claim All")]),_:1},8,["loading","disabled","onClick"])):(n(),P(a,{key:1,class:"claim-btn",onClick:i[0]||(i[0]=d=>o.wallet.setIsShowWalletModal(!0))},{default:L(()=>[U("Connect")]),_:1}))])])])])}const So=M(Vo,[["render",os],["__scopeId","data-v-d81c5c86"]]),ss=E({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=H(!0);return{sFixD:A,direct:o}}}),Po=""+globalThis.__publicAssetsURL("sui-image/range.png");const _o=o=>(G("data-v-99c4cf44"),o=o(),K(),o),ns={class:"range"},ts={key:0},es=_o(()=>s("img",{src:Po,alt:""},null,-1)),as={class:"per"},is={key:1},ls=_o(()=>s("img",{src:Po,alt:""},null,-1)),rs={class:"per"},ds=_o(()=>s("div",null,[s("svg",{class:"icon icon-up","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),cs=_o(()=>s("div",null,[s("svg",{class:"icon icon-down","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),us=[ds,cs];function ps(o,i,h,u,g,e){var a,d,_,$;return n(),t("div",ns,[o.direct?(n(),t("p",ts,[s("span",null,m(("sFixD"in o?o.sFixD:y(A))(o.poolInfo.minPrice,6)),1),es,s("span",null,m(("sFixD"in o?o.sFixD:y(A))(o.poolInfo.maxPrice,6)),1),s("span",as,m((a=o.poolInfo.coinB)==null?void 0:a.symbol)+" per "+m((d=o.poolInfo.coinA)==null?void 0:d.symbol),1)])):(n(),t("p",is,[s("span",null,m(o.poolInfo.maxPrice!=="∞"?("sFixD"in o?o.sFixD:y(A))(1/o.poolInfo.maxPrice,6):"0"),1),ls,s("span",null,m(o.poolInfo.minPrice!=="0"?("sFixD"in o?o.sFixD:y(A))(1/o.poolInfo.minPrice,6):"∞"),1),s("span",rs,m((_=o.poolInfo.coinA)==null?void 0:_.symbol)+" per "+m(($=o.poolInfo.coinB)==null?void 0:$.symbol),1)])),s("div",{class:"icon-change",onClick:i[0]||(i[0]=to(b=>o.direct=!o.direct,["stop"]))},us)])}const $o=M(ss,[["render",ps],["__scopeId","data-v-99c4cf44"]]),ms=E({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=H(!0);return{sFixD:A,direct:o}}});const _s=o=>(G("data-v-14f67ada"),o=o(),K(),o),fs={class:"valid-range"},hs=_s(()=>s("div",{class:"title"},"Valid Range",-1));function vs(o,i,h,u,g,e){const a=$o;return n(),t("div",fs,[hs,w(a,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const gs=M(ms,[["render",vs],["__scopeId","data-v-14f67ada"]]),$s=E({props:{poolInfo:{type:Object,default:()=>({})}},setup(){return{}}});const ys={class:"pool"},bs={class:"pool-info"},Is={class:"token-logo"},ks={alt:""},ws={alt:""},Ss={class:"token-symbol"},Ps={class:"symbol"},Ts={class:"fee-rate"};function Cs(o,i,h,u,g,e){var _,$,b,v;const a=gs,d=co("image");return n(),t("div",ys,[s("div",bs,[s("div",Is,[X(s("img",ks,null,512),[[d,(_=o.poolInfo.coinA)==null?void 0:_.logo_url]]),X(s("img",ws,null,512),[[d,($=o.poolInfo.coinB)==null?void 0:$.logo_url]])]),s("div",Ss,[s("div",Ps,m((b=o.poolInfo.coinA)==null?void 0:b.symbol)+" - "+m((v=o.poolInfo.coinB)==null?void 0:v.symbol),1),s("div",Ts,m(o.poolInfo.fee),1)])]),w(a,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const To=M($s,[["render",Cs],["__scopeId","data-v-c027f63c"]]),Ls=E({props:{currentTab:{type:String,default:""},rewardInfo:{type:Object,default:()=>({})}},setup(){const o=ro(),i=f(()=>o);return{sFixD:A,addCommom:V,getCoinIcon:u=>{var g;return((g=i.value.tokensObj[u])==null?void 0:g.logo_url)||mo("/image/coins/sui-unknown.png")}}}});const Us={key:0,class:"rewards-day"},js={class:"rewards-day-box"},As={alt:""};function Fs(o,i,h,u,g,e){const a=co("image");return o.rewardInfo.allocate_point>0||o.currentTab=="Ended"?(n(),t("div",Us,[s("div",null,[s("div",js,[X(s("img",As,null,512),[[a,o.getCoinIcon(o.rewardInfo.reward_coin)]]),s("span",null,m(("addCommom"in o?o.addCommom:y(V))(("sFixD"in o?o.sFixD:y(A))(o.rewardInfo.emission_per_day,4))),1)])])])):B("",!0)}const Co=M(Ls,[["render",Fs],["__scopeId","data-v-416b96fb"]]),Rs=E({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){console.log(o.positionInfo,"props.positionInfo");const i=ro(),h=f(()=>i);return{addCommom:V,decimalUi:no,fixD:vo,getCoinIcon:g=>{var e;return((e=h.value.tokensObj[g])==null?void 0:e.logo_url)||mo("/image/coins/sui-unknown.png")}}}});const Os={class:"hover-rewarder"},Ds={class:"rewarder-info"},Bs={class:"left-rewarder"},Ns={alt:""},Es={class:"right-rewarder"},Ms={class:"amount"},qs={key:0,class:"amount-usd"},Ws={key:1,class:"amount-usd"},Vs={class:"rewarder-info"},Hs={class:"left-rewarder"},Js={alt:""},zs={class:"right-rewarder"},Qs={class:"amount"},Gs={key:0,class:"amount-usd"},Ks={key:1,class:"amount-usd"};function Xs(o,i,h,u,g,e){const a=co("image");return n(),t("div",Os,[s("div",Ds,[s("div",Bs,[X(s("img",Ns,null,512),[[a,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinB.address:o.positionInfo.coinA.address)]]),s("span",null,m(o.positionInfo.needReverse?o.positionInfo.coinB.symbol:o.positionInfo.coinA.symbol),1)]),s("div",Es,[s("div",Ms,m(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:y(V))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountB,o.positionInfo.coinB.decimals)):("addCommom"in o?o.addCommom:y(V))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountA,o.positionInfo.coinA.decimals))),1),o.positionInfo.needReverse?(n(),t("div",Ws,m(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("fixD"in o?o.fixD:y(vo))(o.positionInfo.amountBUsd,2):"<$0.01"),1)):(n(),t("div",qs,m(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("fixD"in o?o.fixD:y(vo))(o.positionInfo.amountAUsd,2):"<$0.01"),1))])]),s("div",Vs,[s("div",Hs,[X(s("img",Js,null,512),[[a,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinA.address:o.positionInfo.coinB.address)]]),s("span",null,m(o.positionInfo.needReverse?o.positionInfo.coinA.symbol:o.positionInfo.coinB.symbol),1)]),s("div",zs,[s("div",Qs,m(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:y(V))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountA,o.positionInfo.coinA.decimals)):("addCommom"in o?o.addCommom:y(V))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountB,o.positionInfo.coinB.decimals))),1),o.positionInfo.needReverse?(n(),t("div",Ks,m(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("addCommom"in o?o.addCommom:y(V))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountAUsd,2)):"<$0.01"),1)):(n(),t("div",Gs,m(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("addCommom"in o?o.addCommom:y(V))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountBUsd,2)):"<$0.01"),1))])])])}const Lo=M(Rs,[["render",Xs],["__scopeId","data-v-d01301e5"]]),Ys=E({components:{FarmsPositionAmountTips:Lo},props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const i=x(),h=f(()=>i);console.log(o.positionInfo,"positionInfo#");const u=oo(),g=f(()=>u),e=lo("Sui"),a=io("Sui"),d=H(!1),_=uo();f(()=>_);const $=po(),{setIsShowSuccess:b,setIsShowRejected:v,setIsShowWaiting:l,setTransactionDesc:r,setTransactionTxid:p}=_,z=async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,p(""),r(`Stake ${o.positionInfo.name}`),l(!0);const k={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},c=o.positionInfo.farmsPoolId;try{const S=await a.farmsDeposit(k,c),I=await h.value.currentWallet.signAndExecuteTransactionBlock(S);console.log("0221###sui swap res###",I);let C=e.handleTx(I);if(C&&C.hash){p(C.hash),l(!1),b(!0);let F={res:C.res,title:"Staked",hash:C.hash};e.showTransitionPending(F),await e.watchTransaction(F)&&setTimeout(()=>{u.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else l(!1),v(!0)}catch(S){console.log("farmsDeposit error",S),l(!1),v(!0),d.value=!1}},O=async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,p(""),r(`Unstake ${o.positionInfo.name}`),l(!0);const k=o.positionInfo.farmsPoolId,c=o.positionInfo.id;try{const S=await a.farmsWithdraw(k,c),I=await h.value.currentWallet.signAndExecuteTransactionBlock(S);console.log("0221###sui swap res###",I);let C=e.handleTx(I);if(console.log(C,"unStaketx##"),C&&C.hash){p(C.hash),l(!1),b(!0);let F={res:C.res,title:"Unstaked",hash:C.hash};e.showTransitionPending(F),await e.watchTransaction(F)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),u.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else l(!1),v(!0)}catch(S){console.log("farmsDeposit error",S),l(!1),v(!0),d.value=!1}},J=async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,p(""),r("Claim rewards"),l(!0);const k={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const c=await a.harvestFarms(k),S=await h.value.currentWallet.signAndExecuteTransactionBlock(c);console.log("0221###sui swap res###",S);let I=e.handleTx(S);if(I&&I.hash){p(I.hash),l(!1),b(!0);let C={title:"Claim",res:I.res,hash:I.hash};e.showTransitionPending(C),await e.watchTransaction(C)&&setTimeout(()=>{u.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else l(!1),v(!0);d.value=!1}catch(c){console.log("farmsDeposit error",c),l(!1),v(!0),d.value=!1}},D=f(()=>g.value.farmsRewardObj),W=ro(),T=f(()=>W);return{sFixD:A,stake:z,loading:d,unStake:O,router:$,claim:J,farmsRewardObj:D,getCoinIcon:k=>{var c;return((c=T.value.tokensObj[k])==null?void 0:c.logo_url)||mo("/image/coins/sui-unknown.png")},toPositionDetails:k=>{console.log("toPositionDetails:",k),k.positionSource=="clmm"?$.push(`/new-position-detail?collect=${k.collectionName}&&token=${k.tokenName}&&address=${k.pool}&pos=${k.pos_object_id}`):$.push(`/new-position-detail?position_nft_id=${k.id}&positionSource=farming`)}}}}),Uo=""+globalThis.__publicAssetsURL("sui-image/position-active.png");const fo=o=>(G("data-v-3f3574f7"),o=o(),K(),o),Zs={class:"farms-position-item"},xs=fo(()=>s("thead",null,[s("tr",null,[s("th"),s("th",null,"Liquidity"),s("th",null,"Share"),s("th",null,"Earnings"),s("th")])],-1)),on={class:"position-info"},sn={key:0,class:"status-bg"},nn=fo(()=>s("img",{src:Uo,alt:""},null,-1)),tn=[nn],en={class:"status-text"},an={class:"name-range"},ln=fo(()=>s("span",null,"Details",-1)),rn=fo(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),dn=[ln,rn],cn={class:"liquidity"},un={class:"apr"},pn={alt:""},mn={key:1,class:"rewards-day"},_n={class:"action-btn"};function fn(o,i,h,u,g,e){const a=$o,d=Lo,_=ao,$=Bo,b=co("image");return n(),t("div",Zs,[s("table",null,[xs,s("tbody",null,[s("tr",null,[s("td",null,[s("div",on,[s("div",{class:eo(["position-status",o.positionInfo.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionInfo.positionStatus=="Active"?(n(),t("div",sn,tn)):B("",!0),s("div",en,m(o.positionInfo.positionStatus),1)],2),s("div",an,[s("span",null,m(o.positionInfo.name),1),w(a,{"pool-info":o.positionInfo},null,8,["pool-info"])]),s("div",{class:"details",onClick:i[0]||(i[0]=v=>o.toPositionDetails(o.positionInfo))},dn)])]),s("td",null,[s("div",cn,[w(d,{"position-info":o.positionInfo},null,8,["position-info"]),s("span",null,m(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("sFixD"in o?o.sFixD:y(A))(o.positionInfo.positionUSD,2)}`),1)])]),s("td",null,[s("div",un,m(("sFixD"in o?o.sFixD:y(A))(o.positionInfo.positionShare||0,2))+"%",1)]),s("td",null,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),t(N,{key:0},Q(o.positionInfo.rewards,v=>(n(),t("div",{key:v.rewarder_type,class:"rewards-day"},[s("div",null,[X(s("img",pn,null,512),[[b,o.getCoinIcon(v.rewarder_type)]]),s("span",null,m(v.rewarderAmount),1)])]))),128)):(n(),t("div",mn,"--"))]),s("td",null,[s("div",_n,[o.positionInfo.positionSource=="clmm"?(n(),t(N,{key:0},[o.positionInfo&&o.positionInfo.positionStatus!=="Active"?(n(),P($,{key:0},{title:L(()=>[U("Farming rewards are only available for active positions.")]),default:L(()=>[w(_,{class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:L(()=>[U("Stake")]),_:1},8,["loading","disabled","onClick"])]),_:1})):(n(),P(_,{key:1,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:L(()=>[U("Stake")]),_:1},8,["loading","disabled","onClick"]))],64)):(n(),P(_,{key:1,class:"unstake-btn",onClick:o.unStake},{default:L(()=>[U("Unstake")]),_:1},8,["onClick"])),o.positionInfo.positionSource=="clmm"?(n(),P(_,{key:2,class:"claim-btn",disabled:!0},{default:L(()=>[U("↑ Claim")]),_:1})):(n(),P(_,{key:3,class:"claim-btn",disabled:o.positionInfo.amountA<=0&&o.positionInfo.amountB<=0&&o.positionInfo.positionRewardAmount>0,onClick:o.claim},{default:L(()=>[U("↑ Claim")]),_:1},8,["disabled","onClick"]))])])])])])])}const jo=M(Ys,[["render",fn],["__scopeId","data-v-3f3574f7"]]),hn=E({props:{noDataImg:{type:String,default:""},desc:{type:String,default:""},type:{type:String,default:""},addLiquidityUrl:{type:String,default:""}},setup(){return{}}});const vn={class:"no-data"},gn=["src"],$n={key:0,class:"desc"};function yn(o,i,h,u,g,e){const a=ao;return n(),t("div",vn,[s("img",{src:o.noDataImg,alt:""},null,8,gn),o.desc?(n(),t("div",$n,m(o.desc),1)):B("",!0),o.type=="addLiquidity"?(n(),P(a,{key:1,class:"add-liquidity-btn",onClick:i[0]||(i[0]=d=>o.addLiquidityUrl?o.$router.push(o.addLiquidityUrl):"")},{default:L(()=>[U("Add Liquidity")]),_:1})):B("",!0),o.type=="connectWallet"?(n(),P(a,{key:2,class:"add-liquidity-btn"},{default:L(()=>[U("Connect Wallet")]),_:1})):B("",!0)])}const Ao=M(hn,[["render",yn],["__scopeId","data-v-7d28f356"]]),bn=E({components:{FarmsPositionItem:jo},props:{currentTab:{type:String,default:""}},setup(o){const i=H({}),h=x(),u=f(()=>h),g=oo(),e=f(()=>g),a=f(()=>(console.log(e.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?u.value.address?e.value.myFarmsPoolList:[]:o.currentTab=="Ended"?e.value.farmsPoolList.filter(c=>c.status=="Ended"):e.value.farmsPoolList.filter(c=>c.status=="Live"))),d=c=>{i.value[c.clmm_pool_id]?i.value[c.clmm_pool_id]=!1:(i.value[c.clmm_pool_id]=!0,console.log("执行了吗"),g.getPositionByPool(u.value.address,c.clmm_pool_id,c.id))},_=f(()=>e.value.farmsPositionObj),$=f(()=>(console.log(e.value.farmsLoadingObj,"##farms.value.farmsLoadingObj"),e.value.farmsLoadingObj)),b=f(()=>e.value.farmsUserUsd),v=f(()=>(console.log(e.value.farmsRewardObj,"##farmsRewardObj"),e.value.farmsRewardObj)),l=f(()=>e.value.farmsPositionList),r=f(()=>e.value.farmsAllPositionLoading),p=po(),z=uo(),O=io("Sui"),J=lo("Sui"),{setIsShowSuccess:D,setIsShowRejected:W,setIsShowWaiting:T,setTransactionDesc:j,setTransactionTxid:R}=z;return{wallet:u,walletStore:h,farmsPoolList:a,openMore:d,openMoreObj:i,checkNullObj:Z,router:p,farmsPositionObj:_,farmsLoadingObj:$,farmsUserUsd:b,sFixD:A,farmsRewardObj:v,claimPoolReward:async c=>{console.log(l.value,"farmsRewardObj###");const S=[];l.value.forEach(I=>{console.log(c,I,"#position"),c==I.clmm_pool_id&&S.push({pool_id:I.pool_id,position_nft_id:I.id})}),console.log(JSON.stringify(S),"##params"),R(""),j("Claim rewards"),T(!0);try{const I=await O.batchHarvest(S),C=await u.value.currentWallet.signAndExecuteTransactionBlock(I);console.log("0221###sui swap res###",C);let F=J.handleTx(C);if(F&&F.hash){R(F.hash),T(!1),D(!0);let so={res:F.res,title:"Claim",hash:F.hash};J.showTransitionPending(so),await J.watchTransaction(so)&&setTimeout(()=>{g.getFarmsPoolList()},4e3)}else T(!1),W(!0)}catch(I){console.log("Claim all error",I),T(!1),W(!0)}},farmsAllPositionLoading:r,addCommom:V}}});const q=o=>(G("data-v-54f0a09f"),o=o(),K(),o),In={class:"farms-table"},kn=q(()=>s("th",null,"Staked TVL",-1)),wn=q(()=>s("th",null,"APR",-1)),Sn=q(()=>s("th",null,"Rewards / day",-1)),Pn=q(()=>s("th",null,"My Staked",-1)),Tn=q(()=>s("th",null,"Earned",-1)),Cn=q(()=>s("th",null,"Actions",-1)),Ln={key:0},Un=["onClick"],jn=q(()=>s("td",null,[s("div",{class:"staked-tvl"},"$19,885,003.12")],-1)),An=q(()=>s("td",null,[s("div",{class:"apr"},[s("span",null,"22.20%")])],-1)),Fn={key:0,class:"my-staked"},Rn={key:0,class:"my-staked-loading"},On={class:"position-usd"},Dn={key:0,class:"position-num"},Bn={key:1,class:"my-staked"},Nn=q(()=>s("div",{class:"position-usd"},"--",-1)),En=[Nn],Mn={class:"earned"},qn={key:0,class:"my-staked-loading"},Wn=q(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),Vn={key:2},Hn={class:"actions"},Jn={class:"actions-btn"},zn=["onClick"],Qn=q(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Gn=[Qn],Kn={colspan:"7",style:{padding:"0 16px 16px"}},Xn={key:0,class:"farm-position-list"},Yn={key:0,class:"farm-position-loading"},Zn={key:1,class:"farm-position-list"},xn=q(()=>s("tr",{style:{height:"8px"}},null,-1)),ot={key:1},st={colspan:"7"},nt={key:0,class:"no-data"},tt=q(()=>s("img",{src:ko,alt:""},null,-1)),et={key:1,class:"no-data"},at=q(()=>s("img",{src:wo,alt:""},null,-1)),it=q(()=>s("span",null,"No Data",-1)),lt=[at,it];function rt(o,i,h,u,g,e){const a=To,d=Co,_=bo,$=ao,b=No,v=jo,l=Ao;return n(),t("div",In,[s("table",null,[s("thead",null,[s("tr",null,[s("th",null,m(o.currentTab=="Ended"?"Finished":"Pools"),1),kn,wn,Sn,Pn,Tn,Cn])]),o.farmsPoolList.length>0?(n(),t("tbody",Ln,[(n(!0),t(N,null,Q(o.farmsPoolList,r=>(n(),t(N,{key:r.id},[s("tr",{onClick:p=>o.openMore(r)},[s("td",null,[w(a,{"pool-info":r},null,8,["pool-info"])]),jn,An,s("td",null,[(n(!0),t(N,null,Q(r.rewarders,p=>(n(),P(d,{key:p.reward_coin,"reward-info":p,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))]),s("td",null,[o.wallet.address?(n(),t("div",Fn,[o.farmsLoadingObj[r.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",Rn,[w(_,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),t(N,{key:1},[s("div",On," $"+m(("sFixD"in o?o.sFixD:y(A))(o.farmsUserUsd&&o.farmsUserUsd[r.clmm_pool_id]&&o.farmsUserUsd[r.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[r.clmm_pool_id]&&o.farmsUserUsd[r.clmm_pool_id].positionNum?(n(),t("div",Dn,m(o.farmsUserUsd[r.clmm_pool_id].positionNum)+" "+m(o.farmsUserUsd[r.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):B("",!0)],64))])):(n(),t("div",Bn,En))]),s("td",null,[s("div",Mn,[o.farmsLoadingObj[r.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",qn,[w(_,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address?(n(),t(N,{key:1},[Wn,s("span",null,"$"+m(("addCommom"in o?o.addCommom:y(V))(("sFixD"in o?o.sFixD:y(A))(o.farmsRewardObj&&o.farmsRewardObj[r.clmm_pool_id]&&o.farmsRewardObj[r.clmm_pool_id].amountUsd||0,2))),1)],64)):(n(),t("span",Vn,"--"))])]),s("td",null,[s("div",Hn,[s("div",Jn,[w($,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsUserUsd[r.clmm_pool_id]||o.farmsUserUsd[r.clmm_pool_id].amount<=0,onClick:to(p=>o.claimPoolReward(r.clmm_pool_id),["stop"])},{default:L(()=>[U("Claim")]),_:2},1032,["disabled","onClick"]),w($,{class:"add-liquidity-btn",onClick:to(p=>o.router.push(`/liquidity/deposit?poolAddress=${r.clmm_pool_id}`),["stop"])},{default:L(()=>[U("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more",onClick:to(p=>o.openMore(r),["stop"])},[(n(),t("svg",{class:eo(["arrow-icon",o.openMoreObj[r.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},Gn,2))],8,zn)])])],8,Un),X(s("tr",null,[s("td",Kn,[o.wallet.address?(n(),t("div",Xn,[!("checkNullObj"in o?o.checkNullObj:y(Z))(o.farmsLoadingObj)&&o.farmsLoadingObj[r.clmm_pool_id]?(n(),t("div",Yn,[w(b)])):o.farmsPositionObj[r.clmm_pool_id]&&o.farmsPositionObj[r.clmm_pool_id].length>0?(n(!0),t(N,{key:1},Q(o.farmsPositionObj[r.clmm_pool_id],p=>(n(),P(v,{key:p.clmm_pool_id,"current-tab":o.currentTab,"position-info":{...p,clmm_pool_id:r.clmm_pool_id}},null,8,["current-tab","position-info"]))),128)):(n(),P(l,{key:2,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${r.clmm_pool_id}`},null,8,["add-liquidity-url"]))])):(n(),t("div",Zn,[w(l,{"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"})]))])],512),[[yo,!("checkNullObj"in o?o.checkNullObj:y(Z))(o.openMoreObj)&&o.openMoreObj[r==null?void 0:r.clmm_pool_id]]]),xn],64))),128))])):(n(),t("tbody",ot,[s("tr",null,[s("td",st,[!o.wallet.connected&&o.currentTab=="My Farms"?(n(),t("div",nt,[tt,w($,{class:"connect-wallet",onClick:i[0]||(i[0]=r=>o.wallet.setIsShowWalletModal(!0))},{default:L(()=>[U(m(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(n(),t("div",et,lt)):B("",!0)])])]))])])}const Fo=M(bn,[["render",rt],["__scopeId","data-v-54f0a09f"]]),dt=E({setup(){const o=H(!1),i=x(),h=f(()=>i),u=oo(),g=f(()=>u),e=f(()=>g.value.farmsPoolList);return{isShowMore:o,wallet:h,walletStore:i,farmsPoolList:e}}});const ct=o=>(G("data-v-c65dcb9d"),o=o(),K(),o),ut={class:"farms-table"},pt=ct(()=>s("thead",null,[s("tr",null,[s("th",null,"Pool"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")])],-1)),mt={class:"pool"},_t={class:"staked-tvl"},ft={class:"apr"},ht={class:"rewards-day"},vt={class:"my-staked"},gt={class:"earned"},$t={class:"actions"};function yt(o,i,h,u,g,e){const a=bo;return n(),t("div",ut,[s("table",null,[pt,s("tbody",null,[(n(),t(N,null,Q(4,(d,_)=>s("tr",{key:_},[s("td",null,[s("div",mt,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",_t,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",ft,[s("span",null,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),s("td",null,[s("div",ht,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",vt,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",gt,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",$t,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])])),64))])])])}const bt=M(dt,[["render",yt],["__scopeId","data-v-c65dcb9d"]]),It=E({props:{positionStatus:{type:String,default:"Active"},positionInfo:{type:Object,default:()=>({})}},setup(){return{}}});const kt=o=>(G("data-v-882c76c0"),o=o(),K(),o),wt={class:"position-info"},St={key:0,class:"status-bg"},Pt=kt(()=>s("img",{src:Uo,alt:""},null,-1)),Tt=[Pt],Ct={class:"status-text"},Lt={class:"name-range"};function Ut(o,i,h,u,g,e){const a=$o;return n(),t("div",wt,[s("div",{class:eo(["position-status",o.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionStatus=="Active"?(n(),t("div",St,Tt)):B("",!0),s("div",Ct,m(o.positionStatus),1)],2),s("div",Lt,[s("span",null,m(o.positionInfo.name),1),o.positionStatus=="Active"?(n(),P(a,{key:0,"pool-info":o.positionInfo},null,8,["pool-info"])):B("",!0)])])}const jt=M(It,[["render",Ut],["__scopeId","data-v-882c76c0"]]),At=E({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const i=ro(),h=f(()=>i),u=po(),g=T=>{var j;return((j=h.value.tokensObj[T])==null?void 0:j.logo_url)||mo("/image/coins/sui-unknown.png")},e=lo("Sui"),a=io("Sui"),d=H(!1),_=uo(),$=x(),b=oo(),v=f(()=>$),{setIsShowSuccess:l,setIsShowRejected:r,setIsShowWaiting:p,setTransactionDesc:z,setTransactionTxid:O}=_;return{getCoinIcon:g,router:u,claim:async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,O(""),z("Claim rewards"),p(!0);const T={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const j=await a.harvestFarms(T),R=await v.value.currentWallet.signAndExecuteTransactionBlock(j);console.log("0221###sui swap res###",R);let k=e.handleTx(R);if(k&&k.hash){O(k.hash),p(!1),l(!0);let c={title:"Claim",res:k.res,hash:k.hash};e.showTransitionPending(c),await e.watchTransaction(c)&&setTimeout(()=>{b.getPositionByPool(v.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else p(!1),r(!0);d.value=!1}catch(j){console.log("farmsDeposit error",j),p(!1),r(!0),d.value=!1}},unStake:async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,O(""),z(`Unstake ${o.positionInfo.name}`),p(!0);const T=o.positionInfo.farmsPoolId,j=o.positionInfo.id;try{const R=await a.farmsWithdraw(T,j),k=await v.value.currentWallet.signAndExecuteTransactionBlock(R);console.log("0221###sui swap res###",k);let c=e.handleTx(k);if(c&&c.hash){O(c.hash),p(!1),l(!0);let S={res:c.res,title:"Unstaked",hash:c.hash};e.showTransitionPending(S),await e.watchTransaction(S)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),b.getPositionByPool(v.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else p(!1),r(!0)}catch(R){console.log("farmsDeposit error",R),p(!1),r(!0),d.value=!1}},loading:d,stake:async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,O(""),z(`Stake ${o.positionInfo.name}`),p(!0);const T={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},j=o.positionInfo.farmsPoolId;try{const R=await a.farmsDeposit(T,j),k=await v.value.currentWallet.signAndExecuteTransactionBlock(R);console.log("0221###sui swap res###",k);let c=e.handleTx(k);if(c&&c.hash){O(c.hash),p(!1),l(!0);let S={res:c.res,title:"Staked",hash:c.hash};e.showTransitionPending(S),await e.watchTransaction(S)&&setTimeout(()=>{b.getPositionByPool(v.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else p(!1),r(!0)}catch(R){console.log("farmsDeposit error",R),p(!1),r(!0),d.value=!1}}}}});const Ft=o=>(G("data-v-2879a83d"),o=o(),K(),o),Rt={class:"farms-position"},Ot={class:"farms-position-box"},Dt=Io('<div class="position-info-block" data-v-2879a83d><div class="block-item" data-v-2879a83d><div class="leabl" data-v-2879a83d>Liquidity</div><div class="text" data-v-2879a83d>~$33.57</div></div><div class="block-item" data-v-2879a83d><div class="leabl" data-v-2879a83d>Share</div><div class="text" data-v-2879a83d>0.00007%</div></div></div>',1),Bt={class:"earnings"},Nt={class:"block-item"},Et=Ft(()=>s("div",{class:"leabl"},"Earnings",-1)),Mt={class:"text"},qt={alt:""},Wt={key:1,class:"rewards-day"},Vt={class:"unstake-btn-box"};function Ht(o,i,h,u,g,e){const a=jt,d=ao,_=co("image");return n(),t("div",Rt,[s("div",Ot,[w(a,{"position-info":o.positionInfo},null,8,["position-info"])]),Dt,s("div",Bt,[s("div",Nt,[Et,s("div",Mt,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),t(N,{key:0},Q(o.positionInfo.rewards,$=>(n(),t("div",{key:$.rewarder_type,class:"rewards-day"},[s("div",null,[X(s("img",qt,null,512),[[_,o.getCoinIcon($.rewarder_type)]]),s("span",null,m($.rewarderAmount),1)])]))),128)):(n(),t("div",Wt,"--"))])]),o.positionInfo.positionSource=="clmm"?(n(),P(d,{key:0,class:"add-liquidity-btn claim-btn",onClick:i[0]||(i[0]=$=>o.router.push(`/new-position-detail?collect=${o.positionInfo.collectionName}&&token=${o.positionInfo.tokenName}&&address=${o.positionInfo.pool}&pos=${o.positionInfo.pos_object_id}`))},{default:L(()=>[U("+ Add liquidity")]),_:1})):(n(),P(d,{key:1,class:"claim-btn",disabled:o.positionInfo&&o.positionInfo.rewards&&o.positionInfo.rewards.length==0,onClick:o.claim},{default:L(()=>[U("↑ Claim")]),_:1},8,["disabled","onClick"]))]),s("div",Vt,[s("div",null,[o.positionInfo.positionSource=="clmm"?(n(),P(d,{key:0,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:L(()=>[U("Stake")]),_:1},8,["loading","disabled","onClick"])):(n(),P(d,{key:1,class:"unstake-btn",onClick:o.unStake},{default:L(()=>[U("Unstake")]),_:1},8,["onClick"]))])])])}const Ro=M(At,[["render",Ht],["__scopeId","data-v-2879a83d"]]),Jt=E({components:{FarmsH5Position:Ro},props:{currentTab:{type:String,default:""}},setup(o){const i=H(!1),h=x(),u=f(()=>h),g=oo(),e=f(()=>g),a=f(()=>(console.log(e.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?u.value.address?e.value.myFarmsPoolList:[]:o.currentTab=="Ended"?e.value.farmsPoolList.filter(c=>c.status=="Ended"):e.value.farmsPoolList.filter(c=>c.status=="Live"))),d=f(()=>e.value.farmsUserUsd),_=f(()=>(console.log(e.value.farmsRewardObj,"##farmsRewardObj"),e.value.farmsRewardObj)),$=f(()=>e.value.farmsPositionObj),b=f(()=>e.value.farmsPoolListLoading),v=f(()=>e.value.farmsPositionList),l=H({}),r=c=>{l.value[c.clmm_pool_id]?l.value[c.clmm_pool_id]=!1:(l.value[c.clmm_pool_id]=!0,console.log("执行了吗"),g.getPositionByPool(u.value.address,c.clmm_pool_id,c.id))},p=uo(),z=io("Sui"),O=lo("Sui"),{setIsShowSuccess:J,setIsShowRejected:D,setIsShowWaiting:W,setTransactionDesc:T,setTransactionTxid:j}=p,R=async c=>{console.log(v.value,"farmsRewardObj###");const S=[];v.value.forEach(I=>{console.log(c,I,"#position"),c==I.clmm_pool_id&&S.push({pool_id:I.pool_id,position_nft_id:I.id})}),console.log(JSON.stringify(S),"##params"),j(""),T("Claim rewards"),W(!0);try{const I=await z.batchHarvest(S),C=await u.value.currentWallet.signAndExecuteTransactionBlock(I);console.log("0221###sui swap res###",C);let F=O.handleTx(C);if(F&&F.hash){j(F.hash),W(!1),J(!0);let so={res:F.res,title:"Claim",hash:F.hash};O.showTransitionPending(so),await O.watchTransaction(so)&&setTimeout(()=>{g.getFarmsPoolList()},4e3)}else W(!1),D(!0)}catch(I){console.log("Claim all error",I),W(!1),D(!0)}},k=po();return{isShowMore:i,wallet:u,farmsPoolList:a,farmsUserUsd:d,sFixD:A,farmsRewardObj:_,farmsPositionObj:$,openMore:r,checkNullObj:Z,openMoreObj:l,farmsPoolListLoading:b,claimPoolReward:R,router:k}}});const Y=o=>(G("data-v-32f98484"),o=o(),K(),o),zt={key:0,class:"farms-pool-list"},Qt={class:"farms-block"},Gt=Io('<div class="item-block" data-v-32f98484><div class="leabl" data-v-32f98484>Staked TVL</div><div class="text" data-v-32f98484>$19,885,003.12</div></div><div class="item-block apr" data-v-32f98484><div class="leabl" data-v-32f98484>APR</div><div class="text" data-v-32f98484>22.20%</div></div>',2),Kt={class:"item-block"},Xt=Y(()=>s("div",{class:"leabl"},"Rewards / day",-1)),Yt={class:"text"},Zt={class:"item-block my-staked"},xt=Y(()=>s("div",{class:"leabl"},"My Staked",-1)),oe={key:0,class:"text"},se={class:"position-usd"},ne={key:0,class:"position-num"},te={key:1,class:"text"},ee=Y(()=>s("div",{class:"position-usd"},"--",-1)),ae=[ee],ie={class:"item-block"},le=Y(()=>s("div",{class:"leabl"},"Earned",-1)),re={class:"text earned-box"},de={class:"earned"},ce={key:0,class:"ratio-bg"},ue=Y(()=>s("div",{class:"ratio"},null,-1)),pe=[ue],me={key:1},_e={key:2},fe={class:"add-liquidity-box"},he=["onClick"],ve=Y(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),ge=[ve],$e={key:1,class:"upgrade-loading"},ye={key:2,class:"no-data"},be=Y(()=>s("img",{src:ko,alt:""},null,-1)),Ie={key:3,class:"no-data"},ke=Y(()=>s("img",{src:wo,alt:""},null,-1)),we=Y(()=>s("span",null,"No Data",-1)),Se=[ke,we];function Pe(o,i,h,u,g,e){const a=To,d=Co,_=ao,$=Ro,b=Ao,v=Wo;return n(),t(N,null,[o.farmsPoolListLoading?o.farmsPoolListLoading?(n(),t("div",$e,[w(v,{type:"poolsCard",loading:!0})])):B("",!0):(n(),t("div",zt,[(n(!0),t(N,null,Q(o.farmsPoolList,l=>(n(),t("div",{key:l.id,class:"farms-item"},[w(a,{"pool-info":l},null,8,["pool-info"]),s("div",Qt,[Gt,s("div",Kt,[Xt,s("div",Yt,[(n(!0),t(N,null,Q(l.rewarders,r=>(n(),P(d,{key:r.reward_coin,"reward-info":r,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("div",Zt,[xt,o.wallet.address?(n(),t("div",oe,[s("div",se," $"+m(("sFixD"in o?o.sFixD:y(A))(o.farmsUserUsd&&o.farmsUserUsd[l.clmm_pool_id]&&o.farmsUserUsd[l.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[l.clmm_pool_id]&&o.farmsUserUsd[l.clmm_pool_id].positionNum?(n(),t("div",ne,m(o.farmsUserUsd[l.clmm_pool_id].positionNum)+" "+m(o.farmsUserUsd[l.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):B("",!0)])):(n(),t("div",te,ae))]),s("div",ie,[le,s("div",re,[s("div",de,[o.wallet.address?(n(),t("div",ce,pe)):B("",!0),o.wallet.address?(n(),t("span",me,"$"+m(("sFixD"in o?o.sFixD:y(A))(o.farmsRewardObj&&o.farmsRewardObj[l.clmm_pool_id]&&o.farmsRewardObj[l.clmm_pool_id].amountUsd||0,2)),1)):(n(),t("span",_e,"--"))]),w(_,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsUserUsd[l.clmm_pool_id]||o.farmsUserUsd[l.clmm_pool_id].amount<=0,onClick:to(r=>o.claimPoolReward(l.clmm_pool_id),["stop"])},{default:L(()=>[U("Claim")]),_:2},1032,["disabled","onClick"])])])]),s("div",fe,[w(_,{class:"add-liquidity-btn",onClick:to(r=>o.router.push(`/liquidity/deposit?poolAddress=${l.clmm_pool_id}`),["stop"])},{default:L(()=>[U("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more-btn",onClick:r=>o.openMore(l)},[(n(),t("svg",{class:eo(["arrow-icon",!("checkNullObj"in o?o.checkNullObj:y(Z))(o.openMoreObj)&&o.openMoreObj[l==null?void 0:l.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},ge,2))],8,he),(n(!0),t(N,null,Q(o.farmsPositionObj[l.clmm_pool_id],r=>X((n(),P($,{key:r.clmm_pool_id,"position-info":{...r,clmm_pool_id:l.clmm_pool_id}},null,8,["position-info"])),[[yo,!("checkNullObj"in o?o.checkNullObj:y(Z))(o.openMoreObj)&&o.openMoreObj[l==null?void 0:l.clmm_pool_id]]])),128)),o.farmsPositionObj&&o.farmsPositionObj[l.clmm_pool_id]&&o.farmsPositionObj[l.clmm_pool_id].length==0?(n(),P(b,{key:0,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${l.clmm_pool_id}`},null,8,["add-liquidity-url"])):B("",!0),o.wallet.address?B("",!0):(n(),P(b,{key:1,"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"},null,8,["no-data-img"]))]))),128))])),!o.wallet.connected&&o.currentTab=="My Farms"?(n(),t("div",ye,[be,w(_,{class:"connect-wallet",onClick:i[0]||(i[0]=l=>o.wallet.setIsShowWalletModal(!0))},{default:L(()=>[U(m(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(n(),t("div",Ie,Se)):B("",!0)],64)}const Oo=M(Jt,[["render",Pe],["__scopeId","data-v-32f98484"]]),Te=E({setup(o,i){const h=["Live","Ended","My Farms"],u=H("Live"),g=H("APR"),e=H(!1),a=oo(),d=f(()=>a),_=x(),$=f(()=>_),b=f(()=>u.value=="My Farms"?$.value.address?d.value.myFarmsPoolList:[]:u.value=="Ended"?d.value.farmsPoolList.filter(p=>p.status=="Ended"):d.value.farmsPoolList.filter(p=>p.status=="Live"));return{tabList:h,currentTab:u,sortValue:g,clickRefresh:()=>{e.value=!0,a.getFarmsPoolList(),setTimeout(()=>{e.value=!1},1e3)},isRefresh:e,farmsPoolList:b,getListNum:p=>b.value.length,changeTab:p=>{u.value=p,i.emit("changeTab",p)}}}});const ho=o=>(G("data-v-254b2c2c"),o=o(),K(),o),Ce={class:"farms-tab"},Le={class:"tab-left"},Ue=["onClick"],je={key:0},Ae={class:"tab-right"},Fe={class:"sort-select"},Re={class:"sort-select-box"},Oe=ho(()=>s("div",null,"Sort by",-1)),De=ho(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),Be=ho(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),Ne={class:"sort-list"},Ee={class:"refresh"},Me=ho(()=>s("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),qe=[Me];function We(o,i,h,u,g,e){return n(),t("div",Ce,[s("div",Le,[(n(!0),t(N,null,Q(o.tabList,a=>(n(),t("div",{key:a,class:eo(["tab-item",o.currentTab==a?"tab-item-active":""]),onClick:d=>o.changeTab(a)},[s("span",null,m(a),1),o.currentTab==a&&o.getListNum(a)?(n(),t("p",je,m(o.getListNum(a)),1)):B("",!0)],10,Ue))),128))]),s("div",Ae,[s("div",Fe,[s("div",Re,[Oe,s("div",null,[s("span",null,m(o.sortValue),1),De,Be])]),s("div",Ne,[s("div",{class:"sort-item",onClick:i[0]||(i[0]=a=>o.sortValue="APR")},"APR"),s("div",{class:"sort-item",onClick:i[1]||(i[1]=a=>o.sortValue="TVL")},"TVL")])]),s("div",Ee,[(n(),t("svg",{"aria-hidden":"true",class:eo(["refresh-icon",o.isRefresh?"refreshing":""]),onClick:i[2]||(i[2]=(...a)=>o.clickRefresh&&o.clickRefresh(...a))},qe,2))])])])}const Ve=M(Te,[["render",We],["__scopeId","data-v-254b2c2c"]]),He=E({components:{FarmsBanner:So,FarmsTabs:Ve,FarmsTable:Fo,FarmsH5List:Oo},setup(){const o=oo(),i=f(()=>o),h=f(()=>i.value.farmsPoolListLoading),u=f(()=>i.value.farmsPoolList),g=x(),e=f(()=>g),a=ro(),d=f(()=>a);Eo(()=>[e.value.address,u.value,d.value.tokensObj,d.value.RATES],([$,b,v,l])=>{$&&b.length>0&&!Z(v)&&!Z(l)&&o.getPositionByAllPool($)},{immediate:!0}),Mo(()=>{o.getFarmsPoolList()});const _=H("Live");return{farmsPoolListLoading:h,currentTab:_}}});const Je={class:"farm-container"},ze={class:"farm-container-center"};function Qe(o,i,h,u,g,e){const a=So,d=qo("FarmsTabs"),_=Fo,$=bt,b=Oo;return n(),t("div",Je,[w(a),s("div",ze,[w(d,{onChangeTab:i[0]||(i[0]=v=>{o.currentTab=v})}),o.farmsPoolListLoading?(n(),P($,{key:1})):(n(),P(_,{key:0,"current-tab":o.currentTab},null,8,["current-tab"])),w(b,{"current-tab":o.currentTab},null,8,["current-tab"])])])}const ra=M(He,[["render",Qe],["__scopeId","data-v-8d0ef335"]]);export{ra as default};
