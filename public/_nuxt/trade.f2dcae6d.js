import{l as O,R as Se,a6 as ke,r as $,q as st,a as Q,s as ae,o as l,f as m,h as t,t as ot,u as a,v as o,c as J,x as H,p as dt,k as _t,S as At,e as X,w as nt,i as U,j as W,a1 as xe,I as ne,B as It,y as Le,H as oe,K as Ce,D as Dt,F as Y,E as lt,A as D,z as Te,O as Gt,N as Tt,P as Ie,a3 as le}from"./entry.d59aa0b6.js";/* empty css              */import{P as Me,$ as Ee,u as zt,e as ie,c as Ft,s as ft,p as Qt,a as G,a0 as wt,g as ue}from"./pool.fd2ff17e.js";import{c as I,a as yt,u as Bt}from"./sha256.fe7322d1.js";import{D as T}from"./decimal.0bdeb344.js";/* empty css              *//* empty css              */import{_ as Ue}from"./img-leverage_2x.1c577303.js";import{_ as Pe}from"./refresh-icon.91fec0d0.js";import{_ as Xt}from"./assets-card.80b65bf8.js";import{_ as je}from"./coin-select.5219a542.js";/* empty css              */import{_ as Ae}from"./img-no-Positions_2x.0ab7748d.js";import{_ as Be}from"./img-connect-wallet_2x.0a83c798.js";/* empty css              */import"./token-warning.b5603e31.js";/* empty css              */import"./import-icon.de3e6c66.js";import"./img-no-Positions_2x.0d96bc41.js";function ct(e){const i={fullRpcUrl:localStorage.getItem(`${e}-currentRpclocal2`)||I[e||"Sui"].fullRpcUrl,simulationAccount:I[e||"Sui"].simulationAccount,cetus_config:I[e||"Sui"].cetus_config,clmm_pool:I[e||"Sui"].clmm_pool,integrate:I[e||"Sui"].integrate,deepbook:I[e||"Sui"].deepbook,deepbook_endpoint_v2:I[e||"Sui"].deepbook_endpoint_v2,aggregatorUrl:I[e||"Sui"].aggregatorUrl,swapCountUrl:I[e||"Sui"].swapCountUrl},u={launchpad:I[e||"Sui"].launchpad,ido:I[e||"Sui"].ido,xcetus:I[e||"Sui"].xcetus,xcetus_dividends:I[e||"Sui"].xcetus_dividends,cetus_faucet:I[e||"Sui"].cetus_faucet,xtoken:I[e||"Sui"].xtoken,xtoken_dividends:I[e||"Sui"].xtoken_dividends,token_faucet:I[e||"Sui"].token_faucet,booster:I[e||"Sui"].booster,maker_bonus:I[e||"Sui"].maker_bonus,liquidity_stratefy:I[e||"Sui"].liquidity_stratefy,vaults:I[e||"Sui"].vaults,frams:I[e||"Sui"].frams,limit_order:I[e||"Sui"].limit_order};console.log("defaultNetworkOptions####",i);const S=new Me(i),s=new Ee(u,S),p=yt(),L=O(()=>p);Se(()=>{L.value.address&&(S.senderAddress=L.value.address)});const c=async()=>await s.LimitOrder.getLimitOrderTokenList(),d=async()=>await s.LimitOrder.getLimitOrderPoolList(),w=async()=>await s.LimitOrder.getOwnerLimitOrderList(s.ClmmSDK.senderAddress,"all"),v=g=>({transactionBlock:g,options:{showEffects:!0,showEvents:!0,showInput:!0,showRawInput:!0,showObjectChanges:!0,showBalanceChanges:!0}});return{getLimitOrderTokenList:c,getLimitOrderPoolList:d,getOwnerLimitOrderList:w,placeLimitOrder:async g=>{const{pay_coin_amount:N,rate:A,expired_ts:B,pay_coin_type:F,target_coin_type:Z,pay_decimal:C,target_decimal:r}=g,E=new T(N).mul(Math.pow(10,C)).toNumber();console.log("useLimitOrder placeLimitOrder params##",g);const P=await s.LimitOrder.placeLimitOrder({pay_coin_amount:E,rate:A,expired_ts:B,pay_coin_type:F=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":F,target_coin_type:Z=="0x2::sui::SUI"?"0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI":Z,pay_decimal:C,target_decimal:r});return console.log("useLimitOrder placeLimitOrder payload##",P),v(P)},calculateRate:(g,N,A)=>{const B=20+N-A;return Number(g)/10**B},cancelOrdersByOwner:async g=>{console.log("cancelOrdersByOwner params",g);const N=await s.LimitOrder.cancelOrdersByOwner(g);return v(N)},getLimitOrderLogs:async g=>await s.LimitOrder.getLimitOrderLogs(g)}}const Pt="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI",vt=ke("LimitOrder",{state:()=>({limitTokenList:[],limitTokenObj:{},limitOrderPoolList:[],limitOrderList:[],orderNum:0,orderListLoading:!1,limitTokenMinAmountObj:{},limitOrderHistoryList:[],historyNum:0,orderHistoryObj:{}}),actions:{async getTokenMinAmount(){const i=await ct("Sui").getLimitOrderTokenList();this.limitTokenMinAmountObj=Object.fromEntries(i.map((u,S)=>[u.coin_type==Pt?"0x2::sui::SUI":u.coin_type,u])),console.log(i,"store limitorder getLimitgetTokenMinAmount###")},async getPoolList(){const i=await ct("Sui").getLimitOrderPoolList();this.limitOrderPoolList=i.map(u=>({indexer_id:u.indexer_id,pay_coin_type:u.pay_coin_type==Pt?"0x2::sui::SUI":u.pay_coin_type,target_coin_type:u.target_coin_type==Pt?"0x2::sui::SUI":u.target_coin_type})),console.log(i,"store limitorder getLimitOrderPoolList###")},async getOrderList(){const e=ct("Sui");this.orderListLoading=!0;const i=await e.getOwnerLimitOrderList();this.limitOrderList=i.data.filter(u=>u.status=="Running")||[],this.limitOrderHistoryList=i.data.filter(u=>u.status!=="Running")||[],this.orderListLoading=!1,console.log(i,"store limitorder getOrderList###")},async getTokenList(){const i=(await fetch(`${I.Sui.api}/v2/sui/coin_metadata`,{method:"POST",body:JSON.stringify({})}).then(u=>u.json())).data.list||[];this.limitTokenList=i,this.limitTokenObj=Object.fromEntries(i.map((u,S)=>[u.coin_type==Pt?"0x2::sui::SUI":u.coin_type,u])),console.log(i,"store limitorder getLimitOrderTokenList###")},async getLimitOrderLogs(e){const i=ct("Sui");console.log(e,"store limitorder getLimitOrderLogs##");const S=(await i.getLimitOrderLogs(e.id)).map(s=>{console.log(e,"##orderLog"),console.log(s,"##orderLog");const{pay_coin_info:p,target_coin_info:L}=e,c=new T(s.parsedJson.total_pay_amount).div(new T(Math.pow(10,p.decimals))).toString();return{...s,parsedJson:{...s.parsedJson,total_pay_amount:c}}});console.log(S,"##orderLogList"),this.orderHistoryObj={...this.orderHistoryObj,[e.id]:S},console.log(this.orderHistoryObj,"this.orderHistoryObj##")},setOrderNum(e){this.orderNum=e},setHistoryNum(e){this.historyNum=e}}}),y=$(),b=$(),Ne=zt(),Re=O(()=>Ne),ce=Bt(),He=O(()=>ce),Zt=O(()=>He.value.chainName),ht=ie("Sui");st(()=>Re.value.tokensObj,async e=>{Ft(e)||(y.value||(y.value=await ht.getTokenBySymbol(e,I[Zt.value].swapDefaultPair.fromCoin)),b.value||(b.value=await ht.getTokenBySymbol(e,I[Zt.value].swapDefaultPair.toCoin)))},{immediate:!0});const{setTransactionTxid:De,setIsShowWaiting:jt,setIsShowSuccess:ze,setIsShowRejected:te,setTransactionDesc:Fe}=ce,ee=$(!1),re=vt(),We=O(()=>re),Je=O(()=>We.value.limitOrderList),Ve=yt(),se=O(()=>Ve),Wt=async(e,i=!1)=>{const u=ct("Sui");try{Fe("Canceling order"),jt(!0);const s=i?Je.value.map(d=>({order_id:d.id,pay_coin_type:d.pay_coin_type,target_coin_type:d.target_coin_type})):[{order_id:e.id,pay_coin_type:e.pay_coin_type,target_coin_type:e.target_coin_type}];console.log("cacelLimitOrder parmas",s);const p=await u.cancelOrdersByOwner(s),L=await ht.signAndExecuteTransactionBlock(se.value.currentWallet,p),c=ht.handleTx(L);if(c&&c.hash){De(c.hash),jt(!1),ze(!0),ee.value=!1;const d={title:"Transaction",desc:"Order cancelled successfully",hash:c.hash,icon:"icon-icon-Increased"};d.res=c.res,ht.showTransitionPending(d),await ht.watchTransaction(d)&&setTimeout(()=>{ht.getAccount(se.value.address),re.getOrderList()},1e3)}else jt(!1),te(!0)}catch(S){jt(!1),te(!0),ee.value=!1,console.log("trade-data.ts cancel error##",S)}},Nt=e=>(dt("data-v-5494fd45"),e=e(),_t(),e),Ke={class:"trade-chart"},qe={class:"switch-direction"},Ye={class:"left"},Ge={class:"token-info"},Qe={alt:""},Xe={alt:""},Ze={key:0},ts={key:1},es=Nt(()=>t("svg",{class:"icon icon-up","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-exchange_up1"})],-1)),ss=Nt(()=>t("svg",{class:"icon icon-down","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-exchange_down1"})],-1)),as=[es,ss],ns={class:"right"},os=Nt(()=>t("div",{class:"price"},"3.687591",-1)),ls={class:"symbol"},is=Nt(()=>t("div",{class:"change"},"+0.02%",-1)),us=["onload"],cs=Q({__name:"trade-chart",setup(e){const i=$(!0),u=$(!1);return(S,s)=>{var c,d,w,v,_,k,M,z,g;const p=At,L=ae("image");return l(),m("div",Ke,[t("div",qe,[t("div",Ye,[t("div",Ge,[ot(t("img",Qe,null,512),[[L,u.value?(c=a(y))==null?void 0:c.logo_url:(d=a(b))==null?void 0:d.logo_url]]),ot(t("img",Xe,null,512),[[L,u.value?(w=a(b))==null?void 0:w.logo_url:(v=a(y))==null?void 0:v.logo_url]]),u.value?(l(),m("span",Ze,o((_=a(y))==null?void 0:_.symbol)+" / "+o((k=a(b))==null?void 0:k.symbol),1)):(l(),m("span",ts,o((M=a(b))==null?void 0:M.symbol)+" / "+o((z=a(y))==null?void 0:z.symbol),1))]),t("div",{class:"tab",onClick:s[0]||(s[0]=N=>u.value=!u.value)},as)]),t("div",ns,[os,t("div",ls,o((g=a(b))==null?void 0:g.symbol),1),is])]),t("iframe",{id:"geckoterminal-embed",ref:"myFrame",class:"frame",height:"100%",width:"100%",title:"GeckoTerminal Embed",src:"https://www.geckoterminal.com/sui-network/tokens/0x2::sui::SUI?embed=1&info=0&swaps=0",frameborder:"0",allow:"clipboard-write",allowfullscreen:"",onload:()=>{i.value=!1}},null,8,us),i.value?(l(),J(p,{key:0})):H("",!0)])}}});const rs=X(cs,[["__scopeId","data-v-5494fd45"]]),de=e=>(dt("data-v-7a8cae46"),e=e(),_t(),e),ds={class:"custom-expiry"},_s={class:"input-box"},vs=de(()=>t("div",{class:"minutes"},"Hours",-1)),ms={class:"input-box"},ps=de(()=>t("div",{class:"minutes"},"Minutes",-1)),gs=Q({__name:"custom-expires-modal",setup(e){const i=$(),u=$(),S=$({}),s=(c,d)=>{const w=(c||0)*60+Number(d||0),v=Math.floor(w/(60*24)),_=Math.floor(w%(60*24)/60),k=w%60;let M="";v>0&&(M+=v+"d "),_>0&&(M+=_+"h "),k>0&&(M+=k+"m "),S.value={timeText:M.trim()||"0 m",time:w*60*1e3}};st(()=>[i.value,u.value],([c,d])=>{s(c,d)},{immediate:!0});const p=c=>{const d=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,0}})?).*$");c.target.value=c.target.value.replace(d,"$1"),i.value=c.target.value,console.log(i.value,"##inputChange")},L=c=>{const d=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,0}})?).*$");c.target.value=c.target.value.replace(d,"$1"),u.value=c.target.value};return(c,d)=>{const w=ne,v=It;return l(),J(a(xe),{title:"Custom Expiry Period",visible:!0,width:"440px",footer:null,onCancel:d[3]||(d[3]=_=>c.$emit("closeModal"))},{default:nt(()=>[t("div",ds,[t("div",_s,[U(w,{value:i.value,"onUpdate:value":d[0]||(d[0]=_=>i.value=_),placeholder:"0",onChange:p},null,8,["value"]),vs]),t("div",ms,[U(w,{value:u.value,"onUpdate:value":d[1]||(d[1]=_=>u.value=_),placeholder:"0",onChange:L},null,8,["value"]),ps]),U(v,{class:"set-period",disabled:!i.value&&!u.value,onClick:d[2]||(d[2]=_=>c.$emit("sendTime",S.value))},{default:nt(()=>[W("Set Period")]),_:1},8,["disabled"])])]),_:1})}}});const hs=X(gs,[["__scopeId","data-v-7a8cae46"]]),Ot=e=>(dt("data-v-2671f74f"),e=e(),_t(),e),ys={class:"trade-card"},fs={class:"trade-content"},bs={class:"trade-card-title"},ws={class:"trade-tab"},Os=["onClick"],$s={class:"trade-card-content"},Ss={class:"card-item"},ks={class:"card-item"},xs=Ot(()=>t("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),Ls=[xs],Cs={class:"sell-setting"},Ts={class:"sell-rate"},Is={class:"top"},Ms=Ot(()=>t("div",{class:"rate rate-up"},"+0.25%",-1)),Es=Ot(()=>t("div",{class:"set-market"},"Market",-1)),Us={class:"bottom"},Ps={class:"top"},js=Ot(()=>t("span",null,"Expires in",-1)),As=Ot(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-tips2"})],-1)),Bs={class:"bottom"},Ns=Ot(()=>t("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Rs=[Ns],Hs=["onClick"],Ds={class:"market-price-tips"},zs=Q({__name:"trade-card",setup(e){const{t:i}=Le(),u=["Swap","Limit"],S=$("Limit"),s=$(),p=$(),L=yt(),c=O(()=>L),d=O(()=>c.value.assets&&y.value&&c.value.assets[y.value.address]?Qt(c.value.assets[y.value.address].balance,y.value.decimals):0),w=O(()=>c.value.assets&&b.value&&c.value.assets[b.value.address]?Qt(c.value.assets[b.value.address].balance,b.value.decimals):0),v=f=>{f==="fromCoin"?s.value=d.value>0?y.value.symbol=="SUI"?new T(Number(d.value)).sub(new T(.05)).lt(new T(0))?"0":new T(Number(d.value)).sub(new T(.05)).toString():String(d.value):"":p.value=w.value>0?b.value.symbol=="SUI"?new T(Number(w.value)).sub(new T(.05)).lt(new T(0))?"0":new T(Number(w.value)).sub(new T(.05)).toString():String(w.value):""},_=f=>{f==="fromCoin"?s.value=d.value>0?ft(new T(Number(d.value)).div(2).toString(),y.value.decimals).toString():"":p.value=w.value>0?ft(new T(Number(w.value)).div(2).toString(),b.value.decimals).toString():""},k=$(""),M=$(""),z=$(""),g=$(!1),N=f=>{var h,it,et,gt;k.value=f,f==="fromCoin"?(M.value=((h=b.value)==null?void 0:h.address)||"",z.value=((it=y.value)==null?void 0:it.address)||""):(M.value=((et=y.value)==null?void 0:et.address)||"",z.value=((gt=b.value)==null?void 0:gt.address)||""),g.value=!0},A=$(!1);function B(){A.value=!0;const f=y.value;y.value=b.value,b.value=f,setTimeout(()=>{A.value=!1},300)}const F=["5 Minutes","10 Minutes","30 Minutes","1 Hour","1 Day","3 Days","7 Days","1 Month","Custom"],Z=f=>{switch(f){case"5 Minutes":return 3e5;case"10 Minutes":return 6e5;case"30 Minutes":return 18e5;case"1 Hour":return 36e5;case"1 Day":return 864e5;case"7 Days":return 6048e5;case"1 Month":return 2592e6;default:return 0}},C=$(!1),r=$("7 Days"),E=$(!1),P=$(1.7),n=$(0),j=f=>{r.value=f.timeText,n.value=f.time,E.value=!1},pt=f=>{k.value==="fromCoin"?(s.value="",b.value&&f.address.toLowerCase()===(b==null?void 0:b.value.address.toLowerCase())&&(b.value=y.value),y.value=f):(y.value&&(p.value="",f.address.toLowerCase()===(y==null?void 0:y.value.address.toLowerCase())&&(y.value=b.value)),b.value=f),g.value=!1},tt=$(20),V=$(0),R=$(null),at=$(!1),St=()=>{at.value||(clearInterval(R.value),V.value=0,at.value=!0,setTimeout(()=>{at.value=!1,kt()},1e3))},kt=()=>{R.value=setInterval(()=>{at.value=!1,V.value<tt.value&&(V.value+=1,V.value===tt.value&&St(),V.value===tt.value&&(V.value=0,at.value=!0))},1e3)};oe(()=>{kt(),window.addEventListener("click",()=>{C.value=!1})}),Ce(()=>{clearInterval(R.value)});const q=$(!0),Mt=()=>{if(q.value&&(!s.value||s.value==0)||!q.value&&(!p.value||p.value==0))return!1;q.value?p.value=ft(new T(s.value).mul(new T(P.value||0)).toString(),b.value.decimals):s.value=ft(new T(p.value).div(new T(P.value||0)).toString(),y.value.decimals)};st(s,Dt((f,h)=>{f&&f!==0&&q.value&&Mt(),f==""&&q.value&&(p.value="")},100)),st(P,Dt((f,h)=>{f&&f!==0&&q.value&&Mt(),f==""&&q.value&&(p.value="")},100)),st(p,Dt((f,h)=>{f&&f!==0&&!q.value&&Mt(),f==""&&!q.value&&(s.value="")},100)),st(()=>[y.value,b.value],([f,h])=>{f&&h&&Mt()},{immediate:!0});const pe=f=>{const h=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${b.value.decimals}})?).*$`);f.target.value=f.target.value.replace(h,"$1"),P.value=f.target.value},Vt=O(()=>{var et;const h=(et=ye.value.limitTokenMinAmountObj[y.value.address])==null?void 0:et.min_trade_amount;return new T(h||0).div(Math.pow(10,y.value.decimals)).toNumber()}),ge=O(()=>!y.value||!b.value?i("modal.selectTokenModalTitle"):P.value?s.value<Vt.value?`Minimum Order 5 ${y.value.symbol}`:!Number(s.value)&&!Number(p.value)?i("button.enterAmount"):s.value>d.value?i("button.insufficientBalance",{name:y.value.symbol}):"Place Limit Order":"Enter an price"),he=O(()=>!y.value||!b.value||!P.value||s.value<Vt.value||!Number(s.value)&&!Number(p.value)||s.value>d.value),Kt=vt(),ye=O(()=>Kt),fe=Bt(),{setTransactionTxid:be,setIsShowWaiting:Et,setIsShowSuccess:we,setIsShowRejected:qt,setTransactionDesc:Oe}=fe,Ht=$(!1),xt=ie("Sui"),$e=async()=>{const f=ct("Sui"),h=Date.parse(new Date().toString())+(Z(r.value)||n.value);try{Oe("Creating order"),Et(!0);const et={pay_coin_amount:s.value,rate:P.value,expired_ts:h,pay_coin_type:y.value.address,target_coin_type:b.value.address,pay_decimal:y.value.decimals,target_decimal:b.value.decimals};console.log("placeLimitOrder parmas",et);const gt=await f.placeLimitOrder(et),Ut=await xt.signAndExecuteTransactionBlock(c.value.currentWallet,gt),ut=xt.handleTx(Ut);if(ut&&ut.hash){be(ut.hash),Et(!1),we(!0),Ht.value=!1;const x={title:"Transaction",desc:"Order placed successfully",hash:ut.hash,icon:"icon-icon-Increased"};x.res=ut.res,xt.showTransitionPending(x),await xt.watchTransaction(x)&&setTimeout(()=>{xt.getAccount(c.value.address),Kt.getOrderList()},1e3)}else Et(!1),qt(!0)}catch(it){Et(!1),qt(!0),Ht.value=!1,console.log("trade-card openOrder error##",it)}};return(f,h)=>{var Ut,ut;const it=ne,et=Ie,gt=It;return l(),m("div",ys,[t("div",fs,[t("div",bs,[t("div",ws,[(l(),m(Y,null,lt(u,x=>t("div",{key:x,class:D(["trade-tab-item",S.value==x?"trade-tab-item-active":""]),onClick:Lt=>{var Ct,Yt;return x=="Swap"?f.$router.push(`/swap?fromCoin=${(Ct=a(y))==null?void 0:Ct.address}&toCoin=${(Yt=a(b))==null?void 0:Yt.address}`):S.value=x}},o(x),11,Os)),64))]),U(Pe,{loading:at.value,"auto-refresh-time":tt.value,countdown:V.value,onClickRefresh:St},null,8,["loading","auto-refresh-time","countdown"])]),t("div",$s,[t("div",Ss,[U(Xt,{modelValue:s.value,"onUpdate:modelValue":h[0]||(h[0]=x=>s.value=x),"input-value":s.value,"coin-symbol":a(y)?a(y).symbol:null,"coin-name":a(y)?a(y).name:null,balance:d.value,"coin-icon":a(y)?a(y).logo_url:"",address:a(y)?a(y).address:"","swap-direction":"From",onOnMax:h[1]||(h[1]=x=>v("fromCoin")),onOnHalf:h[2]||(h[2]=x=>_("fromCoin")),onOnInput:h[3]||(h[3]=x=>{s.value=x,q.value=!0}),onOnSelect:h[4]||(h[4]=x=>N("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),t("div",ks,[U(Xt,{modelValue:p.value,"onUpdate:modelValue":h[5]||(h[5]=x=>p.value=x),"input-value":p.value,havemax:!1,"coin-symbol":a(b)?a(b).symbol:null,"coin-name":a(b)?a(b).name:null,balance:w.value,"swap-direction":"To","coin-icon":a(b)?a(b).logo_url:"",address:a(b)?a(b).address:"",havehalf:!1,onOnInput:h[6]||(h[6]=x=>{p.value=x,q.value=!1}),onOnSelect:h[7]||(h[7]=x=>N("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),t("img",{class:D(A.value?"gang animationex":"gang"),src:Ue,alt:""},null,2),t("div",{class:"exchange sui-exchange",onClick:B},[(l(),m("svg",{class:D(A.value?"icon animationex":"icon"),"aria-hidden":"true"},Ls,2))])]),t("div",Cs,[t("div",Ts,[t("div",Is,[t("div",null,[W(" Price ("+o((Ut=a(y))==null?void 0:Ut.symbol)+" per "+o((ut=a(b))==null?void 0:ut.symbol)+") ",1),Ms]),Es]),t("div",Us,[U(it,{value:P.value,"onUpdate:value":h[8]||(h[8]=x=>P.value=x),"default-value":"3.987511",onOnInput:h[9]||(h[9]=()=>{q.value=!0}),onChange:pe},null,8,["value"])])]),t("div",{class:"sell-expires",onClick:h[10]||(h[10]=Te(x=>C.value=!C.value,["stop"]))},[t("div",Ps,[js,U(et,null,{title:nt(()=>[W("Please note: When a limit order expires, no cancellation fee is charged. In case of manually cancelling a limit order, a gas fee is charged at the time of signing the transaction.")]),default:nt(()=>[As]),_:1})]),t("div",Bs,[t("span",null,o(r.value),1),(l(),m("svg",{class:"icon","aria-hidden":"true",style:Gt(C.value?{transform:"rotate(180deg)"}:{})},Rs,4))]),t("div",{class:"expires-list",style:Gt(C.value?{display:"block"}:{})},[(l(),m(Y,null,lt(F,x=>t("div",{key:x,class:D(["expirer-item",x==r.value?"expirer-item-active":""]),onClick:Lt=>x=="Custom"?E.value=!0:r.value=x},o(x),11,Hs)),64))],4)])]),ot(t("div",Ds,[W(" Limit price is 12.75% lower than market, you are selling at a much lower rate. We recommend that you use "),t("span",{onClick:h[11]||(h[11]=x=>{var Lt,Ct;return f.$router.push(`/swap?fromCoin=${(Lt=a(y))==null?void 0:Lt.address}&toCoin=${(Ct=a(b))==null?void 0:Ct.address}`)})},"Cetus Swap"),W(" instead ")],512),[[Tt,P.value>5]])]),c.value&&c.value.address?(l(),J(gt,{key:0,disabled:he.value,class:"place-order-btn",loading:Ht.value,onClick:$e},{default:nt(()=>[W(o(ge.value),1)]),_:1},8,["disabled","loading"])):(l(),J(gt,{key:1,class:"place-order-btn",onClick:h[12]||(h[12]=x=>c.value.setIsShowWalletModal(!0))},{default:nt(()=>[W("Connect wallet")]),_:1})),E.value?(l(),J(hs,{key:2,onCloseModal:h[13]||(h[13]=x=>E.value=!1),onSendTime:j})):H("",!0),g.value?(l(),J(je,{key:3,"existing-coins":M.value,"last-select-coin":z.value,onOnSelect:pt,onOnClose:h[14]||(h[14]=x=>g.value=!1)},null,8,["existing-coins","last-select-coin"])):H("",!0)])}}});const Fs=X(zs,[["__scopeId","data-v-2671f74f"]]),_e=e=>(dt("data-v-2880c9e9"),e=e(),_t(),e),Ws={key:0,class:"no-data"},Js=_e(()=>t("img",{src:Ae,alt:""},null,-1)),Vs={key:1,class:"no-data"},Ks=_e(()=>t("img",{src:Be,alt:""},null,-1)),qs=Q({__name:"trade-no-data",props:["platform"],setup(e){const i=yt(),u=O(()=>i);return(S,s)=>{const p=It;return u.value&&u.value.address?(l(),m("div",Ws,[Js,t("span",null,o(e.platform=="orders"?"You don't have any open orders yet.":"You don't have any order history."),1)])):(l(),m("div",Vs,[Ks,U(p,{class:"connect-wallet",onClick:s[0]||(s[0]=L=>u.value.setIsShowWalletModal(!0))},{default:nt(()=>[W("Connect Wallet")]),_:1})]))}}});const ve=X(qs,[["__scopeId","data-v-2880c9e9"]]),Ys={class:"trade-info"},Gs={alt:""},Qs={alt:""},Xs=Q({__name:"trade-info",props:{order:{type:Object,default:()=>({})}},setup(e){return(i,u)=>{var s,p,L,c,d,w,v,_,k,M;const S=ae("image");return l(),m("div",Ys,[ot(t("img",Gs,null,512),[[S,(p=(s=e.order)==null?void 0:s.pay_coin_info)==null?void 0:p.logo_url]]),ot(t("img",Qs,null,512),[[S,(c=(L=e.order)==null?void 0:L.target_coin_info)==null?void 0:c.logo_url]]),W(" "+o(a(G)((d=e.order)==null?void 0:d.total_pay_amount))+" "+o((v=(w=e.order)==null?void 0:w.pay_coin_info)==null?void 0:v.symbol)+" → "+o((_=e.order)==null?void 0:_.total_buy_amount)+" "+o((M=(k=e.order)==null?void 0:k.target_coin_info)==null?void 0:M.symbol),1)])}}});const Rt=X(Xs,[["__scopeId","data-v-020b364c"]]),Jt=e=>(dt("data-v-5fb9836b"),e=e(),_t(),e),Zs={class:"trade-order-card-list"},ta={class:"order-info"},ea=Jt(()=>t("div",{class:"label"},"Price",-1)),sa={class:"text"},aa=Jt(()=>t("div",{class:"label"},"Filled size",-1)),na={class:"text"},oa=Jt(()=>t("div",{class:"label"},"Expires",-1)),la={class:"text"},ia=Q({__name:"trade-order-card",props:{pageList:{type:Object,default:()=>({})}},setup(e){return(i,u)=>{const S=It;return l(),m("div",Zs,[(l(!0),m(Y,null,lt(e.pageList,s=>{var p,L,c;return l(),m("div",{key:s.id,class:"trade-order-card"},[U(Rt,{order:s},null,8,["order"]),t("div",ta,[t("div",null,[ea,t("div",sa,o(s.rate)+" "+o((p=s==null?void 0:s.pay_coin_info)==null?void 0:p.symbol)+" per "+o((L=s==null?void 0:s.target_coin_info)==null?void 0:L.symbol),1)]),t("div",null,[aa,t("div",na,[W(o(a(G)(s==null?void 0:s.obtained_amount))+"/"+o(a(G)(s==null?void 0:s.totalBuyNum))+" "+o((c=s==null?void 0:s.target_coin_info)==null?void 0:c.symbol)+" ",1),t("span",null,"("+o(s==null?void 0:s.obtainedRatio)+"%)",1)])]),t("div",null,[oa,t("div",la,o(a(wt)(s.created_ts,""))+" (UTC)",1)])]),U(S,{class:"trade-cancel-btn",onClick:d=>a(Wt)(s)},{default:nt(()=>[W("Cancel")]),_:2},1032,["onClick"])])}),128))])}}});const ua=X(ia,[["__scopeId","data-v-5fb9836b"]]),ca=e=>(dt("data-v-7ae4516c"),e=e(),_t(),e),ra={class:"trade-orders"},da={key:0},_a=ca(()=>t("thead",null,[t("tr",null,[t("th",null,"Order Info"),t("th",null,"Price"),t("th",null,"Filled size"),t("th",null,"Expires"),t("th",null,"Action")])],-1)),va={key:4,class:"loading-box"},ma=Q({__name:"trade-orders",setup(e){const i=yt(),u=O(()=>i),S=vt(),s=O(()=>S),p=O(()=>s.value.limitOrderList),L=zt(),c=O(()=>L),d=O(()=>c.value.tokensObj);st(()=>u.value.address,A=>{A&&S.getOrderList()},{immediate:!0});const w=$(1),v=$(10),_=$([]),k=$([]),M=ct("Sui"),z=O(()=>s.value.orderListLoading),g=()=>{const A=v.value*w.value-v.value;let B=w.value*v.value;B=B>p.value.length?p.value.length:B;const F=p.value;if(console.log("trade-card updateOrderList tokenObj",d.value),F.length>0){const Z=F.filter((C,r)=>r>=A&&r<B).map(C=>{const r=d.value[C.pay_coin_type],E=d.value[C.target_coin_type];console.log(C,"order###"),console.log(r.decimals,"##pay_coin_info.decimals");const P=M.calculateRate(C.rate,r.decimals,E.decimals),n=new T(C.total_pay_amount).div(Math.pow(10,r.decimals)).toString(),j=new T(n).mul(P).toString();return{...C,pay_coin_info:r,target_coin_info:E,total_pay_amount:n,rate:P,totalBuyNum:j,obtainedRatio:ft(new T(C.obtained_amount).div(new T(j)).toString(),2)}});_.value=Z}k.value=F,S.setOrderNum(F.length),console.log("allList",k.value),console.log("pageList",_.value)},N=(A,B)=>{console.log(A,"page"),w.value=A};return st(()=>[p.value,w.value,d.value],([A,B,F])=>{A&&A.length>0&&F&&!Ft(F)?g():(_.value=[],k.value=[],S.setOrderNum(0))},{immediate:!0}),(A,B)=>{const F=It,Z=le,C=At;return l(),m("div",ra,[u.value&&u.value.address&&_.value&&_.value.length>0?(l(),m("table",da,[_a,t("tbody",null,[(l(!0),m(Y,null,lt(_.value,r=>{var E,P,n;return l(),m("tr",{key:r.id},[t("td",null,[U(Rt,{order:r},null,8,["order"])]),t("td",null,o(r==null?void 0:r.rate)+" "+o((E=r==null?void 0:r.pay_coin_info)==null?void 0:E.symbol)+" per "+o((P=r==null?void 0:r.target_coin_info)==null?void 0:P.symbol),1),t("td",null,[W(o(a(G)(r==null?void 0:r.obtained_amount))+"/"+o(a(G)(r==null?void 0:r.totalBuyNum))+" "+o((n=r==null?void 0:r.target_coin_info)==null?void 0:n.symbol)+" ",1),t("span",null,"("+o(r==null?void 0:r.obtainedRatio)+"%)",1)]),t("td",null,o(a(wt)(r==null?void 0:r.expire_ts,""))+" (UTC)",1),t("td",null,[U(F,{class:"trade-cancel-btn",onClick:j=>a(Wt)(r)},{default:nt(()=>[W("Cancel")]),_:2},1032,["onClick"])])])}),128))])])):H("",!0),u.value&&u.value.address&&_.value&&_.value.length>0?(l(),J(ua,{key:1,"page-list":_.value},null,8,["page-list"])):H("",!0),_.value&&_.value.length==0&&!z.value?(l(),J(ve,{key:2,platform:"orders"})):H("",!0),_.value&&_.value.length>0?(l(),m("div",{key:3,class:D(["pagination",_.value&&_.value.length>0&&z.value?"loading-pagination":""])},[U(Z,{current:w.value,"onUpdate:current":B[0]||(B[0]=r=>w.value=r),"page-size":v.value,simple:"",total:k.value&&k.value.length,onChange:N},null,8,["current","page-size","total"])],2)):H("",!0),_.value&&_.value.length==0&&z.value?(l(),m("div",va,[U(C)])):H("",!0),_.value&&_.value.length>0&&z.value?(l(),J(C,{key:5,class:"order-spin"})):H("",!0)])}}});const pa=X(ma,[["__scopeId","data-v-7ae4516c"]]),bt=e=>{switch(e){case"Running":return{class:"order-running",path:"#icon-icon_completed"};case"Completed":return{class:"order-running",path:"#icon-icon_completed"};case"Cancelled":return{class:"order-cancelled",path:"#icon-icon_cancelled"};default:return{class:"",path:""}}},rt=e=>{switch(e){case"OrderPlacedEvent":return{path:"#icon-tx_add1",class:"order-status-create",text:"Create"};case"OrderCanceledEvent":return{path:"#icon-tx_remove1",class:"order-status-cancel",text:"Cancel"};case"FlashLoanEvent":return{path:"#icon-tx_swap1",class:"order-status-trade",text:"Trade"};default:return{path:"",class:"",text:""}}},ga=vt(),K=$({}),me=(e,i)=>{K.value[i]?K.value[i]=!1:(K.value[i]=!0,ga.getLimitOrderLogs(e)),console.log(K.value,"##isShowPosition.value")},mt=e=>(dt("data-v-e37708af"),e=e(),_t(),e),ha={class:"history-card-list"},ya={class:"history-info"},fa=mt(()=>t("div",{class:"label"},"Limit Price",-1)),ba={class:"text"},wa=mt(()=>t("div",{class:"label"},"Expires",-1)),Oa={class:"text"},$a=mt(()=>t("div",{class:"label"},"Filled size",-1)),Sa={class:"text"},ka=mt(()=>t("span",null,"(0.00%)",-1)),xa=mt(()=>t("div",{class:"label"},"Status",-1)),La={class:"text"},Ca=["onClick"],Ta=["xlink:href"],Ia=mt(()=>t("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Ma=[Ia],Ea={class:"order-status"},Ua=["xlink:href"],Pa={class:"order-num"},ja={class:"create-ts"},Aa={class:"view-trans"},Ba=["href"],Na=mt(()=>t("span",null,"View Transaction",-1)),Ra=mt(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-link2"})],-1)),Ha=[Na,Ra],Da={key:1,class:"order-log-loading"},za=Q({__name:"trade-history-card",props:{pageList:{type:Object,default:()=>[]}},setup(e){const i=Bt(),u=O(()=>i),S=O(()=>u.value.currentExplorer),s=vt(),p=O(()=>s),L=O(()=>p.value.orderHistoryObj);return(c,d)=>{const w=At;return l(),m("div",ha,[(l(!0),m(Y,null,lt(e.pageList,(v,_)=>(l(),m("div",{key:v.expire_ts,class:"history-card-item"},[U(Rt,{order:v},null,8,["order"]),t("div",ya,[t("div",null,[fa,t("div",ba,o(v.rate)+" "+o(v.pay_coin_info.symbol)+" per "+o(v.target_coin_info.symbol),1)]),t("div",null,[wa,t("div",Oa,o(a(wt)(v==null?void 0:v.expire_ts,""))+" (UTC)",1)]),t("div",null,[$a,t("div",Sa,[W(o(a(G)(v.obtained_amount))+"/"+o(a(G)(v.balance))+" "+o(v.target_coin_info.symbol)+" ",1),ka])]),t("div",null,[xa,t("div",La,[t("div",{class:"order-status",onClick:k=>a(me)(v,_)},[(l(),m("svg",{class:D(["order-status-icon",a(bt)(v.status).class]),"aria-hidden":"true"},[t("use",{"xlink:href":a(bt)(v.status).path},null,8,Ta)],2)),t("span",{class:D(a(bt)(v.status).class)},o(v.status),3),(l(),m("svg",{class:D(["arrow-icon",a(K)[_]?"open-arrow":""]),"aria-hidden":"true"},Ma,2))],8,Ca)])])]),a(K)[_]&&L.value[v.id]?(l(!0),m(Y,{key:0},lt(L.value[v.id],k=>(l(),m("div",{key:k,class:"order-log"},[t("div",Ea,[(l(),m("svg",{class:D(["status-icon",a(rt)(k.type).class]),"aria-hidden":"true"},[t("use",{"xlink:href":a(rt)(k.type).path},null,8,Ua)],2)),t("span",{class:D(["text-status",a(rt)(k.type).class])},o(a(rt)(k.type).text),3)]),t("div",Pa,o(a(G)(k.parsedJson.total_pay_amount))+" "+o(v.pay_coin_info.symbol)+" → "+o(v.total_buy_amount)+" "+o(v.target_coin_info.symbol),1),t("div",ja,o(a(wt)(Number(k.timestampMs),""))+" (UTC) ",1),t("div",Aa,[t("a",{href:a(ue)(S.value,"tx",k.digest),target:"_blank"},Ha,8,Ba)])]))),128)):a(K)[_]&&!L.value[v.id]?(l(),m("div",Da,[U(w)])):H("",!0)]))),128))])}}});const Fa=X(za,[["__scopeId","data-v-e37708af"]]),$t=e=>(dt("data-v-6077c1d6"),e=e(),_t(),e),Wa={class:"trade-history"},Ja={key:0},Va=$t(()=>t("thead",null,[t("tr",null,[t("th",null,"Price"),t("th",null,"Limit Price"),t("th",null,"Expires"),t("th",null,"Filled size"),t("th",null,"Status")])],-1)),Ka=["onClick"],qa={class:"order-status"},Ya=["xlink:href"],Ga=$t(()=>t("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Qa=[Ga],Xa={class:"order-log"},Za={class:"order-log-num"},tn=["xlink:href"],en={key:0},sn={key:1},an=$t(()=>t("td",null,null,-1)),nn=$t(()=>t("td",null,null,-1)),on={class:"create-ts"},ln={class:"view-trans"},un=["href"],cn=$t(()=>t("span",null,"View Transaction",-1)),rn=$t(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-link2"})],-1)),dn=[cn,rn],_n={style:{height:"4px",background:"unset"}},vn={class:"tr-line",style:{height:"24px",background:"unset"}},mn={key:1,class:"order-log"},pn={colspan:"7"},gn={class:"order-log-loading"},hn={key:4,class:"loading-box"},yn=Q({__name:"trade-history",setup(e){const i=Bt(),u=O(()=>i),S=O(()=>u.value.currentExplorer),s=vt(),p=O(()=>s),L=O(()=>p.value.limitOrderHistoryList),c=O(()=>p.value.orderHistoryObj),d=yt(),w=O(()=>d),v=zt(),_=O(()=>v),k=O(()=>_.value.tokensObj);st(()=>w.value.address,C=>{C&&s.getOrderList()},{immediate:!0});const M=$(1),z=$(10),g=$([]),N=$([]),A=ct("Sui"),B=O(()=>p.value.orderListLoading),F=()=>{const C=z.value*M.value-z.value;let r=M.value*z.value;r=r>L.value.length?L.value.length:r;const E=L.value;if(console.log("trade-card updateOrderList tokenObj",k.value),E.length>0){const P=E.filter((n,j)=>j>=C&&j<r).map(n=>{const j=k.value[n.pay_coin_type],pt=k.value[n.target_coin_type];console.log(n,"order###"),console.log(j.decimals,"##pay_coin_info.decimals");const tt=A.calculateRate(n.rate,j.decimals,pt.decimals),V=new T(n.total_pay_amount).div(Math.pow(10,j.decimals)).toString(),R=new T(V).mul(tt).toString();return{...n,pay_coin_info:j,target_coin_info:pt,total_pay_amount:V,rate:tt,totalBuyNum:R,obtainedRatio:ft(new T(n.obtained_amount).div(new T(R)).toString(),2)}});g.value=P}N.value=E,s.setHistoryNum(E.length),console.log("allList",N.value),console.log("pageList",g.value)},Z=(C,r)=>{console.log(C,"page"),M.value=C};return st(()=>[L.value,M.value,k.value],([C,r,E])=>{C&&C.length>0&&E&&!Ft(E)?F():(g.value=[],N.value=[],s.setHistoryNum(0))},{immediate:!0}),(C,r)=>{const E=At,P=le;return l(),m("div",Wa,[w.value&&w.value.address&&g.value&&g.value.length>0?(l(),m("table",Ja,[Va,t("tbody",null,[(l(!0),m(Y,null,lt(g.value,(n,j)=>{var pt,tt,V;return l(),m(Y,{key:n.id},[t("tr",{class:D(["order",j!==g.value.length-1?"order-border":""]),onClick:R=>a(me)(n,j)},[t("td",null,[U(Rt,{order:n},null,8,["order"])]),t("td",null,o(n==null?void 0:n.rate)+" "+o((pt=n==null?void 0:n.pay_coin_info)==null?void 0:pt.symbol)+" per "+o((tt=n==null?void 0:n.target_coin_info)==null?void 0:tt.symbol),1),t("td",null,o(a(wt)(n==null?void 0:n.expire_ts,""))+" (UTC)",1),t("td",null,[W(o(a(G)(n==null?void 0:n.obtained_amount))+"/"+o(a(G)(n==null?void 0:n.totalBuyNum))+" "+o((V=n==null?void 0:n.target_coin_info)==null?void 0:V.symbol)+" ",1),t("span",null,"("+o(n==null?void 0:n.obtainedRatio)+"%)",1)]),t("td",null,[t("div",qa,[(l(),m("svg",{class:D(["order-status-icon",a(bt)(n.status).class]),"aria-hidden":"true"},[t("use",{"xlink:href":a(bt)(n.status).path},null,8,Ya)],2)),t("span",{class:D(a(bt)(n.status).class)},o(n.status),3),(l(),m("svg",{class:D(["arrow-icon",a(K)[j]?"open-arrow":""]),"aria-hidden":"true"},Qa,2))])])],10,Ka),a(K)[j]&&c.value[n.id]?(l(),m(Y,{key:0},[(l(!0),m(Y,null,lt(c.value[n.id],R=>{var at,St,kt;return l(),m(Y,{key:R},[ot(t("tr",Xa,[t("td",null,[t("div",Za,[(l(),m("svg",{class:D(["status-icon",a(rt)(R.type).class]),"aria-hidden":"true"},[t("use",{"xlink:href":a(rt)(R.type).path},null,8,tn)],2)),t("span",{class:D(["text-status",a(rt)(R.type).class])},o(a(rt)(R.type).text),3),R.type=="FlashLoanEvent"?(l(),m("span",en,o(a(G)(R.parsedJson.total_pay_amount))+" "+o((at=n==null?void 0:n.pay_coin_info)==null?void 0:at.symbol)+" → "+o(n==null?void 0:n.total_buy_amount)+" "+o((St=n==null?void 0:n.target_coin_info)==null?void 0:St.symbol),1)):(l(),m("span",sn,o(a(G)(R.parsedJson.total_pay_amount))+" "+o((kt=n==null?void 0:n.pay_coin_info)==null?void 0:kt.symbol),1))])]),an,nn,t("td",null,[t("span",on,o(a(wt)(Number(R.timestampMs),""))+" (UTC)",1)]),t("td",null,[t("div",ln,[t("a",{href:a(ue)(S.value,"tx",R.digest),target:"_blank"},dn,8,un)])])],512),[[Tt,a(K)[j]]]),ot(t("tr",_n,null,512),[[Tt,a(K)[j]]])],64)}),128)),ot(t("tr",vn,null,512),[[Tt,a(K)[j]]])],64)):a(K)[j]&&!c.value[n.id]?(l(),m("tr",mn,[t("td",pn,[t("div",gn,[U(E)])])])):H("",!0)],64)}),128))])])):H("",!0),w.value&&w.value.address&&g.value&&g.value.length>0?(l(),J(Fa,{key:1,"page-list":g.value},null,8,["page-list"])):H("",!0),g.value&&g.value.length==0&&!B.value?(l(),J(ve,{key:2,platform:"history"})):H("",!0),g.value&&g.value.length>0?(l(),m("div",{key:3,class:D(["pagination",g.value&&g.value.length>0&&B.value?"loading-pagination":""])},[U(P,{current:M.value,"onUpdate:current":r[0]||(r[0]=n=>M.value=n),"page-size":z.value,simple:"",total:N.value&&N.value.length,onChange:Z},null,8,["current","page-size","total"])],2)):H("",!0),g.value&&g.value.length==0&&B.value?(l(),m("div",hn,[U(E)])):H("",!0),g.value&&g.value.length>0&&B.value?(l(),J(E,{key:5,class:"order-spin"})):H("",!0)])}}});const fn=X(yn,[["__scopeId","data-v-6077c1d6"]]),bn={class:"trade-order"},wn={class:"order-or-history"},On={class:"tab-list"},$n=["onClick"],Sn=Q({__name:"trade-record",setup(e){const i=$("orders"),u=[{id:"orders",name:"Open Orders"},{id:"history",name:"Order History"}],S=yt(),s=O(()=>S),p=vt(),L=O(()=>p),c=O(()=>L.value.orderNum),d=O(()=>L.value.historyNum);return(w,v)=>(l(),m("div",bn,[t("div",wn,[t("div",On,[(l(),m(Y,null,lt(u,_=>t("div",{key:_.id,class:D(["tab-item",i.value==_.id?"tab-item-active":""]),onClick:k=>i.value=_.id},[W(o(_.name)+" ",1),ot(t("div",{class:"tab-num"},o(i.value=="orders"?c.value:d.value),513),[[Tt,i.value==_.id&&s.value&&s.value.address]])],10,$n)),64))]),i.value=="orders"&&s.value&&s.value.address?(l(),m("div",{key:0,class:"clear-all",onClick:v[0]||(v[0]=_=>a(Wt)({},!0))},"Clear All")):H("",!0)]),i.value=="orders"?(l(),J(pa,{key:0})):(l(),J(fn,{key:1}))]))}});const kn=X(Sn,[["__scopeId","data-v-cb324801"]]),xn={class:"trade-container"},Ln={class:"trade-content"},Cn=Q({__name:"trade",setup(e){const i=vt();return oe(()=>{i.getTokenList(),i.getPoolList(),i.getTokenMinAmount()}),(u,S)=>(l(),m("div",xn,[t("div",Ln,[U(rs),U(Fs)]),U(kn)]))}});const qn=X(Cn,[["__scopeId","data-v-b55b7bc0"]]);export{qn as default};
