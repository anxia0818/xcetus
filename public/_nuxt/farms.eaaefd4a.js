import{m as To,e as jo,s as J,a as W,u as _o,d as no,o as Eo,c as M,k as vo}from"./pool.f22676bb.js";import{a as K,l as c,r as H,e as X,o as n,f as t,h as s,v as b,u as y,c as L,w as R,B as $o,j as A,p as ao,k as io,i as P,s as Lo,t as to,x as N,b as Ro,A as go,F as V,E as so,P as rs,q as bo,z as Po,N as Jo,M as Mo,S as ds,H as cs,Q as us}from"./entry.a472e018.js";import{a as lo,u as Co}from"./sha256.06e8e27c.js";import{u as ro}from"./farms.ba0d2db1.js";import{R as qo}from"./farms-range.44b472d8.js";import{_ as zo}from"./apr-tips.39a71b32.js";import{i as Ao}from"./import-icon.de3e6c66.js";/* empty css              *//* empty css              *//* empty css              */import{p as Qo}from"./precision.a7a6c57b.js";import{_ as Go}from"./img-connect-wallet_2x.ab9bea29.js";import{_ as Ko}from"./img-no-Positions_2x.6440cc76.js";import{_ as ms}from"./upgrade-loading.c0eb3c3a.js";import"./decimal.0bdeb344.js";import"./icon_rewards_2x.c7ef16fd.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const ps=K({setup(){const o=lo(),l=c(()=>o),h=ro(),u=c(()=>h),f=c(()=>u.value.totalRwadrdUsd),a=c(()=>u.value.farmsPositionList),i=c(()=>u.value.farmsAllPositionLoading),d=Co(),I=To("Sui"),v=jo("Sui"),{setIsShowSuccess:_,setIsShowRejected:g,setIsShowWaiting:S,setTransactionDesc:C,setTransactionTxid:e}=d,p=H(!1);return{wallet:l,farms:u,totalRwadrdUsd:f,sFixD:J,claimAllPoolReward:async eo=>{p.value=!0,console.log(a.value,"farmsRewardObj###");const oo=[];a.value.forEach(B=>{console.log(eo,B,"#position"),B.positionSource=="farming"&&oo.push({pool_id:B.pool_id,position_nft_id:B.id})}),console.log(JSON.stringify(oo),"##params"),e(""),C("Claim Rewards"),S(!0);try{const B=await I.batchHarvest(oo),z=await l.value.currentWallet.signAndExecuteTransactionBlock(B);console.log("0221###sui swap res###",z);let U=v.handleTx(z);if(U&&U.hash){e(U.hash),S(!1),_(!0);let F={res:U.res,title:"Claim",hash:U.hash};v.showTransitionPending(F),await v.watchTransaction(F)&&setTimeout(()=>{h.getFarmsPoolList()},4e3)}else S(!1),g(!0);p.value=!1}catch(B){console.log("Claim all error",B),S(!1),g(!0),p.value=!1}},loading:p,addCommom:W,farmsAllPositionLoading:i}}});const Wo=o=>(ao("data-v-0ce47de4"),o=o(),io(),o),_s={class:"farms-banner-bg"},fs={class:"farms-banner"},hs={class:"farms-banner-center"},vs=Wo(()=>s("div",{class:"title"},"Farms",-1)),gs=Wo(()=>s("div",{class:"desc"},"Stake Liquidity position to earn more rewards.",-1)),bs={class:"claim-rewards"},$s={class:"claim-title"},ws=Wo(()=>s("span",null,"Claimed Rewards",-1)),ys={key:0},Is={key:1},ks={class:"claim-content"};function Ss(o,l,h,u,f,a){const i=$o;return n(),t("div",_s,[s("div",fs,[s("div",hs,[vs,gs,s("div",bs,[s("div",$s,[ws,o.wallet.address?(n(),t("span",ys,b(Number(o.totalRwadrdUsd)>0&&Number(o.totalRwadrdUsd)<.01?"<$0.01":`$${("addCommom"in o?o.addCommom:y(W))(("sFixD"in o?o.sFixD:y(J))(o.totalRwadrdUsd||0,2))}`),1)):(n(),t("span",Is,"--"))]),s("div",ks,[o.wallet.address?(n(),L(i,{key:0,class:"claim-btn",loading:o.loading,disabled:Number(o.totalRwadrdUsd)==0||o.farmsAllPositionLoading,onClick:o.claimAllPoolReward},{default:R(()=>[A("Claim All")]),_:1},8,["loading","disabled","onClick"])):(n(),L(i,{key:1,class:"claim-btn",onClick:l[0]||(l[0]=d=>o.wallet.setIsShowWalletModal(!0))},{default:R(()=>[A("Connect")]),_:1}))])])])])])}const Xo=X(ps,[["render",Ss],["__scopeId","data-v-0ce47de4"]]),Ps=K({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=H(!0);return{sFixD:J,direct:o}}});const Ts=o=>(ao("data-v-14f67ada"),o=o(),io(),o),js={class:"valid-range"},Ls=Ts(()=>s("div",{class:"title"},"Valid Range",-1));function Cs(o,l,h,u,f,a){const i=qo;return n(),t("div",js,[Ls,P(i,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const Us=X(Ps,[["render",Cs],["__scopeId","data-v-14f67ada"]]),Os=K({props:{poolInfo:{type:Object,default:()=>({})}},setup(){return{}}});const Rs={class:"pool"},As={class:"pool-info"},Fs={class:"token-logo"},Ds={alt:""},Ns={alt:""},Bs={class:"token-symbol"},Es={class:"symbol"},Ms={class:"fee-rate"};function qs(o,l,h,u,f,a){var I,v,_,g;const i=Us,d=Lo("image");return n(),t("div",Rs,[s("div",As,[s("div",Fs,[to(s("img",Ds,null,512),[[d,(I=o.poolInfo.coinA)==null?void 0:I.logo_url]]),to(s("img",Ns,null,512),[[d,(v=o.poolInfo.coinB)==null?void 0:v.logo_url]])]),s("div",Bs,[s("div",Es,b((_=o.poolInfo.coinA)==null?void 0:_.symbol)+" - "+b((g=o.poolInfo.coinB)==null?void 0:g.symbol),1),s("div",Ms,b(o.poolInfo.fee),1)])]),P(i,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const Yo=X(Os,[["render",qs],["__scopeId","data-v-c027f63c"]]),Ws=K({props:{currentTab:{type:String,default:""},rewardInfo:{type:Object,default:()=>({})}},setup(){const o=_o(),l=c(()=>o);return{sFixD:J,addCommom:W,getCoinIcon:u=>{var f;return((f=l.value.tokensObj[u])==null?void 0:f.logo_url)||Ao("/image/coins/sui-unknown.png")}}}});const Vs={key:0,class:"rewards-day"},Hs={class:"rewards-day-box"},Js={alt:""};function zs(o,l,h,u,f,a){const i=Lo("image");return o.rewardInfo.allocate_point>0||o.currentTab=="Ended"?(n(),t("div",Vs,[s("div",null,[s("div",Hs,[to(s("img",Js,null,512),[[i,o.getCoinIcon(o.rewardInfo.reward_coin)]]),s("span",null,b(("addCommom"in o?o.addCommom:y(W))(("sFixD"in o?o.sFixD:y(J))(o.rewardInfo.emission_per_day,4))),1)])])])):N("",!0)}const Zo=X(Ws,[["render",zs],["__scopeId","data-v-416b96fb"]]),Qs=K({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){console.log(o.positionInfo,"props.positionInfo");const l=_o(),h=c(()=>l);return{addCommom:W,decimalUi:no,fixD:Eo,getCoinIcon:f=>{var a;return((a=h.value.tokensObj[f])==null?void 0:a.logo_url)||Ao("/image/coins/sui-unknown.png")}}}});const Gs={class:"hover-rewarder"},Ks={class:"rewarder-info"},Xs={class:"left-rewarder"},Ys={alt:""},Zs={class:"right-rewarder"},xs={class:"amount"},oe={key:0,class:"amount-usd"},se={key:1,class:"amount-usd"},ee={class:"rewarder-info"},ne={class:"left-rewarder"},te={alt:""},ae={class:"right-rewarder"},ie={class:"amount"},le={key:0,class:"amount-usd"},re={key:1,class:"amount-usd"};function de(o,l,h,u,f,a){const i=Lo("image");return n(),t("div",Gs,[s("div",Ks,[s("div",Xs,[to(s("img",Ys,null,512),[[i,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinB.address:o.positionInfo.coinA.address)]]),s("span",null,b(o.positionInfo.needReverse?o.positionInfo.coinB.symbol:o.positionInfo.coinA.symbol),1)]),s("div",Zs,[s("div",xs,b(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:y(W))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountB,o.positionInfo.coinB.decimals)):("addCommom"in o?o.addCommom:y(W))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountA,o.positionInfo.coinA.decimals))),1),o.positionInfo.needReverse?(n(),t("div",se,b(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("fixD"in o?o.fixD:y(Eo))(o.positionInfo.amountBUsd,2):"<$0.01"),1)):(n(),t("div",oe,b(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("fixD"in o?o.fixD:y(Eo))(o.positionInfo.amountAUsd,2):"<$0.01"),1))])]),s("div",ee,[s("div",ne,[to(s("img",te,null,512),[[i,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinA.address:o.positionInfo.coinB.address)]]),s("span",null,b(o.positionInfo.needReverse?o.positionInfo.coinA.symbol:o.positionInfo.coinB.symbol),1)]),s("div",ae,[s("div",ie,b(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:y(W))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountA,o.positionInfo.coinA.decimals)):("addCommom"in o?o.addCommom:y(W))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountB,o.positionInfo.coinB.decimals))),1),o.positionInfo.needReverse?(n(),t("div",re,b(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("addCommom"in o?o.addCommom:y(W))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountAUsd,2)):"<$0.01"),1)):(n(),t("div",le,b(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("addCommom"in o?o.addCommom:y(W))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountBUsd,2)):"<$0.01"),1))])])])}const xo=X(Qs,[["render",de],["__scopeId","data-v-d01301e5"]]),ce=K({components:{FarmsPositionAmountTips:xo},props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const l=lo(),h=c(()=>l);console.log(o.positionInfo,"positionInfo#");const u=ro(),f=c(()=>u),a=jo("Sui"),i=To("Sui"),d=H(!1),I=Co();c(()=>I);const v=Ro(),{setIsShowSuccess:_,setIsShowRejected:g,setIsShowWaiting:S,setTransactionDesc:C,setTransactionTxid:e}=I,p=async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,e(""),C(`Stake ${o.positionInfo.name}`),S(!0);const $={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},O=o.positionInfo.farmsPoolId;try{const q=await i.farmsDeposit($,O),Q=await h.value.currentWallet.signAndExecuteTransactionBlock(q);console.log("0221###sui swap res###",Q);let D=a.handleTx(Q);if(D&&D.hash){e(D.hash),S(!1),_(!0);let Y={res:D.res,title:"Staked",hash:D.hash};a.showTransitionPending(Y),await a.watchTransaction(Y)&&setTimeout(()=>{u.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else S(!1),g(!0)}catch(q){console.log("farmsDeposit error",q),S(!1),g(!0),d.value=!1}},G=async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,e(""),C(`Unstake ${o.positionInfo.name}`),S(!0);const $=o.positionInfo.farmsPoolId,O=o.positionInfo.id;try{const q=await i.farmsWithdraw($,O),Q=await h.value.currentWallet.signAndExecuteTransactionBlock(q);console.log("0221###sui swap res###",Q);let D=a.handleTx(Q);if(console.log(D,"unStaketx##"),D&&D.hash){e(D.hash),S(!1),_(!0);let Y={res:D.res,title:"Unstaked",hash:D.hash};a.showTransitionPending(Y),await a.watchTransaction(Y)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),u.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else S(!1),g(!0)}catch(q){console.log("farmsDeposit error",q),S(!1),g(!0),d.value=!1}},eo=async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,e(""),C("Claim rewards"),S(!0);const $={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const O=await i.harvestFarms($),q=await h.value.currentWallet.signAndExecuteTransactionBlock(O);console.log("0221###sui swap res###",q);let Q=a.handleTx(q);if(Q&&Q.hash){e(Q.hash),S(!1),_(!0);let D={title:"Claim",res:Q.res,hash:Q.hash};a.showTransitionPending(D),await a.watchTransaction(D)&&setTimeout(()=>{u.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else S(!1),g(!0);d.value=!1}catch(O){console.log("farmsDeposit error",O),S(!1),g(!0),d.value=!1}},oo=c(()=>f.value.farmsRewardObj),B=_o(),z=c(()=>B),U=c(()=>f.value.farmsLoadingObj);return{sFixD:J,stake:p,loading:d,unStake:G,router:v,claim:eo,farmsRewardObj:oo,getCoinIcon:$=>{var O;return((O=z.value.tokensObj[$])==null?void 0:O.logo_url)||Ao("/image/coins/sui-unknown.png")},toPositionDetails:$=>{console.log("toPositionDetails:",$),$.positionSource=="clmm"?v.push(`/new-position-detail?collect=${$.collectionName}&&token=${$.tokenName}&&address=${$.pool}&pos=${$.pos_object_id}`):v.push(`/new-position-detail?position_nft_id=${$.id}&positionSource=farming`)},farmsLoadingObj:U}}}),os=""+globalThis.__publicAssetsURL("sui-image/position-active.png");const Fo=o=>(ao("data-v-4eb3a3a3"),o=o(),io(),o),ue={class:"farms-position-item"},me=Fo(()=>s("thead",null,[s("tr",null,[s("th"),s("th",null,"Liquidity"),s("th",null,"Earnings"),s("th")])],-1)),pe={class:"position-info"},_e={key:0,class:"status-bg"},fe=Fo(()=>s("img",{src:os,alt:""},null,-1)),he=[fe],ve={class:"status-text"},ge={class:"name-range"},be=Fo(()=>s("span",null,"Details",-1)),$e=Fo(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),we=[be,$e],ye={class:"liquidity"},Ie={class:"rewards-day-box"},ke={alt:""},Se={key:1,class:"rewards-day"},Pe={class:"action-btn"};function Te(o,l,h,u,f,a){const i=qo,d=xo,I=$o,v=rs,_=Lo("image");return n(),t("div",ue,[s("table",null,[me,s("tbody",null,[s("tr",null,[s("td",null,[s("div",pe,[s("div",{class:go(["position-status",o.positionInfo.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionInfo.positionStatus=="Active"?(n(),t("div",_e,he)):N("",!0),s("div",ve,b(o.positionInfo.positionStatus),1)],2),s("div",ge,[s("span",null,b(o.positionInfo.name),1),P(i,{"pool-info":o.positionInfo},null,8,["pool-info"])]),s("div",{class:"details",onClick:l[0]||(l[0]=g=>o.toPositionDetails(o.positionInfo))},we)])]),s("td",null,[s("div",ye,[P(d,{"position-info":o.positionInfo},null,8,["position-info"]),s("span",null,b(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("sFixD"in o?o.sFixD:y(J))(o.positionInfo.positionUSD,2)}`),1)])]),s("td",null,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),t(V,{key:0},so(o.positionInfo.rewards,g=>(n(),t("div",{key:g.rewarder_type,class:"rewards-day"},[s("div",null,[s("div",Ie,[to(s("img",ke,null,512),[[_,o.getCoinIcon(g.rewarder_type)]]),s("span",null,b(g.rewarderAmount),1)])])]))),128)):(n(),t("div",Se,"0"))]),s("td",null,[s("div",Pe,[o.positionInfo.positionSource=="clmm"?(n(),t(V,{key:0},[o.positionInfo&&o.positionInfo.positionStatus!=="Active"?(n(),L(v,{key:0},{title:R(()=>[A("Farming rewards are only available for active positions.")]),default:R(()=>[P(I,{class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:R(()=>[A("Stake")]),_:1},8,["loading","disabled","onClick"])]),_:1})):(n(),L(I,{key:1,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:R(()=>[A("Stake")]),_:1},8,["loading","disabled","onClick"]))],64)):(n(),L(I,{key:1,class:"unstake-btn",onClick:o.unStake},{default:R(()=>[A("Unstake")]),_:1},8,["onClick"])),o.positionInfo.positionSource=="clmm"?(n(),L(I,{key:2,class:"claim-btn",disabled:!0},{default:R(()=>[A("↑ Claim")]),_:1})):(n(),L(I,{key:3,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0,onClick:o.claim},{default:R(()=>[A("↑ Claim")]),_:1},8,["disabled","onClick"]))])])])])])])}const ss=X(ce,[["render",Te],["__scopeId","data-v-4eb3a3a3"]]),je=K({props:{noDataImg:{type:String,default:""},desc:{type:String,default:""},type:{type:String,default:""},addLiquidityUrl:{type:String,default:""}},setup(){return{walletStore:lo()}}});const Le={class:"no-data"},Ce=["src"],Ue={key:0,class:"desc"};function Oe(o,l,h,u,f,a){const i=$o;return n(),t("div",Le,[s("img",{src:o.noDataImg,alt:""},null,8,Ce),o.desc?(n(),t("div",Ue,b(o.desc),1)):N("",!0),o.type=="addLiquidity"?(n(),L(i,{key:1,class:"add-liquidity-btn",onClick:l[0]||(l[0]=d=>o.addLiquidityUrl?o.$router.push(o.addLiquidityUrl):"")},{default:R(()=>[A("Add Liquidity")]),_:1})):N("",!0),o.type=="connectWallet"?(n(),L(i,{key:2,class:"add-liquidity-btn",onClick:l[1]||(l[1]=d=>o.walletStore.setIsShowWalletModal(!0))},{default:R(()=>[A("Connect Wallet")]),_:1})):N("",!0)])}const es=X(je,[["render",Oe],["__scopeId","data-v-130f9462"]]),Re=K({components:{FarmsPositionItem:ss},props:{currentTab:{type:String,default:""},sortValue:{type:String,default:"APR"}},setup(o){const l=H({}),h=lo(),u=c(()=>h),f=ro(),a=c(()=>f),i=c(()=>(console.log(a.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?u.value.address?a.value.myFarmsPoolList:[]:o.currentTab=="Ended"?a.value.farmsPoolList.filter(w=>w.status=="Ended"):a.value.farmsPoolList.filter(w=>w.status=="Live"))),d=Co(),I=c(()=>d),v=c(()=>I.value.addressLpTokens),_=H([]),g=w=>{const T=i.value.map(r=>{const{stable_farming:m}=v.value[r.clmm_pool_id];return{...r,apr:m.apr,tvl:m.tvl}});w=="APR"?_.value=T.sort((r,m)=>m.apr-r.apr):_.value=T.sort((r,m)=>m.tvl-r.tvl),console.log(_.value,"##farmsPoolList.value")};bo(()=>[i.value,o.sortValue,v.value],([w,T,r])=>{console.log(T,"sortValue326"),w&&w.length>0&&T&&r&&!M(r)&&g(T)},{immediate:!0});const S=w=>{l.value[w.clmm_pool_id]?l.value[w.clmm_pool_id]=!1:(l.value[w.clmm_pool_id]=!0,console.log("执行了吗"),f.getPositionByPool(u.value.address,w.clmm_pool_id,w.id))},C=c(()=>a.value.farmsPositionObj),e=c(()=>(console.log(a.value.farmsLoadingObj,"##farms.value.farmsLoadingObj"),a.value.farmsLoadingObj)),p=c(()=>a.value.farmsUserUsd),G=c(()=>(console.log(a.value.farmsRewardObj,"##farmsRewardObj"),a.value.farmsRewardObj)),eo=c(()=>a.value.farmsPositionList),oo=c(()=>a.value.farmsAllPositionLoading),B=Ro(),z=To("Sui"),U=jo("Sui"),{setIsShowSuccess:F,setIsShowRejected:E,setIsShowWaiting:$,setTransactionDesc:O,setTransactionTxid:q}=d,Q=async w=>{console.log(eo.value,"farmsRewardObj###");const T=[];eo.value.forEach(r=>{console.log(w,r,"#position"),w==r.clmm_pool_id&&T.push({pool_id:r.pool_id,position_nft_id:r.id})}),console.log(JSON.stringify(T),"##params"),q(""),O("Claim rewards"),$(!0);try{const r=await z.batchHarvest(T),m=await u.value.currentWallet.signAndExecuteTransactionBlock(r);console.log("0221###sui swap res###",m);let k=U.handleTx(m);if(k&&k.hash){q(k.hash),$(!1),F(!0);let j={res:k.res,title:"Claim",hash:k.hash};U.showTransitionPending(j),await U.watchTransaction(j)&&setTimeout(()=>{f.getFarmsPoolList()},4e3)}else $(!1),E(!0)}catch(r){console.log("Claim all error",r),$(!1),E(!0)}},D=_o(),Y=c(()=>D),fo=c(()=>(console.log(Y.value.poolsObj,"##pools.value.poolsObj"),Y.value.poolsObj)),wo=c(()=>Y.value.tokensObj),uo=H({}),No=(w,T)=>w&&T?Qo.plus(vo(w),vo(T)):w||0,mo=w=>{let T=0;return w&&w.forEach(r=>{T+=vo(String(r))}),String(no(String(T),2))},Bo=(w,T,r)=>{console.log(w,"poolsObj##473"),Object.keys(w).forEach(m=>{var Z,po,ho;const k=(Z=T[m])==null?void 0:Z.apr_7day,j=No((po=T[m])==null?void 0:po.apr_7day,mo((ho=T[m])==null?void 0:ho.rewarder_apr));uo.value[m]={...w[m],apr:String(k).replace("%",""),aprTotal:j},uo.value[m].rewards=[],w[m].rewarderInfo.forEach((Uo,yo)=>{var ko,So;const Oo=(ko=r[Uo.coinAddress])==null?void 0:ko.symbol,Io=(So=T[m])==null?void 0:So.rewarder_apr[yo];console.log(Oo,Io,"getRewardInfo:"),console.log(w[m],"## poolsObj[key]"),uo.value[m].rewards.push({symbol:Oo,rewarderApr:Io,rewarder_display:w[m][`rewarder_display${yo+1}`]})})}),console.log(uo.value,"##rewardInfoObj")};return bo(()=>[fo.value,v.value,wo.value],([w,T,r])=>{w&&!M(w)&&T&&!M(T)&&r&&!M(r)&&Bo(w,T,r)},{immediate:!0}),console.log(v.value,"addressLpTokens:"),{wallet:u,walletStore:h,farmsPoolList:_,openMore:S,openMoreObj:l,checkNullObj:M,router:B,farmsPositionObj:C,farmsLoadingObj:e,farmsUserUsd:p,sFixD:J,farmsRewardObj:G,claimPoolReward:Q,farmsAllPositionLoading:oo,addCommom:W,addressLpTokens:v,poolsObj:fo,rewardInfoObj:uo}}});const co=o=>(ao("data-v-108e4536"),o=o(),io(),o),Ae={class:"farms-table"},Fe=co(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")]),s("tr",{style:{height:"4px"}})],-1)),De={key:0},Ne=["onClick"],Be={class:"staked-tvl"},Ee={class:"apr"},Me={class:"apr-hover-box"},qe={class:"farms-reward-box"},We={key:0,class:"my-staked"},Ve={key:0,class:"my-staked-loading"},He={key:0,class:"position-usd"},Je={key:1,class:"position-usd"},ze={key:2,class:"position-usd"},Qe={key:3,class:"position-num"},Ge={key:1,class:"my-staked"},Ke=co(()=>s("div",{class:"position-usd"},"--",-1)),Xe=[Ke],Ye={class:"earned"},Ze={key:0,class:"my-staked-loading"},xe={key:0,class:"ratio-bg"},on=co(()=>s("div",{class:"ratio"},null,-1)),sn=[on],en={key:1},nn={key:2},tn={key:3},an={key:2},ln={class:"actions"},rn={class:"actions-btn"},dn=["onClick"],cn=co(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),un=[cn],mn={colspan:"7",style:{padding:"0 16px 16px"}},pn={key:0,class:"farm-position-list"},_n={key:0,class:"farm-position-loading"},fn={key:1,class:"farm-position-list"},hn=co(()=>s("tr",{style:{height:"8px"}},null,-1)),vn={key:1},gn={colspan:"7"},bn={key:0,class:"no-data"},$n=co(()=>s("img",{src:Go,alt:""},null,-1)),wn={key:1,class:"no-data"},yn=co(()=>s("img",{src:Ko,alt:""},null,-1)),In=co(()=>s("span",null,"No farms found",-1)),kn=[yn,In];function Sn(o,l,h,u,f,a){const i=Yo,d=zo,I=Zo,v=Mo,_=$o,g=ds,S=ss,C=es;return n(),t("div",Ae,[s("table",null,[Fe,o.farmsPoolList&&o.farmsPoolList.length>0?(n(),t("tbody",De,[(n(!0),t(V,null,so(o.farmsPoolList,e=>(n(),t(V,{key:e.id},[s("tr",{onClick:p=>o.openMore(e)},[s("td",null,[P(i,{"pool-info":e},null,8,["pool-info"])]),s("td",null,[s("div",Be," $"+b(("addCommom"in o?o.addCommom:y(W))(o.addressLpTokens&&o.addressLpTokens[e.clmm_pool_id]&&o.addressLpTokens[e.clmm_pool_id].stable_farming&&o.addressLpTokens[e.clmm_pool_id].stable_farming.tvl,2)),1)]),s("td",null,[s("div",Ee,[s("div",Me,[!("checkNullObj"in o?o.checkNullObj:y(M))(o.rewardInfoObj)&&o.rewardInfoObj[e.clmm_pool_id]?(n(),L(d,{key:0,"l-item":o.rewardInfoObj[e.clmm_pool_id],"rewarder-info":o.rewardInfoObj[e.clmm_pool_id].rewards,class:"noHover apr-hover-con"},null,8,["l-item","rewarder-info"])):N("",!0)]),s("span",null,b(e.stable_farming.apr*100>0&&e.stable_farming.apr*100<.01?"<0.01%":`${("sFixD"in o?o.sFixD:y(J))(e.stable_farming.apr*100,2)}%`),1)])]),s("td",null,[s("div",qe,[(n(!0),t(V,null,so(e.rewarders,p=>(n(),L(I,{key:p.reward_coin,"reward-info":p,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("td",null,[o.wallet.address?(n(),t("div",We,[o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",Ve,[P(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),t(V,{key:1},[o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].amount>0&&o.farmsUserUsd[e.clmm_pool_id].amount>.01?(n(),t("div",He," $"+b(("sFixD"in o?o.sFixD:y(J))(o.farmsUserUsd[e.clmm_pool_id].amount,2)),1)):o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].amount>0&&o.farmsUserUsd[e.clmm_pool_id].amount<.01?(n(),t("div",Je," <$0.01 ")):(n(),t("div",ze,"0")),o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].positionNum?(n(),t("div",Qe,b(o.farmsUserUsd[e.clmm_pool_id].positionNum)+" "+b(o.farmsUserUsd[e.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):N("",!0)],64))])):(n(),t("div",Ge,Xe))]),s("td",null,[s("div",Ye,[o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",Ze,[P(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[e.clmm_pool_id]&&o.farmsRewardObj[e.clmm_pool_id].amountUsd?(n(),t(V,{key:1},[o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[e.clmm_pool_id]&&o.farmsRewardObj[e.clmm_pool_id].amountUsd>0?(n(),t("div",xe,sn)):N("",!0),Number(o.farmsRewardObj[e.clmm_pool_id].amountUsd)>.01?(n(),t("span",en,"$"+b(("addCommom"in o?o.addCommom:y(W))(("sFixD"in o?o.sFixD:y(J))(o.farmsRewardObj[e.clmm_pool_id].amountUsd||0,2))),1)):Number(o.farmsRewardObj[e.clmm_pool_id].amountUsd)>0&&Number(o.farmsRewardObj[e.clmm_pool_id].amountUsd)<.01?(n(),t("span",nn,"<$0.01")):(n(),t("span",tn,"0"))],64)):(n(),t("span",an,"0"))])]),s("td",null,[s("div",ln,[s("div",rn,[P(_,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[e.clmm_pool_id]||o.farmsRewardObj[e.clmm_pool_id].amountUsd<=0,onClick:Po(p=>o.claimPoolReward(e.clmm_pool_id),["stop"])},{default:R(()=>[A("Claim")]),_:2},1032,["disabled","onClick"]),P(_,{class:"add-liquidity-btn",onClick:Po(p=>o.router.push(`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`),["stop"])},{default:R(()=>[A("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more",onClick:Po(p=>o.openMore(e),["stop"])},[(n(),t("svg",{class:go(["arrow-icon",o.openMoreObj[e.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},un,2))],8,dn)])])],8,Ne),to(s("tr",null,[s("td",mn,[o.wallet.address?(n(),t("div",pn,[!("checkNullObj"in o?o.checkNullObj:y(M))(o.farmsLoadingObj)&&o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",_n,[P(g)])):o.farmsPositionObj[e.clmm_pool_id]&&o.farmsPositionObj[e.clmm_pool_id].length>0?(n(!0),t(V,{key:1},so(o.farmsPositionObj[e.clmm_pool_id],p=>(n(),L(S,{key:p.clmm_position_id,"current-tab":o.currentTab,"position-info":{...p,clmm_pool_id:e.clmm_pool_id}},null,8,["current-tab","position-info"]))),128)):(n(),L(C,{key:2,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`},null,8,["add-liquidity-url"]))])):(n(),t("div",fn,[P(C,{"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"})]))])],512),[[Jo,!("checkNullObj"in o?o.checkNullObj:y(M))(o.openMoreObj)&&o.openMoreObj[e==null?void 0:e.clmm_pool_id]]]),hn],64))),128))])):(n(),t("tbody",vn,[s("tr",null,[s("td",gn,[!o.wallet.connected&&o.currentTab=="My Farms"?(n(),t("div",bn,[$n,P(_,{class:"connect-wallet",onClick:l[0]||(l[0]=e=>o.wallet.setIsShowWalletModal(!0))},{default:R(()=>[A(b(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(n(),t("div",wn,kn)):N("",!0)])])]))])])}const ns=X(Re,[["render",Sn],["__scopeId","data-v-108e4536"]]),Pn=K({props:{currentTab:{type:String,default:""}},setup(){const o=H(!1),l=lo(),h=c(()=>l),u=ro(),f=c(()=>u),a=c(()=>f.value.farmsPoolList);return{isShowMore:o,wallet:h,walletStore:l,farmsPoolList:a}}});const ts=o=>(ao("data-v-d863b1fb"),o=o(),io(),o),Tn={class:"farms-table"},jn=ts(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")]),s("tr",{style:{height:"4px",background:"unset"}})],-1)),Ln={class:"pool"},Cn={class:"staked-tvl"},Un={class:"apr"},On={class:"my-staked"},Rn={class:"actions"},An={class:"actions"},Fn={class:"actions"},Dn=ts(()=>s("tr",{style:{height:"8px",background:"unset !important"}},null,-1));function Nn(o,l,h,u,f,a){const i=Mo;return n(),t("div",Tn,[s("table",null,[jn,s("tbody",null,[(n(),t(V,null,so(4,(d,I)=>(n(),t(V,{key:I},[s("tr",null,[s("td",null,[s("div",Ln,[P(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),P(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Cn,[P(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Un,[s("span",null,[P(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),s("td",null,[s("div",On,[P(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Rn,[P(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",An,[P(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",Fn,[P(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),Dn],64))),64))])])])}const Bn=X(Pn,[["render",Nn],["__scopeId","data-v-d863b1fb"]]),En=K({props:{positionStatus:{type:String,default:"Active"},positionInfo:{type:Object,default:()=>({})}},setup(){return{}}});const Mn=o=>(ao("data-v-882c76c0"),o=o(),io(),o),qn={class:"position-info"},Wn={key:0,class:"status-bg"},Vn=Mn(()=>s("img",{src:os,alt:""},null,-1)),Hn=[Vn],Jn={class:"status-text"},zn={class:"name-range"};function Qn(o,l,h,u,f,a){const i=qo;return n(),t("div",qn,[s("div",{class:go(["position-status",o.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionStatus=="Active"?(n(),t("div",Wn,Hn)):N("",!0),s("div",Jn,b(o.positionStatus),1)],2),s("div",zn,[s("span",null,b(o.positionInfo.name),1),o.positionStatus=="Active"?(n(),L(i,{key:0,"pool-info":o.positionInfo},null,8,["pool-info"])):N("",!0)])])}const Gn=X(En,[["render",Qn],["__scopeId","data-v-882c76c0"]]),Kn=K({props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const l=_o(),h=c(()=>l),u=Ro(),f=z=>{var U;return((U=h.value.tokensObj[z])==null?void 0:U.logo_url)||Ao("/image/coins/sui-unknown.png")},a=jo("Sui"),i=To("Sui"),d=H(!1),I=Co(),v=lo(),_=ro(),g=c(()=>v),{setIsShowSuccess:S,setIsShowRejected:C,setIsShowWaiting:e,setTransactionDesc:p,setTransactionTxid:G}=I;return{getCoinIcon:f,router:u,claim:async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,G(""),p("Claim rewards"),e(!0);const z={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const U=await i.harvestFarms(z),F=await g.value.currentWallet.signAndExecuteTransactionBlock(U);console.log("0221###sui swap res###",F);let E=a.handleTx(F);if(E&&E.hash){G(E.hash),e(!1),S(!0);let $={title:"Claim",res:E.res,hash:E.hash};a.showTransitionPending($),await a.watchTransaction($)&&setTimeout(()=>{_.getPositionByPool(g.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else e(!1),C(!0);d.value=!1}catch(U){console.log("farmsDeposit error",U),e(!1),C(!0),d.value=!1}},unStake:async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,G(""),p(`Unstake ${o.positionInfo.name}`),e(!0);const z=o.positionInfo.farmsPoolId,U=o.positionInfo.id;try{const F=await i.farmsWithdraw(z,U),E=await g.value.currentWallet.signAndExecuteTransactionBlock(F);console.log("0221###sui swap res###",E);let $=a.handleTx(E);if($&&$.hash){G($.hash),e(!1),S(!0);let O={res:$.res,title:"Unstaked",hash:$.hash};a.showTransitionPending(O),await a.watchTransaction(O)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),_.getPositionByPool(g.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else e(!1),C(!0)}catch(F){console.log("farmsDeposit error",F),e(!1),C(!0),d.value=!1}},loading:d,stake:async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,G(""),p(`Stake ${o.positionInfo.name}`),e(!0);const z={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},U=o.positionInfo.farmsPoolId;try{const F=await i.farmsDeposit(z,U),E=await g.value.currentWallet.signAndExecuteTransactionBlock(F);console.log("0221###sui swap res###",E);let $=a.handleTx(E);if($&&$.hash){G($.hash),e(!1),S(!0);let O={res:$.res,title:"Staked",hash:$.hash};a.showTransitionPending(O),await a.watchTransaction(O)&&setTimeout(()=>{_.getPositionByPool(g.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else e(!1),C(!0)}catch(F){console.log("farmsDeposit error",F),e(!1),C(!0),d.value=!1}},sFixD:J}}});const as=o=>(ao("data-v-371272e0"),o=o(),io(),o),Xn={class:"farms-position"},Yn={class:"farms-position-box"},Zn={class:"position-info-block"},xn={class:"block-item"},ot=as(()=>s("div",{class:"leabl"},"Liquidity",-1)),st={class:"text"},et={class:"earnings"},nt={class:"block-item"},tt=as(()=>s("div",{class:"leabl"},"Earnings",-1)),at={class:"text"},it={key:0},lt={alt:""},rt={key:1,class:"rewards-day"},dt={class:"unstake-btn-box"};function ct(o,l,h,u,f,a){const i=Gn,d=$o,I=Lo("image");return n(),t("div",Xn,[s("div",Yn,[P(i,{"position-info":o.positionInfo},null,8,["position-info"])]),s("div",Zn,[s("div",xn,[ot,s("div",st,b(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("sFixD"in o?o.sFixD:y(J))(o.positionInfo.positionUSD,2)}`),1)])]),s("div",et,[s("div",nt,[tt,s("div",at,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),t(V,{key:0},so(o.positionInfo.rewards,v=>(n(),t("div",{key:v.rewarder_type,class:"rewards-day"},[v.rewarderAmount>0?(n(),t("div",it,[to(s("img",lt,null,512),[[I,o.getCoinIcon(v.rewarder_type)]]),s("span",null,b(v.rewarderAmount),1)])):N("",!0)]))),128)):(n(),t("div",rt,"--"))])]),o.positionInfo.positionSource=="clmm"?(n(),L(d,{key:0,class:"add-liquidity-btn claim-btn",onClick:l[0]||(l[0]=v=>o.router.push(`/new-position-detail?collect=${o.positionInfo.collectionName}&&token=${o.positionInfo.tokenName}&&address=${o.positionInfo.pool}&pos=${o.positionInfo.pos_object_id}`))},{default:R(()=>[A("+ Add liquidity")]),_:1})):(n(),L(d,{key:1,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0||o.currentTab=="Ended",onClick:o.claim},{default:R(()=>[A("↑ Claim")]),_:1},8,["disabled","onClick"]))]),s("div",dt,[s("div",null,[o.positionInfo.positionSource=="clmm"?(n(),L(d,{key:0,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:R(()=>[A("Stake")]),_:1},8,["loading","disabled","onClick"])):(n(),L(d,{key:1,class:"unstake-btn",onClick:o.unStake},{default:R(()=>[A("Unstake")]),_:1},8,["onClick"]))])])])}const is=X(Kn,[["render",ct],["__scopeId","data-v-371272e0"]]),ut=K({components:{FarmsH5Position:is},props:{currentTab:{type:String,default:""},sortValue:{type:String,default:"APR"}},setup(o){const l=H(!1),h=lo(),u=c(()=>h),f=ro(),a=c(()=>f),i=c(()=>(console.log(a.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?u.value.address?a.value.myFarmsPoolList:[]:o.currentTab=="Ended"?a.value.farmsPoolList.filter(r=>r.status=="Ended"):a.value.farmsPoolList.filter(r=>r.status=="Live"))),d=H([]),I=Co(),v=c(()=>I),_=c(()=>v.value.addressLpTokens),g=r=>{const m=i.value.map(k=>{const{stable_farming:j}=_.value[k.clmm_pool_id];return{...k,apr:j.apr,tvl:j.tvl}});r=="APR"?d.value=m.sort((k,j)=>j.apr-k.apr):d.value=m.sort((k,j)=>j.tvl-k.tvl),console.log(d.value,"##farmsPoolList.value")};bo(()=>[i.value,o.sortValue,_.value],([r,m,k])=>{console.log(m,"sortValue326"),r&&r.length>0&&m&&k&&!M(k)&&g(m)},{immediate:!0});const S=c(()=>a.value.farmsUserUsd),C=c(()=>(console.log(a.value.farmsRewardObj,"##farmsRewardObj"),a.value.farmsRewardObj)),e=c(()=>a.value.farmsPositionObj),p=c(()=>a.value.farmsPoolListLoading),G=c(()=>a.value.farmsPositionList),eo=c(()=>(console.log(a.value.farmsLoadingObj,"##farms.value.farmsLoadingObj"),a.value.farmsLoadingObj)),oo=c(()=>a.value.farmsAllPositionLoading),B=H({}),z=r=>{B.value[r.clmm_pool_id]?B.value[r.clmm_pool_id]=!1:(B.value[r.clmm_pool_id]=!0,console.log("执行了吗"),f.getPositionByPool(u.value.address,r.clmm_pool_id,r.id))},U=To("Sui"),F=jo("Sui"),{setIsShowSuccess:E,setIsShowRejected:$,setIsShowWaiting:O,setTransactionDesc:q,setTransactionTxid:Q}=I,D=async r=>{console.log(G.value,"farmsRewardObj###");const m=[];G.value.forEach(k=>{console.log(r,k,"#position"),r==k.clmm_pool_id&&m.push({pool_id:k.pool_id,position_nft_id:k.id})}),console.log(JSON.stringify(m),"##params"),Q(""),q("Claim rewards"),O(!0);try{const k=await U.batchHarvest(m),j=await u.value.currentWallet.signAndExecuteTransactionBlock(k);console.log("0221###sui swap res###",j);let Z=F.handleTx(j);if(Z&&Z.hash){Q(Z.hash),O(!1),E(!0);let po={res:Z.res,title:"Claim",hash:Z.hash};F.showTransitionPending(po),await F.watchTransaction(po)&&setTimeout(()=>{f.getFarmsPoolList()},4e3)}else O(!1),$(!0)}catch(k){console.log("Claim all error",k),O(!1),$(!0)}},Y=Ro(),fo=_o(),wo=c(()=>fo),uo=c(()=>(console.log(wo.value.poolsObj,"##pools.value.poolsObj"),wo.value.poolsObj)),No=c(()=>wo.value.tokensObj),mo=H({}),Bo=(r,m)=>r&&m?Qo.plus(vo(r),vo(m)):r||0,w=r=>{let m=0;return r&&r.forEach(k=>{m+=vo(String(k))}),String(no(String(m),2))},T=(r,m,k)=>{console.log(r,"poolsObj##473"),Object.keys(r).forEach(j=>{var ho,Uo,yo;const Z=(ho=m[j])==null?void 0:ho.apr_7day,po=Bo((Uo=m[j])==null?void 0:Uo.apr_7day,w((yo=m[j])==null?void 0:yo.rewarder_apr));mo.value[j]={...r[j],apr:String(Z).replace("%",""),aprTotal:po},mo.value[j].rewards=[],r[j].rewarderInfo.forEach((Oo,Io)=>{var Vo,Ho;const ko=(Vo=k[Oo.coinAddress])==null?void 0:Vo.symbol,So=(Ho=m[j])==null?void 0:Ho.rewarder_apr[Io];console.log(ko,So,"getRewardInfo:"),console.log(r[j],"## poolsObj[key]"),mo.value[j].rewards.push({symbol:ko,rewarderApr:So,rewarder_display:r[j][`rewarder_display${Io+1}`]})})}),console.log(mo.value,"##rewardInfoObj")};return bo(()=>[uo.value,_.value,No.value],([r,m,k])=>{r&&!M(r)&&m&&!M(m)&&k&&!M(k)&&T(r,m,k)},{immediate:!0}),{isShowMore:l,wallet:u,farmsPoolList:d,farmsUserUsd:S,sFixD:J,farmsRewardObj:C,farmsPositionObj:e,openMore:z,checkNullObj:M,openMoreObj:B,farmsPoolListLoading:p,claimPoolReward:D,router:Y,addCommom:W,farmsLoadingObj:eo,farmsAllPositionLoading:oo,addressLpTokens:_,rewardInfoObj:mo}}});const x=o=>(ao("data-v-473bf854"),o=o(),io(),o),mt={key:0,class:"farms-pool-list"},pt={class:"farms-block"},_t={class:"item-block"},ft=x(()=>s("div",{class:"leabl"},"Staked TVL",-1)),ht={class:"text"},vt={class:"item-block apr"},gt=x(()=>s("div",{class:"leabl"},"APR",-1)),bt={class:"text"},$t={class:"apr-hover-box"},wt={class:"item-block"},yt=x(()=>s("div",{class:"leabl"},"Rewards / day",-1)),It={class:"text"},kt={class:"item-block my-staked"},St=x(()=>s("div",{class:"leabl"},"My Staked",-1)),Pt={key:0,class:"text"},Tt={class:"position-usd"},jt={key:0,class:"position-num"},Lt={key:1,class:"text"},Ct=x(()=>s("div",{class:"position-usd"},"--",-1)),Ut=[Ct],Ot={class:"item-block"},Rt=x(()=>s("div",{class:"leabl"},"Earned",-1)),At={class:"text earned-box"},Ft={class:"earned"},Dt={key:0,class:"my-staked-loading"},Nt=x(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),Bt={key:0},Et={key:1},Mt={key:2},qt={key:2},Wt={class:"add-liquidity-box"},Vt=["onClick"],Ht=x(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Jt=[Ht],zt={key:1,class:"upgrade-loading"},Qt={key:2,class:"no-data"},Gt=x(()=>s("img",{src:Go,alt:""},null,-1)),Kt={key:3,class:"no-data"},Xt=x(()=>s("img",{src:Ko,alt:""},null,-1)),Yt=x(()=>s("span",null,"No Data",-1)),Zt=[Xt,Yt];function xt(o,l,h,u,f,a){const i=Yo,d=zo,I=Zo,v=Mo,_=$o,g=is,S=es,C=ms;return n(),t(V,null,[o.farmsPoolListLoading?o.farmsPoolListLoading?(n(),t("div",zt,[P(C,{type:"poolsCard",loading:!0})])):N("",!0):(n(),t("div",mt,[(n(!0),t(V,null,so(o.farmsPoolList,e=>(n(),t("div",{key:e.id,class:"farms-item"},[P(i,{"pool-info":e},null,8,["pool-info"]),s("div",pt,[s("div",_t,[ft,s("div",ht,"$"+b(("addCommom"in o?o.addCommom:y(W))(o.addressLpTokens&&o.addressLpTokens[e.clmm_pool_id]&&o.addressLpTokens[e.clmm_pool_id].stable_farming&&o.addressLpTokens[e.clmm_pool_id].stable_farming.tvl,2)),1)]),s("div",vt,[gt,s("div",bt,[A(b(e.stable_farming.apr*100>0&&e.stable_farming.apr*100<.01?"<0.01%":("sFixD"in o?o.sFixD:y(J))(e.stable_farming.apr*100,2))+"% ",1),s("div",$t,[!("checkNullObj"in o?o.checkNullObj:y(M))(o.rewardInfoObj)&&o.rewardInfoObj[e.clmm_pool_id]?(n(),L(d,{key:0,"l-item":o.rewardInfoObj[e.clmm_pool_id],"rewarder-info":o.rewardInfoObj[e.clmm_pool_id].rewards,class:"noHover apr-hover-con"},null,8,["l-item","rewarder-info"])):N("",!0)])])]),s("div",wt,[yt,s("div",It,[(n(!0),t(V,null,so(e.rewarders,p=>(n(),L(I,{key:p.reward_coin,"reward-info":p,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("div",kt,[St,o.wallet.address?(n(),t("div",Pt,[s("div",Tt," $"+b(("sFixD"in o?o.sFixD:y(J))(o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].positionNum?(n(),t("div",jt,b(o.farmsUserUsd[e.clmm_pool_id].positionNum)+" "+b(o.farmsUserUsd[e.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):N("",!0)])):(n(),t("div",Lt,Ut))]),s("div",Ot,[Rt,s("div",At,[s("div",Ft,[o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",Dt,[P(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[e.clmm_pool_id]&&o.farmsRewardObj[e.clmm_pool_id].amountUsd?(n(),t(V,{key:1},[Nt,o.farmsRewardObj[e.clmm_pool_id].amountUsd>.01?(n(),t("span",Bt,"$"+b(("addCommom"in o?o.addCommom:y(W))(("sFixD"in o?o.sFixD:y(J))(o.farmsRewardObj[e.clmm_pool_id].amountUsd||0,2))),1)):o.farmsRewardObj[e.clmm_pool_id].amountUsd>0&&o.farmsRewardObj[e.clmm_pool_id].amountUsd<.01?(n(),t("span",Et,"<$0.01")):(n(),t("span",Mt,"0"))],64)):(n(),t("span",qt,"--"))]),P(_,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[e.clmm_pool_id]||o.farmsRewardObj[e.clmm_pool_id].amountUsd<=0,onClick:Po(p=>o.claimPoolReward(e.clmm_pool_id),["stop"])},{default:R(()=>[A("Claim")]),_:2},1032,["disabled","onClick"])])])]),s("div",Wt,[P(_,{class:"add-liquidity-btn",onClick:Po(p=>o.router.push(`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`),["stop"])},{default:R(()=>[A("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more-btn",onClick:p=>o.openMore(e)},[(n(),t("svg",{class:go(["arrow-icon",!("checkNullObj"in o?o.checkNullObj:y(M))(o.openMoreObj)&&o.openMoreObj[e==null?void 0:e.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},Jt,2))],8,Vt),(n(!0),t(V,null,so(o.farmsPositionObj[e.clmm_pool_id],p=>to((n(),L(g,{key:p.clmm_pool_id,"current-tab":o.currentTab,"position-info":{...p,clmm_pool_id:e.clmm_pool_id}},null,8,["current-tab","position-info"])),[[Jo,!("checkNullObj"in o?o.checkNullObj:y(M))(o.openMoreObj)&&o.openMoreObj[e==null?void 0:e.clmm_pool_id]]])),128)),o.farmsPositionObj&&o.farmsPositionObj[e.clmm_pool_id]&&o.farmsPositionObj[e.clmm_pool_id].length==0?(n(),L(S,{key:0,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`},null,8,["add-liquidity-url"])):N("",!0),o.wallet.address?N("",!0):(n(),L(S,{key:1,"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"},null,8,["no-data-img"]))]))),128))])),!o.wallet.connected&&o.currentTab=="My Farms"?(n(),t("div",Qt,[Gt,P(_,{class:"connect-wallet",onClick:l[0]||(l[0]=e=>o.wallet.setIsShowWalletModal(!0))},{default:R(()=>[A(b(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(n(),t("div",Kt,Zt)):N("",!0)],64)}const ls=X(ut,[["render",xt],["__scopeId","data-v-473bf854"]]),oa=K({setup(o,l){const h=["Live","Ended","My Farms"],u=H("Live"),f=H("APR"),a=H(!1),i=ro(),d=c(()=>i),I=lo(),v=c(()=>I),_=c(()=>u.value=="My Farms"?v.value.address?d.value.myFarmsPoolList:[]:u.value=="Ended"?d.value.farmsPoolList.filter(p=>p.status=="Ended"):d.value.farmsPoolList.filter(p=>p.status=="Live"));return{tabList:h,currentTab:u,sortValue:f,clickRefresh:()=>{a.value=!0,i.getFarmsPoolList(),setTimeout(()=>{a.value=!1},1e3)},isRefresh:a,farmsPoolList:_,getListNum:p=>_.value.length,changeTab:p=>{u.value=p,l.emit("changeTab",p)},changeSortValue:p=>{f.value=p,l.emit("changeSortValue",p)}}}});const Do=o=>(ao("data-v-8e50e19a"),o=o(),io(),o),sa={class:"farms-tab"},ea={class:"tab-left"},na=["onClick"],ta={key:0},aa={class:"tab-right"},ia={class:"sort-select"},la={class:"sort-select-box"},ra=Do(()=>s("div",null,"Sort by",-1)),da=Do(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),ca=Do(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),ua={class:"sort-list"},ma={class:"refresh"},pa=Do(()=>s("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),_a=[pa];function fa(o,l,h,u,f,a){return n(),t("div",sa,[s("div",ea,[(n(!0),t(V,null,so(o.tabList,i=>(n(),t("div",{key:i,class:go(["tab-item",o.currentTab==i?"tab-item-active":""]),onClick:d=>o.changeTab(i)},[s("span",null,b(i=="Ended"?"Finished":i),1),o.currentTab==i&&o.getListNum(i)?(n(),t("p",ta,b(o.getListNum(i)),1)):N("",!0)],10,na))),128))]),s("div",aa,[s("div",ia,[s("div",la,[ra,s("div",null,[s("span",null,b(o.sortValue),1),da,ca])]),s("div",ua,[s("div",{class:"sort-item",onClick:l[0]||(l[0]=i=>o.changeSortValue("APR"))},"APR"),s("div",{class:"sort-item",onClick:l[1]||(l[1]=i=>o.changeSortValue("TVL"))},"TVL")])]),s("div",ma,[(n(),t("svg",{"aria-hidden":"true",class:go(["refresh-icon",o.isRefresh?"refreshing":""]),onClick:l[2]||(l[2]=(...i)=>o.clickRefresh&&o.clickRefresh(...i))},_a,2))])])])}const ha=X(oa,[["render",fa],["__scopeId","data-v-8e50e19a"]]),va=K({components:{FarmsBanner:Xo,FarmsTabs:ha,FarmsTable:ns,FarmsH5List:ls},setup(){const o=ro(),l=c(()=>o),h=c(()=>l.value.farmsPoolListLoading),u=H("APR"),f=c(()=>l.value.farmsPoolList),a=lo(),i=c(()=>a),d=_o(),I=c(()=>d);bo(()=>[i.value.address,f.value,I.value.tokensObj,I.value.RATES],([_,g,S,C])=>{_&&g.length>0&&!M(S)&&!M(C)&&o.getPositionByAllPool(_)},{immediate:!0}),cs(()=>{o.getFarmsPoolList()}),bo(()=>i.value.address,_=>{_||o.logOut()},{immediate:!0});const v=H("Live");return{farmsPoolListLoading:h,currentTab:v,sortValue:u}}});const ga={class:"farm-container"},ba={class:"farm-container-center"};function $a(o,l,h,u,f,a){const i=Xo,d=us("FarmsTabs"),I=ns,v=Bn,_=ls;return n(),t("div",ga,[P(i),s("div",ba,[P(d,{onChangeTab:l[0]||(l[0]=g=>{o.currentTab=g}),onChangeSortValue:l[1]||(l[1]=g=>{o.sortValue=g})}),o.farmsPoolListLoading?(n(),L(v,{key:1,"current-tab":o.currentTab},null,8,["current-tab"])):(n(),L(I,{key:0,"current-tab":o.currentTab,"sort-value":o.sortValue},null,8,["current-tab","sort-value"])),P(_,{"current-tab":o.currentTab,"sort-value":o.sortValue},null,8,["current-tab","sort-value"])])])}const Ea=X(va,[["render",$a],["__scopeId","data-v-da31e0f3"]]);export{Ea as default};
