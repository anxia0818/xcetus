import{_ as _e}from"./status-block.ec6a5c58.js";import{a as ee,_ as P,b as Re,u as me,k as Ue,g as Se,h as $,c as Z,f as x,e as v,i as Ne}from"./pool.4307b5ad.js";import{a as se,l as oe,m as c,e as ne,o as n,f as t,i as _,u as i,t as o,c as ue,w as D,h as s,s as I,x as B,D as Oe,b as pe,r as N,A as G,F as q,q as z,J as ce,p as ve,k as ke,v as Ae,z as je,L as Ce,Q as re,j as Q,U as De,B as Le,K as de,V as Pe}from"./entry.9449c7e1.js";/* empty css              *//* empty css              */import{i as Y}from"./import-icon.de3e6c66.js";import{_ as he}from"./icon-arrow_2x.948aedb2.js";import{_ as be}from"./icon-arrow_2x.4ffddb8e.js";/* empty css              */import{u as Be}from"./notifi.611053c8.js";import{_ as Ie}from"./icon_on_2x.5e96733d.js";import{_ as Fe,a as Te}from"./img-no-Positions_2x.5bdf77c5.js";import{_ as Ee,a as Ve}from"./img-connect-wallet_2x.d11c0bf5.js";const Ge=se({props:{pItem:{type:Object,required:!0},currentStatus:{type:String,required:!0},rewarderInfo:{type:Number,required:!0},aprAmount:{type:Number,required:!0}},setup(){const{t:e}=oe(),m=ee(),U=c(()=>m),j=c(()=>U.value.chainName),R=c(()=>P[j.value]);return{store:U,config:R,t:e}}});const qe={key:0,class:"owner-addres"},ze=["href"],Ke=["href"],He={class:"fee-tier"};function Je(e,m,U,j,R,F){const d=_e,w=Oe;return n(),t("div",{class:B(["position-status",`position-status-${e.pItem.currentStatus.toLowerCase()}`])},[_(d,{class:"status-block","current-status":e.pItem.currentStatus||"","is-pause":e.pItem.is_pause,"apr-amount":e.aprAmount,"block-name":"position"},null,8,["current-status","is-pause","apr-amount"]),e.pItem.tokenName?(n(),t("div",qe,[e.pItem.tokenName.length<=24?(n(),t("a",{key:0,href:e.store.theme=="default"?`${("config"in e?e.config:i(P)).explorerUrl}/token/${e.pItem.nftHash}/0`:`${("config"in e?e.config:i(P)).explorerUrl}/object/${e.pItem.nftHash}`,target:"_blank"},o(e.pItem.tokenName),9,ze)):(n(),ue(w,{key:1,placement:"bottom","arrow-point-at-center":""},{title:D(()=>[s("span",null,o(e.pItem.tokenName),1)]),default:D(()=>[s("a",{target:"_blank",href:e.store.theme=="default"?`${("config"in e?e.config:i(P)).explorerUrl}/token/${e.pItem.nftHash}/0?network=${("config"in e?e.config:i(P)).network}`:`${("config"in e?e.config:i(P)).explorerUrl}/object/${e.pItem.nftHash}`},o(e.pItem.tokenName.substr(0,4))+" ... "+o(e.pItem.tokenName.substr(e.pItem.tokenName.length-4,4)),9,Ke)]),_:1}))])):I("",!0),s("div",He,o(e.$t("common.fee"))+" "+o(e.pItem.fee*100)+"%",1)],2)}const We=ne(Ge,[["render",Je],["__scopeId","data-v-0a37ba0d"]]),Me=se({props:{pItem:{type:Object,required:!0}},setup(e){const{t:m}=oe(),U=pe(),j=ee(),R=c(()=>j);c(()=>R.value.chainName?Re(R.value.chainName):{});const F=me(),d=c(()=>F),w=()=>{R.value.chainName==="Aptos"?U.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}`):U.push(`/position-detail?collect=${e.pItem.collectionName}&&token=${e.pItem.tokenName}&&address=${e.pItem.pool}&pos=${e.pItem.pos_object_id}`)},g=c(()=>d.value.allTokenObj&&e.pItem.token_a.address&&d.value.allTokenObj[e.pItem.token_a.address]&&d.value.allTokenObj[e.pItem.token_a.address].logo_url),a=c(()=>d.value.allTokenObj&&e.pItem.token_b.address&&d.value.allTokenObj[e.pItem.token_b.address]&&d.value.allTokenObj[e.pItem.token_b.address].logo_url),b=c(()=>d.value.feeOwedObj[e.pItem.tokenName]&&d.value.feeOwedObj[e.pItem.tokenName].feeOwed),K=c(()=>d.value.feeOwedObj[e.pItem.tokenName]&&d.value.feeOwedObj[e.pItem.tokenName].feesResult),O=c(()=>d.value.rewarderObj[e.pItem.tokenName]&&d.value.rewarderObj[e.pItem.tokenName].pendingRewarder),k=c(()=>d.value.rewarderObj[e.pItem.tokenName]&&d.value.rewarderObj[e.pItem.tokenName].pendingRewarderView),y=c(()=>d.value.rewarderObj[e.pItem.tokenName]&&d.value.rewarderObj[e.pItem.tokenName].pendingRewarderArr),T=N(0),L=N();G(()=>d.value.RATES,f=>{f&&(L.value=f)},{immediate:!0});const X=f=>{var J;return(f==null?void 0:f.logoURI)||(f==null?void 0:f.logo_url)||((J=d.value.tokensObj[f==null?void 0:f.address])==null?void 0:J.logo_url)||(R.value.theme==="default"?Y("/image/coins/unknown.png"):Y("/image/coins/sui-unknown.png"))};return{tokensObj:c(()=>d.value.tokensObj),showNum:Ue,fromCoinUrl:g,toCoinUrl:a,decimalFormat:Se,clickDetails:w,t:m,addCommom:$,importIcon:Y,router:U,store:R,pendingRewarder:O,pendingFees:b,pendingRewarderArr:y,pendingFeesArr:K,checkNullObj:Z,fixD:x,decimalUi:v,pendingRewarderView:k,aprAmount:T,getCoinIcon:X}}});const ge=e=>(ve("data-v-30e21128"),e=e(),ke(),e),Qe={class:"position-item"},Ze={class:"card-content"},Xe={class:"left"},Ye={class:"top card-header"},xe={class:"token-item"},es={class:"item"},ss=["src"],os={key:0,class:"token-warning"},ns={class:"item"},ts=["src"],as={key:0,class:"token-warning"},is={class:"min-and-max"},ls={class:"text"},rs={key:0,src:he,alt:""},ds={key:1,src:be,alt:""},ms={class:"text"},us={class:"bottom"},ps={class:"info-block-container"},cs={class:"leabl"},vs={class:"text"},ks={key:0,class:"hover-rewarder"},hs={class:"rewarder-info"},bs={class:"left-rewarder"},Is=["src"],gs={class:"right-rewarder"},fs={class:"amount"},$s={key:0,class:"amount-usd"},ws={key:1,class:"amount-usd"},ys={class:"rewarder-info"},_s={class:"left-rewarder"},Rs=["src"],Us={class:"right-rewarder"},Ss={class:"amount"},Ns={key:0,class:"amount-usd"},Os={key:1,class:"amount-usd"},As={class:"leabl"},js={key:0,class:"text"},Cs={key:1,class:"text"},Ds={key:2,class:"text"},Ls={key:3,class:"hover-rewarder"},Ps={class:"left-rewarder"},Bs=["src"],Fs={class:"right-rewarder"},Ts={class:"amount"},Es={class:"amount-usd"},Vs={class:"leabl"},Gs={key:0,class:"text"},qs={key:1,class:"text"},zs={key:2,class:"hover-rewarder"},Ks={class:"left-rewarder"},Hs=["src"],Js={class:"right-rewarder"},Ws={class:"amount"},Ms={class:"amount-usd"},Qs=ge(()=>s("div",{class:"more-img"},null,-1)),Zs={class:"min-and-max"},Xs={class:"text"},Ys={key:0,src:he,alt:""},xs={key:1,src:be,alt:""},eo={class:"text"},so={class:"info-block-container"},oo={class:"left"},no={class:"info-block"},to={class:"leabl"},ao={class:"text"},io={class:"info-block cursor-block"},lo={class:"leabl"},ro={key:0,class:"text"},mo={key:1,class:"text"},uo={key:2,class:"hover-rewarder"},po={class:"left-rewarder"},co=["src"],vo={class:"right-rewarder"},ko={class:"amount"},ho={class:"amount-usd"},bo={key:0,class:"info-block cursor-block"},Io={class:"leabl"},go={key:0,class:"text"},fo={key:1,class:"text"},$o={key:2,class:"hover-rewarder"},wo={class:"left-rewarder"},yo=["src"],_o={class:"right-rewarder"},Ro={class:"amount"},Uo={class:"amount-usd"},So=ge(()=>s("div",{class:"right"},[s("div",{class:"more-img"})],-1));function No(e,m,U,j,R,F){var g;const d=We,w=ce;return n(),t("div",Qe,[s("div",Ze,[s("div",Xe,[_(d,{"p-item":e.pItem,"current-status":((g=e.pItem)==null?void 0:g.currentStatus)||"","rewarder-info":e.pendingRewarder,"apr-amount":e.aprAmount},null,8,["p-item","current-status","rewarder-info","apr-amount"])]),s("div",{class:"right",onClick:m[0]||(m[0]=(...a)=>e.clickDetails&&e.clickDetails(...a))},[s("div",Ye,[s("div",xe,[s("div",es,[s("img",{src:(e.pItem.needReverse?e.toCoinUrl:e.fromCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a)},null,8,ss),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt)?(n(),t("div",os)):I("",!0),s("div",null,[s("span",null,o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1),s("p",null,o(e.pItem.needReverse?e.pItem.token_b.name:e.pItem.token_a.name)+" "+o(e.pItem.needReverse?e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:"":e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:""),1)])]),s("div",ns,[s("img",{src:(e.pItem.needReverse?e.fromCoinUrl:e.toCoinUrl)||e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b)},null,8,ts),(e.pItem.needReverse?e.tokensObj&&e.tokensObj[e.pItem.token_a.address]&&e.tokensObj[e.pItem.token_a.address].isSelfBuilt:e.tokensObj&&e.tokensObj[e.pItem.token_b.address]&&e.tokensObj[e.pItem.token_b.address].isSelfBuilt)?(n(),t("div",as)):I("",!0),s("div",null,[s("span",null,o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1),s("p",null,o(e.pItem.needReverse?e.pItem.token_a.name:e.pItem.token_b.name)+" "+o(e.pItem.needReverse?e.pItem.token_a.labels&&e.pItem.token_a.labels[0]?`(${e.pItem.token_a.labels[0]})`:"":e.pItem.token_b.labels&&e.pItem.token_b.labels[0]?`(${e.pItem.token_b.labels[0]})`:""),1)])])]),s("div",is,[s("div",ls,o(e.pItem.needReverse?("addCommom"in e?e.addCommom:i($))(("decimalUi"in e?e.decimalUi:i(v))(1/e.pItem.maxPrice,6)):("addCommom"in e?e.addCommom:i($))(("decimalUi"in e?e.decimalUi:i(v))(e.pItem.minPrice,6))),1),e.store.theme=="default"?(n(),t("img",rs)):(n(),t("img",ds)),s("div",ms,o(e.pItem.maxPrice.indexOf("+")>-1?"∞":e.pItem.needReverse?("addCommom"in e?e.addCommom:i($))(("decimalUi"in e?e.decimalUi:i(v))(1/e.pItem.minPrice,6)):("addCommom"in e?e.addCommom:i($))(("decimalUi"in e?e.decimalUi:i(v))(e.pItem.maxPrice,6)))+" "+o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)])]),s("div",us,[s("div",ps,[s("div",{class:B(["info-block cursor-block",e.pItem.amountUSD=="--"||Number(e.pItem.amountUSD)==0?"block-none":""])},[s("div",cs,o(e.$t("common.liquidity")),1),s("div",vs," $"+o(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:i($))(e.pItem.amountUSD,2)),1),e.pItem.amountUSD>0?(n(),t("div",ks,[s("div",hs,[s("div",bs,[s("img",{src:e.getCoinIcon(e.pItem.needReverse?e.pItem.token_b:e.pItem.token_a),alt:""},null,8,Is),s("span",null,o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",gs,[s("div",fs,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:i(v))(e.pItem.amountB,e.pItem.token_b.decimals):("decimalUi"in e?e.decimalUi:i(v))(e.pItem.amountA,e.pItem.token_a.decimals)),1),e.pItem.needReverse?(n(),t("div",ws,o(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("fixD"in e?e.fixD:i(x))(e.pItem.tokenBRates,2):"<$0.01"),1)):(n(),t("div",$s,o(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("fixD"in e?e.fixD:i(x))(e.pItem.tokenARates,2):"<$0.01"),1))])]),s("div",ys,[s("div",_s,[s("img",{src:e.getCoinIcon(e.pItem.needReverse?e.pItem.token_a:e.pItem.token_b),alt:""},null,8,Rs),s("span",null,o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol),1)]),s("div",Us,[s("div",Ss,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:i(v))(e.pItem.amountA,e.pItem.token_a.decimals):("decimalUi"in e?e.decimalUi:i(v))(e.pItem.amountB,e.pItem.token_b.decimals)),1),e.pItem.needReverse?(n(),t("div",Os,o(e.pItem.tokenARates==0?"$0":e.pItem.tokenARates>.01?"$"+("decimalUi"in e?e.decimalUi:i(v))(e.pItem.tokenARates,2):"<$0.01"),1)):(n(),t("div",Ns,o(e.pItem.tokenBRates==0?"$0":e.pItem.tokenBRates>.01?"$"+("decimalUi"in e?e.decimalUi:i(v))(e.pItem.tokenBRates,2):"<$0.01"),1))])])])):I("",!0)],2),s("div",{class:B(["info-block cursor-block",e.pendingFees==0?"block-none":""])},[s("div",As,o(e.$t("newAdd.pendingFees")),1),e.pendingFees==="--"?(n(),t("div",js," $ -- ")):isNaN(e.pendingFees)?(n(),t("div",Ds,[_(w,{size:"small"})])):(n(),t("div",Cs,o(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:i($))(e.pendingFees,2)),1)),e.pendingFees>0?(n(),t("div",Ls,[(n(!0),t(q,null,z(e.pendingFeesArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",Ps,[s("img",{src:e.getCoinIcon(a),alt:""},null,8,Bs),s("span",null,o(a.symbol),1)]),s("div",Fs,[s("div",Ts,o(Number(a.amount)==0?0:Number(a.amount)>1e-6?("addCommom"in e?e.addCommom:i($))(("decimalUi"in e?e.decimalUi:i(v))(a.amount,a.decimals),a.decimals):"<0.000001"),1),s("div",Es,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:i($))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):I("",!0)],2),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:i(Z))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(n(),t("div",{key:0,class:B(["info-block cursor-block",e.pendingRewarder==0?"block-none":""])},[s("div",Vs,o(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(n(),t("div",Gs," $"+o(e.pendingRewarder>0&&e.pendingRewarderView>0?e.pendingRewarderView:e.pendingRewarder>0&&e.pendingRewarderView<=0?"<0.01":0),1)):(n(),t("div",qs,[_(w,{size:"small"})])),e.pendingRewarder>0?(n(),t("div",zs,[(n(!0),t(q,null,z(e.pendingRewarderArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",Ks,[s("img",{src:a.logoURI,alt:""},null,8,Hs),s("span",null,o(a.symbol),1)]),s("div",Js,[s("div",Ws,o(("decimalUi"in e?e.decimalUi:i(v))(a.amount,a.decimals)),1),s("div",Ms,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:i($))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):I("",!0)],2)):I("",!0),Qs])])])]),s("div",{class:"h5-bottom",onClick:m[1]||(m[1]=(...a)=>e.clickDetails&&e.clickDetails(...a))},[s("div",Zs,[s("div",Xs,o(e.pItem.needReverse?("decimalUi"in e?e.decimalUi:i(v))(1/e.pItem.minPrice,6):("decimalUi"in e?e.decimalUi:i(v))(e.pItem.minPrice,6)),1),e.store.theme=="default"?(n(),t("img",Ys)):(n(),t("img",xs)),s("div",eo,o(e.pItem.maxPrice.indexOf("+")>-1?"∞":e.pItem.needReverse?("decimalUi"in e?e.decimalUi:i(v))(1/e.pItem.maxPrice,6):("decimalUi"in e?e.decimalUi:i(v))(e.pItem.maxPrice,6))+" "+o(e.pItem.needReverse?e.pItem.token_a.symbol:e.pItem.token_b.symbol)+" per "+o(e.pItem.needReverse?e.pItem.token_b.symbol:e.pItem.token_a.symbol),1)]),s("div",so,[s("div",oo,[s("div",no,[s("div",to,o(e.$t("common.liquidity")),1),s("div",ao," $"+o(e.pItem.amountUSD=="--"?"--":Number(e.pItem.amountUSD)==0?0:Number(e.pItem.amountUSD)<.01?"<0.01":("addCommom"in e?e.addCommom:i($))(e.pItem.amountUSD,2)),1)]),s("div",io,[s("div",lo,o(e.$t("newAdd.pendingFees")),1),isNaN(e.pendingFees)?(n(),t("div",mo,[_(w,{size:"small"})])):(n(),t("div",ro,o(e.pendingFees==0?"$0":e.pendingFees<.01?"<$0.01":"$"+("addCommom"in e?e.addCommom:i($))(e.pendingFees,2)),1)),e.pendingFees>0?(n(),t("div",uo,[(n(!0),t(q,null,z(e.pendingFeesArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",po,[s("img",{src:e.getCoinIcon(a),alt:""},null,8,co),s("span",null,o(a.symbol),1)]),s("div",vo,[s("div",ko,o(Number(a.amount)==0?0:Number(a.amount)>1e-6?("addCommom"in e?e.addCommom:i($))(("decimalUi"in e?e.decimalUi:i(v))(a.amount,a.decimals),a.decimals):"<0.000001"),1),s("div",ho,o(Number(a.amountUSD)==0?"$0":Number(a.amountUSD)>.01?"$"+("addCommom"in e?e.addCommom:i($))(a.amountUSD,2):"<$0.01"),1)])]))),128))])):I("",!0)]),e.pItem.is_display_rewarder&&!("checkNullObj"in e?e.checkNullObj:i(Z))(e.pItem.rewarder_infos)&&e.pendingRewarderArr&&e.pendingRewarderArr.length>0?(n(),t("div",bo,[s("div",Io,o(e.$t("newAdd.pendingRewards")),1),e.pendingRewarder||e.pendingRewarder==0?(n(),t("div",go," $"+o(e.pendingRewarder>0?("decimalUi"in e?e.decimalUi:i(v))(e.pendingRewarder,2):0),1)):(n(),t("div",fo,[_(w,{size:"small"})])),e.pendingRewarder>0?(n(),t("div",$o,[(n(!0),t(q,null,z(e.pendingRewarderArr,a=>(n(),t("div",{key:a,class:"rewarder-info"},[s("div",wo,[s("img",{src:a.logoURI,alt:""},null,8,yo),s("span",null,o(a.symbol),1)]),s("div",_o,[s("div",Ro,o(a.amount),1),s("div",Uo,"$"+o(("decimalUi"in e?e.decimalUi:i(v))(a.amountUSD,2)),1)])]))),128))])):I("",!0)])):I("",!0)]),So])])])}const Oo=ne(Me,[["render",No],["__scopeId","data-v-30e21128"]]),Ao=se({setup(){const e=N(!1),{t:m}=oe(),U=N(["position"]),j=pe(),R=N(""),F=ee(),d=c(()=>F),w=c(()=>d.value.chainName?P[d.value.chainName]:{});let g=N([]);const a=me(),b=c(()=>a),K=Ne(),O=c(()=>K),k=N(!1),y=N(m("tab.all")),T=N([m("tab.layerZero"),m("tab.wormhole"),m("tab.celer")]),L=N(!0),X=N("TVL"),te=()=>{e.value=!0,g.value=[],O.value.address&&a.getMyPositons(O.value.address,b.value.poolsObj,d.value.chainName),setTimeout(()=>{e.value=!1},1e3)};Ae(()=>{g.value=[],document.addEventListener("click",()=>{k.value=!1}),a.setMyPositionsLoading(!0)}),je(()=>{document.addEventListener("click",()=>{k.value=!1})}),Ce(()=>{O.value.connected||(g.value=[])});const f=p=>{e.value=!0;let u=[];if(b.value.myPositions.forEach(l=>{var E,V,W,M,ie,le;let r,h;const S=l.amountA*((E=b.value.RATES[l.token_a.address])==null?void 0:E.price),A=l.amountB*((V=b.value.RATES[l.token_b.address])==null?void 0:V.price);console.log("0330###updateLpList####ele.amountA##",l.amountA),console.log("0330###updateLpList####ele.amountB##",l.amountB),console.log("0330###updateLpList####ele.token_a.address##",l.token_a.address),console.log("0330###updateLpList####ele.token_b.address##",l.token_b.address),console.log("0330###updateLpList####pools.value.RATES[ele.token_a.address]?.price##",(W=b.value.RATES[l.token_a.address])==null?void 0:W.price),console.log("0330###updateLpList####pools.value.RATES[ele.token_b.address]?.price##",(M=b.value.RATES[l.token_b.address])==null?void 0:M.price),(ie=b.value.RATES[l.token_a.address])!=null&&ie.price&&((le=b.value.RATES[l.token_b.address])!=null&&le.price)?(r=S+A,h=S+A):(r=" --",h=0),u.push({...l,amountUSD:r,amountUSDOrigin:h,tokenARates:S,tokenBRates:A})}),console.log("0507###updateLpList###labelValue.value###",y.value),y.value!="All"){const l=[];u.forEach(r=>{var h;((h=r==null?void 0:r.labels)==null?void 0:h.indexOf(y.value))!==-1&&l.push(r)}),L.value?(g.value=l.sort((r,h)=>(alert(1),Number(h.amountUSD)-Number(r.amountUSD))),e.value=!1):(g.value=l.sort((r,h)=>Number(r.amountUSD)-Number(h.amountUSD)),e.value=!1)}else console.log("0507###updateLpList###select.value###",L.value),console.log("0507###updateLpList###newResult###",u),L.value?(g.value=u.sort((l,r)=>r.amountUSDOrigin-l.amountUSDOrigin),e.value=!1):(g.value=u.sort((l,r)=>l.amountUSDOrigin-r.amountUSDOrigin),e.value=!1);console.log(g.value,"list.value========>")};G(()=>[b.value.myPositions,b.value.RATES],([p,u])=>{p&&u&&f()},{immediate:!0}),G(()=>[O.value.address,b.value.poolConfigList,b.value.poolsObj,d.value.chainName],([p,u,l,r])=>{var h,S,A;p&&u&&u.length>0&&r&&(r!=null&&r.toLowerCase().includes((h=u[0])==null?void 0:h.chain))&&!Z(l)&&(r==="Aptos"?u.length===Object.values(l).length:(A=(S=Object.values(l)[0])==null?void 0:S.chain)!=null&&A.includes("sui"))&&a.getMyPositons(O.value.address,l,r)},{immediate:!0,deep:!0}),G(()=>y.value,p=>{f()}),G(()=>L.value,p=>{f()});const J=p=>{const u=[];T.value.forEach((l,r)=>{l==p?u[r]=y.value:u[r]=l}),T.value=u,y.value=p},H=Be(),C=c(()=>H),ae=c(()=>a),$e=async p=>{console.log("执行了"),await H.getSourceGroups();const u=C.value.sourceGroups&&C.value.sourceGroups.length>0&&C.value.sourceGroups[0]&&C.value.sourceGroups[0].sources||[];let l;for(let r=0;r<u.length;r++){const{pool_address:h,position_index:S}=JSON.parse(u[r].blockchainAddress);let A=!1,E;for(let V=0;V<p.length;V++){const{poolAddress:W,index:M}=p[V];h==W&&Number(M)==Number(S)&&(A=!0),E={pool_address:h,position_index:S},console.log(l,"====>hasPositionInfo"),console.log(E,"","取消订阅的仓位")}A||await H.subscribePosition(E,"",!1,!1)}},we=async()=>{await H.getSourceGroups(),console.log("全部取消");const p=C.value.sourceGroups&&C.value.sourceGroups.length>0&&C.value.sourceGroups[0]&&C.value.sourceGroups[0].sources||[];for(let u=0;u<p.length;u++){const{pool_address:l,position_index:r}=JSON.parse(p[u].blockchainAddress),{name:h}=p[u],S={pool_address:l,position_index:r};await H.subscribePosition(S,h,!1,!1)}},ye=c(()=>ae.value.myPositionsLoading);return G(()=>ae.value.myPositions,(p,u)=>{console.log(p,u,"===>newMyPositions, oldMyposition"),w.value.hasNotifi&&(p&&p.length>0&&u&&u.length!==p.length?$e(p):p&&p.length==0&&!ye.value&&we())},{immediate:!0}),{changeSortLabel:J,label:k,labelList:T,labelValue:y,select:L,selectValue:X,t:m,pools:b,store:d,wallet:O,list:g,clickRefresh:te,refresh:e,current:U,router:j,searchKey:R}}});const fe=e=>(ve("data-v-43e91d80"),e=e(),ke(),e),jo={class:"position-title"},Co=fe(()=>s("use",{"xlink:href":"#icon-icon-refresh"},null,-1)),Do=[Co],Lo={class:"position-tab"},Po={class:"search-tab"},Bo={key:0,class:"positionNum"},Fo={class:"search-container"},To={class:"value"},Eo=fe(()=>s("use",{"xlink:href":"#icon-icon_on"},null,-1)),Vo=[Eo],Go={key:0,class:"select-item"},qo=["onClick"],zo={key:0,src:Ie,alt:""},Ko={key:1,class:"fan-img",src:Ie,alt:""},Ho={key:0,class:"loading-global position-loading"},Jo={key:1,class:"position-list"},Wo={key:2,class:"no-data"},Mo={key:0,src:Fe,alt:""},Qo={key:1,src:Te,alt:""},Zo={key:3,class:"no-data"},Xo={key:0,src:Ee,alt:""},Yo={key:1,src:Ve,alt:""};function xo(e,m,U,j,R,F){const d=de("mail-outlined"),w=Pe,g=de("appstore-outlined"),a=De,b=ce,K=Oo,O=Le;return n(),t("div",{class:B(e.list&&e.list.length===0&&e.wallet.connected||!e.wallet.connected?"position-center position-list-container":"position-list-container")},[s("div",jo,[s("div",null,o(e.$t("common.concentratedPools")),1),(n(),t("svg",{"aria-hidden":"true",class:B(e.refresh?"refresh refresh-icon ":"refresh-icon"),onClick:m[0]||(m[0]=(...k)=>e.clickRefresh&&e.clickRefresh(...k))},Do,2))]),s("div",Lo,[s("div",Po,[_(a,{selectedKeys:e.current,"onUpdate:selectedKeys":m[2]||(m[2]=k=>e.current=k),mode:"horizontal"},{default:D(()=>[_(w,{key:"pools",onClick:m[1]||(m[1]=k=>e.router.push("/pools"))},{icon:D(()=>[_(d)]),default:D(()=>[Q(" "+o(e.$t("menu.pools")),1)]),_:1}),_(w,{key:"position"},{icon:D(()=>[_(g)]),default:D(()=>[Q(" "+o(e.$t("common.myPosition")),1),e.list.length>0?(n(),t("span",Bo," ("+o(e.list.length)+")",1)):I("",!0)]),_:1})]),_:1},8,["selectedKeys"])]),s("div",Fo,[e.store.theme=="default"?(n(),t("div",{key:0,class:"search-label",onClick:m[3]||(m[3]=re(k=>e.label=!e.label,["stop"]))},[s("span",null,o(e.$t("newAdd.label")),1),s("div",To,o(e.labelValue),1),(n(),t("svg",{"aria-hidden":"true",class:B(e.label?"show-icon icon":"icon")},Vo,2)),e.label?(n(),t("div",Go,[(n(!0),t(q,null,z(e.labelList,(k,y)=>(n(),t("div",{key:y,class:"select-menu-item",onClick:T=>e.changeSortLabel(k)},o(k),9,qo))),128))])):I("",!0)])):I("",!0),s("div",{class:"search-select",onClick:m[4]||(m[4]=re(k=>e.select=!e.select,["stop"]))},[s("div",null,[Q(" TVL "),e.select?(n(),t("img",zo)):(n(),t("img",Ko))])])])]),e.pools.myPositionsLoading&&e.wallet.connected?(n(),t("div",Ho,[_(b)])):I("",!0),e.list&&e.list.length>0&&e.wallet.connected&&!e.pools.myPositionsLoading?(n(),t("div",Jo,[(n(!0),t(q,null,z(e.list,(k,y)=>(n(),ue(K,{key:y,"p-item":k},null,8,["p-item"]))),128))])):I("",!0),e.list&&e.list.length<=0&&!e.pools.myPositionsLoading&&e.wallet.connected?(n(),t("div",Wo,[e.store.theme=="default"?(n(),t("img",Mo)):(n(),t("img",Qo)),s("span",null,o(e.$t("common.noLiquidityPositions")),1)])):I("",!0),e.wallet.connected?I("",!0):(n(),t("div",Zo,[e.store.theme=="default"?(n(),t("img",Xo)):(n(),t("img",Yo)),_(O,{class:"connect-wallet",onClick:m[5]||(m[5]=k=>e.wallet.setIsShowWalletModal(!0))},{default:D(()=>[Q(o(e.$t("button.connectWallet")),1)]),_:1})]))],2)}const vn=ne(Ao,[["render",xo],["__scopeId","data-v-43e91d80"]]);export{vn as default};
