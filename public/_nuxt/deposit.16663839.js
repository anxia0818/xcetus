import{k as Wt,n as mt,d as pe,e as kt,u as It,a as Ne,c as xe,s as vt,T as st,E as Zt,b as He,m as Ct,p as _t}from"./pool.e50c41f0.js";import{a as tt,r as R,C as $,z as Lt,D as Re,e as ot,o as F,f as Y,H as At,T as Gt,h as s,K as ft,t as ce,u as ge,x as oe,c as Ke,p as Nt,k as qt,S as Mt,l as $t,E as wt,A as Bt,G as Kt,F as gt,s as Pt,i as Ee,v as ut,w as pt,j as Rt,U as Jt,b as Qt,B as Yt}from"./entry.d03806f2.js";/* empty css              */import{s as at,m as Vt,l as eo,b as to,a as oo}from"./transform.c672907f.js";import{D as a}from"./decimal.0bdeb344.js";import{u as yt,a as no}from"./sha256.a529fa1b.js";import{d as Ft,_ as Ot,c as Ut,a as xt,b as io}from"./new-liquidity-title.02e6066a.js";import{i as bt}from"./import-icon.de3e6c66.js";/* empty css              */import"./decimal.6f03adc8.js";import{positionError as Ye,fromCoin as h,toCoin as b,tickList as Qe,minPrice as M,maxPrice as P,currentPrice as rt,currentPriceReverse as ht,direction as qe,currentPriceTab as H,defaultMinPrice as ct,defaultMaxPrice as dt,toggle as zt,isInputTotalAmount as We,priceConfigObj as Ge,fromCoinAmount as k,toCoinAmount as w,fixedFromCoin as _e,resetTickList as Tt,resetData as ao}from"./data.a8c43064.js";import{_ as ro}from"./coin-lock.6c49facc.js";import{_ as lo}from"./coin-select.5338d2dd.js";import{_ as so}from"./viewDetail.5b393a48.js";import{a as uo}from"./new-add-or-create.d0dbbb7c.js";import{u as co}from"./notifi.29c2a7eb.js";import{_ as mo,a as vo}from"./icon-Add-Liquidity_2x.0acb06cb.js";import"./img-lock_2x.a28135f4.js";import"./lock.e1a150e1.js";/* empty css              *//* empty css              */import"./token-warning.094cee99.js";import"./refresh-icon.a094ec00.js";/* empty css              */import"./swap-setting.0100bd96.js";/* empty css              */import"./icon-error_2x.b3a2dc46.js";import"./img-lock_2x.c446a8ee.js";import"./img-no-Positions_2x.1816186d.js";import"./status-block.9c6601a9.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./useWhale.fa4f2c63.js";import"./index.1f4f4695.js";function St(e,m,ke){const de=new a(10).pow(m-ke);return new a(1.0001).pow(e).mul(de)}const fo=tt({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""},zoom:{type:Number,default:1}},setup(e,m){const ke=R(""),de=R(""),B=$(()=>{var n,r,d,O,U,G;return console.log(e.poolInfo,"===>props.poolInfo"),(n=e.poolInfo)!=null&&n.current_sqrt_price&&((r=e.poolInfo)!=null&&r.coinA.decimals)&&((d=e.poolInfo)!=null&&d.coinB.decimals)?i.sqrtPriceX64ToPrice((O=e.poolInfo)==null?void 0:O.current_sqrt_price,(U=e.poolInfo)==null?void 0:U.coinA.decimals,(G=e.poolInfo)==null?void 0:G.coinB.decimals).toString():"0"}),Se=$(()=>{let n=0;return e.direction?n=(Number(e.minPrice)/Number(B.value)-1)*100:n=(Number(e.minPrice)/Number(1/Number(B.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),E=$(()=>{let n=0;return e.direction?n=(Number(e.maxPrice)/Number(B.value)-1)*100:n=(Number(e.maxPrice)/Number(1/Number(B.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),X=yt(),T=$(()=>X),V=$(()=>T.value.chainName?kt(T.value.chainName):{}),{TickMath:i,getNearestTickByTick:S}=V.value,ee=(n=[])=>{let r=6;const d=Math.abs(Number(n[0])-Number(n[n.length-1]));return d>=6?r=0:d>=1?r=1:d>=.1?r=2:d>=.01?r=3:d>=.001?r=4:d>=1e-4?r=5:d>=1e-5?r=6:d>=1e-6?r=7:d>=1e-7&&(r=8),r},Ie=(n,r=1)=>{if(n&&n.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const d=Number(e.poolInfo.current_tick_index);console.log("0117###dataProcessing###currentTick###",d),console.log("0117###dataProcessing###props.poolInfo###",e.poolInfo),console.log("0117###dataProcessing###minPrice###",e.minPrice),console.log("0117###dataProcessing###maxPrice###",e.maxPrice),console.log("0117###dataProcessing###poolInfo###",e.poolInfo);let O=d+100*r,U=d-100*r,G,ue;if(e.maxPrice==="∞")ue=V.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?ue=i.priceToTickIndex(new a(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):ue=i.priceToTickIndex(new a(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{ue=443636}if(e.minPrice==="0")G=V.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?G=i.priceToTickIndex(new a(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):G=i.priceToTickIndex(new a(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{G=-443636}let we=0;if(e.currentPriceTab!=="full range"){if(d>=G&&d<=ue){const y=d-G,te=ue-d;we=Math.max(Math.abs(y),Math.abs(te))}else d<G?we=Math.abs(ue-d):we=Math.abs(d-G);O=d+we+100*r,U=d-we-100*r}else{const y=(Math.abs(d)>5e3,2e4);O=d+y*r,U=d-y*r}U<-443636&&(U=-443636),O>443636&&(O=443636);const g=new a(n.liquidity).div(Math.pow(10,8)).toString(),A=e.tickList;console.log("0117####drawChart####tick_info_array####",A);const q=[],I=[];let L={};for(let y=0;y<A.length;y++){if(L=A[y],L.index<=d&&L.index>=U){if(q.length<1&&y!==0){const te=A[y-1];q.unshift({...te,index:U,source:"left"})}q.unshift(L)}else if(L.index>d&&L.index<=O&&(I.push(L),q.length<1&&y!==0)){const te=A[y-1];q.push({...te,index:U,source:"left"})}if(L.index>O){const te=A[y];if(I.push({...te,index:O,source:"right"}),q.length<1&&y!==0){const Je=A[y-1];q.push({...Je,index:U,source:"left"})}break}}let J="0";for(let y=q.length-1;y>=0;y--)J=new a(J).plus(new a(q[y].liquidityNet.toString()).div(Math.pow(10,8))).toString(),q[y].liquityAmount=J;let x=g;for(let y=0;y<I.length;y++)x=new a(x).plus(new a(I[y].liquidityNet.toString()).div(Math.pow(10,8))).toString(),I[y].liquityAmount=x;let K=[];const N=A&&A.length>0?{index:d,liquityAmount:Number(g)}:{index:d,liquityAmount:0};(q.length>0||I.length>0)&&(K=[...q.reverse(),N,...I],e.direction||(K=K.reverse()));const ze=[];A.forEach(y=>{ze.push({...y,liquidityGross:y.liquidityGross.toString(),liquidityNet:y.liquidityNet.toString()})}),console.log("0117####drawChart####testTickInfoArray####",ze),console.log("0117####drawChart####currentLiquity####",g),console.log(K,"###chartData"),ne(K,U,O,G,ue,d)}};let Pe=R(!1);const f=R(!1);Lt(()=>{const n=document.body.clientWidth;f.value=!0,n<750?Pe.value=!1:Pe.value=!0,window.onresize=()=>{document.body.clientWidth<750?Pe.value=!1:Pe.value=!0,console.log("这里执行了吗"),Ie(e.poolInfo,e.zoom)}});const ne=(n,r,d,O,U,G)=>{console.log("0117####drawChart####chartData####",n),console.log("0117####drawChart####tickMin####",r),console.log("0117####drawChart####tickMax####",d),console.log("0117####drawChart####minPriceTick####",O),console.log("0117####drawChart####maxPriceTick####",U),console.log("0117####drawChart####currentTick####",G),console.log("0117####drawChart####props.direction####",e.direction),console.log("0518###newd3###props.before7dContractPriceLowest###",e.before7dContractPriceLowest),console.log("0518###newd3###props.before7dContractPriceHighest###",e.before7dContractPriceHighest);let ue,we;e.direction?(ue=e.before7dContractPriceLowest?i.priceToTickIndex(new a(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",we=e.before7dContractPriceHighest?i.priceToTickIndex(new a(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(ue=e.before7dContractPriceLowest?i.priceToTickIndex(new a(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",we=e.before7dContractPriceHighest?i.priceToTickIndex(new a(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const g={top:30,right:35,bottom:20,left:80};let A,q;Pe.value?(A=460-g.left-g.right,q=205-g.top-g.bottom):(A=340-g.left-g.right,q=205-g.top-g.bottom);const I=d-r,L=parseInt(String(I/4));let J=[r+L/4,r+L,r+2*L,d-L,d-L/4];const x=r,K=d,N=A/(K-x);e.currentPriceTab==="full range"&&(J=[r,r+2*L,d]),console.log("0117####drawChart####xArr####",J),console.log("0117####drawChart####utickMin####",x),console.log("0117####drawChart####utickMax####",K),console.log("0117####drawChart####unit####",N);const ze=J.map(l=>e.direction?St(l,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new a(1).div(St(l,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),y=ee(ze);at("#chart").selectAll("*").remove();const te=at("#chart").attr("width",A+g.left+g.right).attr("height",q+g.top+g.bottom).append("g").attr("transform",`translate(${g.left},${g.right})`),Je=Vt(n,function(l){return Number(Math.abs(l.liquityAmount))})||0,Me=eo().range([0,q]).domain([Je,0]);to().rangeRound([0,A]).padding(.1);const t=te.append("g").attr("id","barsBox").selectAll("rect").data(n).enter().append("rect");T.value.theme=="default"?t.attr("x",function(l,u){return u===0?0:e.direction?Math.abs(l.index-x)*N:Math.abs(K-l.index)*N}).attr("y",function(l,u){return e.direction?u===n.length-1?0:Me(l.liquityAmount):u===n.length-1?0:Me(n[u+1].liquityAmount)}).attr("width",function(l,u){return u===0&&n.length===1&&l.liquityAmount>0?A:(e.direction,u!==n.length-1?Math.abs(n[u+1].index-l.index)*N:0)}).attr("height",function(l,u){return u===0&&n.length===1&&l.liquityAmount>0?q:e.direction?u===n.length-1?0:q-Me(l.liquityAmount):u===n.length-1?0:q-Me(n[u+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):t.attr("x",function(l,u){return u===0?0:e.direction?Math.abs(l.index-x)*N:Math.abs(K-l.index)*N}).attr("y",function(l,u){return e.direction?u===n.length-1?0:Me(Math.abs(l.liquityAmount)):u===n.length-1?0:Me(Math.abs(n[u+1].liquityAmount))}).attr("width",function(l,u){return u===0&&n.length===1&&l.liquityAmount>0?A:(e.direction,u!==n.length-1?Math.abs(n[u+1].index-l.index)*N:0)}).attr("height",function(l,u){if(u===0&&n.length===1&&l.liquityAmount>0)return q;if(e.direction)return u===n.length-1?0:Number(l.liquityAmount)?q-Me(Math.abs(l.liquityAmount)):0;{if(u===n.length-1)return 0;const Oe=q-Me(Math.abs(n[u+1].liquityAmount));return Number(n[u+1].liquityAmount)?Oe:0}}).attr("fill",function(l,u){return"#417494"}).attr("class","bars").attr("stroke-width",1).attr("stroke",function(l,u){return"#417494"});const v=te.append("g");v.append("line").attr("x1",0).attr("y1",155).attr("x2",A).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const _=v.append("g");let C=0;if(e.direction){for(let l=0;l<J.length;l++){const u=pe(ze[l],y)||"0";console.log("0423####price####",u),ze.push(u);const Oe=Math.abs(J[l]-x)*N;let me=0;for(let ve=0;ve<u.length;ve++)u[ve]==="1"?me+=4.02:u[ve]==="."?me+=2.64:u[ve]==="7"?me+=5.48:me+=6;console.log(Oe,"x=>>>"),_.append("text").text(u).attr("x",Oe-me/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}C=Math.abs(G-x)*N}else{for(let l=J.length-1;l>=0;l--){const u=pe(ze[l],y)||0;ze.push(u);const Oe=Math.abs(J[l]-K)*N;let me=0;for(let ve=0;ve<u.length;ve++)u[ve]==="1"?me+=4.02:u[ve]==="."?me+=2.64:u[ve]==="7"?me+=5.48:me+=6;_.append("text").text(u).attr("x",Oe-me/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}C=Math.abs(G-K)*N}console.log(G,K,N,"######currentPricePositon"),(T.value.theme=="default"?te.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):te.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+C+", 0)");let z,ie,je,ye;e.direction?(console.log("0525###d3###select###minPriceTick###",O),console.log("0525###d3###select###maxPriceTick###",U),console.log("0525###d3###select###props.minPrice###",e.minPrice),console.log("0525###d3###select###props.maxPrice###",e.maxPrice),z=O<x?-100:parseInt(String(Math.abs(O-x)*N)),ie=U<x?-100:parseInt(String(Math.abs(U-x)*N)),je=ue<x?-100:Math.abs(ue-x)*N,ye=we<x?-100:Math.abs(we-x)*N):(ie=O<x?-100:Math.abs(K-O)*N,z=U<x?-100:Math.abs(K-U)*N,ye=ue<x?-100:Math.abs(K-ue)*N,je=we<x?-100:Math.abs(K-we)*N),e.minPrice==="0"&&(z=0),e.maxPrice==="∞"&&(ie=A),console.log(z,"==>minPriceTickX"),Pe.value,ke.value=A-z+87+"px",de.value=ie+98+"px",ue&&je<A&&te.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+je+", 0)"),we&&ye<A&&te.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+ye+", 0)");const Ce=te.append("g").attr("id","left-handle"),ae=te.append("g").attr("id","right-handle");T.value.theme=="default"?(Ce.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Ce.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),Ce.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),Ce.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),ae.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),ae.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),ae.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),ae.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(Ce.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Ce.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),Ce.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),Ce.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),ae.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),ae.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),ae.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),ae.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),console.log("0525###d3###select###minPriceTickX###",z),console.log("0525###d3###select###maxPriceTickX###",ie),Ce.attr("transform","translate("+z+", 0)"),ae.attr("transform","translate("+ie+", 0)");const Fe=oo().extent([[0,0],[A,q]]).handleSize(30).on("end",it);te.append("g").attr("class","brush").call(Fe).call(Fe.move,[z,ie]);function it(l){if(!l.sourceEvent||!l.selection)return;Ce.attr("transform","translate("+l.selection[0]+", 0)"),ae.attr("transform","translate("+l.selection[1]+", 0)"),Pe.value,ke.value=A-l.selection[0]+87+"px",de.value=l.selection[1]+74+"px";let u,Oe;console.log("0525###d3###select###e.selection[0]###",l.selection[0]),console.log("0525###d3###select###e.selection[0]###",l.selection[1]),console.log("0525###d3###select###props.direction###",e.direction),console.log("0525###d3###select###width###",A),console.log("0525###d3###select###unit###",N),console.log("0525###d3###select###utickMin###",x),console.log("0525###d3###select###utickMax###",K),console.log("0525###d3###select###props.poolInfo###",e.poolInfo);let me=0,ve=0;e.direction?(me=S(parseInt(String(l.selection[0]/N+x)),Number(e.poolInfo.tickSpacing)),u=i.tickIndexToPrice(me,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),ve=S(parseInt(String(l.selection[1]/N+x)),Number(e.poolInfo.tickSpacing)),Oe=i.tickIndexToPrice(ve,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),console.log("1114###d3###select###minTick###",me),console.log("1114###d3###select###maxTick###",ve),console.log("1114###d3###select###minPrice###",u),console.log("1114###d3###select###maxPrice###",Oe)):(ve=S(K-l.selection[0]/N,Number(e.poolInfo.tickSpacing)),u=1/i.tickIndexToPrice(ve,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),me=S(K-l.selection[1]/N,Number(e.poolInfo.tickSpacing)),Oe=1/i.tickIndexToPrice(me,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),m.emit("onChangeMinPrice",String(pe(String(u),6))),m.emit("onChangeMaxPrice",String(pe(String(Oe),6)))}T.value.theme=="default"?at(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):at(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632"),console.log("画完了##")};return R(""),Re(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab,e.zoom,e.tickList],([n,r,d,O,U,G])=>{console.log(n,r,d,d>r,U,"poolInfo && minPrice && maxPrice && (maxPrice > minPrice)"),n&&r&&d&&(n!=null&&n.liquidity)&&(O!=="Custom"||console.log("绘制"),Ie(n,U))},{immediate:!0}),console.log(e,"props===>"),{store:T,loading:f,rangeSizeLower:Se,rangeSizeUpper:E,rangeSizeLowerPosition:ke,rangeSizeUpperPosition:de,decimalFormat:Wt,numberformat:mt}}});const go=e=>(Nt("data-v-00e9c224"),e=e(),qt(),e),po={class:"chart-box"},bo={class:"chart"},ho=go(()=>s("svg",{id:"chart"},null,-1));function ko(e,m,ke,de,B,Se){const E=Mt;return F(),Y("div",po,[At(s("div",bo,[e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="∞"?(F(),Y("div",{key:0,class:"range-size range-size-lower",style:ft({right:e.rangeSizeLowerPosition})},ce(("numberformat"in e?e.numberformat:ge(mt))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):oe("",!0),e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="∞"?(F(),Y("div",{key:1,class:"range-size range-size-upper",style:ft({left:e.rangeSizeUpperPosition})},ce(("numberformat"in e?e.numberformat:ge(mt))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):oe("",!0),ho],512),[[Gt,!e.chartLoading]]),e.chartLoading?(F(),Ke(E,{key:0})):oe("",!0)])}const jt=ot(fo,[["render",ko],["__scopeId","data-v-00e9c224"]]),wo=tt({props:{lever:{type:String,default:""}},setup(){return{}}});const yo=e=>(Nt("data-v-619778e2"),e=e(),qt(),e),Co={class:"lever"},_o=yo(()=>s("div",{class:"lever-title"},"Leverage",-1)),Po={class:"lever-text"};function To(e,m,ke,de,B,Se){return F(),Y("div",Co,[_o,s("div",Po,ce(e.lever),1)])}const So=ot(wo,[["render",To],["__scopeId","data-v-619778e2"]]),Io=tt({components:{NewLiquidityD3Chart:jt,NewLiquidityPrice:Ft},setup(){const{t:e,locale:m}=$t(),ke=R("liquidity"),de=yt(),B=$(()=>de),Se=$(()=>B.value.chainName),E=It(),X=$(()=>E),T=$(()=>B.value.chainName?kt(B.value.chainName):{});Lt(()=>{Ye.value=!1});const V=wt(),i=$(()=>{let t=null;for(let v=0;v<X.value.poolConfigList.length;v++){const _=X.value.poolConfigList[v];_.address==V.query.poolAddress&&(t=_)}return console.log(t,"===>basePoolInfo"),t}),S=$(()=>{let t=null;for(const v in X.value.poolsObj){const _=X.value.poolsObj[v];_.address==V.query.poolAddress&&(console.log(_,"p===>"),t=_)}return t}),ee=R(),Ie=R(!0),Pe=async(t,v)=>{var _,C,Te,z;if(console.log(Ie.value,"==>chartLoading.value"),Ie.value=!0,v){Qe.value=[],f.value=[];const ie=t.token_a.decimals,je=t.token_b.decimals;console.log(t,"pool===>1111");const ye=st.tickIndexToPrice(t.current_tick_index,ie,je);console.log("poolPrice###",ye.toString()),console.log("poolPrice###toTick###",st.priceToTickIndex(new a(ye),(_=t.token_a)==null?void 0:_.decimals,(C=t.token_b)==null?void 0:C.decimals));const Ce=Zt(st.priceToTickIndex(new a(ye),(Te=t.token_a)==null?void 0:Te.decimals,(z=t.token_b)==null?void 0:z.decimals),Number(t.tickSpacing));console.log("poolPrice###test22###",Ce),rt.value=ye.toString(),ht.value=new a(1).div(ye).toString(),h.value=t.needReverse?t.token_b:t.token_a,b.value=t.needReverse?t.token_a:t.token_b,ee.value=t.needReverse,t.token_a.address.toLowerCase()===h.value.address.toLowerCase()&&t.token_b.address.toLowerCase()===b.value.address.toLowerCase()?qe.value=!0:qe.value=!1,console.log(t,"187===>"),console.log(t,"###pool===>");let ae={poolAddress:t.address,coinTypeA:t.coin_a_address,coinTypeB:t.coin_b_address};const Fe=await T.value.getTicks(ae);Qe.value=Fe?T.value.getTickDataFromUrlData(Fe):[],console.log(Qe.value,"===>chartLoadingtickList.value"),Ie.value=!1,n(t)}},f=R([]),ne=R(),n=t=>{const v=t.token_a.decimals,_=t.token_b.decimals;let C=X.value.poolPriceConfigObj&&X.value.poolPriceConfigObj[t.address]&&X.value.poolPriceConfigObj[t.address].recommend_ranges||{};const Te=X.value.poolPriceConfigObj&&X.value.poolPriceConfigObj[t.address]&&X.value.poolPriceConfigObj[t.address].type||"";console.log(C,"===>priceConfigList");let z,ie;const je=t.current_tick_index;ne.value=t.current_tick_index,console.log(je,t.tickSpacing,"==>pool.tickSpacing"),z=je-Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3),ie=je+Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3);const ye=T.value.TickMath.tickIndexToPrice(z,v,_).toString(),Ce=T.value.TickMath.tickIndexToPrice(ie,v,_).toString();C["full range"]={lower:T.value.TickUtil.getMinIndex(Number(S.value.tickSpacing)),upper:T.value.TickUtil.getMaxIndex(Number(S.value.tickSpacing))},C.custom={lower:z,upper:ie,minPrice:ye,maxPrice:Ce};const ae=[];for(let Fe in C)C[Fe]&&(console.log(Fe,"j==>"),ae.push({...C[Fe],key:Fe}));console.log(ae,"priceList"),console.log(t,"###pool.type 504"),Te&&ae&&ae.length>2?t.isSelfBuilt?H.value="custom":Te=="stable"?H.value="suggested":H.value="passive":H.value="custom",f.value=ae,Ge.value=C,O({key:H.value,...C[H.value]})},r=R(""),d=R(""),O=t=>{console.log("priceTab====>",t),console.log("priceTab###poolInfo###",S.value),H.value=t.key.toLowerCase();const v=S.value.token_a.decimals,_=S.value.token_b.decimals,{lower:C,upper:Te}=t;We.value=!1;const z=T.value.TickMath.tickIndexToPrice(C,v,_).toString(),ie=T.value.TickMath.tickIndexToPrice(Te,v,_).toString();if(t.key=="full range"){r.value=C,d.value=Te,U();return}console.log(qe.value,"===>direct.value"),qe.value?(ct.value=String(z),M.value=String(z),dt.value=String(ie),P.value=String(ie),r.value=C,d.value=Te):(ct.value=String(1/Number(ie)),M.value=String(1/Number(ie)),dt.value=String(1/Number(z)),P.value=String(1/Number(z)),r.value=T.value.TickMath.priceToTickIndex(new a(1/Number(ie)),v,_),d.value=T.value.TickMath.priceToTickIndex(new a(1/Number(z)),v,_)),console.log(M.value,P.value,"===>111")},U=t=>{M.value="0",P.value="∞"};Re(()=>S.value,(t,v)=>{console.log(v,"===>oldVal"),console.log(t,"===>newVal"),(!v&&t&&!xe(t)||v&&t&&v.address!==t.address)&&(console.log("池子信息"),Pe(t,!v||t.address!==v.address))},{immediate:!0}),Bt(()=>{h.value=R(),b.value=R(),Qe.value=[]}),Re(()=>[i.value,S.value,X.value.recommendRangesObj],(t,v)=>{var _,C;console.log(t,"===>newValue369"),console.log(v,"===>oldValue369"),(!v||t[0]&&t[1]&&t[2]&&!xe(t[0])&&!xe(t[1]&&!xe(t[2]))||((_=t[0])==null?void 0:_.address)!==((C=v[0])==null?void 0:C.address))&&t[0]&&t[2]&&!xe(t[0])&&!xe(t[2])&&(console.log(t[0],t[2],"======>374"),E.setSinglePool(t[0],t[2],Se.value))},{immediate:!0,deep:!0});const G=t=>{if(Se.value=="Sui")switch(t){case"passive":return"/sui-image/icon_ conservative@2x.png";case"active":return"/sui-image/icon_active@2x.png";case"full range":return"/sui-image/icon_fullrange@2x.png";case"custom":return"/sui-image/icon_costom@2x.png";case"suggested":return"/sui-image/icon_stabel@2x.png"}else switch(t){case"passive":return"/image/icon_ conservative@2x.png";case"active":return"/image/icon_active@2x.png";case"full range":return"/image/icon_fullrange@2x.png";case"custom":return"/image/icon_costom@2x.png";case"suggested":return"/image/icon_stabel@2x.png"}},ue=t=>{switch(t){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"full range":return e("newAdd.fullRange");case"custom":return e("newAdd.custom")}},we=t=>{var _,C;const v=X.value.poolPriceConfigObj&&X.value.poolPriceConfigObj[(_=S.value)==null?void 0:_.address]&&X.value.poolPriceConfigObj[(C=S.value)==null?void 0:C.address].type||"";if(console.log(v,t,"==>poolType"),f.value.length>2)if(v=="unstable")switch(t){case"active":return{top:"35%"};case"passive":return{top:"10%"};case"full range":return{top:"60%"};case"custom":return{top:"85%"}}else switch(t){case"suggested":return{top:"23%"};case"full range":return{top:"48%"};case"custom":return{top:"73%"}}else if(v=="unstable")switch(t){case"active":return{top:"35%"};case"passive":return{top:"10%"};case"full range":return{top:"60%"};case"custom":return{top:"85%"}}else switch(t){case"full range":return{top:"35%"};case"custom":return{top:"60%"}}},g=R(1),A=()=>{const t=g.value/2;g.value=t},q=()=>{const t=g.value*2;g.value=t};console.log(f.value,"==>priceTablList");const I=$(()=>{var t,v,_;return!S.value||xe(B.value.addressHistTokens)||!B.value.addressHistTokens[(t=S.value)==null?void 0:t.poolAddress]?null:Object.fromEntries((_=B.value.addressHistTokens[(v=S.value)==null?void 0:v.poolAddress])==null?void 0:_.data.map(C=>[C.key,C.value]))}),L=R(30),J=R("30D"),x=$(()=>qe.value?I.value&&pe(L.value==7?I.value.before_7_d_contract_price_lowest:L.value==24?I.value.before_24_h_contract_price_lowest:I.value.before_30_d_contract_price_lowest,6)||0:I.value&&pe(new a(1).div(L.value==7?I.value.before_7_d_contract_price_highest:L.value==24?I.value.before_24_h_contract_price_highest:I.value.before_30_d_contract_price_highest).toString(),6)||0),K=$(()=>qe.value?I.value&&pe(L.value==7?I.value.before_7_d_contract_price_highest:L.value==24?I.value.before_24_h_contract_price_highest:I.value.before_30_d_contract_price_highest,6)||0:(I.value&&pe(1/Number(L.value==7?I.value.before_7_d_contract_price_lowest:L.value==24?I.value.before_24_h_contract_price_lowest:I.value.before_30_d_contract_price_lowest),6))==1/0?0:I.value&&pe(1/Number(L.value==7?I.value.before_7_d_contract_price_lowest:L.value==24?I.value.before_24_h_contract_price_lowest:I.value.before_30_d_contract_price_lowest),6)||0),N=$(()=>{const t=Number(M.value),v=Number(P.value);if(M.value=="0"&&P.value=="∞"||H.value=="full range")return"1x";if(M.value==P.value||H.value=="full range")return"--";if(M.value&&P.value&&M.value!=="0"&&P.value!=="∞"){const _=vt(1/(1-Number((t/v)**.25)),2);return Number(_)>0?_+"x":"--"}else return 1}),ze=$(()=>{var t,v,_,C,Te,z;return((t=h.value)==null?void 0:t.isSelfBuilt)||((v=b.value)==null?void 0:v.isSelfBuilt)||((C=X.value.tokensObj[(_=h.value)==null?void 0:_.address])==null?void 0:C.isSelfBuilt)||((z=X.value.tokensObj[(Te=b.value)==null?void 0:Te.address])==null?void 0:z.isSelfBuilt)}),y=(t,v)=>{console.log(t,"####0731 priceRangeChangeMin"),t!==M.value&&H.value=="full range"?(console.log(f.value,"===>priceTablList"),O({key:"custom",...f.value.custom})):H.value!=="full range"&&H.value!=="custom"?(H.value="custom",M.value=t):M.value=t},te=(t,v)=>{console.log(t,"###priceRangeChangeMax maxPirce"),t!==P.value&&H.value=="full range"?O({key:"custom",...f.value.custom}):H.value!=="full range"&&H.value!=="custom"?(H.value="custom",t=="0"?P.value="∞":P.value=t):t=="0"?P.value="∞":P.value=t};return console.log(M.value,P.value,"683==>"),Re(()=>[M.value,P.value],([t,v])=>{console.log(t,v,"minmax new-liquidity-left")},{deep:!0,immediate:!0}),{positionError:Ye,getCoinIcon:t=>{var v;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((v=X.value.tokensObj[t==null?void 0:t.address])==null?void 0:v.logo_url)||(B.value.theme==="default"?bt("/image/coins/unknown.png"):bt("/image/coins/sui-unknown.png"))},chainName:Se,store:B,currentTab:ke,currentPrice:rt,currentPriceReverse:ht,fromCoin:h,toCoin:b,direction:qe,needReverse:ee,addCommom:Ne,decimalUi:pe,priceTablList:f,currentPriceTab:H,sliderStyle:we,poolInfo:S,tickList:Qe,getPriceTabImage:G,getPriceTabText:ue,defaultMinPrice:ct,defaultMaxPrice:dt,minPrice:M,maxPrice:P,currentTick:ne,chartLoading:Ie,zoomOut:A,zoomIn:q,zoom:g,priceTab:O,before7dContractPriceLowest:x,before7dContractPriceHighest:K,aprRewardsTime:J,lever:N,aprRewardsParameter:L,isSelfBuilt:ze,priceRangeChangeMin:y,priceRangeChangeMax:te,toggle:zt,getPirceTabTips:t=>{switch(t){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"full range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"custom":return e("newAdd.customTips")}},timeList:[{label:"24H",value:24},{label:"7D",value:7},{label:"30D",value:30}]}}});const Lo={class:"new-liquidity-left"},Ao=s("span",{class:"selectRange"},"Select Range",-1),No={class:"price-info"},qo={class:"left"},Mo={class:"base-coin"},$o={class:"base-coin-title"},Bo=s("span",null,"Base coin",-1),Ro=s("svg",{class:"icon icon-up","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_up1"})],-1),Fo=s("svg",{class:"icon icon-down","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_down1"})],-1),Oo=[Ro,Fo],Uo={class:"base-coin-bottom"},xo={alt:""},zo={class:"current-price"},jo=s("div",{class:"current-price-title"},"Current Price",-1),Ho={key:0,class:"from-pre-to"},Eo={class:"right"},Xo={class:"price-range"},Do={class:"left"},Wo={class:"price-slider"},Zo={class:"slider"},Go=s("div",{class:"slider-ratio-content"},null,-1),Ko=[Go],Jo={class:"price-tab-list"},Qo=["onClick"],Yo=["src"],Vo={class:"right"},en={class:"price-zoom"},tn={class:"current-price"},on=s("div",{class:"current-price-title"},"Current Price",-1),nn={key:0,class:"from-pre-to"},an={class:"price-zoom-right"},rn={class:"leverage"},ln=s("div",{class:"left"},null,-1),sn={class:"right"},un={class:"right-time"},cn={key:0,class:"day-7-price-range"},dn=s("i",null,null,-1),mn={class:"gray"},vn={class:"time-list"},fn=["onClick"],gn={class:"right-price-h5"},pn={class:"apr-leverage"},bn={key:0,class:"position-tips"},hn=["src"],kn={class:"error"};function wn(e,m,ke,de,B,Se){var S,ee,Ie,Pe,f,ne,n;const E=Jt,X=jt,T=So,V=Ft,i=Kt("image");return F(),Y("div",Lo,[Ao,s("div",No,[s("div",qo,[s("div",Mo,[s("div",$o,[Bo,s("div",{class:"change-price",onClick:m[0]||(m[0]=(...r)=>e.toggle&&e.toggle(...r))},Oo)]),s("div",Uo,[At(s("img",xo,null,512),[[i,e.getCoinIcon(e.fromCoin)]]),s("span",null,ce((S=e.fromCoin)==null?void 0:S.symbol),1)])]),s("div",zo,[jo,s("div",null,[s("span",null,ce(e.poolInfo?e.direction?("addCommom"in e?e.addCommom:ge(Ne))(("decimalUi"in e?e.decimalUi:ge(pe))(e.currentPrice,6)):("addCommom"in e?e.addCommom:ge(Ne))(("decimalUi"in e?e.decimalUi:ge(pe))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(F(),Y("span",Ho,ce((ee=e.toCoin)==null?void 0:ee.symbol)+" per "+ce((Ie=e.fromCoin)==null?void 0:Ie.symbol),1)):oe("",!0)])])]),s("div",Eo,[e.currentTab=="liquidity"?(F(),Y("div",{key:0,class:"zoom-out",onClick:m[1]||(m[1]=(...r)=>e.zoomOut&&e.zoomOut(...r))}," + ")):oe("",!0),e.currentTab=="liquidity"?(F(),Y("div",{key:1,class:"zoom-in",onClick:m[2]||(m[2]=(...r)=>e.zoomIn&&e.zoomIn(...r))}," - ")):oe("",!0)])]),s("div",Xo,[s("div",Do,[s("div",Wo,[s("div",Zo,[s("div",{class:"slider-ratio",style:ft(e.sliderStyle(e.currentPriceTab))},Ko,4)])]),s("div",Jo,[(F(!0),Y(gt,null,Pt(e.priceTablList,r=>(F(),Y("div",{key:r.key,class:ut(["price-tab-item",e.currentPriceTab==r.key?"price-tab-item-active":""]),onClick:d=>e.priceTab(r)},[Ee(E,{placement:"bottom","arrow-point-at-center":""},{title:pt(()=>[Rt(ce(e.getPirceTabTips(r.key)),1)]),default:pt(()=>[s("img",{src:e.getPriceTabImage(r.key),alt:""},null,8,Yo),s("span",null,ce(e.getPriceTabText(r.key)),1)]),_:2},1024)],10,Qo))),128))])]),s("div",Vo,[s("div",en,[s("div",tn,[on,s("div",null,[s("span",null,ce(e.poolInfo?e.direction&&!e.needReverse?("addCommom"in e?e.addCommom:ge(Ne))(("decimalUi"in e?e.decimalUi:ge(pe))(e.currentPrice,6)):("addCommom"in e?e.addCommom:ge(Ne))(("decimalUi"in e?e.decimalUi:ge(pe))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(F(),Y("span",nn,ce(e.direction&&!e.needReverse?`${(Pe=e.fromCoin)==null?void 0:Pe.symbol} per ${(f=e.toCoin)==null?void 0:f.symbol}`:`${(ne=e.toCoin)==null?void 0:ne.symbol} per ${(n=e.fromCoin)==null?void 0:n.symbol}`),1)):oe("",!0)])]),s("div",an,[e.currentTab=="liquidity"?(F(),Y("div",{key:0,class:"zoom-out",onClick:m[3]||(m[3]=(...r)=>e.zoomOut&&e.zoomOut(...r))}," + ")):oe("",!0),e.currentTab=="liquidity"?(F(),Y("div",{key:1,class:"zoom-in",onClick:m[4]||(m[4]=(...r)=>e.zoomIn&&e.zoomIn(...r))}," - ")):oe("",!0)])]),e.poolInfo?(F(),Ke(X,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direction,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,zoom:e.zoom,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","zoom","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):oe("",!0)])]),s("div",rn,[ln,s("div",sn,[s("div",un,[e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(F(),Y("div",cn,[dn,s("span",mn,ce(e.aprRewardsParameter==7?"7D":e.aprRewardsParameter==24?"24H":"30D")+" Price Range",1),s("span",null,ce(("addCommom"in e?e.addCommom:ge(Ne))(("decimalUi"in e?e.decimalUi:ge(pe))(e.before7dContractPriceLowest,6)))+" - "+ce(("addCommom"in e?e.addCommom:ge(Ne))(("decimalUi"in e?e.decimalUi:ge(pe))(e.before7dContractPriceHighest,6))),1)])):oe("",!0),s("div",vn,[(F(!0),Y(gt,null,Pt(e.timeList,r=>(F(),Y("div",{key:r.value,class:ut(["time-item",r.value==e.aprRewardsParameter?"time-item-active":""]),onClick:d=>e.aprRewardsParameter=r.value},ce(r.label),11,fn))),128))])]),s("div",gn,[s("span",null,ce(("addCommom"in e?e.addCommom:ge(Ne))(("decimalUi"in e?e.decimalUi:ge(pe))(e.before7dContractPriceLowest,6)))+" - "+ce(("addCommom"in e?e.addCommom:ge(Ne))(("decimalUi"in e?e.decimalUi:ge(pe))(e.before7dContractPriceHighest,6))),1)])])]),s("div",{class:ut(["apr-and-price",e.positionError&&e.poolInfo?"padding-apr-and-price":""])},[s("div",pn,[Ee(T,{lever:e.lever},null,8,["lever"])]),Ee(V,{min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direction,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["min","max","from-coin","to-coin","direct","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice"]),e.positionError&&e.poolInfo?(F(),Y("div",bn,[s("img",{src:("importIcon"in e?e.importIcon:ge(bt))("/image/icon-tips-error@2x.png"),alt:""},null,8,hn),s("p",kn,ce(e.$t("tips.positionError")),1)])):oe("",!0)],2)])}const Ht=ot(Io,[["render",wn]]),yn=tt({components:{NewLiquidityTitle:Ot,NewLiquidityAssetsCard:Ut,NewLiquidityDepositRatio:xt},setup(){const{t:e,locale:m}=$t(),ke=yt(),de=$(()=>ke),B=$(()=>de.value.chainName),Se=It(),E=$(()=>Se),X=no(),T=$(()=>X),V=wt(),i=$(()=>{let o=null;for(const c in E.value.poolsObj){const p=E.value.poolsObj[c];p.address==V.query.poolAddress&&(console.log(p,"p===>"),o=p)}return o}),S=R(!1),ee=R(!1),Ie=$(()=>de.value.theme),Pe=async(o,c)=>{h.value=o.needReverse?o.token_b:o.token_a,b.value=o.needReverse?o.token_a:o.token_b,k.value="",w.value=""};Re(()=>i.value,(o,c)=>{console.log(c,"===>oldVal"),console.log(o,"===>newVal"),(!c&&o&&!xe(o)||c&&o&&c.address!==o.address)&&(console.log("池子信息"),Pe(o,!c||o.address!==c.address))},{immediate:!0});const f=$(()=>T.value.assets&&h.value&&T.value.assets[h.value.address]?_t(T.value.assets[h.value.address].balance,h.value.decimals):"0"),ne=$(()=>T.value.assets&&b.value&&T.value.assets[b.value.address]?_t(T.value.assets[b.value.address].balance,b.value.decimals):"0"),n=o=>{o==="fromCoin"?(_e.value=!0,B.value==="Aptos"?k.value=Number(f.value)>0?h.value.symbol=="APT"?new a(Number(f.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(f.value)).sub(new a(.1)).toString():String(f.value):"":k.value=Number(f.value)>0?h.value.symbol=="SUI"?new a(Number(f.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(f.value)).sub(new a(.05)).toString():String(f.value):""):(_e.value=!1,B.value==="Aptos"?w.value=Number(ne.value)>0?b.value.symbol=="APT"?new a(Number(ne.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(ne.value)).sub(new a(.1)).toString():String(ne.value):"":w.value=Number(ne.value)>0?b.value.symbol=="SUI"?new a(Number(ne.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(ne.value)).sub(new a(.05)).toString():String(ne.value):"")},r=o=>{o==="fromCoin"?(_e.value=!0,k.value=Number(f.value)>0?vt(new a(Number(f.value)).div(2).toString(),h.value.decimals).toString():""):(_e.value=!1,w.value=Number(ne.value)>0?vt(new a(Number(ne.value)).div(2).toString(),b.value.decimals).toString():"")},d=R(),O=R(),U=R(),G=R(!1),ue=o=>{var c,p,re,j;d.value=o,o==="fromCoin"?(O.value=((c=b.value)==null?void 0:c.address)||"",U.value=V.query.actions=="new-position"?(p=h.value)==null?void 0:p.address:i.value.needReverse?i.value.token_b.address:i.value.token_a.address):(O.value=((re=h.value)==null?void 0:re.address)||"",U.value=V.query.actions=="new-position"?(j=b.value)==null?void 0:j.address:i.value.needReverse?i.value.token_a.address:i.value.token_b.address),G.value=!0,console.log(G.value,"==>showCoinSelect.value ")},we=o=>{var re,j,le,se,Q,Z,D,be;const c=i.value.needReverse?i.value.token_b:i.value.token_a,p=i.value.needReverse?i.value.token_a:i.value.token_b;d.value==="fromCoin"?(((re=h.value)==null?void 0:re.address)===(c==null?void 0:c.address)||!((j=h.value)!=null&&j.address)?(b.value&&o.address.toLowerCase()===((le=b)==null?void 0:le.value.address.toLowerCase())&&(b.value=null),h.value=o):(h.value&&o.address.toLowerCase()===((se=h)==null?void 0:se.value.address.toLowerCase())&&(h.value=null),b.value=o),V.query.action||(V.query.fee="")):((Q=b.value)==null?void 0:Q.address)===(p==null?void 0:p.address)||!((Z=b.value)!=null&&Z.address)?(h.value&&o.address.toLowerCase()===((D=h)==null?void 0:D.value.address.toLowerCase())&&(h.value=null),b.value=o):(b.value&&o.address.toLowerCase()===((be=b)==null?void 0:be.value.address.toLowerCase())&&(b.value=null),h.value=o),G.value=!1},g=$(()=>de.value.chainName?kt(de.value.chainName):{}),A=$(()=>de.value.slippage),q=R(),I=async()=>{var Ue,Ae,$e,Be;if(We.value)return console.log("跳出"),!1;if(!M.value&&!P.value)return!1;if(!k.value&&!w.value&&!M.value&&!P.value)return;const o=i.value||{};if(xe(o))return;const{TickUtil:c,TickMath:p,getNearestTickByTick:re}=g.value,j=o==null?void 0:o.token_a.decimals,le=o==null?void 0:o.token_b.decimals;let se,Q,Z,D,be,Le,Xe,Ze,fe=o==null?void 0:o.current_tick_index,W;if(o.token_a.address.toLowerCase()===h.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===b.value.address.toLowerCase()?W=!0:W=!1,M.value==="0"&&P.value==="∞")Z=c.getMinIndex(Number(o.tickSpacing)),D=c.getMaxIndex(Number(o.tickSpacing)),be=p.tickIndexToSqrtPriceX64(Z),Le=p.tickIndexToSqrtPriceX64(D),console.log(Z,D,"#######updateAmounts 513");else if(H.value=="custom"){console.log(W,"===>directs1866"),W?(se=M.value,Q=P.value):(se=P.value!=="∞"?new a(1).div(P.value).toString():1/0,Q=new a(1).div(M.value).toString());try{Xe=new a(se).equals(new a(0))?-443636:p.priceToTickIndex(new a(se),j,le)}catch{Xe=-443636}try{Ze=p.priceToTickIndex(new a(Q),j,le)}catch{Ze=443636}console.log("1113###updateAmounts###min###",se),console.log("1113###updateAmounts###max###",Q),console.log("1113###updateAmounts###minTick###",Xe),console.log("1113###updateAmounts###maxTick###",Ze),Z=re(Xe,Number(o.tickSpacing),!0),D=re(Ze,Number(o.tickSpacing),!0),console.log("1113###updateAmounts###tick_lower###",Z),console.log("1113###updateAmounts###tick_upper###",D);try{be=p.priceToSqrtPriceX64(new a(se),j,le)}catch{(Q===1/0||Q==="∞")&&(be=p.tickIndexToSqrtPriceX64(c.getMinIndex(Number(o.tickSpacing))))}try{Le=p.priceToSqrtPriceX64(new a(Q),j,le)}catch{console.log("0523###test###max###",Q),(Q===1/0||Q==="∞")&&(console.log("0523###test###max###11111"),Le=p.tickIndexToSqrtPriceX64(c.getMaxIndex(Number(o.tickSpacing))))}console.log("0518###pre###tick_lower###",Z,D,fe),console.log("0518###pre###tick_upper###",D)}else Z=(Ue=Ge.value[H.value])==null?void 0:Ue.lower,D=(Ae=Ge.value[H.value])==null?void 0:Ae.upper,be=p.tickIndexToSqrtPriceX64(Z),Le=p.tickIndexToSqrtPriceX64(D);if(console.log("1103###updateAmounts###tick_lower####",Z),console.log("1103###updateAmounts###tick_upper####",D),console.log("1103###updateAmounts###currentTickIndex####",fe),P.value!=="∞"&&Z>=D){S.value=!0,k.value="",ee.value=!0,w.value="";return}if(console.log(D,fe,Z,"1922"),P.value==="∞"||fe>=Z&&fe<D){S.value=!1,ee.value=!1;let he;if(k.value||w.value){if(_e.value){const lt=new a(k.value).mul(Math.pow(10,h.value.decimals)).toString();he=new He(lt)}else{const lt=new a(w.value).mul(Math.pow(10,b.value.decimals)).toString();he=new He(lt)}console.log(W,"======>directs");const{liquidityAmount:De,tokenMaxA:Ve,tokenMaxB:et,tokenMaxAOrigin:Xt,tokenMaxBOrigin:Dt}=g.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:o.token_a,tokenB:o.token_b,lowerTick:Z,upperTick:D,coinAmount:he,iscoinA:W?_e.value:!_e.value,roundUp:!0,slippage:Number(A.value)/100,curSqrtPrice:new He(o.current_sqrt_price)});q.value={liquidityAmount:De,tokenMaxA:Ve,tokenMaxB:et,tokenMaxAOrigin:Xt,tokenMaxBOrigin:Dt},console.log(Ve,et,"preAdd"),W?_e.value?w.value=Number(et)>0?et:"":k.value=Number(Ve)>0?Ve:"":_e.value?w.value=Ve:k.value=et}}else if(fe>=D){if(W?k.value="":w.value="",S.value=W,ee.value=!W,k.value||w.value){let he;if(W){const De=new a(w.value).mul(Math.pow(10,($e=b.value)==null?void 0:$e.decimals)).toString();he=new He(De),q.value={liquidityAmount:g.value.estimateLiquidityForCoinB(be,Le,he),tokenMaxA:0,tokenMaxB:w.value}}else{const De=new a(k.value).mul(Math.pow(10,(Be=h.value)==null?void 0:Be.decimals)).toString();he=new He(De),q.value={liquidityAmount:g.value.estimateLiquidityForCoinB(be,Le,he),tokenMaxA:0,tokenMaxB:k.value}}}}else if(fe<Z){if(S.value=!W,ee.value=W,W?w.value="":k.value="",k.value||w.value){let he;if(W){const De=new a(k.value).mul(Math.pow(10,h.value.decimals)).toString();he=new He(De),q.value={liquidityAmount:g.value.estimateLiquidityForCoinA(be,Le,he),tokenMaxA:k.value,tokenMaxB:0}}else{const De=new a(w.value).mul(Math.pow(10,b.value.decimals)).toString();he=new He(De),q.value={liquidityAmount:g.value.estimateLiquidityForCoinA(be,Le,he),tokenMaxA:w.value,tokenMaxB:0}}}}else S.value=!0,k.value="",ee.value=!0,w.value=""};Re(k,(o,c)=>{console.log(k,"===>fromCoinAmount"),o==""&&_e.value&&(w.value=""),o&&_e.value&&!We.value&&I()}),Re(w,(o,c)=>{console.log(o,"===>>>>newValsda"),o==""&&!_e.value&&(k.value=""),o&&!_e.value&&!We.value&&I()}),Re(()=>qe.value,(o,c)=>{I()}),Re(()=>[h.value,b.value],([o,c])=>{o&&c&&(S.value=!1,ee.value=!1)});const L=R("--"),J=$(()=>E.value.RATES),x=()=>{const o=J.value&&J.value[h.value.address]&&J.value[h.value.address].price,c=J.value&&J.value[b.value.address]&&J.value[b.value.address].price;if(o&&c){const p=new a(k.value>0?k.value:0).mul(o),re=new a(w.value>0?w.value:0).mul(c),j=p.add(re).toNumber();L.value=j>0&&j<.01?"<$0.01":"$"+Ne(j,2)}else L.value="--"};Re(()=>[k.value,w.value,We.value],([o,c,p])=>{(o||c)&&!p?x():(!o||!c)&&!p&&(L.value="--")},{immediate:!0}),Re(()=>L,o=>{console.log(o,"71911111")},{immediate:!0});const K=R(),N=async()=>{var W,Ue;if(!M.value&&!P.value)return!1;if(!k.value&&!w.value&&!M.value&&!P.value)return;const o=i.value;if(xe(o))return;const{TickUtil:c,TickMath:p,getNearestTickByTick:re}=g.value,j=o==null?void 0:o.token_a.decimals,le=o==null?void 0:o.token_b.decimals;let se,Q,Z,D,be,Le,Xe;if(o.token_a.address.toLowerCase()===h.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Xe=!0:Xe=!1,M.value==="0"&&P.value==="∞")Z=c.getMinIndex(Number(o.tickSpacing)),D=c.getMaxIndex(Number(o.tickSpacing));else if(H.value=="custom"){Xe?(se=Number(M.value),Q=Number(P.value)):(se=new a(1).div(P.value).toString(),Q=new a(1).div(M.value).toString());try{be=se==0?-443636:p.priceToTickIndex(new a(se),j,le)}catch{be=-443636}try{Le=p.priceToTickIndex(new a(Q),j,le)}catch{Le=443636}Z=re(be,Number(o.tickSpacing),!0),D=re(Le,Number(o.tickSpacing),!0)}else Z=(W=Ge.value[H.value])==null?void 0:W.lower,D=(Ue=Ge.value[H.value])==null?void 0:Ue.upper;const Ze=J.value[o==null?void 0:o.token_a.address].price,fe=J.value[o==null?void 0:o.token_b.address].price;qe.value?new He(o.current_sqrt_price):new He(1/o.current_sqrt_price),console.log(qe.value,"===>direction.value"),console.log(o,"poolInfos===>"),console.log(Z,D,"####tick_lower tick_upper 889"),console.log(L.value,"liquidityTotalAmount.value");try{const{amountA:Ae,amountB:$e,tokenAmountsInfo:Be}=await g.value.estCoinAmountsFromTotalAmount({lowerTick:Z,upperTick:D,decimalsA:j,decimalsB:le,curSqrtPrice:new He(o.current_sqrt_price),totalAmount:L.value.replace(/[^\d.]/g,""),tokenPriceA:Ze,tokenPriceB:fe});console.log(Ae,$e,"###estCoinAmountsFromTotalAmount 844"),console.log(o.needReverse,qe.value,"===>849"),K.value=Be,o.needReverse?qe.value?(k.value=Ae,w.value=$e):(k.value=$e,w.value=Ae):(k.value=Ae,w.value=$e)}catch(Ae){console.log(Ae,"e===>")}};Re([M,P],([o,c])=>{console.log(o,c,"==>minPrice,maxPrice"),We.value?We.value&&N():I(),c!=="∞"&&Number(o)!==0&&Number(c)!==0&&Number(o)>=Number(c)?Ye.value=!0:Ye.value=!1,Number(o)==0&&Number(c)==0&&rt.value&&(Ye.value=!0,console.log("价格区间错误"))},{deep:!0,immediate:!0});const ze=o=>{console.log(o,"e");const c=o.replace(/[^\d.]/g,""),p="$"+Ne(c);We.value=!0,L.value=p,c>0?N():(k.value="",w.value="")},y=R(!1),{setTransactionTxid:te,setTransactionDesc:Je,setIsShowWaiting:Me,setIsShowSuccess:nt,setPositiomNum:t,setIsShowRejected:v}=ke,_=co(),C=$(()=>E.value.currentPositionInfo),Te=R(!1),z=async o=>{var be,Le,Xe,Ze;console.log(i.value,"===> poolInfo.value"),y.value=!1,E.value.currentPositionInfo={},te(""),Je(e("tips.increaseLiquiditySuccess",{from:S.value?"":`${Ne(k.value)} ${(be=h.value)==null?void 0:be.symbol}`,and:!S.value&&!ee.value?"and":"",to:ee.value?"":`${Ne(w.value)} ${(Le=b.value)==null?void 0:Le.symbol}`})),Me(!0);const c=qe.value?_e.value:!_e.value;let p,re,j,le,se,Q;const Z=i.value.token_a.decimals,D=i.value.token_b.decimals;if(M.value==="0"&&P.value==="∞")j=g.value.TickUtil.getMinIndex(Number(i.value.tickSpacing)),le=g.value.TickUtil.getMaxIndex(Number(i.value.tickSpacing));else if(H.value=="custom"){qe.value?(p=Number(M.value),re=Number(P.value)):(p=new a(1).div(P.value).toString(),re=new a(1).div(M.value).toString()),console.log("0519###toAdd###min###",p),console.log("0519###toAdd###max###",re),console.log("0519###toAdd###minPrice.value###",M.value),console.log("0519###toAdd###maxPrice.value###",P.value);try{se=p==0?g.value.TickUtil.getMinIndex(Number(i.value.tickSpacing)):g.value.TickMath.priceToTickIndex(new a(Number(p).toFixed(6)),Z,D)}catch{se=g.value.TickUtil.getMinIndex(Number(i.value.tickSpacing))}try{Q=g.value.TickMath.priceToTickIndex(new a(Number(re).toFixed(6)),Z,D)}catch{Q=g.value.TickUtil.getMaxIndex(Number(i.value.tickSpacing))}j=g.value.getNearestTickByTick(se,Number(i.value.tickSpacing),!0),le=g.value.getNearestTickByTick(Q,Number(i.value.tickSpacing),!0)}else j=Ge.value[H.value].lower,le=Ge.value[H.value].upper;console.log(j,le,"####tick_lower tick_upper 889"),console.log(i.value,"==>poolInfo.value.curSqrtPrice");try{let fe;We.value?fe=await g.value.getCreateAddLiquidityPayload({pool:i.value,curSqrtPrice:new He(i.value.current_sqrt_price),tickLower:j,tickUpper:le,slippage:Number(A.value)/100,tokenAmounts:K.value}):fe=await g.value.getAddLiquidityTransactionPayload({pool:{poolAddress:i.value.poolAddress,token_a:i.value.token_a,token_b:i.value.token_b},amount:_e.value?k.value:w.value,fix_amount_a:c,tick_lower:j,tick_upper:le,index:0,slippage:Number(A.value)/100,roundUp:!0,collect_fee:!1,curSqrtPrice:new He(i.value.current_sqrt_price)}),console.log(fe,"payload===?");let W;if(B.value==="Aptos")W=await T.value.currentWallet.signAndSubmitTransaction(fe);else{const Ue=await T.value.currentWallet.signAndExecuteTransactionBlock(fe);W=g.value.handleTx(Ue)}if(console.log("0410###tx###",W),W&&W.hash){te(W.hash),Me(!1),nt(!0);let Ue;i.value.needReverse?i.value.token_a.address.toLowerCase()===h.value.address.toLowerCase()&&i.value.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Ue=!1:Ue=!0:i.value.token_a.address.toLowerCase()===h.value.address.toLowerCase()&&i.value.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Ue=!0:Ue=!1,console.log(Ue,"===>directs");const Ae={title:"Supplied",desc:e("tips.addLiquiditySuccessText",{from:S.value?"":`${Ne(k.value)} ${(Xe=h.value)==null?void 0:Xe.symbol}`,and:!S.value&&!ee.value?"and":"",to:ee.value?"":`${Ne(w.value)} ${(Ze=b.value)==null?void 0:Ze.symbol}`}),hash:W.hash,tit:"Position Created",icon:"icon-icon-Position-Created"};B.value!=="Aptos"&&(Ae.res=W.res),g.value.showTransitionPending(Ae);const $e=await g.value.watchTransaction(Ae,!0);if($e.status){if(nt(!1),E.value.setCurrentPositionLoading(!0),Te.value=!0,console.log($e.nftInfo,"===> watchInfo.nftInfo"),B.value==="Aptos"){if(await E.value.setCurrentPositionInfo($e.nftInfo[0].data.id.creator,$e.nftInfo[0].data.id.collection,$e.nftInfo[0].data.name,B.value),o)try{await _.subscribePosition({pool_address:C.value.poolAddress,position_index:C.value.index},C.value.nftHash)}catch(Be){console.log(Be,"e")}}else{const Be=$e.nftInfo,he=await Ct(2e3);if(await E.value.setCurrentPositionInfo(Be==null?void 0:Be.pool,"","",B.value,Be==null?void 0:Be.position),await Ct(1e3),console.log("0529###nftInfo###",Be),console.log("0529###currentPositionInfo.value.index###",C.value.index),o)try{await _.subscribePosition({pool_address:C.value.poolAddress,position_index:C.value.index},C.value.nftHash)}catch(De){console.log(De)}}setTimeout(()=>{Se.updateCurrentPools(i.value.poolAddress,B.value),g.value.getAccount(T.value.address)},3e3),setTimeout(async()=>{Tt(g,i)},3e3)}t()}else Me(!1),v(!0);k.value="",w.value=""}catch(fe){k.value="",w.value="",console.log("0330###Add liquidity Error###",fe),Me(!1),v(!0)}},ie=$(()=>!k.value&&!w.value?(console.log("addLiquidityBtnDisabled11111"),!0):Number(k.value)>Number(f.value)||Number(w.value)>Number(ne.value)?(console.log("addLiquidityBtnDisabled22222"),!0):ye.value!==e("button.addLiquidity")&&ye.value!==e("newAdd.preview")?(console.log("addLiquidityBtnDisabled33333###",ye.value),!0):i.value&&i.value&&i.value.is_pause?(console.log("addLiquidityBtnDisabled44444"),!0):Number(k.value)<=0&&Number(w.value)<=0||!S.value&&Number(k.value)==0||!ee.value&&Number(w.value)==0),je=$(()=>!h.value||!b.value),ye=$(()=>i.value&&i.value.is_pause?"Pool Closed":!h.value||!b.value||je.value?e("modal.selectTokenModalTitle"):Number(k.value)>Number(f.value)?e("button.insufficientBalance",{name:h.value.symbol}):Number(w.value)>Number(ne.value)?e("button.insufficientBalance",{name:b.value.symbol}):!Number(k.value)&&!Number(w.value)?e("button.enterAmount"):P.value!=="∞"&&Number(M.value)>=Number(P.value)?e("newAdd.invalidRange"):e("button.addLiquidity")),Ce=R({}),ae=R({}),Fe=R(!1),it=(o,c)=>{console.log(d.value,"===>currentCoinKey.value"),console.log(o);const p=localStorage.getItem(o.address);console.log(E.value.tokensObj,"===>pools.value.tokensObj"),console.log(p,"===>coinLocak"),E.value.tokensObj&&E.value.tokensObj[o.address]&&E.value.tokensObj[o.address].isSelfBuilt&&!p&&(c=="fromCoin"&&(Ce.value=o),c=="toCoin"&&(ae.value=o),Fe.value=!0)};Re(()=>[h.value,b.value],([o,c])=>{o&&!xe(o)&&it(o,"fromCoin"),c&&!xe(c)&&it(c,"toCoin")},{immediate:!0});const l=Qt(),u=()=>{B.value!=="Aptos"?l.push("/pool/list"):l.push("/pools")},Oe=o=>{We.value,z(o)},me=()=>{V.query.action!=="create-pool"&&V.query.actions!=="new-position"&&(Tt(g,i),I(),Se.updateCurrentPools(i.value.poolAddress,B.value)),Se.setPoolConfigList(B.value,de.value.filterCoinsObj)},ve=$(()=>{var p,re,j,le,se,Q;const o=(j=J.value[(re=(p=h)==null?void 0:p.value)==null?void 0:re.address])==null?void 0:j.price,c=(Q=J.value[(se=(le=b)==null?void 0:le.value)==null?void 0:se.address])==null?void 0:Q.price;return!!(o&&c)});return Re(()=>[V,E.value.tokensObj],([o,c])=>{var p;c&&!xe(c)&&(b.value||(b.value=E.value.tokensObj[(p=o==null?void 0:o.query)==null?void 0:p.toCoin]))},{immediate:!0,deep:!0}),{positionError:Ye,decimalUi:pe,poolInfo:i,fromCoinAmount:k,toCoinAmount:w,fromCoin:h,toCoin:b,theme:Ie,showFromCoinLock:S,showToCoinLock:ee,fromCoinBlance:f,toCoinBlance:ne,maxBtnSelect:n,halfBtnSelect:r,fixedFromCoin:_e,openCoinSelect:ue,currentCoinKey:d,existingCoins:O,lastSelectCoin:U,showCoinSelect:G,onCoinSelect:we,liquidityTotalAmount:L,toggle:zt,onInput:ze,isInputTotalAmount:We,isViewDetail:Te,addLiquidityBtnDisabled:ie,addLiquidityBtnText:ye,isShowTokenWarning:Fe,chainName:B,closeTokenWarning:u,warningFromCoin:Ce,warningToCoin:ae,isShowLiquidityModal:y,currentPrice:rt,currentPriceReverse:ht,currentPriceTab:H,minPrice:M,maxPrice:P,toAdd:z,direction:qe,wallet:T,getAddLiquidityType:Oe,clickRefresh:me,isShowtotalAmount:ve}}});const Cn={class:"new-liquidity-right"},_n={class:"deposit-title"},Pn={class:"card-container"},Tn={key:0,class:"lock"},Sn={class:"card-item"},In={class:"card-item"},Ln={key:0,class:"total-amount"},An=s("span",null,"Total Amount",-1);function Nn(e,m,ke,de,B,Se){const E=Ot,X=io,T=Ut,V=ro,i=xt,S=Yt,ee=lo,Ie=so,Pe=uo;return F(),Y("div",Cn,[s("div",_n,[Ee(E,{"pool-info":e.poolInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"])]),s("div",Pn,[e.positionError?(F(),Y("div",Tn,[Ee(X)])):oe("",!0),s("div",Sn,[Ee(T,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":m[0]||(m[0]=f=>e.fromCoinAmount=f),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:m[1]||(m[1]=f=>e.maxBtnSelect("fromCoin")),onOnHalf:m[2]||(m[2]=f=>e.halfBtnSelect("fromCoin")),onOnInput:m[3]||(m[3]=f=>{e.fromCoinAmount=f,e.fixedFromCoin=!0,e.isInputTotalAmount=!1}),onOnSelect:m[4]||(m[4]=f=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.positionError?(F(),Ke(V,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):oe("",!0)]),s("div",In,[Ee(T,{modelValue:e.toCoinAmount,"onUpdate:modelValue":m[5]||(m[5]=f=>e.toCoinAmount=f),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:m[6]||(m[6]=f=>e.maxBtnSelect("toCoin")),onOnHalf:m[7]||(m[7]=f=>e.halfBtnSelect("toCoin")),onOnInput:m[8]||(m[8]=f=>{e.toCoinAmount=f,e.fixedFromCoin=!1,e.isInputTotalAmount=!1}),onOnSelect:m[9]||(m[9]=f=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.positionError?(F(),Ke(V,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):oe("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme=="default"?(F(),Y("img",{key:1,class:"add",src:mo,alt:"",onClick:m[10]||(m[10]=(...f)=>e.toggle&&e.toggle(...f))})):oe("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme!=="default"?(F(),Y("img",{key:2,class:"add",src:vo,alt:"",onClick:m[11]||(m[11]=(...f)=>e.toggle&&e.toggle(...f))})):oe("",!0)]),e.isShowtotalAmount?(F(),Y("div",Ln,[An,s("span",null,ce(e.liquidityTotalAmount)+" ",1)])):oe("",!0),Ee(i,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"fixed-from-coin":e.fixedFromCoin,"is-input-total-amount":e.isInputTotalAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price-tab":e.currentPriceTab,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","fixed-from-coin","is-input-total-amount","min-price","max-price","current-price-tab","current-price","current-price-reverse"]),Ee(S,{class:"add-liquidity-btn",disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,onClick:m[12]||(m[12]=f=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:pt(()=>[Rt(ce(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),e.showCoinSelect?(F(),Ke(ee,{key:1,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:m[13]||(m[13]=f=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):oe("",!0),e.isViewDetail?(F(),Ke(Ie,{key:2,"pool-info":e.poolInfo,onOnClose:m[14]||(m[14]=f=>e.isViewDetail=!1)},null,8,["pool-info"])):oe("",!0),e.isShowLiquidityModal?(F(),Ke(Pe,{key:3,"pool-info":e.poolInfo,title:e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direction,"is-increase":!1,onToAdd:e.getAddLiquidityType,onOnClose:m[15]||(m[15]=f=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onToAdd"])):oe("",!0)])}const Et=ot(yn,[["render",Nn]]),qn=tt({components:{NewLiquidityLeft:Ht,NewLiquidityRight:Et},setup(){Bt(()=>{ao()});const e=wt();return{tickList:Qe,route:e}}});const Mn={key:0,class:"loading-spin-liquidity loading-global"},$n={class:"privide-liquidity"};function Bn(e,m,ke,de,B,Se){var V,i;const E=Mt,X=Ht,T=Et;return F(),Y(gt,null,[!e.tickList&&((i=(V=e.route)==null?void 0:V.query)!=null&&i.poolAddress)?(F(),Y("div",Mn,[Ee(E)])):oe("",!0),s("div",$n,[Ee(X),Ee(T)])],64)}const gi=ot(qn,[["render",Bn],["__scopeId","data-v-fc58011a"]]);export{gi as default};
