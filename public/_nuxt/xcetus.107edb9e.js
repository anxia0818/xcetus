import{_ as an}from"./xwhale-header.b05500b2.js";import{_ as tn,W as on}from"./w-count-down.d8e23dc9.js";import{l as se,e as J,q as ln,o as d,f as b,h as a,v as I,x as F,t as Oe,j as W,p as ee,k as ne,m as u,r as y,D as X,i as x,c as D,w as L,B as ie,K as Ve,u as Be,z as we,a as Ie,a4 as sn,a9 as un,I as rn,S as dn,M as cn,y as mn,C as vn,F as We,s as Le,a8 as gn,a7 as pn}from"./entry.5ed4d49a.js";import{u as Ee}from"./xcetus.15ca13c9.js";import{a as ue,u as re}from"./sha256.d7ff2465.js";import{i as q}from"./import-icon.de3e6c66.js";import{e as $,s as Ce,a as Ne,c as Fe,p as Z,u as Xe,q as _e,D as Me}from"./pool.f0f327ff.js";import{u as $e}from"./useWhale.53b2b352.js";import{_ as Ye}from"./xWHALE-icon.2df34cd4.js";import{_ as He}from"./WHALE-icon.28f954ba.js";import{_ as fn}from"./head-switch.2d7a9541.js";/* empty css              *//* empty css              */import{_ as hn}from"./icon-selected_3x.09e9a6f0.js";/* empty css              *//* empty css              */import{u as _n}from"./useTheme.b687b8a6.js";import{_ as wn}from"./img-leverage_2x.1c577303.js";import"./index.7c533de7.js";const Cn={props:{titleText:{type:String,default:""},tipsText:{type:String,default:""},imgIcon:{type:String,default:""},value:{type:String,default:"--"}},setup(e){const{t:n}=se();return{t:n}}};const bn=e=>(ee("data-v-77f61894"),e=e(),ne(),e),Sn={class:"table-rewards"},yn={class:"text-top-all"},An={key:0,class:"icon-hover-box"},kn=bn(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-information"})],-1)),Tn={class:"tips-text-box"},Bn={key:0,alt:""};function In(e,n,r,o,A,k){const _=ln("image");return d(),b("div",Sn,[a("div",yn,[a("p",null,I(r.titleText),1),r.tipsText?(d(),b("div",An,[kn,a("div",Tn,I(r.titleText=="est.APR"?"Estimated APR of the current epoch for all xCETUS holders.":"The number of qualified positions in this epoch."),1)])):F("",!0)]),a("span",null,[a("p",null,[r.imgIcon?Oe((d(),b("img",Bn,null,512)),[[_,r.imgIcon]]):F("",!0),W(I(r.value),1)])])])}const En=J(Cn,[["render",In],["__scopeId","data-v-77f61894"]]),Nn={setup(e){const{t:n}=se(),r=Ee(),o=u(()=>r),A=u(()=>o.value.pendingAmount),k=u(()=>(console.log(o.value.nextStartTime,"===>xcetus.value.nextStartTime"),o.value.nextStartTime)),_=u(()=>1683094391),p=u(()=>o.value.xcetusShare&&$(o.value.xcetusShare,2)),f=ue(),B=u(()=>f),g=u(()=>o.value.cetusApr&&o.value.cetusApr>.01?$(Ce(o.value.cetusApr,2),2):$(o.value.cetusApr,2)),l=u(()=>o.value.pendingCoinInfo),c=y("");X(()=>l.value,E=>{E&&!Fe(E)?c.value=`Pending yield (${E.symbol})`:c.value="Pending yield"},{immediate:!0});const v=()=>{setTimeout(()=>{r.getDividendManager()},3e3)},s=u(()=>o.value.dividendManagerInfo),R=u(()=>{const E=parseInt(String(new Date().getTime()/1e3)),K=s.value.interval_day,Q=(E-Number(s.value.start_time))/(K*60);return console.log(parseInt(String(Q))>0,"====>(parseInt(String(time))) > 0"),parseInt(String(Q))>0}),ce=re(),me=u(()=>ce),{setIsShowSuccess:Se,setIsShowRejected:ve,setIsShowWaiting:G,setTransactionDesc:Y,setTransactionTxid:ge}=ce,H=$e("Sui"),j=y(!1),ye=u(()=>o.value.venft_id),h=u(()=>me.value.chainName?Ne(me.value.chainName):{});return{t:n,pendingAmount:A,nextStartTime:k,wallet:B,myShare:p,importIcon:q,nextEndTime:_,pendingYieldText:c,cetusApr:g,pendingCoinInfo:l,getNextEpoch:v,canClaim:R,claimPendingYield:async()=>{j.value=!0,G(!0),ge(""),Y(`${n("tips.claimingPendingYield")} ${A.value} ${l.value.symbol}`);try{let E;const K=await H.getRedeemDividendV2Payload(ye.value);console.log(K,"payload==>");const Q=await B.value.currentWallet.signAndExecuteTransactionBlock(K);if(E=h.value.handleTx(Q),E&&E.hash){ge(E.hash),G(!1),Se(!0);const w={title:"Claim",desc:`Claimed ${A.value} ${l.value.symbol} successfully.`,hash:E.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:l.value.symbol,numa:`+ ${A.value}`,logoa:l.value.logo_url}};h.value.showTransitionPending(w);const M=await h.value.watchTransaction(w);console.log("0221###swap###transitionStatus####",M),M&&setTimeout(()=>{r.getVeNFTDividendInfo(),j.value=!1},3e3),r.getOwnerLockCetuss(B.value.address)}else G(!1),ve(!0),j.value=!1}catch(E){G(!1),ve(!0),j.value=!1,console.log(E,"error===>")}},claimLoading:j,addCommom:$}}},$n=""+new URL("staking-rewards-banner-h5.1c7401db.png",import.meta.url).href,xn="data:image/png;base64,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";const be=e=>(ee("data-v-26a68a72"),e=e(),ne(),e),Un={class:"top-banner"},Dn=be(()=>a("img",{src:$n,alt:""},null,-1)),Rn=be(()=>a("p",null,"Convert CETUS to xCETUS to start earning",-1)),Pn={class:"bot-count"},Wn=be(()=>a("span",null,"Reward distribution in ",-1)),Ln={class:"holder-rewards"},Mn={class:"title"},On=be(()=>a("div",{class:"left"},[a("img",{src:xn,alt:""}),a("span",null,"xCETUS Staking Rewards")],-1)),Vn={class:"right"},Fn={class:"rewards-value"},Xn={class:"claim-h5"};function Yn(e,n,r,o,A,k){var B;const _=tn,p=ie,f=En;return d(),b("div",null,[a("div",Un,[Dn,Rn,a("div",Pn,[Wn,x(_,{"start-time":o.nextStartTime,onCountDown:n[0]||(n[0]=g=>e.$emit("getNextEpoch"))},null,8,["start-time"])])]),a("div",Ln,[a("div",Mn,[On,a("div",Vn,[o.wallet&&o.wallet.address?(d(),D(p,{key:0,loading:o.claimLoading,disabled:!o.canClaim||o.pendingAmount=="--"||o.pendingAmount<=0,onClick:o.claimPendingYield},{default:L(()=>[W(" Claim ")]),_:1},8,["loading","disabled","onClick"])):F("",!0)])]),a("div",Fn,[x(f,{"title-text":"est.APR","tips-text":"good",value:o.cetusApr+"%"},null,8,["title-text","value"]),x(f,{"title-text":"My share",value:o.myShare+"%"},null,8,["value"]),x(f,{"title-text":o.pendingYieldText,"img-icon":(B=o.pendingCoinInfo)==null?void 0:B.logo_url,value:o.addCommom(o.pendingAmount,6)},null,8,["title-text","img-icon","value"])]),a("div",Xn,[o.wallet&&o.wallet.address?(d(),D(p,{key:0,disabled:!o.canClaim||o.pendingAmount=="--"||o.pendingAmount<=0,loading:o.claimLoading,onClick:n[1]||(n[1]=g=>e.$emit("claimPendingYield"))},{default:L(()=>[W(" Claim ")]),_:1},8,["disabled","loading"])):F("",!0)])])])}const Hn=J(Nn,[["render",Yn],["__scopeId","data-v-26a68a72"]]),jn={components:{WcountDown:on},props:{vItem:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},setup(e,n){const{t:r}=se();console.log(e.vItem,"vItem");const o=Ee(),A=re(),k=u(()=>A),_=v=>{n.emit("claim",v),o.setClaimLoading(v.id)},p=u(()=>o),f=u(()=>new Date().getTime()/1e3>e.vItem.locked_until_time),B=v=>{n.emit("cancelRedeemPayload",v),o.setClaimLoading(v.id)};u(()=>k.value.chainName),$e("Sui");const g=ue();return u(()=>g),u(()=>p.value.venft_id),u(()=>k.value.chainName?Ne(k.value.chainName):{}),{t:r,prettyAmount:Z,claimBoolean:f,toClaim:_,toCancel:B,claimWhale:v=>{n.emit("claimWhale",v)},cancelRedeemPayload:v=>{n.emit("cancelRedeemPayload",v)}}}};const xe=e=>(ee("data-v-22a782cd"),e=e(),ne(),e),Zn={class:"vesting-box"},qn={class:"left"},Gn=xe(()=>a("img",{src:Ye,alt:""},null,-1)),Kn=xe(()=>a("svg",{class:"icon","aria-hidden":"true"},[a("use",{"xlink:href":"#icon-icon-swap2"})],-1)),Qn=xe(()=>a("img",{src:He,alt:""},null,-1)),zn={class:"available-all"},Jn={class:"available"},ea={key:0},na={key:1};function aa(e,n,r,o,A,k){const _=Ve("WcountDown"),p=ie;return d(),b("div",Zn,[a("div",qn,[a("p",null,[a("span",null,[Gn,W(" "+I(("addCommom"in e?e.addCommom:Be($))(o.prettyAmount(r.vItem.xcetus_amount,9),9))+" xCETUS ",1)]),Kn,a("span",null,[Qn,W(" "+I(("addCommom"in e?e.addCommom:Be($))(o.prettyAmount(r.vItem.cetus_amount,9),9))+" CETUS ",1)])]),a("div",zn,[a("div",Jn,[a("span",null,I(o.claimBoolean?"Available":"Available in"),1),o.claimBoolean?F("",!0):(d(),D(_,{key:0,"start-time":r.vItem.locked_start_time,"end-time":r.vItem.locked_until_time,onCountDown:n[0]||(n[0]=f=>e.$emit("countDown"))},null,8,["start-time","end-time"]))]),a("div",{class:we(o.claimBoolean?"highlight right-h5":"right-h5")},[o.claimBoolean?(d(),b("span",ea,"Claim")):(d(),b("span",na,"Cancel"))],2)])]),o.claimBoolean?(d(),D(p,{key:0,disabled:!o.claimBoolean||r.loading,loading:r.loading,onClick:n[1]||(n[1]=f=>o.claimWhale(r.vItem))},{default:L(()=>[W(I(o.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"])):(d(),D(p,{key:1,type:"text",class:"right",disabled:r.loading,loading:r.loading,onClick:n[2]||(n[2]=f=>o.cancelRedeemPayload(r.vItem))},{default:L(()=>[W(I(o.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"]))])}const ta=J(jn,[["render",aa],["__scopeId","data-v-22a782cd"]]),oa=Ie({props:{inputValue:{type:String,default:""},coinSymbol:{type:String,default:""},whaleDirection:{type:String,default:""},address:{type:String,default:""},balance:{type:String,default:""}},setup(e,n){const{t:r,locale:o}=se(),A=re(),k=u(()=>A),_=sn(un,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),p=ue(),f=u(()=>p),B=Xe(),g=u(()=>B),l=v=>{const R=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");v.target.value=v.target.value.replace(R,"$1")},c=u(()=>{var v;return g.value.tokensObj&&e.address&&g.value.tokensObj[e.address]&&((v=g.value.tokensObj[e.address])==null?void 0:v.decimals)});return X(()=>g.value.RATES,v=>{v&&console.log(v,"price====>")},{immediate:!0}),{pool:g,t:r,addCommom:$,store:k,wallet:f,indicator:_,inputChange:l,importIcon:q,coinDecimals:c}}});const la=e=>(ee("data-v-83d9dead"),e=e(),ne(),e),sa={class:"card"},ia={class:"top"},ua={class:"left"},ra={class:"loading-token"},da={key:0,src:He,alt:""},ca={key:1,src:Ye,alt:""},ma={class:"bottom"},va=la(()=>a("div",null,null,-1)),ga={class:"top"},pa={class:"right"},fa={key:0,class:"balance"};function ha(e,n,r,o,A,k){var B,g;const _=rn,p=dn,f=ie;return d(),b("div",sa,[a("div",ia,[x(_,{value:e.inputValue,placeholder:"0.0",onChange:e.inputChange,onInput:n[0]||(n[0]=l=>e.$emit("onInput",l.target.value)),onFocus:n[1]||(n[1]=l=>e.$emit("onFocus"))},null,8,["value","onChange"]),a("div",ua,[a("div",ra,[e.coinSymbol=="CETUS"?(d(),b("img",da)):(d(),b("img",ca)),a("div",null,[a("p",null,I(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1)])])])]),a("div",ma,[va,a("div",ga,[a("div",pa,[a("span",null,I(e.$t("common.balance")),1),e.balance?(d(),b("span",fa,I(e.balance>1?("addCommom"in e?e.addCommom:Be($))(e.balance):e.balance),1)):(d(),D(p,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})),e.whaleDirection=="From"?(d(),D(f,{key:2,class:"max-btn",disabled:!e.balance||e.balance==0||!((B=e.wallet)!=null&&B.address),onClick:n[2]||(n[2]=l=>e.$emit("halfBalanne"))},{default:L(()=>[W(I("Half"))]),_:1},8,["disabled"])):F("",!0),e.whaleDirection=="From"?(d(),D(f,{key:3,class:"max-btn",disabled:!e.balance||e.balance==0||!((g=e.wallet)!=null&&g.address),onClick:n[3]||(n[3]=l=>e.$emit("maxBalanne"))},{default:L(()=>[W(I(e.$t("button.max")),1)]),_:1},8,["disabled"])):F("",!0)])])])])}const _a=J(oa,[["render",ha],["__scopeId","data-v-83d9dead"]]);const wa=Ie({components:{Modal:cn},setup(e,n){const r=re(),o=y(!1);u(()=>r);const A=ue(),k=u(()=>A);return{store:r,isSelect:o,clickConvert:()=>{o.value&&localStorage.setItem(`notRemind${k.value.address}`,!0),n.emit("clickConvert")}}}}),Ue=e=>(ee("data-v-ee04003a"),e=e(),ne(),e),Ca=Ue(()=>a("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),ba=[Ca],Sa={class:"token-waring-conetnt"},ya=Ue(()=>a("div",{class:"tips-text"},[W(" Please note that after conversion, if you want to convert xCETUS back to CETUS, a vesting period will be applied & different vesting durations correspond to different redeem ratios. "),a("a",{href:"https://cetus-1.gitbook.io/cetus-docs/tokenomics/xcetus",target:"_blank"}," Learn more")],-1)),Aa={class:"read-text"},ka={key:0,src:hn},Ta=Ue(()=>a("span",null," Do not remind again. ",-1));function Ba(e,n,r,o,A,k){const _=ie,p=Ve("Modal");return d(),D(p,{width:"440px",visible:!0,footer:null,title:null,"mask-closable":!0,onCancel:n[3]||(n[3]=f=>e.$emit("close"))},{closeIcon:L(()=>[(d(),b("svg",{class:"icon modal-icon-close","aria-hidden":"true",onClick:n[0]||(n[0]=f=>e.$emit("close"))},ba))]),default:L(()=>[a("div",Sa,[ya,a("div",Aa,[a("div",{class:"radio",onClick:n[1]||(n[1]=f=>e.isSelect=!e.isSelect)},[e.isSelect?(d(),b("img",ka)):F("",!0)]),Ta]),x(_,{class:"big-btn continue",onClick:n[2]||(n[2]=()=>e.clickConvert())},{default:L(()=>[W("Convert")]),_:1})])]),_:1})}const Ia=J(wa,[["render",Ba],["__scopeId","data-v-ee04003a"]]),Ea=Ie({setup(){const e=Ee(),n=u(()=>e),r=u(()=>n.value.venft_id),o=u(()=>n.value.venftInfo),A=Xe(),k=u(()=>A),_=re(),p=u(()=>_),f=_n();u(()=>k.value.tokensObj&&k.value.tokensObj["0x2a4f647bc73f070182436658bff75060246019857c769ad9268c22c4472bca7f::cetus::CETUS"]);const B=y("");let g=y(!1);const l=y(""),c=y(""),v=y(!1),s=y("convert"),{t:R}=se(),ce=y([{time:"15 D",num:15},{time:"30 D",num:30},{time:"90 D",num:90},{time:"180 D",num:180}]),me=y([{name:"est.APR",value:"100.12%"},{name:"My share",value:"<0.1%"},{name:"Pending yield (USDC)",value:0}]),Se=y([{name:"My total locked",value:"$100.12"},{name:"Pending rewards (xCETUS)",value:"100.12"},{name:"",value:""}]),ve=y([{name:"My positions",value:"12"},{name:"My qualified positions",value:"0"},{name:"Pending rewards (xCETUS)",value:"100.12"}]),G=window.setInterval(()=>{e.getXcetusApr(),m.value.address&&(e.getMyShare(m.value.address),e.getVeNFTDividendInfo())},6e4);mn(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||e.getDividendManager()}),e.getXcetusApr(),e.getDividendManager()}),vn(()=>{window.clearInterval(G),document.removeEventListener("visibilitychange",()=>{console.log("移除监听")})}),X(()=>p.value.theme,t=>{t!=="sui"&&f.selectSuiTheme()},{immediate:!0});const Y=u(()=>(console.log(n.value.whaleBalance,"==>xcetus.value.whaleBalance"),n.value.whaleBalance)),ge=u(()=>n.value.xWhaleBalance),H=u(()=>n.value.availableXwhale),j=u(()=>n.value.redeemingXwhale),ye=u(()=>{if(s.value=="convert"){if(Number(l.value)>Number(Y.value))return!0}else if(Number(l.value)>Number(H.value))return!0;return!l.value||!c.value||Number(l.value)==0||Number(c.value)==0}),h=y("180"),ae=u(()=>(console.log(s.value=="convert","===>1212211"),s.value=="convert"&&Number(l.value)>Number(Y.value)?R("button.insufficientBalance",{name:"CETUS"}):s.value!=="convert"&&Number(l.value)>Number(H.value)?R("button.insufficientBalance",{name:"xCETUS"}):Number(h.value)<15?"Minimum vesting duration is 15 days":s.value=="convert"&&r?"Convert":s.value!=="convert"&&r?"Redeem":"Convert"));console.log(ae.value,"btnText.value===>");const E=t=>{l.value="",c.value="",s.value=t},K=()=>{g.value=!0,setTimeout(()=>{g.value=!1},300)},Q=t=>{h.value=t},w=y(!1),M=$e("Sui"),De=ue(),m=u(()=>De),Re=u(()=>n.value.ownerLocks);X(()=>m.value.address,t=>{console.log("触发",t),t?(e.getOwnerVeNFT(t),e.getAccountWhaleBalance(t),e.getOwnerLockCetuss(t),e.getMyShare(t)):e.loginOut()},{immediate:!0});const N=u(()=>p.value.chainName?Ne(p.value.chainName):{}),te=u(()=>p.value.chainName),{setIsShowSuccess:oe,setIsShowRejected:O,setIsShowWaiting:S,setTransactionDesc:le,setTransactionTxid:V}=_,Ae=async()=>{w.value=!0,S(!0),V(""),le(R("tips.converting",{from:`${$(l.value,9)} CETUS`,and:"to",to:`${$(l.value,9)} xCETUS`}));try{let t;const i=_e(l.value,9);console.log(r.value,"===>venft_id.value");const C=await M.depositCetus(i,r.value);console.log(C,"payload==>");const U=await m.value.currentWallet.signAndExecuteTransactionBlock(C);if(t=N.value.handleTx(U),t&&t.hash){V(t.hash),S(!1),oe(!0);const T={title:"Converted",desc:`Converted ${$(l.value,9)} xCETUS successfully`,hash:t.hash,tit:"Converted",icon:"icon-icon-Swap",tokenInfo:{tokena:"CETUS",numa:`- ${l.value}`,logoa:q("/sui-image/WHALE-icon.png"),tokenb:"xCETUS",numb:`+ ${l.value}`,logob:q("/sui-image/xWHALE-icon.png")}};te.value!=="Aptos"&&(T.res=t.res),N.value.showTransitionPending(T);const P=await N.value.watchTransaction(T);console.log("0221###swap###transitionStatus####",P),P&&setTimeout(()=>{e.getAccountWhaleBalance(m.value.address),e.getOwnerVeNFT(m.value.address),e.getOwnerLockCetuss(m.value.address),e.getMyShare(m.value.address)},3e3),w.value=!1}else S(!1),O(!0),w.value=!1;l.value=""}catch(t){S(!1),O(!0),w.value=!1,l.value="",console.log(t,"error===>")}},z=y(!0),ke=y("0"),je=async()=>{const t=_e(l.value,9),i=await M.redeemNum(t,Number(h.value));c.value=Z(i.amountOut,9),console.log("===>amount2222"),ke.value=i.percent},Ze=async()=>{const t=_e(c.value,9),i=await M.reverseRedeemNum(t,Number(h.value));console.log(i,"===>amount111"),l.value=Z(i.amountOut,9),ke.value=i.percent};X(()=>[l.value,h.value,z.value],([t,i,C])=>{console.log(t,"===>>>>>>>fromCoinAmount",typeof t),t&&i&&C&&Number(i)>=15&&je(),!t&&C&&(c.value="")},{immediate:!0}),X(()=>[c.value,h.value,z.value],([t,i,C])=>{t&&i&&!C&&Number(i)>=15&&(Ze(),console.log(t,"===>toCoinAmount")),!t&&!C&&(l.value="")},{immediate:!0}),X(()=>[h.value,z.value],([t,i])=>{Number(t)>180?h.value="180":Number(t)<15?i?c.value="":l.value="":t||(i?l.value="":c.value="")},{immediate:!0});const qe=()=>{z.value=!0,l.value=Ce(new Me(s.value!=="convert"?H.value:Y.value).div(new Me(2)).toString(),9)},Ge=()=>{z.value=!0,l.value=s.value!=="convert"?Ce(H.value,9):Ce(Y.value,9)},Pe=async()=>{w.value=!0,S(!0),V(""),le(R("tips.redeeming",{from:`${$(l.value,9)} xCETUS`,to:`${$(c.value,9)} CETUS`}));try{let t;const i=_e(l.value,9);console.log(i.toString(),"538====>");const C=await M.getRedeemLockPayload(i,r.value,Number(h.value));console.log(C,"payload==>");const U=await m.value.currentWallet.signAndExecuteTransactionBlock(C);if(t=N.value.handleTx(U),t&&t.hash){V(t.hash),S(!1),oe(!0);const T={title:"Redemption",desc:"Redemption transaction submitted successfully.",hash:t.hash,tit:"Vesting",icon:"icon-icon-Removed",tokenInfo:{tokena:"xCETUS",numa:`- ${l.value}`,logoa:q("/sui-image/xWHALE-icon.png")}};te.value!=="Aptos"&&(T.res=t.res),N.value.showTransitionPending(T);const P=await N.value.watchTransaction(T);console.log("0221###swap###transitionStatus####",P),P&&setTimeout(()=>{e.getAccountWhaleBalance(m.value.address),e.getOwnerVeNFT(m.value.address),e.getOwnerLockCetuss(m.value.address),e.getMyShare(m.value.address)},3e3),w.value=!1}else S(!1),O(!0),w.value=!1;l.value="",c.value=""}catch(t){S(!1),O(!0),w.value=!1,l.value="",c.value="",console.log(t,"error===>")}};X(()=>[r.value,Re.value,o.value,m.value.address],([t,i,C,U])=>{U&&(t&&e.getVeNFTDividendInfo(),t&&!Fe(C)&&i&&i.length>0&&(console.log("执行了",i),e.getAvailableXCetus()))},{immediate:!0,deep:!0});const Ke=async t=>{w.value=!0,S(!0),V(""),le("");try{let i;console.log(t.id,"==>vItem.id");const C=await M.getCancelRedeemPayload(t.id,r.value);console.log(C,"payload==>");const U=await m.value.currentWallet.signAndExecuteTransactionBlock(C);if(i=N.value.handleTx(U),i&&i.hash){V(i.hash),S(!1),oe(!0);const T={title:"Cancelled Redemption",desc:"Cancelled redemption successfully.",hash:i.hash,tit:"Cancelled Redemption",icon:"icon-a-icon-Shutdown",tokenInfo:{tokena:"xCETUS",numa:`+ ${Z(t.xcetus_amount,9)}`,logoa:q("/sui-image/xWHALE-icon.png")}};te.value!=="Aptos"&&(T.res=i.res),N.value.showTransitionPending(T);const P=await N.value.watchTransaction(T);console.log("0221###swap###transitionStatus####",P),P&&setTimeout(()=>{e.getOwnerVeNFT(m.value.address),e.getOwnerLockCetuss(m.value.address),w.value=!1},3e3)}else S(!1),O(!0),w.value=!1;l.value="",c.value=""}catch(i){S(!1),O(!0),w.value=!1,l.value="",c.value="",e.setClaimLoading(""),console.log(i,"error===>")}},Qe=y({}),ze=()=>{console.log("倒计时结束"),e.getOwnerLockCetuss(m.value.address)},Je=async t=>{console.log(t,"vItem===>"),w.value=!0,S(!0),V(""),le(`${R("tips.claimingPendingYield")} ${$(Z(t.cetus_amount,9),9)} CETUS`);try{let i;const C=await M.getRedeemPayload(t.id,r.value);console.log(C,"payload==>");const U=await m.value.currentWallet.signAndExecuteTransactionBlock(C);if(i=N.value.handleTx(U),i&&i.hash){V(i.hash),S(!1),oe(!0);const T={title:"Claimed",desc:`Claimed ${$(Z(t.cetus_amount,9),9)} CETUS successfully.`,hash:i.hash,tit:"CETUS Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:"CETUS",numa:`+ ${Z(t.cetus_amount,9)}`,logoa:q("/sui-image/WHALE-icon.png")}};te.value!=="Aptos"&&(T.res=i.res),N.value.showTransitionPending(T);const P=await N.value.watchTransaction(T);console.log("0221###swap###transitionStatus####",P),P&&setTimeout(()=>{e.getOwnerLockCetuss(m.value.address),e.getAccountWhaleBalance(m.value.address),e.getOwnerVeNFT(m.value.address),e.getMyShare(m.value.address),e.getAvailableXCetus(),w.value=!1},3e3)}else S(!1),O(!0),w.value=!1;l.value="",c.value=""}catch(i){S(!1),O(!0),w.value=!1,l.value="",c.value="",e.setClaimLoading(""),console.log(i,"error===>")}},Te=y(!1),en=()=>{!localStorage.getItem(`notRemind${m.value.address}`)&&ae.value=="Convert"?Te.value=!0:ae.value=="Redeem"?Pe():Ae()},nn=()=>{Te.value=!1,Ae()},pe=u(()=>n.value.pendingCoinInfo),fe=u(()=>n.value.pendingAmount),he=y(!1);return{clickModalConvert:nn,openConfirmModal:Te,validateInput:()=>{h.value&&(h.value=h.value.replace(/[^\d]/g,""),h.value.charAt(0)==="0"&&(h.value=h.value.slice(1)))},countDown:ze,value:B,change:g,clickExchange:K,fromCoinAmount:l,toCoinAmount:c,showCoinSelect:v,headSwitchValue:s,headSwitchChange:E,vestingDateList:ce,vestingParameter:h,vestingTab:Q,holderList:me,lockupList:Se,leaderboardList:ve,whaleBalance:Y,depositCetus:Ae,btnText:ae,loading:w,redeemRatio:ke,halfBalanne:qe,maxBalanne:Ge,xWhaleBalance:ge,availableXwhale:H,redeemingXwhale:j,withdrawWhale:Pe,ownerLocks:Re,cancelRedeemPayload:Ke,holderInfo:Qe,btnDisabled:ye,fixedFromCoin:z,walletStore:De,claimWhale:Je,wallet:m,depositOrWithdraw:en,pendingAmount:fe,claimPendingYield:async()=>{he.value=!0,S(!0),V(""),le(`${R("tips.claimingPendingYield")} ${fe.value} ${pe.value.symbol}`);try{let t;const i=await M.getRedeemDividendV2Payload(r.value);console.log(i,"payload==>");const C=await m.value.currentWallet.signAndExecuteTransactionBlock(i);if(t=N.value.handleTx(C),t&&t.hash){V(t.hash),S(!1),oe(!0);const U={title:"Claim",desc:`Claimed ${fe.value} ${pe.value.symbol} successfully.`,hash:t.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:pe.value.symbol,numa:`+ ${fe.value}`,logoa:pe.value.logo_url}};te.value!=="Aptos"&&(U.res=t.res),N.value.showTransitionPending(U);const T=await N.value.watchTransaction(U);console.log("0221###swap###transitionStatus####",T),T&&setTimeout(()=>{e.getVeNFTDividendInfo(),he.value=!1},3e3),e.getOwnerLockCetuss(m.value.address)}else S(!1),O(!0),he.value=!1,w.value=!1}catch(t){S(!1),O(!0),he.value=!1,console.log(t,"error===>")}},inputBlur:()=>{Number(h.value)<15&&(h.value="15")},getNextEpoch:()=>{e.getDividendManager()}}}});const de=e=>(ee("data-v-924bb0a1"),e=e(),ne(),e),Na={class:"dashboard-all"},$a={class:"dashboard-content"},xa={class:"content-left"},Ua={key:0,class:"vesting"},Da=de(()=>a("p",null,"Vesting",-1)),Ra={class:"content-right"},Pa={key:0,class:"card-container"},Wa={class:"card-item"},La={class:"card-item"},Ma={class:"exchange"},Oa=de(()=>a("use",{"xlink:href":"#icon-icon-swap2"},null,-1)),Va=[Oa],Fa={key:1,class:"card-redeem"},Xa={class:"card-item"},Ya={class:"vesting-duration"},Ha=de(()=>a("p",null,"Vesting duration",-1)),ja={class:"vesting-content"},Za={class:"vesting-left"},qa={class:"value-days"},Ga=de(()=>a("span",null,"days",-1)),Ka={class:"vesting-right"},Qa=["onClick"],za={class:"card-item"},Ja={class:"redeem-ratio"},et=de(()=>a("span",null,"Redeem ratio",-1));function nt(e,n,r,o,A,k){const _=an,p=Hn,f=ta,B=fn,g=_a,l=pn,c=ie,v=Ia;return d(),b("div",Na,[x(_,{title:"Dashboard","total-xwhale":e.xWhaleBalance,"available-xwhale":e.availableXwhale,"redeeming-xwhale":e.redeemingXwhale},null,8,["total-xwhale","available-xwhale","redeeming-xwhale"]),a("div",$a,[a("div",xa,[x(p,{"holder-info":e.holderInfo,"pending-amount":e.pendingAmount,"claim-loading":e.claimLoading,onClaimPendingYield:e.claimPendingYield,onGetNextEpoch:e.getNextEpoch},null,8,["holder-info","pending-amount","claim-loading","onClaimPendingYield","onGetNextEpoch"]),e.ownerLocks&&e.ownerLocks.length>0?(d(),b("div",Ua,[Da,(d(!0),b(We,null,Le(e.ownerLocks,s=>(d(),D(f,{key:s,"v-item":s,loading:e.loading,onCountDown:e.countDown,onClaimWhale:e.claimWhale,onCancelRedeemPayload:e.cancelRedeemPayload},null,8,["v-item","loading","onCountDown","onClaimWhale","onCancelRedeemPayload"]))),128))])):F("",!0)]),a("div",Ra,[x(B,{"head-switch-value":e.headSwitchValue,"left-text":"Get xCETUS","right-text":"Redeem CETUS",onHeadSwitchChange:n[0]||(n[0]=s=>{e.headSwitchChange(s)})},null,8,["head-switch-value"]),e.headSwitchValue=="convert"?(d(),b("div",Pa,[a("div",Wa,[x(g,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[1]||(n[1]=s=>e.fromCoinAmount=s),"input-value":e.fromCoinAmount,"coin-symbol":"CETUS","whale-direction":"From",balance:e.whaleBalance,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:n[2]||(n[2]=s=>{e.fromCoinAmount=s})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),a("div",La,[x(g,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[3]||(n[3]=s=>e.fromCoinAmount=s),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"To",balance:e.availableXwhale,onOnInput:n[4]||(n[4]=s=>{e.fromCoinAmount=s})},null,8,["modelValue","input-value","balance"])]),a("img",{class:we(e.change?"gang animationex":"gang"),src:wn,alt:""},null,2),a("div",Ma,[(d(),b("svg",{class:we(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Va,2))])])):(d(),b("div",Fa,[a("div",Xa,[x(g,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[5]||(n[5]=s=>e.fromCoinAmount=s),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"From",balance:e.availableXwhale,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:n[6]||(n[6]=s=>{e.fixedFromCoin=!0,e.fromCoinAmount=s})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),a("div",Ya,[Ha,a("div",ja,[a("div",Za,[a("div",qa,[Oe(a("input",{"onUpdate:modelValue":n[7]||(n[7]=s=>e.vestingParameter=s),onInput:n[8]||(n[8]=(...s)=>e.validateInput&&e.validateInput(...s)),onBlur:n[9]||(n[9]=(...s)=>e.inputBlur&&e.inputBlur(...s))},null,544),[[gn,e.vestingParameter]])]),Ga]),a("div",Ka,[(d(!0),b(We,null,Le(e.vestingDateList,s=>(d(),b("div",{key:s.time,class:we(["box-table",{"box-table-active":s.num===Number(e.vestingParameter)}]),onClick:R=>e.vestingTab(s.num)},I(s.time),11,Qa))),128))])]),x(l,{value:e.vestingParameter,"onUpdate:value":n[10]||(n[10]=s=>e.vestingParameter=s),max:180,min:15},null,8,["value"])]),a("div",za,[x(g,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[11]||(n[11]=s=>e.toCoinAmount=s),"input-value":e.toCoinAmount,"coin-symbol":"CETUS","whale-direction":"To",balance:e.whaleBalance,onOnInput:n[12]||(n[12]=s=>{e.fixedFromCoin=!1,e.toCoinAmount=s})},null,8,["modelValue","input-value","balance"])]),a("div",Ja,[et,a("p",null,I(e.redeemRatio)+"%",1)])])),e.wallet&&e.wallet.address?(d(),D(c,{key:2,class:"big-btn",loading:e.loading,disabled:e.btnDisabled,onClick:e.depositOrWithdraw},{default:L(()=>[a("span",null,I(e.btnText),1)]),_:1},8,["loading","disabled","onClick"])):(d(),D(c,{key:3,class:"big-btn",onClick:n[13]||(n[13]=s=>e.walletStore.setIsShowWalletModal(!0))},{default:L(()=>[a("span",null,I(e.$t("button.connectWallet")),1)]),_:1}))])]),e.openConfirmModal?(d(),D(v,{key:0,onClickConvert:e.clickModalConvert,onClose:n[14]||(n[14]=()=>e.openConfirmModal=!e.openConfirmModal)},null,8,["onClickConvert"])):F("",!0)])}const kt=J(Ea,[["render",nt],["__scopeId","data-v-924bb0a1"]]);export{kt as default};
