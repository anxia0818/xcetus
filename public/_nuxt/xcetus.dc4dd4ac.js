import{_ as en}from"./xwhale-header.6b4d9e9d.js";import{_ as nn,W as an,a as tn}from"./xcetus-confirm.822e1226.js";import{l as ne,e as ae,q as on,o as c,f as S,h as o,v as k,x as L,t as Oe,j as F,p as te,k as oe,m as u,r as y,D as V,i as E,c as P,w as X,B as pe,K as ln,u as Ie,z as he,a as Ye,a4 as sn,a9 as un,I as rn,S as dn,y as cn,C as mn,F as We,s as Le,a8 as vn,a7 as gn}from"./entry.704753f9.js";import{u as xe}from"./xcetus.2a8c0310.js";import{a as we,u as Ce}from"./sha256.d1b62c32.js";import{i as q}from"./import-icon.de3e6c66.js";import{e as x,s as fe,a as Pe,c as Ne,p as Z,u as $e,q as ge,D as Me}from"./pool.0669cdb9.js";import{u as Ee}from"./useWhale.9f624c24.js";import{_ as Ve}from"./xWHALE-icon.2df34cd4.js";import{_ as Fe}from"./WHALE-icon.28f954ba.js";import{_ as hn}from"./head-switch.65bcc8c7.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{u as fn}from"./useTheme.3abf8707.js";import{_ as pn}from"./img-leverage_2x.1c577303.js";import"./icon-selected_3x.09e9a6f0.js";import"./index.9ccb8e34.js";const wn={props:{titleText:{type:String,default:""},tipsText:{type:String,default:""},imgIcon:{type:String,default:""},value:{type:String,default:"--"}},setup(e){const{t:a}=ne();return{t:a}}};const Cn=e=>(te("data-v-77f61894"),e=e(),oe(),e),_n={class:"table-rewards"},bn={class:"text-top-all"},yn={key:0,class:"icon-hover-box"},Sn=Cn(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),An={class:"tips-text-box"},Tn={key:0,alt:""};function kn(e,a,r,n,B,p){const A=on("image");return c(),S("div",_n,[o("div",bn,[o("p",null,k(r.titleText),1),r.tipsText?(c(),S("div",yn,[Sn,o("div",An,k(r.titleText=="est.APR"?"Estimated APR of the current epoch for all xCETUS holders.":"The number of qualified positions in this epoch."),1)])):L("",!0)]),o("span",null,[o("p",null,[r.imgIcon?Oe((c(),S("img",Tn,null,512)),[[A,r.imgIcon]]):L("",!0),F(k(r.value),1)])])])}const Bn=ae(wn,[["render",kn],["__scopeId","data-v-77f61894"]]),In={setup(e){const{t:a}=ne(),r=xe(),n=u(()=>r),B=u(()=>n.value.pendingAmount),p=u(()=>n.value.newPendingAmount),A=u(()=>(console.log(n.value.nextStartTime,"===>xcetus.value.nextStartTime"),n.value.nextStartTime)),C=u(()=>1683094391),f=u(()=>n.value.xcetusShare&&x(n.value.xcetusShare,2)),I=we(),h=u(()=>I),s=u(()=>n.value.cetusApr&&n.value.cetusApr>.01?x(fe(n.value.cetusApr,2),2):x(n.value.cetusApr,2)),m=u(()=>n.value.pendingCoinInfo),v=u(()=>n.value.newPendingCoinInfo),l=y("");V(()=>m.value,d=>{d&&!Ne(d)?l.value=`Pending yield (${d.symbol})`:l.value="Pending yield"},{immediate:!0});const U=y("");V(()=>v.value,d=>{d&&!Ne(d)?U.value=`Pending yield (${d.symbol})`:U.value="Pending yield"},{immediate:!0});const be=()=>{setTimeout(()=>{r.getDividendManager()},3e3)},se=u(()=>n.value.dividendManagerInfo),ye=u(()=>{const d=parseInt(String(new Date().getTime()/1e3)),R=se.value.interval_day,j=(d-Number(se.value.start_time))/(R*60);return console.log(parseInt(String(j))>0,"====>(parseInt(String(time))) > 0"),parseInt(String(j))>0}),ie=Ce(),ue=u(()=>ie),{setIsShowSuccess:H,setIsShowRejected:re,setIsShowWaiting:M,setTransactionDesc:Se,setTransactionTxid:de}=ie,_=Ee("Sui"),O=y(!1),Ae=u(()=>n.value.venft_id),K=u(()=>ue.value.chainName?Pe(ue.value.chainName):{});return{t:a,pendingAmount:B,nextStartTime:A,wallet:h,myShare:f,importIcon:q,nextEndTime:C,pendingYieldText:l,cetusApr:s,pendingCoinInfo:m,getNextEpoch:be,canClaim:ye,claimPendingYield:async()=>{O.value=!0,M(!0),de(""),Se(`${a("tips.claimingPendingYield")} ${B.value} ${m.value.symbol} ${Number(p.value)>0?"and":""} ${Number(p.value)>0?p.value+" "+v.value.symbol:""}`);try{let d;const R=await _.getRedeemDividendV2Payload(Ae.value);console.log(R,"payload==>");const j=await h.value.currentWallet.signAndExecuteTransactionBlock(R);if(d=K.value.handleTx(j),d&&d.hash){de(d.hash),M(!1),H(!0);const g={title:"Claim",desc:`Claimed ${B.value} ${m.value.symbol} ${Number(p.value)>0?"and":""} ${Number(p.value)>0?p.value+" "+v.value.symbol:""} successfully.`,hash:d.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:m.value.symbol,numa:`+ ${B.value}`,logoa:m.value.logo_url}};K.value.showTransitionPending(g);const Q=await K.value.watchTransaction(g);console.log("0221###swap###transitionStatus####",Q),Q&&setTimeout(()=>{r.getVeNFTDividendInfo(),O.value=!1},3e3),r.getOwnerLockCetuss(h.value.address)}else M(!1),re(!0),O.value=!1}catch(d){M(!1),re(!0),O.value=!1,console.log(d,"error===>")}},claimLoading:O,addCommom:x,newPendingCoinInfo:v,newPendingAmount:p,newPendingYieldText:U}}},Nn=""+new URL("staking-rewards-banner-h5.1c7401db.png",import.meta.url).href,xn="data:image/png;base64,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";const _e=e=>(te("data-v-8d9c9bbf"),e=e(),oe(),e),Pn={class:"top-banner"},En=_e(()=>o("img",{src:Nn,alt:""},null,-1)),Un=_e(()=>o("p",null,"Convert CETUS to xCETUS to start earning",-1)),Dn={class:"bot-count"},Rn=_e(()=>o("span",null,"Reward distribution in ",-1)),Wn={class:"holder-rewards"},Ln={class:"title"},Mn=_e(()=>o("div",{class:"left"},[o("img",{src:xn,alt:""}),o("span",null,"xCETUS Staking Rewards")],-1)),On={class:"right"},Yn={class:"rewards-value"},$n={key:0,class:"rewards-value"},Vn={class:"claim-h5"};function Fn(e,a,r,n,B,p){var I,h,s,m,v;const A=nn,C=pe,f=Bn;return c(),S("div",null,[o("div",Pn,[En,Un,o("div",Dn,[Rn,E(A,{"start-time":n.nextStartTime,onCountDown:a[0]||(a[0]=l=>e.$emit("getNextEpoch"))},null,8,["start-time"])])]),o("div",Wn,[o("div",Ln,[Mn,o("div",On,[n.wallet&&n.wallet.address?(c(),P(C,{key:0,loading:n.claimLoading,disabled:!n.canClaim||n.pendingAmount=="--"||n.pendingAmount<=0,onClick:n.claimPendingYield},{default:X(()=>[F(" Claim ")]),_:1},8,["loading","disabled","onClick"])):L("",!0)])]),o("div",Yn,[E(f,{"title-text":"est.APR","tips-text":"good",value:n.cetusApr+"%"},null,8,["title-text","value"]),E(f,{"title-text":"My share",value:n.myShare+"%"},null,8,["value"]),Number(n.pendingAmount)>0&&n.newPendingAmount=="0"?(c(),P(f,{key:0,"title-text":n.pendingYieldText,"img-icon":(I=n.pendingCoinInfo)==null?void 0:I.logo_url,value:n.addCommom(n.pendingAmount,6)},null,8,["title-text","img-icon","value"])):Number(n.newPendingAmount)>0&&n.pendingAmount=="0"?(c(),P(f,{key:1,"title-text":n.newPendingYieldText,"img-icon":(h=n.newPendingCoinInfo)==null?void 0:h.logo_url,value:n.addCommom(n.newPendingAmount,6)},null,8,["title-text","img-icon","value"])):n.newPendingAmount=="0"&&n.pendingAmount=="0"?(c(),P(f,{key:2,"title-text":n.newPendingYieldText,"img-icon":(s=n.newPendingCoinInfo)==null?void 0:s.logo_url,value:n.addCommom(n.newPendingAmount,6)},null,8,["title-text","img-icon","value"])):L("",!0)]),Number(n.pendingAmount)>0&&Number(n.newPendingAmount)>0?(c(),S("div",$n,[E(f,{"title-text":n.pendingYieldText,"img-icon":(m=n.pendingCoinInfo)==null?void 0:m.logo_url,value:n.addCommom(n.pendingAmount,6)},null,8,["title-text","img-icon","value"]),E(f,{"title-text":n.newPendingYieldText,"img-icon":(v=n.newPendingCoinInfo)==null?void 0:v.logo_url,value:n.addCommom(n.newPendingAmount,6)},null,8,["title-text","img-icon","value"])])):L("",!0),o("div",Vn,[n.wallet&&n.wallet.address?(c(),P(C,{key:0,disabled:!n.canClaim||n.pendingAmount=="--"||n.pendingAmount<=0,loading:n.claimLoading,onClick:a[1]||(a[1]=l=>e.$emit("claimPendingYield"))},{default:X(()=>[F(" Claim ")]),_:1},8,["disabled","loading"])):L("",!0)])])])}const Xn=ae(In,[["render",Fn],["__scopeId","data-v-8d9c9bbf"]]),Hn={components:{WcountDown:an},props:{vItem:{type:Object,default:()=>({})},loading:{type:Boolean,default:!1}},setup(e,a){const{t:r}=ne();console.log(e.vItem,"vItem");const n=xe(),B=Ce(),p=u(()=>B),A=v=>{a.emit("claim",v),n.setClaimLoading(v.id)},C=u(()=>n),f=u(()=>new Date().getTime()/1e3>e.vItem.locked_until_time),I=v=>{a.emit("cancelRedeemPayload",v),n.setClaimLoading(v.id)};u(()=>p.value.chainName),Ee("Sui");const h=we();return u(()=>h),u(()=>C.value.venft_id),u(()=>p.value.chainName?Pe(p.value.chainName):{}),{t:r,prettyAmount:Z,claimBoolean:f,toClaim:A,toCancel:I,claimWhale:v=>{a.emit("claimWhale",v)},cancelRedeemPayload:v=>{a.emit("cancelRedeemPayload",v)}}}};const Ue=e=>(te("data-v-22a782cd"),e=e(),oe(),e),jn={class:"vesting-box"},Zn={class:"left"},qn=Ue(()=>o("img",{src:Ve,alt:""},null,-1)),Gn=Ue(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-swap2"})],-1)),Kn=Ue(()=>o("img",{src:Fe,alt:""},null,-1)),Qn={class:"available-all"},zn={class:"available"},Jn={key:0},ea={key:1};function na(e,a,r,n,B,p){const A=ln("WcountDown"),C=pe;return c(),S("div",jn,[o("div",Zn,[o("p",null,[o("span",null,[qn,F(" "+k(("addCommom"in e?e.addCommom:Ie(x))(n.prettyAmount(r.vItem.xcetus_amount,9),9))+" xCETUS ",1)]),Gn,o("span",null,[Kn,F(" "+k(("addCommom"in e?e.addCommom:Ie(x))(n.prettyAmount(r.vItem.cetus_amount,9),9))+" CETUS ",1)])]),o("div",Qn,[o("div",zn,[o("span",null,k(n.claimBoolean?"Available":"Available in"),1),n.claimBoolean?L("",!0):(c(),P(A,{key:0,"start-time":r.vItem.locked_start_time,"end-time":r.vItem.locked_until_time,onCountDown:a[0]||(a[0]=f=>e.$emit("countDown"))},null,8,["start-time","end-time"]))]),o("div",{class:he(n.claimBoolean?"highlight right-h5":"right-h5")},[n.claimBoolean?(c(),S("span",Jn,"Claim")):(c(),S("span",ea,"Cancel"))],2)])]),n.claimBoolean?(c(),P(C,{key:0,disabled:!n.claimBoolean||r.loading,loading:r.loading,onClick:a[1]||(a[1]=f=>n.claimWhale(r.vItem))},{default:X(()=>[F(k(n.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"])):(c(),P(C,{key:1,type:"text",class:"right",disabled:r.loading,loading:r.loading,onClick:a[2]||(a[2]=f=>n.cancelRedeemPayload(r.vItem))},{default:X(()=>[F(k(n.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"]))])}const aa=ae(Hn,[["render",na],["__scopeId","data-v-22a782cd"]]),ta=Ye({props:{inputValue:{type:String,default:""},coinSymbol:{type:String,default:""},whaleDirection:{type:String,default:""},address:{type:String,default:""},balance:{type:String,default:""}},setup(e,a){const{t:r,locale:n}=ne(),B=Ce(),p=u(()=>B),A=sn(un,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),C=we(),f=u(()=>C),I=$e(),h=u(()=>I),s=v=>{const U=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");v.target.value=v.target.value.replace(U,"$1")},m=u(()=>{var v;return h.value.tokensObj&&e.address&&h.value.tokensObj[e.address]&&((v=h.value.tokensObj[e.address])==null?void 0:v.decimals)});return V(()=>h.value.RATES,v=>{v&&console.log(v,"price====>")},{immediate:!0}),{pool:h,t:r,addCommom:x,store:p,wallet:f,indicator:A,inputChange:s,importIcon:q,coinDecimals:m}}});const oa=e=>(te("data-v-83d9dead"),e=e(),oe(),e),la={class:"card"},sa={class:"top"},ia={class:"left"},ua={class:"loading-token"},ra={key:0,src:Fe,alt:""},da={key:1,src:Ve,alt:""},ca={class:"bottom"},ma=oa(()=>o("div",null,null,-1)),va={class:"top"},ga={class:"right"},ha={key:0,class:"balance"};function fa(e,a,r,n,B,p){var I,h;const A=rn,C=dn,f=pe;return c(),S("div",la,[o("div",sa,[E(A,{value:e.inputValue,placeholder:"0.0",onChange:e.inputChange,onInput:a[0]||(a[0]=s=>e.$emit("onInput",s.target.value)),onFocus:a[1]||(a[1]=s=>e.$emit("onFocus"))},null,8,["value","onChange"]),o("div",ia,[o("div",ua,[e.coinSymbol=="CETUS"?(c(),S("img",ra)):(c(),S("img",da)),o("div",null,[o("p",null,k(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1)])])])]),o("div",ca,[ma,o("div",va,[o("div",ga,[o("span",null,k(e.$t("common.balance")),1),e.balance?(c(),S("span",ha,k(e.balance>1?("addCommom"in e?e.addCommom:Ie(x))(e.balance):e.balance),1)):(c(),P(C,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})),e.whaleDirection=="From"?(c(),P(f,{key:2,class:"max-btn",disabled:!e.balance||e.balance==0||!((I=e.wallet)!=null&&I.address),onClick:a[2]||(a[2]=s=>e.$emit("halfBalanne"))},{default:X(()=>[F(k("Half"))]),_:1},8,["disabled"])):L("",!0),e.whaleDirection=="From"?(c(),P(f,{key:3,class:"max-btn",disabled:!e.balance||e.balance==0||!((h=e.wallet)!=null&&h.address),onClick:a[3]||(a[3]=s=>e.$emit("maxBalanne"))},{default:X(()=>[F(k(e.$t("button.max")),1)]),_:1},8,["disabled"])):L("",!0)])])])])}const pa=ae(ta,[["render",fa],["__scopeId","data-v-83d9dead"]]),wa=Ye({setup(){const e=xe(),a=u(()=>e),r=u(()=>a.value.venft_id),n=u(()=>a.value.venftInfo),B=$e(),p=u(()=>B),A=Ce(),C=u(()=>A),f=fn();u(()=>p.value.tokensObj&&p.value.tokensObj["0x2a4f647bc73f070182436658bff75060246019857c769ad9268c22c4472bca7f::cetus::CETUS"]);const I=y("");let h=y(!1);const s=y(""),m=y(""),v=y(!1),l=y("convert"),{t:U}=ne(),be=y([{time:"15 D",num:15},{time:"30 D",num:30},{time:"90 D",num:90},{time:"180 D",num:180}]),se=y([{name:"est.APR",value:"100.12%"},{name:"My share",value:"<0.1%"},{name:"Pending yield (USDC)",value:0}]),ye=y([{name:"My total locked",value:"$100.12"},{name:"Pending rewards (xCETUS)",value:"100.12"},{name:"",value:""}]),ie=y([{name:"My positions",value:"12"},{name:"My qualified positions",value:"0"},{name:"Pending rewards (xCETUS)",value:"100.12"}]),ue=window.setInterval(()=>{e.getXcetusApr(),g.value.address&&(e.getMyShare(g.value.address),e.getVeNFTDividendInfo())},6e4);cn(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||e.getDividendManager()}),e.getXcetusApr(),e.getDividendManager()}),mn(()=>{window.clearInterval(ue),document.removeEventListener("visibilitychange",()=>{console.log("移除监听")})}),V(()=>C.value.theme,t=>{t!=="sui"&&f.selectSuiTheme()},{immediate:!0});const H=u(()=>(console.log(a.value.whaleBalance,"==>xcetus.value.whaleBalance"),a.value.whaleBalance)),re=u(()=>a.value.xWhaleBalance),M=u(()=>a.value.availableXwhale),Se=u(()=>a.value.redeemingXwhale),de=u(()=>{if(l.value=="convert"){if(Number(s.value)>Number(H.value))return!0}else if(Number(s.value)>Number(M.value))return!0;return!s.value||!m.value||Number(s.value)==0||Number(m.value)==0}),_=y("180"),O=u(()=>(console.log(l.value=="convert","===>1212211"),l.value=="convert"&&Number(s.value)>Number(H.value)?U("button.insufficientBalance",{name:"CETUS"}):l.value!=="convert"&&Number(s.value)>Number(M.value)?U("button.insufficientBalance",{name:"xCETUS"}):Number(_.value)<15?"Minimum vesting duration is 15 days":l.value=="convert"&&r?"Convert":l.value!=="convert"&&r?"Redeem":"Convert"));console.log(O.value,"btnText.value===>");const Ae=t=>{s.value="",m.value="",l.value=t},K=()=>{h.value=!0,setTimeout(()=>{h.value=!1},300)},De=t=>{_.value=t},d=y(!1),R=Ee("Sui"),j=we(),g=u(()=>j),Q=u(()=>a.value.ownerLocks);V(()=>g.value.address,t=>{console.log("触发",t),t?(e.getOwnerVeNFT(t),e.getAccountWhaleBalance(t),e.getOwnerLockCetuss(t),e.getMyShare(t)):e.loginOut()},{immediate:!0});const N=u(()=>C.value.chainName?Pe(C.value.chainName):{}),z=u(()=>C.value.chainName),{setIsShowSuccess:J,setIsShowRejected:Y,setIsShowWaiting:b,setTransactionDesc:ee,setTransactionTxid:$}=A,Te=async()=>{d.value=!0,b(!0),$(""),ee(U("tips.converting",{from:`${x(s.value,9)} CETUS`,and:"to",to:`${x(s.value,9)} xCETUS`}));try{let t;const i=ge(s.value,9);console.log(r.value,"===>venft_id.value");const w=await R.depositCetus(i,r.value);console.log(w,"payload==>");const D=await g.value.currentWallet.signAndExecuteTransactionBlock(w);if(t=N.value.handleTx(D),t&&t.hash){$(t.hash),b(!1),J(!0);const T={title:"Converted",desc:`Converted ${x(s.value,9)} xCETUS successfully`,hash:t.hash,tit:"Converted",icon:"icon-icon-Swap",tokenInfo:{tokena:"CETUS",numa:`- ${s.value}`,logoa:q("/sui-image/WHALE-icon.png"),tokenb:"xCETUS",numb:`+ ${s.value}`,logob:q("/sui-image/xWHALE-icon.png")}};z.value!=="Aptos"&&(T.res=t.res),N.value.showTransitionPending(T);const W=await N.value.watchTransaction(T);console.log("0221###swap###transitionStatus####",W),W&&setTimeout(()=>{e.getAccountWhaleBalance(g.value.address),e.getOwnerVeNFT(g.value.address),e.getOwnerLockCetuss(g.value.address),e.getMyShare(g.value.address)},3e3),d.value=!1}else b(!1),Y(!0),d.value=!1;s.value=""}catch(t){b(!1),Y(!0),d.value=!1,s.value="",console.log(t,"error===>")}},G=y(!0),ke=y("0"),Xe=async()=>{const t=ge(s.value,9),i=await R.redeemNum(t,Number(_.value));m.value=Z(i.amountOut,9),console.log("===>amount2222"),ke.value=i.percent},He=async()=>{const t=ge(m.value,9),i=await R.reverseRedeemNum(t,Number(_.value));console.log(i,"===>amount111"),s.value=Z(i.amountOut,9),ke.value=i.percent};V(()=>[s.value,_.value,G.value],([t,i,w])=>{console.log(t,"===>>>>>>>fromCoinAmount",typeof t),t&&i&&w&&Number(i)>=15&&Xe(),!t&&w&&(m.value="")},{immediate:!0}),V(()=>[m.value,_.value,G.value],([t,i,w])=>{t&&i&&!w&&Number(i)>=15&&(He(),console.log(t,"===>toCoinAmount")),!t&&!w&&(s.value="")},{immediate:!0}),V(()=>[_.value,G.value],([t,i])=>{Number(t)>180?_.value="180":Number(t)<15?i?m.value="":s.value="":t||(i?s.value="":m.value="")},{immediate:!0});const je=()=>{G.value=!0,s.value=fe(new Me(l.value!=="convert"?M.value:H.value).div(new Me(2)).toString(),9)},Ze=()=>{G.value=!0,s.value=l.value!=="convert"?fe(M.value,9):fe(H.value,9)},Re=async()=>{d.value=!0,b(!0),$(""),ee(U("tips.redeeming",{from:`${x(s.value,9)} xCETUS`,to:`${x(m.value,9)} CETUS`}));try{let t;const i=ge(s.value,9);console.log(i.toString(),"538====>");const w=await R.getRedeemLockPayload(i,r.value,Number(_.value));console.log(w,"payload==>");const D=await g.value.currentWallet.signAndExecuteTransactionBlock(w);if(t=N.value.handleTx(D),t&&t.hash){$(t.hash),b(!1),J(!0);const T={title:"Redemption",desc:"Redemption transaction submitted successfully.",hash:t.hash,tit:"Vesting",icon:"icon-icon-Removed",tokenInfo:{tokena:"xCETUS",numa:`- ${s.value}`,logoa:q("/sui-image/xWHALE-icon.png")}};z.value!=="Aptos"&&(T.res=t.res),N.value.showTransitionPending(T);const W=await N.value.watchTransaction(T);console.log("0221###swap###transitionStatus####",W),W&&setTimeout(()=>{e.getAccountWhaleBalance(g.value.address),e.getOwnerVeNFT(g.value.address),e.getOwnerLockCetuss(g.value.address),e.getMyShare(g.value.address)},3e3),d.value=!1}else b(!1),Y(!0),d.value=!1;s.value="",m.value=""}catch(t){b(!1),Y(!0),d.value=!1,s.value="",m.value="",console.log(t,"error===>")}};V(()=>[r.value,Q.value,n.value,g.value.address],([t,i,w,D])=>{D&&(t&&e.getVeNFTDividendInfo(),t&&!Ne(w)&&i&&i.length>0&&(console.log("执行了",i),e.getAvailableXCetus()))},{immediate:!0,deep:!0});const qe=async t=>{d.value=!0,b(!0),$(""),ee("");try{let i;console.log(t.id,"==>vItem.id");const w=await R.getCancelRedeemPayload(t.id,r.value);console.log(w,"payload==>");const D=await g.value.currentWallet.signAndExecuteTransactionBlock(w);if(i=N.value.handleTx(D),i&&i.hash){$(i.hash),b(!1),J(!0);const T={title:"Cancelled Redemption",desc:"Cancelled redemption successfully.",hash:i.hash,tit:"Cancelled Redemption",icon:"icon-a-icon-Shutdown",tokenInfo:{tokena:"xCETUS",numa:`+ ${Z(t.xcetus_amount,9)}`,logoa:q("/sui-image/xWHALE-icon.png")}};z.value!=="Aptos"&&(T.res=i.res),N.value.showTransitionPending(T);const W=await N.value.watchTransaction(T);console.log("0221###swap###transitionStatus####",W),W&&setTimeout(()=>{e.getOwnerVeNFT(g.value.address),e.getOwnerLockCetuss(g.value.address),d.value=!1},3e3)}else b(!1),Y(!0),d.value=!1;s.value="",m.value=""}catch(i){b(!1),Y(!0),d.value=!1,s.value="",m.value="",e.setClaimLoading(""),console.log(i,"error===>")}},Ge=y({}),Ke=()=>{console.log("倒计时结束"),e.getOwnerLockCetuss(g.value.address)},Qe=async t=>{console.log(t,"vItem===>"),d.value=!0,b(!0),$(""),ee(`${U("tips.claimingPendingYield")} ${x(Z(t.cetus_amount,9),9)} CETUS`);try{let i;const w=await R.getRedeemPayload(t.id,r.value);console.log(w,"payload==>");const D=await g.value.currentWallet.signAndExecuteTransactionBlock(w);if(i=N.value.handleTx(D),i&&i.hash){$(i.hash),b(!1),J(!0);const T={title:"Claimed",desc:`Claimed ${x(Z(t.cetus_amount,9),9)} CETUS successfully.`,hash:i.hash,tit:"CETUS Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:"CETUS",numa:`+ ${Z(t.cetus_amount,9)}`,logoa:q("/sui-image/WHALE-icon.png")}};z.value!=="Aptos"&&(T.res=i.res),N.value.showTransitionPending(T);const W=await N.value.watchTransaction(T);console.log("0221###swap###transitionStatus####",W),W&&setTimeout(()=>{e.getOwnerLockCetuss(g.value.address),e.getAccountWhaleBalance(g.value.address),e.getOwnerVeNFT(g.value.address),e.getMyShare(g.value.address),e.getAvailableXCetus(),d.value=!1},3e3)}else b(!1),Y(!0),d.value=!1;s.value="",m.value=""}catch(i){b(!1),Y(!0),d.value=!1,s.value="",m.value="",e.setClaimLoading(""),console.log(i,"error===>")}},Be=y(!1),ze=()=>{!localStorage.getItem(`notRemind${g.value.address}`)&&O.value=="Convert"?Be.value=!0:O.value=="Redeem"?Re():Te()},Je=()=>{Be.value=!1,Te()},ce=u(()=>a.value.pendingCoinInfo),me=u(()=>a.value.pendingAmount),ve=y(!1);return{clickModalConvert:Je,openConfirmModal:Be,validateInput:()=>{_.value&&(_.value=_.value.replace(/[^\d]/g,""),_.value.charAt(0)==="0"&&(_.value=_.value.slice(1)))},countDown:Ke,value:I,change:h,clickExchange:K,fromCoinAmount:s,toCoinAmount:m,showCoinSelect:v,headSwitchValue:l,headSwitchChange:Ae,vestingDateList:be,vestingParameter:_,vestingTab:De,holderList:se,lockupList:ye,leaderboardList:ie,whaleBalance:H,depositCetus:Te,btnText:O,loading:d,redeemRatio:ke,halfBalanne:je,maxBalanne:Ze,xWhaleBalance:re,availableXwhale:M,redeemingXwhale:Se,withdrawWhale:Re,ownerLocks:Q,cancelRedeemPayload:qe,holderInfo:Ge,btnDisabled:de,fixedFromCoin:G,walletStore:j,claimWhale:Qe,wallet:g,depositOrWithdraw:ze,pendingAmount:me,claimPendingYield:async()=>{ve.value=!0,b(!0),$(""),ee(`${U("tips.claimingPendingYield")} ${me.value} ${ce.value.symbol}`);try{let t;const i=await R.getRedeemDividendV2Payload(r.value);console.log(i,"payload==>");const w=await g.value.currentWallet.signAndExecuteTransactionBlock(i);if(t=N.value.handleTx(w),t&&t.hash){$(t.hash),b(!1),J(!0);const D={title:"Claim",desc:`Claimed ${me.value} ${ce.value.symbol} successfully.`,hash:t.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:ce.value.symbol,numa:`+ ${me.value}`,logoa:ce.value.logo_url}};z.value!=="Aptos"&&(D.res=t.res),N.value.showTransitionPending(D);const T=await N.value.watchTransaction(D);console.log("0221###swap###transitionStatus####",T),T&&setTimeout(()=>{e.getVeNFTDividendInfo(),ve.value=!1},3e3),e.getOwnerLockCetuss(g.value.address)}else b(!1),Y(!0),ve.value=!1,d.value=!1}catch(t){b(!1),Y(!0),ve.value=!1,console.log(t,"error===>")}},inputBlur:()=>{Number(_.value)<15&&(_.value="15")},getNextEpoch:()=>{e.getDividendManager()}}}});const le=e=>(te("data-v-924bb0a1"),e=e(),oe(),e),Ca={class:"dashboard-all"},_a={class:"dashboard-content"},ba={class:"content-left"},ya={key:0,class:"vesting"},Sa=le(()=>o("p",null,"Vesting",-1)),Aa={class:"content-right"},Ta={key:0,class:"card-container"},ka={class:"card-item"},Ba={class:"card-item"},Ia={class:"exchange"},Na=le(()=>o("use",{"xlink:href":"#icon-icon-swap2"},null,-1)),xa=[Na],Pa={key:1,class:"card-redeem"},Ea={class:"card-item"},Ua={class:"vesting-duration"},Da=le(()=>o("p",null,"Vesting duration",-1)),Ra={class:"vesting-content"},Wa={class:"vesting-left"},La={class:"value-days"},Ma=le(()=>o("span",null,"days",-1)),Oa={class:"vesting-right"},Ya=["onClick"],$a={class:"card-item"},Va={class:"redeem-ratio"},Fa=le(()=>o("span",null,"Redeem ratio",-1));function Xa(e,a,r,n,B,p){const A=en,C=Xn,f=aa,I=hn,h=pa,s=gn,m=pe,v=tn;return c(),S("div",Ca,[E(A,{title:"Dashboard","total-xwhale":e.xWhaleBalance,"available-xwhale":e.availableXwhale,"redeeming-xwhale":e.redeemingXwhale},null,8,["total-xwhale","available-xwhale","redeeming-xwhale"]),o("div",_a,[o("div",ba,[E(C,{"holder-info":e.holderInfo,"pending-amount":e.pendingAmount,"claim-loading":e.claimLoading,onClaimPendingYield:e.claimPendingYield,onGetNextEpoch:e.getNextEpoch},null,8,["holder-info","pending-amount","claim-loading","onClaimPendingYield","onGetNextEpoch"]),e.ownerLocks&&e.ownerLocks.length>0?(c(),S("div",ya,[Sa,(c(!0),S(We,null,Le(e.ownerLocks,l=>(c(),P(f,{key:l,"v-item":l,loading:e.loading,onCountDown:e.countDown,onClaimWhale:e.claimWhale,onCancelRedeemPayload:e.cancelRedeemPayload},null,8,["v-item","loading","onCountDown","onClaimWhale","onCancelRedeemPayload"]))),128))])):L("",!0)]),o("div",Aa,[E(I,{"head-switch-value":e.headSwitchValue,"left-text":"Get xCETUS","right-text":"Redeem CETUS",onHeadSwitchChange:a[0]||(a[0]=l=>{e.headSwitchChange(l)})},null,8,["head-switch-value"]),e.headSwitchValue=="convert"?(c(),S("div",Ta,[o("div",ka,[E(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":a[1]||(a[1]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"CETUS","whale-direction":"From",balance:e.whaleBalance,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:a[2]||(a[2]=l=>{e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),o("div",Ba,[E(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":a[3]||(a[3]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"To",balance:e.availableXwhale,onOnInput:a[4]||(a[4]=l=>{e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance"])]),o("img",{class:he(e.change?"gang animationex":"gang"),src:pn,alt:""},null,2),o("div",Ia,[(c(),S("svg",{class:he(e.change?"icon animationex":"icon"),"aria-hidden":"true"},xa,2))])])):(c(),S("div",Pa,[o("div",Ea,[E(h,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":a[5]||(a[5]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"From",balance:e.availableXwhale,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:a[6]||(a[6]=l=>{e.fixedFromCoin=!0,e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),o("div",Ua,[Da,o("div",Ra,[o("div",Wa,[o("div",La,[Oe(o("input",{"onUpdate:modelValue":a[7]||(a[7]=l=>e.vestingParameter=l),onInput:a[8]||(a[8]=(...l)=>e.validateInput&&e.validateInput(...l)),onBlur:a[9]||(a[9]=(...l)=>e.inputBlur&&e.inputBlur(...l))},null,544),[[vn,e.vestingParameter]])]),Ma]),o("div",Oa,[(c(!0),S(We,null,Le(e.vestingDateList,l=>(c(),S("div",{key:l.time,class:he(["box-table",{"box-table-active":l.num===Number(e.vestingParameter)}]),onClick:U=>e.vestingTab(l.num)},k(l.time),11,Ya))),128))])]),E(s,{value:e.vestingParameter,"onUpdate:value":a[10]||(a[10]=l=>e.vestingParameter=l),max:180,min:15},null,8,["value"])]),o("div",$a,[E(h,{modelValue:e.toCoinAmount,"onUpdate:modelValue":a[11]||(a[11]=l=>e.toCoinAmount=l),"input-value":e.toCoinAmount,"coin-symbol":"CETUS","whale-direction":"To",balance:e.whaleBalance,onOnInput:a[12]||(a[12]=l=>{e.fixedFromCoin=!1,e.toCoinAmount=l})},null,8,["modelValue","input-value","balance"])]),o("div",Va,[Fa,o("p",null,k(e.redeemRatio)+"%",1)])])),e.wallet&&e.wallet.address?(c(),P(m,{key:2,class:"big-btn",loading:e.loading,disabled:e.btnDisabled,onClick:e.depositOrWithdraw},{default:X(()=>[o("span",null,k(e.btnText),1)]),_:1},8,["loading","disabled","onClick"])):(c(),P(m,{key:3,class:"big-btn",onClick:a[13]||(a[13]=l=>e.walletStore.setIsShowWalletModal(!0))},{default:X(()=>[o("span",null,k(e.$t("button.connectWallet")),1)]),_:1}))])]),e.openConfirmModal?(c(),P(v,{key:0,onClickConvert:e.clickModalConvert,onClose:a[14]||(a[14]=()=>e.openConfirmModal=!e.openConfirmModal)},null,8,["onClickConvert"])):L("",!0)])}const gt=ae(wa,[["render",Xa],["__scopeId","data-v-924bb0a1"]]);export{gt as default};
