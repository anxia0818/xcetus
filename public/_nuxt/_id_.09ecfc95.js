import{_ as xo}from"./new-position-title.9ec5259f.js";import{_ as po}from"./token-warning.7c1e8478.js";import{_ as No}from"./auto-pool-apy-tips.71b4843c.js";import{u as Qe,a as T,g as go,c as Ke,f as en,s as P,d as Me,p as qo,b as Bo,T as Fe,e as le,h as on,i as nn,j as tn}from"./pool.40a1ab97.js";import{u as fo,a as wo}from"./sha256.c64013d9.js";import{u as xe,a as Do}from"./autoPool.1104a8a4.js";import{i as lo}from"./import-icon.de3e6c66.js";import{a as je,l as k,m as eo,r as S,q as Ie,e as Ve,s as $o,o as d,f as $,h as o,t as We,i as Q,v,j as Xe,x as W,u as h,p as Ge,k as He,y as Fo,z as ao,c as te,w as Oe,A as Ze,F as ro,M as sn,C as ho,D as Mo,E as Io,G as Co,H as Oo,B as Lo,I as ko,b as Uo,J as ln}from"./entry.1a803405.js";import"./decimal.633e31ee.js";import{D as u}from"./decimal.0e8aa3f1.js";import{_ as Vo}from"./assets-card.d34a3170.js";import{_ as Eo}from"./coin-lock.0f7c5d13.js";import{_ as Wo,a as Xo}from"./auto-pool-remove-modal.593dcc80.js";import{afterCurrentPrice as co}from"./data.78647e1f.js";import{V as _o}from"./index.ffd047f3.js";/* empty css              *//* empty css              */import"./back.6aedbd93.js";import"./swap-setting.214d1c7c.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.bfc96697.js";const an=je({components:{AutoPoolApyTips:No},setup(){const e=fo(),t=k(()=>e),j=Qe(),G=k(()=>j),U=xe(),B=k(()=>U),m=k(()=>t.value.theme),p=eo(),_=S();Ie(()=>[B.value.positionInfoObj,p.params.id],([s,a])=>{s&&!Ke(s)&&a&&(_.value=s[a],console.log(_.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const w=k(()=>{var s;return(s=_.value)==null?void 0:s.needReverse}),i=s=>{var a;return(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||((a=G.value.tokensObj[s==null?void 0:s.address])==null?void 0:a.logo_url)||(m.value==="default"?lo("/image/coins/unknown.png"):lo("/image/coins/sui-unknown.png"))},n=k(()=>{var s,a;return console.log((s=_==null?void 0:_.value)==null?void 0:s.poolUSD,"##positionInfo?.value?.poolUSD"),(a=_==null?void 0:_.value)==null?void 0:a.poolUSD}),D=k(()=>{var s,a;return B.value.apyObj&&((a=B.value.apyObj[(s=_.value)==null?void 0:s.id])==null?void 0:a.apr)||"--"});return{positionInfo:_,needReverse:w,getCoinIcon:i,tvl:n,apy:D,addCommom:T,getExplorerUrl:go}}});const Le=e=>(Ge("data-v-64d0287a"),e=e(),He(),e),un={class:"auto-pool-v2-info"},rn={class:"pool-info"},dn={class:"left"},vn={class:"coin-a"},mn={alt:""},cn={class:"coin-b"},pn={alt:""},fn={class:"position-name"},yn={key:0,class:"pool-fee"},bn=Le(()=>o("span",null,"Fee tier",-1)),kn={class:"vault-address"},gn=["href"],hn=Le(()=>o("span",null,"Vault Address",-1)),_n=Le(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),wn=[hn,_n],$n={class:"apy-and-tvl"},In={class:"apy"},Cn=Le(()=>o("div",{class:"apy-title"},"APY",-1)),Pn={class:"apy-text"},An={class:"tvl"},Sn=Le(()=>o("div",{class:"tvl-title"},"TVL",-1)),Tn={class:"tvl-text"},Rn={class:"pool-info h5-pool-info"},qn={class:"left"},Nn={class:"coin-a"},Bn={alt:""},Dn={class:"coin-b"},Fn={alt:""},Mn={class:"position-name"},On={key:0,class:"pool-fee"},Ln=Le(()=>o("span",null,"Fee tier",-1)),Un={class:"left"},Vn={class:"vault-address"},En=["href"],Wn=Le(()=>o("span",null,"Vault Address",-1)),Xn=Le(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link"})],-1)),jn=[Wn,Xn],Gn={class:"apy-and-tvl"},Hn={class:"apy"},zn=Le(()=>o("div",{class:"apy-title"},"APY",-1)),Yn={class:"apy-text"},Jn={class:"tvl"},Zn=Le(()=>o("div",{class:"tvl-title"},"TVL",-1)),Kn={class:"tvl-text"};function Qn(e,t,j,G,U,B){var w,i,n,D,s,a,g,r,y,R,F,q,H,b,f,A,V,X,ae,E,I,ue,fe,ye,re,ee,se,de,c,z,Re,ve,qe,Ce,he,we,Pe,Ae,Ne,Be,J,me,oo,ze,Ye,no;const m=po,p=No,_=$o("image");return d(),$("div",un,[o("div",rn,[o("div",dn,[o("div",vn,[We(o("img",mn,null,512),[[_,e.needReverse?e.getCoinIcon((i=e.positionInfo)==null?void 0:i.token_b):e.getCoinIcon((w=e.positionInfo)==null?void 0:w.token_a)]]),Q(m,{address:e.needReverse?(a=(s=e.positionInfo)==null?void 0:s.token_b)==null?void 0:a.address:(D=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:D.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",cn,[We(o("img",pn,null,512),[[_,e.needReverse?e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_a):e.getCoinIcon((g=e.positionInfo)==null?void 0:g.token_b)]]),Q(m,{address:e.needReverse?(q=(F=e.positionInfo)==null?void 0:F.token_a)==null?void 0:q.address:(R=(y=e.positionInfo)==null?void 0:y.token_b)==null?void 0:R.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",fn,v(e.needReverse?(b=(H=e.positionInfo)==null?void 0:H.token_b)==null?void 0:b.symbol:(A=(f=e.positionInfo)==null?void 0:f.token_a)==null?void 0:A.symbol)+" - "+v(e.needReverse?(X=(V=e.positionInfo)==null?void 0:V.token_a)==null?void 0:X.symbol:(E=(ae=e.positionInfo)==null?void 0:ae.token_b)==null?void 0:E.symbol),1),(I=e.positionInfo)!=null&&I.fee?(d(),$("div",yn,[bn,Xe(" "+v(((ue=e.positionInfo)==null?void 0:ue.fee)*100)+"% ",1)])):W("",!0),o("div",kn,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:h(go))("poolAddress",(fe=e.positionInfo)==null?void 0:fe.id),target:"_blank"},wn,8,gn)])]),o("div",$n,[o("div",In,[Cn,o("div",Pn,[Xe(v(e.apy)+" ",1),Q(p)])]),o("div",An,[Sn,o("div",Tn,"$"+v(("addCommom"in e?e.addCommom:h(T))(e.tvl,2)),1)])])]),o("div",Rn,[o("div",qn,[o("div",Nn,[We(o("img",Bn,null,512),[[_,e.needReverse?e.getCoinIcon((re=e.positionInfo)==null?void 0:re.token_b):e.getCoinIcon((ye=e.positionInfo)==null?void 0:ye.token_a)]]),Q(m,{address:e.needReverse?(c=(de=e.positionInfo)==null?void 0:de.token_b)==null?void 0:c.address:(se=(ee=e.positionInfo)==null?void 0:ee.token_a)==null?void 0:se.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Dn,[We(o("img",Fn,null,512),[[_,e.needReverse?e.getCoinIcon((Re=e.positionInfo)==null?void 0:Re.token_a):e.getCoinIcon((z=e.positionInfo)==null?void 0:z.token_b)]]),Q(m,{address:e.needReverse?(he=(Ce=e.positionInfo)==null?void 0:Ce.token_a)==null?void 0:he.address:(qe=(ve=e.positionInfo)==null?void 0:ve.token_b)==null?void 0:qe.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Mn,v(e.needReverse?(Pe=(we=e.positionInfo)==null?void 0:we.token_b)==null?void 0:Pe.symbol:(Ne=(Ae=e.positionInfo)==null?void 0:Ae.token_a)==null?void 0:Ne.symbol)+" - "+v(e.needReverse?(J=(Be=e.positionInfo)==null?void 0:Be.token_a)==null?void 0:J.symbol:(oo=(me=e.positionInfo)==null?void 0:me.token_b)==null?void 0:oo.symbol),1),(ze=e.positionInfo)!=null&&ze.fee?(d(),$("div",On,[Ln,Xe(" "+v(((Ye=e.positionInfo)==null?void 0:Ye.fee)*100)+"% ",1)])):W("",!0)]),o("div",Un,[o("div",Vn,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:h(go))("poolAddress",(no=e.positionInfo)==null?void 0:no.id),target:"_blank"},jn,8,En)])]),o("div",Gn,[o("div",Hn,[zn,o("div",Yn,[Xe(v(e.apy)+" ",1),Q(p)])]),o("div",Jn,[Zn,o("div",Kn,"$"+v(("addCommom"in e?e.addCommom:h(T))(e.tvl,2)),1)])])])])}const jo=Ve(an,[["render",Qn],["__scopeId","data-v-64d0287a"]]),xn=je({components:{Slider:Fo},setup(){const e=S(!0),t=Qe(),j=k(()=>t),G=xe(),U=k(()=>G),B=eo(),m=S();Ie(()=>[U.value.positionInfoObj,B.params.id],([s,a])=>{s&&!Ke(s)&&a&&(m.value=s[a],console.log(m.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const p=k(()=>{var s;return(s=m.value)==null?void 0:s.needReverse}),_=s=>{var a;return(s==null?void 0:s.logoURI)||(s==null?void 0:s.logo_url)||((a=j.value.tokensObj[s==null?void 0:s.address])==null?void 0:a.logo_url)||lo("/image/coins/sui-unknown.png")},w=k(()=>{var y,R,F;const s=(y=m==null?void 0:m.value)==null?void 0:y.price,a=(R=m==null?void 0:m.value)==null?void 0:R.minPrice,g=(F=m==null?void 0:m.value)==null?void 0:F.maxPrice;let r;if(s>=a&&s<=g){const q=new u(a).add(new u(g)).div(2).toNumber();r=s>q?50+new u(s).sub(q).div(q).toNumber():50-new u(s).sub(q).div(q).toNumber()}else s<a?(r=new u(s).sub(new u(a)).mul(100).toNumber()+15,console.log(r,"##result")):s>g&&(r=new u(s).sub(new u(g)).div(new u(g)).mul(100).toNumber()+70+15);return Number(en(r,0))}),i=k(()=>{var y,R,F,q,H,b,f;const s=e.value?((y=m.value)==null?void 0:y.minPrice)&&P(m==null?void 0:m.value.minPrice,6):((R=m.value)==null?void 0:R.maxPrice)&&P(1/(m==null?void 0:m.value.maxPrice),6),a=e.value?((F=m.value)==null?void 0:F.maxPrice)&&P((q=m.value)==null?void 0:q.maxPrice,6):((H=m.value)==null?void 0:H.minPrice)&&P(1/(m==null?void 0:m.value.minPrice),6),g=(p.value?!e.value:e.value)?P((b=m.value)==null?void 0:b.price,6):P(1/((f=m.value)==null?void 0:f.price),6);let r={};return r[s]={label:"Min Price"},r[a]={label:"Max Price"},r[g]={label:"Current Price"},g>s&&g<a?r[g]={label:"Current Price"}:g<s?r[Number(s)+1e-9]={label:"Current Price"}:g>a&&(r[Number(a)-1e-9]={label:"Current Price"}),console.log(r,"obj###"),r}),n=k(()=>{var a,g;const s=(p.value?!e.value:e.value)?Me((a=m.value)==null?void 0:a.price,6):Me(1/((g=m.value)==null?void 0:g.price),6);return console.log(s,"result##"),s}),D=k(()=>{var a,g;const s=(p.value?!e.value:e.value)?Me((a=m.value)==null?void 0:a.price,6):Me(1/((g=m.value)==null?void 0:g.price),6);return console.log(s,"result##111"),s});return{direct:e,positionInfo:m,needReverse:p,getCoinIcon:_,decimalUi:Me,addCommom:T,sFixD:P,moveRatio:w,marks:i,currentPrice:n,currentPriceResever:D}}});const yo=e=>(Ge("data-v-4d08101d"),e=e(),He(),e),et={class:"v2-position-range"},ot={class:"position-range-top"},nt=yo(()=>o("div",null,"Position Range",-1)),tt={class:"base-coin"},st={key:0},it={alt:""},lt={key:1},at={alt:""},ut={key:2},rt={key:3},dt=yo(()=>o("p",null,"Base coin",-1)),vt={class:"coin-rate"},mt=yo(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),ct=yo(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),pt=[mt,ct],ft={class:"position-range-bottom"},yt={class:"price-range"},bt={class:"price-range-bg"},kt={key:0,class:"min-price"},gt={key:0},ht={key:1},_t={key:1,class:"max-price"},wt={key:0},$t={key:1},It={key:0,class:"min-price"},Ct={key:0},Pt={key:1},At={key:1,class:"max-price"},St={key:0},Tt={key:1};function Rt(e,t,j,G,U,B){var w,i,n,D,s,a,g,r,y,R,F,q,H,b,f,A,V,X,ae,E,I,ue,fe,ye,re,ee,se,de;const m=po,p=ao("Slider"),_=$o("image");return d(),$("div",et,[o("div",ot,[nt,o("div",tt,[e.needReverse?(d(),$("div",lt,[We(o("img",at,null,512),[[_,e.direct?e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_b):e.getCoinIcon((g=e.positionInfo)==null?void 0:g.token_a)]]),Q(m,{address:e.direct?(q=(F=e.positionInfo)==null?void 0:F.token_b)==null?void 0:q.address:(R=(y=e.positionInfo)==null?void 0:y.token_a)==null?void 0:R.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(d(),$("div",st,[We(o("img",it,null,512),[[_,e.direct?e.getCoinIcon((w=e.positionInfo)==null?void 0:w.token_a):e.getCoinIcon((i=e.positionInfo)==null?void 0:i.token_b)]]),Q(m,{address:e.direct?(D=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:D.address:(a=(s=e.positionInfo)==null?void 0:s.token_b)==null?void 0:a.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(d(),$("span",rt,v(e.direct?(X=(V=e.positionInfo)==null?void 0:V.token_b)==null?void 0:X.symbol:(E=(ae=e.positionInfo)==null?void 0:ae.token_a)==null?void 0:E.symbol),1)):(d(),$("span",ut,v(e.direct?(b=(H=e.positionInfo)==null?void 0:H.token_a)==null?void 0:b.symbol:(A=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:A.symbol),1)),dt,o("div",vt,[o("div",{onClick:t[0]||(t[0]=c=>e.direct=!e.direct)},pt)])])]),o("div",ft,[o("div",yt,[o("div",bt,[e.direct?(d(),te(p,{key:0,value:e.currentPrice,class:Ze(["position-slider",e.currentPrice<Number(("sFixD"in e?e.sFixD:h(P))((I=e.positionInfo)==null?void 0:I.minPrice,6))||e.currentPrice>Number(("sFixD"in e?e.sFixD:h(P))((ue=e.positionInfo)==null?void 0:ue.maxPrice,6))?"hide-handler":""]),step:1e-4,marks:e.marks,disabled:!0,min:Number(("sFixD"in e?e.sFixD:h(P))((fe=e.positionInfo)==null?void 0:fe.minPrice,6)),max:Number(("sFixD"in e?e.sFixD:h(P))((ye=e.positionInfo)==null?void 0:ye.maxPrice,6))},{mark:Oe(({label:c})=>{var z,Re,ve,qe,Ce,he,we,Pe,Ae,Ne,Be,J;return[c=="Min Price"?(d(),$("div",kt,[o("div",null,v(c),1),e.direct?(d(),$("div",gt,v(((z=e.positionInfo)==null?void 0:z.minPrice)&&("sFixD"in e?e.sFixD:h(P))((Re=e.positionInfo)==null?void 0:Re.minPrice,6)),1)):(d(),$("div",ht,v(((ve=e.positionInfo)==null?void 0:ve.maxPrice)&&("sFixD"in e?e.sFixD:h(P))(1/((qe=e.positionInfo)==null?void 0:qe.maxPrice),6)),1))])):W("",!0),c=="Max Price"?(d(),$("div",_t,[o("div",null,v(c),1),e.direct?(d(),$("div",wt,v(((Ce=e.positionInfo)==null?void 0:Ce.maxPrice)&&("sFixD"in e?e.sFixD:h(P))((he=e.positionInfo)==null?void 0:he.maxPrice,6)),1)):(d(),$("div",$t,v(((we=e.positionInfo)==null?void 0:we.minPrice)&&("sFixD"in e?e.sFixD:h(P))(1/((Pe=e.positionInfo)==null?void 0:Pe.minPrice),6)),1))])):W("",!0),c=="Current Price"?(d(),$("div",{key:2,class:Ze(["current-price",e.currentPrice<Number(("sFixD"in e?e.sFixD:h(P))((Ae=e.positionInfo)==null?void 0:Ae.minPrice,6))?"current-price-left":e.currentPrice>Number(("sFixD"in e?e.sFixD:h(P))((Ne=e.positionInfo)==null?void 0:Ne.maxPrice,6))?"current-price-right":""])},[o("div",null,v(c),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(d(),$(ro,{key:0},[Xe(v(("addCommom"in e?e.addCommom:h(T))(("decimalUi"in e?e.decimalUi:h(Me))((Be=e.positionInfo)==null?void 0:Be.price,6))),1)],64)):(d(),$(ro,{key:1},[Xe(v(("addCommom"in e?e.addCommom:h(T))(("decimalUi"in e?e.decimalUi:h(Me))(1/((J=e.positionInfo)==null?void 0:J.price),6))),1)],64))])],2)):W("",!0)]}),_:1},8,["value","class","marks","min","max"])):(d(),te(p,{key:1,value:e.currentPriceResever,class:Ze(["position-slider",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:h(P))(1/((re=e.positionInfo)==null?void 0:re.maxPrice),6))||e.currentPriceResever>Number(("sFixD"in e?e.sFixD:h(P))(1/((ee=e.positionInfo)==null?void 0:ee.minPrice),6))?"hide-handler":""]),step:null,min:Number(("sFixD"in e?e.sFixD:h(P))(1/((se=e.positionInfo)==null?void 0:se.maxPrice),6)),max:Number(("sFixD"in e?e.sFixD:h(P))(1/((de=e.positionInfo)==null?void 0:de.minPrice),6)),marks:e.marks,disabled:!0},{mark:Oe(({label:c})=>{var z,Re,ve,qe,Ce,he,we,Pe,Ae,Ne,Be,J;return[c=="Min Price"?(d(),$("div",It,[o("div",null,v(c),1),e.direct?(d(),$("div",Ct,v(((z=e.positionInfo)==null?void 0:z.minPrice)&&("sFixD"in e?e.sFixD:h(P))((Re=e.positionInfo)==null?void 0:Re.minPrice,6)),1)):(d(),$("div",Pt,v(((ve=e.positionInfo)==null?void 0:ve.maxPrice)&&("sFixD"in e?e.sFixD:h(P))(1/((qe=e.positionInfo)==null?void 0:qe.maxPrice),6)),1))])):W("",!0),c=="Max Price"?(d(),$("div",At,[o("div",null,v(c),1),e.direct?(d(),$("div",St,v(((Ce=e.positionInfo)==null?void 0:Ce.maxPrice)&&("sFixD"in e?e.sFixD:h(P))((he=e.positionInfo)==null?void 0:he.maxPrice,6)),1)):(d(),$("div",Tt,v(((we=e.positionInfo)==null?void 0:we.minPrice)&&("sFixD"in e?e.sFixD:h(P))(1/((Pe=e.positionInfo)==null?void 0:Pe.minPrice),6)),1))])):W("",!0),c=="Current Price"?(d(),$("div",{key:2,class:Ze(["current-price current-price-direct",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:h(P))(1/((Ae=e.positionInfo)==null?void 0:Ae.maxPrice),6))?"current-price-left":e.currentPriceResever>Number(("sFixD"in e?e.sFixD:h(P))(1/((Ne=e.positionInfo)==null?void 0:Ne.minPrice),6))?"current-price-right":""])},[o("div",null,v(c),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(d(),$(ro,{key:0},[Xe(v(("addCommom"in e?e.addCommom:h(T))(("decimalUi"in e?e.decimalUi:h(Me))((Be=e.positionInfo)==null?void 0:Be.price,6))),1)],64)):(d(),$(ro,{key:1},[Xe(v(("addCommom"in e?e.addCommom:h(T))(("decimalUi"in e?e.decimalUi:h(Me))(1/((J=e.positionInfo)==null?void 0:J.price),6))),1)],64))])],2)):W("",!0)]}),_:1},8,["value","class","min","max","marks"]))])])])])}const Go=Ve(xn,[["render",Rt],["__scopeId","data-v-4d08101d"]]),qt=je({components:{Modal:sn},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const t=k(()=>{var G,U;const j=P(((G=e.positionInfo)==null?void 0:G.poolUSD)/((U=e.positionInfo)==null?void 0:U.quoteUSD)*100,0);return console.log(j,"Pool Capacity Ratio"),Number(j)});return{sFixD:P,addCommom:T,ratio:t}}});const Po=e=>(Ge("data-v-992de09d"),e=e(),He(),e),Nt=Po(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Bt={class:"deposit-slider"},Dt={class:"info-block"},Ft=Po(()=>o("div",{class:"leabl"},"Current Deposit：",-1)),Mt={class:"text"},Ot={class:"info-block"},Lt=Po(()=>o("div",{class:"leabl"},"Max Capacity：",-1)),Ut={class:"text"};function Vt(e,t,j,G,U,B){const m=ao("Modal");return d(),te(m,{width:"440px",visible:!0,footer:null,title:"Pool Capacity",onCancel:t[0]||(t[0]=p=>e.$emit("onClose"))},{closeIcon:Oe(()=>[Nt]),default:Oe(()=>{var p,_;return[o("div",Bt,[o("div",{class:"current-deposit",style:ho({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",Dt,[Ft,o("div",Mt,"$"+v(("addCommom"in e?e.addCommom:h(T))(("sFixD"in e?e.sFixD:h(P))((p=e.positionInfo)==null?void 0:p.poolUSD,2))),1)]),o("div",Ot,[Lt,o("div",Ut,"$"+v(("addCommom"in e?e.addCommom:h(T))(("sFixD"in e?e.sFixD:h(P))((_=e.positionInfo)==null?void 0:_.quoteUSD,2))),1)])]}),_:1})}const Ho=Ve(qt,[["render",Vt],["__scopeId","data-v-992de09d"]]),Et=je({components:{AutoPoolV2PoolCapacity:Ho},setup(){const e=Qe(),t=k(()=>e),j=xe(),G=k(()=>j),U=eo(),B=S();Ie(()=>[G.value.positionInfoObj,U.params.id],([w,i])=>{console.log(w,"##positionInfoObj"),w&&!Ke(w)&&i&&(B.value=w[i],console.log(B.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const m=k(()=>{var w;return(w=B.value)==null?void 0:w.needReverse}),p=w=>{var i;return console.log(w,"info##"),(w==null?void 0:w.logoURI)||(w==null?void 0:w.logo_url)||((i=t.value.tokensObj[w==null?void 0:w.address])==null?void 0:i.logo_url)||lo("/image/coins/sui-unknown.png")},_=S(!1);return{needReverse:m,positionInfo:B,getCoinIcon:p,addCommom:T,isShowModal:_}}});const Wt=e=>(Ge("data-v-c6233d3e"),e=e(),He(),e),Xt={class:"pool-composition"},jt={class:"pool-composition-top"},Gt=Wt(()=>o("span",null,"Pool Composition",-1)),Ht={class:"pool-composition-bottom"},zt={class:"token-ratio"},Yt={class:"before-coin"},Jt={alt:""},Zt={class:"after-coin"},Kt={alt:""},Qt={class:"token-num"},xt={class:"num-box"},es={class:"num-box"};function os(e,t,j,G,U,B){var w,i,n,D,s,a,g,r,y,R,F,q,H,b,f,A,V,X,ae,E,I,ue,fe,ye,re,ee,se,de;const m=po,p=Ho,_=$o("image");return d(),$("div",Xt,[o("div",jt,[Gt,o("div",{class:"pool-capacity",onClick:t[0]||(t[0]=c=>e.isShowModal=!0)},"Pool Capacity")]),o("div",Ht,[o("div",zt,[o("div",Yt,[o("div",null,[Q(m,{address:e.needReverse?(D=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:D.address:(i=(w=e.positionInfo)==null?void 0:w.token_a)==null?void 0:i.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),We(o("img",Jt,null,512),[[_,e.needReverse?e.getCoinIcon((a=e.positionInfo)==null?void 0:a.token_b):e.getCoinIcon((s=e.positionInfo)==null?void 0:s.token_a)]])]),o("span",null,v((g=e.positionInfo)==null?void 0:g.poolCoinARatio)+"%",1)]),o("div",Zt,[o("span",null,v((r=e.positionInfo)==null?void 0:r.poolCoinBRatio)+"%",1),o("div",null,[We(o("img",Kt,null,512),[[_,e.needReverse?e.getCoinIcon((R=e.positionInfo)==null?void 0:R.token_a):e.getCoinIcon((y=e.positionInfo)==null?void 0:y.token_b)]]),Q(m,{address:e.needReverse?(b=(H=e.positionInfo)==null?void 0:H.token_a)==null?void 0:b.address:(q=(F=e.positionInfo)==null?void 0:F.token_b)==null?void 0:q.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",Qt,[o("div",{class:"token-a-bg",style:ho({width:`${(f=e.positionInfo)==null?void 0:f.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:ho({width:`${(A=e.positionInfo)==null?void 0:A.poolCoinBRatio}%`})},null,4),o("div",xt,[o("div",null,v(("addCommom"in e?e.addCommom:h(T))((V=e.positionInfo)==null?void 0:V.poolCoinANum))+" "+v(e.needReverse?(I=(E=e.positionInfo)==null?void 0:E.token_b)==null?void 0:I.symbol:(ae=(X=e.positionInfo)==null?void 0:X.token_a)==null?void 0:ae.symbol),1),o("div",null,"$"+v(("addCommom"in e?e.addCommom:h(T))((ue=e.positionInfo)==null?void 0:ue.poolCoinAUSD)),1)]),o("div",es,[o("div",null,v(("addCommom"in e?e.addCommom:h(T))((fe=e.positionInfo)==null?void 0:fe.poolCoinBNum))+" "+v(e.needReverse?(se=(ee=e.positionInfo)==null?void 0:ee.token_a)==null?void 0:se.symbol:(re=(ye=e.positionInfo)==null?void 0:ye.token_b)==null?void 0:re.symbol),1),o("div",null,"$"+v(("addCommom"in e?e.addCommom:h(T))((de=e.positionInfo)==null?void 0:de.poolCoinBUSD)),1)])])]),e.isShowModal?(d(),te(p,{key:0,"position-info":e.positionInfo,onOnClose:t[1]||(t[1]=c=>e.isShowModal=!1)},null,8,["position-info"])):W("",!0)])}const zo=Ve(Et,[["render",os],["__scopeId","data-v-c6233d3e"]]),ns=je({setup(){const e=Qe(),t=k(()=>e),j=xe(),G=k(()=>j),U=eo(),B=S();Ie(()=>[G.value.positionInfoObj,U.params.id],([i,n])=>{console.log(i,"##positionInfoObj"),i&&!Ke(i)&&n&&(B.value=i[n],console.log(B.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const m=k(()=>{var i;return(i=B.value)==null?void 0:i.needReverse}),p=i=>{var n;return console.log(i,"info##"),(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((n=t.value.tokensObj[i==null?void 0:i.address])==null?void 0:n.logo_url)||lo("/image/coins/sui-unknown.png")},_=wo(),w=k(()=>_);return{needReverse:m,positionInfo:B,getCoinIcon:p,addCommom:T,wallet:w}}});const vo=e=>(Ge("data-v-c9de826f"),e=e(),He(),e),ts={class:"my-liquidity"},ss={class:"my-liquidity-top"},is=vo(()=>o("div",null,"My Liquidity",-1)),ls=vo(()=>o("p",null,"My share of pool",-1)),as={class:"my-liquidity-bottom"},us={class:"lp-token"},rs=vo(()=>o("div",null,[o("span",null,"LP Token Balance ")],-1)),ds={class:"lp-balance"},vs={class:"token-num-content"},ms={class:"token-num token-a-num"},cs={class:"logo"},ps=["src"],fs={class:"text"},ys={class:"lp-logo"},bs=["src"],ks=vo(()=>o("div",null,"Pooled Assets",-1)),gs={class:"token-num"},hs={class:"logo"},_s=["src"],ws={class:"text"},$s=vo(()=>o("div",{class:"token-num-content-bg"},null,-1));function Is(e,t,j,G,U,B){var p,_,w,i,n,D,s,a,g,r,y,R,F,q,H,b,f,A,V,X,ae,E,I,ue,fe,ye,re,ee;const m=po;return d(),$("div",ts,[o("div",ss,[is,o("div",null,[ls,o("p",null,v(e.wallet.connected?(p=e.positionInfo)==null?void 0:p.myShare:"--")+"%",1)])]),o("div",as,[o("div",us,[rs,o("div",null,[o("span",ds,v(e.wallet.connected?("addCommom"in e?e.addCommom:h(T))((_=e.positionInfo)==null?void 0:_.myLiquidity):"--")+" LP",1),o("span",null,"$"+v(e.wallet.connected?("addCommom"in e?e.addCommom:h(T))((w=e.positionInfo)==null?void 0:w.myLiquidityUSD):"--"),1)])]),o("div",vs,[o("div",ms,[o("div",cs,[o("img",{src:e.needReverse?e.getCoinIcon((n=e.positionInfo)==null?void 0:n.token_b):e.getCoinIcon((i=e.positionInfo)==null?void 0:i.token_a),alt:""},null,8,ps),Q(m,{address:e.needReverse?(g=(a=e.positionInfo)==null?void 0:a.token_b)==null?void 0:g.address:(s=(D=e.positionInfo)==null?void 0:D.token_a)==null?void 0:s.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",fs,[o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:h(T))((r=e.positionInfo)==null?void 0:r.amountA):"--")+" "+v(e.needReverse?(q=(F=e.positionInfo)==null?void 0:F.token_b)==null?void 0:q.symbol:(R=(y=e.positionInfo)==null?void 0:y.token_a)==null?void 0:R.symbol),1),o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:h(T))((H=e.positionInfo)==null?void 0:H.myAmountAUSD):"--"),1)])]),o("div",ys,[o("img",{src:e.getCoinIcon((b=e.positionInfo)==null?void 0:b.lpInfo),alt:""},null,8,bs),ks]),o("div",gs,[o("div",hs,[o("img",{src:e.needReverse?e.getCoinIcon((A=e.positionInfo)==null?void 0:A.token_a):e.getCoinIcon((f=e.positionInfo)==null?void 0:f.token_b),alt:""},null,8,_s),Q(m,{address:e.needReverse?(E=(ae=e.positionInfo)==null?void 0:ae.token_a)==null?void 0:E.address:(X=(V=e.positionInfo)==null?void 0:V.token_b)==null?void 0:X.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",ws,[o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:h(T))((I=e.positionInfo)==null?void 0:I.amountB):"--")+" "+v(e.needReverse?(re=(ye=e.positionInfo)==null?void 0:ye.token_a)==null?void 0:re.symbol:(fe=(ue=e.positionInfo)==null?void 0:ue.token_b)==null?void 0:fe.symbol),1),o("div",null,v(e.wallet.connected?("addCommom"in e?e.addCommom:h(T))((ee=e.positionInfo)==null?void 0:ee.myAmountBUSD):"--"),1)])]),$s])])])}const Yo=Ve(ns,[["render",Is],["__scopeId","data-v-c9de826f"]]),Cs=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const Ps={},Jo=e=>(Ge("data-v-fcbc716b"),e=e(),He(),e),As={class:"status"},Ss=Jo(()=>o("img",{src:Cs,alt:""},null,-1)),Ts=Jo(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),Rs=[Ss,Ts];function qs(e,t){return d(),$("div",As,Rs)}const Zo=Ve(Ps,[["render",qs],["__scopeId","data-v-fcbc716b"]]),Ns=je({components:{AutoPoolAddModal:Wo,AutoPoolV2PoolStatus:Zo},setup(){const e=wo(),t=S(!1),j=fo(),G=k(()=>j),U=k(()=>G.value.chainName),B=k(()=>e),m=xe(),p=k(()=>m),_=Qe(),w=k(()=>_),i=S(),n=eo(),D=S(!1);Ie(()=>[p.value.positionInfoObj,n.params.id],([C,O])=>{C&&!Ke(C)&&O&&(i.value=C[O],console.log(i.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const s=k(()=>{var C,O;return console.log((C=i.value)==null?void 0:C.needReverse,"##positionInfo.value?.needReverse"),(O=i.value)==null?void 0:O.needReverse}),a=S(),g=S(),r=S(),y=S(),R=S(!0),F=k(()=>B.value.assets&&a.value&&B.value.assets[a.value.address]?qo(B.value.assets[a.value.address].balance,a.value.decimals):0),q=k(()=>B.value.assets&&g.value&&B.value.assets[g.value.address]?qo(B.value.assets[g.value.address].balance,g.value.decimals):0),H=C=>{C==="fromCoin"?(R.value=!0,r.value=F.value>0?a.value.symbol=="SUI"?new u(Number(F.value)).sub(new u(.05)).lt(new u(0))?"0":new u(Number(F.value)).sub(new u(.05)).toString():String(F.value):""):(R.value=!1,y.value=q.value>0?g.value.symbol=="SUI"?new u(Number(q.value)).sub(new u(.05)).lt(new u(0))?"0":new u(Number(q.value)).sub(new u(.05)).toString():String(q.value):"")},b=C=>{C==="fromCoin"?(R.value=!0,r.value=F.value>0?P(new u(Number(F.value)).div(2).toString(),a.value.decimals).toString():""):(R.value=!1,y.value=q.value>0?P(new u(Number(q.value)).div(2).toString(),g.value.decimals).toString():"")},f=k(()=>U.value?Bo(U.value):{}),A=k(()=>G.value.slippage),V=S("--"),X=S("--"),ae=C=>{const O=new u(i.value.autoPoolPositionInfo.liquidity),ie=new u(C.toString());if(O.toNumber()>0&&ie.toNumber()>0){const Z=ie.add(O);console.log("totalLiquidity:",ie.div(Z).mul(100).toString());const Se=ie.div(Z).mul(100).toNumber(),oe=tn(Se),be=oe==-1?2:oe+2,ce=P(ie.div(Z).mul(100).toNumber(),be);console.log(i.value.decimals,"##positionInfo.value.decimal");const ke=new u(1).div(new u(Math.pow(10,i.value.lpInfo.decimals))).toString();console.log(ce,ke,"###288"),Number(ce)<Number(ke)?V.value=`<${ke}`:V.value=ce}else ie.toNumber()>0&&O.toNumber()<=0?V.value="100":V.value="--"},E=C=>{const O=new u(C.toString()),ie=new u(A.value).div(100),Z=O.mul(ie),Se=O.sub(Z),oe=_o.get_lp_amount_by_liquidity({liquidity:i.value.liquidity,total_supply:i.value.total_supply},Se),be=new u(Math.pow(10,i.value.lpInfo.decimals)),ce=new u(oe).div(be).toString();X.value=ce},I=S(!1),ue=S(!1),fe=S(""),ye=S(),re=async()=>{if(!i.value)return;const C=i.value.autoPoolPositionInfo.tick_lower_index,O=i.value.autoPoolPositionInfo.tick_upper_index,ie=Fe.sqrtPriceX64ToTickIndex(new le(i.value.current_sqrt_price));let Z=Fe.tickIndexToSqrtPriceX64(C),Se=Fe.tickIndexToSqrtPriceX64(O);ie<C&&(s.value?I.value=!0:ue.value=!0),ie>O&&(s.value?ue.value=!0:I.value=!0);let oe;if(console.log(r.value||y.value,"#fromCoinAmount.value || toCoinAmount.value"),r.value||y.value){R.value?oe=new u(r.value).mul(Math.pow(10,a.value.decimals)).toString():oe=new u(y.value).mul(Math.pow(10,g.value.decimals)).toString();let be,ce=R.value;if(console.log("执行##"),J.value||me.value){console.log(s.value?R.value:!R.value,"#needReverse.value?fixedFromCoin.value:!fixedFromCoin.value");const M=await Ne.calculateDepositSwapAmount({lowerTick:C,upperTick:O,curSqrtPrice:new le(i.value.current_sqrt_price),fix_amount_a:ce,input_amount:oe,coinTypeA:i.value.autoPoolPositionInfo.coin_type_a,coinTypeB:i.value.autoPoolPositionInfo.coin_type_b,clmm_pool:i.value.address,slippage:Number(A.value)/100,decimals:J.value?a.value.decimals:g.value.decimals});if(console.log(M,"###swapResult"),M){D.value=M.is_exceed,be=new le(M.afterSqrtPrice),oe=new le(M.swapOutAmount),ye.value={swap_amount:M.swapInAmount,a2b:ce},ce=!ce;const x=i.value.token_a.decimals,L=i.value.token_b.decimals;co.value=Fe.sqrtPriceX64ToPrice(M.afterSqrtPrice,x,L).toString(),console.log(co.value,"##afterCurrentPrice.value");const K=new u(M.swapInAmount).div(new u(Math.pow(10,x))).toString(),ge=new u(M.swapOutAmountLimit).div(new u(Math.pow(10,L))).toString(),pe=s.value?i.value.token_b.symbol:i.value.token_a.symbol,Y=s.value?i.value.token_a.symbol:i.value.token_b.symbol;fe.value=`To deposit ${T(J.value?r.value:y.value)} ${J.value?pe:Y},
          ${T(K)} ${J.value?pe:Y}  will be traded for ${T(ge)} ${J.value?Y:pe} added to the pool.`}else be=i.value.current_sqrt_price,oe=new le(oe),co.value=""}else D.value=!1,be=i.value.current_sqrt_price,oe=new le(oe),co.value="",fe.value="";console.log(ye,"##swapParams");let ke,l,N;if(ie>=C&&ie<=O){const M=f.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:a.value,tokenB:g.value,lowerTick:C,upperTick:O,coinAmount:oe,iscoinA:ce,roundUp:!0,slippage:Number(A.value)/100,curSqrtPrice:new le(be)});ke=M.liquidityAmount,l=M.tokenMaxA,N=M.tokenMaxB,!J.value&&!me.value&&(R.value?y.value=Number(N)>0?N:"":r.value=Number(l)>0?l:"")}else ie<O?ke={liquidityAmount:on(Z,Se,oe),tokenMaxA:0,tokenMaxB:y.value}.liquidityAmount:ke={liquidityAmount:nn(Z,Se,oe),tokenMaxA:r.value,tokenMaxB:0}.liquidityAmount;console.log(ke.toString(),"liquidityAmount###"),ae(ke),E(ke)}};Ie(()=>i.value,C=>{C&&!Ke(C)&&(a.value=C==null?void 0:C.token_a,g.value=C==null?void 0:C.token_b,I.value=!1,ue.value=!1,re())},{immediate:!0});const ee=k(()=>w.value.RATES),se=k(()=>{var C,O,ie,Z,Se,oe,be,ce,ke,l;if((O=ee.value[(C=a.value)==null?void 0:C.address])!=null&&O.price&&((Z=ee.value[(ie=g.value)==null?void 0:ie.address])!=null&&Z.price)){console.log((oe=ee.value[(Se=a.value)==null?void 0:Se.address])==null?void 0:oe.price,"RATES.value[fromCoin.value?.address]?.price");const N=new u(r.value||0).mul(new u((ce=ee.value[(be=a.value)==null?void 0:be.address])==null?void 0:ce.price)),M=new u(y.value||0).mul(new u((l=ee.value[(ke=g.value)==null?void 0:ke.address])==null?void 0:l.price));return Me(N.add(M).toString(),2)}else return"--"});Ie(()=>r.value,(C,O)=>{C?re():(V.value="--",y.value="",X.value="--")},{immediate:!0}),Ie(()=>y.value,(C,O)=>{C?re():(r.value="",V.value="--",X.value="--")},{immediate:!0});const{t:de,locale:c}=Mo(),z=k(()=>{const C=Number(r.value)>Number(F.value),O=Number(y.value)>Number(q.value);return!r.value&&!y.value?de("button.enterAmount"):C?de("button.insufficientBalance",{name:a.value.symbol}):O?de("button.insufficientBalance",{name:g.value.symbol}):D.value?de("button.insufficientLiquidity"):Number(i.value.quoteUSD)>0&&Number(se.value)>Number(i.value.quoteUSD)?"Exceeds maximum capacity":"Add Liquidity"}),Re=k(()=>{const C=Number(r.value)>Number(F.value),O=Number(y.value)>Number(q.value);return!!(!r.value&&!y.value||C||O||r.value<=0&&y.value<=0||D.value||ze.value!=="STATUS_RUNNING"||(console.log(se.value,i.value.quoteUSD,"positionInfo.value.quoteUSD#"),Number(i.value.quoteUSD)>0&&Number(se.value)>Number(i.value.quoteUSD)))}),ve=S(!0),{setIsShowSuccess:qe,setIsShowRejected:Ce,setIsShowWaiting:he,setTransactionDesc:we,setTransactionTxid:Pe,setPositiomNum:Ae}=j,Ne=Do("Sui"),Be=async()=>{var ke,l;t.value=!1,ve.value=!0,Pe("");const C=`${T(r.value)} ${(ke=a.value)==null?void 0:ke.symbol}`,O=`${T(y.value)} ${(l=g.value)==null?void 0:l.symbol}`;we(`Deposit ${r.value>0?C:""} ${y.value>0&&r.value>0?"and":""} ${y.value>0?O:""}`),he(!0);const ie=R.value,Z=i.value.autoPoolPositionInfo.tick_lower_index,Se=i.value.autoPoolPositionInfo.tick_upper_index,oe=Fe.sqrtPriceX64ToTickIndex(new le(i.value.current_sqrt_price));let be;R.value?be=new u(r.value).mul(Math.pow(10,a.value.decimals)).toString():be=new u(y.value).mul(Math.pow(10,g.value.decimals)).toString();const ce=i.value.rewarderInfo.map(N=>N.coinAddress);try{const N={lowerTick:Z,upperTick:Se,coinAmount:be,fix_amount_a:ie,slippage:Number(A.value)/100,curSqrtPrice:new le(i.value.current_sqrt_price),id:i.value.id,clmm_pool:i.value.autoPoolPositionInfo.pool,lp_token_type:i.value.lp_token_type,coinTypeA:i.value.autoPoolPositionInfo.coin_type_a,coinTypeB:i.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:ce,swapParams:ye.value,isOnlyA:J.value,isOnlyB:me.value,currentTickIndex:oe},M=await Ne.deposit(N);console.log(M,"===>payloadAdd11111");const x=await B.value.currentWallet.signAndExecuteTransactionBlock(M);let L=f.value.handleTx(x);if(console.log("toAdd###tx###",L),L&&L.hash){Pe(L.hash),he(!1),qe(!0),console.log(i,"===>positionInfo");const K={title:"Supplied",desc:`Deposit ${r.value>0?C:""} ${y.value>0&&r.value>0?"and":""} ${y.value>0?O:""}`,hash:L.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${r.value>0?C:""} ${y.value>0&&r.value>0?"and":""} ${y.value>0?O:""}`};U.value!=="Aptos"&&(K.res=L.res),f.value.showTransitionPending(K),await f.value.watchTransaction(K)&&setTimeout(()=>{m.updatePositionItem(i.value.id),f.value.getAccount(B.value.address)},1e3),Ae()}else he(!1),Ce(!0);r.value="",y.value="",ve.value=!1}catch(N){r.value="",y.value="",console.log("addError###",N),ve.value=!1,he(!1),Ce(!0)}},J=S(!1),me=S(!1),oo=C=>{r.value="",y.value="",fe.value="",C=="only-a"?(J.value=!J.value,me.value=!1):(me.value=!me.value,J.value=!1)},ze=k(()=>p.value.currentAutoPoolStatus),Ye=S(),no=()=>{Ye.value=window.setInterval(()=>{(r.value||y.value)&&re()},2e4)};return Io(()=>{no()}),Co(()=>{window.clearInterval(Ye.value)}),{currentAutoPoolStatus:ze,wallet:B,positionInfo:i,isShowAddModal:t,needReverse:s,fromCoin:a,toCoin:g,fromCoinAmount:r,toCoinAmount:y,fromCoinBlance:F,toCoinBlance:q,fixedFromCoin:R,maxBtnSelect:H,halfBtnSelect:b,totalAmountUSD:se,addCommom:T,shareOfPool:V,minimumReceivedLP:X,addLiquidityBtnText:z,addLiquidityBtnDisabled:Re,toAdd:Be,showToCoinLock:ue,showFromCoinLock:I,isOnlyA:J,isOnlyB:me,onlyToken:oo,onlyText:fe}}});const uo=e=>(Ge("data-v-4cf6f85b"),e=e(),He(),e),Bs={class:"auto-pool-add"},Ds={class:"auto-pool-add-content"},Fs={class:"liquidity-action-tab"},Ms=uo(()=>o("div",{class:"increase tab-active"},"Add",-1)),Os={class:"only-token"},Ls=uo(()=>o("div",null,"Deposit Amounts",-1)),Us={key:0},Vs={key:0},Es={key:0,class:"card-item"},Ws={key:1,class:"card-item"},Xs=uo(()=>o("span",null,"Pool Closed",-1)),js={class:"add-info"},Gs={key:0,class:"only-text"},Hs={class:"total-amount"},zs=uo(()=>o("span",null,"Total Amount",-1)),Ys={class:"total-amount"},Js=uo(()=>o("span",null,"Share of Pool",-1)),Zs={class:"total-amount"},Ks=uo(()=>o("span",null,"Minimum Received LP",-1));function Qs(e,t,j,G,U,B){var n,D,s,a,g,r,y,R,F,q,H,b,f;const m=Vo,p=Eo,_=ao("AutoPoolV2PoolStatus"),w=Lo,i=Wo;return d(),$("div",Bs,[o("div",Ds,[o("div",Fs,[Ms,o("div",{class:"remove",onClick:t[0]||(t[0]=Oo(A=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",Os,[Ls,o("div",null,[o("div",{class:"only-a",onClick:t[1]||(t[1]=A=>e.onlyToken("only-a"))},[o("p",null,[e.isOnlyA?(d(),$("span",Us)):W("",!0)]),o("span",null,v(e.needReverse?(a=(s=e.positionInfo)==null?void 0:s.token_b)==null?void 0:a.symbol:(D=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:D.symbol)+" only",1)]),o("div",{class:"only-b",onClick:t[2]||(t[2]=A=>e.onlyToken("only-b"))},[o("p",null,[e.isOnlyB?(d(),$("span",Vs)):W("",!0)]),o("span",null,v(e.needReverse?(R=(y=e.positionInfo)==null?void 0:y.token_a)==null?void 0:R.symbol:(r=(g=e.positionInfo)==null?void 0:g.token_b)==null?void 0:r.symbol)+" only",1)])])]),o("div",{class:Ze(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(d(),$("div",Es,[Q(m,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[3]||(t[3]=A=>e.fromCoinAmount=A),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[4]||(t[4]=A=>e.maxBtnSelect("fromCoin")),onOnHalf:t[5]||(t[5]=A=>e.halfBtnSelect("fromCoin")),onOnInput:t[6]||(t[6]=A=>{e.fromCoinAmount=A}),onOnFocus:t[7]||(t[7]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(d(),te(p,{key:0})):W("",!0)])):W("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(d(),$("div",Ws,[Q(m,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[8]||(t[8]=A=>e.toCoinAmount=A),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[9]||(t[9]=A=>e.maxBtnSelect("toCoin")),onOnHalf:t[10]||(t[10]=A=>e.halfBtnSelect("toCoin")),onOnInput:t[11]||(t[11]=A=>{e.toCoinAmount=A}),onOnFocus:t[12]||(t[12]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(d(),te(p,{key:0})):W("",!0)])):W("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(d(),te(_,{key:0})):W("",!0),(F=e.positionInfo)!=null&&F.is_pause?(d(),te(w,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:Oe(()=>[Xs]),_:1})):e.wallet.connected?(d(),te(w,{key:2,class:"big-btn liquidity-btn",disabled:e.addLiquidityBtnDisabled,onClick:t[13]||(t[13]=A=>e.isShowAddModal=!0)},{default:Oe(()=>[o("span",null,v(e.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(d(),te(w,{key:3,class:"big-btn liquidity-btn",onClick:t[14]||(t[14]=A=>e.wallet.setIsShowWalletModal(!0))},{default:Oe(()=>[o("span",null,v(e.$t("button.connectWallet")),1)]),_:1})),o("div",js,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount>0||e.isOnlyB&&e.toCoinAmount>0)?(d(),$("div",Gs,v(e.onlyText),1)):W("",!0),o("div",Hs,[zs,o("span",null,"$"+v(("addCommom"in e?e.addCommom:h(T))(e.totalAmountUSD)),1)]),o("div",Ys,[Js,o("span",null,v(e.shareOfPool)+"%",1)]),o("div",Zs,[Ks,o("span",null,v(("addCommom"in e?e.addCommom:h(T))(e.minimumReceivedLP))+" "+v(e.needReverse?(q=e.toCoin)==null?void 0:q.symbol:(H=e.fromCoin)==null?void 0:H.symbol)+"-"+v(e.needReverse?(b=e.fromCoin)==null?void 0:b.symbol:(f=e.toCoin)==null?void 0:f.symbol),1)])]),e.isShowAddModal?(d(),te(i,{key:4,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:t[15]||(t[15]=A=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):W("",!0)])}const xs=Ve(Ns,[["render",Qs],["__scopeId","data-v-4cf6f85b"]]),ei=je({components:{AutoPoolRemoveModal:Xo,AutoPoolV2PoolStatus:Zo},setup(){const e=wo(),t=k(()=>e),j=fo(),G=k(()=>j),U=k(()=>G.value.slippage),B=k(()=>G.value.chainName),m=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],p=S(25),_=eo(),w=xe(),i=k(()=>w),n=k(()=>(console.log(i.value.positionInfoObj[_.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),i.value.positionInfoObj[_.params.id])),D=k(()=>{var l;return(l=n.value)==null?void 0:l.needReverse}),s=S(),a=S(),g=S(!1),r=S(),y=k(()=>{var l;return(l=n.value)==null?void 0:l.myLiquidity}),R=S(!0),F=k(()=>B.value?Bo(B.value):{}),q=S(),H=Do("Sui"),b=S(""),f=S(""),A=S("--"),V=S(!1),X=S(!1),ae=S(),E=S(!0),I=S(),ue=Qe(),fe=k(()=>ue),ye=k(()=>fe.value.RATES),re=async()=>{if(R.value||!n.value)return;const l=n.value.autoPoolPositionInfo.tick_lower_index,N=n.value.autoPoolPositionInfo.tick_upper_index,M=Fe.sqrtPriceX64ToTickIndex(new le(n.value.current_sqrt_price));M<l&&(D.value?V.value=!0:X.value=!0),M>N&&(D.value?X.value=!0:V.value=!0);let x;if(console.log(b.value||f.value,"#fromCoinAmount.value || toCoinAmount.value"),b.value||f.value){E.value?x=new u(b.value).mul(Math.pow(10,s.value.decimals)).toString():x=new u(f.value).mul(Math.pow(10,a.value.decimals)).toString();let L,K=E.value;if(c.value||z.value){const ne=await H.calculateRemoveSwapAmount({lowerTick:l,upperTick:N,curSqrtPrice:new le(n.value.current_sqrt_price),fix_amount_a:K,receiveAmount:x,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:0,decimals:c.value?s.value.decimals:a.value.decimals});if(console.log(ne,"###swapResult"),ne){q.value=ne.is_exceed,x=new le(ne.swapOutAmount),L=n.value.current_sqrt_price,ae.value={swap_amount:ne.swapInAmount,liquidity:ne.liquidity,a2b:!K},K=!K;const Ue=n.value.token_a.decimals,Je=n.value.token_b.decimals,$e=new u(ne.swapInAmount).div(new u(Math.pow(10,Ue))).toString(),to=new u(ne.swapOutAmountLimit).div(new u(Math.pow(10,Je))).toString(),_e=D.value?n.value.token_b.symbol:n.value.token_a.symbol,Te=D.value?n.value.token_a.symbol:n.value.token_b.symbol;I.value=b.value==Z.value||f.value==Z.value?`To withdraw ${T(c.value?b.value:f.value)} ${c.value?_e:Te},
          ${T(c.value?n.value.amountB:n.value.amountA)} ${c.value?Te:_e} 
           in the pool will be traded for ${$e} ${c.value?_e:Te}`:`To withdraw ${T(c.value?b.value:f.value)} ${c.value?_e:Te},
          ${T($e)} ${c.value?Te:_e}  in the pool will be traded for ${T(to)} ${c.value?_e:Te}`}else L=n.value.current_sqrt_price,x=new le(x),I.value=""}else q.value=!1,L=n.value.current_sqrt_price,x=new le(x);console.log(L,"##curSqrtPrice"),console.log("执行了吗##");const{liquidityAmount:ge,tokenMaxA:pe,tokenMaxB:Y}=F.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:s.value,tokenB:a.value,lowerTick:l,upperTick:N,coinAmount:x,iscoinA:K,roundUp:!1,slippage:Number(U.value)/100,curSqrtPrice:new le(L)});if(console.log(n.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(Y.toString(),pe.toString(),n.value,"###323"),!c.value&&!z.value&&(E.value?f.value=Number(Y)>0?Y:"":b.value=Number(pe)>0?pe:""),(c.value||z.value)&&(b.value==Z.value||f.value==Z.value)){r.value=n.value.myLiquidity;const ne=new u(100);A.value=new u(n.value.myLiquidity).mul(new u(Math.pow(10,n.value.lpInfo.decimals))).toString(),ee.value=ge.toString(),p.value=ne.toNumber()}else{const ne=_o.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},ge.toString());r.value=new u(ne).div(new u(Math.pow(10,n.value.lpInfo.decimals))).toString();const Ue=new u(r.value).div(new u(y.value)).mul(100);console.log(r.value,y.value,"####lpBalance.value"),A.value=ne,ee.value=ge.toString(),p.value=Ue.toNumber()}}},ee=S(),se=k(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountA}),de=k(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountB}),c=S(!1),z=S(!1),Re=k(()=>{var K,ge,pe,Y;const l=(ge=ye.value[(K=s==null?void 0:s.value)==null?void 0:K.address])==null?void 0:ge.price,N=(Y=ye.value[(pe=a==null?void 0:a.value)==null?void 0:pe.address])==null?void 0:Y.price;console.log(l,N,b.value,f.value,"####totalWithdraw");let M=b.value!=="--"&&b.value!==""?b.value:0,x=f.value!=="--"&&f.value!==""?f.value:0,L;return l&&N&&(c.value||z.value?L=new u(c.value?M:x).mul(new u(c.value?l:N)).toString():(L=new u(M).mul(new u(l)).add(new u(x).mul(new u(N))).toString(),console.log(L,"result##"))),L>0&&L<.01?"<$0.01":`$${T(P(L,2))}`}),ve=async l=>{var Ue,Je,$e,to,_e,Te,bo,Ao,So,To;if(!R.value)return;R.value=!0,(Je=(Ue=n.value)==null?void 0:Ue.token_a)==null||Je.decimals,(to=($e=n.value)==null?void 0:$e.token_b)==null||to.decimals;const N=(_e=n.value)==null?void 0:_e.tick_lower_index,M=(Te=n.value)==null?void 0:Te.tick_upper_index;Fe.tickIndexToSqrtPriceX64(N),Fe.tickIndexToSqrtPriceX64(M);const x=(Ao=(bo=n.value)==null?void 0:bo.autoPoolPositionInfo)==null?void 0:Ao.tick_lower_index,L=(To=(So=n.value)==null?void 0:So.autoPoolPositionInfo)==null?void 0:To.tick_upper_index,K=Fe.sqrtPriceX64ToTickIndex(new le(n.value.current_sqrt_price));K<x&&(D.value?V.value=!0:X.value=!0),K>L&&(D.value?X.value=!0:V.value=!0);let ge="",pe,Y;console.log(l.value,"##item.value"),console.log(Y,"##coinAmount");let ne=E.value;if(console.log("执行##"),c.value||z.value&&!V.value&&!X.value){if(c.value){const Ee=new u(Z.value).mul(Math.pow(10,s.value.decimals)).mul(l.value).toString();console.log(Ee,"##amount"),Y=P(Ee,0),b.value=P(new u(Z.value).mul(l.value).toString(),s.value.decimals)}if(z.value){const Ee=new u(Z.value).mul(l.value).mul(Math.pow(10,a.value.decimals)).toString();Y=P(Ee,0),f.value=P(new u(Z.value).mul(l.value).toString(),a.value.decimals)}console.log(b.value,"##fromCoinAmount.value");const De=await H.calculateRemoveSwapAmount({lowerTick:N,upperTick:M,curSqrtPrice:new le(n.value.current_sqrt_price),fix_amount_a:ne,receiveAmount:Y,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:0,decimals:c.value?s.value.decimals:a.value.decimals});if(console.log(De,"###swapResult536"),De){q.value=De.is_exceed,Y=new le(De.swapOutAmount),n.value.current_sqrt_price,ae.value={swap_amount:De.swapInAmount,liquidity:De.liquidity,a2b:!ne},ne=!ne;const Ee=n.value.token_a.decimals,Ko=n.value.token_b.decimals,Qo=new u(De.swapInAmount).div(new u(Math.pow(10,Ee))).toString(),Ro=new u(De.swapOutAmountLimit).div(new u(Math.pow(10,Ko))).toString(),so=D.value?n.value.token_b.symbol:n.value.token_a.symbol,io=D.value?n.value.token_a.symbol:n.value.token_b.symbol;I.value=l.value==1?`To withdraw ${T(c.value?b.value:f.value)} ${c.value?so:io},
          ${T(c.value?n.value.amountB:n.value.amountA)} ${c.value?io:so}  in the pool will be traded for ${T(Ro)} ${c.value?so:io}`:`To withdraw ${T(c.value?b.value:f.value)} ${c.value?so:io},
          ${T(Qo)} ${c.value?io:so}  in the pool will be traded for ${T(Ro)} ${c.value?so:io}`,ge=De.liquidity}else n.value.current_sqrt_price,Y=new le(Y),I.value="";console.log(pe,"result###"),A.value=new u(n.value.myLiquidity).mul(new u(l.value)).toString(),console.log(n.value,n.value.liquidity,ge,A.value,"###positionInfo.value.liquidity"),console.log(A.value,"##lpTokenAmount.value"),r.value=new u(A.value),ee.value=ge}else{q.value=!1;const De=new u(se.value).mul(Math.pow(10,s.value.decimals)).mul(l.value).toString();Y=P(De,0),b.value=P(new u(se.value).mul(l.value).toString(),s.value.decimals);const Ee=new u(de.value).mul(l.value).mul(Math.pow(10,a.value.decimals)).toString();Y=P(Ee,0),f.value=P(new u(de.value).mul(l.value).toString(),a.value.decimals),n.value.current_sqrt_price,Y=new le(Y),l.value!==1?pe=new u(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(l.value).toString():pe=new u(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),r.value=new u(pe).div(Math.pow(10,n.value.lpInfo.decimals)),ge=_o.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},pe),A.value=P(pe,0),ee.value=P(ge,0),console.log(ge,"###newLiquidity525")}};Ie(p,ko((l,N)=>{l!==N&&(Number(l)>100?p.value=100:l&&n.value?(console.log("687===>"),p.value=l,ve({value:p.value/100})):(b.value="",f.value=""))},300)),Ie(()=>b.value,ko((l,N)=>{l?re():(f.value="",p.value=0)},500),{immediate:!0}),Ie(()=>f.value,ko((l,N)=>{l?re():(b.value="",p.value=0)},500),{immediate:!0});const qe=Uo(),{setIsShowSuccess:Ce,setIsShowRejected:he,setIsShowWaiting:we,setTransactionDesc:Pe,setTransactionTxid:Ae,setPositiomNum:Ne,setTransactionDescText:Be}=j,J=S(!1),{t:me}=Mo(),oo=async()=>{var Ue,Je;J.value=!0,Ae("");const l=Number(b.value)>0?`${T(b.value,s.value.decimals)} ${s.value.symbol}`:"",N=Number(f.value)>0?`${T(f.value,a.value.decimals)} ${a.value.symbol}`:"";console.log(l,N,"###transactionDescTo"),Pe(me("tips.removeLiquidiyText",{from:D.value?N:l,and:Number(b.value)>0&&Number(f.value)>0?"and":"",to:D.value?l:N})),we(!0);const M=me("modal.removeLiquidityText2");Be(M);const x=n.value.autoPoolPositionInfo.tick_lower_index,L=n.value.autoPoolPositionInfo.tick_upper_index,K=Fe.tickIndexToSqrtPriceX64(x),ge=Fe.tickIndexToSqrtPriceX64(L),pe=n.value.rewarderInfo.map($e=>$e.coinAddress);console.log(A.value,"##lpTokenAmount.value431");let Y;E.value?Y=new u(b.value).mul(Math.pow(10,s.value.decimals)).toString():Y=new u(f.value).mul(Math.pow(10,a.value.decimals)).toString(),console.log();const ne={lowerSqrtPrice:K,upperSqrtPrice:ge,lpTokenAmount:A.value,liquidity:ee.value,curSqrtPrice:new le(n.value.object.current_sqrt_price),slippage:Number(U.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.pool,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:pe,swapParams:ae.value,fix_amount_a:E.value,isOnlyA:!V.value&&!X.value?c.value:!1,isOnlyB:!X.value&&!V.value?z.value:!1,lowerTick:x,upperTick:L,receiveAmount:Y,sliderVal:p.value,positionInfo:n.value};try{const $e=await H.remove(ne);console.log($e,"移除流动性payload");const to=await t.value.currentWallet.signAndExecuteTransactionBlock($e);let _e=F.value.handleTx(to);if(console.log("0331###remove###tx####",_e),_e&&_e.hash){Ae(_e.hash),we(!1),Ce(!0);const Te={title:me("common.removeLiquidity"),desc:"",hash:_e.hash,descTransactions:`Remove ${l} ${Number(b.value)>0&&Number(f.value)>0?"and":""} ${N} from the pool`,sender:t.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${b.value} ${(Ue=s.value)==null?void 0:Ue.symbol} and ${f.value} ${(Je=a.value)==null?void 0:Je.symbol}`};Te.res=_e.res,F.value.showTransitionPending(Te),await F.value.watchTransaction(Te)&&(b.value="",f.value="",r.value="",p.value=0,setTimeout(()=>{w.updatePositionItem(n.value.id),F.value.getAccount(t.value.address)},1e3),Number(p.value)==100&&_.name=="auto-pool-detail"&&qe.push("/pool/auto"))}else we(!1),he(!0);J.value=!1}catch($e){console.log("Remove error",$e),J.value=!1,we(!1),he(!0)}};Ie(()=>n.value,(l,N)=>{l&&!Ke(l)&&(s.value=l==null?void 0:l.token_a,a.value=l==null?void 0:l.token_b,console.log("触发###"),(!N||N&&N.address!==l.address)&&(p.value=p.value>0?p.value:25,ve({value:p.value/100})))},{immediate:!0});const ze=k(()=>{const l=Number(r.value)>Number(y.value);return!b.value&&!f.value||!r.value||r.value<=0||!b.value&&c.value||!f.value&&z.value?me("button.enterAmount"):l?"Invalid Amount":q.value?me("button.insufficientLiquidity"):me("button.remove")}),Ye=k(()=>{const l=Number(r.value)>Number(y.value);return!!(!b.value&&!f.value||Number(b.value)<=0&&c.value||Number(f.value)<=0&&z.value||!r.value||r.value<=0||l||q.value||be.value!=="STATUS_RUNNING")}),no=l=>(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||lo("/image/coins/sui-unknown.png"),C=l=>{b.value="",f.value="",R.value=!0,I.value="",l=="only-a"?(c.value=!c.value,z.value=!1,E.value=!0):(z.value=!z.value,c.value=!1,E.value=!1)},O=l=>{R.value=!0,p.value=100,l==="fromCoin"?E.value=!0:E.value=!1},ie=l=>{R.value=!0,p.value=50,l==="fromCoin"?E.value=!0:E.value=!1},Z=S(),Se=async()=>{E.value;const l=n.value.token_a.decimals,N=n.value.token_b.decimals,M=c.value?de.value:se.value;console.log(M,"###receiveAmount");const x=c.value?a.value.address===n.value.token_a.address:s.value.address===n.value.token_a.address;if(c.value||z.value){console.log(M,"##receiveAmount");let L=await F.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:x,byAmountIn:!0,amount:M});console.log(L,L.estimatedAmountOut,l,N,"##preSwapRes");const K=new u(L.estimatedAmountOut);Z.value=K.sub(K.mul(Number(U.value)/100)).add(new u(c.value?se.value:de.value)).toString(),console.log("转换之后数量:",L.estimatedAmountOut),console.log("转换之后滑点数量:",K.mul(Number(U.value)/100).toNumber()),console.log("原有数量减滑点数量:",K.sub(K.mul(Number(U.value)/100)).toNumber()),console.log("fromCoin原有数量:",se.value),console.log(Z.value,"###onlyTokenBalance.value"),ve({value:p.value/100})}};Ie(()=>[c.value,z.value,se.value,de.value],([l,N])=>{l||N?Se():ve({value:p.value/100})},{immediate:!0});const oe=l=>`${l}%`,be=k(()=>i.value.currentAutoPoolStatus),ce=S(),ke=()=>{ce.value=window.setInterval(()=>{(b.value||f.value)&&!R.value?re():ve({value:p.value/100})},2e4)};return Io(()=>{ke()}),Co(()=>{window.clearInterval(ce.value)}),{removeLiquidityBtnText:ze,removeLiquidityBtnDisabled:Ye,wallet:t,ratioArr:m,positionInfo:n,isShowRemoveModal:g,needReverse:D,fromCoin:s,toCoin:a,lpAmount:r,lpBalance:y,sliderVal:p,sFixD:P,isSlider:R,fromCoinAmount:b,toCoinAmount:f,setPercent:ve,toRemove:oo,addCommom:T,getCoinIcon:no,isOnlyA:c,isOnlyB:z,onlyToken:C,fixedFromCoin:E,maxBtnSelect:O,halfBtnSelect:ie,fromCoinBlance:se,toCoinBlance:de,showFromCoinLock:V,showToCoinLock:X,removeText:I,onlyTokenBalance:Z,totalWithdraw:Re,formatter:oe,currentAutoPoolStatus:be}}});const mo=e=>(Ge("data-v-d765f239"),e=e(),He(),e),oi={class:"auto-pool-add"},ni={class:"auto-pool-add-content"},ti={class:"liquidity-action-tab"},si=mo(()=>o("div",{class:"remove tab-active"},"Remove",-1)),ii={key:0,class:"only-token"},li=mo(()=>o("div",null,"Deposit Amounts",-1)),ai={key:0},ui={key:0},ri={key:0,class:"card-item"},di={key:1,class:"card-item"},vi={class:"remove-ratio"},mi={class:"remove-ratio-select"},ci={key:0,class:"ratio"},pi={key:1,class:"ratio"},fi={class:"ratio-list"},yi=["onClick"],bi=mo(()=>o("span",null,"Pool Closed",-1)),ki={key:4,class:"remove-info"},gi={key:0,class:"remove-text total-amount"},hi={class:"total-amount"},_i=mo(()=>o("span",null,"Total Withdraw",-1)),wi={class:"total-amount"},$i=mo(()=>o("span",null,"LP Burn Amount",-1)),Ii={key:0},Ci={key:1};function Pi(e,t,j,G,U,B){var D,s,a,g,r,y,R,F,q,H,b,f,A,V,X,ae,E;const m=Vo,p=Eo,_=Fo,w=ao("AutoPoolV2PoolStatus"),i=Lo,n=Xo;return d(),$("div",oi,[o("div",ni,[o("div",ti,[o("div",{class:"increase",onClick:t[0]||(t[0]=Oo(I=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),si]),!e.showFromCoinLock&&!e.showToCoinLock?(d(),$("div",ii,[li,o("div",null,[o("div",{class:"only-a",onClick:t[1]||(t[1]=I=>e.onlyToken("only-a"))},[o("p",null,[e.isOnlyA?(d(),$("span",ai)):W("",!0)]),o("span",null,v(e.needReverse?(g=(a=e.positionInfo)==null?void 0:a.token_b)==null?void 0:g.symbol:(s=(D=e.positionInfo)==null?void 0:D.token_a)==null?void 0:s.symbol)+" only",1)]),o("div",{class:"only-b",onClick:t[2]||(t[2]=I=>e.onlyToken("only-b"))},[o("p",null,[e.isOnlyB?(d(),$("span",ui)):W("",!0)]),o("span",null,v(e.needReverse?(F=(R=e.positionInfo)==null?void 0:R.token_a)==null?void 0:F.symbol:(y=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:y.symbol)+" only",1)])])])):W("",!0),o("div",{class:Ze(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(d(),$("div",ri,[Q(m,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[3]||(t[3]=I=>e.fromCoinAmount=I),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:t[4]||(t[4]=I=>e.maxBtnSelect("fromCoin")),onOnHalf:t[5]||(t[5]=I=>e.halfBtnSelect("fromCoin")),onOnInput:t[6]||(t[6]=I=>{e.isSlider=!1,e.fromCoinAmount=I}),onOnFocus:t[7]||(t[7]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(d(),te(p,{key:0})):W("",!0)])):W("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(d(),$("div",di,[Q(m,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[8]||(t[8]=I=>e.toCoinAmount=I),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:t[9]||(t[9]=I=>e.maxBtnSelect("toCoin")),onOnHalf:t[10]||(t[10]=I=>e.halfBtnSelect("toCoin")),onOnInput:t[11]||(t[11]=I=>{e.isSlider=!1,e.toCoinAmount=I}),onOnFocus:t[12]||(t[12]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(d(),te(p,{key:0})):W("",!0)])):W("",!0)],2),o("div",vi,[o("div",mi,[Number(e.lpBalance)>=Number(e.lpAmount)?(d(),$("div",ci,v(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:h(P))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:h(P))(e.sliderVal,2))+"% ",1)):(d(),$("div",pi,"--")),o("div",fi,[(d(!0),$(ro,null,ln(e.ratioArr,(I,ue)=>(d(),$("div",{key:ue,class:Ze(["ratio-item",e.sliderVal==I.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=I.value}},v(I.name),11,yi))),128))])]),Q(_,{value:e.sliderVal,"onUpdate:value":t[13]||(t[13]=I=>e.sliderVal=I),"tip-formatter":e.formatter,onChange:t[14]||(t[14]=I=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(d(),te(w,{key:0})):W("",!0),(q=e.positionInfo)!=null&&q.is_pause?(d(),te(i,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:Oe(()=>[bi]),_:1})):e.wallet.connected?(d(),te(i,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:t[15]||(t[15]=I=>e.toRemove())},{default:Oe(()=>[o("span",null,v(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(d(),te(i,{key:3,class:"big-btn liquidity-btn",onClick:t[16]||(t[16]=I=>e.wallet.setIsShowWalletModal(!0))},{default:Oe(()=>[o("span",null,v(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?W("",!0):(d(),$("div",ki,[e.removeText&&(e.isOnlyA&&Number(e.fromCoinAmount)>0||e.isOnlyB&&Number(e.toCoinAmount)>0)?(d(),$("div",gi,v(e.removeText),1)):W("",!0),o("div",hi,[_i,o("span",null,v(e.totalWithdraw),1)]),o("div",wi,[$i,e.fromCoinAmount||e.toCoinAmount?(d(),$("span",Ii,v(("addCommom"in e?e.addCommom:h(T))(e.lpAmount))+" "+v(e.needReverse?(H=e.toCoin)==null?void 0:H.symbol:(b=e.fromCoin)==null?void 0:b.symbol)+"-"+v(e.needReverse?(f=e.fromCoin)==null?void 0:f.symbol:(A=e.toCoin)==null?void 0:A.symbol),1)):(d(),$("span",Ci,"0 "+v(e.needReverse?(V=e.toCoin)==null?void 0:V.symbol:(X=e.fromCoin)==null?void 0:X.symbol)+"-"+v(e.needReverse?(ae=e.fromCoin)==null?void 0:ae.symbol:(E=e.toCoin)==null?void 0:E.symbol),1))])])),e.isShowRemoveModal?(d(),te(n,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:t[17]||(t[17]=I=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):W("",!0)])}const Ai=Ve(ei,[["render",Pi],["__scopeId","data-v-d765f239"]]),Si=je({components:{AutoPoolV2Info:jo,AutoPoolV2PositionRange:Go,AutoPoolV2PoolComposition:zo,AutoPoolV2PoolLiquidity:Yo,AutoPoolV2PoolAdd:xs,AutoPoolV2PoolRemove:Ai},setup(){const e=xe();Qe();const t=fo(),j=k(()=>t),G=()=>{e.getAutoPoolAPY(),e.getVault(B.params.id)},U=S(),B=eo();Ie(()=>B.query.action,_=>{_&&(U.value=_)},{immediate:!0});const m=S(),p=()=>{m.value=window.setInterval(()=>{e.getVault(B.params.id)},6e4)};return Io(()=>{console.log(B,"route##"),p()}),Co(()=>{window.clearInterval(m.value)}),k(()=>j.value.chainName),Uo(),{clickRefresh:G,currentTab:U}}});const Ti={class:"auto-pool-detail-v2"},Ri={class:"detail-top"},qi={class:"detail-bottom pc-detail"},Ni={class:"detail-bottom-left"},Bi={class:"detail-bottom-right"},Di={class:"h5-detail"};function Fi(e,t,j,G,U,B){const m=xo,p=jo,_=Go,w=zo,i=Yo,n=ao("AutoPoolV2PoolAdd"),D=ao("AutoPoolV2PoolRemove");return d(),$("div",Ti,[o("div",Ri,[Q(m,{onClickRefresh:e.clickRefresh},null,8,["onClickRefresh"]),Q(p)]),o("div",qi,[o("div",Ni,[Q(_),Q(w),Q(i)]),o("div",Bi,[e.currentTab=="add"?(d(),te(n,{key:0,onChangeCurrentTab:t[0]||(t[0]=s=>e.currentTab="remove")})):(d(),te(D,{key:1,onChangeCurrentTab:t[1]||(t[1]=s=>e.currentTab="add")}))])]),o("div",Di,[e.currentTab=="add"?(d(),te(n,{key:0,onChangeCurrentTab:t[2]||(t[2]=s=>e.currentTab="remove")})):(d(),te(D,{key:1,onChangeCurrentTab:t[3]||(t[3]=s=>e.currentTab="add")})),Q(_),Q(w),Q(i)])])}const al=Ve(Si,[["render",Fi],["__scopeId","data-v-8d9cf596"]]);export{al as default};
