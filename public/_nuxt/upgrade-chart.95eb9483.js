import{d as H,c as T,e as g}from"./pool.30fff03e.js";import{a as Z,r as n,m as F,D as O,y as G,T as K,C as Q,M as X,a5 as Y,e as x,o as u,f as v,h as l,u as h,c as ee,v as b,x as U,z as W,i as ae,S as te,J as oe,p as se,k as ne}from"./entry.cadf26a4.js";/* empty css              *//* empty css              */import{u as le,c as ie}from"./sha256.dc659a48.js";import"./index.94f76959.js";import{l as re}from"./lodash.33d6068f.js";const de=Z({props:{mode:{type:String,required:!1,default:"vol"},address:{type:String,required:!1,default:""},poolInfo:{type:Object,required:!1,default:()=>({})}},setup(e){const i=le(),_=n(!1),t=F(()=>i),j=a=>{switch(a){case"vol":return"Volume (24H)";case"tvl":return"TVL";case"fee":return"Fees (24H)"}},w=F(()=>ie[t.value.chainName]),C=n(0),N=n(0),$=n(0),L=n(0),V=n(""),B=n("--"),A=re.debounce(()=>{k(p.value)},300);O(()=>e.mode,(a,c)=>{a!==c&&(_.value=!0,k(p.value))}),O(()=>e.address,(a,c)=>{a!==c&&(_.value=!0,k(p.value))});const q=n(null);G(()=>{window.addEventListener("resize",A),setTimeout(()=>{document.body.clientWidth<750?r(40,100,4,e.mode,"day"):r(40,100,8,e.mode,"day")},100),q.value=window.setInterval(()=>{k(p.value)},12e4)}),K(()=>{window.clearInterval(q.value)}),Q(()=>{window.removeEventListener("resize",A)}),X(()=>{if(!T(t.value.statsData||{})&&t.value.chainName){console.log(t.value.statsData,"===>store.statsData");const a=t.value.chainName=="Sui"?t.value.statsData.vol_in_usd_24h:t.value.statsData.vol_in_usd_24h_sum_v1;t.value.chainName=="Sui"?t.value.statsData.tvl_in_usd:t.value.statsData.tvl_in_usd_sum_v1,C.value=a,V.value=a,N.value=t.value.statsData.vol_in_usd,$.value=t.value.statsData.pure_tvl_in_usd,L.value=t.value.statsData.tx_num}});const p=n("D"),D=n({}),J=a=>{p.value=a,k(a)},k=a=>{a=="D"?document.body.clientWidth<750?r(40,100,4,e.mode,"day"):r(40,100,8,e.mode,"day"):a=="W"?document.body.clientWidth<750?r(20,100,6,e.mode,"wek"):r(30,100,12,e.mode,"wek"):a=="M"&&(document.body.clientWidth<750?r(20,100,12,e.mode,"mon"):r(20,100,18,e.mode,"mon"))},r=async(a,c,z,f,d)=>{const{data:m}=e.address!==""?t.value.theme=="default"?await fetch(`${w.value.api}/v2/histogram?date_type=${d}&typ=${f}&limit=${a}&swap_account=${e.address}`).then(s=>s.json()):await fetch(`${w.value.api}/v2/sui/histogram?date_type=${d}&typ=${f}&limit=${a}&address=${e.address}`).then(s=>s.json()):t.value.theme=="default"?await fetch(`${w.value.api}/v2/histogram?date_type=${d}&typ=${f}&limit=${a}`).then(s=>s.json()):await fetch(`${w.value.api}/v2/sui/histogram?date_type=${d}&typ=${f}&limit=${a}`).then(s=>s.json());let o=m.list;const y={categoryData:[],valueData:[],wheelBase:[]};o&&o.forEach(s=>{y.categoryData.push(s.date.slice(0,10)),y.valueData.push(s.num)}),_.value=!1,D.value=y,R(a,c,z)},E=n({day:"",month:"",year:"",current:""}),P=a=>a==1?"Jan":a==2?"Feb":a==3?"Mar":a==4?"Apr":a==5?"May":a==6?"Jun":a==7?"Jul":a==8?"Aug":a==9?"Sep":a==10?"Oct":a==11?"Nov":"Dec",R=(a,c,z)=>{const f=document.getElementById("echartsBox"),d=Y(f);let m={tooltip:{trigger:"axis",position:function(o,y,s,I,S){return[o[0]-50,"10%"]},backgroundColor:"#28353F",borderColor:"transparent",extraCssText:"height:24px;",formatter:function(o){let y=o[0].axisValue.slice(5,7),s=P(y);const I=o[0].axisValue.slice(8,10),S=s,M=o[0].axisValue.slice(0,4);return E.value={day:I,month:S,year:M,current:""},V.value=o[0].value,B.value=o[0].value,t.value.theme=="default","&nbsp;&nbsp;&nbsp;"+I+"&nbsp;"+S+"&nbsp;"+M+"&nbsp;&nbsp;&nbsp;"},textStyle:{color:"#909DB4",innerHeight:"24",lineHeight:"24"},padding:0,axisPointer:{type:"line",lineStyle:{width:4,type:"solid",color:t.value.theme=="default"?"#14B88E":"#76C8FF"}}},xAxis:{show:!1,max:D.value.categoryData.length>Number(a)?Number(a):D.value.categoryData.length-1,type:"category",axisTick:{show:!1},axisLine:{show:!1},splitLine:{show:!1},splitArea:{show:!1},data:D.value.categoryData},yAxis:{show:!1,max:function(o){return o.max},splitArea:{show:!1}},dataZoom:[{type:"inside",start:0,end:c,zoomLock:!0}],series:[{data:D.value.valueData,type:"bar",itemStyle:{normal:{barBorderRadius:1,color:o=>t.value.theme=="default"?"#00A57B":"#0B70B9"}},barWidth:z}],grid:{left:0,top:0,bottom:0,right:24}};document.body.clientWidth<750&&(m.grid={left:4,top:0,bottom:20,right:20}),t.value.theme=="default"&&(m.tooltip.backgroundColor="#293F38"),m&&d.setOption(m),m&&d.resize(),d.on("globalout",o=>{E.value={day:"",month:"",year:"",current:""},V.value=t.value.statsData.vol_in_usd_24h_sum_v1,B.value="--"})};return{currentVal:B,loading:_,getModeLabel:j,decimalUi:H,checkNullObj:T,store:t,addCommom:g,vol_in_usd_24h:C,vol_in_usd:N,tvl_in_usd:$,tx_num:L,changeEchart:J,echartVal:p,volTime:E,TradingVolume:V}}});const ue=e=>(se("data-v-1ba61f60"),e=e(),ne(),e),ce={class:"upgrade-chart-container"},me={class:"echarts-content-box"},ve={class:"echarts-content"},he={class:"echarts-content-top"},pe={class:"left"},fe={key:1},ye={key:2},be={key:3},ge={key:4},_e={key:5},we={class:"echarts-tab"},$e={key:0,class:"echarts-content-bottom echarts-content-bottom-loading"},De=ue(()=>l("div",{id:"echartsBox",class:"echarts-content-bottom"},null,-1));function ke(e,i,_,t,j,w){const C=te,N=oe;return u(),v("div",ce,[l("div",me,[l("div",ve,[l("div",he,[l("div",pe,[("checkNullObj"in e?e.checkNullObj:h(T))(e.store.statsData||{})?(u(),ee(C,{key:0,class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})):e.address==""?(u(),v("p",fe,"$"+b(Number(e.TradingVolume)==0?0:("addCommom"in e?e.addCommom:h(g))(("decimalUi"in e?e.decimalUi:h(H))(e.TradingVolume,2))),1)):e.currentVal!=="--"?(u(),v("p",ye,"$"+b(Number(e.currentVal)!==0&&Number(e.currentVal)<.01?"<0.01":("addCommom"in e?e.addCommom:h(g))(e.currentVal,2)),1)):e.mode=="vol"?(u(),v("p",be,"$"+b(Number(e.poolInfo.vol)!==0&&Number(e.poolInfo.vol)<.01?"<0.01":("addCommom"in e?e.addCommom:h(g))(e.poolInfo.vol,2)),1)):e.mode=="tvl"?(u(),v("p",ge,"$"+b(Number(e.poolInfo.liqidity)!==0&&Number(e.poolInfo.liqidity)<.01?"<0.01":("addCommom"in e?e.addCommom:h(g))(e.poolInfo.liqidity,2)),1)):e.mode=="fee"?(u(),v("p",_e,"$"+b(Number(e.poolInfo.fee_24_h)!==0&&Number(e.poolInfo.fee_24_h)<.01?"<0.01":("addCommom"in e?e.addCommom:h(g))(e.poolInfo.fee_24_h,2)),1)):U("",!0),l("span",null,b(e.address!==""?e.getModeLabel(e.mode):e.$t("common.tradingVal24h")),1)]),l("div",we,[l("div",{class:W(["title-day",e.echartVal=="D"?"title-active":""]),onClick:i[0]||(i[0]=$=>e.changeEchart("D"))}," D ",2),l("div",{class:W(["title-week",e.echartVal=="W"?"title-active":""]),onClick:i[1]||(i[1]=$=>e.changeEchart("W"))}," W ",2),l("div",{class:W(["title-mouth",e.echartVal=="M"?"title-active":""]),onClick:i[2]||(i[2]=$=>e.changeEchart("M"))}," M ",2)])]),e.loading?(u(),v("div",$e,[ae(N)])):U("",!0),De])])])}const ze=x(de,[["render",ke],["__scopeId","data-v-1ba61f60"]]);export{ze as _};
