import{_ as xo,a as en}from"./token-warning-modal.f74729d6.js";import{_ as on,a as nn}from"./coin-select.6551ef8c.js";import{a as ye,u as Se,b as fo,c as we,D as g,s as le,j as po,h as Xe,z as lo,f as ee,_ as Oe,w as ro,p as de,d as ae,g as be,e as uo}from"./pool.ec1a9e19.js";import{e as Ae,a as _e,a1 as go,a2 as Co,r as u,m as w,A as K,o as a,f as v,h as o,c as U,s as T,j as H,t,x as me,u as E,J as ho,S as bo,p as ke,k as Ie,M as yo,l as wo,K as So,w as ve,i as ce,B as Ao,a4 as sn,F as Qe,q as co,b as mo,v as an,z as tn,a7 as Pe,D as ln}from"./entry.70e873f1.js";/* empty css              *//* empty css              */import"./decimal.7f92a463.js";import{i as ie}from"./import-icon.de3e6c66.js";import{a as rn,_ as un}from"./network-tips.58d30b95.js";/* empty css              */import{u as dn}from"./swapRouter.0b6c9118.js";import{_ as cn}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./icon-selected_3x.350736e2.js";import"./token-warning.b75083c1.js";/* empty css              */import"./img-no-Positions_2x.72e23790.js";const mn=""+globalThis.__publicAssetsURL("sui-image/route-view.png");const vn=_e({props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},routertotalPercents:{type:Array,default:()=>[]},routerPool:{type:Array,default:()=>[]},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1}},setup(e){const r=go(Co,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),h=u(!1),C=ye(),I=w(()=>C),N=w(()=>I.value.slippage),m=w(()=>I.isShowRouterModal);K(()=>e,y=>{console.log(y,"==>newValue")},{immediate:!0,deep:!0});const B=Se(),P=w(()=>B),D=fo("Sui"),_=u({}),L=u({}),q=u({});K(()=>[e.suiPreSwapdata,P.value.tokensObj],async([y,c])=>{y&&!we(y)&&c&&!we(c)&&(y.coinTypeA&&(_.value=c[y.coinTypeA]||(await D.getTokenListByCoinType([y.coinTypeA]))[0]),y.coinTypeB&&(L.value=c[y.coinTypeB]||(await D.getTokenListByCoinType([y.coinTypeB]))[0]),y.coinTypeC&&(q.value=c[y.coinTypeC]||(await D.getTokenListByCoinType([y.coinTypeC]))[0]))},{immediate:!0});const S=u(0),M=u(0);return K(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,N.value],([y,c,oe,A,W,i])=>{if(y&&c&&oe&&A&&i)if(W){const s=new g(c).mul(new g(i/100));M.value=new g(c).sub(s).toString()}else{const s=new g(y).mul(new g(i/100));S.value=new g(y).sub(s).toString()}},{immediate:!0}),{sFixD:le,getCoinIcon:y=>{var c;return(y==null?void 0:y.logoURI)||(y==null?void 0:y.logo_url)||((c=P.value.tokensObj[y==null?void 0:y.address])==null?void 0:c.logo_url)||(I.theme==="default"?ie("/image/coins/unknown.png"):ie("/image/coins/sui-unknown.png"))},indicator:r,rateChange:h,slippage:N,isShowRouterModal:m,indexStore:C,coinTypeA:_,coinTypeB:L,coinTypeC:q,maximumSold:S,minimumReceived:M}}}),$e=e=>(ke("data-v-e22accfc"),e=e(),Ie(),e),fn={key:0,class:"swap-info"},pn={class:"loading-swap"},gn={key:1,class:"swap-rate"},Cn={key:0},hn=["src"],bn={key:0},yn=["src"],wn={key:1},Sn={key:0},An=["src"],kn=["src"],In=$e(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),$n=[In],Tn={key:2},Nn={class:"trade-info"},Bn={key:0,class:"trade-block"},Pn=$e(()=>o("div",{class:"lebal"},"Price Impact",-1)),On={class:"trade-block"},_n={class:"lebal"},Fn={key:0,class:"text"},Rn={class:"trade-block"},Un=$e(()=>o("div",{class:"lebal"},"Fee",-1)),Dn={key:0,class:"text"},Ln={key:1,class:"trade-block"},jn=$e(()=>o("div",{class:"lebal"},"Route",-1)),En={key:0,class:"text"},Mn={key:0},qn={key:1},Wn={key:2},Xn=$e(()=>o("img",{src:mn,alt:""},null,-1));function Qn(e,r,h,C,I,N){const m=ho,B=bo;return e.swapLoading||e.fromCoinAmount&&e.toCoinAmount&&!e.insufficientLiquidity?(a(),v("div",fn,[o("div",pn,[e.swapLoading||e.swapRouterLoading?(a(),U(m,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):T("",!0),e.swapLoading?e.swapLoading?(a(),v("span",Tn,"Best route and price")):T("",!0):(a(),v("div",gn,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(a(),v("span",wn,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(a(),v("span",Sn,[o("img",{src:e.getCoinIcon(e.toCoin)},null,8,An),H(" 1 "+t(e.toCoin.symbol)+" ≈ ",1),o("img",{src:e.getCoinIcon(e.fromCoin)},null,8,kn),H(t(e.oneFromAmount)+" "+t(e.fromCoin.symbol),1)])):(a(),U(m,{key:1,indicator:e.indicator},null,8,["indicator"]))])):T("",!0):(a(),v("span",Cn,[o("img",{src:e.getCoinIcon(e.fromCoin)},null,8,hn),H(" 1 "+t(e.fromCoin.symbol)+" ≈ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(a(),v("span",bn,[o("img",{src:e.getCoinIcon(e.toCoin)},null,8,yn),H(t(e.oneToAmount)+" "+t(e.toCoin.symbol),1)])):(a(),U(m,{key:1,indicator:e.indicator},null,8,["indicator"]))])),(a(),v("svg",{class:"icon-change","aria-hidden":"true",onClick:r[0]||(r[0]=P=>e.rateChange=!e.rateChange)},$n))]))]),o("div",Nn,[e.impact?(a(),v("div",Bn,[Pn,e.swapRouterLoading?(a(),U(B,{key:1,paragraph:!1,active:""})):(a(),v("div",{key:0,class:me(["text",e.impact<1?"impact-s":e.impact<10&&e.impact>1?"impact-w":"impact-e"])},t(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",3))])):T("",!0),o("div",On,[o("div",_n,t(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(a(),U(B,{key:1,paragraph:!1,active:""})):(a(),v("div",Fn,t(e.fixedFromCoin?("sFixD"in e?e.sFixD:E(le))(e.minimumReceived,e.toCoin.decimals):("sFixD"in e?e.sFixD:E(le))(e.maximumSold,e.fromCoin.decimals))+" "+t(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",Rn,[Un,e.swapRouterLoading?(a(),U(B,{key:1,paragraph:!1,active:""})):(a(),v("div",Dn,t(e.suiSwapFee),1))]),e.insufficientLiquidity?T("",!0):(a(),v("div",Ln,[jn,e.swapRouterLoading?(a(),U(B,{key:1,paragraph:!1,active:""})):(a(),v("div",{key:0,class:"text",onClick:r[1]||(r[1]=P=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[e.swapRouterLoading?T("",!0):(a(),v("div",En,[e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeA?(a(),v("span",Mn,t(e.coinTypeA.symbol)+" "+t(e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeB?"> ":""),1)):T("",!0),e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeB?(a(),v("span",qn,t(e.coinTypeB.symbol)+" "+t(e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeC?"> ":""),1)):T("",!0),e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeC?(a(),v("span",Wn,t(e.coinTypeC.symbol),1)):T("",!0)])),Xn]))]))])])):T("",!0)}const Hn=Ae(vn,[["render",Qn],["__scopeId","data-v-e22accfc"]]),vo={SUI:{symbol:"SUI",name:"Sui Coin",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::BTC"},sBTC:{symbol:"sBTC",name:"Wrapped BTC",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::BTC"},sETH:{symbol:"sETH",name:"Wrapped Ether",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::ETH"},USDC:{symbol:"USDC",name:"USDC Coin",decimals:6,balance:12e3,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDC"},USDT:{symbol:"USDT",name:"Tether USD",decimals:6,balance:1e4,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDT"}},zn={"USDT-USDC":{symbol:"USDT-USDC",name:"USDT-USDC",decimals:6,coinA:vo.USDT,coinB:vo.USDC,feeDenominator:"10000",feeNumerator:"1",fee:"0.01",address:"0x1ce98d89494e9d3d7935bc3bd5fc714fc2abb99db3f024162552c4ba172f4d28::amm_swap::PoolLiquidityCoin<0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDT,0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDC>"}};function Jn(e,r){const h=Object.values(zn).filter(C=>e===C.coinA.symbol&&r===C.coinB.symbol||e===C.coinB.symbol&&r===C.coinA.symbol);return h&&h[0]||null}const Kn=_e({components:{Modal:yo},props:{fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},impact:{type:Number,required:!0},fee:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},formatFee:{type:String,default:""}},emits:["to-swap","on-close"],setup(e,r){const{t:h,locale:C}=wo(),I=ye(),N=po();w(()=>N);const m=w(()=>{const A=Jn(e.fromCoin.symbol,e.toCoin.symbol);return Xe(lo(e.fromCoinAmount).mul(lo(A.fee).div(100)).toString(),e.fromCoin.decimals)}),B=u(I.slippage||.5),P=u(!0),D=u(!1);function _(A){P.value=A}const L=async()=>{r.emit("to-swap")},q=Se(),S=w(()=>q),M=w(()=>S.value.tokensObj&&e.fromCoin.address&&S.value.tokensObj[e.fromCoin.address]&&S.value.tokensObj[e.fromCoin.address].logoURI),Z=w(()=>S.value.tokensObj&&e.toCoin.address&&S.value.tokensObj[e.toCoin.address]&&S.value.tokensObj[e.toCoin.address].logoURI),y=ye(),c=w(()=>y);return{fromCoinUrl:M,toCoinUrl:Z,t:h,importIcon:ie,fixD:ee,decimalFormat:Xe,direct:P,changeDirect:_,rateChange:D,clickNextBtn:L,slippage:B,liquidityProviderFee:m,getCoinIcon:A=>{var W;return(A==null?void 0:A.logoURI)||(A==null?void 0:A.logo_url)||((W=S.value.tokensObj[A==null?void 0:A.address])==null?void 0:W.logo_url)||(c.value.theme==="default"?ie("/image/coins/unknown.png"):ie("/image/coins/sui-unknown.png"))}}}});const Fe=e=>(ke("data-v-79d6fb3b"),e=e(),Ie(),e),Zn=Fe(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Yn={class:"swap-confirm-container"},Gn={class:"card-content"},Vn={class:"top"},xn={class:"coin"},es=["src"],os=Fe(()=>o("div",{class:"svg-box"},[o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-swap2"})])],-1)),ns={class:"coin"},ss=["src"],as={class:"bottom"},ts={class:"induction"},is={class:"item"},ls={class:"induction-text"},rs={class:"induction-value induction-value-change"},us={key:0},ds={key:1},cs=Fe(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),ms=[cs],vs={class:"item"},fs={class:"induction-text"},ps={class:"induction-value"},gs={class:"item"},Cs={class:"induction-text"},hs={class:"induction-value"},bs={key:0,class:"item"},ys={class:"induction-text"},ws={key:0,class:"icon","aria-hidden":"true"},Ss=Fe(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),As=[Ss],ks={key:1,class:"item"},Is={class:"induction-text"},$s={key:0,class:"induction-value"},Ts={key:1,class:"induction-value"};function Ns(e,r,h,C,I,N){const m=Ao,B=So("Modal");return a(),U(B,{width:"440px",visible:!0,footer:null,title:e.$t("modal.swapConfirmTitle"),class:"swap-confirm-modal",onCancel:r[2]||(r[2]=P=>e.$emit("on-close"))},{closeIcon:ve(()=>[Zn]),default:ve(()=>[o("div",Yn,[o("div",Gn,[o("div",Vn,[o("div",xn,[o("img",{src:e.fromCoinUrl||e.getCoinIcon(e.fromCoin)},null,8,es),o("p",null,t(e.fromCoinAmount),1),H("    "),o("p",null,t(e.fromCoin.symbol),1)]),os,o("div",ns,[o("img",{src:e.toCoinUrl||e.getCoinIcon(e.toCoin)},null,8,ss),o("p",null,t(e.toCoinAmount),1),H("    "),o("p",null,t(e.toCoin.symbol),1)])]),o("div",as,[o("div",ts,[o("div",is,[o("div",ls,t(e.$t("common.rate")),1),o("div",rs,[e.rateChange?(a(),v("span",ds," 1 "+t(e.toCoin.symbol)+" ≈ "+t(("fixD"in e?e.fixD:E(ee))(Number(e.fromCoinAmount)/Number(e.toCoinAmount),e.toCoin.decimals))+" "+t(e.fromCoin.symbol),1)):(a(),v("span",us," 1 "+t(e.fromCoin.symbol)+" ≈ "+t(("fixD"in e?e.fixD:E(ee))(Number(e.toCoinAmount)/Number(e.fromCoinAmount),e.toCoin.decimals))+" "+t(e.toCoin.symbol),1)),(a(),v("svg",{class:"icon-change","aria-hidden":"true",onClick:r[0]||(r[0]=P=>e.rateChange=!e.rateChange)},ms))])]),o("div",vs,[o("div",fs,t(e.$t("modal.slippageTolerance")),1),o("div",ps,t(e.slippage)+"%",1)]),o("div",gs,[o("div",Cs,t(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",hs,t(e.fixedFromCoin?("fixD"in e?e.fixD:E(ee))(e.toCoinAmount-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals):("fixD"in e?e.fixD:E(ee))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals))+" "+t(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),e.chainName=="Sui"?(a(),v("div",bs,[o("div",ys,t(e.$t("common.priceImpact")),1),o("div",{class:me(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>1?"impact-w":"impact-e"])},[H(t(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(a(),v("svg",ws,As)):T("",!0)],2)])):T("",!0),e.fee?(a(),v("div",ks,[o("div",Is,t(e.$t("common.fee")),1),e.chainName=="Aptos"?(a(),v("div",$s,t(e.formatFee)+" "+t(e.fromCoin.symbol)+" ("+t(e.fee*100)+"%) ",1)):(a(),v("div",Ts,t(e.fee),1))])):T("",!0)])])])]),ce(m,{class:"big-btn swap-confirm-btn",onClick:r[1]||(r[1]=P=>e.clickNextBtn())},{default:ve(()=>[H(t(e.$t("button.confirmSwap")),1)]),_:1})]),_:1},8,["title"])}const Bs=Ae(Kn,[["render",Ns],["__scopeId","data-v-79d6fb3b"]]);async function Ps(e){const{prices:r}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=1&interval=hourly`,{headers:{Connection:"keep-alive",Accept:"*/*"}});return r}const Os={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""}},setup(e,r){const{$echarts:h}=sn();let C=null,I;const N=u(!0),m=(i,s,ne)=>{I={xAxis:{type:"category",boundaryGap:!1,show:!1,data:s},yAxis:{type:"value",show:!1,min:function(k){return k.min-k.min*.1},max:function(k){return k.max+k.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:S.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(k){return`<div class="chart-tip">
              <div>${k&&k[0]&&k[0].name}</div>
              <div>$${ee(k&&k[0]&&k[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:S.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:S.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:i,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:S.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},I&&C.clear(),I&&C.setOption(I,!0),C.resize(),N.value=!1},B=Se(),P=w(()=>B),D=u(""),_=u(""),L=async i=>{var V,pe;const s=[],ne=[],k=await Ps(i);D.value=k&&k.length>1&&(k[k.length-1][1]-k[0][1])/k[0][1]*100,_.value=k&&k.length>1&&k[k.length-1][1],k.forEach(O=>{s.push(O[1]);const j=ro(O[0],"MD"),l=ro(O[0],"HM");ne.push(j+" "+l)});let fe=document.getElementById(`main${(V=e.coin)==null?void 0:V.name}`);C=h.init(fe),m(s,ne,(pe=e.coin)==null?void 0:pe.name)},q=ye(),S=w(()=>q),M=w(()=>S.value.chainName),Z=w(()=>Oe[M.value]);K(()=>e.id,(i,s)=>{console.log(i,s,"===>oldValue"),console.log(!N.value,"!isFirst.value"),i&&(D.value="",_.value="",setTimeout(()=>{L(i)},1e3))},{immediate:!0});const y=u(""),c=u(""),oe=u(""),A=u("");K(()=>[P.value.tokensObj,e.coin],([i,s])=>{var ne,k;i&&s&&i[s.address]&&(console.log(i[s.address],"===>newValue[coin.address]"),c.value=((ne=i[s.address])==null?void 0:ne.labels)&&((k=i[s.address])==null?void 0:k.labels[0]),y.value=i[s.address].name,oe.value=i[s.address].symbol,A.value=i[s.address].address)},{immediate:!0,deep:!0}),K(()=>e.refresh,i=>{i&&L(e.id)});const W=w(()=>S.value.theme);return console.log(e.coin.address=="0x2::sui::SUI","0x2::sui::SUI"),{theme:W,store:q,importIcon:ie,fixD:ee,config:Z,price_rate_24h:D,nowPrice:_,coinName:y,coinLabels:c,coinSymbol:oe,address:A}}};const _s=e=>(ke("data-v-079780ad"),e=e(),Ie(),e),Fs={class:"token-info"},Rs={class:"token-info-padding"},Us={class:"token-info-header"},Ds={class:"left"},Ls=["src","onerror"],js={class:"name"},Es={class:"desc"},Ms={class:"right"},qs={class:"price"},Ws={class:"token-info-footer"},Xs={class:"left"},Qs={class:"address"},Hs={key:0,class:"pc-address"},zs={key:1,class:"pc-address"},Js={class:"h5-address"},Ks=_s(()=>o("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Zs=[Ks],Ys={class:"right"},Gs=["id"];function Vs(e,r,h,C,I,N){var m;return a(),v("div",Fs,[o("div",Rs,[o("div",Us,[o("div",Ds,[o("img",{src:h.coin.logoURI||C.importIcon(`/image/coins/${h.coin.symbol.toLowerCase()}.png`),onerror:C.theme=="default"?C.importIcon("/image/coins/unknown.png"):C.importIcon("/image/coins/sui-unknown.png")},null,8,Ls),o("div",null,[o("div",js,t(C.coinSymbol),1),o("div",Es,[o("span",null,t(C.coinName)+" "+t(C.coinLabels?`(${C.coinLabels})`:""),1)])])]),o("div",Ms,[o("div",qs,"$"+t(C.fixD(C.nowPrice,2)),1),C.price_rate_24h?(a(),v("div",{key:0,class:me(C.price_rate_24h>0?"increase up":C.price_rate_24h<0?"increase down":"increase up")},t(C.price_rate_24h>0?`+ ${C.fixD(C.price_rate_24h,2)}`:C.price_rate_24h<0?+`${C.fixD(C.price_rate_24h,2)}`:`+${C.fixD(C.price_rate_24h,2)}`)+"% ",3)):T("",!0)])]),o("div",Ws,[o("div",Xs,[o("div",Qs,[h.coin&&C.address!=="0x2::sui::SUI"?(a(),v("span",Hs,t(h.coin&&h.coin.address.substr(0,13))+" ... "+t(h.coin&&h.coin.address.substr(h.coin.address.length-13,13)),1)):(a(),v("span",zs,t(h.coin&&h.coin.address),1)),o("span",Js,t(h.coin&&h.coin.address.substr(0,4))+" ... "+t(h.coin&&h.coin.address.substr(h.coin.address.length-4,4)),1),(a(),v("svg",{class:"icon","aria-hidden":"true",onClick:r[0]||(r[0]=B=>C.store.copy(h.coin&&h.coin.address))},Zs))])]),o("div",Ys,[o("div",{id:`main${(m=h.coin)==null?void 0:m.name}`,class:"main"},null,8,Gs)])])])])}const xs=Ae(Os,[["render",Vs],["__scopeId","data-v-079780ad"]]);const ea=_e({components:{Modal:yo},props:{routertotalPercents:{type:Array,default:()=>[]},routerPool:{type:Array,default:()=>[]},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},routerTotalAmounts:{type:String,default:""}},setup(e){const r=Se(),h=w(()=>r),C=u([]);return K(()=>[e.routerPool,h.value.poolConfigObj,e.routerTotalAmounts,e.fromCoin,e.toCoin],([I,N,m,B,P])=>{if(console.log(e,"props=====>100"),I&&I.length>0&&N&&!we(N)&&m){const D=[];I.forEach(_=>{console.log(m,"===>routerTotalAmounts"),console.log(_,"ele.amountIn===>");const L="100",q=_.amountIn.toString(),S=de(_.amountOut.toString(),P.decimals),M=_.poolAddress.map((Z,y)=>{const c=N&&N[Z];return console.log(_,"ele===>118"),{...c}});D.push({percent:L,..._,amountIn:q,amountOut:S,poolAddress:M})}),console.log(D,"result===>"),C.value=D}},{immediate:!0}),w(()=>{var I,N;return(N=(I=h.value)==null?void 0:I.poolInfo)==null?void 0:N.needReverse}),{addCommom:ae,routerStep:C}}}),He=e=>(ke("data-v-7efa049d"),e=e(),Ie(),e),oa={class:"route-top"},na={class:"token-a"},sa=["src"],aa={class:"token-num"},ta={class:"token-symbol"},ia={class:"token-b"},la={class:"token-num"},ra={class:"token-symbol"},ua=["src"],da={class:"route-bottom"},ca=He(()=>o("div",{class:"left-round"},null,-1)),ma=He(()=>o("div",{class:"right-round"},null,-1)),va={class:"percent"},fa={class:"pool-info"},pa=["src"],ga=["src"],Ca={key:0,class:"icon","aria-hidden":"true"},ha=He(()=>o("use",{"xlink:href":"#icon-icon_on1"},null,-1)),ba=[ha];function ya(e,r,h,C,I,N){const m=So("Modal");return a(),U(m,{title:"Route",width:"600px",visible:!0,footer:null,onCancel:r[0]||(r[0]=B=>e.$emit("onClose"))},{default:ve(()=>{var B,P,D,_;return[o("div",oa,[o("div",na,[o("img",{src:(B=e.fromCoin)==null?void 0:B.logo_url,alt:""},null,8,sa),o("span",aa,t(("addCommom"in e?e.addCommom:E(ae))(e.fromCoinAmount)),1),o("span",ta,t((P=e.fromCoin)==null?void 0:P.symbol),1)]),o("div",ia,[o("span",la,t(("addCommom"in e?e.addCommom:E(ae))(e.toCoinAmount)),1),o("span",ra,t((D=e.toCoin)==null?void 0:D.symbol),1),o("img",{src:(_=e.toCoin)==null?void 0:_.logo_url,alt:""},null,8,ua)])]),o("div",da,[ca,ma,(a(!0),v(Qe,null,co(e.routerStep,(L,q)=>(a(),v("div",{key:L,class:me(["route-path",q!==0?"route-path-active":""])},[o("div",va,[o("span",null,t(L.percent)+"%",1),o("span",null,t(("addCommom"in e?e.addCommom:E(ae))(L.amountOut))+" "+t(e.toCoin.symbol),1)]),(a(!0),v(Qe,null,co(L.poolAddress,(S,M)=>(a(),v("div",{key:M,class:"pool-info-box"},[o("div",fa,[o("img",{class:"token-a-img",src:S.needReverse?S.coinB.logo_url:S.coinA.logo_url,alt:""},null,8,pa),o("img",{class:"token-b-img",src:S.needReverse?S.coinA.logo_url:S.coinB.logo_url,alt:""},null,8,ga),o("span",null,t(S.fee*100)+"%",1)]),M!==L.poolAddress.length-1?(a(),v("svg",Ca,ba)):T("",!0)]))),128))],2))),128))])]}),_:1})}const wa=Ae(ea,[["render",ya],["__scopeId","data-v-7efa049d"]]),Sa=_e({setup(){const e=mo(),r=go(Co,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:h,locale:C}=wo(),I=ye(),N=Se(),m=w(()=>N);let B=u(!1),P=u(!1),D=u(!1),_=u(!1),L=u(!1),q=u(!1);const S=u("fromCoin"),M=u(""),Z=u(""),y=u(!1),c=u(!0),oe=u(!1),A=u(!1),W=u(!1),i=u(""),s=u(""),ne=u(20),k=u(0),fe=u(null),V=u(!1),pe=w(()=>I.slippage),O=w(()=>I.chainName),j=w(()=>O.value?fo(O.value):{}),l=u(),f=u(),ze=w(()=>Oe&&Oe[O.value]&&Oe[O.value].hasRouter),Je=w(()=>N.getPoolInfoSuccess),ko=w(()=>{var n;return F.value&&((n=F.value)!=null&&n.is_pause)?"Pool Closed":!l.value||!f.value?h("modal.selectTokenModalTitle"):!ze.value&&!F.value&&Je.value?"Pool Not Found":ze.value&&Me.value?"No Available Route":(console.log(V.value,"===>insufficientLiquidity.value"),V.value?h("button.insufficientLiquidity"):!Number(i.value)&&!Number(s.value)?h("button.enterAmount"):Number(i.value)>Number(Y.value)?h("button.insufficientBalance",{name:l.value.symbol}):h("button.swap"))}),Io=n=>{var p,d,b,$;S.value=n,n==="fromCoin"?(M.value=((p=f.value)==null?void 0:p.address)||"",Z.value=((d=l.value)==null?void 0:d.address)||""):(M.value=((b=l.value)==null?void 0:b.address)||"",Z.value=(($=f.value)==null?void 0:$.address)||""),y.value=!0},Re=u({}),Ue=u({}),$o=n=>{S.value==="fromCoin"?(Re.value=n,Le(n)):(Ue.value=n,Le(n))},To=n=>{n==="fromCoin"?(c.value=!0,O.value==="Aptos"?i.value=Y.value>0?l.value.symbol=="APT"?new g(Number(Y.value)).sub(new g(.1)).lt(new g(0))?"0":new g(Number(Y.value)).sub(new g(.1)).toString():String(Y.value):"":i.value=Y.value>0?l.value.symbol=="SUI"?new g(Number(Y.value)).sub(new g(.05)).lt(new g(0))?"0":new g(Number(Y.value)).sub(new g(.05)).toString():String(Y.value):""):(c.value=!1,O.value==="Aptos"?s.value=x.value>0?f.value.symbol=="APT"?new g(Number(x.value)).sub(new g(.1)).lt(new g(0))?"0":new g(Number(x.value)).sub(new g(.1)).toString():String(x.value):"":s.value=x.value>0?f.value.symbol=="SUI"?new g(Number(x.value)).sub(new g(.05)).lt(new g(0))?"0":new g(Number(x.value)).sub(new g(.05)).toString():String(x.value):"")},No=n=>{n==="fromCoin"?(c.value=!0,i.value=Y.value>0?le(new g(Number(Y.value)).div(2).toString(),l.value.decimals).toString():""):(c.value=!1,s.value=x.value>0?le(new g(Number(x.value)).div(2).toString(),f.value.decimals).toString():"")};an(()=>{Ke()}),tn(()=>{clearInterval(fe.value)});const De=w(()=>I),Bo=()=>{F.value&&(clearInterval(fe.value),N.setPoolConfigList(De.value.chainName,De.value.filterCoinsObj),k.value=0,P.value=!0,N.updateCurrentPools(F.value.poolAddress,O.value),he(c.value?i.value:s.value),I.getStatsData(O.value,De.value.filterCoinsObj),setTimeout(()=>{P.value=!1,Ke()},1e3))};function Po(){const n=l.value;l.value=f.value,f.value=n,B.value=!0,c.value=!c.value,c.value?(i.value=s.value,s.value=""):(s.value=i.value,i.value=""),setTimeout(()=>{B.value=!1},300)}const Ke=()=>{fe.value=setInterval(()=>{P.value=!1,oe.value||k.value<ne.value&&(k.value+=1,k.value===ne.value&&(F.value&&F.value.poolAddress&&N.updateCurrentPools(F.value.poolAddress,O.value),k.value=0,P.value=!0))},1e3)};K(c,Pe((n,p)=>{c.value=n},500));const ge=u(!1);K(i,Pe((n,p)=>{n&&n!==0&&c.value&&he(n),n==""&&c.value&&(s.value="")},500)),K(s,Pe((n,p)=>{n&&n!==0&&!c.value&&he(n),n==""&&!c.value&&(i.value="")},500));const Ce=u(1e-4),Ze=n=>{if(console.log(n,"poolInfo====>"),n.current_sqrt_price&&i.value&&s.value){const d=(l.value.address===n.coinA.address&&f.value.address===n.coinB.address?0:1)==0,b=new g(i.value),$=new g(s.value),R=b.sub(b.mul(new g(n.fee)).div(100));console.log("getImpact###fAmount####",b.toString()),console.log("getImpact###tAmount####",$.toString()),console.log("getImpact###f####",R.toString());const X=$.div(R);return console.log("getImpact####rates####",X.toString()),j.value.getPriceImpactPct(n,X.toString(),d)}return 1e-4},Ye=u(0),Ge=u(0),Oo=u(),te=u({}),_o=async n=>{if(F.value&&(console.log(Number(i.value)==0,"===>Number(fromCoinAmount.value)==0"),!(c.value&&Number(i.value)==0)&&!(!c.value&&Number(s.value)==0)))if(l.value&&f.value&&(i.value||s.value)){A.value=!0,W.value=!0,V.value=!1;const p=l.value.address===F.value.coinA.address&&f.value.address===F.value.coinB.address?0:1;console.log(F.value,"poolInfo=====>451"),console.log(c.value?i.value:s.value,"fixedFromCoin.value ? fromCoinAmount.value : toCoinAmount.value"),console.log(p,"===>direct");try{let d=await j.value.preSwap({pool:F.value,a2b:p==0,byAmountIn:c.value,amount:c.value?i.value:s.value});console.log(d,"preSwapRespreSwapRes"),V.value=d==null?void 0:d.isExceed,Oo.value=d==null?void 0:d.estimatedFeeAmount,c.value?(s.value=d.estimatedAmountOut,L.value?Te.value=(n/Number(d.estimatedAmountOut)).toString():Ne.value=(Number(d.estimatedAmountOut)/n).toString()):(i.value=d.estimatedAmountIn,L.value?Te.value=(Number(d.estimatedAmountIn)/n).toString():Ne.value=(n/Number(d.estimatedAmountIn)).toString()),Ye.value=new g(s.value).div(i.value).toString(),Ge.value=new g(i.value).div(s.value).toString(),Ce.value=Ze(F.value),A.value=!1,W.value=!1}catch(d){console.log("pre swap error",d),A.value=!1,W.value=!1}}else c.value?s.value="":i.value="",A.value=!1,W.value=!1},Fo=po(),se=w(()=>Fo),Ro=u({}),Te=u(""),Ne=u(""),Y=w(()=>se.value.assets&&l.value&&se.value.assets[l.value.address]?de(se.value.assets[l.value.address].balance,l.value.decimals):0),x=w(()=>se.value.assets&&f.value&&se.value.assets[f.value.address]?de(se.value.assets[f.value.address].balance,f.value.decimals):0),Uo=mo();K(()=>m.value.tokensObj,async n=>{if(!we(n)){console.log(n,"===>newValue626"),console.log(Uo,"===>route625");const p=e?e.currentRoute.value.query.to:"",d=e?e.currentRoute.value.query.from:"";d?l.value=await j.value.getTokenBySymbol(n,d):!d&&!l.value&&(l.value=await j.value.getTokenBySymbol(n,I.chainName==="Aptos"?"0x5e156f1207d0ebfa19a9eeff00d62a282278fb8719f4fab3a586a0a2c0fffbea::coin::T":"0x5d4b302506645c37ff133b98c4b50a5ae14841659738d6d733d59d0d217a93bf::coin::COIN"),console.log(l.value,"===>fromCoin.value")),p?f.value=await j.value.getTokenBySymbol(n,p):!p&&!f.value&&(f.value=await j.value.getTokenBySymbol(n,I.chainName==="Aptos"?"0x1::aptos_coin::AptosCoin":"0x2::sui::SUI")),!d&&p&&(l.value="")}},{immediate:!0});const F=w(()=>{var n;if(l.value&&f.value){let p=null;const d={};Object.values(m.value.poolConfigList).forEach($=>{var R,X,z,J;($.coinA.address.toUpperCase()===((R=l.value.address)==null?void 0:R.toUpperCase())&&$.coinB.address.toUpperCase()===((X=f.value.address)==null?void 0:X.toUpperCase())||$.coinB.address.toUpperCase()===((z=l.value.address)==null?void 0:z.toUpperCase())&&$.coinA.address.toUpperCase()===((J=f.value.address)==null?void 0:J.toUpperCase()))&&(d[$.address]={...$})});const b=Object.values(d).sort(($,R)=>$.fee-R.fee);console.log("0507####swap###poolInfo###poolSortList###",b);for(let $=0;$<b.length;$++)if(!((n=b[$])!=null&&n.is_pause)){p=b[$];break}return console.log("0507####swap###poolInfo###info###",p),p&&!we(p)?p:null}return null}),Ve=u(!0),xe=u(!1),Do=async n=>{n&&O.value=="Aptos"&&(he(c.value?i.value:s.value),xe.value=!0,n.coinA.symbol.toLowerCase()===l.value.symbol.toLowerCase()&&n.coinB.symbol.toLowerCase()===f.value.symbol.toLowerCase()?Ve.value=!0:Ve.value=!1,V.value=!1)};K(()=>F.value,(n,p)=>{n&&(!p||n.address!==p.address||n.current_sqrt_price!==p.current_sqrt_price)&&Do(n)},{immediate:!0,deep:!0});const Lo=w(()=>m.value.tokensObj&&l.value&&l.value.address&&m.value.tokensObj[l.value.address]&&m.value.tokensObj[l.value.address].logoURI),jo=w(()=>(console.log(m.value.tokensObj,"===>pools.value.tokensObj"),m.value.tokensObj&&f.value&&f.value.address&&m.value.tokensObj[f.value.address]&&m.value.tokensObj[f.value.address].logoURI)),Eo=w(()=>m.value.tokensObj&&l.value&&l.value.address&&m.value.tokensObj[l.value.address]&&m.value.tokensObj[l.value.address].coingecko_id||null),Mo=w(()=>m.value.tokensObj&&f.value&&f.value.address&&m.value.tokensObj[f.value.address]&&m.value.tokensObj[f.value.address].coingecko_id||null),qo=w(()=>{var b,$,R;const n=new g(i.value);console.log(te.value,"===>toAddLiquidiPoolInfo"),console.log((b=te==null?void 0:te.value)==null?void 0:b.fee,"toAddLiquidiPoolInfo?.value?.fee");const p=new g(O.value=="Aptos"?($=F==null?void 0:F.value)==null?void 0:$.fee:(R=te==null?void 0:te.value)==null?void 0:R.fee),d=n.mul(p).toString();return console.log(d,"===>fee"),Number(d)<1/Math.pow(10,l.value.decimals)?`<${new g(1).div(new g(Math.pow(10,l.value.decimals))).toString()}`:le(d,l.value.decimals)}),{setIsShowSuccess:Wo,setIsShowRejected:eo,setIsShowWaiting:Be,setTransactionDesc:Xo,setTransactionTxid:oo}=I,Qo=async()=>{var p,d,b,$,R,X,z,J;q.value=!1,A.value=!0,oo(""),Xo(h("tips.swapping",{from:`${i.value} ${(p=l.value)==null?void 0:p.symbol}`,to:`${s.value} ${(d=f.value)==null?void 0:d.symbol}`})),Be(!0);let n;O.value=="Aptos"&&(n=l.value.address===F.value.token_a.address&&f.value.address===F.value.token_b.address?0:1);try{console.log("0221####swap start####",O.value,"###",j),console.log("0412###toSwap###poolInfo.value###",F.value);let Q;O.value=="Aptos"?Q=await j.value.getSwapTransactionPayload({pool:F.value,a2b:n==0,byAmountIn:c.value,amount:c.value?i.value:s.value,slippage:Number(pe.value)/100}):(console.log(te.value,"===>toAddLiquidiPoolInfo.value"),Q=await Ee.value.swapRouterContract.getSwapRouterPayload(c.value,qe.value.createTxParams)),console.log("0221####swap###swapPayload###",Q);let G;if(O.value==="Aptos")G=await se.value.currentWallet.signAndSubmitTransaction(Q);else{console.log("0221###swap###sui##signAndExecuteTransaction前###",O.value,"###swapPayload###",Q);const ue=await se.value.currentWallet.signAndExecuteTransactionBlock(Q);console.log("0221###sui swap res###",ue),G=j.value.handleTx(ue),console.log("0221###swap###sui##tx###",G)}if(G&&G.hash){oo(G.hash),Be(!1),Wo(!0);const ue={title:h("tips.swap"),desc:h("tips.swapSuccessText",{from:`${i.value} ${(b=l.value)==null?void 0:b.symbol}`,to:`${s.value} ${($=f.value)==null?void 0:$.symbol}`}),hash:G.hash,tit:"Swap",icon:"icon-icon-swap1",tokenInfo:{tokena:`${(R=l.value)==null?void 0:R.address}`,numa:`- ${i.value}`,logoa:m.value.tokensObj&&l.value&&l.value.address&&m.value.tokensObj[l.value.address]&&m.value.tokensObj[l.value.address].logoURI,tokenb:`${(X=f.value)==null?void 0:X.address}`,numb:`+ ${s.value}`,logob:m.value.tokensObj&&f.value&&f.value.address&&m.value.tokensObj[f.value.address]&&m.value.tokensObj[f.value.address].logoURI},text:`Pay ${i.value} ${(z=l.value)==null?void 0:z.symbol} to receive ${s.value} ${(J=f.value)==null?void 0:J.symbol}`};O.value!=="Aptos"&&(ue.res=G.res),j.value.showTransitionPending(ue);const io=await j.value.watchTransaction(ue);console.log("0221###swap###transitionStatus####",io),io&&setTimeout(()=>{O.value=="Aptos"&&N.updateCurrentPools(F.value.poolAddress,O.value),j.value.getAccount(se.value.address)},1e3)}else Be(!1),eo(!0);i.value="",s.value="",A.value=!1}catch(Q){i.value="",s.value="",console.log("Swap Error###",Q),A.value=!1,Be(!1),eo(!0)}},Ho=n=>{var p;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((p=m.value.tokensObj[n==null?void 0:n.address])==null?void 0:p.logo_url)||(I.theme==="default"?ie("/image/coins/unknown.png"):ie("/image/coins/sui-unknown.png"))},Le=n=>{console.log(S.value,"===>currentCoinKey.value"),console.log(n);const p=localStorage.getItem(n.address);console.log(m.value.tokensObj,"===>pools.value.tokensObj"),console.log(p,"===>coinLocak"),m.value.tokensObj&&m.value.tokensObj[n.address]&&m.value.tokensObj[n.address].isSelfBuilt&&!p?je.value=!0:(S.value==="fromCoin"?(i.value="",f.value&&n.address.toLowerCase()===(f==null?void 0:f.value.address.toLowerCase())&&(f.value=null),l.value=n):(l.value&&(s.value="",n.address.toLowerCase()===(l==null?void 0:l.value.address.toLowerCase())&&(l.value=null)),f.value=n),no())},je=u(!1),no=()=>{Ue.value={},Re.value={},je.value=!1},zo=w(()=>I.isShowRouterModal),so=u([]),ao=u(""),Jo=u(!1),to=dn(),Ee=w(()=>to),Me=u(!1),qe=u({}),We=u(""),Ko=n=>{if(n&&n.paths&&n.paths.length>0){const p=n.paths[0];if(n.coinTypeA&&n.coinTypeB&&n.coinTypeC){const d=m.value.poolConfigObj[p.poolAddress[0]],b=m.value.poolConfigObj[p.poolAddress[1]],$=de(n.paths[0].amountIn.toString(),l.value.decimals)*d.fee;let R,X=b.token_a.address==f.value.address?b.token_b.decimals:b.token_a.decimals;c.value?R=de(p.rawAmountLimit[0].toString(),X)*b.fee:R=de(p.rawAmountLimit[1].toString(),X)*b.fee;let z;console.log(b.token_a.address,f.value.address,"===>toCoin.value.address"),d.token_a.address==l.value.address?z=!1:z=!0;let J;z?J=j.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],d.token_a.decimals,d.token_b.decimals).toString():J=1/j.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],d.token_a.decimals,d.token_b.decimals).toString(),console.log(d,"===>1398 poolA"),console.log(X,"===>1398feeBDecimals"),console.log(z,"a2b1398"),console.log(J,1/J,R,"===>1398");const Q=$+R*J;We.value=Q>0&&Q<1e-6?`<0.000001 ${l.value.symbol}`:le(Q,l.value.decimals)+` ${l.value.symbol} `}else{const d=m.value.poolConfigObj[p.poolAddress[0]],b=de(n.paths[0].amountIn.toString(),l.value.decimals)*d.fee;We.value=b>0&&b<1e-6?`<0.000001 ${l.value.symbol} (${d.fee*100}%)`:le(b,l.value.decimals)+` ${l.value.symbol} (${d.fee*100}%)`}}},Zo=n=>{if(n&&n.paths&&n.paths.length>0){const p=n.paths[0];if(n.coinTypeA&&n.coinTypeB&&n.coinTypeC){const d=m.value.poolConfigObj[p.poolAddress[0]],b=j.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],d.coinA.decimals,d.coinB.decimals).toNumber(),$=j.value.TickMath.sqrtPriceX64ToPrice(n.targetSqrtPrice[0],d.coinA.decimals,d.coinB.decimals).toNumber(),R=m.value.poolConfigObj[p.poolAddress[1]],X=j.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[1],R.coinA.decimals,R.coinB.decimals).toNumber(),z=j.value.TickMath.sqrtPriceX64ToPrice(n.targetSqrtPrice[1],R.coinA.decimals,R.coinB.decimals).toNumber();console.log(i.value,s.value,"===>1343");const J=new g(i.value).div(new g(s.value)),Q=new g(s.value).div(new g(i.value));console.log(J,Q,"===>currentA2CpriceReverse");let G;G=new g(b*X).sub($*z).div(new g(b*X)).mul(new g(100)).toNumber(),G>100&&(Ce.value=100),Ce.value=Number(ee(Math.abs(G),2))}else{const d={...m.value.poolConfigObj[p.poolAddress[0]],current_sqrt_price:n.currentSqrtPrice[0]};console.log(d,"pool===>"),Ce.value=Ze(d)}}},Yo=async n=>{if(l.value&&f.value&&(Number(i.value)>0||Number(s.value)>0)){console.log("执行吧"),(!i.value&&s.value||i.value&&!s.value)&&(A.value=!0),ge.value=!0;try{let p;if(c.value){const $=new g(i.value).mul(Math.pow(10,l.value.decimals)).toString();p=new uo($)}else{const $=new g(s.value).mul(Math.pow(10,f.value.decimals)).toString();p=new uo($)}console.log(p.toString(),"====>1498");const d=Number(pe.value)/100;console.log(Ee.value,"===>swapRouterContract.value");const b=await Ee.value.swapRouterContract.getSwapRouter(l,f,p,c.value,d,"");console.log(b,"===> swapRouter1454"),b?(qe.value=b,so.value=b.paths,V.value=b.isExceed,console.log(b.isExceed,V.value,"===>swapRouter.isExceed"),ao.value=b.amountIn,Ko(b),c.value?s.value=b.amountOut:i.value=b.amountIn,Te.value=be(new g(i.value).div(new g(s.value)),l.value.decimals),Ne.value=be(new g(s.value).div(i.value).toString(),f.value.decimals),Zo(b),A.value=!1,Me.value=!1,ge.value=!1):(A.value=!1,Me.value=!0,ge.value=!1)}catch(p){console.log("pre swap error",p),A.value=!1,ge.value=!1}}else c.value?s.value="":i.value="",A.value=!1,ge.value=!1;console.log(A.value,"====>routerSwaping")},he=async n=>{O.value=="Aptos"?_o(n):(console.log("调用sui"),Yo())},Go=w(()=>to),Vo=w(()=>Go.value.isInitRouter);return K(()=>Vo.value,n=>{n||he(c.value?i.value:s.value)},{immediate:!0}),{clickExchange:Po,closeTokenWarning:no,isShowTokenWarning:je,getTokenSource:Le,hasPool:xe,getPoolInfoSuccess:Je,halfBtnSelect:No,formCoinId:Eo,toCoinId:Mo,fromCoinUrl:Lo,toCoinUrl:jo,t:h,indicator:r,wallet:se,currentLpInfo:Ro,fixD:ee,decimalFormat:Xe,impact:Ce,oneFromAmount:Te,oneToAmount:Ne,importIcon:ie,clickRefresh:Bo,refresh:P,change:B,isShowAddress:D,isShowSwapSetting:_,fromCoin:l,toCoin:f,slippage:pe,openCoinSelect:Io,onCoinSelect:$o,existingCoins:M,lastSelectCoin:Z,currentCoinKey:S,showCoinSelect:y,fromCoinAmount:i,toCoinAmount:s,maxBtnSelect:To,fixedFromCoin:c,swapBtnText:ko,toSwap:Qo,loading:oe,swaping:A,autoRefreshTime:ne,countdown:k,marketTimer:fe,rateChange:L,isSwapConfirmMpdal:q,fromCoinBlance:Y,toCoinBlance:x,poolInfo:F,chainName:O,swapRouterLoading:ge,formatFee:qo,calculating:W,currentRate:Ye,currentRateReverse:Ge,getCoinIcon:Ho,toAddLiquidiPoolInfo:te,decimalUi:be,warningToCoin:Ue,warningFromCoin:Re,isShowRouterModal:zo,toSwapLoading:Jo,insufficientLiquidity:V,routerPool:so,routerTotalAmounts:ao,store:I,suiPreSwapdata:qe,suiSwapFee:We,addCommom:ae,debounce:Pe}}}),Aa="data:image/png;base64,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";const re=e=>(ke("data-v-fb27e9cd"),e=e(),Ie(),e),ka={class:"swap-container"},Ia={class:"title"},$a={class:"left"},Ta={class:"right title-right"},Na=re(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Ba={class:"swap-card"},Pa={class:"card-container"},Oa={class:"card-item"},_a={class:"card-item"},Fa=re(()=>o("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),Ra=[Fa],Ua={key:1,class:"induction"},Da={key:0,class:"exchange-rate-btn"},La={key:0},ja=["src"],Ea={key:0},Ma=["src"],qa={key:0},Wa={key:1},Xa={key:0},Qa=["src"],Ha=["src"],za=re(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Ja=[za],Ka={class:"item"},Za={class:"induction-text"},Ya={key:0,class:"icon","aria-hidden":"true"},Ga=re(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Va=[Ga],xa={class:"item"},et={class:"induction-text"},ot={key:0,class:"induction-value"},nt={class:"item"},st={class:"induction-text"},at={key:0,class:"induction-value"},tt={key:0,class:"icon","aria-hidden":"true"},it=re(()=>o("use",{"xlink:href":"#icon-icon-swap"},null,-1)),lt=[it],rt={key:3,class:"token-info-container"},ut={class:"token-info-title"},dt=re(()=>o("span",{class:"coingecko"},"Ref. CoinGecko",-1)),ct=re(()=>o("img",{src:Aa,alt:""},null,-1)),mt=re(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1));function vt(e,r,h,C,I,N){var W,i;const m=xo,B=on,P=Hn,D=ho,_=bo,L=Ao,q=rn,S=nn,M=un,Z=Bs,y=ln,c=xs,oe=en,A=wa;return a(),v("div",ka,[o("div",Ia,[o("div",$a,t(e.$t("menu.swap")),1),o("div",Ta,[o("div",{class:"slippage-icon",onClick:r[0]||(r[0]=s=>e.isShowSwapSetting=!0)},[Na,o("span",null,t(e.slippage)+"%",1)]),ce(m,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),o("div",Ba,[o("div",Pa,[o("div",Oa,[ce(B,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":r[1]||(r[1]=s=>e.fromCoinAmount=s),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From",onOnMax:r[2]||(r[2]=s=>e.maxBtnSelect("fromCoin")),onOnHalf:r[3]||(r[3]=s=>e.halfBtnSelect("fromCoin")),onOnInput:r[4]||(r[4]=s=>{e.fromCoinAmount=s,e.fixedFromCoin=!0}),onOnSelect:r[5]||(r[5]=s=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("div",_a,[ce(B,{modelValue:e.toCoinAmount,"onUpdate:modelValue":r[6]||(r[6]=s=>e.toCoinAmount=s),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",onOnInput:r[7]||(r[7]=s=>{e.toCoinAmount=s,e.fixedFromCoin=!1}),onOnSelect:r[8]||(r[8]=s=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("img",{class:me(e.change?"gang animationex":"gang"),src:cn,alt:""},null,2),o("div",{class:"exchange",onClick:r[9]||(r[9]=(...s)=>e.clickExchange&&e.clickExchange(...s))},[(a(),v("svg",{class:me(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Ra,2))])]),e.chainName=="Sui"?(a(),U(P,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.impact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFee,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(a(),v("div",Ua,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(a(),v("div",Da,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(a(),v("span",Wa,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(a(),v("span",Xa,[o("img",{src:e.toCoinUrl||e.getCoinIcon(e.toCoin)},null,8,Qa),H(" 1 "+t(e.toCoin.symbol)+" ≈ ",1),o("img",{src:e.fromCoinUrl||e.getCoinIcon(e.fromCoin)},null,8,Ha),o("span",null,t(("addCommom"in e?e.addCommom:E(ae))(("decimalUi"in e?e.decimalUi:E(be))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),H("  "+t(e.fromCoin.symbol),1)])):(a(),U(D,{key:1,indicator:e.indicator},null,8,["indicator"]))])):T("",!0):(a(),v("span",La,[o("img",{src:e.fromCoinUrl||e.getCoinIcon(e.fromCoin)},null,8,ja),H(" 1 "+t(e.fromCoin.symbol)+" ≈ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(a(),v("span",Ea,[o("img",{src:e.toCoinUrl||e.getCoinIcon(e.toCoin)},null,8,Ma),e.calculating?T("",!0):(a(),v("span",qa,t(("addCommom"in e?e.addCommom:E(ae))(("decimalUi"in e?e.decimalUi:E(be))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(a(),U(D,{key:1,indicator:e.indicator},null,8,["indicator"])):T("",!0),H("  "+t(e.toCoin.symbol),1)])):(a(),U(D,{key:1,indicator:e.indicator},null,8,["indicator"]))])),(a(),v("svg",{class:"icon-change","aria-hidden":"true",onClick:r[10]||(r[10]=s=>e.rateChange=!e.rateChange)},Ja))])):T("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(a(),v(Qe,{key:1},[o("div",Ka,[o("div",Za,t(e.$t("common.priceImpact")),1),e.swaping?(a(),U(_,{key:1,paragraph:!1,active:""})):(a(),v("div",{key:0,class:me(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>1?"impact-w":"impact-e"])},[H(t(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(a(),v("svg",Ya,Va)):T("",!0)],2))]),o("div",xa,[o("div",et,t(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(a(),U(_,{key:1,paragraph:!1,active:""})):(a(),v("div",ot,t(e.fixedFromCoin?("addCommom"in e?e.addCommom:E(ae))(("fixD"in e?e.fixD:E(ee))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:E(ae))(("fixD"in e?e.fixD:E(ee))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+t(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",nt,[o("div",st,t(e.$t("common.fee")),1),e.swaping?(a(),U(_,{key:1,paragraph:!1,active:""})):(a(),v("div",at,t(("addCommom"in e?e.addCommom:E(ae))(e.formatFee,e.fromCoin.decimals))+" "+t(e.fromCoin.symbol)+" ("+t(e.chainName=="Aptos"?e.poolInfo.fee*100:((W=e.toAddLiquidiPoolInfo)==null?void 0:W.fee)*100)+"%) ",1))])],64)):T("",!0)])):T("",!0)]),ce(L,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((i=e.poolInfo)==null?void 0:i.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.chainName=="Aptos"?e.swaping:!1,onClick:r[11]||(r[11]=s=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:ve(()=>[e.wallet.connected?(a(),v("svg",tt,lt)):T("",!0),o("span",null,t(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),ce(q),e.showCoinSelect?(a(),U(S,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:r[12]||(r[12]=s=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):T("",!0),e.isShowSwapSetting?(a(),U(M,{key:1,onOnClose:r[13]||(r[13]=s=>e.isShowSwapSetting=!1)})):T("",!0),e.isSwapConfirmMpdal?(a(),U(Z,{key:2,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,impact:e.impact,fee:e.chainName=="Aptos"?e.poolInfo.fee:e.suiSwapFee,"format-fee":e.chainName=="Aptos"?e.formatFee:e.suiSwapFee,onOnClose:r[14]||(r[14]=s=>e.isSwapConfirmMpdal=!1),onToSwap:e.toSwap},null,8,["fixed-from-coin","from-coin","to-coin","from-coin-amount","to-coin-amount","impact","fee","format-fee","onToSwap"])):T("",!0),e.chainName&&(e.formCoinId||e.toCoinId)?(a(),v("div",rt,[o("div",ut,[dt,ct,ce(y,{placement:"top","arrow-point-at-center":""},{title:ve(()=>[H(" The following price is only an external reference from CoinGecko, which may not reflect actual data on Cetus. ")]),default:ve(()=>[mt]),_:1})]),e.fromCoin&&e.formCoinId?(a(),U(c,{key:0,id:e.formCoinId,coin:e.fromCoin,refresh:e.refresh},null,8,["id","coin","refresh"])):T("",!0),e.toCoin&&e.toCoinId?(a(),U(c,{key:1,id:e.toCoinId,coin:e.toCoin,refresh:e.refresh},null,8,["id","coin","refresh"])):T("",!0)])):T("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(a(),U(oe,{key:4,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):T("",!0),e.isShowRouterModal?(a(),U(A,{key:5,"router-pool":e.routerPool,"routertotal-percents":e.routertotalPercents,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"router-total-amounts":e.routerTotalAmounts,onOnClose:r[15]||(r[15]=s=>e.store.setIsShowRouterModal(!1))},null,8,["router-pool","routertotal-percents","from-coin","to-coin","from-coin-amount","to-coin-amount","router-total-amounts"])):T("",!0)])}const Ot=Ae(Sa,[["render",vt],["__scopeId","data-v-fb27e9cd"]]);export{Ot as default};
