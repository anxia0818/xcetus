import{m as io,e as lo,s as O,a as V,u as ro,d as no,o as vo,c as x}from"./pool.9ff9a659.js";import{a as M,l as _,r as H,e as E,o as n,f as t,h as s,v as p,u as y,c as P,w as L,B as ao,j as U,p as G,k as K,z as to,i as w,s as co,t as X,x as D,b as mo,A as eo,F as N,E as Q,P as Bo,N as yo,M as bo,S as No,J as Io,q as Mo,H as Eo,Q as qo}from"./entry.fbc043e1.js";import{a as Y,u as uo}from"./sha256.f24df60a.js";import{u as oo}from"./farms.485113b9.js";import{i as po}from"./import-icon.de3e6c66.js";/* empty css              *//* empty css              *//* empty css              */import{_ as ko}from"./img-connect-wallet_2x.48f55cbf.js";import{_ as wo}from"./img-no-Positions_2x.93bb1053.js";import{_ as Wo}from"./upgrade-loading.b40bd4e2.js";import"./decimal.0bdeb344.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const Vo=M({setup(){const o=Y(),i=_(()=>o),f=oo(),u=_(()=>f),h=_(()=>u.value.totalRwadrdUsd),e=_(()=>u.value.farmsPositionList),a=_(()=>u.value.farmsAllPositionLoading),d=uo(),v=io("Sui"),g=lo("Sui"),{setIsShowSuccess:b,setIsShowRejected:$,setIsShowWaiting:l,setTransactionDesc:r,setTransactionTxid:m}=d,W=H(!1);return{wallet:i,farms:u,totalRwadrdUsd:h,sFixD:O,claimAllPoolReward:async z=>{W.value=!0,console.log(e.value,"farmsRewardObj###");const J=[];e.value.forEach(j=>{console.log(z,j,"#position"),j.positionSource=="farming"&&J.push({pool_id:j.pool_id,position_nft_id:j.id})}),console.log(JSON.stringify(J),"##params"),m(""),r("Claim All"),l(!0);try{const j=await v.batchHarvest(J),A=await i.value.currentWallet.signAndExecuteTransactionBlock(j);console.log("0221###sui swap res###",A);let T=g.handleTx(A);if(T&&T.hash){m(T.hash),l(!1),b(!0);let R={res:T.res,title:"Stake",hash:T.hash};g.showTransitionPending(R),await g.watchTransaction(R)&&setTimeout(()=>{f.getFarmsPoolList()},4e3)}else l(!1),$(!0);W.value=!1}catch(j){console.log("Claim all error",j),l(!1),$(!0),W.value=!1}},loading:W,addCommom:V,farmsAllPositionLoading:a}}});const go=o=>(G("data-v-fb506cbe"),o=o(),K(),o),Ho={class:"farms-banner"},Jo={class:"farms-banner-center"},zo=go(()=>s("div",{class:"title"},"Farms",-1)),Qo=go(()=>s("div",{class:"desc"},"Stake Liquidity position to earn more rewards.",-1)),Go={class:"claim-rewards"},Ko={class:"claim-title"},Xo=go(()=>s("span",null,"Claimed Rewards",-1)),Yo={key:0},Zo={key:1},xo={class:"claim-content"};function os(o,i,f,u,h,e){const a=ao;return n(),t("div",Ho,[s("div",Jo,[zo,Qo,s("div",Go,[s("div",Ko,[Xo,o.wallet.address?(n(),t("span",Yo,"$"+p(("addCommom"in o?o.addCommom:y(V))(("sFixD"in o?o.sFixD:y(O))(o.totalRwadrdUsd||0,2))),1)):(n(),t("span",Zo,"--"))]),s("div",xo,[o.wallet.address?(n(),P(a,{key:0,class:"claim-btn",loading:o.loading,disabled:Number(o.totalRwadrdUsd)==0||o.farmsAllPositionLoading,onClick:o.claimAllPoolReward},{default:L(()=>[U("Claim All")]),_:1},8,["loading","disabled","onClick"])):(n(),P(a,{key:1,class:"claim-btn",onClick:i[0]||(i[0]=d=>o.wallet.setIsShowWalletModal(!0))},{default:L(()=>[U("Connect")]),_:1}))])])])])}const So=E(Vo,[["render",os],["__scopeId","data-v-fb506cbe"]]),ss=M({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=H(!0);return{sFixD:O,direct:o}}}),Po=""+globalThis.__publicAssetsURL("sui-image/range.png");const _o=o=>(G("data-v-99c4cf44"),o=o(),K(),o),ns={class:"range"},ts={key:0},es=_o(()=>s("img",{src:Po,alt:""},null,-1)),as={class:"per"},is={key:1},ls=_o(()=>s("img",{src:Po,alt:""},null,-1)),rs={class:"per"},ds=_o(()=>s("div",null,[s("svg",{class:"icon icon-up","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),cs=_o(()=>s("div",null,[s("svg",{class:"icon icon-down","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),us=[ds,cs];function ms(o,i,f,u,h,e){var a,d,v,g;return n(),t("div",ns,[o.direct?(n(),t("p",ts,[s("span",null,p(("sFixD"in o?o.sFixD:y(O))(o.poolInfo.minPrice,6)),1),es,s("span",null,p(("sFixD"in o?o.sFixD:y(O))(o.poolInfo.maxPrice,6)),1),s("span",as,p((a=o.poolInfo.coinB)==null?void 0:a.symbol)+" per "+p((d=o.poolInfo.coinA)==null?void 0:d.symbol),1)])):(n(),t("p",is,[s("span",null,p(o.poolInfo.maxPrice!=="∞"?("sFixD"in o?o.sFixD:y(O))(1/o.poolInfo.maxPrice,6):"0"),1),ls,s("span",null,p(o.poolInfo.minPrice!=="0"?("sFixD"in o?o.sFixD:y(O))(1/o.poolInfo.minPrice,6):"∞"),1),s("span",rs,p((v=o.poolInfo.coinA)==null?void 0:v.symbol)+" per "+p((g=o.poolInfo.coinB)==null?void 0:g.symbol),1)])),s("div",{class:"icon-change",onClick:i[0]||(i[0]=to(b=>o.direct=!o.direct,["stop"]))},us)])}const $o=E(ss,[["render",ms],["__scopeId","data-v-99c4cf44"]]),ps=M({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=H(!0);return{sFixD:O,direct:o}}});const _s=o=>(G("data-v-14f67ada"),o=o(),K(),o),fs={class:"valid-range"},hs=_s(()=>s("div",{class:"title"},"Valid Range",-1));function vs(o,i,f,u,h,e){const a=$o;return n(),t("div",fs,[hs,w(a,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const gs=E(ps,[["render",vs],["__scopeId","data-v-14f67ada"]]),$s=M({props:{poolInfo:{type:Object,default:()=>({})}},setup(){return{}}});const ys={class:"pool"},bs={class:"pool-info"},Is={class:"token-logo"},ks={alt:""},ws={alt:""},Ss={class:"token-symbol"},Ps={class:"symbol"},Ts={class:"fee-rate"};function Cs(o,i,f,u,h,e){var v,g,b,$;const a=gs,d=co("image");return n(),t("div",ys,[s("div",bs,[s("div",Is,[X(s("img",ks,null,512),[[d,(v=o.poolInfo.coinA)==null?void 0:v.logo_url]]),X(s("img",ws,null,512),[[d,(g=o.poolInfo.coinB)==null?void 0:g.logo_url]])]),s("div",Ss,[s("div",Ps,p((b=o.poolInfo.coinA)==null?void 0:b.symbol)+" - "+p(($=o.poolInfo.coinB)==null?void 0:$.symbol),1),s("div",Ts,p(o.poolInfo.fee),1)])]),w(a,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const To=E($s,[["render",Cs],["__scopeId","data-v-c027f63c"]]),Ls=M({props:{currentTab:{type:String,default:""},rewardInfo:{type:Object,default:()=>({})}},setup(){const o=ro(),i=_(()=>o);return{sFixD:O,addCommom:V,getCoinIcon:u=>{var h;return((h=i.value.tokensObj[u])==null?void 0:h.logo_url)||po("/image/coins/sui-unknown.png")}}}});const Us={key:0,class:"rewards-day"},js={class:"rewards-day-box"},As={alt:""};function Rs(o,i,f,u,h,e){const a=co("image");return o.rewardInfo.allocate_point>0||o.currentTab=="Ended"?(n(),t("div",Us,[s("div",null,[s("div",js,[X(s("img",As,null,512),[[a,o.getCoinIcon(o.rewardInfo.reward_coin)]]),s("span",null,p(("addCommom"in o?o.addCommom:y(V))(("sFixD"in o?o.sFixD:y(O))(o.rewardInfo.emission_per_day,4))),1)])])])):D("",!0)}const Co=E(Ls,[["render",Rs],["__scopeId","data-v-416b96fb"]]),Os=M({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){console.log(o.positionInfo,"props.positionInfo");const i=ro(),f=_(()=>i);return{addCommom:V,decimalUi:no,fixD:vo,getCoinIcon:h=>{var e;return((e=f.value.tokensObj[h])==null?void 0:e.logo_url)||po("/image/coins/sui-unknown.png")}}}});const Fs={class:"hover-rewarder"},Ds={class:"rewarder-info"},Bs={class:"left-rewarder"},Ns={alt:""},Ms={class:"right-rewarder"},Es={class:"amount"},qs={key:0,class:"amount-usd"},Ws={key:1,class:"amount-usd"},Vs={class:"rewarder-info"},Hs={class:"left-rewarder"},Js={alt:""},zs={class:"right-rewarder"},Qs={class:"amount"},Gs={key:0,class:"amount-usd"},Ks={key:1,class:"amount-usd"};function Xs(o,i,f,u,h,e){const a=co("image");return n(),t("div",Fs,[s("div",Ds,[s("div",Bs,[X(s("img",Ns,null,512),[[a,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinB.address:o.positionInfo.coinA.address)]]),s("span",null,p(o.positionInfo.needReverse?o.positionInfo.coinB.symbol:o.positionInfo.coinA.symbol),1)]),s("div",Ms,[s("div",Es,p(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:y(V))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountB,o.positionInfo.coinB.decimals)):("addCommom"in o?o.addCommom:y(V))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountA,o.positionInfo.coinA.decimals))),1),o.positionInfo.needReverse?(n(),t("div",Ws,p(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("fixD"in o?o.fixD:y(vo))(o.positionInfo.amountBUsd,2):"<$0.01"),1)):(n(),t("div",qs,p(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("fixD"in o?o.fixD:y(vo))(o.positionInfo.amountAUsd,2):"<$0.01"),1))])]),s("div",Vs,[s("div",Hs,[X(s("img",Js,null,512),[[a,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinA.address:o.positionInfo.coinB.address)]]),s("span",null,p(o.positionInfo.needReverse?o.positionInfo.coinA.symbol:o.positionInfo.coinB.symbol),1)]),s("div",zs,[s("div",Qs,p(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:y(V))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountA,o.positionInfo.coinA.decimals)):("addCommom"in o?o.addCommom:y(V))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountB,o.positionInfo.coinB.decimals))),1),o.positionInfo.needReverse?(n(),t("div",Ks,p(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("addCommom"in o?o.addCommom:y(V))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountAUsd,2)):"<$0.01"),1)):(n(),t("div",Gs,p(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("addCommom"in o?o.addCommom:y(V))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountBUsd,2)):"<$0.01"),1))])])])}const Lo=E(Os,[["render",Xs],["__scopeId","data-v-d01301e5"]]),Ys=M({components:{FarmsPositionAmountTips:Lo},props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const i=Y(),f=_(()=>i);console.log(o.positionInfo,"positionInfo#");const u=oo(),h=_(()=>u),e=lo("Sui"),a=io("Sui"),d=H(!1),v=uo();_(()=>v);const g=mo(),{setIsShowSuccess:b,setIsShowRejected:$,setIsShowWaiting:l,setTransactionDesc:r,setTransactionTxid:m}=v,W=async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,m(""),r(`Stake ${o.positionInfo.name}`),l(!0);const I={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},c=o.positionInfo.farmsPoolId;try{const S=await a.farmsDeposit(I,c),k=await f.value.currentWallet.signAndExecuteTransactionBlock(S);console.log("0221###sui swap res###",k);let C=e.handleTx(k);if(C&&C.hash){m(C.hash),l(!1),b(!0);let F={res:C.res,title:"Staked",hash:C.hash};e.showTransitionPending(F),await e.watchTransaction(F)&&setTimeout(()=>{u.getPositionByPool(f.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else l(!1),$(!0)}catch(S){console.log("farmsDeposit error",S),l(!1),$(!0),d.value=!1}},B=async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,m(""),r(`Unstake ${o.positionInfo.name}`),l(!0);const I=o.positionInfo.farmsPoolId,c=o.positionInfo.id;try{const S=await a.farmsWithdraw(I,c),k=await f.value.currentWallet.signAndExecuteTransactionBlock(S);console.log("0221###sui swap res###",k);let C=e.handleTx(k);if(console.log(C,"unStaketx##"),C&&C.hash){m(C.hash),l(!1),b(!0);let F={res:C.res,title:"Unstaked",hash:C.hash};e.showTransitionPending(F),await e.watchTransaction(F)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),u.getPositionByPool(f.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else l(!1),$(!0)}catch(S){console.log("farmsDeposit error",S),l(!1),$(!0),d.value=!1}},z=async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,m(""),r("Claim rewards"),l(!0);const I={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const c=await a.harvestFarms(I),S=await f.value.currentWallet.signAndExecuteTransactionBlock(c);console.log("0221###sui swap res###",S);let k=e.handleTx(S);if(k&&k.hash){m(k.hash),l(!1),b(!0);let C={title:"Claim",res:k.res,hash:k.hash};e.showTransitionPending(C),await e.watchTransaction(C)&&setTimeout(()=>{u.getPositionByPool(f.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else l(!1),$(!0);d.value=!1}catch(c){console.log("farmsDeposit error",c),l(!1),$(!0),d.value=!1}},J=_(()=>h.value.farmsRewardObj),j=ro(),A=_(()=>j);return{sFixD:O,stake:W,loading:d,unStake:B,router:g,claim:z,farmsRewardObj:J,getCoinIcon:I=>{var c;return((c=A.value.tokensObj[I])==null?void 0:c.logo_url)||po("/image/coins/sui-unknown.png")},toPositionDetails:I=>{console.log("toPositionDetails:",I),I.positionSource=="clmm"?g.push(`/new-position-detail?collect=${I.collectionName}&&token=${I.tokenName}&&address=${I.pool}&pos=${I.pos_object_id}`):g.push(`/new-position-detail?position_nft_id=${I.id}&positionSource=farming`)}}}}),Uo=""+globalThis.__publicAssetsURL("sui-image/position-active.png");const fo=o=>(G("data-v-3f3574f7"),o=o(),K(),o),Zs={class:"farms-position-item"},xs=fo(()=>s("thead",null,[s("tr",null,[s("th"),s("th",null,"Liquidity"),s("th",null,"Share"),s("th",null,"Earnings"),s("th")])],-1)),on={class:"position-info"},sn={key:0,class:"status-bg"},nn=fo(()=>s("img",{src:Uo,alt:""},null,-1)),tn=[nn],en={class:"status-text"},an={class:"name-range"},ln=fo(()=>s("span",null,"Details",-1)),rn=fo(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),dn=[ln,rn],cn={class:"liquidity"},un={class:"apr"},mn={alt:""},pn={key:1,class:"rewards-day"},_n={class:"action-btn"};function fn(o,i,f,u,h,e){const a=$o,d=Lo,v=ao,g=Bo,b=co("image");return n(),t("div",Zs,[s("table",null,[xs,s("tbody",null,[s("tr",null,[s("td",null,[s("div",on,[s("div",{class:eo(["position-status",o.positionInfo.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionInfo.positionStatus=="Active"?(n(),t("div",sn,tn)):D("",!0),s("div",en,p(o.positionInfo.positionStatus),1)],2),s("div",an,[s("span",null,p(o.positionInfo.name),1),w(a,{"pool-info":o.positionInfo},null,8,["pool-info"])]),s("div",{class:"details",onClick:i[0]||(i[0]=$=>o.toPositionDetails(o.positionInfo))},dn)])]),s("td",null,[s("div",cn,[w(d,{"position-info":o.positionInfo},null,8,["position-info"]),s("span",null,p(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("sFixD"in o?o.sFixD:y(O))(o.positionInfo.positionUSD,2)}`),1)])]),s("td",null,[s("div",un,p(("sFixD"in o?o.sFixD:y(O))(o.positionInfo.positionShare||0,2))+"%",1)]),s("td",null,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),t(N,{key:0},Q(o.positionInfo.rewards,$=>(n(),t("div",{key:$.rewarder_type,class:"rewards-day"},[s("div",null,[X(s("img",mn,null,512),[[b,o.getCoinIcon($.rewarder_type)]]),s("span",null,p($.rewarderAmount),1)])]))),128)):(n(),t("div",pn,"--"))]),s("td",null,[s("div",_n,[o.positionInfo.positionSource=="clmm"?(n(),t(N,{key:0},[o.positionInfo&&o.positionInfo.positionStatus!=="Active"?(n(),P(g,{key:0},{title:L(()=>[U("Farming rewards are only available for active positions.")]),default:L(()=>[w(v,{class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:L(()=>[U("Stake")]),_:1},8,["loading","disabled","onClick"])]),_:1})):(n(),P(v,{key:1,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:L(()=>[U("Stake")]),_:1},8,["loading","disabled","onClick"]))],64)):(n(),P(v,{key:1,class:"unstake-btn",onClick:o.unStake},{default:L(()=>[U("Unstake")]),_:1},8,["onClick"])),o.positionInfo.positionSource=="clmm"?(n(),P(v,{key:2,class:"claim-btn",disabled:!0},{default:L(()=>[U("↑ Claim")]),_:1})):(n(),P(v,{key:3,class:"claim-btn",disabled:o.positionInfo.amountA<=0&&o.positionInfo.amountB<=0&&o.positionInfo.positionRewardAmount>0,onClick:o.claim},{default:L(()=>[U("↑ Claim")]),_:1},8,["disabled","onClick"]))])])])])])])}const jo=E(Ys,[["render",fn],["__scopeId","data-v-3f3574f7"]]),hn=M({props:{noDataImg:{type:String,default:""},desc:{type:String,default:""},type:{type:String,default:""},addLiquidityUrl:{type:String,default:""}},setup(){return{walletStore:Y()}}});const vn={class:"no-data"},gn=["src"],$n={key:0,class:"desc"};function yn(o,i,f,u,h,e){const a=ao;return n(),t("div",vn,[s("img",{src:o.noDataImg,alt:""},null,8,gn),o.desc?(n(),t("div",$n,p(o.desc),1)):D("",!0),o.type=="addLiquidity"?(n(),P(a,{key:1,class:"add-liquidity-btn",onClick:i[0]||(i[0]=d=>o.addLiquidityUrl?o.$router.push(o.addLiquidityUrl):"")},{default:L(()=>[U("Add Liquidity")]),_:1})):D("",!0),o.type=="connectWallet"?(n(),P(a,{key:2,class:"add-liquidity-btn",onClick:i[1]||(i[1]=d=>o.walletStore.setIsShowWalletModal(!0))},{default:L(()=>[U("Connect Wallet")]),_:1})):D("",!0)])}const Ao=E(hn,[["render",yn],["__scopeId","data-v-130f9462"]]),bn=M({components:{FarmsPositionItem:jo},props:{currentTab:{type:String,default:""}},setup(o){const i=H({}),f=Y(),u=_(()=>f),h=oo(),e=_(()=>h),a=_(()=>(console.log(e.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?u.value.address?e.value.myFarmsPoolList:[]:o.currentTab=="Ended"?e.value.farmsPoolList.filter(c=>c.status=="Ended"):e.value.farmsPoolList.filter(c=>c.status=="Live"))),d=c=>{i.value[c.clmm_pool_id]?i.value[c.clmm_pool_id]=!1:(i.value[c.clmm_pool_id]=!0,console.log("执行了吗"),h.getPositionByPool(u.value.address,c.clmm_pool_id,c.id))},v=_(()=>e.value.farmsPositionObj),g=_(()=>(console.log(e.value.farmsLoadingObj,"##farms.value.farmsLoadingObj"),e.value.farmsLoadingObj)),b=_(()=>e.value.farmsUserUsd),$=_(()=>(console.log(e.value.farmsRewardObj,"##farmsRewardObj"),e.value.farmsRewardObj)),l=_(()=>e.value.farmsPositionList),r=_(()=>e.value.farmsAllPositionLoading),m=mo(),W=uo(),B=io("Sui"),z=lo("Sui"),{setIsShowSuccess:J,setIsShowRejected:j,setIsShowWaiting:A,setTransactionDesc:T,setTransactionTxid:R}=W;return{wallet:u,walletStore:f,farmsPoolList:a,openMore:d,openMoreObj:i,checkNullObj:x,router:m,farmsPositionObj:v,farmsLoadingObj:g,farmsUserUsd:b,sFixD:O,farmsRewardObj:$,claimPoolReward:async c=>{console.log(l.value,"farmsRewardObj###");const S=[];l.value.forEach(k=>{console.log(c,k,"#position"),c==k.clmm_pool_id&&S.push({pool_id:k.pool_id,position_nft_id:k.id})}),console.log(JSON.stringify(S),"##params"),R(""),T("Claim rewards"),A(!0);try{const k=await B.batchHarvest(S),C=await u.value.currentWallet.signAndExecuteTransactionBlock(k);console.log("0221###sui swap res###",C);let F=z.handleTx(C);if(F&&F.hash){R(F.hash),A(!1),J(!0);let so={res:F.res,title:"Claim",hash:F.hash};z.showTransitionPending(so),await z.watchTransaction(so)&&setTimeout(()=>{h.getFarmsPoolList()},4e3)}else A(!1),j(!0)}catch(k){console.log("Claim all error",k),A(!1),j(!0)}},farmsAllPositionLoading:r,addCommom:V}}});const q=o=>(G("data-v-4a9eff46"),o=o(),K(),o),In={class:"farms-table"},kn=q(()=>s("th",null,"Staked TVL",-1)),wn=q(()=>s("th",null,"APR",-1)),Sn=q(()=>s("th",null,"Rewards / day",-1)),Pn=q(()=>s("th",null,"My Staked",-1)),Tn=q(()=>s("th",null,"Earned",-1)),Cn=q(()=>s("th",null,"Actions",-1)),Ln={key:0},Un=["onClick"],jn=q(()=>s("td",null,[s("div",{class:"staked-tvl"},"$19,885,003.12")],-1)),An=q(()=>s("td",null,[s("div",{class:"apr"},[s("span",null,"22.20%")])],-1)),Rn={key:0,class:"my-staked"},On={key:0,class:"my-staked-loading"},Fn={class:"position-usd"},Dn={key:0,class:"position-num"},Bn={key:1,class:"my-staked"},Nn=q(()=>s("div",{class:"position-usd"},"--",-1)),Mn=[Nn],En={class:"earned"},qn={key:0,class:"my-staked-loading"},Wn=q(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),Vn={key:0},Hn={key:1},Jn={key:2},zn={key:2},Qn={class:"actions"},Gn={class:"actions-btn"},Kn=["onClick"],Xn=q(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Yn=[Xn],Zn={colspan:"7",style:{padding:"0 16px 16px"}},xn={key:0,class:"farm-position-list"},ot={key:0,class:"farm-position-loading"},st={key:1,class:"farm-position-list"},nt=q(()=>s("tr",{style:{height:"8px"}},null,-1)),tt={key:1},et={colspan:"7"},at={key:0,class:"no-data"},it=q(()=>s("img",{src:ko,alt:""},null,-1)),lt={key:1,class:"no-data"},rt=q(()=>s("img",{src:wo,alt:""},null,-1)),dt=q(()=>s("span",null,"No farms found",-1)),ct=[rt,dt];function ut(o,i,f,u,h,e){const a=To,d=Co,v=bo,g=ao,b=No,$=jo,l=Ao;return n(),t("div",In,[s("table",null,[s("thead",null,[s("tr",null,[s("th",null,p(o.currentTab=="Ended"?"Finished":"Pools"),1),kn,wn,Sn,Pn,Tn,Cn])]),o.farmsPoolList.length>0?(n(),t("tbody",Ln,[(n(!0),t(N,null,Q(o.farmsPoolList,r=>(n(),t(N,{key:r.id},[s("tr",{onClick:m=>o.openMore(r)},[s("td",null,[w(a,{"pool-info":r},null,8,["pool-info"])]),jn,An,s("td",null,[(n(!0),t(N,null,Q(r.rewarders,m=>(n(),P(d,{key:m.reward_coin,"reward-info":m,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))]),s("td",null,[o.wallet.address?(n(),t("div",Rn,[o.farmsLoadingObj[r.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",On,[w(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),t(N,{key:1},[s("div",Fn," $"+p(("sFixD"in o?o.sFixD:y(O))(o.farmsUserUsd&&o.farmsUserUsd[r.clmm_pool_id]&&o.farmsUserUsd[r.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[r.clmm_pool_id]&&o.farmsUserUsd[r.clmm_pool_id].positionNum?(n(),t("div",Dn,p(o.farmsUserUsd[r.clmm_pool_id].positionNum)+" "+p(o.farmsUserUsd[r.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):D("",!0)],64))])):(n(),t("div",Bn,Mn))]),s("td",null,[s("div",En,[o.farmsLoadingObj[r.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",qn,[w(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[r.clmm_pool_id]&&o.farmsRewardObj[r.clmm_pool_id].amountUsd?(n(),t(N,{key:1},[Wn,o.farmsRewardObj[r.clmm_pool_id].amountUsd>.01?(n(),t("span",Vn,"$"+p(("addCommom"in o?o.addCommom:y(V))(("sFixD"in o?o.sFixD:y(O))(o.farmsRewardObj[r.clmm_pool_id].amountUsd||0,2))),1)):o.farmsRewardObj[r.clmm_pool_id].amountUsd>0&&o.farmsRewardObj[r.clmm_pool_id].amountUsd<.01?(n(),t("span",Hn,"$<0.01")):(n(),t("span",Jn,"0"))],64)):(n(),t("span",zn,"--"))])]),s("td",null,[s("div",Qn,[s("div",Gn,[w(g,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsUserUsd[r.clmm_pool_id]||o.farmsUserUsd[r.clmm_pool_id].amount<=0,onClick:to(m=>o.claimPoolReward(r.clmm_pool_id),["stop"])},{default:L(()=>[U("Claim")]),_:2},1032,["disabled","onClick"]),w(g,{class:"add-liquidity-btn",onClick:to(m=>o.router.push(`/liquidity/deposit?poolAddress=${r.clmm_pool_id}`),["stop"])},{default:L(()=>[U("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more",onClick:to(m=>o.openMore(r),["stop"])},[(n(),t("svg",{class:eo(["arrow-icon",o.openMoreObj[r.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},Yn,2))],8,Kn)])])],8,Un),X(s("tr",null,[s("td",Zn,[o.wallet.address?(n(),t("div",xn,[!("checkNullObj"in o?o.checkNullObj:y(x))(o.farmsLoadingObj)&&o.farmsLoadingObj[r.clmm_pool_id]?(n(),t("div",ot,[w(b)])):o.farmsPositionObj[r.clmm_pool_id]&&o.farmsPositionObj[r.clmm_pool_id].length>0?(n(!0),t(N,{key:1},Q(o.farmsPositionObj[r.clmm_pool_id],m=>(n(),P($,{key:m.clmm_pool_id,"current-tab":o.currentTab,"position-info":{...m,clmm_pool_id:r.clmm_pool_id}},null,8,["current-tab","position-info"]))),128)):(n(),P(l,{key:2,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${r.clmm_pool_id}`},null,8,["add-liquidity-url"]))])):(n(),t("div",st,[w(l,{"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"})]))])],512),[[yo,!("checkNullObj"in o?o.checkNullObj:y(x))(o.openMoreObj)&&o.openMoreObj[r==null?void 0:r.clmm_pool_id]]]),nt],64))),128))])):(n(),t("tbody",tt,[s("tr",null,[s("td",et,[!o.wallet.connected&&o.currentTab=="My Farms"?(n(),t("div",at,[it,w(g,{class:"connect-wallet",onClick:i[0]||(i[0]=r=>o.wallet.setIsShowWalletModal(!0))},{default:L(()=>[U(p(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(n(),t("div",lt,ct)):D("",!0)])])]))])])}const Ro=E(bn,[["render",ut],["__scopeId","data-v-4a9eff46"]]),mt=M({setup(){const o=H(!1),i=Y(),f=_(()=>i),u=oo(),h=_(()=>u),e=_(()=>h.value.farmsPoolList);return{isShowMore:o,wallet:f,walletStore:i,farmsPoolList:e}}});const pt=o=>(G("data-v-c65dcb9d"),o=o(),K(),o),_t={class:"farms-table"},ft=pt(()=>s("thead",null,[s("tr",null,[s("th",null,"Pool"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")])],-1)),ht={class:"pool"},vt={class:"staked-tvl"},gt={class:"apr"},$t={class:"rewards-day"},yt={class:"my-staked"},bt={class:"earned"},It={class:"actions"};function kt(o,i,f,u,h,e){const a=bo;return n(),t("div",_t,[s("table",null,[ft,s("tbody",null,[(n(),t(N,null,Q(4,(d,v)=>s("tr",{key:v},[s("td",null,[s("div",ht,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",vt,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",gt,[s("span",null,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),s("td",null,[s("div",$t,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",yt,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",bt,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",It,[w(a,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])])),64))])])])}const wt=E(mt,[["render",kt],["__scopeId","data-v-c65dcb9d"]]),St=M({props:{positionStatus:{type:String,default:"Active"},positionInfo:{type:Object,default:()=>({})}},setup(){return{}}});const Pt=o=>(G("data-v-882c76c0"),o=o(),K(),o),Tt={class:"position-info"},Ct={key:0,class:"status-bg"},Lt=Pt(()=>s("img",{src:Uo,alt:""},null,-1)),Ut=[Lt],jt={class:"status-text"},At={class:"name-range"};function Rt(o,i,f,u,h,e){const a=$o;return n(),t("div",Tt,[s("div",{class:eo(["position-status",o.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionStatus=="Active"?(n(),t("div",Ct,Ut)):D("",!0),s("div",jt,p(o.positionStatus),1)],2),s("div",At,[s("span",null,p(o.positionInfo.name),1),o.positionStatus=="Active"?(n(),P(a,{key:0,"pool-info":o.positionInfo},null,8,["pool-info"])):D("",!0)])])}const Ot=E(St,[["render",Rt],["__scopeId","data-v-882c76c0"]]),Ft=M({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const i=ro(),f=_(()=>i),u=mo(),h=A=>{var T;return((T=f.value.tokensObj[A])==null?void 0:T.logo_url)||po("/image/coins/sui-unknown.png")},e=lo("Sui"),a=io("Sui"),d=H(!1),v=uo(),g=Y(),b=oo(),$=_(()=>g),{setIsShowSuccess:l,setIsShowRejected:r,setIsShowWaiting:m,setTransactionDesc:W,setTransactionTxid:B}=v;return{getCoinIcon:h,router:u,claim:async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,B(""),W("Claim rewards"),m(!0);const A={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const T=await a.harvestFarms(A),R=await $.value.currentWallet.signAndExecuteTransactionBlock(T);console.log("0221###sui swap res###",R);let I=e.handleTx(R);if(I&&I.hash){B(I.hash),m(!1),l(!0);let c={title:"Claim",res:I.res,hash:I.hash};e.showTransitionPending(c),await e.watchTransaction(c)&&setTimeout(()=>{b.getPositionByPool($.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else m(!1),r(!0);d.value=!1}catch(T){console.log("farmsDeposit error",T),m(!1),r(!0),d.value=!1}},unStake:async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,B(""),W(`Unstake ${o.positionInfo.name}`),m(!0);const A=o.positionInfo.farmsPoolId,T=o.positionInfo.id;try{const R=await a.farmsWithdraw(A,T),I=await $.value.currentWallet.signAndExecuteTransactionBlock(R);console.log("0221###sui swap res###",I);let c=e.handleTx(I);if(c&&c.hash){B(c.hash),m(!1),l(!0);let S={res:c.res,title:"Unstaked",hash:c.hash};e.showTransitionPending(S),await e.watchTransaction(S)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),b.getPositionByPool($.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else m(!1),r(!0)}catch(R){console.log("farmsDeposit error",R),m(!1),r(!0),d.value=!1}},loading:d,stake:async()=>{console.log(o.positionInfo,"props.positionInfo"),d.value=!0,B(""),W(`Stake ${o.positionInfo.name}`),m(!0);const A={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},T=o.positionInfo.farmsPoolId;try{const R=await a.farmsDeposit(A,T),I=await $.value.currentWallet.signAndExecuteTransactionBlock(R);console.log("0221###sui swap res###",I);let c=e.handleTx(I);if(c&&c.hash){B(c.hash),m(!1),l(!0);let S={res:c.res,title:"Staked",hash:c.hash};e.showTransitionPending(S),await e.watchTransaction(S)&&setTimeout(()=>{b.getPositionByPool($.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),d.value=!1},2e3)}else m(!1),r(!0)}catch(R){console.log("farmsDeposit error",R),m(!1),r(!0),d.value=!1}}}}});const Dt=o=>(G("data-v-2879a83d"),o=o(),K(),o),Bt={class:"farms-position"},Nt={class:"farms-position-box"},Mt=Io('<div class="position-info-block" data-v-2879a83d><div class="block-item" data-v-2879a83d><div class="leabl" data-v-2879a83d>Liquidity</div><div class="text" data-v-2879a83d>~$33.57</div></div><div class="block-item" data-v-2879a83d><div class="leabl" data-v-2879a83d>Share</div><div class="text" data-v-2879a83d>0.00007%</div></div></div>',1),Et={class:"earnings"},qt={class:"block-item"},Wt=Dt(()=>s("div",{class:"leabl"},"Earnings",-1)),Vt={class:"text"},Ht={alt:""},Jt={key:1,class:"rewards-day"},zt={class:"unstake-btn-box"};function Qt(o,i,f,u,h,e){const a=Ot,d=ao,v=co("image");return n(),t("div",Bt,[s("div",Nt,[w(a,{"position-info":o.positionInfo},null,8,["position-info"])]),Mt,s("div",Et,[s("div",qt,[Wt,s("div",Vt,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),t(N,{key:0},Q(o.positionInfo.rewards,g=>(n(),t("div",{key:g.rewarder_type,class:"rewards-day"},[s("div",null,[X(s("img",Ht,null,512),[[v,o.getCoinIcon(g.rewarder_type)]]),s("span",null,p(g.rewarderAmount),1)])]))),128)):(n(),t("div",Jt,"--"))])]),o.positionInfo.positionSource=="clmm"?(n(),P(d,{key:0,class:"add-liquidity-btn claim-btn",onClick:i[0]||(i[0]=g=>o.router.push(`/new-position-detail?collect=${o.positionInfo.collectionName}&&token=${o.positionInfo.tokenName}&&address=${o.positionInfo.pool}&pos=${o.positionInfo.pos_object_id}`))},{default:L(()=>[U("+ Add liquidity")]),_:1})):(n(),P(d,{key:1,class:"claim-btn",disabled:o.positionInfo&&o.positionInfo.rewards&&o.positionInfo.rewards.length==0,onClick:o.claim},{default:L(()=>[U("↑ Claim")]),_:1},8,["disabled","onClick"]))]),s("div",zt,[s("div",null,[o.positionInfo.positionSource=="clmm"?(n(),P(d,{key:0,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:L(()=>[U("Stake")]),_:1},8,["loading","disabled","onClick"])):(n(),P(d,{key:1,class:"unstake-btn",onClick:o.unStake},{default:L(()=>[U("Unstake")]),_:1},8,["onClick"]))])])])}const Oo=E(Ft,[["render",Qt],["__scopeId","data-v-2879a83d"]]),Gt=M({components:{FarmsH5Position:Oo},props:{currentTab:{type:String,default:""}},setup(o){const i=H(!1),f=Y(),u=_(()=>f),h=oo(),e=_(()=>h),a=_(()=>(console.log(e.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?u.value.address?e.value.myFarmsPoolList:[]:o.currentTab=="Ended"?e.value.farmsPoolList.filter(c=>c.status=="Ended"):e.value.farmsPoolList.filter(c=>c.status=="Live"))),d=_(()=>e.value.farmsUserUsd),v=_(()=>(console.log(e.value.farmsRewardObj,"##farmsRewardObj"),e.value.farmsRewardObj)),g=_(()=>e.value.farmsPositionObj),b=_(()=>e.value.farmsPoolListLoading),$=_(()=>e.value.farmsPositionList),l=H({}),r=c=>{l.value[c.clmm_pool_id]?l.value[c.clmm_pool_id]=!1:(l.value[c.clmm_pool_id]=!0,console.log("执行了吗"),h.getPositionByPool(u.value.address,c.clmm_pool_id,c.id))},m=uo(),W=io("Sui"),B=lo("Sui"),{setIsShowSuccess:z,setIsShowRejected:J,setIsShowWaiting:j,setTransactionDesc:A,setTransactionTxid:T}=m,R=async c=>{console.log($.value,"farmsRewardObj###");const S=[];$.value.forEach(k=>{console.log(c,k,"#position"),c==k.clmm_pool_id&&S.push({pool_id:k.pool_id,position_nft_id:k.id})}),console.log(JSON.stringify(S),"##params"),T(""),A("Claim rewards"),j(!0);try{const k=await W.batchHarvest(S),C=await u.value.currentWallet.signAndExecuteTransactionBlock(k);console.log("0221###sui swap res###",C);let F=B.handleTx(C);if(F&&F.hash){T(F.hash),j(!1),z(!0);let so={res:F.res,title:"Claim",hash:F.hash};B.showTransitionPending(so),await B.watchTransaction(so)&&setTimeout(()=>{h.getFarmsPoolList()},4e3)}else j(!1),J(!0)}catch(k){console.log("Claim all error",k),j(!1),J(!0)}},I=mo();return{isShowMore:i,wallet:u,farmsPoolList:a,farmsUserUsd:d,sFixD:O,farmsRewardObj:v,farmsPositionObj:g,openMore:r,checkNullObj:x,openMoreObj:l,farmsPoolListLoading:b,claimPoolReward:R,router:I}}});const Z=o=>(G("data-v-32f98484"),o=o(),K(),o),Kt={key:0,class:"farms-pool-list"},Xt={class:"farms-block"},Yt=Io('<div class="item-block" data-v-32f98484><div class="leabl" data-v-32f98484>Staked TVL</div><div class="text" data-v-32f98484>$19,885,003.12</div></div><div class="item-block apr" data-v-32f98484><div class="leabl" data-v-32f98484>APR</div><div class="text" data-v-32f98484>22.20%</div></div>',2),Zt={class:"item-block"},xt=Z(()=>s("div",{class:"leabl"},"Rewards / day",-1)),oe={class:"text"},se={class:"item-block my-staked"},ne=Z(()=>s("div",{class:"leabl"},"My Staked",-1)),te={key:0,class:"text"},ee={class:"position-usd"},ae={key:0,class:"position-num"},ie={key:1,class:"text"},le=Z(()=>s("div",{class:"position-usd"},"--",-1)),re=[le],de={class:"item-block"},ce=Z(()=>s("div",{class:"leabl"},"Earned",-1)),ue={class:"text earned-box"},me={class:"earned"},pe={key:0,class:"ratio-bg"},_e=Z(()=>s("div",{class:"ratio"},null,-1)),fe=[_e],he={key:1},ve={key:2},ge={class:"add-liquidity-box"},$e=["onClick"],ye=Z(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),be=[ye],Ie={key:1,class:"upgrade-loading"},ke={key:2,class:"no-data"},we=Z(()=>s("img",{src:ko,alt:""},null,-1)),Se={key:3,class:"no-data"},Pe=Z(()=>s("img",{src:wo,alt:""},null,-1)),Te=Z(()=>s("span",null,"No Data",-1)),Ce=[Pe,Te];function Le(o,i,f,u,h,e){const a=To,d=Co,v=ao,g=Oo,b=Ao,$=Wo;return n(),t(N,null,[o.farmsPoolListLoading?o.farmsPoolListLoading?(n(),t("div",Ie,[w($,{type:"poolsCard",loading:!0})])):D("",!0):(n(),t("div",Kt,[(n(!0),t(N,null,Q(o.farmsPoolList,l=>(n(),t("div",{key:l.id,class:"farms-item"},[w(a,{"pool-info":l},null,8,["pool-info"]),s("div",Xt,[Yt,s("div",Zt,[xt,s("div",oe,[(n(!0),t(N,null,Q(l.rewarders,r=>(n(),P(d,{key:r.reward_coin,"reward-info":r,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("div",se,[ne,o.wallet.address?(n(),t("div",te,[s("div",ee," $"+p(("sFixD"in o?o.sFixD:y(O))(o.farmsUserUsd&&o.farmsUserUsd[l.clmm_pool_id]&&o.farmsUserUsd[l.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[l.clmm_pool_id]&&o.farmsUserUsd[l.clmm_pool_id].positionNum?(n(),t("div",ae,p(o.farmsUserUsd[l.clmm_pool_id].positionNum)+" "+p(o.farmsUserUsd[l.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):D("",!0)])):(n(),t("div",ie,re))]),s("div",de,[ce,s("div",ue,[s("div",me,[o.wallet.address?(n(),t("div",pe,fe)):D("",!0),o.wallet.address?(n(),t("span",he,"$"+p(("sFixD"in o?o.sFixD:y(O))(o.farmsRewardObj&&o.farmsRewardObj[l.clmm_pool_id]&&o.farmsRewardObj[l.clmm_pool_id].amountUsd||0,2)),1)):(n(),t("span",ve,"--"))]),w(v,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsUserUsd[l.clmm_pool_id]||o.farmsUserUsd[l.clmm_pool_id].amount<=0,onClick:to(r=>o.claimPoolReward(l.clmm_pool_id),["stop"])},{default:L(()=>[U("Claim")]),_:2},1032,["disabled","onClick"])])])]),s("div",ge,[w(v,{class:"add-liquidity-btn",onClick:to(r=>o.router.push(`/liquidity/deposit?poolAddress=${l.clmm_pool_id}`),["stop"])},{default:L(()=>[U("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more-btn",onClick:r=>o.openMore(l)},[(n(),t("svg",{class:eo(["arrow-icon",!("checkNullObj"in o?o.checkNullObj:y(x))(o.openMoreObj)&&o.openMoreObj[l==null?void 0:l.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},be,2))],8,$e),(n(!0),t(N,null,Q(o.farmsPositionObj[l.clmm_pool_id],r=>X((n(),P(g,{key:r.clmm_pool_id,"position-info":{...r,clmm_pool_id:l.clmm_pool_id}},null,8,["position-info"])),[[yo,!("checkNullObj"in o?o.checkNullObj:y(x))(o.openMoreObj)&&o.openMoreObj[l==null?void 0:l.clmm_pool_id]]])),128)),o.farmsPositionObj&&o.farmsPositionObj[l.clmm_pool_id]&&o.farmsPositionObj[l.clmm_pool_id].length==0?(n(),P(b,{key:0,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${l.clmm_pool_id}`},null,8,["add-liquidity-url"])):D("",!0),o.wallet.address?D("",!0):(n(),P(b,{key:1,"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"},null,8,["no-data-img"]))]))),128))])),!o.wallet.connected&&o.currentTab=="My Farms"?(n(),t("div",ke,[we,w(v,{class:"connect-wallet",onClick:i[0]||(i[0]=l=>o.wallet.setIsShowWalletModal(!0))},{default:L(()=>[U(p(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(n(),t("div",Se,Ce)):D("",!0)],64)}const Fo=E(Gt,[["render",Le],["__scopeId","data-v-32f98484"]]),Ue=M({setup(o,i){const f=["Live","Ended","My Farms"],u=H("Live"),h=H("APR"),e=H(!1),a=oo(),d=_(()=>a),v=Y(),g=_(()=>v),b=_(()=>u.value=="My Farms"?g.value.address?d.value.myFarmsPoolList:[]:u.value=="Ended"?d.value.farmsPoolList.filter(m=>m.status=="Ended"):d.value.farmsPoolList.filter(m=>m.status=="Live"));return{tabList:f,currentTab:u,sortValue:h,clickRefresh:()=>{e.value=!0,a.getFarmsPoolList(),setTimeout(()=>{e.value=!1},1e3)},isRefresh:e,farmsPoolList:b,getListNum:m=>b.value.length,changeTab:m=>{u.value=m,i.emit("changeTab",m)}}}});const ho=o=>(G("data-v-254b2c2c"),o=o(),K(),o),je={class:"farms-tab"},Ae={class:"tab-left"},Re=["onClick"],Oe={key:0},Fe={class:"tab-right"},De={class:"sort-select"},Be={class:"sort-select-box"},Ne=ho(()=>s("div",null,"Sort by",-1)),Me=ho(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),Ee=ho(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),qe={class:"sort-list"},We={class:"refresh"},Ve=ho(()=>s("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),He=[Ve];function Je(o,i,f,u,h,e){return n(),t("div",je,[s("div",Ae,[(n(!0),t(N,null,Q(o.tabList,a=>(n(),t("div",{key:a,class:eo(["tab-item",o.currentTab==a?"tab-item-active":""]),onClick:d=>o.changeTab(a)},[s("span",null,p(a),1),o.currentTab==a&&o.getListNum(a)?(n(),t("p",Oe,p(o.getListNum(a)),1)):D("",!0)],10,Re))),128))]),s("div",Fe,[s("div",De,[s("div",Be,[Ne,s("div",null,[s("span",null,p(o.sortValue),1),Me,Ee])]),s("div",qe,[s("div",{class:"sort-item",onClick:i[0]||(i[0]=a=>o.sortValue="APR")},"APR"),s("div",{class:"sort-item",onClick:i[1]||(i[1]=a=>o.sortValue="TVL")},"TVL")])]),s("div",We,[(n(),t("svg",{"aria-hidden":"true",class:eo(["refresh-icon",o.isRefresh?"refreshing":""]),onClick:i[2]||(i[2]=(...a)=>o.clickRefresh&&o.clickRefresh(...a))},He,2))])])])}const ze=E(Ue,[["render",Je],["__scopeId","data-v-254b2c2c"]]),Qe=M({components:{FarmsBanner:So,FarmsTabs:ze,FarmsTable:Ro,FarmsH5List:Fo},setup(){const o=oo(),i=_(()=>o),f=_(()=>i.value.farmsPoolListLoading),u=_(()=>i.value.farmsPoolList),h=Y(),e=_(()=>h),a=ro(),d=_(()=>a);Mo(()=>[e.value.address,u.value,d.value.tokensObj,d.value.RATES],([g,b,$,l])=>{g&&b.length>0&&!x($)&&!x(l)&&o.getPositionByAllPool(g)},{immediate:!0}),Eo(()=>{o.getFarmsPoolList()});const v=H("Live");return{farmsPoolListLoading:f,currentTab:v}}});const Ge={class:"farm-container"},Ke={class:"farm-container-center"};function Xe(o,i,f,u,h,e){const a=So,d=qo("FarmsTabs"),v=Ro,g=wt,b=Fo;return n(),t("div",Ge,[w(a),s("div",Ke,[w(d,{onChangeTab:i[0]||(i[0]=$=>{o.currentTab=$})}),o.farmsPoolListLoading?(n(),P(g,{key:1})):(n(),P(v,{key:0,"current-tab":o.currentTab},null,8,["current-tab"])),w(b,{"current-tab":o.currentTab},null,8,["current-tab"])])])}const ua=E(Qe,[["render",Xe],["__scopeId","data-v-8d0ef335"]]);export{ua as default};
