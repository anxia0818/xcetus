import{_ as Se}from"./new-position-title.da6d797b.js";import{_ as Te}from"./token-warning.8902e511.js";import{_ as ce}from"./auto-pool-apy-tips.c2a0c30b.js";import{u as Mo,a as M,g as xo,c as No,d as se,s as io,p as de,b as pe,e as E,T as Ho,f as Re}from"./pool.e4675898.js";import{u as le,a as fe}from"./sha256.6423b3a5.js";import{u as Lo,a as _e}from"./autoPool.68434b00.js";import{i as Yo}from"./import-icon.de3e6c66.js";import{a as Do,l as y,m as Uo,r as h,q as po,e as Fo,s as re,o as _,f as O,h as e,t as Ao,i as oo,v as d,j as te,x as no,u as F,p as Go,k as Zo,y as ve,z as ye,A as be,C as ue,c as uo,w as zo,B as ge,D as qe,b as Be,F as Oe,E as Ne,G as Me,H as me}from"./entry.53f4a2f5.js";import{_ as ke}from"./assets-card.3f0582e3.js";import{_ as he}from"./coin-lock.8b5b872f.js";import{_ as we,a as $e}from"./auto-pool-remove-modal.82f17d21.js";import{D as u}from"./decimal.0e8aa3f1.js";/* empty css              *//* empty css              */import"./decimal.633e31ee.js";import{V as ae}from"./index.d8d5f7f5.js";import"./back.2d45689e.js";import"./swap-setting.b219a69b.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.e83ddaf9.js";const Le=Do({components:{AutoPoolApyTips:ce},setup(){const o=le(),s=y(()=>o),X=Mo(),W=y(()=>X),j=Lo(),w=y(()=>j),I=y(()=>s.value.theme),b=Uo(),i=h();po(()=>[w.value.positionInfoObj,b.params.id],([l,m])=>{l&&!No(l)&&m&&(i.value=l[m],console.log(i.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const v=y(()=>{var l;return(l=i.value)==null?void 0:l.needReverse}),a=l=>{var m;return(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||((m=W.value.tokensObj[l==null?void 0:l.address])==null?void 0:m.logo_url)||(I.value==="default"?Yo("/image/coins/unknown.png"):Yo("/image/coins/sui-unknown.png"))},n=y(()=>{var l,m;return w.value.apyObj&&((m=w.value.apyObj[(l=i.value)==null?void 0:l.id])==null?void 0:m.tvl)||"--"}),$=y(()=>{var l,m;return w.value.apyObj&&((m=w.value.apyObj[(l=i.value)==null?void 0:l.id])==null?void 0:m.apr)||"--"});return{positionInfo:i,needReverse:v,getCoinIcon:a,tvl:n,apy:$,addCommom:M,getExplorerUrl:xo}}});const fo=o=>(Go("data-v-bb664738"),o=o(),Zo(),o),De={class:"auto-pool-v2-info"},Ue={class:"pool-info"},Fe={class:"left"},Ve={class:"coin-a"},Ee={alt:""},We={class:"coin-b"},je={alt:""},Xe={class:"position-name"},He={key:0,class:"pool-fee"},ze=fo(()=>e("span",null,"Fee tier",-1)),Ye={class:"vault-address"},Ge=fo(()=>e("span",null,"Vault Address",-1)),Ze=["href"],Je=fo(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),Ke=[Je],Qe={class:"pool-address"},xe=fo(()=>e("span",null,"Pool Address",-1)),on=["href"],en=fo(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),nn=[en],tn={class:"apy-and-tvl"},sn={class:"apy"},ln=fo(()=>e("div",{class:"apy-title"},"APY",-1)),an={class:"apy-text"},un={class:"tvl"},rn=fo(()=>e("div",{class:"tvl-title"},"TVL",-1)),dn={class:"tvl-text"},vn={class:"pool-info h5-pool-info"},mn={class:"left"},cn={class:"coin-a"},pn={alt:""},fn={class:"coin-b"},_n={alt:""},yn={class:"position-name"},bn={key:0,class:"pool-fee"},gn=fo(()=>e("span",null,"Fee tier",-1)),kn={class:"left"},hn={class:"vault-address"},wn=fo(()=>e("span",null,"Vault Address",-1)),$n=["href"],In=fo(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),Cn=[In],An={class:"pool-address"},Pn=fo(()=>e("span",null,"Pool Address",-1)),Sn=["href"],Tn=fo(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),Rn=[Tn],qn={class:"apy-and-tvl"},Bn={class:"apy"},On=fo(()=>e("div",{class:"apy-title"},"APY",-1)),Nn={class:"apy-text"},Mn={class:"tvl"},Ln=fo(()=>e("div",{class:"tvl-title"},"TVL",-1)),Dn={class:"tvl-text"};function Un(o,s,X,W,j,w){var v,a,n,$,l,m,p,r,T,C,R,V,g,f,k,L,z,vo,Y,P,_o,Po,ko,ho,mo,wo,yo,N,to,Vo,bo,Eo,So,go,$o,To,Ro,Wo,jo,eo,ao,Ko,c,A,H,D,so,Z;const I=Te,b=ce,i=re("image");return _(),O("div",De,[e("div",Ue,[e("div",Fe,[e("div",Ve,[Ao(e("img",Ee,null,512),[[i,o.needReverse?o.getCoinIcon((a=o.positionInfo)==null?void 0:a.token_b):o.getCoinIcon((v=o.positionInfo)==null?void 0:v.token_a)]]),oo(I,{address:o.needReverse?(m=(l=o.positionInfo)==null?void 0:l.token_b)==null?void 0:m.address:($=(n=o.positionInfo)==null?void 0:n.token_a)==null?void 0:$.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",We,[Ao(e("img",je,null,512),[[i,o.needReverse?o.getCoinIcon((r=o.positionInfo)==null?void 0:r.token_a):o.getCoinIcon((p=o.positionInfo)==null?void 0:p.token_b)]]),oo(I,{address:o.needReverse?(V=(R=o.positionInfo)==null?void 0:R.token_a)==null?void 0:V.address:(C=(T=o.positionInfo)==null?void 0:T.token_b)==null?void 0:C.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Xe,d(o.needReverse?(f=(g=o.positionInfo)==null?void 0:g.token_b)==null?void 0:f.symbol:(L=(k=o.positionInfo)==null?void 0:k.token_a)==null?void 0:L.symbol)+" - "+d(o.needReverse?(vo=(z=o.positionInfo)==null?void 0:z.token_a)==null?void 0:vo.symbol:(P=(Y=o.positionInfo)==null?void 0:Y.token_b)==null?void 0:P.symbol),1),(_o=o.positionInfo)!=null&&_o.fee?(_(),O("div",He,[ze,te(" "+d(((Po=o.positionInfo)==null?void 0:Po.fee)*100)+"% ",1)])):no("",!0),e("div",Ye,[Ge,e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:F(xo))("poolAddress",(ko=o.positionInfo)==null?void 0:ko.id),target:"_blank"},Ke,8,Ze)]),e("div",Qe,[xe,e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:F(xo))("poolAddress",(ho=o.positionInfo)==null?void 0:ho.id),target:"_blank"},nn,8,on)])]),e("div",tn,[e("div",sn,[ln,e("div",an,[te(d(o.apy)+" ",1),oo(b)])]),e("div",un,[rn,e("div",dn,"$"+d(("addCommom"in o?o.addCommom:F(M))(o.tvl,2)),1)])])]),e("div",vn,[e("div",mn,[e("div",cn,[Ao(e("img",pn,null,512),[[i,o.needReverse?o.getCoinIcon((wo=o.positionInfo)==null?void 0:wo.token_b):o.getCoinIcon((mo=o.positionInfo)==null?void 0:mo.token_a)]]),oo(I,{address:o.needReverse?(Vo=(to=o.positionInfo)==null?void 0:to.token_b)==null?void 0:Vo.address:(N=(yo=o.positionInfo)==null?void 0:yo.token_a)==null?void 0:N.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",fn,[Ao(e("img",_n,null,512),[[i,o.needReverse?o.getCoinIcon((Eo=o.positionInfo)==null?void 0:Eo.token_a):o.getCoinIcon((bo=o.positionInfo)==null?void 0:bo.token_b)]]),oo(I,{address:o.needReverse?(To=($o=o.positionInfo)==null?void 0:$o.token_a)==null?void 0:To.address:(go=(So=o.positionInfo)==null?void 0:So.token_b)==null?void 0:go.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",yn,d(o.needReverse?(Wo=(Ro=o.positionInfo)==null?void 0:Ro.token_b)==null?void 0:Wo.symbol:(eo=(jo=o.positionInfo)==null?void 0:jo.token_a)==null?void 0:eo.symbol)+" - "+d(o.needReverse?(Ko=(ao=o.positionInfo)==null?void 0:ao.token_a)==null?void 0:Ko.symbol:(A=(c=o.positionInfo)==null?void 0:c.token_b)==null?void 0:A.symbol),1),(H=o.positionInfo)!=null&&H.fee?(_(),O("div",bn,[gn,te(" "+d(((D=o.positionInfo)==null?void 0:D.fee)*100)+"% ",1)])):no("",!0)]),e("div",kn,[e("div",hn,[wn,e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:F(xo))("poolAddress",(so=o.positionInfo)==null?void 0:so.id),target:"_blank"},Cn,8,$n)]),e("div",An,[Pn,e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:F(xo))("poolAddress",(Z=o.positionInfo)==null?void 0:Z.id),target:"_blank"},Rn,8,Sn)])]),e("div",qn,[e("div",Bn,[On,e("div",Nn,[te(d(o.apy)+" ",1),oo(b)])]),e("div",Mn,[Ln,e("div",Dn,"$"+d(("addCommom"in o?o.addCommom:F(M))(o.tvl,2)),1)])])])])}const Ie=Fo(Le,[["render",Un],["__scopeId","data-v-bb664738"]]),Fn=Do({setup(){const o=h(!0),s=Mo(),X=y(()=>s),W=Lo(),j=y(()=>W),w=Uo(),I=h();po(()=>[j.value.positionInfoObj,w.params.id],([v,a])=>{v&&!No(v)&&a&&(I.value=v[a],console.log(I.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const b=y(()=>{var v;return(v=I.value)==null?void 0:v.needReverse});return{direct:o,positionInfo:I,needReverse:b,getCoinIcon:v=>{var a;return(v==null?void 0:v.logoURI)||(v==null?void 0:v.logo_url)||((a=X.value.tokensObj[v==null?void 0:v.address])==null?void 0:a.logo_url)||Yo("/image/coins/sui-unknown.png")},decimalUi:se,addCommom:M,sFixD:io}}}),Vn=""+globalThis.__publicAssetsURL("sui-image/icon_currentprice@2x.png");const Io=o=>(Go("data-v-e8afdce4"),o=o(),Zo(),o),En={class:"v2-position-range"},Wn={class:"position-range-top"},jn=Io(()=>e("div",null,"Position Range",-1)),Xn={class:"base-coin"},Hn={key:0,alt:""},zn={key:1,alt:""},Yn={key:2},Gn={key:3},Zn=Io(()=>e("p",null,"Base coin",-1)),Jn={class:"coin-rate"},Kn=Io(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Qn=Io(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),xn=[Kn,Qn],ot={class:"position-range-bottom"},et={class:"current-price"},nt=Io(()=>e("div",{class:"current-price-title"},"Current Price",-1)),tt={key:0,class:"current-price-text"},st={key:1,class:"current-price-text"},lt={class:"price-range"},it=Io(()=>e("div",{class:"price-range-bg"},[e("div",{class:"price-range-border"})],-1)),at=Io(()=>e("img",{src:Vn,alt:""},null,-1)),ut={class:"min-price"},rt=Io(()=>e("div",null,"Min Price",-1)),dt={class:"max-price"},vt=Io(()=>e("div",null,"Max Price",-1));function mt(o,s,X,W,j,w){var b,i,v,a,n,$,l,m,p,r,T,C,R,V,g,f,k,L;const I=re("image");return _(),O("div",En,[e("div",Wn,[jn,e("div",Xn,[o.needReverse?Ao((_(),O("img",zn,null,512)),[[I,o.direct?o.getCoinIcon((a=o.positionInfo)==null?void 0:a.token_b):o.getCoinIcon((v=o.positionInfo)==null?void 0:v.token_a)]]):Ao((_(),O("img",Hn,null,512)),[[I,o.direct?o.getCoinIcon((b=o.positionInfo)==null?void 0:b.token_a):o.getCoinIcon((i=o.positionInfo)==null?void 0:i.token_b)]]),o.needReverse?(_(),O("span",Gn,d(o.direct?(r=(p=o.positionInfo)==null?void 0:p.token_b)==null?void 0:r.symbol:(C=(T=o.positionInfo)==null?void 0:T.token_a)==null?void 0:C.symbol),1)):(_(),O("span",Yn,d(o.direct?($=(n=o.positionInfo)==null?void 0:n.token_a)==null?void 0:$.symbol:(m=(l=o.positionInfo)==null?void 0:l.token_b)==null?void 0:m.symbol),1)),Zn,e("div",Jn,[e("div",{onClick:s[0]||(s[0]=z=>o.direct=!o.direct)},xn)])])]),e("div",ot,[e("div",et,[nt,(o.needReverse?!o.direct:o.direct)?(_(),O("div",tt,d(("addCommom"in o?o.addCommom:F(M))(("decimalUi"in o?o.decimalUi:F(se))((R=o.positionInfo)==null?void 0:R.price,6))),1)):(_(),O("div",st,d(("addCommom"in o?o.addCommom:F(M))(("decimalUi"in o?o.decimalUi:F(se))(1/((V=o.positionInfo)==null?void 0:V.price),6))),1))]),e("div",lt,[it,at,e("div",ut,[rt,e("div",null,d(((g=o.positionInfo)==null?void 0:g.minPrice)&&("sFixD"in o?o.sFixD:F(io))((f=o.positionInfo)==null?void 0:f.minPrice,6)),1)]),e("div",dt,[vt,e("div",null,d(((k=o.positionInfo)==null?void 0:k.maxPrice)&&("sFixD"in o?o.sFixD:F(io))((L=o.positionInfo)==null?void 0:L.maxPrice,6)),1)])])])])}const Ce=Fo(Fn,[["render",mt],["__scopeId","data-v-e8afdce4"]]),ct=Do({setup(){const o=Mo(),s=y(()=>o),X=Lo(),W=y(()=>X),j=Uo(),w=h();return po(()=>[W.value.positionInfoObj,j.params.id],([i,v])=>{console.log(i,"##positionInfoObj"),i&&!No(i)&&v&&(w.value=i[v],console.log(w.value,"##positionInfo.value"))},{immediate:!0,deep:!0}),{needReverse:y(()=>{var i;return(i=w.value)==null?void 0:i.needReverse}),positionInfo:w,getCoinIcon:i=>{var v;return console.log(i,"info##"),(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((v=s.value.tokensObj[i==null?void 0:i.address])==null?void 0:v.logo_url)||Yo("/image/coins/sui-unknown.png")},addCommom:M}}});const pt=o=>(Go("data-v-c2e1975e"),o=o(),Zo(),o),ft={class:"pool-composition"},_t=pt(()=>e("div",{class:"pool-composition-top"},"Pool Composition",-1)),yt={class:"pool-composition-bottom"},bt={class:"token-ratio"},gt={class:"before-coin"},kt={alt:""},ht={class:"after-coin"},wt={alt:""},$t={class:"token-num"},It={class:"num-box"},Ct={class:"num-box"};function At(o,s,X,W,j,w){var b,i,v,a,n,$,l,m,p,r,T,C,R,V,g,f,k,L,z,vo;const I=re("image");return _(),O("div",ft,[_t,e("div",yt,[e("div",bt,[e("div",gt,[Ao(e("img",kt,null,512),[[I,o.needReverse?o.getCoinIcon((i=o.positionInfo)==null?void 0:i.token_b):o.getCoinIcon((b=o.positionInfo)==null?void 0:b.token_a)]]),e("span",null,d((v=o.positionInfo)==null?void 0:v.poolCoinARatio)+"%",1)]),e("div",ht,[e("span",null,d((a=o.positionInfo)==null?void 0:a.poolCoinBRatio)+"%",1),Ao(e("img",wt,null,512),[[I,o.needReverse?o.getCoinIcon(($=o.positionInfo)==null?void 0:$.token_a):o.getCoinIcon((n=o.positionInfo)==null?void 0:n.token_b)]])])]),e("div",$t,[e("div",{class:"token-a-bg",style:ve({width:`${(l=o.positionInfo)==null?void 0:l.poolCoinARatio}%`})},null,4),e("div",{class:"token-b-bg",style:ve({width:`${(m=o.positionInfo)==null?void 0:m.poolCoinBRatio}%`})},null,4),e("div",It,[e("div",null,d(("addCommom"in o?o.addCommom:F(M))((p=o.positionInfo)==null?void 0:p.poolCoinANum))+" "+d(o.needReverse?(R=(C=o.positionInfo)==null?void 0:C.token_b)==null?void 0:R.symbol:(T=(r=o.positionInfo)==null?void 0:r.token_a)==null?void 0:T.symbol),1),e("div",null,"$"+d(("addCommom"in o?o.addCommom:F(M))((V=o.positionInfo)==null?void 0:V.poolCoinBUSD)),1)]),e("div",Ct,[e("div",null,d(("addCommom"in o?o.addCommom:F(M))((g=o.positionInfo)==null?void 0:g.poolCoinBNum))+" "+d(o.needReverse?(z=(L=o.positionInfo)==null?void 0:L.token_a)==null?void 0:z.symbol:(k=(f=o.positionInfo)==null?void 0:f.token_b)==null?void 0:k.symbol),1),e("div",null,"$"+d(("addCommom"in o?o.addCommom:F(M))((vo=o.positionInfo)==null?void 0:vo.poolCoinBUSD)),1)])])])])}const Ae=Fo(ct,[["render",At],["__scopeId","data-v-c2e1975e"]]),Pt=Do({setup(){const o=Mo(),s=y(()=>o),X=Lo(),W=y(()=>X),j=Uo(),w=h();return po(()=>[W.value.positionInfoObj,j.params.id],([i,v])=>{console.log(i,"##positionInfoObj"),i&&!No(i)&&v&&(w.value=i[v],console.log(w.value,"##positionInfo.value"))},{immediate:!0,deep:!0}),{needReverse:y(()=>{var i;return(i=w.value)==null?void 0:i.needReverse}),positionInfo:w,getCoinIcon:i=>{var v;return console.log(i,"info##"),(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((v=s.value.tokensObj[i==null?void 0:i.address])==null?void 0:v.logo_url)||Yo("/image/coins/sui-unknown.png")},addCommom:M}}});const oe=o=>(Go("data-v-29cf5613"),o=o(),Zo(),o),St={class:"my-liquidity"},Tt={class:"my-liquidity-top"},Rt=oe(()=>e("div",null,"My Liquidity",-1)),qt=oe(()=>e("p",null,"My share of pool",-1)),Bt={class:"my-liquidity-bottom"},Ot={class:"lp-token"},Nt=oe(()=>e("div",null,[e("span",null,"LP Token Balance ")],-1)),Mt={class:"lp-balance"},Lt={class:"token-num-content"},Dt={class:"token-num"},Ut={class:"logo"},Ft=["src"],Vt={class:"text"},Et={class:"lp-logo"},Wt=["src"],jt=oe(()=>e("div",null,"Pooled Assets",-1)),Xt={class:"token-num"},Ht={class:"logo"},zt=["src"],Yt={class:"text"},Gt=oe(()=>e("div",{class:"token-num-content-bg"},null,-1));function Zt(o,s,X,W,j,w){var I,b,i,v,a,n,$,l,m,p,r,T,C,R,V,g,f,k,L,z;return _(),O("div",St,[e("div",Tt,[Rt,e("div",null,[qt,e("p",null,d((I=o.positionInfo)==null?void 0:I.myShare)+"%",1)])]),e("div",Bt,[e("div",Ot,[Nt,e("div",null,[e("span",Mt,d((b=o.positionInfo)==null?void 0:b.myLiquidity)+" LP",1),e("span",null,"$"+d((i=o.positionInfo)==null?void 0:i.myLiquidityUSD),1)])]),e("div",Lt,[e("div",Dt,[e("div",Ut,[e("img",{src:o.needReverse?o.getCoinIcon((a=o.positionInfo)==null?void 0:a.token_b):o.getCoinIcon((v=o.positionInfo)==null?void 0:v.token_a),alt:""},null,8,Ft)]),e("div",Vt,[e("div",null,d(("addCommom"in o?o.addCommom:F(M))((n=o.positionInfo)==null?void 0:n.amountA))+" "+d(o.needReverse?(p=(m=o.positionInfo)==null?void 0:m.token_b)==null?void 0:p.symbol:(l=($=o.positionInfo)==null?void 0:$.token_a)==null?void 0:l.symbol),1),e("div",null,d(("addCommom"in o?o.addCommom:F(M))((r=o.positionInfo)==null?void 0:r.myAmountAUSD)),1)])]),e("div",Et,[e("img",{src:o.getCoinIcon((T=o.positionInfo)==null?void 0:T.lpInfo),alt:""},null,8,Wt),jt]),e("div",Xt,[e("div",Ht,[e("img",{src:o.needReverse?o.getCoinIcon((R=o.positionInfo)==null?void 0:R.token_a):o.getCoinIcon((C=o.positionInfo)==null?void 0:C.token_b),alt:""},null,8,zt)]),e("div",Yt,[e("div",null,d(("addCommom"in o?o.addCommom:F(M))((V=o.positionInfo)==null?void 0:V.amountB))+" "+d(o.needReverse?(L=(k=o.positionInfo)==null?void 0:k.token_a)==null?void 0:L.symbol:(f=(g=o.positionInfo)==null?void 0:g.token_b)==null?void 0:f.symbol),1),e("div",null,d(("addCommom"in o?o.addCommom:F(M))((z=o.positionInfo)==null?void 0:z.myAmountBUSD)),1)])]),Gt])])])}const Pe=Fo(Pt,[["render",Zt],["__scopeId","data-v-29cf5613"]]),Jt=Do({components:{AutoPoolAddModal:we},setup(){const o=fe(),s=h(!1),X=le(),W=y(()=>X),j=y(()=>W.value.chainName),w=y(()=>o),I=Lo(),b=y(()=>I),i=Mo(),v=y(()=>i),a=h(),n=Uo();po(()=>[b.value.positionInfoObj,n.params.id],([c,A])=>{c&&!No(c)&&A&&(a.value=c[A],console.log(a.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const $=y(()=>{var c,A;return console.log((c=a.value)==null?void 0:c.needReverse,"##positionInfo.value?.needReverse"),(A=a.value)==null?void 0:A.needReverse}),l=h(),m=h(),p=h(),r=h(),T=h(!0),C=y(()=>w.value.assets&&l.value&&w.value.assets[l.value.address]?de(w.value.assets[l.value.address].balance,l.value.decimals):0),R=y(()=>w.value.assets&&m.value&&w.value.assets[m.value.address]?de(w.value.assets[m.value.address].balance,m.value.decimals):0),V=c=>{c==="fromCoin"?(T.value=!0,p.value=C.value>0?l.value.symbol=="SUI"?new u(Number(C.value)).sub(new u(.05)).lt(new u(0))?"0":new u(Number(C.value)).sub(new u(.05)).toString():String(C.value):""):(T.value=!1,r.value=R.value>0?m.value.symbol=="SUI"?new u(Number(R.value)).sub(new u(.05)).lt(new u(0))?"0":new u(Number(R.value)).sub(new u(.05)).toString():String(R.value):"")},g=c=>{c==="fromCoin"?(T.value=!0,p.value=C.value>0?io(new u(Number(C.value)).div(2).toString(),l.value.decimals).toString():""):(T.value=!1,r.value=R.value>0?io(new u(Number(R.value)).div(2).toString(),m.value.decimals).toString():"")},f=y(()=>j.value?pe(j.value):{}),k=y(()=>W.value.slippage),L=h("--"),z=h("--"),vo=c=>{const A=new u(a.value.autoPoolPositionInfo.liquidity),H=new u(c.toString());if(A.toNumber()>0&&H.toNumber()>0){const D=H.add(A);console.log("totalLiquidity:",H.div(D).mul(100).toString());const so=H.div(D).mul(100).toNumber(),Z=Re(so),lo=Z==-1?2:Z+2,ro=io(H.div(D).mul(100).toNumber(),lo);console.log(a.value.decimals,"##positionInfo.value.decimal");const co=new u(1).div(new u(Math.pow(10,a.value.lpInfo.decimals))).toString();console.log(ro,co,"###288"),Number(ro)<Number(co)?L.value=`<${co}`:L.value=ro}else H.toNumber()>0&&A.toNumber()<=0?L.value="100":L.value="--"},Y=c=>{const A=new u(c.toString());console.log(c.toString(),"##liquidityAmount.toString()");const H=A.mul(new u(k.value).div(100)),D=new u(Math.pow(10,a.value.lpInfo.decimals));console.log(A.minus(H).div(D).toString(),"##liquidity.minus(minimum).div(decimals).toString()"),z.value=io(A.minus(H).div(D).toString(),a.value.lpInfo.decimals)},P=h(!1),_o=h(!1),Po=h(""),ko=h(),ho=async()=>{if(!a.value)return;const c=a.value.autoPoolPositionInfo.tick_lower_index,A=a.value.autoPoolPositionInfo.tick_upper_index,H=Ho.sqrtPriceX64ToTickIndex(new E(a.value.current_sqrt_price));H<c&&($.value?P.value=!0:_o.value=!0),H>A&&($.value?_o.value=!0:P.value=!0);let D;if(console.log(p.value||r.value,"#fromCoinAmount.value || toCoinAmount.value"),p.value||r.value){T.value?D=new u(p.value).mul(Math.pow(10,l.value.decimals)).toString():D=new u(r.value).mul(Math.pow(10,m.value.decimals)).toString();let so,Z=T.value;if(console.log("执行##"),eo.value||ao.value){const t=await Wo.calculateDepositSwapAmount({lowerTick:c,upperTick:A,curSqrtPrice:new E(a.value.current_sqrt_price),fix_amount_a:Z,input_amount:D,coinTypeA:a.value.autoPoolPositionInfo.coin_type_a,coinTypeB:a.value.autoPoolPositionInfo.coin_type_b,clmm_pool:a.value.address});if(console.log(t,"###swapResult"),t){so=new E(t.afterSqrtPrice),D=new E(t.swapOutAmount),so=a.value.current_sqrt_price,ko.value={swap_amount:t.swapInAmount,a2b:Z},Z=!Z;const S=a.value.token_a.decimals,G=a.value.token_b.decimals,q=new u(t.swapInAmount).div(new u(Math.pow(10,S))).toString(),U=new u(t.swapOutAmount).div(new u(Math.pow(10,G))).toString(),B=$.value?a.value.token_b.symbol:a.value.token_a.symbol,J=$.value?a.value.token_a.symbol:a.value.token_b.symbol;Po.value=`To deposit ${eo.value?p.value:r.value} ${eo.value?B:J}, 
          ${q} ${eo.value?B:J}  will be traded for ${U} ${eo.value?J:B} added to the pool.`}else so=a.value.current_sqrt_price,D=new E(D)}else so=a.value.current_sqrt_price,D=new E(D);console.log(ko,"##swapParams");const{liquidityAmount:lo,tokenMaxA:ro,tokenMaxB:co}=f.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:l.value,tokenB:m.value,lowerTick:c,upperTick:A,coinAmount:D,iscoinA:Z,roundUp:!0,slippage:Number(k.value)/100,curSqrtPrice:new E(so)});console.log(a.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(co.toString(),ro.toString(),a.value,"###323"),!eo.value&&!ao.value&&(T.value?r.value=Number(co)>0?co:"":p.value=Number(ro)>0?ro:""),vo(lo),Y(lo)}};po(()=>a.value,c=>{c&&!No(c)&&(l.value=c==null?void 0:c.token_a,m.value=c==null?void 0:c.token_b,P.value=!1,_o.value=!1,ho())},{immediate:!0});const mo=y(()=>v.value.RATES),wo=y(()=>{var c,A,H,D,so,Z,lo,ro,co,t;if((A=mo.value[(c=l.value)==null?void 0:c.address])!=null&&A.price&&((D=mo.value[(H=m.value)==null?void 0:H.address])!=null&&D.price)){console.log((Z=mo.value[(so=l.value)==null?void 0:so.address])==null?void 0:Z.price,"RATES.value[fromCoin.value?.address]?.price");const S=new u(p.value||0).mul(new u((ro=mo.value[(lo=l.value)==null?void 0:lo.address])==null?void 0:ro.price)),G=new u(r.value||0).mul(new u((t=mo.value[(co=m.value)==null?void 0:co.address])==null?void 0:t.price));return se(S.add(G).toString(),2)}else return"--"});po(()=>p.value,(c,A)=>{c?ho():(L.value="--",r.value="",z.value="--")},{immediate:!0}),po(()=>r.value,(c,A)=>{c?ho():(p.value="",L.value="--",z.value="--")},{immediate:!0});const{t:yo,locale:N}=ye(),to=y(()=>{const c=Number(p.value)>Number(C.value),A=Number(r.value)>Number(R.value);return!p.value&&!r.value?yo("button.enterAmount"):c?yo("button.insufficientBalance",{name:l.value.symbol}):A?yo("button.insufficientBalance",{name:m.value.symbol}):"Add Liquidity"}),Vo=y(()=>{const c=Number(p.value)>Number(C.value),A=Number(r.value)>Number(R.value);return!!(!p.value&&!r.value||c||A||p.value<=0&&r.value<=0)}),bo=h(!0),{setIsShowSuccess:Eo,setIsShowRejected:So,setIsShowWaiting:go,setTransactionDesc:$o,setTransactionTxid:To,setPositiomNum:Ro}=X,Wo=_e("Sui"),jo=async()=>{var ro,co;s.value=!1,bo.value=!0,To("");const c=`${M(p.value)} ${(ro=l.value)==null?void 0:ro.symbol}`,A=`${M(r.value)} ${(co=m.value)==null?void 0:co.symbol}`;$o(`Deposit ${p.value>0?c:""} ${r.value>0&&p.value>0?"and":""} ${r.value>0?A:""}`),go(!0);const H=T.value,D=a.value.autoPoolPositionInfo.tick_lower_index,so=a.value.autoPoolPositionInfo.tick_upper_index;let Z;T.value?Z=new u(p.value).mul(Math.pow(10,l.value.decimals)).toString():Z=new u(r.value).mul(Math.pow(10,m.value.decimals)).toString();const lo=a.value.rewarderInfo.map(t=>t.coinAddress);try{const t={lowerTick:D,upperTick:so,coinAmount:Z,fix_amount_a:H,slippage:Number(k.value)/100,curSqrtPrice:new E(a.value.current_sqrt_price),id:a.value.id,clmm_pool:a.value.autoPoolPositionInfo.pool,lp_token_type:a.value.lp_token_type,coinTypeA:a.value.autoPoolPositionInfo.coin_type_a,coinTypeB:a.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:lo,swapParams:ko.value,isOnlyA:eo.value,isOnlyB:ao.value},S=await Wo.deposit(t);console.log(S,"===>payloadAdd11111");const G=await w.value.currentWallet.signAndExecuteTransactionBlock(S);let q=f.value.handleTx(G);if(console.log("toAdd###tx###",q),q&&q.hash){To(q.hash),go(!1),Eo(!0),console.log(a,"===>positionInfo");const U={title:"Supplied",desc:`Deposit ${p.value>0?c:""} ${r.value>0&&p.value>0?"and":""} ${r.value>0?A:""}`,hash:q.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${p.value>0?c:""} ${r.value>0&&p.value>0?"and":""} ${r.value>0?A:""}`};j.value!=="Aptos"&&(U.res=q.res),f.value.showTransitionPending(U),await f.value.watchTransaction(U)&&setTimeout(()=>{I.updatePositionItem(a.value.id),f.value.getAccount(w.value.address)},1e3),Ro()}else go(!1),So(!0);p.value="",r.value="",bo.value=!1}catch(t){p.value="",r.value="",console.log("addError###",t),bo.value=!1,go(!1),So(!0)}},eo=h(!1),ao=h(!1);return{wallet:w,positionInfo:a,isShowAddModal:s,needReverse:$,fromCoin:l,toCoin:m,fromCoinAmount:p,toCoinAmount:r,fromCoinBlance:C,toCoinBlance:R,fixedFromCoin:T,maxBtnSelect:V,halfBtnSelect:g,totalAmountUSD:wo,addCommom:M,shareOfPool:L,minimumReceivedLP:z,addLiquidityBtnText:to,addLiquidityBtnDisabled:Vo,toAdd:jo,showToCoinLock:_o,showFromCoinLock:P,isOnlyA:eo,isOnlyB:ao,onlyToken:c=>{p.value="",r.value="",c=="only-a"?(eo.value=!eo.value,ao.value=!1):(ao.value=!ao.value,eo.value=!1)},onlyText:Po}}});const Jo=o=>(Go("data-v-bfbe480f"),o=o(),Zo(),o),Kt={class:"auto-pool-add"},Qt={class:"auto-pool-add-content"},xt={class:"liquidity-action-tab"},os=Jo(()=>e("div",{class:"increase tab-active"},"Add",-1)),es={class:"only-token"},ns=Jo(()=>e("div",null,"Deposit Amounts",-1)),ts={key:0},ss={key:0},ls={key:0,class:"card-item"},is={key:1,class:"card-item"},as=Jo(()=>e("span",null,"Pool Closed",-1)),us={class:"add-info"},rs={key:0,class:"only-text"},ds={class:"total-amount"},vs=Jo(()=>e("span",null,"Total Amount",-1)),ms={class:"total-amount"},cs=Jo(()=>e("span",null,"Share of Pool",-1)),ps={class:"total-amount"},fs=Jo(()=>e("span",null,"Minimum Received LP",-1));function _s(o,s,X,W,j,w){var a,n,$,l,m,p,r,T,C,R,V,g,f;const I=ke,b=he,i=ge,v=we;return _(),O("div",Kt,[e("div",Qt,[e("div",xt,[os,e("div",{class:"remove",onClick:s[0]||(s[0]=be(k=>o.$emit("changeCurrentTab"),["stop"]))},"Remove")]),e("div",es,[ns,e("div",null,[e("div",{class:"only-a",onClick:s[1]||(s[1]=k=>o.onlyToken("only-a"))},[e("p",null,[o.isOnlyA?(_(),O("span",ts)):no("",!0)]),e("span",null,d(o.needReverse?(l=($=o.positionInfo)==null?void 0:$.token_b)==null?void 0:l.symbol:(n=(a=o.positionInfo)==null?void 0:a.token_a)==null?void 0:n.symbol)+" only",1)]),e("div",{class:"only-b",onClick:s[2]||(s[2]=k=>o.onlyToken("only-b"))},[e("p",null,[o.isOnlyB?(_(),O("span",ss)):no("",!0)]),e("span",null,d(o.needReverse?(T=(r=o.positionInfo)==null?void 0:r.token_a)==null?void 0:T.symbol:(p=(m=o.positionInfo)==null?void 0:m.token_b)==null?void 0:p.symbol)+" only",1)])])]),e("div",{class:ue(o.needReverse?"card-container reverse":"card-container")},[(o.needReverse?!o.isOnlyA:!o.isOnlyB)?(_(),O("div",ls,[oo(I,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":s[3]||(s[3]=k=>o.fromCoinAmount=k),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[4]||(s[4]=k=>o.maxBtnSelect("fromCoin")),onOnHalf:s[5]||(s[5]=k=>o.halfBtnSelect("fromCoin")),onOnInput:s[6]||(s[6]=k=>{o.fromCoinAmount=k}),onOnFocus:s[7]||(s[7]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock?(_(),uo(b,{key:0})):no("",!0)])):no("",!0),(o.needReverse?!o.isOnlyB:!o.isOnlyA)?(_(),O("div",is,[oo(I,{modelValue:o.toCoinAmount,"onUpdate:modelValue":s[8]||(s[8]=k=>o.toCoinAmount=k),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[9]||(s[9]=k=>o.maxBtnSelect("toCoin")),onOnHalf:s[10]||(s[10]=k=>o.halfBtnSelect("toCoin")),onOnInput:s[11]||(s[11]=k=>{o.toCoinAmount=k}),onOnFocus:s[12]||(s[12]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock?(_(),uo(b,{key:0})):no("",!0)])):no("",!0)],2)]),(C=o.positionInfo)!=null&&C.is_pause?(_(),uo(i,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:zo(()=>[as]),_:1})):o.wallet.connected?(_(),uo(i,{key:1,class:"big-btn liquidity-btn",disabled:o.addLiquidityBtnDisabled,onClick:s[13]||(s[13]=k=>o.isShowAddModal=!0)},{default:zo(()=>[e("span",null,d(o.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(_(),uo(i,{key:2,class:"big-btn",onClick:s[14]||(s[14]=k=>o.wallet.setIsShowWalletModal(!0))},{default:zo(()=>[e("span",null,d(o.$t("button.connectWallet")),1)]),_:1})),e("div",us,[o.fromCoinAmount||o.toCoinAmount?(_(),O("div",rs,d(o.onlyText),1)):no("",!0),e("div",ds,[vs,e("span",null,"$"+d(("addCommom"in o?o.addCommom:F(M))(o.totalAmountUSD)),1)]),e("div",ms,[cs,e("span",null,d(o.shareOfPool)+"%",1)]),e("div",ps,[fs,e("span",null,d(("addCommom"in o?o.addCommom:F(M))(o.minimumReceivedLP))+" "+d(o.needReverse?(R=o.toCoin)==null?void 0:R.symbol:(V=o.fromCoin)==null?void 0:V.symbol)+"-"+d(o.needReverse?(g=o.fromCoin)==null?void 0:g.symbol:(f=o.toCoin)==null?void 0:f.symbol),1)])]),o.isShowAddModal?(_(),uo(v,{key:3,"pool-info":o.positionInfo,"from-coin":o.needReverse?o.positionInfo.token_b:o.positionInfo.token_a,"to-coin":o.needReverse?o.positionInfo.token_a:o.positionInfo.token_b,"from-coin-amount":o.needReverse?o.toCoinAmount:o.fromCoinAmount,"to-coin-amount":o.needReverse?o.fromCoinAmount:o.toCoinAmount,"total-amount":o.totalAmountUSD,"share-of-pool":o.shareOfPool,"minimum-received-l-p":o.minimumReceivedLP,"is-only-a":o.isOnlyA,"is-only-b":o.isOnlyB,onOnClose:s[15]||(s[15]=k=>o.isShowAddModal=!1),onToAdd:o.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):no("",!0)])}const ys=Fo(Jt,[["render",_s],["__scopeId","data-v-bfbe480f"]]),bs=Do({components:{AutoPoolRemoveModal:$e},setup(){const o=fe(),s=y(()=>o),X=le(),W=y(()=>X),j=y(()=>W.value.slippage),w=y(()=>W.value.chainName),I=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],b=h(25),i=Uo(),v=Lo(),a=y(()=>v),n=y(()=>(console.log(a.value.positionInfoObj[i.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),a.value.positionInfoObj[i.params.id])),$=y(()=>{var t;return(t=n.value)==null?void 0:t.needReverse}),l=h(),m=h(),p=h(!1),r=h(),T=y(()=>{var t;return(t=n.value)==null?void 0:t.myLiquidity}),C=h(!0),R=y(()=>w.value?pe(w.value):{}),V=_e("Sui"),g=h(""),f=h(""),k=h("--"),L=h(!1),z=h(!1),vo=h(),Y=h(!0),P=h(),_o=Mo(),Po=y(()=>_o),ko=y(()=>Po.value.RATES),ho=async()=>{if(C.value||!n.value)return;const t=n.value.autoPoolPositionInfo.tick_lower_index,S=n.value.autoPoolPositionInfo.tick_upper_index,G=Ho.sqrtPriceX64ToTickIndex(new E(n.value.current_sqrt_price));G<t&&($.value?L.value=!0:z.value=!0),G>S&&($.value?z.value=!0:L.value=!0);let q;if(console.log(g.value||f.value,"#fromCoinAmount.value || toCoinAmount.value"),g.value||f.value){Y.value?q=new u(g.value).mul(Math.pow(10,l.value.decimals)).toString():q=new u(f.value).mul(Math.pow(10,m.value.decimals)).toString();let U,B=Y.value;if(console.log("执行##"),N.value||to.value){const x=await V.calculateRemoveSwapAmount({lowerTick:t,upperTick:S,curSqrtPrice:new E(n.value.current_sqrt_price),fix_amount_a:B,receiveAmount:q,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address});if(console.log(x,"###swapResult"),x){U=new E(x.afterSqrtPrice),q=new E(x.swapOutAmount),U=n.value.current_sqrt_price,vo.value={swap_amount:x.swapInAmount,liquidity:x.liquidity,a2b:!B},B=!B;const Bo=n.value.token_a.decimals,Oo=n.value.token_b.decimals,Co=new u(x.swapInAmount).div(new u(Math.pow(10,Bo))).toString(),Qo=new u(x.swapOutAmount).div(new u(Math.pow(10,Oo))).toString(),ne=$.value?n.value.token_b.symbol:n.value.token_a.symbol,ie=$.value?n.value.token_a.symbol:n.value.token_b.symbol;P.value=`To withdraw ${N.value?g.value:f.value} ${N.value?ne:ie}, 
          ${Co} ${N.value?ne:ie}  in the pool will be traded for ${Qo} ${N.value?ie:ne}`}else U=n.value.current_sqrt_price,q=new E(q)}else U=n.value.current_sqrt_price,q=new E(q);console.log("执行了吗##");const{liquidityAmount:J,tokenMaxA:K,tokenMaxB:Q}=R.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:l.value,tokenB:m.value,lowerTick:t,upperTick:S,coinAmount:q,iscoinA:B,roundUp:!1,slippage:Number(j.value)/100,curSqrtPrice:new E(U)});console.log(n.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(Q.toString(),K.toString(),n.value,"###323"),!N.value&&!to.value&&(Y.value?f.value=Number(Q)>0?Q:"":g.value=Number(K)>0?K:"");const qo=ae.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},J.toString());r.value=new u(qo).div(new u(Math.pow(10,n.value.lpInfo.decimals))).toString();const Xo=new u(r.value).div(new u(T.value)).mul(100);k.value=qo,mo.value=J.toString(),b.value=Xo.toNumber()}},mo=h(),wo=y(()=>{var t;return(t=n==null?void 0:n.value)==null?void 0:t.amountA}),yo=y(()=>{var t;return(t=n==null?void 0:n.value)==null?void 0:t.amountB}),N=h(!1),to=h(!1),Vo=y(()=>{var q,U,B,J;const t=(U=ko.value[(q=l==null?void 0:l.value)==null?void 0:q.address])==null?void 0:U.price,S=(J=ko.value[(B=l==null?void 0:l.value)==null?void 0:B.address])==null?void 0:J.price;let G;return t&&S&&(N.value||to.value?G=new u(N.value?g.value:f.value).mul(new u(N.value?t:S)).toString():G=new u(g.value).mul(new u(t)).add(new u(f.value).mul(new u(S))).toString()),G>0&&G<.01?"<$0.01":`$${M(io(G,2))}`}),bo=async t=>{if(!C.value)return;C.value=!0,n.value.token_a.decimals,n.value.token_b.decimals;const S=n.value.tick_lower_index,G=n.value.tick_upper_index;Ho.tickIndexToSqrtPriceX64(S),Ho.tickIndexToSqrtPriceX64(G);let q="",U,B;console.log(t.value,"##item.value"),console.log(B,"##coinAmount");let J=Y.value;if(console.log("执行##"),N.value||to.value){if(N.value){const Q=new u(lo.value).mul(Math.pow(10,l.value.decimals)).mul(t.value).toString();console.log(Q,"##amount"),B=io(Q,0),g.value=new u(lo.value).mul(t.value).toString()}if(to.value){const Q=new u(lo.value).mul(t.value).mul(Math.pow(10,m.value.decimals)).toString();B=io(Q,0),f.value=new u(lo.value).mul(t.value).toString()}const K=await V.calculateRemoveSwapAmount({lowerTick:S,upperTick:G,curSqrtPrice:new E(n.value.current_sqrt_price),fix_amount_a:J,receiveAmount:B,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address});if(console.log(K,"###swapResult"),K){new E(K.afterSqrtPrice),B=new E(K.swapOutAmount),n.value.current_sqrt_price,vo.value={swap_amount:K.swapInAmount,liquidity:K.liquidity,a2b:!J},J=!J;const Q=n.value.token_a.decimals,qo=n.value.token_b.decimals,Xo=new u(K.swapInAmount).div(new u(Math.pow(10,Q))).toString(),x=new u(K.swapOutAmount).div(new u(Math.pow(10,qo))).toString(),Bo=$.value?n.value.token_b.symbol:n.value.token_a.symbol,Oo=$.value?n.value.token_a.symbol:n.value.token_b.symbol;P.value=`To withdraw ${N.value?g.value:f.value} ${N.value?Bo:Oo}, 
          ${Xo} ${N.value?Bo:Oo}  in the pool will be traded for ${x} ${N.value?Oo:Bo}`,q=K.liquidity}else n.value.current_sqrt_price,B=new E(B);k.value=ae.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},q),r.value=new u(k.value).div(Math.pow(10,n.value.lpInfo.decimals)),mo.value=q}else{const K=new u(wo.value).mul(Math.pow(10,l.value.decimals)).mul(t.value).toString();B=io(K,0),g.value=new u(wo.value).mul(t.value).toString();const Q=new u(yo.value).mul(t.value).mul(Math.pow(10,m.value.decimals)).toString();B=io(Q,0),f.value=new u(yo.value).mul(t.value).toString(),n.value.current_sqrt_price,B=new E(B),t.value!==1?U=new u(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(t.value).toString():U=new u(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),r.value=new u(U).div(Math.pow(10,n.value.lpInfo.decimals)),q=ae.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},U),k.value=io(U,0),mo.value=io(q,0)}};po(b,qe((t,S)=>{t!==S&&(Number(t)>100?b.value=100:t&&n.value?(console.log("687===>"),b.value=t,bo({value:b.value/100})):(g.value="--",f.value="--"))},300)),po(()=>g.value,(t,S)=>{t?ho():f.value=""},{immediate:!0}),po(()=>f.value,(t,S)=>{t?ho():g.value=""},{immediate:!0});const Eo=Be(),{setIsShowSuccess:So,setIsShowRejected:go,setIsShowWaiting:$o,setTransactionDesc:To,setTransactionTxid:Ro,setPositiomNum:Wo,setTransactionDescText:jo}=X,eo=h(!1),{t:ao}=ye(),Ko=async()=>{var qo,Xo;eo.value=!0,Ro("");const t=Number(g.value)>0?`${M(g.value,l.value.decimals)} ${l.value.symbol}`:"",S=Number(f.value)>0?`${M(f.value,m.value.decimals)} ${m.value.symbol}`:"";console.log(t,S,"###transactionDescTo"),To(ao("tips.removeLiquidiyText",{from:$.value?S:t,and:Number(g.value)>0&&Number(f.value)>0?"and":"",to:$.value?t:S})),$o(!0);const G=ao("modal.removeLiquidityText2");jo(G);const q=n.value.autoPoolPositionInfo.tick_lower_index,U=n.value.autoPoolPositionInfo.tick_upper_index,B=Ho.tickIndexToSqrtPriceX64(q),J=Ho.tickIndexToSqrtPriceX64(U),K=n.value.rewarderInfo.map(x=>x.coinAddress);console.log(mo.value,k.value,"##liquidityVal.value");let Q;Y.value?Q=new u(g.value).mul(Math.pow(10,l.value.decimals)).toString():Q=new u(f.value).mul(Math.pow(10,m.value.decimals)).toString();try{const x={lowerSqrtPrice:B,upperSqrtPrice:J,lpTokenAmount:new E(k.value),liquidity:new E(mo.value),curSqrtPrice:new E(n.value.object.current_sqrt_price),slippage:Number(j.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.pool,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:K,swapParams:vo.value,fix_amount_a:Y.value,isOnlyA:N.value,isOnlyB:to.value,lowerTick:q,upperTick:U,receiveAmount:Q},Bo=await V.remove(x),Oo=await s.value.currentWallet.signAndExecuteTransactionBlock(Bo);let Co=R.value.handleTx(Oo);if(console.log("0331###remove###tx####",Co),Co&&Co.hash){Ro(Co.hash),$o(!1),So(!0);const Qo={title:ao("common.removeLiquidity"),desc:"",hash:Co.hash,descTransactions:`Remove ${t} ${Number(g.value)>0&&Number(f.value)>0?"and":""} ${S} from the pool`,sender:s.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${g.value} ${(qo=l.value)==null?void 0:qo.symbol} and ${f.value} ${(Xo=m.value)==null?void 0:Xo.symbol}`};Qo.res=Co.res,R.value.showTransitionPending(Qo),await R.value.watchTransaction(Qo)&&(g.value="",f.value="",r.value="",b.value=0,setTimeout(()=>{v.updatePositionItem(n.value.id),R.value.getAccount(s.value.address)},1e3),Number(b.value)==100&&i.name=="auto-pool-detail"&&Eo.push("/pool/auto"))}else $o(!1),go(!0);eo.value=!1}catch(x){console.log("Remove error",x),eo.value=!1,$o(!1),go(!0)}};po(()=>n.value,(t,S)=>{t&&!No(t)&&(l.value=t==null?void 0:t.token_a,m.value=t==null?void 0:t.token_b,console.log("触发###"),(!S||S&&S.address!==t.address)&&bo({value:b.value/100}))},{immediate:!0});const c=y(()=>{const t=Number(r.value)>Number(T.value);return!r.value||r.value<=0?ao("button.enterAmount"):t?"Invalid Amount":ao("button.remove")}),A=y(()=>{const t=Number(r.value)>Number(T.value);return!!(!r.value||r.value<=0||t)}),H=t=>(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||Yo("/image/coins/sui-unknown.png"),D=t=>{g.value="",f.value="",C.value=!0,t=="only-a"?(N.value=!N.value,to.value=!1,Y.value=!0):(to.value=!to.value,N.value=!1,Y.value=!1)},so=t=>{C.value=!0,b.value=100,t==="fromCoin"?Y.value=!0:Y.value=!1},Z=t=>{C.value=!0,b.value=50,t==="fromCoin"?Y.value=!0:Y.value=!1},lo=h(),ro=async()=>{const t=n.value.autoPoolPositionInfo.tick_lower_index,S=n.value.autoPoolPositionInfo.tick_upper_index,G=!1,q=n.value.token_a.decimals,U=n.value.token_b.decimals,B=new u(wo.value).mul(new u(Math.pow(10,q))).toString(),J=new u(yo.value).mul(new u(Math.pow(10,U))).toString(),K=N.value?J:B;if(console.log(K,"##receiveAmount"),N.value||to.value){const Q=await V.calculateRemoveSwapAmount({lowerTick:t,upperTick:S,curSqrtPrice:new E(n.value.current_sqrt_price),fix_amount_a:G,receiveAmount:K,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address});console.log(Q.swapOutAmount,B,J,"775##"),lo.value=new u(Q.swapOutAmount).add(new u(N.value?B:J)).div(new u(Math.pow(10,N.value?q:U))).toString(),console.log(Q,"##swapResult"),bo({value:b.value/100}),console.log(lo.value,"onlyTokenBalance##")}};return po(()=>[N.value,to.value,g.value,f.value],([t,S])=>{(t||S)&&ro()},{immediate:!0}),{removeLiquidityBtnText:c,removeLiquidityBtnDisabled:A,wallet:s,ratioArr:I,positionInfo:n,isShowRemoveModal:p,needReverse:$,fromCoin:l,toCoin:m,lpAmount:r,lpBalance:T,sliderVal:b,sFixD:io,isSlider:C,fromCoinAmount:g,toCoinAmount:f,setPercent:bo,toRemove:Ko,addCommom:M,getCoinIcon:H,isOnlyA:N,isOnlyB:to,onlyToken:D,fixedFromCoin:Y,maxBtnSelect:so,halfBtnSelect:Z,fromCoinBlance:wo,toCoinBlance:yo,showFromCoinLock:L,showToCoinLock:z,removeText:P,onlyTokenBalance:lo,totalWithdraw:Vo,formatter:t=>`${t}%`}}});const ee=o=>(Go("data-v-d84181b9"),o=o(),Zo(),o),gs={class:"auto-pool-add"},ks={class:"auto-pool-add-content"},hs={class:"liquidity-action-tab"},ws=ee(()=>e("div",{class:"remove tab-active"},"Remove",-1)),$s={class:"only-token"},Is=ee(()=>e("div",null,"Deposit Amounts",-1)),Cs={key:0},As={key:0},Ps={key:0,class:"card-item"},Ss={key:1,class:"card-item"},Ts={class:"remove-ratio"},Rs={class:"remove-ratio-select"},qs={key:0,class:"ratio"},Bs={key:1,class:"ratio"},Os={class:"ratio-list"},Ns=["onClick"],Ms=ee(()=>e("span",null,"Pool Closed",-1)),Ls={class:"remove-info"},Ds={key:0,class:"remove-text"},Us={class:"total-amount"},Fs=ee(()=>e("span",null,"Total Withdraw",-1)),Vs={class:"total-amount"},Es=ee(()=>e("span",null,"LP Burn Amount",-1)),Ws={key:0},js={key:1};function Xs(o,s,X,W,j,w){var n,$,l,m,p,r,T,C,R,V,g,f,k,L,z,vo,Y;const I=ke,b=he,i=Me,v=ge,a=$e;return _(),O("div",gs,[e("div",ks,[e("div",hs,[e("div",{class:"increase",onClick:s[0]||(s[0]=be(P=>o.$emit("changeCurrentTab"),["stop"]))},"Add"),ws]),e("div",$s,[Is,e("div",null,[e("div",{class:"only-a",onClick:s[1]||(s[1]=P=>o.onlyToken("only-a"))},[e("p",null,[o.isOnlyA?(_(),O("span",Cs)):no("",!0)]),e("span",null,d(o.needReverse?(m=(l=o.positionInfo)==null?void 0:l.token_b)==null?void 0:m.symbol:($=(n=o.positionInfo)==null?void 0:n.token_a)==null?void 0:$.symbol)+" only",1)]),e("div",{class:"only-b",onClick:s[2]||(s[2]=P=>o.onlyToken("only-b"))},[e("p",null,[o.isOnlyB?(_(),O("span",As)):no("",!0)]),e("span",null,d(o.needReverse?(C=(T=o.positionInfo)==null?void 0:T.token_a)==null?void 0:C.symbol:(r=(p=o.positionInfo)==null?void 0:p.token_b)==null?void 0:r.symbol)+" only",1)])])]),e("div",{class:ue(o.needReverse?"card-container reverse":"card-container")},[(o.needReverse?!o.isOnlyA:!o.isOnlyB)?(_(),O("div",Ps,[oo(I,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":s[3]||(s[3]=P=>o.fromCoinAmount=P),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.isOnlyA?o.onlyTokenBalance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,"amount-leabl":"Available",onOnMax:s[4]||(s[4]=P=>o.maxBtnSelect("fromCoin")),onOnHalf:s[5]||(s[5]=P=>o.halfBtnSelect("fromCoin")),onOnInput:s[6]||(s[6]=P=>{o.isSlider=!1,o.fromCoinAmount=P}),onOnFocus:s[7]||(s[7]=()=>{o.isSlider=!1,o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock?(_(),uo(b,{key:0})):no("",!0)])):no("",!0),(o.needReverse?!o.isOnlyB:!o.isOnlyA)?(_(),O("div",Ss,[oo(I,{modelValue:o.toCoinAmount,"onUpdate:modelValue":s[8]||(s[8]=P=>o.toCoinAmount=P),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.isOnlyB?o.onlyTokenBalance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,"amount-leabl":"Available",onOnMax:s[9]||(s[9]=P=>o.maxBtnSelect("toCoin")),onOnHalf:s[10]||(s[10]=P=>o.halfBtnSelect("toCoin")),onOnInput:s[11]||(s[11]=P=>{o.isSlider=!1,o.toCoinAmount=P}),onOnFocus:s[12]||(s[12]=()=>{o.isSlider=!1,o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock?(_(),uo(b,{key:0})):no("",!0)])):no("",!0)],2),e("div",Ts,[e("div",Rs,[Number(o.lpBalance)>=Number(o.lpAmount)?(_(),O("div",qs,d(o.sliderVal>0&&Number(("sFixD"in o?o.sFixD:F(io))(o.sliderVal,2))<.01?"<0.01":("sFixD"in o?o.sFixD:F(io))(o.sliderVal,2))+"% ",1)):(_(),O("div",Bs,"--")),e("div",Os,[(_(!0),O(Oe,null,Ne(o.ratioArr,(P,_o)=>(_(),O("div",{key:_o,class:ue(["ratio-item",o.sliderVal==P.value?"ratio-item-active":""]),onClick:()=>{o.isSlider=!0,o.sliderVal=P.value}},d(P.name),11,Ns))),128))])]),oo(i,{value:o.sliderVal,"onUpdate:value":s[13]||(s[13]=P=>o.sliderVal=P),"tip-formatter":o.formatter},null,8,["value","tip-formatter"])])]),(R=o.positionInfo)!=null&&R.is_pause?(_(),uo(v,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:zo(()=>[Ms]),_:1})):o.wallet.connected?(_(),uo(v,{key:1,class:"big-btn liquidity-btn",disabled:o.removeLiquidityBtnDisabled,onClick:o.toRemove},{default:zo(()=>[e("span",null,d(o.removeLiquidityBtnText),1)]),_:1},8,["disabled","onClick"])):(_(),uo(v,{key:2,class:"big-btn",onClick:s[14]||(s[14]=P=>o.wallet.setIsShowWalletModal(!0))},{default:zo(()=>[e("span",null,d(o.$t("button.connectWallet")),1)]),_:1})),e("div",Ls,[o.isOnlyA||o.isOnlyB?(_(),O("div",Ds,d(o.removeText),1)):no("",!0),e("div",Us,[Fs,e("span",null,d(o.totalWithdraw),1)]),e("div",Vs,[Es,o.fromCoinAmount||o.toCoinAmount?(_(),O("span",Ws,d(("addCommom"in o?o.addCommom:F(M))(o.lpAmount))+" "+d(o.needReverse?(V=o.toCoin)==null?void 0:V.symbol:(g=o.fromCoin)==null?void 0:g.symbol)+"-"+d(o.needReverse?(f=o.fromCoin)==null?void 0:f.symbol:(k=o.toCoin)==null?void 0:k.symbol),1)):(_(),O("span",js,d(("addCommom"in o?o.addCommom:F(M))(o.lpAmount))+" "+d(o.needReverse?(L=o.toCoin)==null?void 0:L.symbol:(z=o.fromCoin)==null?void 0:z.symbol)+"-"+d(o.needReverse?(vo=o.fromCoin)==null?void 0:vo.symbol:(Y=o.toCoin)==null?void 0:Y.symbol),1))])]),o.isShowRemoveModal?(_(),uo(a,{key:3,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,onOnClose:s[15]||(s[15]=P=>o.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):no("",!0)])}const Hs=Fo(bs,[["render",Xs],["__scopeId","data-v-d84181b9"]]),zs=Do({components:{AutoPoolV2Info:Ie,AutoPoolV2PositionRange:Ce,AutoPoolV2PoolComposition:Ae,AutoPoolV2PoolLiquidity:Pe,AutoPoolV2PoolAdd:ys,AutoPoolV2PoolRemove:Hs},setup(){const o=Lo(),s=Mo(),X=le(),W=y(()=>X),j=()=>{o.getAutoPoolAPY(),o.getAutoPoolList(),s.setPoolConfigList(W.value.chainName,W.value.filterCoinsObj)},w=h(),I=Uo();return po(()=>I.query.action,b=>{b&&(w.value=b)},{immediate:!0}),{clickRefresh:j,currentTab:w}}});const Ys={class:"auto-pool-detail-v2"},Gs={class:"detail-top"},Zs={class:"detail-bottom pc-detail"},Js={class:"detail-bottom-left"},Ks={class:"detail-bottom-right"},Qs={class:"h5-detail"};function xs(o,s,X,W,j,w){const I=Se,b=Ie,i=Ce,v=Ae,a=Pe,n=me("AutoPoolV2PoolAdd"),$=me("AutoPoolV2PoolRemove");return _(),O("div",Ys,[e("div",Gs,[oo(I,{onClickRefresh:o.clickRefresh},null,8,["onClickRefresh"]),oo(b)]),e("div",Zs,[e("div",Js,[oo(i),oo(v),oo(a)]),e("div",Ks,[o.currentTab=="add"?(_(),uo(n,{key:0,onChangeCurrentTab:s[0]||(s[0]=l=>o.currentTab="remove")})):(_(),uo($,{key:1,onChangeCurrentTab:s[1]||(s[1]=l=>o.currentTab="add")}))])]),e("div",Qs,[o.currentTab=="add"?(_(),uo(n,{key:0,onChangeCurrentTab:s[2]||(s[2]=l=>o.currentTab="remove")})):(_(),uo($,{key:1,onChangeCurrentTab:s[3]||(s[3]=l=>o.currentTab="add")})),oo(i),oo(v),oo(a)])])}const Il=Fo(zs,[["render",xs],["__scopeId","data-v-b226cf01"]]);export{Il as default};
