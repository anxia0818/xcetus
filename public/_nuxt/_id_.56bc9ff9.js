import{_ as rn}from"./back.115e77ec.js";import{_ as dn}from"./refresh-icon.6fcefd95.js";import{a as je,a1 as Ho,y as Ao,r as w,af as vn,e as Ve,Q as to,o as l,c as Z,w as ue,h as o,i as M,j as Ue,v as m,f as y,F as Ye,E as co,A as Te,x as z,ag as mn,I as cn,B as Co,p as Xe,k as ze,H as po,K as Po,l as k,q as _e,b as To,m as eo,s as qo,t as Ee,u as A,P as Eo,G as Wo,O as $o,D as vo,C as pn,L as fn,z as jo,M as Xo,S as gn}from"./entry.59a2cdcc.js";/* empty css              */import{a as yn,b as bn,_ as kn}from"./icon-error_2x.bc5af7b3.js";import{u as Qe,a as zo}from"./autoPool.fcec4a43.js";import{u as oo,c as Ke,a as R,g as Io,d as Le,s as q,T as We,b as ce,p as Vo,e as Go,f as hn,V as So}from"./pool.acb16d99.js";import{_ as fo}from"./token-warning.a0600be1.js";import{_ as Yo}from"./auto-pool-apy-tips.d0a63fef.js";/* empty css              */import{u as go,a as yo}from"./sha256.fbf47686.js";import{i as ro}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as Ko}from"./assets-card.1b55e1a1.js";import{_ as Qo}from"./coin-lock.b36d7006.js";import{_ as Zo,a as Jo}from"./auto-pool-remove-modal.a3a52385.js";/* empty css              */import{D as u}from"./decimal.0bdeb344.js";/* empty css              */import{u as _n}from"./swapRouter.becbc895.js";/* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.51d46539.js";const wn=je({components:{Modal:Ho},setup(e,s){const{t:G,locale:Y}=Ao(),N=Qe(),P=["0.1","0.5","1"],c=w(N.slippage||.1),{setSlippage:T}=N,$=vn();console.log(c.value,"slippage.value");const a=w(!1);function t(n,v){a.value=!1,c.value=v}function S(){T(c.value),s.emit("onClose",!1)}return{settingArr:P,changeActiveIndex:t,confirm:S,emit:$,slippage:c,t:G,isInput:a,inputChange:n=>{const v=new RegExp(/[^\d^\.]+/g);n.target.value=n.target.value.replace(v,""),c.value=n.target.value}}}});const xo=e=>(Xe("data-v-c5b99de4"),e=e(),ze(),e),$n=xo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),In={class:"setting-container"},Sn={class:"title"},An=xo(()=>o("img",{src:kn,alt:""},null,-1)),Cn={class:"tag-list"},Pn={key:0,src:yn,alt:""},Tn={key:1,src:bn,alt:""},qn={class:"footer"};function Nn(e,s,G,Y,N,P){const c=mn,T=cn,$=Co,a=to("Modal");return l(),Z(a,{title:"Settings",class:"setting",centered:"",visible:!0,width:"400px",onCancel:s[3]||(s[3]=t=>e.$emit("onClose"))},{closeIcon:ue(()=>[$n]),footer:ue(()=>[o("div",qn,[M($,{type:"cancel",class:"cancel-btn cancel-btn-new",onClick:s[2]||(s[2]=t=>e.$emit("onClose"))},{default:ue(()=>[Ue(m(e.$t("button.cancel")),1)]),_:1}),M($,{class:"confirmbtn",disabled:Number(e.slippage)==0||Number(e.slippage)>1||Number(e.slippage)<.01,onClick:e.confirm},{default:ue(()=>[Ue(m(e.$t("button.confirm")),1)]),_:1},8,["disabled","onClick"])])]),default:ue(()=>[o("div",In,[o("div",Sn,[An,o("span",null,m(e.$t("modal.slippageTolerance")),1)]),o("div",Cn,[(l(!0),y(Ye,null,co(e.settingArr,(t,S)=>(l(),Z(c,{key:S,class:Te(!e.isInput&&t==e.slippage?"tag-active":""),onClick:f=>e.changeActiveIndex(S,t)},{default:ue(()=>[Ue(m(t)+"% ",1)]),_:2},1032,["class","onClick"]))),128)),M(c,{class:Te(["input-tag",e.isInput?"tag-active":""]),onClick:s[1]||(s[1]=t=>e.isInput=!0)},{default:ue(()=>[M(T,{value:e.slippage,"onUpdate:value":s[0]||(s[0]=t=>e.slippage=t),placeholder:"",suffix:"%",class:Te(["slippage-input",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-input-waring":Number(e.slippage)>1?"slippage-input-error":""]),onChange:e.inputChange},null,8,["value","class","onChange"])]),_:1},8,["class"])])]),Number(e.slippage)>.5&&Number(e.slippage)<1||Number(e.slippage)>1?(l(),y("div",{key:0,class:Te(["slippage-hint",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-hint-waring":Number(e.slippage)>1?"slippage-hint-error":""])},[Number(e.slippage)>.5&&1>=Number(e.slippage)?(l(),y("img",Pn)):z("",!0),Number(e.slippage)>1?(l(),y("img",Tn)):z("",!0),o("p",null,m(Number(e.slippage)>.5&&1>=Number(e.slippage)?e.$t("tips.slippageTolerance2"):Number(e.slippage)>1?e.$t("tips.slippageTolerance1"):""),1)],2)):z("",!0)]),_:1})}const Rn=Ve(wn,[["render",Nn],["__scopeId","data-v-c5b99de4"]]),Bn=je({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,s){const G=w(!1),Y=w(null),N=w(0);let P=w(!1);const c=w(20);oo();const T=Qe(),$=w(!1);po(()=>{}),Po(()=>{clearInterval(Y.value)});const a=()=>{P.value=!1,Y.value=setInterval(()=>{var d;$.value||N.value<c.value&&(N.value+=1,N.value===c.value&&((d=e==null?void 0:e.poolInfo)!=null&&d.address&&f(),N.value=0))},1e3)},t=k(()=>T.slippage),S=()=>{s.emit("clearAll")},f=()=>{P.value||(P.value=!0,N.value=0,s.emit("clickRefresh"),setTimeout(()=>{P.value=!1},1e3))};_e(()=>e.poolInfo,d=>{d&&!Y.value&&a()},{immediate:!0});const n=To(),v=eo();return console.log(v,"route"),{refresh:P,clickRefresh:f,isShowSwapSetting:G,countdown:N,autoRefreshTime:c,slippage:t,clearAll:S,checkNullObj:Ke,router:n,route:v}}});const Dn=e=>(Xe("data-v-71491a33"),e=e(),ze(),e),Ln={class:"title"},Un={class:"left"},On=Dn(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Mn={key:0,class:"deposit-progress"};function Fn(e,s,G,Y,N,P){const c=rn,T=dn,$=Rn;return l(),y("div",Ln,[o("div",Un,[M(c)]),o("div",{class:Te(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[o("div",{class:"slippage-icon",onClick:s[0]||(s[0]=a=>e.isShowSwapSetting=!0)},[On,o("span",null,m(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(l(),y("div",Mn,[M(T,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):z("",!0)],2),e.isShowSwapSetting?(l(),Z($,{key:0,onOnClose:s[1]||(s[1]=a=>e.isShowSwapSetting=!1)})):z("",!0)])}const Vn=Ve(Bn,[["render",Fn],["__scopeId","data-v-71491a33"]]),Hn=je({components:{AutoPoolApyTips:Yo},setup(){const e=go(),s=k(()=>e),G=oo(),Y=k(()=>G),N=Qe(),P=k(()=>N),c=k(()=>s.value.theme),T=eo(),$=w();_e(()=>[P.value.positionInfoObj,T.params.id],([v,d])=>{v&&!Ke(v)&&d&&($.value=v[d],console.log($.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const a=k(()=>{var v;return(v=$.value)==null?void 0:v.needReverse}),t=v=>{var d;return(v==null?void 0:v.logoURI)||(v==null?void 0:v.logo_url)||((d=Y.value.tokensObj[v==null?void 0:v.address])==null?void 0:d.logo_url)||(c.value==="default"?ro("/image/coins/unknown.png"):ro("/image/coins/sui-unknown.png"))},S=k(()=>{var v,d;return console.log((v=$==null?void 0:$.value)==null?void 0:v.poolUSD,"##positionInfo?.value?.poolUSD"),(d=$==null?void 0:$.value)==null?void 0:d.poolUSD}),f=k(()=>{var v,d;return P.value.apyObj&&((d=P.value.apyObj[(v=$.value)==null?void 0:v.id])==null?void 0:d.apr)||"--"}),n=k(()=>s.value.currentExplorer);return{positionInfo:$,needReverse:a,getCoinIcon:t,tvl:S,apy:f,addCommom:R,getExplorerUrl:Io,currentExplorer:n}}});const Fe=e=>(Xe("data-v-d4b397f3"),e=e(),ze(),e),En={class:"auto-pool-v2-info"},Wn={class:"pool-info"},jn={class:"left"},Xn={class:"coin-a"},zn={alt:""},Gn={class:"coin-b"},Yn={alt:""},Kn={class:"position-name"},Qn={key:0,class:"pool-fee"},Zn=Fe(()=>o("span",null,"Fee tier",-1)),Jn={class:"vault-address"},xn=["href"],et=Fe(()=>o("span",null,"Vault Address",-1)),ot=Fe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),nt=[et,ot],tt={class:"apy-and-tvl"},st={class:"apy"},it=Fe(()=>o("div",{class:"apy-title"},"APY",-1)),lt={class:"apy-text"},at={class:"reward-coin"},ut=Fe(()=>o("div",{class:"reward"},"Rewards",-1)),rt={class:"right"},dt={alt:""},vt={class:"tvl"},mt=Fe(()=>o("div",{class:"tvl-title"},"TVL",-1)),ct={class:"tvl-text"},pt={class:"pool-info h5-pool-info"},ft={class:"left"},gt={class:"coin-a"},yt={alt:""},bt={class:"coin-b"},kt={alt:""},ht={class:"position-name"},_t={key:0,class:"pool-fee"},wt=Fe(()=>o("span",null,"Fee tier",-1)),$t={class:"left"},It={class:"vault-address"},St=["href"],At=Fe(()=>o("span",null,"Vault Address",-1)),Ct=Fe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),Pt=[At,Ct],Tt={class:"apy-and-tvl"},qt={class:"apy"},Nt=Fe(()=>o("div",{class:"apy-title"},"APY",-1)),Rt={class:"apy-text"},Bt={class:"reward-coin"},Dt=Fe(()=>o("div",{class:"reward"},"Rewards",-1)),Lt={class:"right"},Ut={alt:""},Ot={class:"tvl"},Mt=Fe(()=>o("div",{class:"tvl-title"},"TVL",-1)),Ft={class:"tvl-text"};function Vt(e,s,G,Y,N,P){var t,S,f,n,v,d,h,I,r,L,F,W,ee,re,te,_,b,K,se,ie,de,j,oe,ge,ye,ve,C,D,pe,le,fe,g,J,Ce,ke,Oe,qe,Re,we,Pe,no,so,io,Ge,Ne,lo;const c=fo,T=Yo,$=Eo,a=qo("image");return l(),y("div",En,[o("div",Wn,[o("div",jn,[o("div",Xn,[Ee(o("img",zn,null,512),[[a,e.needReverse?e.getCoinIcon((S=e.positionInfo)==null?void 0:S.token_b):e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_a)]]),M(c,{address:e.needReverse?(d=(v=e.positionInfo)==null?void 0:v.token_b)==null?void 0:d.address:(n=(f=e.positionInfo)==null?void 0:f.token_a)==null?void 0:n.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Gn,[Ee(o("img",Yn,null,512),[[a,e.needReverse?e.getCoinIcon((I=e.positionInfo)==null?void 0:I.token_a):e.getCoinIcon((h=e.positionInfo)==null?void 0:h.token_b)]]),M(c,{address:e.needReverse?(W=(F=e.positionInfo)==null?void 0:F.token_a)==null?void 0:W.address:(L=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:L.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Kn,m(e.needReverse?(re=(ee=e.positionInfo)==null?void 0:ee.token_b)==null?void 0:re.symbol:(_=(te=e.positionInfo)==null?void 0:te.token_a)==null?void 0:_.symbol)+" - "+m(e.needReverse?(K=(b=e.positionInfo)==null?void 0:b.token_a)==null?void 0:K.symbol:(ie=(se=e.positionInfo)==null?void 0:se.token_b)==null?void 0:ie.symbol),1),(de=e.positionInfo)!=null&&de.fee?(l(),y("div",Qn,[Zn,Ue(" "+m(((j=e.positionInfo)==null?void 0:j.fee)*100)+"% ",1)])):z("",!0),o("div",Jn,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:A(Io))(e.currentExplorer,"poolAddress",(oe=e.positionInfo)==null?void 0:oe.id),target:"_blank"},nt,8,xn)])]),o("div",tt,[o("div",st,[it,o("div",lt,[Ue(m(e.apy)+" ",1),M(T)])]),o("div",at,[ut,M($,{"overlay-class-name":"reward-coin-tips"},{title:ue(()=>[Ue("Rewards will be auto harvested and compounded to your position.")]),default:ue(()=>{var He;return[o("div",rt,[(l(!0),y(Ye,null,co((He=e.positionInfo)==null?void 0:He.rewardList,Me=>(l(),y("div",{key:Me,class:"coin-a"},[Ee(o("img",dt,null,512),[[a,e.getCoinIcon({address:Me})]]),M(c,{address:Me,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1})]),o("div",vt,[mt,o("div",ct,"$"+m(("addCommom"in e?e.addCommom:A(R))(e.tvl,2)),1)])])]),o("div",pt,[o("div",ft,[o("div",gt,[Ee(o("img",yt,null,512),[[a,e.needReverse?e.getCoinIcon((ye=e.positionInfo)==null?void 0:ye.token_b):e.getCoinIcon((ge=e.positionInfo)==null?void 0:ge.token_a)]]),M(c,{address:e.needReverse?(pe=(D=e.positionInfo)==null?void 0:D.token_b)==null?void 0:pe.address:(C=(ve=e.positionInfo)==null?void 0:ve.token_a)==null?void 0:C.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",bt,[Ee(o("img",kt,null,512),[[a,e.needReverse?e.getCoinIcon((fe=e.positionInfo)==null?void 0:fe.token_a):e.getCoinIcon((le=e.positionInfo)==null?void 0:le.token_b)]]),M(c,{address:e.needReverse?(ke=(Ce=e.positionInfo)==null?void 0:Ce.token_a)==null?void 0:ke.address:(J=(g=e.positionInfo)==null?void 0:g.token_b)==null?void 0:J.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",ht,m(e.needReverse?(qe=(Oe=e.positionInfo)==null?void 0:Oe.token_b)==null?void 0:qe.symbol:(we=(Re=e.positionInfo)==null?void 0:Re.token_a)==null?void 0:we.symbol)+" - "+m(e.needReverse?(no=(Pe=e.positionInfo)==null?void 0:Pe.token_a)==null?void 0:no.symbol:(io=(so=e.positionInfo)==null?void 0:so.token_b)==null?void 0:io.symbol),1),(Ge=e.positionInfo)!=null&&Ge.fee?(l(),y("div",_t,[wt,Ue(" "+m(((Ne=e.positionInfo)==null?void 0:Ne.fee)*100)+"% ",1)])):z("",!0)]),o("div",$t,[o("div",It,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:A(Io))(e.currentExplorer,"poolAddress",(lo=e.positionInfo)==null?void 0:lo.id),target:"_blank"},Pt,8,St)])]),o("div",Tt,[o("div",qt,[Nt,o("div",Rt,[Ue(m(e.apy)+" ",1),M(T)])]),o("div",Bt,[Dt,M($,{"overlay-class-name":"reward-coin-tips"},{title:ue(()=>[Ue("Rewards will be auto harvested and compounded to your position.")]),default:ue(()=>{var He;return[o("div",Lt,[(l(!0),y(Ye,null,co((He=e.positionInfo)==null?void 0:He.rewardList,Me=>(l(),y("div",{key:Me,class:"coin-a"},[Ee(o("img",Ut,null,512),[[a,e.getCoinIcon({address:Me})]]),M(c,{address:Me,"style-params":{width:"8px",height:"8px",right:"0px",bottom:"0px"}},null,8,["address"])]))),128))])]}),_:1})]),o("div",Ot,[Mt,o("div",Ft,"$"+m(("addCommom"in e?e.addCommom:A(R))(e.tvl,2)),1)])])])])}const en=Ve(Hn,[["render",Vt],["__scopeId","data-v-d4b397f3"]]),Ht=je({components:{Slider:Wo},setup(){const e=w(!0),s=oo(),G=k(()=>s),Y=Qe(),N=k(()=>Y),P=eo(),c=w();_e(()=>[N.value.positionInfoObj,P.params.id],([f,n])=>{f&&!Ke(f)&&n&&(c.value=f[n],console.log(c.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const T=k(()=>{var f;return(f=c.value)==null?void 0:f.needReverse}),$=f=>{var n;return(f==null?void 0:f.logoURI)||(f==null?void 0:f.logo_url)||((n=G.value.tokensObj[f==null?void 0:f.address])==null?void 0:n.logo_url)||ro("/image/coins/sui-unknown.png")},a=k(()=>{var h,I,r,L,F,W,ee;const f=e.value?((h=c.value)==null?void 0:h.minPrice)&&q(c==null?void 0:c.value.minPrice,6):((I=c.value)==null?void 0:I.maxPrice)&&q(1/(c==null?void 0:c.value.maxPrice),6),n=e.value?((r=c.value)==null?void 0:r.maxPrice)&&q((L=c.value)==null?void 0:L.maxPrice,6):((F=c.value)==null?void 0:F.minPrice)&&q(1/(c==null?void 0:c.value.minPrice),6),v=(T.value?!e.value:e.value)?q((W=c.value)==null?void 0:W.price,6):q(1/((ee=c.value)==null?void 0:ee.price),6);let d={};return d[f]={label:"Min Price"},d[n]={label:"Max Price"},v>f&&v<n?d[v]={label:"Current Price"}:v<f?d[Number(f)+1e-9]={label:"Current Price"}:v>n&&(d[Number(n)-1e-9]={label:"Current Price"}),console.log(d,"obj###"),d}),t=k(()=>{var n,v;const f=(T.value?!e.value:e.value)?Le((n=c.value)==null?void 0:n.price,6):Le(1/((v=c.value)==null?void 0:v.price),6);return console.log(f,"result##"),f}),S=k(()=>{var n,v;const f=(T.value?!e.value:e.value)?Le((n=c.value)==null?void 0:n.price,6):Le(1/((v=c.value)==null?void 0:v.price),6);return console.log(f,"result##111"),f});return{direct:e,positionInfo:c,needReverse:T,getCoinIcon:$,decimalUi:Le,addCommom:R,sFixD:q,marks:a,currentPrice:t,currentPriceResever:S}}});const bo=e=>(Xe("data-v-794c305c"),e=e(),ze(),e),Et={class:"v2-position-range"},Wt={class:"position-range-top"},jt=bo(()=>o("div",null,"Position Range",-1)),Xt={class:"base-coin"},zt={key:0},Gt={alt:""},Yt={key:1},Kt={alt:""},Qt={key:2},Zt={key:3},Jt=bo(()=>o("p",null,"Base coin",-1)),xt={class:"coin-rate"},es=bo(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),os=bo(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ns=[es,os],ts={class:"position-range-bottom"},ss={class:"price-range"},is={class:"price-range-bg"},ls={key:0,class:"min-price"},as={key:0},us={key:1},rs={key:1,class:"max-price"},ds={key:0},vs={key:1},ms={key:0,class:"min-price"},cs={key:0},ps={key:1},fs={key:1,class:"max-price"},gs={key:0},ys={key:1};function bs(e,s,G,Y,N,P){var a,t,S,f,n,v,d,h,I,r,L,F,W,ee,re,te,_,b,K,se,ie,de,j,oe,ge,ye,ve,C;const c=fo,T=to("Slider"),$=qo("image");return l(),y("div",Et,[o("div",Wt,[jt,o("div",Xt,[e.needReverse?(l(),y("div",Yt,[Ee(o("img",Kt,null,512),[[$,e.direct?e.getCoinIcon((h=e.positionInfo)==null?void 0:h.token_b):e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_a)]]),M(c,{address:e.direct?(F=(L=e.positionInfo)==null?void 0:L.token_b)==null?void 0:F.address:(r=(I=e.positionInfo)==null?void 0:I.token_a)==null?void 0:r.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(l(),y("div",zt,[Ee(o("img",Gt,null,512),[[$,e.direct?e.getCoinIcon((a=e.positionInfo)==null?void 0:a.token_a):e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_b)]]),M(c,{address:e.direct?(f=(S=e.positionInfo)==null?void 0:S.token_a)==null?void 0:f.address:(v=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:v.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(l(),y("span",Zt,m(e.direct?(b=(_=e.positionInfo)==null?void 0:_.token_b)==null?void 0:b.symbol:(se=(K=e.positionInfo)==null?void 0:K.token_a)==null?void 0:se.symbol),1)):(l(),y("span",Qt,m(e.direct?(ee=(W=e.positionInfo)==null?void 0:W.token_a)==null?void 0:ee.symbol:(te=(re=e.positionInfo)==null?void 0:re.token_b)==null?void 0:te.symbol),1)),Jt,o("div",xt,[o("div",{onClick:s[0]||(s[0]=D=>e.direct=!e.direct)},ns)])])]),o("div",ts,[o("div",ss,[o("div",is,[e.direct?(l(),Z(T,{key:0,value:e.currentPrice,class:Te(["position-slider",e.currentPrice<Number(("sFixD"in e?e.sFixD:A(q))((ie=e.positionInfo)==null?void 0:ie.minPrice,6))||e.currentPrice>Number(("sFixD"in e?e.sFixD:A(q))((de=e.positionInfo)==null?void 0:de.maxPrice,6))?"hide-handler":""]),step:null,marks:e.marks,disabled:!0,min:Number(("decimalUi"in e?e.decimalUi:A(Le))((j=e.positionInfo)==null?void 0:j.minPrice,6)),max:Number(("decimalUi"in e?e.decimalUi:A(Le))((oe=e.positionInfo)==null?void 0:oe.maxPrice,6))},{mark:ue(({label:D})=>{var pe,le,fe,g,J,Ce,ke,Oe,qe,Re,we,Pe;return[D=="Min Price"?(l(),y("div",ls,[o("div",null,m(D),1),e.direct?(l(),y("div",as,m(((pe=e.positionInfo)==null?void 0:pe.minPrice)&&("sFixD"in e?e.sFixD:A(q))((le=e.positionInfo)==null?void 0:le.minPrice,6)),1)):(l(),y("div",us,m(((fe=e.positionInfo)==null?void 0:fe.maxPrice)&&("sFixD"in e?e.sFixD:A(q))(1/((g=e.positionInfo)==null?void 0:g.maxPrice),6)),1))])):z("",!0),D=="Max Price"?(l(),y("div",rs,[o("div",null,m(D),1),e.direct?(l(),y("div",ds,m(((J=e.positionInfo)==null?void 0:J.maxPrice)&&("sFixD"in e?e.sFixD:A(q))((Ce=e.positionInfo)==null?void 0:Ce.maxPrice,6)),1)):(l(),y("div",vs,m(((ke=e.positionInfo)==null?void 0:ke.minPrice)&&("sFixD"in e?e.sFixD:A(q))(1/((Oe=e.positionInfo)==null?void 0:Oe.minPrice),6)),1))])):z("",!0),D=="Current Price"?(l(),y("div",{key:2,class:Te(["current-price",e.currentPrice<Number(("sFixD"in e?e.sFixD:A(q))((qe=e.positionInfo)==null?void 0:qe.minPrice,6))?"current-price-left":e.currentPrice>Number(("sFixD"in e?e.sFixD:A(q))((Re=e.positionInfo)==null?void 0:Re.maxPrice,6))?"current-price-right":""])},[o("div",null,m(D),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(l(),y(Ye,{key:0},[Ue(m(("addCommom"in e?e.addCommom:A(R))(("decimalUi"in e?e.decimalUi:A(Le))((we=e.positionInfo)==null?void 0:we.price,6))),1)],64)):(l(),y(Ye,{key:1},[Ue(m(("addCommom"in e?e.addCommom:A(R))(("decimalUi"in e?e.decimalUi:A(Le))(1/((Pe=e.positionInfo)==null?void 0:Pe.price),6))),1)],64))])],2)):z("",!0)]}),_:1},8,["value","class","marks","min","max"])):(l(),Z(T,{key:1,value:e.currentPriceResever,class:Te(["position-slider",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:A(q))(1/((ge=e.positionInfo)==null?void 0:ge.maxPrice),6))||e.currentPriceResever>Number(("sFixD"in e?e.sFixD:A(q))(1/((ye=e.positionInfo)==null?void 0:ye.minPrice),6))?"hide-handler":""]),step:null,min:Number(("decimalUi"in e?e.decimalUi:A(Le))(1/((ve=e.positionInfo)==null?void 0:ve.maxPrice),6)),max:Number(("decimalUi"in e?e.decimalUi:A(Le))(1/((C=e.positionInfo)==null?void 0:C.minPrice),6)),marks:e.marks,disabled:!0},{mark:ue(({label:D})=>{var pe,le,fe,g,J,Ce,ke,Oe,qe,Re,we,Pe;return[D=="Min Price"?(l(),y("div",ms,[o("div",null,m(D),1),e.direct?(l(),y("div",cs,m(((pe=e.positionInfo)==null?void 0:pe.minPrice)&&("sFixD"in e?e.sFixD:A(q))((le=e.positionInfo)==null?void 0:le.minPrice,6)),1)):(l(),y("div",ps,m(((fe=e.positionInfo)==null?void 0:fe.maxPrice)&&("sFixD"in e?e.sFixD:A(q))(1/((g=e.positionInfo)==null?void 0:g.maxPrice),6)),1))])):z("",!0),D=="Max Price"?(l(),y("div",fs,[o("div",null,m(D),1),e.direct?(l(),y("div",gs,m(((J=e.positionInfo)==null?void 0:J.maxPrice)&&("sFixD"in e?e.sFixD:A(q))((Ce=e.positionInfo)==null?void 0:Ce.maxPrice,6)),1)):(l(),y("div",ys,m(((ke=e.positionInfo)==null?void 0:ke.minPrice)&&("sFixD"in e?e.sFixD:A(q))(1/((Oe=e.positionInfo)==null?void 0:Oe.minPrice),6)),1))])):z("",!0),D=="Current Price"?(l(),y("div",{key:2,class:Te(["current-price current-price-direct",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:A(q))(1/((qe=e.positionInfo)==null?void 0:qe.maxPrice),6))?"current-price-left":e.currentPriceResever>Number(("sFixD"in e?e.sFixD:A(q))(1/((Re=e.positionInfo)==null?void 0:Re.minPrice),6))?"current-price-right":""])},[o("div",null,m(D),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(l(),y(Ye,{key:0},[Ue(m(("addCommom"in e?e.addCommom:A(R))(("decimalUi"in e?e.decimalUi:A(Le))((we=e.positionInfo)==null?void 0:we.price,6))),1)],64)):(l(),y(Ye,{key:1},[Ue(m(("addCommom"in e?e.addCommom:A(R))(("decimalUi"in e?e.decimalUi:A(Le))(1/((Pe=e.positionInfo)==null?void 0:Pe.price),6))),1)],64))])],2)):z("",!0)]}),_:1},8,["value","class","min","max","marks"]))])])])])}const on=Ve(Ht,[["render",bs],["__scopeId","data-v-794c305c"]]),ks=je({components:{Modal:Ho},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const s=k(()=>{var Y,N;const G=Math.ceil(((Y=e.positionInfo)==null?void 0:Y.poolUSD)/((N=e.positionInfo)==null?void 0:N.quoteUSD)*100);return console.log(G,"Pool Capacity Ratio"),Number(G)});return{sFixD:q,addCommom:R,ratio:s}}});const No=e=>(Xe("data-v-78a51262"),e=e(),ze(),e),hs=No(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),_s={class:"deposit-slider"},ws={class:"info-block"},$s=No(()=>o("div",{class:"leabl"},"Current Deposit：",-1)),Is={class:"text"},Ss={class:"info-block"},As=No(()=>o("div",{class:"leabl"},"Max Capacity：",-1)),Cs={class:"text"};function Ps(e,s,G,Y,N,P){const c=to("Modal");return l(),Z(c,{width:"440px",visible:!0,footer:null,title:"Vault Capacity",onCancel:s[0]||(s[0]=T=>e.$emit("onClose"))},{closeIcon:ue(()=>[hs]),default:ue(()=>{var T,$,a,t;return[o("div",_s,[o("div",{class:"current-deposit",style:$o({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",ws,[$s,o("div",Is,m(("addCommom"in e?e.addCommom:A(R))(("sFixD"in e?e.sFixD:A(q))((T=e.positionInfo)==null?void 0:T.currentDeposit,2)))+" "+m(($=e.positionInfo)==null?void 0:$.quoteCoinInfo.symbol),1)]),o("div",Ss,[As,o("div",Cs,m(("addCommom"in e?e.addCommom:A(R))(("sFixD"in e?e.sFixD:A(q))((a=e.positionInfo)==null?void 0:a.quoteUSD,2)))+" "+m((t=e.positionInfo)==null?void 0:t.quoteCoinInfo.symbol),1)])]}),_:1})}const nn=Ve(ks,[["render",Ps],["__scopeId","data-v-78a51262"]]),Ts=je({components:{AutoPoolV2PoolCapacity:nn},setup(){const e=oo(),s=k(()=>e),G=Qe(),Y=k(()=>G),N=eo(),P=w();_e(()=>[Y.value.positionInfoObj,N.params.id],([a,t])=>{console.log(a,"##positionInfoObj"),a&&!Ke(a)&&t&&(P.value=a[t],console.log(P.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const c=k(()=>{var a;return(a=P.value)==null?void 0:a.needReverse}),T=a=>{var t;return console.log(a,"info##"),(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((t=s.value.tokensObj[a==null?void 0:a.address])==null?void 0:t.logo_url)||ro("/image/coins/sui-unknown.png")},$=w(!1);return{needReverse:c,positionInfo:P,getCoinIcon:T,addCommom:R,isShowModal:$}}});const qs=e=>(Xe("data-v-ad8a33e9"),e=e(),ze(),e),Ns={class:"pool-composition"},Rs={class:"pool-composition-top"},Bs=qs(()=>o("span",null,"Vault Composition",-1)),Ds={class:"pool-composition-bottom"},Ls={class:"token-ratio"},Us={class:"before-coin"},Os={alt:""},Ms={class:"after-coin"},Fs={alt:""},Vs={class:"token-num"},Hs={class:"num-box"},Es={class:"num-box"};function Ws(e,s,G,Y,N,P){var a,t,S,f,n,v,d,h,I,r,L,F,W,ee,re,te,_,b,K,se,ie,de,j,oe,ge,ye,ve,C,D;const c=fo,T=nn,$=qo("image");return l(),y("div",Ns,[o("div",Rs,[Bs,Number((a=e.positionInfo)==null?void 0:a.quoteUSD)>0?(l(),y("div",{key:0,class:"pool-capacity",onClick:s[0]||(s[0]=pe=>e.isShowModal=!0)},"Vault Capacity")):z("",!0)]),o("div",Ds,[o("div",Ls,[o("div",Us,[o("div",null,[M(c,{address:e.needReverse?(n=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:n.address:(S=(t=e.positionInfo)==null?void 0:t.token_a)==null?void 0:S.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),Ee(o("img",Os,null,512),[[$,e.needReverse?e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_b):e.getCoinIcon((v=e.positionInfo)==null?void 0:v.token_a)]])]),o("span",null,m((h=e.positionInfo)==null?void 0:h.poolCoinARatio)+"%",1)]),o("div",Ms,[o("span",null,m((I=e.positionInfo)==null?void 0:I.poolCoinBRatio)+"%",1),o("div",null,[Ee(o("img",Fs,null,512),[[$,e.needReverse?e.getCoinIcon((L=e.positionInfo)==null?void 0:L.token_a):e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_b)]]),M(c,{address:e.needReverse?(re=(ee=e.positionInfo)==null?void 0:ee.token_a)==null?void 0:re.address:(W=(F=e.positionInfo)==null?void 0:F.token_b)==null?void 0:W.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",Vs,[o("div",{class:"token-a-bg",style:$o({width:`${(te=e.positionInfo)==null?void 0:te.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:$o({width:`${(_=e.positionInfo)==null?void 0:_.poolCoinBRatio}%`})},null,4),o("div",Hs,[o("div",null,m(("addCommom"in e?e.addCommom:A(R))((b=e.positionInfo)==null?void 0:b.poolCoinANum))+" "+m(e.needReverse?(de=(ie=e.positionInfo)==null?void 0:ie.token_b)==null?void 0:de.symbol:(se=(K=e.positionInfo)==null?void 0:K.token_a)==null?void 0:se.symbol),1),o("div",null,"$"+m(("addCommom"in e?e.addCommom:A(R))((j=e.positionInfo)==null?void 0:j.poolCoinAUSD)),1)]),o("div",Es,[o("div",null,m(("addCommom"in e?e.addCommom:A(R))((oe=e.positionInfo)==null?void 0:oe.poolCoinBNum))+" "+m(e.needReverse?(C=(ve=e.positionInfo)==null?void 0:ve.token_a)==null?void 0:C.symbol:(ye=(ge=e.positionInfo)==null?void 0:ge.token_b)==null?void 0:ye.symbol),1),o("div",null,"$"+m(("addCommom"in e?e.addCommom:A(R))((D=e.positionInfo)==null?void 0:D.poolCoinBUSD)),1)])])]),e.isShowModal?(l(),Z(T,{key:0,"position-info":e.positionInfo,onOnClose:s[1]||(s[1]=pe=>e.isShowModal=!1)},null,8,["position-info"])):z("",!0)])}const tn=Ve(Ts,[["render",Ws],["__scopeId","data-v-ad8a33e9"]]),js=je({setup(){const e=oo(),s=k(()=>e),G=Qe(),Y=k(()=>G),N=eo(),P=w();_e(()=>[Y.value.positionInfoObj,N.params.id],([t,S])=>{console.log(t,"##positionInfoObj"),t&&!Ke(t)&&S&&(P.value=t[S],console.log(P.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const c=k(()=>{var t;return(t=P.value)==null?void 0:t.needReverse}),T=t=>{var S;return console.log(t,"info##"),(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((S=s.value.tokensObj[t==null?void 0:t.address])==null?void 0:S.logo_url)||ro("/image/coins/sui-unknown.png")},$=yo(),a=k(()=>$);return{needReverse:c,positionInfo:P,getCoinIcon:T,addCommom:R,wallet:a}}});const mo=e=>(Xe("data-v-61c3efe6"),e=e(),ze(),e),Xs={class:"my-liquidity"},zs={class:"my-liquidity-top"},Gs=mo(()=>o("div",null,"My Liquidity",-1)),Ys=mo(()=>o("p",null,"My share of pool",-1)),Ks={class:"my-liquidity-bottom"},Qs={class:"lp-token"},Zs=mo(()=>o("div",null,[o("span",null,"LP Token Balance ")],-1)),Js={class:"lp-balance"},xs={class:"token-num-content"},ei={class:"token-num token-a-num"},oi={class:"logo"},ni=["src"],ti={class:"text"},si={class:"lp-logo"},ii=["src"],li=mo(()=>o("div",null,"Pooled Assets",-1)),ai={class:"token-num"},ui={class:"logo"},ri=["src"],di={class:"text"},vi=mo(()=>o("div",{class:"token-num-content-bg"},null,-1));function mi(e,s,G,Y,N,P){var T,$,a,t,S,f,n,v,d,h,I,r,L,F,W,ee,re,te,_,b,K,se,ie,de,j,oe,ge,ye,ve;const c=fo;return l(),y("div",Xs,[o("div",zs,[Gs,o("div",null,[Ys,o("p",null,m(e.wallet.connected?(T=e.positionInfo)==null?void 0:T.myShare:"--")+"%",1)])]),o("div",Ks,[o("div",Qs,[Zs,o("div",null,[o("span",Js,m(e.wallet.connected?("addCommom"in e?e.addCommom:A(R))(($=e.positionInfo)==null?void 0:$.myLiquidity):"--")+" LP",1),o("span",null,m(e.wallet.connected?((a=e.positionInfo)==null?void 0:a.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in e?e.addCommom:A(R))((t=e.positionInfo)==null?void 0:t.myLiquidityUSD)}`:"<$0.01":"--"),1)])]),o("div",xs,[o("div",ei,[o("div",oi,[o("img",{src:e.needReverse?e.getCoinIcon((f=e.positionInfo)==null?void 0:f.token_b):e.getCoinIcon((S=e.positionInfo)==null?void 0:S.token_a),alt:""},null,8,ni),M(c,{address:e.needReverse?(h=(d=e.positionInfo)==null?void 0:d.token_b)==null?void 0:h.address:(v=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:v.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",ti,[o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:A(R))((I=e.positionInfo)==null?void 0:I.amountA):"--")+" "+m(e.needReverse?(W=(F=e.positionInfo)==null?void 0:F.token_b)==null?void 0:W.symbol:(L=(r=e.positionInfo)==null?void 0:r.token_a)==null?void 0:L.symbol),1),o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:A(R))((ee=e.positionInfo)==null?void 0:ee.myAmountAUSD):"--"),1)])]),o("div",si,[o("img",{src:e.getCoinIcon((re=e.positionInfo)==null?void 0:re.lpInfo),alt:""},null,8,ii),li]),o("div",ai,[o("div",ui,[o("img",{src:e.needReverse?e.getCoinIcon((_=e.positionInfo)==null?void 0:_.token_a):e.getCoinIcon((te=e.positionInfo)==null?void 0:te.token_b),alt:""},null,8,ri),M(c,{address:e.needReverse?(ie=(se=e.positionInfo)==null?void 0:se.token_a)==null?void 0:ie.address:(K=(b=e.positionInfo)==null?void 0:b.token_b)==null?void 0:K.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",di,[o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:A(R))((de=e.positionInfo)==null?void 0:de.amountB):"--")+" "+m(e.needReverse?(ye=(ge=e.positionInfo)==null?void 0:ge.token_a)==null?void 0:ye.symbol:(oe=(j=e.positionInfo)==null?void 0:j.token_b)==null?void 0:oe.symbol),1),o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:A(R))((ve=e.positionInfo)==null?void 0:ve.myAmountBUSD):"--"),1)])]),vi])])])}const sn=Ve(js,[["render",mi],["__scopeId","data-v-61c3efe6"]]),ci=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const pi={},ln=e=>(Xe("data-v-fcbc716b"),e=e(),ze(),e),fi={class:"status"},gi=ln(()=>o("img",{src:ci,alt:""},null,-1)),yi=ln(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),bi=[gi,yi];function ki(e,s){return l(),y("div",fi,bi)}const an=Ve(pi,[["render",ki],["__scopeId","data-v-fcbc716b"]]),hi=je({components:{AutoPoolAddModal:Zo,AutoPoolV2PoolStatus:an},setup(){const e=yo(),s=w(!1),G=go(),Y=k(()=>G),N=k(()=>Y.value.chainName),P=k(()=>e),c=Qe(),T=k(()=>c),$=oo(),a=k(()=>$),t=w(),S=eo(),f=w(!1),n=w(!1);_e(()=>[T.value.positionInfoObj,S.params.id],([p,V])=>{p&&!Ke(p)&&V&&(t.value=p[V],console.log(t.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const v=k(()=>{var p,V;return console.log((p=t.value)==null?void 0:p.needReverse,"##positionInfo.value?.needReverse"),(V=t.value)==null?void 0:V.needReverse}),d=w(),h=w(),I=w(),r=w(),L=w(!0),F=k(()=>P.value.assets&&d.value&&P.value.assets[d.value.address]?Vo(P.value.assets[d.value.address].balance,d.value.decimals):0),W=k(()=>P.value.assets&&h.value&&P.value.assets[h.value.address]?Vo(P.value.assets[h.value.address].balance,h.value.decimals):0),ee=p=>{p==="fromCoin"?(L.value=!0,I.value=F.value>0?d.value.symbol=="SUI"?new u(Number(F.value)).sub(new u(.05)).lt(new u(0))?"0":new u(Number(F.value)).sub(new u(.05)).toString():String(F.value):""):(L.value=!1,r.value=W.value>0?h.value.symbol=="SUI"?new u(Number(W.value)).sub(new u(.05)).lt(new u(0))?"0":new u(Number(W.value)).sub(new u(.05)).toString():String(W.value):"")},re=p=>{p==="fromCoin"?(L.value=!0,I.value=F.value>0?q(new u(Number(F.value)).div(2).toString(),d.value.decimals).toString():""):(L.value=!1,r.value=W.value>0?q(new u(Number(W.value)).div(2).toString(),h.value.decimals).toString():"")},te=k(()=>N.value?Go(N.value):{}),_=k(()=>T.value.slippage),b=w("--"),K=w("--"),se=p=>{const V=new u(t.value.autoPoolPositionInfo.liquidity),me=new u(p.toString());if(V.toNumber()>0&&me.toNumber()>0){const U=me.add(V);console.log("totalLiquidity:",me.div(U).mul(100).toString());const $e=me.div(U).mul(100).toNumber(),be=hn($e),i=be==-1?2:be+2,B=q(me.div(U).mul(100).toNumber(),i);console.log(t.value.decimals,"##positionInfo.value.decimal");const ne=new u(1).div(new u(Math.pow(10,t.value.lpInfo.decimals))).toString();console.log(B,ne,"###288"),Number(B)<Number(ne)?b.value=`<${ne}`:b.value=B}else me.toNumber()>0&&V.toNumber()<=0?b.value="100":b.value="--"},ie=p=>{if(t.value.total_supply==0){K.value="";return}const V=new u(p.toString()),me=new u(_.value).div(100);console.log(me.toString(),"#slippageNum");const U=So.get_lp_amount_by_liquidity({liquidity:t.value.liquidity,total_supply:t.value.total_supply},p.toString()),$e=new u(Math.pow(10,t.value.lpInfo.decimals)),be=new u(U).div($e).toString(),i=new u(be).mul(me);console.log(U,i.toString(),"###409");const B=new u(be).sub(i);console.log(B.toString(),"##minLp"),console.log(V.toString(),U,be,"lpDecimalNum##"),K.value=q(B.toString(),t.value.decimals)},de=w(!1),j=w(!1),oe=w(""),ge=w(),ye=w(!1),ve=w(!1),C=w(!1),D=w(!1),pe=async()=>{if(console.log(C.value,D.value,"isOnlyA.value||isOnlyB.value"),console.log(t.value,"positionInfo.value###432"),!t.value)return;if(console.log(I.value,r.value,"####updateAmounts"),t.value.supportHaedalStake&&D.value&&r.value<10){ve.value=!0;return}n.value=!1,ye.value=!0;const p=t.value.autoPoolPositionInfo.tick_lower_index,V=t.value.autoPoolPositionInfo.tick_upper_index,me=We.sqrtPriceX64ToTickIndex(new ce(t.value.current_sqrt_price));We.tickIndexToSqrtPriceX64(p),We.tickIndexToSqrtPriceX64(V),me<p&&(v.value?de.value=!0:j.value=!0),me>V&&(v.value?j.value=!0:de.value=!0);let U;if(console.log(I.value||r.value,"#fromCoinAmount.value || toCoinAmount.value"),I.value||r.value){L.value?U=new u(I.value).mul(Math.pow(10,d.value.decimals)).toString():U=new u(r.value).mul(Math.pow(10,h.value.decimals)).toString();let $e,be=L.value;if(console.log("执行##"),console.log(me,p,V,"###520"),C.value||D.value){const H=new u(1);if(console.log(H.toString(),U,"decimalNum###"),new u(U).lte(H))return n.value=!0,!1;console.log(v.value?L.value:!L.value,"#needReverse.value?fixedFromCoin.value:!fixedFromCoin.value"),console.log(U,"##coinAmount"),console.log("1106###needReverse.value####",v.value),console.log("1106###calculateDepositSwapAmount###params###",{lowerTick:p,upperTick:V,curSqrtPrice:new ce(t.value.current_sqrt_price),fix_amount_a:be,input_amount:U,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number(_.value)/100,decimals:C.value?d.value.decimals:h.value.decimals,use_Haedal_stake:t.value.supportHaedalStake&&D.value,shouldRequestStake:!1});let O;try{O=await Ge.calculateDepositSwapAmount({lowerTick:p,upperTick:V,curSqrtPrice:new ce(t.value.current_sqrt_price),fix_amount_a:be,input_amount:U,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number(_.value)/100,decimals:C.value?d.value.decimals:h.value.decimals,request_id:U,staking_id:t.value.supportHaedalStake&&(D.value&&!t.value.isTokenA||C.value&&t.value.isTokenA)?t.value.staking_id:"",shouldRequestStake:!1})}catch(ae){console.log("calculateDepositSwapAmount",ae)}if(console.log(O,"###swapResult"),console.log("1106###calculateDepositSwapAmount###result###",O),O=="HaedalStakeSuiAmountError"){f.value=!1,ve.value=!0;return}else if(O){if(O.request_id!==U)return;ve.value=!1,f.value=t.value.supportHaedalStake?!1:O.is_exceed,$e=new ce(O.afterSqrtPrice),U=O.fixAmountA===be?new ce(new u(U).sub(O.swapInAmount).toString()):new ce(O.swapOutAmount),ge.value={swap_amount:O.swapInAmount,route_obj:O.route_obj,a2b:be,input_amount:U,staking_id:O.staking_id},be=O.fixAmountA;const ae=t.value.token_a.decimals,X=t.value.token_b.decimals,E=new u(O.swapInAmount).div(new u(Math.pow(10,ae))).toString(),x=q(new u(O.swapOutAmountLimit).div(new u(Math.pow(10,X))).toString(),X),Ie=v.value?t.value.token_b.symbol:t.value.token_a.symbol,he=v.value?t.value.token_a.symbol:t.value.token_b.symbol,Se=`To deposit ${R(C.value?I.value:r.value)} ${C.value?Ie:he},
            ${R(E)} ${C.value?Ie:he}  will be traded for ${R(x)} ${C.value?he:Ie} added to the pool.`,Je=`By depositing ${r.value} ${he}, ${R(x)} ${he} will be converted to ${Ie} via Haedal 
            liquid staking and added to the pool together.`;oe.value=t.value.supportHaedalStake&&D.value?Je:Se}else $e=t.value.current_sqrt_price,U=new ce(U)}else f.value=!1,$e=t.value.current_sqrt_price,U=new ce(U),oe.value="";console.log(ge,"##swapParams");let i,B,ne;const Q=te.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:d.value,tokenB:h.value,lowerTick:p,upperTick:V,coinAmount:U,iscoinA:be,roundUp:!0,slippage:Number(_.value)/100,curSqrtPrice:new ce($e)});console.log("amount#",Q),i=Q.liquidityAmount,B=Q.tokenMaxA,ne=Q.tokenMaxB,!C.value&&!D.value&&(L.value?r.value=Number(ne)>0?ne:"":I.value=Number(B)>0?B:""),console.log(i.toString(),"liquidityAmount###"),se(i),ie(i),ye.value=!1}};_e(()=>t.value,p=>{p&&!Ke(p)&&(d.value=p==null?void 0:p.token_a,h.value=p==null?void 0:p.token_b,de.value=!1,j.value=!1,pe())},{immediate:!0});const le=k(()=>a.value.RATES),fe=k(()=>{var p,V,me,U,$e,be,i,B,ne,Q;if((V=le.value[(p=d.value)==null?void 0:p.address])!=null&&V.price&&((U=le.value[(me=h.value)==null?void 0:me.address])!=null&&U.price)){console.log((be=le.value[($e=d.value)==null?void 0:$e.address])==null?void 0:be.price,"RATES.value[fromCoin.value?.address]?.price");const H=new u(I.value||0).mul(new u((B=le.value[(i=d.value)==null?void 0:i.address])==null?void 0:B.price)),O=new u(r.value||0).mul(new u((Q=le.value[(ne=h.value)==null?void 0:ne.address])==null?void 0:Q.price));return H.add(O).toNumber()}else return"--"});_e(()=>I.value,vo((p,V)=>{console.log(p,"##newVal"),p?pe():(b.value="--",r.value="",K.value="--")},500),{immediate:!0}),_e(()=>r.value,vo((p,V)=>{p?pe():(I.value="",b.value="--",K.value="--")},500),{immediate:!0});const{t:g,locale:J}=Ao(),Ce=k(()=>{var p,V;if(C.value||D.value){const me=C.value?I.value:r.value,U=C.value?d.value:h.value;if((p=le.value[U==null?void 0:U.address])!=null&&p.price)return new u(me||0).mul(new u((V=le.value[U==null?void 0:U.address])==null?void 0:V.price)).toNumber()}return 0}),ke=k(()=>{const p=Number(I.value)>Number(F.value),V=Number(r.value)>Number(W.value);return!I.value&&!r.value?g("button.enterAmount"):t.value.supportHaedalStake&&D.value&&r.value<10?"Minimum deposit 10 SUI":p?g("button.insufficientBalance",{name:d.value.symbol}):V?g("button.insufficientBalance",{name:h.value.symbol}):f.value?g("button.insufficientLiquidity"):Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(fe.value)>Number(t.value.remainingTokenUSD)?"Exceeded the max capacity":n.value?g("button.enterAmount"):(console.log(Ce.value),"Add Liquidity")}),Oe=k(()=>{const p=Number(I.value)>Number(F.value),V=Number(r.value)>Number(W.value);return!!(!I.value&&!r.value||p||V||I.value<=0&&r.value<=0||f.value||He.value!=="STATUS_RUNNING"||(console.log(fe.value,t.value.quoteUSD,"positionInfo.value.quoteUSD#"),Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(fe.value)>Number(t.value.remainingTokenUSD))||n.value||t.value.supportHaedalStake&&!D.value&&Ce.value>1e4||!t.value.supportHaedalStake&&Ce.value>1e4||ve.value||t.value.supportHaedalStake&&D.value&&r.value<10)}),qe=w(!0),{setIsShowSuccess:Re,setIsShowRejected:we,setIsShowWaiting:Pe,setTransactionDesc:no,setTransactionTxid:so,setPositiomNum:io}=G,Ge=zo("Sui"),Ne=async()=>{var ne,Q;s.value=!1,qe.value=!0,so("");const p=`${R(I.value)} ${(ne=d.value)==null?void 0:ne.symbol}`,V=`${R(r.value)} ${(Q=h.value)==null?void 0:Q.symbol}`;no(`Deposit ${I.value>0?p:""} ${r.value>0&&I.value>0?"and":""} ${r.value>0?V:""}`),Pe(!0);const me=L.value,U=t.value.autoPoolPositionInfo.tick_lower_index,$e=t.value.autoPoolPositionInfo.tick_upper_index,be=We.sqrtPriceX64ToTickIndex(new ce(t.value.current_sqrt_price));let i;L.value?i=new u(I.value).mul(Math.pow(10,d.value.decimals)).toString():i=new u(r.value).mul(Math.pow(10,h.value.decimals)).toString();const B=t.value.rewarderInfo.map(H=>H.coinAddress);console.log("1109###deposit###positionInfo###",t);try{const H={lowerTick:U,upperTick:$e,coinAmount:i,fix_amount_a:me,slippage:Number(_.value)/100,curSqrtPrice:new ce(t.value.current_sqrt_price),id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:B,swapParams:ge.value,isOnlyA:C.value,isOnlyB:D.value,currentTickIndex:be,decimal_b:t.value.coinB.decimals,request_id:i,staking_id:t.value.supportHaedalStake&&(D.value&&!t.value.isTokenA||C.value&&t.value.isTokenA)?t.value.staking_id:"",shouldRequestStake:t.value.supportHaedalStake&&D.value,farming_pool:t.value.autoPoolPositionInfo.pool_id};console.log("1106###deposit###params###",H);const O=await Ge.deposit(H);console.log(O,"===>payloadAdd11111");const ae=await te.value.signAndExecuteTransactionBlock(P.value.currentWallet,O);let X=te.value.handleTx(ae);if(console.log("toAdd###tx###",X),X&&X.hash){so(X.hash),Pe(!1),Re(!0),console.log(t,"===>positionInfo");const E={title:"Supplied",desc:`Deposit ${I.value>0?p:""} ${r.value>0&&I.value>0?"and":""} ${r.value>0?V:""}`,hash:X.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${I.value>0?p:""} ${r.value>0&&I.value>0?"and":""} ${r.value>0?V:""}`};N.value!=="Aptos"&&(E.res=X.res),te.value.showTransitionPending(E),await te.value.watchTransaction(E)&&setTimeout(()=>{c.updatePositionItem(t.value.id),te.value.getAccount(P.value.address)},1e3),io()}else Pe(!1),we(!0);I.value="",r.value="",qe.value=!1}catch(H){I.value="",r.value="",console.log("addError###",H),qe.value=!1,Pe(!1),we(!0)}},lo=p=>{I.value="",r.value="",oe.value="",ve.value=!1,p=="only-a-b"?(C.value=!1,D.value=!1):p=="only-a"?(C.value=!0,D.value=!1):(D.value=!0,C.value=!1)},He=k(()=>T.value.currentAutoPoolStatus),Me=w(),ho=()=>{Me.value=window.setInterval(()=>{(I.value||r.value)&&pe()},2e4)};po(()=>{ho()}),Po(()=>{window.clearInterval(Me.value)});const _o=pn(fn,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0});return{currentAutoPoolStatus:He,wallet:P,positionInfo:t,isShowAddModal:s,needReverse:v,fromCoin:d,toCoin:h,fromCoinAmount:I,toCoinAmount:r,fromCoinBlance:F,toCoinBlance:W,fixedFromCoin:L,maxBtnSelect:ee,halfBtnSelect:re,totalAmountUSD:fe,addCommom:R,shareOfPool:b,minimumReceivedLP:K,addLiquidityBtnText:ke,addLiquidityBtnDisabled:Oe,toAdd:Ne,showToCoinLock:j,showFromCoinLock:de,isOnlyA:C,isOnlyB:D,onlyToken:lo,onlyText:oe,onlyTokenUSD:Ce,calculateLoading:ye,indicator:_o,depositTokenTips:"You can also choose to deposit in only one asset type. In that case,the vault will convert your asset to the required propositions using Cetus.Please note that trading fees & slippage will be applied. When slippage is involved,a certain amount of post-swap dust (no loss of funds) will be returned to you.",depositHaedalTokenTips:"When you deposit in only SUI tokens, a part of your SUI amount will be converted to haSUI via Haedal liquid staking services to match required liquidity compositions of the liquidity pool on Cetus. A certain amount of dust (no loss of funds) will be returned to you if slippage is involved."}}});const Ze=e=>(Xe("data-v-b1d46143"),e=e(),ze(),e),_i={class:"auto-pool-add"},wi={class:"auto-pool-add-content"},$i={class:"liquidity-action-tab"},Ii=Ze(()=>o("div",{class:"increase tab-active"},"Add",-1)),Si={class:"only-token"},Ai=Ze(()=>o("div",null,"Deposit Amounts",-1)),Ci=Ze(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),Pi=Ze(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1)),Ti={key:0,class:"card-item"},qi={key:1,class:"card-item"},Ni=Ze(()=>o("span",null,"Pool Closed",-1)),Ri={key:0,class:"add-info"},Bi={key:0,class:"only-text"},Di={class:"total-amount"},Li=Ze(()=>o("span",null,"Total Amount",-1)),Ui={key:0},Oi={class:"total-amount"},Mi=Ze(()=>o("span",null,"Share of Pool",-1)),Fi={key:0},Vi={class:"total-amount"},Hi=Ze(()=>o("span",null,"Minimum Received LP",-1)),Ei={key:0},Wi={key:1,class:"add-info only-add-info"},ji=Ze(()=>o("div",{class:"only-text"},"Single-asset deposit can't be higher than $10,000 at a time.",-1)),Xi=[ji];function zi(e,s,G,Y,N,P){var n,v,d,h,I,r,L,F,W,ee,re,te,_,b,K,se,ie,de,j,oe,ge,ye,ve;const c=Eo,T=Ko,$=Qo,a=to("AutoPoolV2PoolStatus"),t=Co,S=Xo,f=Zo;return l(),y("div",_i,[o("div",wi,[o("div",$i,[Ii,o("div",{class:"remove",onClick:s[0]||(s[0]=jo(C=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",Si,[Ai,o("div",null,[o("div",{class:Te(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:s[1]||(s[1]=C=>e.onlyToken("only-a-b"))},[o("span",null,m(e.needReverse?(h=(d=e.positionInfo)==null?void 0:d.token_b)==null?void 0:h.symbol:(v=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:v.symbol)+" + "+m(e.needReverse?(F=(L=e.positionInfo)==null?void 0:L.token_a)==null?void 0:F.symbol:(r=(I=e.positionInfo)==null?void 0:I.token_b)==null?void 0:r.symbol),1)],2),o("div",{class:Te(["only-a",e.isOnlyA?"active-only":""]),onClick:s[2]||(s[2]=C=>e.onlyToken("only-a"))},[o("span",null,m(e.needReverse?(te=(re=e.positionInfo)==null?void 0:re.token_b)==null?void 0:te.symbol:(ee=(W=e.positionInfo)==null?void 0:W.token_a)==null?void 0:ee.symbol)+" only",1),M(c,{placement:"bottom","arrow-point-at-center":""},{title:ue(()=>[o("span",null,m(e.depositTokenTips),1)]),default:ue(()=>[Ci]),_:1})],2),o("div",{class:Te(["only-b",e.isOnlyB?"active-only":""]),onClick:s[3]||(s[3]=C=>e.onlyToken("only-b"))},[o("span",null,m(e.needReverse?(se=(K=e.positionInfo)==null?void 0:K.token_a)==null?void 0:se.symbol:(b=(_=e.positionInfo)==null?void 0:_.token_b)==null?void 0:b.symbol)+" only",1),M(c,{placement:"bottom","arrow-point-at-center":""},{title:ue(()=>[o("span",null,m(e.positionInfo.supportHaedalStake?e.depositHaedalTokenTips:e.depositTokenTips),1)]),default:ue(()=>[Pi]),_:1})],2)])]),o("div",{class:Te(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(l(),y("div",Ti,[M(T,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":s[4]||(s[4]=C=>e.fromCoinAmount=C),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[5]||(s[5]=C=>e.maxBtnSelect("fromCoin")),onOnHalf:s[6]||(s[6]=C=>e.halfBtnSelect("fromCoin")),onOnInput:s[7]||(s[7]=C=>{e.fromCoinAmount=C}),onOnFocus:s[8]||(s[8]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(l(),Z($,{key:0})):z("",!0)])):z("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(l(),y("div",qi,[M(T,{modelValue:e.toCoinAmount,"onUpdate:modelValue":s[9]||(s[9]=C=>e.toCoinAmount=C),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[10]||(s[10]=C=>e.maxBtnSelect("toCoin")),onOnHalf:s[11]||(s[11]=C=>e.halfBtnSelect("toCoin")),onOnInput:s[12]||(s[12]=C=>{e.toCoinAmount=C}),onOnFocus:s[13]||(s[13]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(l(),Z($,{key:0})):z("",!0)])):z("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(l(),Z(a,{key:0})):z("",!0),(ie=e.positionInfo)!=null&&ie.is_pause?(l(),Z(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:ue(()=>[Ni]),_:1})):e.wallet.connected?(l(),Z(t,{key:2,class:"big-btn liquidity-btn",disabled:e.addLiquidityBtnDisabled,onClick:s[14]||(s[14]=C=>e.isShowAddModal=!0)},{default:ue(()=>[o("span",null,m(e.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(l(),Z(t,{key:3,class:"big-btn liquidity-btn",onClick:s[15]||(s[15]=C=>e.wallet.setIsShowWalletModal(!0))},{default:ue(()=>[o("span",null,m(e.$t("button.connectWallet")),1)]),_:1})),(((de=e.positionInfo)==null?void 0:de.quoteUSD)==0||Number((j=e.positionInfo)==null?void 0:j.remainingTokenUSD)>Number(e.totalAmountUSD))&&(Number(e.fromCoinAmount)>0||Number(e.toCoinAmount)>0)?(l(),y(Ye,{key:4},[e.positionInfo.supportHaedalStake&&e.isOnlyB||e.onlyTokenUSD<=1e4?(l(),y("div",Ri,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount>0||e.isOnlyB&&e.toCoinAmount>0)?(l(),y("div",Bi,m(e.onlyText),1)):z("",!0),o("div",Di,[Li,e.calculateLoading?(l(),Z(S,{key:1,paragraph:!1,active:""})):(l(),y("span",Ui,m(Number(e.totalAmountUSD)>0&&Number(e.totalAmountUSD)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:A(R))(e.totalAmountUSD,2)}`),1))]),o("div",Oi,[Mi,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(l(),y("span",Fi,m(e.shareOfPool)+"%",1)):(l(),Z(S,{key:1,paragraph:!1,active:""}))]),o("div",Vi,[Hi,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(l(),y("span",Ei,m(("addCommom"in e?e.addCommom:A(R))(e.minimumReceivedLP))+" "+m(e.needReverse?(oe=e.toCoin)==null?void 0:oe.symbol:(ge=e.fromCoin)==null?void 0:ge.symbol)+"-"+m(e.needReverse?(ye=e.fromCoin)==null?void 0:ye.symbol:(ve=e.toCoin)==null?void 0:ve.symbol),1)):(l(),Z(S,{key:1,paragraph:!1,active:""}))])])):e.positionInfo.supportHaedalStake&&!e.isOnlyB&&e.onlyTokenUSD>1e4||!e.positionInfo.supportHaedalStake&&e.onlyTokenUSD>1e4?(l(),y("div",Wi,Xi)):z("",!0)],64)):z("",!0),e.isShowAddModal?(l(),Z(f,{key:5,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:s[16]||(s[16]=C=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):z("",!0)])}const Gi=Ve(hi,[["render",zi],["__scopeId","data-v-b1d46143"]]),Yi=je({components:{AutoPoolRemoveModal:Jo,AutoPoolV2PoolStatus:an},setup(){const e=yo(),s=k(()=>e),G=go(),Y=k(()=>G),N=k(()=>f.value.slippage),P=k(()=>Y.value.chainName),c=_n(),T=k(()=>c),$=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],a=w(25),t=eo(),S=Qe(),f=k(()=>S),n=k(()=>(console.log(f.value.positionInfoObj[t.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),f.value.positionInfoObj[t.params.id])),v=k(()=>{var i;return(i=n.value)==null?void 0:i.needReverse}),d=w(),h=w(),I=w(!1),r=w(),L=k(()=>{var i;return(i=n.value)==null?void 0:i.myLiquidity}),F=w(!0),W=k(()=>P.value?Go(P.value):{}),ee=w(),re=w(),te=zo("Sui"),_=w(""),b=w(""),K=w("--"),se=w(!1),ie=w(!1),de=w(),j=w(!0),oe=w(),ge=oo(),ye=k(()=>ge),ve=k(()=>ye.value.RATES),C=w(!1),D=async()=>{if(F.value||!n.value||n.value.positionLiquidity==0)return;re.value=!1,C.value=!0;const i=n.value.autoPoolPositionInfo.tick_lower_index,B=n.value.autoPoolPositionInfo.tick_upper_index,ne=We.sqrtPriceX64ToTickIndex(new ce(n.value.current_sqrt_price));ne<i&&(v.value?se.value=!0:ie.value=!0),ne>B&&(v.value?ie.value=!0:se.value=!0);let Q;if(console.log(_.value||b.value,"#fromCoinAmount.value || toCoinAmount.value"),_.value||b.value){j.value?Q=new u(_.value).mul(Math.pow(10,d.value.decimals)).toString():Q=new u(b.value).mul(Math.pow(10,h.value.decimals)).toString();let H,O=j.value;if(g.value||J.value){g.value?Number(_.value)/Number(p.value):Number(b.value)/Number(p.value);const x=await te.calculateRemoveSwapAmount({lowerTick:i,upperTick:B,curSqrtPrice:new ce(n.value.current_sqrt_price),fix_amount_a:O,receiveAmount:Q,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(N.value)/100,decimals:g.value?d.value.decimals:h.value.decimals,liquidity:_.value==p.value||b.value==p.value?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:Q});if(console.log(x,"###swapResult"),x){if(x.request_id!==Q)return;ee.value=x.is_exceed,Q=new ce(x.swapOutAmount),H=n.value.current_sqrt_price,de.value={swap_amount:x.swapInAmount,liquidity:x.liquidity,a2b:!O,route_obj:x.route_obj},O=!O;const Ie=n.value.token_a.decimals,he=n.value.token_b.decimals,Se=new u(x.swapInAmount).div(new u(Math.pow(10,Ie))).toString(),Je=q(new u(x.swapOutAmountLimit).div(new u(Math.pow(10,he))).toString(),he),Ae=v.value?n.value.token_b.symbol:n.value.token_a.symbol,Be=v.value?n.value.token_a.symbol:n.value.token_b.symbol;oe.value=_.value==p.value||b.value==p.value?`To withdraw ${R(g.value?_.value:b.value)} ${g.value?Ae:Be},
          ${R(g.value?n.value.amountB:n.value.amountA)} ${g.value?Be:Ae} 
           in the pool will be traded for ${Se} ${g.value?Ae:Be}`:`To withdraw ${R(g.value?_.value:b.value)} ${g.value?Ae:Be},
          ${R(Se)} ${g.value?Be:Ae}  in the pool will be traded for ${R(Je)} ${g.value?Ae:Be}`}else{re.value=!0,oe.value="";return}}else ee.value=!1,H=n.value.current_sqrt_price,Q=new ce(Q);console.log(H,"##curSqrtPrice"),console.log("执行了吗##");const{liquidityAmount:ae,tokenMaxA:X,tokenMaxB:E}=W.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:d.value,tokenB:h.value,lowerTick:i,upperTick:B,coinAmount:Q,iscoinA:O,roundUp:!1,slippage:Number(N.value)/100,curSqrtPrice:new ce(H)});if(console.log(n.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(E.toString(),X.toString(),n.value,"###323"),!g.value&&!J.value&&(j.value?b.value=Number(E)>0?E:"":_.value=Number(X)>0?X:""),(g.value||J.value)&&(Number(_.value)>=Number(p.value)||Number(b.value)>=Number(p.value))){console.log("执行这里了吗"),r.value=n.value.myLiquidity;const x=new u(100);K.value=new u(n.value.myLiquidity).mul(new u(Math.pow(10,n.value.lpInfo.decimals))).toString(),pe.value=ae.toString(),a.value=x.toNumber()}else{console.log("执行这里了吗1");const x=So.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},ae.toString()),Ie=new u(x).div(new u(Math.pow(10,n.value.lpInfo.decimals))).toString();console.log(Ie,L.value,ae.toString(),n.value.liquidity,n.value.total_supply,"##lpBalance.value");const he=new u(Ie).div(new u(L.value)).mul(100);console.log(Ie,L.value,he.toNumber(),"lp##"),r.value=new u(L.value).mul(he.div(100)).toString(),K.value=x,pe.value=ae.toString(),a.value=he.toNumber()}C.value=!1}},pe=w(),le=k(()=>{var i;return(i=n==null?void 0:n.value)==null?void 0:i.amountA}),fe=k(()=>{var i;return(i=n==null?void 0:n.value)==null?void 0:i.amountB}),g=w(!1),J=w(!1),Ce=k(()=>{var O,ae,X,E;const i=(ae=ve.value[(O=d==null?void 0:d.value)==null?void 0:O.address])==null?void 0:ae.price,B=(E=ve.value[(X=h==null?void 0:h.value)==null?void 0:X.address])==null?void 0:E.price;console.log(i,B,_.value,b.value,"####totalWithdraw");let ne=_.value!=="--"&&_.value!==""?_.value:0,Q=b.value!=="--"&&b.value!==""?b.value:0,H;return i&&B&&(g.value||J.value?H=new u(g.value?ne:Q).mul(new u(g.value?i:B)).toString():(H=new u(ne).mul(new u(i)).add(new u(Q).mul(new u(B))).toString(),console.log(H,"result##"))),H>0&&H<.01?"<$0.01":`$${R(q(H,2))}`}),ke=async i=>{var Ie,he,Se,Je,Ae,Be,wo,Do,Lo,Uo,Oo;if(!F.value)return;F.value=!0,re.value=!1,(he=(Ie=n.value)==null?void 0:Ie.token_a)==null||he.decimals,(Je=(Se=n.value)==null?void 0:Se.token_b)==null||Je.decimals;const B=(Ae=n.value)==null?void 0:Ae.tick_lower_index,ne=(Be=n.value)==null?void 0:Be.tick_upper_index;We.tickIndexToSqrtPriceX64(B),We.tickIndexToSqrtPriceX64(ne);const Q=(Do=(wo=n.value)==null?void 0:wo.autoPoolPositionInfo)==null?void 0:Do.tick_lower_index,H=(Uo=(Lo=n.value)==null?void 0:Lo.autoPoolPositionInfo)==null?void 0:Uo.tick_upper_index,O=We.sqrtPriceX64ToTickIndex(new ce((Oo=n==null?void 0:n.value)==null?void 0:Oo.current_sqrt_price));O<Q&&(v.value?se.value=!0:ie.value=!0),O>H&&(v.value?ie.value=!0:se.value=!0);let ae="",X,E;console.log(i.value,"##item.value"),console.log(E,"##coinAmount");let x=j.value;if(console.log("执行##"),g.value||J.value&&!se.value&&!ie.value){if(g.value){const xe=new u(p.value).mul(Math.pow(10,d.value.decimals)).mul(i.value).toString();console.log(xe,"##amount"),E=q(xe,0),_.value=q(new u(p.value).mul(i.value).toString(),d.value.decimals)}if(J.value){const xe=new u(p.value).mul(i.value).mul(Math.pow(10,h.value.decimals)).toString();E=q(xe,0),b.value=q(new u(p.value).mul(i.value).toString(),h.value.decimals)}console.log(_.value,"##fromCoinAmount.value");const De=await te.calculateRemoveSwapAmount({lowerTick:B,upperTick:ne,curSqrtPrice:new ce(n.value.current_sqrt_price),fix_amount_a:x,receiveAmount:E,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(N.value)/100,decimals:g.value?d.value.decimals:h.value.decimals,liquidity:i.value==1?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:E});if(console.log(De,"###swapResult536"),De){if(De.request_id!==E)return;ee.value=De.is_exceed,E=new ce(De.swapOutAmount),n.value.current_sqrt_price,de.value={swap_amount:De.swapInAmount,liquidity:De.liquidity,route_obj:De.route_obj,a2b:!x},x=!x;const xe=n.value.token_a.decimals,Mo=n.value.token_b.decimals,un=new u(De.swapInAmount).div(new u(Math.pow(10,xe))).toString(),Fo=q(new u(De.swapOutAmountLimit).div(new u(Math.pow(10,Mo))).toString(),Mo),ao=v.value?n.value.token_b.symbol:n.value.token_a.symbol,uo=v.value?n.value.token_a.symbol:n.value.token_b.symbol;oe.value=i.value==1?`To withdraw ${R(g.value?_.value:b.value)} ${g.value?ao:uo},
          ${R(g.value?n.value.amountB:n.value.amountA)} ${g.value?uo:ao}  in the pool will be traded for ${R(Fo)} ${g.value?ao:uo}`:`To withdraw ${R(g.value?_.value:b.value)} ${g.value?ao:uo},
          ${R(un)} ${g.value?uo:ao}  in the pool will be traded for ${R(Fo)} ${g.value?ao:uo}`,ae=De.liquidity}else n.value.current_sqrt_price,E=new ce(E),oe.value="",re.value=!0;console.log(X,"result###"),K.value=new u(n.value.myLiquidity).mul(new u(i.value)).toString(),console.log(n.value,n.value.liquidity,ae,K.value,"###positionInfo.value.liquidity"),console.log(K.value,"##lpTokenAmount.value"),r.value=new u(K.value),pe.value=ae}else{ee.value=!1;const De=new u(le.value).mul(Math.pow(10,d.value.decimals)).mul(i.value).toString();E=q(De,0),_.value=q(new u(le.value).mul(i.value).toString(),d.value.decimals);const xe=new u(fe.value).mul(i.value).mul(Math.pow(10,h.value.decimals)).toString();E=q(xe,0),b.value=q(new u(fe.value).mul(i.value).toString(),h.value.decimals),n.value.current_sqrt_price,E=new ce(E),i.value!==1?X=new u(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(i.value).toString():X=new u(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),r.value=new u(X).div(Math.pow(10,n.value.lpInfo.decimals)),ae=So.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},X),K.value=q(X,0),pe.value=q(ae,0),console.log(ae,"###newLiquidity525")}};_e(a,vo((i,B)=>{i!==B&&(Number(i)>100?a.value=100:i&&n.value?(console.log("687===>"),a.value=i,ke({value:a.value/100})):(_.value="",b.value=""))},300)),_e(()=>_.value,vo((i,B)=>{i?D():!g.value&&!J.value&&(b.value="",a.value=0)},500),{immediate:!0}),_e(()=>b.value,vo((i,B)=>{i?D():!g.value&&!J.value&&(_.value="",a.value=0)},500),{immediate:!0});const Oe=To(),{setIsShowSuccess:qe,setIsShowRejected:Re,setIsShowWaiting:we,setTransactionDesc:Pe,setTransactionTxid:no,setPositiomNum:so,setTransactionDescText:io}=G,Ge=w(!1),{t:Ne}=Ao(),lo=async()=>{var Ie,he;Ge.value=!0,no("");const i=Number(_.value)>0?`${R(_.value,d.value.decimals)} ${d.value.symbol}`:"",B=Number(b.value)>0?`${R(b.value,h.value.decimals)} ${h.value.symbol}`:"";console.log(i,B,"###transactionDescTo"),Pe(Ne("tips.removeLiquidiyText",{from:v.value?B:i,and:Number(_.value)>0&&Number(b.value)>0?"and":"",to:v.value?i:B})),we(!0);const ne=Ne("modal.removeLiquidityText2");io(ne);const Q=n.value.autoPoolPositionInfo.tick_lower_index,H=n.value.autoPoolPositionInfo.tick_upper_index,O=We.tickIndexToSqrtPriceX64(Q),ae=We.tickIndexToSqrtPriceX64(H),X=n.value.rewarderInfo.map(Se=>Se.coinAddress);console.log(K.value,"##lpTokenAmount.value431");let E;j.value?E=new u(_.value).mul(Math.pow(10,d.value.decimals)).toString():E=new u(b.value).mul(Math.pow(10,h.value.decimals)).toString(),console.log();const x={lowerSqrtPrice:O,upperSqrtPrice:ae,lpTokenAmount:K.value,liquidity:pe.value,curSqrtPrice:new ce(n.value.object.current_sqrt_price),slippage:Number(N.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:X,swapParams:de.value,fix_amount_a:j.value,isOnlyA:!se.value&&!ie.value?g.value:!1,isOnlyB:!ie.value&&!se.value?J.value:!1,lowerTick:Q,upperTick:H,receiveAmount:E,sliderVal:a.value,positionInfo:n.value,maxLiquidity:n.value.positionLiquidity,farming_pool:n.value.autoPoolPositionInfo.pool_id};try{const Se=await te.remove(x);console.log(Se,"移除流动性payload");const Je=await W.value.signAndExecuteTransactionBlock(s.value.currentWallet,Se);let Ae=W.value.handleTx(Je);if(console.log("0331###remove###tx####",Ae),Ae&&Ae.hash){no(Ae.hash),we(!1),qe(!0);const Be={title:Ne("common.removeLiquidity"),desc:"",hash:Ae.hash,descTransactions:`Remove ${i} ${Number(_.value)>0&&Number(b.value)>0?"and":""} ${B} from the pool`,sender:s.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${_.value} ${(Ie=d.value)==null?void 0:Ie.symbol} and ${b.value} ${(he=h.value)==null?void 0:he.symbol}`};Be.res=Ae.res,W.value.showTransitionPending(Be),await W.value.watchTransaction(Be)&&(_.value="",b.value="",r.value="",a.value=0,setTimeout(()=>{S.updatePositionItem(n.value.id),W.value.getAccount(s.value.address)},1e3),Number(a.value)==100&&t.name=="auto-pool-detail"&&Oe.push("/vaults"))}else we(!1),Re(!0);Ge.value=!1}catch(Se){console.log("Remove error",Se),Ge.value=!1,we(!1),Re(!0)}};_e(()=>n.value,(i,B)=>{i&&!Ke(i)&&(d.value=i==null?void 0:i.token_a,h.value=i==null?void 0:i.token_b,console.log("触发###"),(!B||B&&B.address!==i.address)&&(a.value=a.value>0?a.value:25,ke({value:a.value/100})),B&&B.current_sqrt_price!==i.current_sqrt_price&&(F.value?ke({value:a.value/100}):D()))},{immediate:!0});const He=k(()=>{if(n.value.positionLiquidity==0)return"Insufficient LP Amount";const i=Number(r.value)>Number(L.value);return!_.value&&!b.value||!r.value||r.value<=0||!_.value&&g.value||!b.value&&J.value?Ne("button.enterAmount"):i?"Invalid Amount":ee.value?Ne("button.insufficientLiquidity"):re.value?Ne("button.enterAmount"):(console.log(_.value,p.value,b.value,"856##"),g.value&&Number(_.value)>Number(p.value)||J.value&&Number(b.value)>Number(p.value)?"Invalid Amount":Ne("button.remove"))}),Me=k(()=>{if(n.value.positionLiquidity==0)return!0;const i=Number(r.value)>Number(L.value);return!!(!_.value&&!b.value||Number(_.value)<=0&&g.value||Number(b.value)<=0&&J.value||!r.value||r.value<=0||i||ee.value||U.value!=="STATUS_RUNNING"||re.value||g.value&&Number(_.value)>Number(p.value)||J.value&&Number(b.value)>Number(p.value))}),ho=i=>(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||ro("/image/coins/sui-unknown.png"),_o=i=>{_.value="",b.value="",F.value=!0,oe.value="",i=="only-a"?(g.value=!g.value,J.value=!1,j.value=!0):(J.value=!J.value,g.value=!1,j.value=!1)},Ro=i=>{F.value=!0,a.value=100,i==="fromCoin"?j.value=!0:j.value=!1},Bo=i=>{F.value=!0,a.value=50,i==="fromCoin"?j.value=!0:j.value=!1},p=w(),V=async()=>{const i=n.value.token_a.decimals,B=n.value.token_b.decimals,ne=new u(le.value).mul(new u(Math.pow(10,i))).toNumber(),Q=new u(fe.value).mul(new u(Math.pow(10,B))).toNumber(),H=g.value?Q:ne,O=g.value?h.value.address===n.value.token_a.address:d.value.address===n.value.token_a.address;try{const ae=await T.value.swapRouterContract.getSwapRouter(g.value?h:d,g.value?d:h,H,!0,Number(N.value)/100,"",void 0,[{pool_id:n.value.address,tick_lower:n.value.autoPoolPositionInfo.tick_lower_index,tick_upper:n.value.autoPoolPositionInfo.tick_upper_index,delta_liquidity:Number(n.value.positionLiquidity),is_increase:!1}]),X=new u(ae.amountOut);p.value=X.sub(X.mul(Number(N.value)/100)).add(new u(g.value?le.value:fe.value)).toString()}catch{if(g.value||J.value){console.log(H,"##receiveAmount");let X=await W.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:O,byAmountIn:!0,amount:H});console.log(X,X.estimatedAmountOut,i,B,"##preSwapRes");const E=new u(X.estimatedAmountOut);p.value=E.sub(E.mul(Number(N.value)/100)).add(new u(g.value?le.value:fe.value)).toString(),console.log("转换之后数量:",X.estimatedAmountOut),console.log("转换之后滑点数量:",E.mul(Number(N.value)/100).toNumber()),console.log("原有数量减滑点数量:",E.sub(E.mul(Number(N.value)/100)).toNumber()),console.log("fromCoin原有数量:",le.value),console.log(p.value,"###onlyTokenBalance.value"),g.value?_.value=q(new u(p.value).mul(a.value/100).toString(),d.value.decimals):b.value=q(new u(p.value).mul(a.value/100).toString(),h.value.decimals),ke({value:a.value/100})}}ke({value:a.value/100})};_e(()=>[g.value,J.value,le.value,fe.value],([i,B])=>{i||B?V():ke({value:a.value/100})},{immediate:!0});const me=i=>`${i}%`,U=k(()=>f.value.currentAutoPoolStatus),$e=w(),be=()=>{$e.value=window.setInterval(()=>{(_.value||b.value)&&!F.value?D():ke({value:a.value/100})},2e4)};return po(()=>{be()}),Po(()=>{window.clearInterval($e.value)}),{removeLiquidityBtnText:He,removeLiquidityBtnDisabled:Me,wallet:s,ratioArr:$,positionInfo:n,isShowRemoveModal:I,needReverse:v,fromCoin:d,toCoin:h,lpAmount:r,lpBalance:L,sliderVal:a,sFixD:q,isSlider:F,fromCoinAmount:_,toCoinAmount:b,setPercent:ke,toRemove:lo,addCommom:R,getCoinIcon:ho,isOnlyA:g,isOnlyB:J,onlyToken:_o,fixedFromCoin:j,maxBtnSelect:Ro,halfBtnSelect:Bo,fromCoinBlance:le,toCoinBlance:fe,showFromCoinLock:se,showToCoinLock:ie,removeText:oe,onlyTokenBalance:p,totalWithdraw:Ce,formatter:me,currentAutoPoolStatus:U,calculateLoading:C}}});const ko=e=>(Xe("data-v-28b3865b"),e=e(),ze(),e),Ki={class:"auto-pool-add"},Qi={class:"auto-pool-add-content"},Zi={class:"liquidity-action-tab"},Ji=ko(()=>o("div",{class:"remove tab-active"},"Remove",-1)),xi={key:0,class:"card-item"},el={key:1,class:"card-item"},ol={class:"remove-ratio"},nl={class:"remove-ratio-select"},tl={key:0,class:"ratio"},sl={key:1,class:"ratio"},il={class:"ratio-list"},ll=["onClick"],al=ko(()=>o("span",null,"Pool Closed",-1)),ul={key:4,class:"remove-info"},rl={key:0,class:"remove-text total-amount"},dl={class:"total-amount"},vl=ko(()=>o("span",null,"Total Withdraw",-1)),ml={key:0},cl={class:"total-amount"},pl=ko(()=>o("span",null,"LP Burn Amount",-1)),fl={key:0};function gl(e,s,G,Y,N,P){var n,v,d,h,I;const c=Ko,T=Qo,$=Wo,a=to("AutoPoolV2PoolStatus"),t=Co,S=Xo,f=Jo;return l(),y("div",Ki,[o("div",Qi,[o("div",Zi,[o("div",{class:"increase",onClick:s[0]||(s[0]=jo(r=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),Ji]),o("div",{class:Te(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(l(),y("div",xi,[M(c,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":s[1]||(s[1]=r=>e.fromCoinAmount=r),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:s[2]||(s[2]=r=>e.maxBtnSelect("fromCoin")),onOnHalf:s[3]||(s[3]=r=>e.halfBtnSelect("fromCoin")),onOnInput:s[4]||(s[4]=r=>{e.isSlider=!1,e.fromCoinAmount=r}),onOnFocus:s[5]||(s[5]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(l(),Z(T,{key:0})):z("",!0)])):z("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(l(),y("div",el,[M(c,{modelValue:e.toCoinAmount,"onUpdate:modelValue":s[6]||(s[6]=r=>e.toCoinAmount=r),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:s[7]||(s[7]=r=>e.maxBtnSelect("toCoin")),onOnHalf:s[8]||(s[8]=r=>e.halfBtnSelect("toCoin")),onOnInput:s[9]||(s[9]=r=>{e.isSlider=!1,e.toCoinAmount=r}),onOnFocus:s[10]||(s[10]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(l(),Z(T,{key:0})):z("",!0)])):z("",!0)],2),o("div",ol,[o("div",nl,[Number(e.lpBalance)>=Number(e.lpAmount)?(l(),y("div",tl,m(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:A(q))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:A(q))(e.sliderVal,2))+"% ",1)):(l(),y("div",sl,"--")),o("div",il,[(l(!0),y(Ye,null,co(e.ratioArr,(r,L)=>(l(),y("div",{key:L,class:Te(["ratio-item",e.sliderVal==r.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=r.value}},m(r.name),11,ll))),128))])]),M($,{value:e.sliderVal,"onUpdate:value":s[11]||(s[11]=r=>e.sliderVal=r),"tip-formatter":e.formatter,onChange:s[12]||(s[12]=r=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(l(),Z(a,{key:0})):z("",!0),(n=e.positionInfo)!=null&&n.is_pause?(l(),Z(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:ue(()=>[al]),_:1})):e.wallet.connected?(l(),Z(t,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:s[13]||(s[13]=r=>e.toRemove())},{default:ue(()=>[o("span",null,m(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(l(),Z(t,{key:3,class:"big-btn liquidity-btn",onClick:s[14]||(s[14]=r=>e.wallet.setIsShowWalletModal(!0))},{default:ue(()=>[o("span",null,m(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?z("",!0):(l(),y("div",ul,[e.removeText&&(e.isOnlyA&&Number(e.fromCoinAmount)>0||e.isOnlyB&&Number(e.toCoinAmount)>0)?(l(),y("div",rl,m(e.removeText),1)):z("",!0),o("div",dl,[vl,e.calculateLoading?(l(),Z(S,{key:1,paragraph:!1,active:""})):(l(),y("span",ml,m(e.totalWithdraw),1))]),o("div",cl,[pl,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(l(),y("span",fl,m(("addCommom"in e?e.addCommom:A(R))(("sFixD"in e?e.sFixD:A(q))(e.lpAmount,e.positionInfo.decimals)))+" "+m(e.needReverse?(v=e.toCoin)==null?void 0:v.symbol:(d=e.fromCoin)==null?void 0:d.symbol)+"-"+m(e.needReverse?(h=e.fromCoin)==null?void 0:h.symbol:(I=e.toCoin)==null?void 0:I.symbol),1)):(l(),Z(S,{key:1,paragraph:!1,active:""}))])])),e.isShowRemoveModal?(l(),Z(f,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:s[15]||(s[15]=r=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):z("",!0)])}const yl=Ve(Yi,[["render",gl],["__scopeId","data-v-28b3865b"]]),bl=je({components:{AutoPoolV2Info:en,AutoPoolV2PositionRange:on,AutoPoolV2PoolComposition:tn,AutoPoolV2PoolLiquidity:sn,AutoPoolV2PoolAdd:Gi,AutoPoolV2PoolRemove:yl},setup(){const e=Qe();oo();const s=go(),G=k(()=>s),Y=k(()=>e),N=eo(),P=w();_e(()=>[Y.value.positionInfoObj,N.params.id],([S,f])=>{S&&!Ke(S)&&f&&(P.value=S[f],console.log(P.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const c=async()=>{console.log("重新获取数据"),e.getAutoPoolAPY(),e.getVault(N.params.id,"refresh")},T=w();_e(()=>N.query.action,S=>{S&&(T.value=S)},{immediate:!0}),po(()=>{e.getAutoPoolList(),e.getVault(N.params.id,!1)}),k(()=>G.value.chainName),To();const $=yo(),a=k(()=>$);_e(()=>a.value.address,S=>{S||e.logout()},{immediate:!0});const t=k(()=>Y.value.autoPoolLoading);return{clickRefresh:c,currentTab:T,positionInfo:P,autoPoolLoading:t}}});const kl={class:"auto-pool-detail-v2"},hl={class:"detail-top"},_l={class:"detail-bottom pc-detail"},wl={class:"detail-bottom-left"},$l={class:"detail-bottom-right"},Il={class:"h5-detail"},Sl={key:0,class:"loading-global"};function Al(e,s,G,Y,N,P){const c=Vn,T=en,$=on,a=tn,t=sn,S=to("AutoPoolV2PoolAdd"),f=to("AutoPoolV2PoolRemove"),n=gn;return l(),y("div",kl,[o("div",hl,[M(c,{"pool-info":e.positionInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"]),M(T)]),o("div",_l,[o("div",wl,[M($),M(a),M(t)]),o("div",$l,[e.currentTab=="deposit"?(l(),Z(S,{key:0,onChangeCurrentTab:s[0]||(s[0]=v=>e.currentTab="remove")})):(l(),Z(f,{key:1,onChangeCurrentTab:s[1]||(s[1]=v=>e.currentTab="deposit")}))])]),o("div",Il,[e.currentTab=="deposit"?(l(),Z(S,{key:0,onChangeCurrentTab:s[2]||(s[2]=v=>e.currentTab="remove")})):(l(),Z(f,{key:1,onChangeCurrentTab:s[3]||(s[3]=v=>e.currentTab="deposit")})),M($),M(a),M(t)]),e.autoPoolLoading?(l(),y("div",Sl,[M(n)])):z("",!0)])}const Ql=Ve(bl,[["render",Al],["__scopeId","data-v-8108a44b"]]);export{Ql as default};
