import{_ as me}from"./new-position-title.16ac4b21.js";import{_ as Go}from"./token-warning.bfa18326.js";import{_ as ve}from"./status-block.c2392391.js";import{_ as Zo}from"./auto-pool-apy-tips.87c32b1a.js";import{u as No,g as pe,a as P,d as Io,c as Oo,p as Jo,b as xo,s as $o,e as no,T as yo,f as fe,h as _e,C as Ko}from"./pool.34d9f7a1.js";import{u as Co,a as Do}from"./sha256.ed3fa298.js";import{i as ko}from"./import-icon.de3e6c66.js";import{u as jo,a as oe}from"./autoPool.a4aa3a26.js";import{a as fo,l as c,r as B,m as _o,q as so,e as bo,s as Lo,o as _,f as O,h as e,t as H,i as F,v as r,j as ao,x as Mo,u as W,p as So,k as wo,M as ee,y as Uo,z as ne,c as J,w as io,B as Xo,A as te,C as Yo,D as be,L as he,I as ge,S as se,E as ye,b as ie,F as $e,G as Ie,H as ke,J as Ce}from"./entry.384f5a5a.js";import{_ as Se}from"./assets-card.05ae5baa.js";import{_ as we}from"./coin-lock.5aae732a.js";import{D as $}from"./decimal.0e8aa3f1.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./decimal.633e31ee.js";import{V as Qo}from"./index.f1ebe715.js";import"./back.1c71c91e.js";import"./swap-setting.6bfcc12b.js";/* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.0a29e23a.js";const Ae=fo({components:{AutoPoolApyTips:Zo},setup(){const o=Co(),n=c(()=>o),T=No(),A=c(()=>T),N=c(()=>n.value.theme),I=i=>{var l;return(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((l=A.value.tokensObj[i==null?void 0:i.address])==null?void 0:l.logo_url)||(N.value==="default"?ko("/image/coins/unknown.png"):ko("/image/coins/sui-unknown.png"))},h=B(!0),v=jo(),g=c(()=>v),b=_o(),s=B();so(()=>[g.value.positionInfoObj,b.params.id],([i,l])=>{i&&!Oo(i)&&l&&(s.value=i[l],console.log(s.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const t=c(()=>{var i;return(i=s.value)==null?void 0:i.needReverse}),u=c(()=>{var i,l;return g.value.apyObj&&((l=g.value.apyObj[(i=s.value)==null?void 0:i.id])==null?void 0:l.tvl)||"--"}),a=c(()=>{var i,l;return g.value.apyObj&&((l=g.value.apyObj[(i=s.value)==null?void 0:i.id])==null?void 0:l.apr)||"--"});return{positionInfo:s,tvl:u,store:n,indexStore:o,needReverse:t,getCoinIcon:I,getExplorerUrl:pe,addCommom:P,decimalUi:Io,direct:h,apy:a}}});const Bo=o=>(So("data-v-754ed98b"),o=o(),wo(),o),Pe={class:"auto-position-info"},Re={class:"pool-info"},qe={class:"left"},Te={class:"coin-a"},Ne={alt:""},Le={class:"coin-b"},Be={alt:""},Me={class:"position-name"},Oe={key:0,class:"pool-fee"},De=Bo(()=>e("span",null,"Fee tier",-1)),je={class:"right"},Ue={class:"price-info"},Fe={class:"current-price"},We=Bo(()=>e("span",null,"Current Price",-1)),Ee={class:"coin-rate"},Xe=Bo(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),ze=Bo(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),He=[Xe,ze],Ve={key:0},Ye={key:1},Ge={class:"apy-and-tvl"},Je={class:"apy"},Ke=Bo(()=>e("div",{class:"apy-title"},"APY",-1)),Qe={class:"apy-text"},Ze={class:"tvl"},xe=Bo(()=>e("div",{class:"tvl-title"},"TVL",-1)),on={class:"tvl-text"};function en(o,n,T,A,N,I){var s,t,u,a,i,l,d,k,y,w,V,R,C,E,q,D,Y,G,S,j,K,X,eo,Q,uo,to,mo,vo,Ro,f,U,ro,lo;const h=Go,v=ve,g=Zo,b=Lo("image");return _(),O("div",Pe,[e("div",Re,[e("div",qe,[e("div",Te,[H(e("img",Ne,null,512),[[b,o.needReverse?o.getCoinIcon((t=o.positionInfo)==null?void 0:t.token_b):o.getCoinIcon((s=o.positionInfo)==null?void 0:s.token_a)]]),F(h,{address:o.needReverse?(l=(i=o.positionInfo)==null?void 0:i.token_b)==null?void 0:l.address:(a=(u=o.positionInfo)==null?void 0:u.token_a)==null?void 0:a.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Le,[H(e("img",Be,null,512),[[b,o.needReverse?o.getCoinIcon((k=o.positionInfo)==null?void 0:k.token_a):o.getCoinIcon((d=o.positionInfo)==null?void 0:d.token_b)]]),F(h,{address:o.needReverse?(R=(V=o.positionInfo)==null?void 0:V.token_a)==null?void 0:R.address:(w=(y=o.positionInfo)==null?void 0:y.token_b)==null?void 0:w.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Me,r(o.needReverse?(E=(C=o.positionInfo)==null?void 0:C.token_b)==null?void 0:E.symbol:(D=(q=o.positionInfo)==null?void 0:q.token_a)==null?void 0:D.symbol)+" - "+r(o.needReverse?(G=(Y=o.positionInfo)==null?void 0:Y.token_a)==null?void 0:G.symbol:(j=(S=o.positionInfo)==null?void 0:S.token_b)==null?void 0:j.symbol),1),(K=o.positionInfo)!=null&&K.fee?(_(),O("div",Oe,[De,ao(" "+r(((X=o.positionInfo)==null?void 0:X.fee)*100)+"% ",1)])):Mo("",!0)]),e("div",je,[F(v,{"current-status":(eo=o.positionInfo)==null?void 0:eo.currentStatus},null,8,["current-status"])])]),e("div",Ue,[e("div",Fe,[e("div",null,[We,e("div",Ee,[e("div",{onClick:n[0]||(n[0]=po=>o.direct=!o.direct)},He)])]),(o.needReverse?!o.direct:o.direct)?(_(),O("div",Ve,[ao(r(("addCommom"in o?o.addCommom:W(P))(("decimalUi"in o?o.decimalUi:W(Io))((Q=o.positionInfo)==null?void 0:Q.price,6)))+"   ",1),e("span",null,r((to=(uo=o.positionInfo)==null?void 0:uo.token_b)==null?void 0:to.symbol)+" per "+r((vo=(mo=o.positionInfo)==null?void 0:mo.token_a)==null?void 0:vo.symbol),1)])):(_(),O("div",Ye,[ao(r(("addCommom"in o?o.addCommom:W(P))(("decimalUi"in o?o.decimalUi:W(Io))(1/((Ro=o.positionInfo)==null?void 0:Ro.price),6)))+"   ",1),e("span",null,r((U=(f=o.positionInfo)==null?void 0:f.token_a)==null?void 0:U.symbol)+" per "+r((lo=(ro=o.positionInfo)==null?void 0:ro.token_b)==null?void 0:lo.symbol),1)]))]),e("div",Ge,[e("div",Je,[Ke,e("div",Qe,[ao(r(o.apy)+" ",1),F(g)])]),e("div",Ze,[xe,e("div",on,"$"+r(("addCommom"in o?o.addCommom:W(P))(o.tvl,2)),1)])])])])}const le=bo(Ae,[["render",en],["__scopeId","data-v-754ed98b"]]),nn=fo({setup(){const o=jo(),n=c(()=>o),T=_o(),A=c(()=>(console.log(n.value.positionInfoObj[T.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),n.value.positionInfoObj[T.params.id])),N=c(()=>{var v;return(v=A.value)==null?void 0:v.needReverse}),I=Do(),h=c(()=>I);return{positionInfo:A,needReverse:N,addCommom:P,wallet:h}}});const Ao=o=>(So("data-v-5d18256e"),o=o(),wo(),o),tn={class:"auto-position-liquidity"},sn={class:"my-liquidity"},ln={class:"left"},an=Ao(()=>e("div",null,"My Liquidity",-1)),un={key:0},dn={key:1},rn={class:"right"},cn=Ao(()=>e("div",null,"My share",-1)),mn={key:0},vn={key:1},pn={class:"my-liquidity-info"},fn={class:"lp-info"},_n={class:"lp-bg"},bn={alt:""},hn={key:0,class:"lp-num"},gn={key:1,class:"lp-num"},yn=Ao(()=>e("div",{class:"assets-pooled-title"}," Pooled Assets ",-1)),$n={class:"assets-pooled"},In={alt:""},kn={key:0},Cn={key:1},Sn=Ao(()=>e("p",null,"--",-1)),wn=Ao(()=>e("p",null,"--",-1)),An=[Sn,wn],Pn={alt:""},Rn={key:0},qn={key:1},Tn=Ao(()=>e("p",null,"--",-1)),Nn=Ao(()=>e("p",null,"--",-1)),Ln=[Tn,Nn];function Bn(o,n,T,A,N,I){var v,g,b,s,t,u,a,i,l,d,k,y,w,V,R,C,E,q,D,Y,G,S,j,K,X,eo,Q,uo,to,mo;const h=Lo("image");return _(),O("div",tn,[e("div",sn,[e("div",ln,[an,(v=o.wallet)!=null&&v.connected?(_(),O("div",un,"$"+r(("addCommom"in o?o.addCommom:W(P))((g=o.positionInfo)==null?void 0:g.myLiquidityUSD)),1)):(_(),O("div",dn,"--"))]),e("div",rn,[cn,(b=o.wallet)!=null&&b.connected?(_(),O("div",mn,r((s=o.positionInfo)==null?void 0:s.myShare)+"%",1)):(_(),O("div",vn,"--%"))])]),e("div",pn,[e("div",fn,[e("div",_n,[H(e("img",bn,null,512),[[h,(u=(t=o.positionInfo)==null?void 0:t.lpInfo)==null?void 0:u.logo_url]])]),(a=o.wallet)!=null&&a.connected?(_(),O("div",hn,r(("addCommom"in o?o.addCommom:W(P))((i=o.positionInfo)==null?void 0:i.myLiquidity))+" LP",1)):(_(),O("div",gn,"-- LP"))]),yn,e("div",$n,[e("div",null,[H(e("img",In,null,512),[[h,o.needReverse?(d=(l=o.positionInfo)==null?void 0:l.token_b)==null?void 0:d.logo_url:(y=(k=o.positionInfo)==null?void 0:k.token_a)==null?void 0:y.logo_url]]),(w=o.wallet)!=null&&w.connected?(_(),O("div",kn,[e("p",null,"$"+r(("addCommom"in o?o.addCommom:W(P))((V=o.positionInfo)==null?void 0:V.myAmountAUSD)),1),e("p",null,r(("addCommom"in o?o.addCommom:W(P))((R=o.positionInfo)==null?void 0:R.amountA))+" "+r(o.needReverse?(E=(C=o.positionInfo)==null?void 0:C.token_b)==null?void 0:E.symbol:(D=(q=o.positionInfo)==null?void 0:q.token_a)==null?void 0:D.symbol),1)])):(_(),O("div",Cn,An))]),e("div",null,[H(e("img",Pn,null,512),[[h,o.needReverse?(G=(Y=o.positionInfo)==null?void 0:Y.token_a)==null?void 0:G.logo_url:(j=(S=o.positionInfo)==null?void 0:S.token_b)==null?void 0:j.logo_url]]),(K=o.wallet)!=null&&K.connected?(_(),O("div",Rn,[e("p",null,"$"+r(("addCommom"in o?o.addCommom:W(P))((X=o.positionInfo)==null?void 0:X.myAmountBUSD)),1),e("p",null,r(("addCommom"in o?o.addCommom:W(P))((eo=o.positionInfo)==null?void 0:eo.amountB))+" "+r(o.needReverse?(uo=(Q=o.positionInfo)==null?void 0:Q.token_a)==null?void 0:uo.symbol:(mo=(to=o.positionInfo)==null?void 0:to.token_b)==null?void 0:mo.symbol),1)])):(_(),O("div",qn,Ln))])])])])}const ae=bo(nn,[["render",Bn],["__scopeId","data-v-5d18256e"]]),Mn=fo({components:{Modal:ee},props:{poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},totalAmount:{type:String,default:""},shareOfPool:{type:String,default:""},minimumReceivedLP:{type:String,default:""}},setup(o,n){const{t:T}=Uo(),A=c(()=>{var u,a,i;return((u=o==null?void 0:o.poolInfo)==null?void 0:u.needReverse)||((i=(a=o==null?void 0:o.poolInfo)==null?void 0:a.poolInfo)==null?void 0:i.needReverse)}),N=No(),I=c(()=>N),h=Co(),v=c(()=>h),g=u=>{var a;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((a=I.value.tokensObj[u==null?void 0:u.address])==null?void 0:a.logo_url)||(v.value.theme==="default"?ko("/image/coins/unknown.png"):ko("/image/coins/sui-unknown.png"))},b=_o(),s=B(!1),t=()=>{n.emit("toAdd")};return console.log(o,"props451"),{needReverse:A,getCoinIcon:g,addCommom:P,t:T,route:b,checked:s,decimalUi:Io,clickSubmit:t}}});const Fo=o=>(So("data-v-bb911124"),o=o(),wo(),o),On=Fo(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Dn={class:"modal-content"},jn={class:"pool-info"},Un={class:"left"},Fn={alt:""},Wn={alt:""},En={class:"pool-name"},Xn={class:"right"},zn={class:"coin-info"},Hn={class:"from-coin-info"},Vn={class:"left"},Yn={class:"coin-amount"},Gn={class:"coin-symbol"},Jn={class:"right"},Kn={class:"to-coin-info"},Qn={class:"left"},Zn={class:"coin-amount"},xn={class:"coin-symbol"},ot={class:"right"},et=Fo(()=>e("div",{class:"to-swap-logo"},null,-1)),nt={class:"add-info"},tt={class:"total-amount"},st=Fo(()=>e("span",null,"Total Amount",-1)),it={class:"total-amount"},lt=Fo(()=>e("span",null,"Share of Pool",-1)),at={class:"total-amount"},ut=Fo(()=>e("span",null,"Minimum Received LP",-1));function dt(o,n,T,A,N,I){const h=Go,v=Xo,g=ne("Modal"),b=Lo("image");return _(),J(g,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:n[0]||(n[0]=s=>o.$emit("onClose"))},{closeIcon:io(()=>[On]),default:io(()=>{var s,t,u,a,i,l,d,k,y,w,V,R,C,E,q,D,Y,G,S,j,K,X,eo,Q;return[e("div",Dn,[e("div",jn,[e("div",Un,[e("div",null,[H(e("img",Fn,null,512),[[b,o.needReverse?(a=(u=o.poolInfo)==null?void 0:u.token_b)==null?void 0:a.logo_url:(t=(s=o.poolInfo)==null?void 0:s.token_a)==null?void 0:t.logo_url]]),F(h,{address:o.needReverse?(k=(d=o.poolInfo)==null?void 0:d.token_b)==null?void 0:k.address:(l=(i=o.poolInfo)==null?void 0:i.token_a)==null?void 0:l.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[H(e("img",Wn,null,512),[[b,o.needReverse?(R=(V=o.poolInfo)==null?void 0:V.token_a)==null?void 0:R.logo_url:(w=(y=o.poolInfo)==null?void 0:y.token_b)==null?void 0:w.logo_url]]),F(h,{address:o.needReverse?(D=(q=o.poolInfo)==null?void 0:q.token_a)==null?void 0:D.address:(E=(C=o.poolInfo)==null?void 0:C.token_b)==null?void 0:E.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",En,[e("span",null,r(o.needReverse?(j=(S=o.poolInfo)==null?void 0:S.token_b)==null?void 0:j.symbol:(G=(Y=o.poolInfo)==null?void 0:Y.token_a)==null?void 0:G.symbol),1),ao(" - "),e("span",null,r(o.needReverse?(Q=(eo=o.poolInfo)==null?void 0:eo.token_a)==null?void 0:Q.symbol:(X=(K=o.poolInfo)==null?void 0:K.token_b)==null?void 0:X.symbol),1)])]),e("div",Xn,[ao(" Fee tier "),e("span",null,r(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),e("div",zn,[e("div",Hn,[e("div",Vn,[e("div",Yn,r(("addCommom"in o?o.addCommom:W(P))(o.fromCoinAmount)||0),1),e("div",Gn,r(o.fromCoin&&o.fromCoin.symbol),1)]),e("div",Jn,[H(e("img",null,null,512),[[b,o.fromCoin&&o.fromCoin.logoURI||o.getCoinIcon(o.fromCoin)]]),F(h,{address:o.fromCoin&&o.fromCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])])]),e("div",Kn,[e("div",Qn,[e("div",Zn,r(("addCommom"in o?o.addCommom:W(P))(o.toCoinAmount)||0),1),e("div",xn,r(o.toCoin&&o.toCoin.symbol),1)]),e("div",ot,[H(e("img",null,null,512),[[b,o.toCoin&&o.toCoin.logoURI||o.getCoinIcon(o.toCoin)]]),F(h,{address:o.toCoin&&o.toCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),et])]),e("div",nt,[e("div",tt,[st,e("span",null,"$"+r(("addCommom"in o?o.addCommom:W(P))(o.totalAmount)),1)]),e("div",it,[lt,e("span",null,r(o.shareOfPool)+"%",1)]),e("div",at,[ut,e("span",null,r(("addCommom"in o?o.addCommom:W(P))(o.minimumReceivedLP))+" "+r(o.fromCoin.symbol)+"-"+r(o.toCoin.symbol),1)])])]),F(v,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:io(()=>[ao(" Add Liquidity ")]),_:1},8,["onClick"])]}),_:1})}const ue=bo(Mn,[["render",dt],["__scopeId","data-v-bb911124"]]),rt=fo({components:{AutoPoolAddModal:ue},setup(){const o=Do(),n=B(!1),T=Co(),A=c(()=>T),N=c(()=>A.value.chainName),I=c(()=>o),h=jo(),v=c(()=>h),g=No(),b=c(()=>g),s=B(),t=_o();so(()=>[v.value.positionInfoObj,t.params.id],([m,p])=>{m&&!Oo(m)&&p&&(s.value=m[p],console.log(s.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const u=c(()=>{var m,p;return console.log((m=s.value)==null?void 0:m.needReverse,"##positionInfo.value?.needReverse"),(p=s.value)==null?void 0:p.needReverse}),a=B(),i=B(),l=B(),d=B(),k=B(!0),y=c(()=>I.value.assets&&a.value&&I.value.assets[a.value.address]?Jo(I.value.assets[a.value.address].balance,a.value.decimals):0),w=c(()=>I.value.assets&&i.value&&I.value.assets[i.value.address]?Jo(I.value.assets[i.value.address].balance,i.value.decimals):0),V=m=>{m==="fromCoin"?(k.value=!0,l.value=y.value>0?a.value.symbol=="SUI"?new $(Number(y.value)).sub(new $(.05)).lt(new $(0))?"0":new $(Number(y.value)).sub(new $(.05)).toString():String(y.value):""):(k.value=!1,d.value=w.value>0?i.value.symbol=="SUI"?new $(Number(w.value)).sub(new $(.05)).lt(new $(0))?"0":new $(Number(w.value)).sub(new $(.05)).toString():String(w.value):"")},R=m=>{m==="fromCoin"?(k.value=!0,l.value=y.value>0?$o(new $(Number(y.value)).div(2).toString(),a.value.decimals).toString():""):(k.value=!1,d.value=w.value>0?$o(new $(Number(w.value)).div(2).toString(),i.value.decimals).toString():"")},C=c(()=>N.value?xo(N.value):{}),E=c(()=>A.value.slippage),q=B("--"),D=B("--"),Y=m=>{const p=new $(s.value.autoPoolPositionInfo.liquidity),L=new $(m.toString());if(p.toNumber()>0&&L.toNumber()>0){const M=L.add(p);console.log("totalLiquidity:",p.toString(),"liqididty:",L.toString(),L.div(p).mul(100).toString());const z=Io(fe(L.div(M).mul(100).toNumber(),2),2);console.log(s.value.decimals,"##positionInfo.value.decimal");const Z=1/Math.pow(10,s.value.decimals);console.log(z,Z,"###288"),Number(z)<Z?q.value=`<${Z}`:q.value=z}else L.toNumber()>0&&p.toNumber()<=0?q.value="100":q.value="--"},G=m=>{const p=new $(m.toString());console.log(m.toString(),"##liquidityAmount.toString()");const L=p.mul(new $(E.value).div(100)),M=new $(Math.pow(10,s.value.lpInfo.decimals));console.log(p.minus(L).div(M).toString(),"##liquidity.minus(minimum).div(decimals).toString()"),D.value=$o(p.minus(L).div(M).toString(),s.value.lpInfo.decimals)},S=B(!1),j=B(!1),K=()=>{if(console.log(s.value,"238##"),!s.value)return;const m=s.value.autoPoolPositionInfo.tick_lower_index,p=s.value.autoPoolPositionInfo.tick_upper_index;console.log(s.value,"###467");const L=yo.sqrtPriceX64ToTickIndex(new no(s.value.current_sqrt_price));console.log(m,L,p,"###324"),L<m&&(u.value?S.value=!0:j.value=!0),L>p&&(u.value?j.value=!0:S.value=!0);let M;if(l.value||d.value){if(k.value){const x=new $(l.value).mul(Math.pow(10,a.value.decimals)).toString();M=new no(x)}else{const x=new $(d.value).mul(Math.pow(10,i.value.decimals)).toString();M=new no(x)}const{liquidityAmount:z,tokenMaxA:Z,tokenMaxB:oo,tokenMaxAOrigin:co,tokenMaxBOrigin:go}=C.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:a.value,tokenB:i.value,lowerTick:m,upperTick:p,coinAmount:M,iscoinA:k.value,roundUp:!0,slippage:Number(E.value)/100,curSqrtPrice:new no(s.value.current_sqrt_price)});console.log(s.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(oo.toString(),Z.toString(),s.value,"###323"),k.value?d.value=Number(oo)>0?oo:"":l.value=Number(Z)>0?Z:"",Y(z),G(z)}};so(()=>s.value,m=>{m&&!Oo(m)&&(a.value=m==null?void 0:m.token_a,i.value=m==null?void 0:m.token_b,S.value=!1,j.value=!1,K())},{immediate:!0});const X=c(()=>b.value.RATES),eo=c(()=>{var m,p,L,M,z,Z,oo,co,go,x;if((p=X.value[(m=a.value)==null?void 0:m.address])!=null&&p.price&&((M=X.value[(L=i.value)==null?void 0:L.address])!=null&&M.price)){console.log((Z=X.value[(z=a.value)==null?void 0:z.address])==null?void 0:Z.price,"RATES.value[fromCoin.value?.address]?.price");const Eo=new $(l.value||0).mul(new $((co=X.value[(oo=a.value)==null?void 0:oo.address])==null?void 0:co.price)),Ho=new $(d.value||0).mul(new $((x=X.value[(go=i.value)==null?void 0:go.address])==null?void 0:x.price));return Io(Eo.add(Ho).toString(),2)}else return"--"});so(l,(m,p)=>{m&&K(),m==""&&(q.value="--",d.value="",D.value="--")}),so(d,(m,p)=>{m&&K(),m==""&&(l.value="",q.value="--",D.value="--")});const{t:Q,locale:uo}=Uo(),to=c(()=>{const m=Number(l.value)>Number(y.value),p=Number(d.value)>Number(w.value);return!l.value&&!d.value?Q("button.enterAmount"):m?Q("button.insufficientBalance",{name:a.value.symbol}):p?Q("button.insufficientBalance",{name:i.value.symbol}):"Add Liquidity"}),mo=c(()=>{const m=Number(l.value)>Number(y.value),p=Number(d.value)>Number(w.value);return!!(!l.value&&!d.value||m||p)}),vo=B(!0),{setIsShowSuccess:Ro,setIsShowRejected:f,setIsShowWaiting:U,setTransactionDesc:ro,setTransactionTxid:lo,setPositiomNum:po}=T,ho=oe("Sui");return{wallet:I,positionInfo:s,isShowAddModal:n,needReverse:u,fromCoin:a,toCoin:i,fromCoinAmount:l,toCoinAmount:d,fromCoinBlance:y,toCoinBlance:w,fixedFromCoin:k,maxBtnSelect:V,halfBtnSelect:R,totalAmountUSD:eo,addCommom:P,shareOfPool:q,minimumReceivedLP:D,addLiquidityBtnText:to,addLiquidityBtnDisabled:mo,toAdd:async()=>{var co,go;n.value=!1,vo.value=!0,lo("");const m=`${P(l.value)} ${(co=a.value)==null?void 0:co.symbol}`,p=`${P(d.value)} ${(go=i.value)==null?void 0:go.symbol}`;ro(`Deposit ${l.value>0?m:""} ${d.value>0&&l.value>0?"and":""} ${d.value>0?p:""}`),U(!0);const L=k.value,M=s.value.autoPoolPositionInfo.tick_lower_index,z=s.value.autoPoolPositionInfo.tick_upper_index;let Z;if(k.value){const x=new $(l.value).mul(Math.pow(10,a.value.decimals)).toString();Z=new no(x)}else{const x=new $(d.value).mul(Math.pow(10,i.value.decimals)).toString();Z=new no(x)}const oo=s.value.rewarderInfo.map(x=>x.coinAddress);try{const x={lowerTick:M,upperTick:z,coinAmount:Z,fix_amount_a:L,slippage:Number(E.value)/100,curSqrtPrice:new no(s.value.current_sqrt_price),id:s.value.id,clmm_pool:s.value.autoPoolPositionInfo.pool,lp_token_type:s.value.lp_token_type,coinTypeA:s.value.autoPoolPositionInfo.coin_type_a,coinTypeB:s.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:oo},Eo=await ho.deposit(x);console.log(Eo,"===>payloadAdd11111");const Ho=await I.value.currentWallet.signAndExecuteTransactionBlock(Eo);let To=C.value.handleTx(Ho);if(console.log("toAdd###tx###",To),To&&To.hash){lo(To.hash),U(!1),Ro(!0),console.log(s,"===>positionInfo");const Vo={title:"Supplied",desc:`Deposit ${l.value>0?m:""} ${d.value>0&&l.value>0?"and":""} ${d.value>0?p:""}`,hash:To.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${l.value>0?m:""} ${d.value>0&&l.value>0?"and":""} ${d.value>0?p:""}`};N.value!=="Aptos"&&(Vo.res=To.res),C.value.showTransitionPending(Vo),await C.value.watchTransaction(Vo)&&setTimeout(()=>{h.updatePositionItem(s.value.id),C.value.getAccount(I.value.address)},1e3),po()}else U(!1),f(!0);l.value="",d.value="",vo.value=!1}catch(x){l.value="",d.value="",console.log("addError###",x),vo.value=!1,U(!1),f(!0)}},showToCoinLock:j,showFromCoinLock:S}}});const Wo=o=>(So("data-v-b955bd61"),o=o(),wo(),o),ct={class:"auto-pool-add"},mt={class:"auto-pool-add-content"},vt={class:"liquidity-action-tab"},pt=Wo(()=>e("div",{class:"increase tab-active"},"Add",-1)),ft={class:"card-item"},_t={class:"card-item"},bt={class:"add-info"},ht={class:"total-amount"},gt=Wo(()=>e("span",null,"Total Amount",-1)),yt={class:"total-amount"},$t=Wo(()=>e("span",null,"Share of Pool",-1)),It={class:"total-amount"},kt=Wo(()=>e("span",null,"Minimum Received LP",-1)),Ct=Wo(()=>e("span",null,"Pool Closed",-1));function St(o,n,T,A,N,I){var s,t,u,a,i;const h=Se,v=we,g=Xo,b=ue;return _(),O("div",ct,[e("div",mt,[e("div",vt,[pt,e("div",{class:"remove",onClick:n[0]||(n[0]=te(l=>o.$emit("changeCurrentTab"),["stop"]))},"Remove")]),e("div",{class:Yo(o.needReverse?"card-container reverse":"card-container")},[e("div",ft,[F(h,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":n[1]||(n[1]=l=>o.fromCoinAmount=l),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[2]||(n[2]=l=>o.maxBtnSelect("fromCoin")),onOnHalf:n[3]||(n[3]=l=>o.halfBtnSelect("fromCoin")),onOnInput:n[4]||(n[4]=l=>{o.fromCoinAmount=l}),onOnFocus:n[5]||(n[5]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock?(_(),J(v,{key:0})):Mo("",!0)]),e("div",_t,[F(h,{modelValue:o.toCoinAmount,"onUpdate:modelValue":n[6]||(n[6]=l=>o.toCoinAmount=l),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[7]||(n[7]=l=>o.maxBtnSelect("toCoin")),onOnHalf:n[8]||(n[8]=l=>o.halfBtnSelect("toCoin")),onOnInput:n[9]||(n[9]=l=>{o.toCoinAmount=l}),onOnFocus:n[10]||(n[10]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock?(_(),J(v,{key:0})):Mo("",!0)])],2),e("div",bt,[e("div",ht,[gt,e("span",null,"$"+r(("addCommom"in o?o.addCommom:W(P))(o.totalAmountUSD)),1)]),e("div",yt,[$t,e("span",null,r(o.shareOfPool)+"%",1)]),e("div",It,[kt,e("span",null,r(("addCommom"in o?o.addCommom:W(P))(o.minimumReceivedLP))+" "+r(o.needReverse?(s=o.toCoin)==null?void 0:s.symbol:(t=o.fromCoin)==null?void 0:t.symbol)+"-"+r(o.needReverse?(u=o.fromCoin)==null?void 0:u.symbol:(a=o.toCoin)==null?void 0:a.symbol),1)])])]),(i=o.positionInfo)!=null&&i.is_pause?(_(),J(g,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:io(()=>[Ct]),_:1})):o.wallet.connected?(_(),J(g,{key:1,class:"big-btn liquidity-btn",disabled:o.addLiquidityBtnDisabled,onClick:n[11]||(n[11]=l=>o.isShowAddModal=!0)},{default:io(()=>[e("span",null,r(o.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(_(),J(g,{key:2,class:"big-btn",onClick:n[12]||(n[12]=l=>o.wallet.setIsShowWalletModal(!0))},{default:io(()=>[e("span",null,r(o.$t("button.connectWallet")),1)]),_:1})),o.isShowAddModal?(_(),J(b,{key:3,"pool-info":o.positionInfo,"from-coin":o.needReverse?o.positionInfo.token_b:o.positionInfo.token_a,"to-coin":o.needReverse?o.positionInfo.token_a:o.positionInfo.token_b,"from-coin-amount":o.needReverse?o.toCoinAmount:o.fromCoinAmount,"to-coin-amount":o.needReverse?o.fromCoinAmount:o.toCoinAmount,"total-amount":o.totalAmountUSD,"share-of-pool":o.shareOfPool,"minimum-received-l-p":o.minimumReceivedLP,onOnClose:n[13]||(n[13]=l=>o.isShowAddModal=!1),onToAdd:o.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","onToAdd"])):Mo("",!0)])}const de=bo(rt,[["render",St],["__scopeId","data-v-b955bd61"]]),wt=fo({props:{inputValue:{type:String,default:""},balance:{type:String,default:""},lpDecimals:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},inputDisabled:{type:Boolean,default:!1},positionInfo:{default:()=>({})}},setup(o,n){const{t:T,locale:A}=Uo(),N=Co(),I=c(()=>N),h=c(()=>new $(Number(o.balance)).div(2)),v=be(he,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function g(){this.$emit("onSelect")}const b=y=>{const w=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${o.lpDecimals&&o.lpDecimals}})?).*$`);y.target.value=y.target.value.replace(w,"$1")},s=Do(),t=c(()=>s),u=No(),a=c(()=>u),i=c(()=>a.value.tokensWarningObj);so(()=>a.value.RATES,y=>{y&&console.log(y,"price====>")},{immediate:!0});const l=c(()=>a.value.tokensObj),d=c(()=>I.value.theme);return{route:_o(),theme:d,tokensObj:l,pool:a,halfBalance:h,t:T,addCommom:P,store:I,wallet:t,indicator:v,inputChange:b,importIcon:ko,selectCoin:g,formatNumber:_e,tokensWarningObj:i,checkNullObj:Oo}}});const At=o=>(So("data-v-e3f5f448"),o=o(),wo(),o),Pt={class:"card"},Rt={class:"top"},qt={key:1,class:"input-div"},Tt={key:0},Nt={class:"left"},Lt={class:"loading-token"},Bt={class:"lp-bg"},Mt={alt:""},Ot={class:"bottom"},Dt=At(()=>e("div",null,null,-1)),jt={class:"top"},Ut={class:"right"},Ft={class:"balance"};function Wt(o,n,T,A,N,I){var b,s;const h=ge,v=se,g=Lo("image");return _(),O("div",Pt,[e("div",Rt,[o.inputDisabled?(_(),O("div",qt,[o.inputValue?(_(),O("span",Tt,r(o.inputValue),1)):(_(),J(v,{key:1,indicator:o.indicator},null,8,["indicator"]))])):(_(),J(h,{key:0,value:o.inputValue=="InsufficientLiquidity"?"":o.inputValue,placeholder:"0.0",disabled:o.inputDisabled,onChange:o.inputChange,onInput:n[0]||(n[0]=t=>o.$emit("onInput",t.target.value)),onFocus:n[1]||(n[1]=t=>o.$emit("onFocus"))},null,8,["value","disabled","onChange"])),e("div",Nt,[e("div",Lt,[e("div",Bt,[H(e("img",Mt,null,512),[[g,(s=(b=o.positionInfo)==null?void 0:b.lpInfo)==null?void 0:s.logo_url]])]),e("p",null,r(o.fromCoin.symbol)+" - "+r(o.toCoin.symbol),1)])])]),e("div",Ot,[Dt,e("div",jt,[e("div",Ut,[ao(r(o.$t("common.balance"))+" ",1),e("span",Ft,r(o.wallet.connected?("addCommom"in o?o.addCommom:W(P))(o.balance,o.lpDecimals):"0"),1)])])])])}const Et=bo(wt,[["render",Wt],["__scopeId","data-v-e3f5f448"]]),Xt=fo({components:{Modal:ee},props:{title:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"11111111111"},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},isIncrease:{type:Boolean,default:!1},fixedFromCoin:{type:Boolean,default:!0},currentPriceTab:{type:String,default:""},currentPrice:{type:String,default:""},currentPriceReverse:{type:String,default:""},showFromCoinLock:{type:Boolean,default:!1},showToCoinLock:{type:Boolean,default:!1},currentDirect:{type:Boolean,default:!0},positionTotalAmount:{type:Number,default:0},tickLower:{type:Number,default:0},tickUpper:{type:Number,default:0},isCreate:{type:Boolean,default:!1}},setup(o,n){const{t:T}=Uo(),A=c(()=>{var u,a,i;return((u=o==null?void 0:o.poolInfo)==null?void 0:u.needReverse)||((i=(a=o==null?void 0:o.poolInfo)==null?void 0:a.poolInfo)==null?void 0:i.needReverse)}),N=No(),I=c(()=>N),h=Co(),v=c(()=>h),g=u=>{var a;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((a=I.value.tokensObj[u==null?void 0:u.address])==null?void 0:a.logo_url)||(v.value.theme==="default"?ko("/image/coins/unknown.png"):ko("/image/coins/sui-unknown.png"))},b=_o(),s=B(!1),t=()=>{n.emit("toAdd")};return console.log(o,"props451"),{needReverse:A,getCoinIcon:g,addCommom:P,t:T,route:b,checked:s,decimalUi:Io,clickSubmit:t}}});const Po=o=>(So("data-v-6d964534"),o=o(),wo(),o),zt=Po(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ht={class:"modal-content"},Vt={class:"pool-info"},Yt={class:"left"},Gt={alt:""},Jt={alt:""},Kt={class:"pool-name"},Qt={class:"right"},Zt={class:"lp-info"},xt=Po(()=>e("div",{class:"lp-num"},[e("p",null,"1,126,122.123456"),e("span",null,"USDT-USDC LP")],-1)),os={class:"lp-bg"},es={alt:""},ns={alt:""},ts={class:"est-receive"},ss=Po(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),is={class:"token-a"},ls=Po(()=>e("div",null,"0.941824",-1)),as={alt:""},us=Po(()=>e("span",null,"USDT",-1)),ds={class:"token-a"},rs=Po(()=>e("div",null,"0.941824",-1)),cs={alt:""},ms=Po(()=>e("span",null,"USDC",-1));function vs(o,n,T,A,N,I){const h=Go,v=Xo,g=ne("Modal"),b=Lo("image");return _(),J(g,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:n[0]||(n[0]=s=>o.$emit("onClose"))},{closeIcon:io(()=>[zt]),default:io(()=>{var s,t,u,a,i,l,d,k,y,w,V,R,C,E,q,D,Y,G,S,j,K,X,eo,Q;return[e("div",Ht,[e("div",Vt,[e("div",Yt,[e("div",null,[H(e("img",Gt,null,512),[[b,o.needReverse?(a=(u=o.poolInfo)==null?void 0:u.token_b)==null?void 0:a.logo_url:(t=(s=o.poolInfo)==null?void 0:s.token_a)==null?void 0:t.logo_url]]),F(h,{address:o.needReverse?(k=(d=o.poolInfo)==null?void 0:d.token_b)==null?void 0:k.address:(l=(i=o.poolInfo)==null?void 0:i.token_a)==null?void 0:l.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[H(e("img",Jt,null,512),[[b,o.needReverse?(R=(V=o.poolInfo)==null?void 0:V.token_a)==null?void 0:R.logo_url:(w=(y=o.poolInfo)==null?void 0:y.token_b)==null?void 0:w.logo_url]]),F(h,{address:o.needReverse?(D=(q=o.poolInfo)==null?void 0:q.token_a)==null?void 0:D.address:(E=(C=o.poolInfo)==null?void 0:C.token_b)==null?void 0:E.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",Kt,[e("span",null,r(o.needReverse?(j=(S=o.poolInfo)==null?void 0:S.token_b)==null?void 0:j.symbol:(G=(Y=o.poolInfo)==null?void 0:Y.token_a)==null?void 0:G.symbol),1),ao(" - "),e("span",null,r(o.needReverse?(Q=(eo=o.poolInfo)==null?void 0:eo.token_a)==null?void 0:Q.symbol:(X=(K=o.poolInfo)==null?void 0:K.token_b)==null?void 0:X.symbol),1)])]),e("div",Qt,[ao(" Fee tier "),e("span",null,r(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),e("div",Zt,[xt,e("div",os,[H(e("img",es,null,512),[[b,o.needReverse?o.poolInfo.token_b.logo_url:o.poolInfo.token_a.logo_url]]),H(e("img",ns,null,512),[[b,o.needReverse?o.poolInfo.token_a.logo_url:o.poolInfo.token_b.logo_url]])])]),e("div",ts,[ss,e("div",is,[ls,e("div",null,[H(e("img",as,null,512),[[b,"1"]]),us])]),e("div",ds,[rs,e("div",null,[H(e("img",cs,null,512),[[b,"1"]]),ms])])])]),F(v,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:io(()=>[ao(r(o.isIncrease?"Increase Liquidity":o.title==o.$t("button.addLiquidity")?"Add Liquidity":"Create and Add Liquidity"),1)]),_:1},8,["onClick"])]}),_:1})}const re=bo(Xt,[["render",vs],["__scopeId","data-v-6d964534"]]),ps=fo({components:{AutoPoolRemoveModal:re},setup(){const o=Do(),n=c(()=>o),T=Co(),A=c(()=>T),N=c(()=>A.value.slippage),I=c(()=>A.value.chainName),h=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],v=B(25),g=_o(),b=jo(),s=c(()=>b),t=c(()=>(console.log(s.value.positionInfoObj[g.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),s.value.positionInfoObj[g.params.id])),u=c(()=>{var f;return(f=t.value)==null?void 0:f.needReverse}),a=B(),i=B(),l=B(!1),d=B(),k=c(()=>{var f;return(f=t.value)==null?void 0:f.myLiquidity}),y=B(!0),w=c(()=>I.value?xo(I.value):{}),V=oe("Sui"),R=B("--"),C=B("--"),E=()=>{if(y.value||!t.value)return;if(!d.value){R.value="--",C.value="--",v.value=0;return}if(Number(d.value)>Number(k.value))return;if(Number(d.value)*Math.pow(10,t.value.decimals)==Number(k.value)){v.value=100,D({value:1}),y.value=!0;return}console.log(t.value,"##lpBalance.value");const f=new $(d.value).mul(Math.pow(10,t.value.lpInfo.decimals)).toString(),U=new $(d.value).div(new $(k.value)).mul(100),ro=t.value.tick_lower_index,lo=t.value.tick_upper_index,po=t.value.token_a.decimals,ho=t.value.token_b.decimals,qo=yo.tickIndexToSqrtPriceX64(ro),m=yo.tickIndexToSqrtPriceX64(lo);console.log(t.value.object.current_sqrt_price,"##positionInfo.value.object.current_sqrt_price"),console.log(f.toString(),t.value.total_supply,"amount.toString");const p=Qo.get_share_liquidity_by_amount({liquidity:t.value.liquidity,total_supply:t.value.total_supply},f.toString());console.log(p,"###liquidity");const L=Ko.getCoinAmountFromLiquidity(new no(p),new no(t.value.object.current_sqrt_price),qo,m,!1),M=new $(L.coinA.toString()).div(Math.pow(10,po)).toString(),z=new $(L.coinB.toString()).div(Math.pow(10,ho)).toString();R.value=Number(M)>0?M:"--",C.value=Number(z)>0?z:"--",console.log(U.toString(),"##ratio"),v.value=U.toNumber(),q.value=$o(f,0)},q=B(),D=f=>{if(!y.value)return;y.value=!0;const U=t.value.token_a.decimals,ro=t.value.token_b.decimals,lo=t.value.tick_lower_index,po=t.value.tick_upper_index,ho=yo.tickIndexToSqrtPriceX64(lo),qo=yo.tickIndexToSqrtPriceX64(po);let m="",p;console.log(t.value,"positionInfo.value.myLiquidity###"),f.value!==1?p=new $(t.value.myLiquidity).mul(Math.pow(10,t.value.lpInfo.decimals)).mul(f.value).toString():p=new $(t.value.myLiquidity).mul(Math.pow(10,t.value.lpInfo.decimals)).toString(),d.value=new $(p).div(Math.pow(10,t.value.lpInfo.decimals)),q.value=p,m=Qo.get_share_liquidity_by_amount({liquidity:t.value.liquidity,total_supply:t.value.total_supply},p),console.log(t.value.myLiquidity,"##positionInfo.value.myLiquidity"),console.log(q.value,"###liquidityVal.value");const L=Ko.getCoinAmountFromLiquidity(new no(m),new no(t.value.object.current_sqrt_price),ho,qo,!0),M=new $(L.coinA.toString()).div(Math.pow(10,U)).toString(),z=new $(L.coinB.toString()).div(Math.pow(10,ro)).toString();console.log(M,z,"amountA121212"),R.value=Number(M)>0?M:"--",C.value=Number(z)>0?z:"--"};so(v,ye((f,U)=>{f!==U&&(Number(f)>100?v.value=100:f&&t.value?(console.log("687===>"),v.value=f,D({value:v.value/100})):(R.value="--",C.value="--"))},300)),so(()=>d.value,f=>{E()},{immediate:!0});const Y=ie(),{setIsShowSuccess:G,setIsShowRejected:S,setIsShowWaiting:j,setTransactionDesc:K,setTransactionTxid:X,setPositiomNum:eo,setTransactionDescText:Q}=T,uo=B(!1),{t:to}=Uo(),mo=async()=>{var p,L;uo.value=!0,X("");const f=Number(R.value)>0?`${P(R.value,a.value.decimals)} ${a.value.symbol}`:"",U=Number(C.value)>0?`${P(C.value,i.value.decimals)} ${i.value.symbol}`:"";console.log(f,U,"###transactionDescTo"),K(to("tips.removeLiquidiyText",{from:u.value?U:f,and:Number(R.value)>0&&Number(C.value)>0?"and":"",to:u.value?f:U})),j(!0);const ro=to("modal.removeLiquidityText2");Q(ro);const lo=t.value.autoPoolPositionInfo.tick_lower_index,po=t.value.autoPoolPositionInfo.tick_upper_index,ho=yo.tickIndexToSqrtPriceX64(lo),qo=yo.tickIndexToSqrtPriceX64(po),m=t.value.rewarderInfo.map(M=>M.coinAddress);console.log(new no(q.value),"##liquidityVal.value");try{const M={lowerSqrtPrice:ho,upperSqrtPrice:qo,lpTokenAmount:new no(q.value),curSqrtPrice:new no(t.value.object.current_sqrt_price),slippage:Number(N.value)/100,id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.pool,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coin_type_a,coinTypeB:t.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:m},z=await V.remove(M),Z=await n.value.currentWallet.signAndExecuteTransactionBlock(z);let oo=w.value.handleTx(Z);if(console.log("0331###remove###tx####",oo),oo&&oo.hash){X(oo.hash),j(!1),G(!0);const co={title:to("common.removeLiquidity"),desc:"",hash:oo.hash,descTransactions:`Remove ${f} ${Number(R.value)>0&&Number(C.value)>0?"and":""} ${U} from the pool`,sender:n.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${R.value} ${(p=a.value)==null?void 0:p.symbol} and ${C.value} ${(L=i.value)==null?void 0:L.symbol}`};co.res=oo.res,w.value.showTransitionPending(co),await w.value.watchTransaction(co)&&(R.value="",C.value="",d.value="",v.value=0,setTimeout(()=>{b.updatePositionItem(t.value.id),w.value.getAccount(n.value.address)},1e3),Number(v.value)==100&&g.name=="auto-pool-detail"&&Y.push("/pool/auto"))}else j(!1),S(!0);uo.value=!1}catch(M){console.log("Remove error",M),uo.value=!1,j(!1),S(!0)}};so(()=>t.value,(f,U)=>{f&&!Oo(f)&&(a.value=f==null?void 0:f.token_a,i.value=f==null?void 0:f.token_b,console.log("触发###"),(!U||U&&U.address!==f.address)&&D({value:v.value/100}))},{immediate:!0});const vo=c(()=>{const f=Number(d.value)>Number(k.value);return!d.value||d.value<=0?to("button.enterAmount"):f?"Invalid Amount":to("button.remove")}),Ro=c(()=>{const f=Number(d.value)>Number(k.value);return!!(!d.value||d.value<=0||f)});return{removeLiquidityBtnText:vo,removeLiquidityBtnDisabled:Ro,wallet:n,ratioArr:h,positionInfo:t,isShowRemoveModal:l,needReverse:u,fromCoin:a,toCoin:i,lpAmount:d,lpBalance:k,sliderVal:v,sFixD:$o,isSlider:y,fromCoinAmount:R,toCoinAmount:C,setPercent:D,toRemove:mo,addCommom:P}}});const zo=o=>(So("data-v-f8155afb"),o=o(),wo(),o),fs={class:"auto-pool-add"},_s={class:"auto-pool-add-content"},bs={class:"liquidity-action-tab"},hs=zo(()=>e("div",{class:"remove tab-active"},"Remove",-1)),gs={class:"card-item"},ys={class:"remove-ratio"},$s=zo(()=>e("div",{class:"remove-ratio-title"},"Amount",-1)),Is={class:"remove-ratio-select"},ks={key:0,class:"ratio"},Cs={key:1,class:"ratio"},Ss={class:"ratio-list"},ws=["onClick"],As={class:"est-receive"},Ps=zo(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),Rs={class:"token-a"},qs={alt:""},Ts={class:"token-a"},Ns={alt:""},Ls=zo(()=>e("span",null,"Pool Closed",-1));function Bs(o,n,T,A,N,I){var t,u,a,i,l,d,k,y,w,V,R,C,E,q,D,Y,G;const h=Et,v=ke,g=Xo,b=re,s=Lo("image");return _(),O("div",fs,[e("div",_s,[e("div",bs,[e("div",{class:"increase",onClick:n[0]||(n[0]=te(S=>o.$emit("changeCurrentTab"),["stop"]))},"Add"),hs]),e("div",{class:Yo(o.needReverse?"card-container reverse":"card-container")},[e("div",gs,[F(h,{modelValue:o.lpAmount,"onUpdate:modelValue":n[1]||(n[1]=S=>o.lpAmount=S),"input-value":o.lpAmount,balance:o.lpBalance,"from-coin":o.needReverse?o.toCoin:o.fromCoin,"to-coin":o.needReverse?o.fromCoin:o.toCoin,"position-info":o.positionInfo,onOnInput:n[2]||(n[2]=S=>{o.isSlider=!1,o.lpAmount=S})},null,8,["modelValue","input-value","balance","from-coin","to-coin","position-info"])])],2),e("div",ys,[$s,e("div",Is,[Number(o.lpBalance)>=Number(o.lpAmount)?(_(),O("div",ks,r(o.sliderVal>0&&Number(("sFixD"in o?o.sFixD:W($o))(o.sliderVal,2))<.01?"<0.01":("sFixD"in o?o.sFixD:W($o))(o.sliderVal,2))+"% ",1)):(_(),O("div",Cs,"--")),e("div",Ss,[(_(!0),O($e,null,Ie(o.ratioArr,(S,j)=>(_(),O("div",{key:j,class:Yo(["ratio-item",o.sliderVal==S.value?"ratio-item-active":""]),onClick:()=>{o.isSlider=!0,o.sliderVal=S.value}},r(S.name),11,ws))),128))])]),F(v,{value:o.sliderVal,"onUpdate:value":n[3]||(n[3]=S=>o.sliderVal=S)},null,8,["value"])]),e("div",As,[Ps,e("div",Rs,[e("div",null,r(("addCommom"in o?o.addCommom:W(P))(o.fromCoinAmount)),1),e("div",null,[H(e("img",qs,null,512),[[s,o.needReverse?(u=(t=o.positionInfo)==null?void 0:t.token_b)==null?void 0:u.logo_url:(i=(a=o.positionInfo)==null?void 0:a.token_a)==null?void 0:i.logo_url]]),e("span",null,r(o.needReverse?(d=(l=o.positionInfo)==null?void 0:l.token_b)==null?void 0:d.symbol:(y=(k=o.positionInfo)==null?void 0:k.token_a)==null?void 0:y.symbol),1)])]),e("div",Ts,[e("div",null,r(("addCommom"in o?o.addCommom:W(P))(o.toCoinAmount)),1),e("div",null,[H(e("img",Ns,null,512),[[s,o.needReverse?(V=(w=o.positionInfo)==null?void 0:w.token_a)==null?void 0:V.logo_url:(C=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:C.logo_url]]),e("span",null,r(o.needReverse?(q=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:q.symbol:(Y=(D=o.positionInfo)==null?void 0:D.token_b)==null?void 0:Y.symbol),1)])])])]),(G=o.positionInfo)!=null&&G.is_pause?(_(),J(g,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:io(()=>[Ls]),_:1})):o.wallet.connected?(_(),J(g,{key:1,class:"big-btn liquidity-btn",disabled:o.removeLiquidityBtnDisabled,onClick:o.toRemove},{default:io(()=>[e("span",null,r(o.removeLiquidityBtnText),1)]),_:1},8,["disabled","onClick"])):(_(),J(g,{key:2,class:"big-btn",onClick:n[4]||(n[4]=S=>o.wallet.setIsShowWalletModal(!0))},{default:io(()=>[e("span",null,r(o.$t("button.connectWallet")),1)]),_:1})),o.isShowRemoveModal?(_(),J(b,{key:3,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,onOnClose:n[5]||(n[5]=S=>o.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):Mo("",!0)])}const ce=bo(ps,[["render",Bs],["__scopeId","data-v-f8155afb"]]),Ms=fo({components:{AutoPoolAdd:de,AutoPositionInfo:le,AutoPositionLiquidity:ae,AutoPoolRemove:ce},setup(){const o=B("add"),n=Do(),T=c(()=>n),A=jo(),N=c(()=>A),I=No(),h=c(()=>I);so(()=>h.value.poolConfigList,a=>{a&&a.length>0&&A.getAutoPoolList()},{immediate:!0}),so(()=>[T.value.address,N.value.autoPoolList,h.value.poolConfigList],([a,i,l])=>{a&&i&&i.length>0&&l&&l.length>0&&A.getMyAutoPoolPosition()},{immediate:!0});const v=_o(),g=c(()=>(console.log(N.value.positionInfoObj[v.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),N.value.positionInfoObj[v.params.id]));so(()=>v.query.action,a=>{a&&(o.value=a)},{immediate:!0});const b=ie();so(()=>T.value.address,a=>{a||b.push("/pool/auto")},{immediate:!0});const s=Co(),t=c(()=>s);return{currentTab:o,positionInfo:g,clickRefresh:()=>{A.getAutoPoolAPY(),A.getAutoPoolList(),I.setPoolConfigList(t.value.chainName,t.value.filterCoinsObj)}}}});const Os={class:"auto-increase-liquidity"},Ds={class:"auto-increase-liquidity-content pc-content"},js={class:"left"},Us={class:"right"},Fs={class:"auto-increase-liquidity-content h5-content"},Ws={class:"left"},Es={class:"right"},Xs={class:"loading-global"};function zs(o,n,T,A,N,I){const h=me,v=le,g=ae,b=de,s=ce,t=se;return _(),O("div",Os,[F(h,{onClickRefresh:o.clickRefresh},null,8,["onClickRefresh"]),e("div",Ds,[e("div",js,[F(v),F(g)]),e("div",Us,[o.currentTab=="add"?(_(),J(b,{key:0,onChangeCurrentTab:n[0]||(n[0]=u=>o.currentTab="remove")})):(_(),J(s,{key:1,onChangeCurrentTab:n[1]||(n[1]=u=>o.currentTab="add")}))])]),e("div",Fs,[e("div",Ws,[F(v),o.currentTab=="add"?(_(),J(b,{key:0,onChangeCurrentTab:n[2]||(n[2]=u=>o.currentTab="remove")})):(_(),J(s,{key:1,onChangeCurrentTab:n[3]||(n[3]=u=>o.currentTab="add")}))]),e("div",Es,[F(g)])]),H(e("div",Xs,[F(t)],512),[[Ce,!o.positionInfo]])])}const _i=bo(Ms,[["render",zs],["__scopeId","data-v-26327692"]]);export{_i as default};
