import{_ as ga}from"./back.f76df0ba.js";import{_ as ya,a as ba}from"./token-warning-modal.fa49e40c.js";import{_ as ka,a as wa}from"./network-tips.5d2b8fa3.js";import{u as Jn,a as un,c as bn,D as B,f as $t,b as jo,d as yn,e as Me,g as dt,n as So,h as ln,s as Xt,t as ko,_ as Wn,i as Ca,p as Ni,j as _a}from"./pool.fabe733c.js";import{a as tn,r as N,v as ao,z as $a,m as ne,A as Ae,b as Ho,e as on,o as b,f as A,h as d,t as w,c as ye,s as L,x as Pe,p as En,k as Dn,C as so,j as Be,i as be,w as $e,u as Ie,F as Bn,D as vr,I as hr,S as gr,B as lo,E as Pa,G as Ia,H as Mi,q as kt,J as yr,M as Xo,K as zo,l as br}from"./entry.517e5b8b.js";import{i as Ee}from"./import-icon.de3e6c66.js";import{_ as Aa,a as Sa}from"./coin-select.d1bd694b.js";import{_ as kr,a as wr,b as Ta}from"./add-liquidity.8b7e0441.js";/* empty css              *//* empty css              *//* empty css              */import{_ as Na}from"./apr-tab.e173c77f.js";import{_ as Ma}from"./apr-tips.f3235058.js";/* empty css              */import{p as Ra}from"./precision.a7a6c57b.js";import{_ as La}from"./status-block.7855d6d8.js";import{_ as Vo}from"./icon-arrow_2x.948aedb2.js";import{_ as Wo}from"./icon-arrow_2x.4ffddb8e.js";import{_ as Cr}from"./coin-pair-name.ef33dcbd.js";import{u as qa}from"./notifi.afd51f0d.js";/* empty css              */import"./icon-selected_3x.350736e2.js";import"./token-warning.b1912a91.js";import"./img-no-Positions_2x.b3e4e7f0.js";import"./c-switch.d64f0a12.js";import"./index.813c4665.js";const Ua=tn({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,n){const t=N(!1),o=N(null),i=N(0),r=N(20),a=Jn(),l=un(),s=N(!1);ao(()=>{}),$a(()=>{clearInterval(o.value)});const u=()=>{o.value=setInterval(()=>{var I;s.value||i.value<r.value&&(i.value+=1,i.value===r.value&&((I=e==null?void 0:e.poolInfo)!=null&&I.poolAddress&&a.updateCurrentPools(e.poolInfo.poolAddress,l.chainName),i.value=0))},1e3)},f=ne(()=>l.slippage),h=()=>{n.emit("clearAll")},m=()=>{i.value=0,n.emit("clickRefresh")};Ae(()=>e.poolInfo,I=>{I&&!o.value&&u()},{immediate:!0});const C=Ho();return{clickRefresh:m,isShowSwapSetting:t,countdown:i,autoRefreshTime:r,slippage:f,clearAll:h,checkNullObj:bn,router:C}}});const Oa=e=>(En("data-v-b618315f"),e=e(),Dn(),e),Ba={class:"title"},Fa={class:"left"},Ea=Oa(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Da={class:"deposit-progress"};function ja(e,n,t,o,i,r){var s,u;const a=ya,l=ka;return b(),A("div",Ba,[d("div",Fa,[d("span",null,w(e.poolInfo?e.$t("common.concentratedLiquidity"):(u=(s=e.$router)==null?void 0:s.query)!=null&&u.action?e.$t("newAdd.createClmmPool"):e.$t("common.concentratedLiquidity")),1)]),d("div",{class:Pe(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[d("div",{class:"slippage-icon",onClick:n[0]||(n[0]=f=>e.isShowSwapSetting=!0)},[Ea,d("span",null,w(e.slippage)+"%",1)]),d("div",Da,[e.poolInfo?(b(),ye(a,{key:0,loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])):L("",!0)])],2),e.isShowSwapSetting?(b(),ye(l,{key:0,onOnClose:n[1]||(n[1]=f=>e.isShowSwapSetting=!1)})):L("",!0)])}const Ha=on(Ua,[["render",ja],["__scopeId","data-v-b618315f"]]);const Xa=tn({props:{coinIcon:{type:String,default:""},coin:{type:Object,default:()=>({})},isDisabled:{type:Boolean,default:!1}},setup(e){const n=un(),t=ne(()=>n),o=N(""),i=N(""),r=N(""),a=Jn(),l=ne(()=>a);Ae(()=>[e.coin,l.value.tokensObj],([u,f])=>{var h;u?(i.value=f&&f[u.address]&&((h=f[u.address])==null?void 0:h.labels),o.value=u.name,r.value=u.symbol):(i.value="",o.value="",r.value="")},{immediate:!0,deep:!0});const s=ne(()=>{var u,f,h;return e.coinIcon||((h=(f=l==null?void 0:l.value)==null?void 0:f.tokensObj[(u=e.coin)==null?void 0:u.address])==null?void 0:h.logo_url)||(t.value.theme==="default"?Ee("/image/coins/unknown.png"):Ee("/image/coins/sui-unknown.png"))});return{store:t,importIcon:Ee,coinName:o,coinLabels:i,coinSymbol:r,currentIcon:s}}}),za=e=>(En("data-v-fd0ee899"),e=e(),Dn(),e),Va=["src"],Wa={class:"coin-info"},Ka={class:"symbol"},Ya={key:0,class:"name"},Ga={key:0,class:"icon","aria-hidden":"true"},Qa=za(()=>d("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ja=[Qa];function Za(e,n,t,o,i,r){return b(),A("div",{class:Pe(e.isDisabled?"coin-block disabled":"coin-block")},[d("div",null,[d("img",{src:e.currentIcon},null,8,Va),d("div",Wa,[d("div",Ka,w(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinName?(b(),A("div",Ya,w(e.coin.name)+" "+w(e.coinLabels?`(${e.coinLabels})`:""),1)):L("",!0)])]),d("div",null,[e.isDisabled?L("",!0):(b(),A("svg",Ga,Ja))])],2)}const xa=on(Xa,[["render",Za],["__scopeId","data-v-fd0ee899"]]),es=tn({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})}},setup(){const e=un();return{storeIndex:ne(()=>e)}}});const ns={class:"unilateral"},ts={key:0,src:kr,alt:""},os={key:1,src:wr,alt:""},is={key:2};function rs(e,n,t,o,i,r){return b(),A("div",ns,[d("div",null,[e.storeIndex.theme=="default"?(b(),A("img",ts)):(b(),A("img",os)),e.fromCoin&&e.toCoin&&e.poolInfo?(b(),A("p",is,w(e.$t("tips.marketprice")),1)):L("",!0)])])}const as=on(es,[["render",rs],["__scopeId","data-v-d81a96c0"]]),ss=tn({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})},showfromCoinLock:{type:Boolean,default:!1},showtoCoinLock:{type:Boolean,default:!1}},setup(){const e=un();return{storeIndex:ne(()=>e)}}});const ls={class:"create-pool-lock"},us={key:0,src:kr,alt:""},cs={key:1,src:wr,alt:""};function ds(e,n,t,o,i,r){return b(),A("div",ls,[d("div",null,[e.storeIndex.theme=="default"?(b(),A("img",us)):(b(),A("img",cs))])])}const fs=on(ss,[["render",ds],["__scopeId","data-v-5d070e17"]]);B.config({precision:64,rounding:B.ROUND_DOWN,toExpNeg:-64,toExpPos:64});const ps=tn({props:{minPrice:{type:String,default:""},maxPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},slippage:{type:Number,default:0},currentPrice:{type:Number,default:0},currentPriceReverse:{type:Number,default:0},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""}},setup(e){const n=N(""),t=N(""),o=un(),i=ne(()=>o),r=Jn(),a=ne(()=>r),l=ne(()=>i.value.chainName?jo(i.value.chainName):{});console.log(e,"props====>");const s=so(),u=async()=>{var te;if(!e.minPrice&&!e.maxPrice)return;const{TickUtil:m,TickMath:C,getNearestTickByTick:I}=l.value,le=e.poolInfo.token_a.decimals,g=e.poolInfo.token_b.decimals;let S,P,y,p,k,q,X,x=1,fe=1;const re=e.poolInfo.current_tick_index;let T=a.value.poolPriceConfigObj&&a.value.poolPriceConfigObj[e.poolInfo.address]&&a.value.poolPriceConfigObj[e.poolInfo.address].recommend_ranges||{};if(e.poolInfo.token_a.address.toLowerCase()===e.fromCoin.address.toLowerCase()&&e.poolInfo.token_b.address.toLowerCase()===e.toCoin.address.toLowerCase()?X=!0:X=!1,e.minPrice==="0"&&e.maxPrice==="∞"?(y=m.getMinIndex(e.poolInfo.tickSpacing),p=m.getMaxIndex(e.poolInfo.tickSpacing),C.tickIndexToSqrtPriceX64(y),C.tickIndexToSqrtPriceX64(p)):e.currentPriceTab=="custom"||(te=s==null?void 0:s.query)!=null&&te.action?(X?(S=Number(e.minPrice),P=Number(e.maxPrice)):(S=1/Number(e.maxPrice),P=1/Number(e.minPrice)),console.log(S,"min===>"),k=C.priceToTickIndex(new B(S),le,g),q=C.priceToTickIndex(new B(P),le,g),S==0&&(k=-443636),console.log(k,"===>minTick"),console.log(e.poolInfo.tickSpacing,"===>props.poolInfo.tickSpacing"),y=I(k,Number(e.poolInfo.tickSpacing)),p=I(q,Number(e.poolInfo.tickSpacing)),console.log(y,p,"===>tick_upper"),C.priceToSqrtPriceX64(new B(S),le,g),C.priceToSqrtPriceX64(new B(P),le,g)):(y=T&&T[e.currentPriceTab]&&T[e.currentPriceTab].lower,p=T&&T[e.currentPriceTab]&&T[e.currentPriceTab].upper,C.tickIndexToSqrtPriceX64(y),C.tickIndexToSqrtPriceX64(p)),e.maxPrice==="∞"||re>y&&re<p){let ue;if(e.fixedFromCoin){const ve=new B(1).mul(Math.pow(10,e.fromCoin.decimals)).toString();ue=new yn(ve)}else{const ve=new B(1).mul(Math.pow(10,e.toCoin.decimals)).toString();ue=new yn(ve)}const{tokenMaxA:oe,tokenMaxB:ie}=await l.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:e.poolInfo.token_a,tokenB:e.poolInfo.token_b,lowerTick:y,upperTick:p,coinAmount:ue,iscoinA:X?e.fixedFromCoin:!e.fixedFromCoin,roundUp:!0,slippage:Number(e.slippage)/100,curSqrtPrice:new yn(e.poolInfo.current_sqrt_price)});X?e.fixedFromCoin?fe=Number(ie)>0?ie:"":x=Number(oe)>0?oe:"":e.fixedFromCoin?fe=oe:x=ie}else re>=p?X?(fe=1,x=0):(x=1,fe=0):re<=y&&(X?(fe=0,x=1):(fe=1,x=0));const J=x?Number(x):0,O=fe?Number(fe):0,V=O+Number(X?J*e.currentPrice:J*e.currentPriceReverse),we=((X?e.currentPrice*J:e.currentPriceReverse*J)/V*100).toFixed(0),W=(O/V*100).toFixed(0);n.value=we,t.value=W};Ae(()=>[e.poolInfo,e.minPrice,e.maxPrice],([m,C,I])=>{console.log("0421####ratio###watch###poolInfo###",m),console.log("0421####ratio###watch###minPrice###",C),console.log("0421####ratio###watch###maxPrice###",I),C&&I&&m&&!bn(m)&&(C!=="0"||I!=="0")?u():(console.log("0421####ratio###watch###clear###"),n.value="",t.value="")},{immediate:!0,deep:!0});let f={};Ae(()=>a.value.RATES,m=>{m&&(f=m)},{immediate:!0});const h=ne(()=>{const m=$t(Number(e.fromCoinAmount)*Number(f&&f[e.fromCoin.address]&&f[e.fromCoin.address].price),2),C=$t(Number(e.toCoinAmount)*Number(f&&f[e.toCoin.address]&&f[e.toCoin.address].price),2);return m!=="--"&&C!=="--"?Number(m)+Number(C):"--"});return console.log(h.value,"totalAmount351"),{fromCoinRatio:n,toCoinRatio:t,totalAmount:h,fixD:$t}}});const ms=e=>(En("data-v-aeaaa66a"),e=e(),Dn(),e),vs={class:"deposit-ratio"},hs={class:"lebal"},gs=ms(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-icon-information"})],-1)),ys={key:0,class:"text"},bs={key:1},ks={key:0,class:"deposit-ratio totalAmount"},ws={class:"lebal"},Cs={class:"text"};function _s(e,n,t,o,i,r){const a=vr;return b(),A(Bn,null,[d("div",vs,[d("div",hs,[Be(w(e.$t("newAdd.depositRatio"))+" ",1),be(a,{placement:"bottom","arrow-point-at-center":""},{title:$e(()=>[d("span",null,w(e.$t("newAdd.depositRatioTips")),1)]),default:$e(()=>[gs]),_:1})]),e.currentPriceTab!=="full range"?(b(),A("div",ys,w(e.fromCoinRatio!=="--"?e.fromCoinRatio+"%":"--")+" "+w(e.fromCoinRatio!=="--"?e.fromCoin&&e.fromCoin.symbol:"")+" / "+w(e.toCoinRatio!=="--"?e.toCoinRatio+"%":"--")+" "+w(e.toCoinRatio!=="--"?e.toCoin&&e.toCoin.symbol:""),1)):(b(),A("div",bs," 50% "+w(e.fromCoin&&e.fromCoin.symbol)+" / 50% "+w(e.toCoin&&e.toCoin.symbol),1))]),e.fromCoinAmount&&e.toCoinAmount&&e.totalAmount!==0&&e.totalAmount!=="--"?(b(),A("div",ks,[d("div",ws,w(e.$t("newAdd.totalAmount")),1),d("div",Cs,"$"+w(("fixD"in e?e.fixD:Ie($t))(e.totalAmount,2)),1)])):L("",!0)],64)}const $s=on(ps,[["render",_s],["__scopeId","data-v-aeaaa66a"]]),Ps=tn({props:{clickClear:{type:Boolean,default:!1},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},intPrice:{type:String,default:""}},setup(e,n){const t=N("");return{inpValue:t,changecurrentPrice:i=>{var a;console.log(i.target.value,"e.target.value");const r=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(a=e.fromCoin)==null?void 0:a.decimals}})?).*$`);i.target.value=i.target.value.replace(r,"$1"),t.value=i.target.value,console.log(t.value,"===>inpValue.value"),n.emit("changecurrentPrice",t.value)}}}});const Is={class:"set-init-price"},As={class:"init-price-tips"};function Ss(e,n,t,o,i,r){var l,s,u,f;const a=hr;return b(),A("div",Is,[be(a,{type:"text",placeholder:"0.0",value:e.intPrice,disabled:!((s=(l=e.$route)==null?void 0:l.query)!=null&&s.fee),onChange:e.changecurrentPrice},null,8,["value","disabled","onChange"]),d("div",As,w((u=e.toCoin)==null?void 0:u.symbol)+" per "+w((f=e.fromCoin)==null?void 0:f.symbol),1)])}const Ts=on(Ps,[["render",Ss],["__scopeId","data-v-8d2ae1a1"]]),Ns=-443636;function Ri(e,n){const t=Ms(e),o=(t-Ns)%n;return o>n/2?t-o+n:t-o}const _r=new B("1.0001");function Ms(e){return e.log(_r).toDP(0,B.ROUND_HALF_UP).toNumber()}function Li(e){return _r.pow(e)}const Rs=tn({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},emits:["onInput"],setup(e,n){const t=N(""),o=N("");let i=N(""),r=N("");const a=so(),l=()=>{if(Number.isNaN(t.value)||Number(t.value)!==0&&!t.value||!e.poolInfo.tickSpacing)return;const m=Ri(new B(t.value.toString()),Number(f.value.tickSpacing)),C=Li(m+Number(f.value.tickSpacing));if(e.pType=="Min"&&Number(C.toString())>=Number(r.value.toString()))return;const I=C.toString();n.emit("onInput",I)},s=()=>{if(Number.isNaN(t.value)||!t.value||!e.poolInfo.tickSpacing)return;const m=Ri(new B(t.value),Number(f.value.tickSpacing)),C=Li(m-Number(f.value.tickSpacing)),I=C.toString();e.pType=="Max"&&Number(C)<=Number(i.value)||n.emit("onInput",I)},u=m=>{let C=m.toString().replace(/[^\d.]/g,"");const I=/^\d+(\.\d+)?$/;C.split(".").length>2&&!I.exec(C)&&(C=C.substr(0,C.length-1)),o.value=String(C),console.log(C,"v===>"),(Me(C,6)>0||String(C)=="0")&&n.emit("onInput",C.toString())};Ae(()=>e.defaultMinPrice,(m,C)=>{m!==C&&(console.log(e.defaultMinPrice,"props.defaultMinPrice===>"),i.value=e.defaultMinPrice,console.log(i.value,"props.minPrice.value===>"))},{immediate:!0}),Ae(()=>e.defaultMaxPrice,(m,C)=>{m!==C&&(r.value=e.defaultMaxPrice)},{immediate:!0}),Ae(()=>o.value,m=>{console.log(m,"=sdajlaksjdkldas")},{immediate:!0}),Ae(()=>[e.inputValue,a.query.action],([m])=>{if(console.log(m,"==>newValue"),m&&m!=="0"&&m!=="∞"){t.value=m;const I=m.toString().split(".")[1];o.value=m!=="0"&&m!=="∞"&&I&&I.length>6?Me(m.toString(),6):m.toString()}else(m=="0"||m=="∞"||a.query.action)&&(o.value=m);console.log(o.value,"===> oValue.value")},{immediate:!0});const f=N({});Ae(()=>e.poolInfo,(m,C)=>{m&&(f.value=m)},{immediate:!0});const h=N("");return Ae(()=>e.currentPriceTab,m=>{h.value=m},{immediate:!0}),console.log(e,"props=======>"),{addPrice:l,minusPrice:s,oValue:o,changeValue:u,isDisabled:h,route:a}}});const Ls={class:"set-price-item"},qs={class:"title"},Us={class:"input-box"},Os={class:"minus-btn"},Bs=["disabled"],Fs={class:"plus-btn"};function Es(e,n,t,o,i,r){const a=hr,l=gr;return b(),A("div",Ls,[d("div",qs,w(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),be(l,{loading:e.loading,active:"",paragraph:!1},{default:$e(()=>[d("div",Us,[d("a",Os,[d("div",{class:Pe(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:n[0]||(n[0]=(...s)=>e.minusPrice&&e.minusPrice(...s))},null,10,Bs)]),be(a,{id:"pValu",value:e.oValue,"onUpdate:value":n[1]||(n[1]=s=>e.oValue=s),disabled:e.route.query.action&&!e.intPrice,autocomplete:"off",placeholder:"0",onChange:n[2]||(n[2]=s=>e.changeValue(s.target.value))},null,8,["value","disabled"]),d("a",Fs,[d("div",{class:Pe(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"addDis":"add"),onClick:n[3]||(n[3]=(...s)=>e.addPrice&&e.addPrice(...s))},null,2)])])]),_:1},8,["loading"]),d("p",{class:Pe(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},w(e.toCoin&&e.toCoin.symbol)+" per "+w(e.fromCoin&&e.fromCoin.symbol),3)])}const qi=on(Rs,[["render",Es],["__scopeId","data-v-8eabf3d7"]]),Ds=tn({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},setup(e,n){let t=N(""),o=N(""),i=N(),r=N(!1),a=N(!1);const l=N({}),s=un(),u=ne(()=>s);ao(()=>{t.value=e.min,o.value=e.max}),Ae(()=>e.currentPriceTab,(g,S)=>{g!==S&&(i.value=e.currentPriceTab)},{immediate:!0}),Ae(()=>e.min,(g,S)=>{g!==S&&(t.value=g,console.log(e.min,"===> props.min"))}),Ae(()=>e.max,(g,S)=>{g!==S&&(o.value=g)}),Ae(()=>e.poolInfo,(g,S)=>{g&&(l.value=g)},{immediate:!0});const f=N("");Ae(()=>e.intPrice,g=>{console.log(e.intPrice,"===>props.intPrice"),f.value=g},{immediate:!0,deep:!0});const h=g=>{console.log(g,"val===>"),t.value=g,n.emit("onChangeMinPrice",g)},m=g=>{o.value=g,n.emit("onChangeMaxPrice",g)};Ae(r,(g,S)=>{g!==S&&n.emit("onChangeFullRange",g)});const C=()=>{t.value=e.defaultMinPrice,o.value=e.defaultMaxPrice,a.value=!1,r.value=!1},I=()=>{a.value=!1,t.value="0",o.value="∞"};return Ae(r,(g,S)=>{g!==S&&n.emit("onChangeFullRange",g)}),{store:u,changeMinPrice:h,changeMaxPrice:m,importIcon:Ee,resetPrice:C,changeShowUnderStand:()=>{r.value=!r.value,r.value?a.value=!0:C(),a.value||(t.value=e.defaultMinPrice,o.value=e.defaultMaxPrice)},showUnderStand:a,minPrice:t,maxPrice:o,understand:I,isRadio:r,initPirce:f}}});const js={class:"set-price"},Hs={class:"card-container"},Xs={key:0,class:"card"},zs=["src"],Vs={key:1,class:"understand"},Ws={class:"left"},Ks={class:"right"};function Ys(e,n,t,o,i,r){const a=qi,l=qi,s=lo;return b(),A("div",js,[d("div",Hs,[e.showUnderStand?(b(),A("div",Vs,[d("div",Ws,[d("p",null,w(e.$t("common.lowerEfficiency")),1),d("p",null,w(e.$t("common.lowerEfficiencyTips")),1)]),d("div",Ks,[be(s,{onClick:e.understand},{default:$e(()=>[Be(w(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(b(),A("div",Xs,[be(a,{value:e.minPrice,"onUpdate:value":n[0]||(n[0]=u=>e.minPrice=u),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,"int-price":e.initPirce,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","int-price","onOnInput","onAddValue","onDelValue"]),be(l,{value:e.maxPrice,"onUpdate:value":n[1]||(n[1]=u=>e.maxPrice=u),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"int-price":e.initPirce,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","int-price","current-price-tab","onOnInput","onAddValue","onDelValue"]),d("img",{src:("importIcon"in e?e.importIcon:Ie(Ee))("/image/lmg-line@2x.png"),alt:""},null,8,zs)]))])])}const Gs=on(Ds,[["render",Ys],["__scopeId","data-v-01a6f14e"]]);function zt(e,n){return e==null||n==null?NaN:e<n?-1:e>n?1:e>=n?0:NaN}function Qs(e,n){return e==null||n==null?NaN:n<e?-1:n>e?1:n>=e?0:NaN}function $r(e){let n,t,o;e.length!==2?(n=zt,t=(l,s)=>zt(e(l),s),o=(l,s)=>e(l)-s):(n=e===zt||e===Qs?e:Js,t=e,o=e);function i(l,s,u=0,f=l.length){if(u<f){if(n(s,s)!==0)return f;do{const h=u+f>>>1;t(l[h],s)<0?u=h+1:f=h}while(u<f)}return u}function r(l,s,u=0,f=l.length){if(u<f){if(n(s,s)!==0)return f;do{const h=u+f>>>1;t(l[h],s)<=0?u=h+1:f=h}while(u<f)}return u}function a(l,s,u=0,f=l.length){const h=i(l,s,u,f-1);return h>u&&o(l[h-1],s)>-o(l[h],s)?h-1:h}return{left:i,center:a,right:r}}function Js(){return 0}function Zs(e){return e===null?NaN:+e}const xs=$r(zt),el=xs.right;$r(Zs).center;const nl=el;class Ui extends Map{constructor(n,t=il){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),n!=null)for(const[o,i]of n)this.set(o,i)}get(n){return super.get(Oi(this,n))}has(n){return super.has(Oi(this,n))}set(n,t){return super.set(tl(this,n),t)}delete(n){return super.delete(ol(this,n))}}function Oi({_intern:e,_key:n},t){const o=n(t);return e.has(o)?e.get(o):t}function tl({_intern:e,_key:n},t){const o=n(t);return e.has(o)?e.get(o):(e.set(o,t),t)}function ol({_intern:e,_key:n},t){const o=n(t);return e.has(o)&&(t=e.get(o),e.delete(o)),t}function il(e){return e!==null&&typeof e=="object"?e.valueOf():e}const rl=Math.sqrt(50),al=Math.sqrt(10),sl=Math.sqrt(2);function Gt(e,n,t){const o=(n-e)/Math.max(0,t),i=Math.floor(Math.log10(o)),r=o/Math.pow(10,i),a=r>=rl?10:r>=al?5:r>=sl?2:1;let l,s,u;return i<0?(u=Math.pow(10,-i)/a,l=Math.round(e*u),s=Math.round(n*u),l/u<e&&++l,s/u>n&&--s,u=-u):(u=Math.pow(10,i)*a,l=Math.round(e/u),s=Math.round(n/u),l*u<e&&++l,s*u>n&&--s),s<l&&.5<=t&&t<2?Gt(e,n,t*2):[l,s,u]}function ll(e,n,t){if(n=+n,e=+e,t=+t,!(t>0))return[];if(e===n)return[e];const o=n<e,[i,r,a]=o?Gt(n,e,t):Gt(e,n,t);if(!(r>=i))return[];const l=r-i+1,s=new Array(l);if(o)if(a<0)for(let u=0;u<l;++u)s[u]=(r-u)/-a;else for(let u=0;u<l;++u)s[u]=(r-u)*a;else if(a<0)for(let u=0;u<l;++u)s[u]=(i+u)/-a;else for(let u=0;u<l;++u)s[u]=(i+u)*a;return s}function To(e,n,t){return n=+n,e=+e,t=+t,Gt(e,n,t)[2]}function ul(e,n,t){n=+n,e=+e,t=+t;const o=n<e,i=o?To(n,e,t):To(e,n,t);return(o?-1:1)*(i<0?1/-i:i)}function cl(e,n){let t;if(n===void 0)for(const o of e)o!=null&&(t<o||t===void 0&&o>=o)&&(t=o);else{let o=-1;for(let i of e)(i=n(i,++o,e))!=null&&(t<i||t===void 0&&i>=i)&&(t=i)}return t}function dl(e,n,t){e=+e,n=+n,t=(i=arguments.length)<2?(n=e,e=0,1):i<3?1:+t;for(var o=-1,i=Math.max(0,Math.ceil((n-e)/t))|0,r=new Array(i);++o<i;)r[o]=e+o*t;return r}var fl={value:()=>{}};function Ko(){for(var e=0,n=arguments.length,t={},o;e<n;++e){if(!(o=arguments[e]+"")||o in t||/[\s.]/.test(o))throw new Error("illegal type: "+o);t[o]=[]}return new Vt(t)}function Vt(e){this._=e}function pl(e,n){return e.trim().split(/^|\s+/).map(function(t){var o="",i=t.indexOf(".");if(i>=0&&(o=t.slice(i+1),t=t.slice(0,i)),t&&!n.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:o}})}Vt.prototype=Ko.prototype={constructor:Vt,on:function(e,n){var t=this._,o=pl(e+"",t),i,r=-1,a=o.length;if(arguments.length<2){for(;++r<a;)if((i=(e=o[r]).type)&&(i=ml(t[i],e.name)))return i;return}if(n!=null&&typeof n!="function")throw new Error("invalid callback: "+n);for(;++r<a;)if(i=(e=o[r]).type)t[i]=Bi(t[i],e.name,n);else if(n==null)for(i in t)t[i]=Bi(t[i],e.name,null);return this},copy:function(){var e={},n=this._;for(var t in n)e[t]=n[t].slice();return new Vt(e)},call:function(e,n){if((i=arguments.length-2)>0)for(var t=new Array(i),o=0,i,r;o<i;++o)t[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(n,t)},apply:function(e,n,t){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(n,t)}};function ml(e,n){for(var t=0,o=e.length,i;t<o;++t)if((i=e[t]).name===n)return i.value}function Bi(e,n,t){for(var o=0,i=e.length;o<i;++o)if(e[o].name===n){e[o]=fl,e=e.slice(0,o).concat(e.slice(o+1));break}return t!=null&&e.push({name:n,value:t}),e}var No="http://www.w3.org/1999/xhtml";const Fi={svg:"http://www.w3.org/2000/svg",xhtml:No,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function uo(e){var n=e+="",t=n.indexOf(":");return t>=0&&(n=e.slice(0,t))!=="xmlns"&&(e=e.slice(t+1)),Fi.hasOwnProperty(n)?{space:Fi[n],local:e}:e}function vl(e){return function(){var n=this.ownerDocument,t=this.namespaceURI;return t===No&&n.documentElement.namespaceURI===No?n.createElement(e):n.createElementNS(t,e)}}function hl(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Pr(e){var n=uo(e);return(n.local?hl:vl)(n)}function gl(){}function Yo(e){return e==null?gl:function(){return this.querySelector(e)}}function yl(e){typeof e!="function"&&(e=Yo(e));for(var n=this._groups,t=n.length,o=new Array(t),i=0;i<t;++i)for(var r=n[i],a=r.length,l=o[i]=new Array(a),s,u,f=0;f<a;++f)(s=r[f])&&(u=e.call(s,s.__data__,f,r))&&("__data__"in s&&(u.__data__=s.__data__),l[f]=u);return new cn(o,this._parents)}function bl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function kl(){return[]}function Ir(e){return e==null?kl:function(){return this.querySelectorAll(e)}}function wl(e){return function(){return bl(e.apply(this,arguments))}}function Cl(e){typeof e=="function"?e=wl(e):e=Ir(e);for(var n=this._groups,t=n.length,o=[],i=[],r=0;r<t;++r)for(var a=n[r],l=a.length,s,u=0;u<l;++u)(s=a[u])&&(o.push(e.call(s,s.__data__,u,a)),i.push(s));return new cn(o,i)}function Ar(e){return function(){return this.matches(e)}}function Sr(e){return function(n){return n.matches(e)}}var _l=Array.prototype.find;function $l(e){return function(){return _l.call(this.children,e)}}function Pl(){return this.firstElementChild}function Il(e){return this.select(e==null?Pl:$l(typeof e=="function"?e:Sr(e)))}var Al=Array.prototype.filter;function Sl(){return Array.from(this.children)}function Tl(e){return function(){return Al.call(this.children,e)}}function Nl(e){return this.selectAll(e==null?Sl:Tl(typeof e=="function"?e:Sr(e)))}function Ml(e){typeof e!="function"&&(e=Ar(e));for(var n=this._groups,t=n.length,o=new Array(t),i=0;i<t;++i)for(var r=n[i],a=r.length,l=o[i]=[],s,u=0;u<a;++u)(s=r[u])&&e.call(s,s.__data__,u,r)&&l.push(s);return new cn(o,this._parents)}function Tr(e){return new Array(e.length)}function Rl(){return new cn(this._enter||this._groups.map(Tr),this._parents)}function Qt(e,n){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=n}Qt.prototype={constructor:Qt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,n){return this._parent.insertBefore(e,n)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ll(e){return function(){return e}}function ql(e,n,t,o,i,r){for(var a=0,l,s=n.length,u=r.length;a<u;++a)(l=n[a])?(l.__data__=r[a],o[a]=l):t[a]=new Qt(e,r[a]);for(;a<s;++a)(l=n[a])&&(i[a]=l)}function Ul(e,n,t,o,i,r,a){var l,s,u=new Map,f=n.length,h=r.length,m=new Array(f),C;for(l=0;l<f;++l)(s=n[l])&&(m[l]=C=a.call(s,s.__data__,l,n)+"",u.has(C)?i[l]=s:u.set(C,s));for(l=0;l<h;++l)C=a.call(e,r[l],l,r)+"",(s=u.get(C))?(o[l]=s,s.__data__=r[l],u.delete(C)):t[l]=new Qt(e,r[l]);for(l=0;l<f;++l)(s=n[l])&&u.get(m[l])===s&&(i[l]=s)}function Ol(e){return e.__data__}function Bl(e,n){if(!arguments.length)return Array.from(this,Ol);var t=n?Ul:ql,o=this._parents,i=this._groups;typeof e!="function"&&(e=Ll(e));for(var r=i.length,a=new Array(r),l=new Array(r),s=new Array(r),u=0;u<r;++u){var f=o[u],h=i[u],m=h.length,C=Fl(e.call(f,f&&f.__data__,u,o)),I=C.length,le=l[u]=new Array(I),g=a[u]=new Array(I),S=s[u]=new Array(m);t(f,h,le,g,S,C,n);for(var P=0,y=0,p,k;P<I;++P)if(p=le[P]){for(P>=y&&(y=P+1);!(k=g[y])&&++y<I;);p._next=k||null}}return a=new cn(a,o),a._enter=l,a._exit=s,a}function Fl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function El(){return new cn(this._exit||this._groups.map(Tr),this._parents)}function Dl(e,n,t){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),n!=null&&(i=n(i),i&&(i=i.selection())),t==null?r.remove():t(r),o&&i?o.merge(i).order():i}function jl(e){for(var n=e.selection?e.selection():e,t=this._groups,o=n._groups,i=t.length,r=o.length,a=Math.min(i,r),l=new Array(i),s=0;s<a;++s)for(var u=t[s],f=o[s],h=u.length,m=l[s]=new Array(h),C,I=0;I<h;++I)(C=u[I]||f[I])&&(m[I]=C);for(;s<i;++s)l[s]=t[s];return new cn(l,this._parents)}function Hl(){for(var e=this._groups,n=-1,t=e.length;++n<t;)for(var o=e[n],i=o.length-1,r=o[i],a;--i>=0;)(a=o[i])&&(r&&a.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(a,r),r=a);return this}function Xl(e){e||(e=zl);function n(h,m){return h&&m?e(h.__data__,m.__data__):!h-!m}for(var t=this._groups,o=t.length,i=new Array(o),r=0;r<o;++r){for(var a=t[r],l=a.length,s=i[r]=new Array(l),u,f=0;f<l;++f)(u=a[f])&&(s[f]=u);s.sort(n)}return new cn(i,this._parents).order()}function zl(e,n){return e<n?-1:e>n?1:e>=n?0:NaN}function Vl(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Wl(){return Array.from(this)}function Kl(){for(var e=this._groups,n=0,t=e.length;n<t;++n)for(var o=e[n],i=0,r=o.length;i<r;++i){var a=o[i];if(a)return a}return null}function Yl(){let e=0;for(const n of this)++e;return e}function Gl(){return!this.node()}function Ql(e){for(var n=this._groups,t=0,o=n.length;t<o;++t)for(var i=n[t],r=0,a=i.length,l;r<a;++r)(l=i[r])&&e.call(l,l.__data__,r,i);return this}function Jl(e){return function(){this.removeAttribute(e)}}function Zl(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xl(e,n){return function(){this.setAttribute(e,n)}}function eu(e,n){return function(){this.setAttributeNS(e.space,e.local,n)}}function nu(e,n){return function(){var t=n.apply(this,arguments);t==null?this.removeAttribute(e):this.setAttribute(e,t)}}function tu(e,n){return function(){var t=n.apply(this,arguments);t==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,t)}}function ou(e,n){var t=uo(e);if(arguments.length<2){var o=this.node();return t.local?o.getAttributeNS(t.space,t.local):o.getAttribute(t)}return this.each((n==null?t.local?Zl:Jl:typeof n=="function"?t.local?tu:nu:t.local?eu:xl)(t,n))}function Nr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function iu(e){return function(){this.style.removeProperty(e)}}function ru(e,n,t){return function(){this.style.setProperty(e,n,t)}}function au(e,n,t){return function(){var o=n.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,t)}}function su(e,n,t){return arguments.length>1?this.each((n==null?iu:typeof n=="function"?au:ru)(e,n,t??"")):ft(this.node(),e)}function ft(e,n){return e.style.getPropertyValue(n)||Nr(e).getComputedStyle(e,null).getPropertyValue(n)}function lu(e){return function(){delete this[e]}}function uu(e,n){return function(){this[e]=n}}function cu(e,n){return function(){var t=n.apply(this,arguments);t==null?delete this[e]:this[e]=t}}function du(e,n){return arguments.length>1?this.each((n==null?lu:typeof n=="function"?cu:uu)(e,n)):this.node()[e]}function Mr(e){return e.trim().split(/^|\s+/)}function Go(e){return e.classList||new Rr(e)}function Rr(e){this._node=e,this._names=Mr(e.getAttribute("class")||"")}Rr.prototype={add:function(e){var n=this._names.indexOf(e);n<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var n=this._names.indexOf(e);n>=0&&(this._names.splice(n,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Lr(e,n){for(var t=Go(e),o=-1,i=n.length;++o<i;)t.add(n[o])}function qr(e,n){for(var t=Go(e),o=-1,i=n.length;++o<i;)t.remove(n[o])}function fu(e){return function(){Lr(this,e)}}function pu(e){return function(){qr(this,e)}}function mu(e,n){return function(){(n.apply(this,arguments)?Lr:qr)(this,e)}}function vu(e,n){var t=Mr(e+"");if(arguments.length<2){for(var o=Go(this.node()),i=-1,r=t.length;++i<r;)if(!o.contains(t[i]))return!1;return!0}return this.each((typeof n=="function"?mu:n?fu:pu)(t,n))}function hu(){this.textContent=""}function gu(e){return function(){this.textContent=e}}function yu(e){return function(){var n=e.apply(this,arguments);this.textContent=n??""}}function bu(e){return arguments.length?this.each(e==null?hu:(typeof e=="function"?yu:gu)(e)):this.node().textContent}function ku(){this.innerHTML=""}function wu(e){return function(){this.innerHTML=e}}function Cu(e){return function(){var n=e.apply(this,arguments);this.innerHTML=n??""}}function _u(e){return arguments.length?this.each(e==null?ku:(typeof e=="function"?Cu:wu)(e)):this.node().innerHTML}function $u(){this.nextSibling&&this.parentNode.appendChild(this)}function Pu(){return this.each($u)}function Iu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Au(){return this.each(Iu)}function Su(e){var n=typeof e=="function"?e:Pr(e);return this.select(function(){return this.appendChild(n.apply(this,arguments))})}function Tu(){return null}function Nu(e,n){var t=typeof e=="function"?e:Pr(e),o=n==null?Tu:typeof n=="function"?n:Yo(n);return this.select(function(){return this.insertBefore(t.apply(this,arguments),o.apply(this,arguments)||null)})}function Mu(){var e=this.parentNode;e&&e.removeChild(this)}function Ru(){return this.each(Mu)}function Lu(){var e=this.cloneNode(!1),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function qu(){var e=this.cloneNode(!0),n=this.parentNode;return n?n.insertBefore(e,this.nextSibling):e}function Uu(e){return this.select(e?qu:Lu)}function Ou(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Bu(e){return function(n){e.call(this,n,this.__data__)}}function Fu(e){return e.trim().split(/^|\s+/).map(function(n){var t="",o=n.indexOf(".");return o>=0&&(t=n.slice(o+1),n=n.slice(0,o)),{type:n,name:t}})}function Eu(e){return function(){var n=this.__on;if(n){for(var t=0,o=-1,i=n.length,r;t<i;++t)r=n[t],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):n[++o]=r;++o?n.length=o:delete this.__on}}}function Du(e,n,t){return function(){var o=this.__on,i,r=Bu(n);if(o){for(var a=0,l=o.length;a<l;++a)if((i=o[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=t),i.value=n;return}}this.addEventListener(e.type,r,t),i={type:e.type,name:e.name,value:n,listener:r,options:t},o?o.push(i):this.__on=[i]}}function ju(e,n,t){var o=Fu(e+""),i,r=o.length,a;if(arguments.length<2){var l=this.node().__on;if(l){for(var s=0,u=l.length,f;s<u;++s)for(i=0,f=l[s];i<r;++i)if((a=o[i]).type===f.type&&a.name===f.name)return f.value}return}for(l=n?Du:Eu,i=0;i<r;++i)this.each(l(o[i],n,t));return this}function Ur(e,n,t){var o=Nr(e),i=o.CustomEvent;typeof i=="function"?i=new i(n,t):(i=o.document.createEvent("Event"),t?(i.initEvent(n,t.bubbles,t.cancelable),i.detail=t.detail):i.initEvent(n,!1,!1)),e.dispatchEvent(i)}function Hu(e,n){return function(){return Ur(this,e,n)}}function Xu(e,n){return function(){return Ur(this,e,n.apply(this,arguments))}}function zu(e,n){return this.each((typeof n=="function"?Xu:Hu)(e,n))}function*Vu(){for(var e=this._groups,n=0,t=e.length;n<t;++n)for(var o=e[n],i=0,r=o.length,a;i<r;++i)(a=o[i])&&(yield a)}var Or=[null];function cn(e,n){this._groups=e,this._parents=n}function St(){return new cn([[document.documentElement]],Or)}function Wu(){return this}cn.prototype=St.prototype={constructor:cn,select:yl,selectAll:Cl,selectChild:Il,selectChildren:Nl,filter:Ml,data:Bl,enter:Rl,exit:El,join:Dl,merge:jl,selection:Wu,order:Hl,sort:Xl,call:Vl,nodes:Wl,node:Kl,size:Yl,empty:Gl,each:Ql,attr:ou,style:su,property:du,classed:vu,text:bu,html:_u,raise:Pu,lower:Au,append:Su,insert:Nu,remove:Ru,clone:Uu,datum:Ou,on:ju,dispatch:zu,[Symbol.iterator]:Vu};function wn(e){return typeof e=="string"?new cn([[document.querySelector(e)]],[document.documentElement]):new cn([[e]],Or)}function Ku(e){let n;for(;n=e.sourceEvent;)e=n;return e}function Ei(e,n){if(e=Ku(e),n===void 0&&(n=e.currentTarget),n){var t=n.ownerSVGElement||n;if(t.createSVGPoint){var o=t.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(n.getScreenCTM().inverse()),[o.x,o.y]}if(n.getBoundingClientRect){var i=n.getBoundingClientRect();return[e.clientX-i.left-n.clientLeft,e.clientY-i.top-n.clientTop]}}return[e.pageX,e.pageY]}const Mo={capture:!0,passive:!1};function Ro(e){e.preventDefault(),e.stopImmediatePropagation()}function Yu(e){var n=e.document.documentElement,t=wn(e).on("dragstart.drag",Ro,Mo);"onselectstart"in n?t.on("selectstart.drag",Ro,Mo):(n.__noselect=n.style.MozUserSelect,n.style.MozUserSelect="none")}function Gu(e,n){var t=e.document.documentElement,o=wn(e).on("dragstart.drag",null);n&&(o.on("click.drag",Ro,Mo),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in t?o.on("selectstart.drag",null):(t.style.MozUserSelect=t.__noselect,delete t.__noselect)}function Qo(e,n,t){e.prototype=n.prototype=t,t.constructor=e}function Br(e,n){var t=Object.create(e.prototype);for(var o in n)t[o]=n[o];return t}function Tt(){}var Pt=.7,Jt=1/Pt,ct="\\s*([+-]?\\d+)\\s*",It="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",An="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qu=/^#([0-9a-f]{3,8})$/,Ju=new RegExp(`^rgb\\(${ct},${ct},${ct}\\)$`),Zu=new RegExp(`^rgb\\(${An},${An},${An}\\)$`),xu=new RegExp(`^rgba\\(${ct},${ct},${ct},${It}\\)$`),ec=new RegExp(`^rgba\\(${An},${An},${An},${It}\\)$`),nc=new RegExp(`^hsl\\(${It},${An},${An}\\)$`),tc=new RegExp(`^hsla\\(${It},${An},${An},${It}\\)$`),Di={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Qo(Tt,Gn,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ji,formatHex:ji,formatHex8:oc,formatHsl:ic,formatRgb:Hi,toString:Hi});function ji(){return this.rgb().formatHex()}function oc(){return this.rgb().formatHex8()}function ic(){return Fr(this).formatHsl()}function Hi(){return this.rgb().formatRgb()}function Gn(e){var n,t;return e=(e+"").trim().toLowerCase(),(n=Qu.exec(e))?(t=n[1].length,n=parseInt(n[1],16),t===6?Xi(n):t===3?new nn(n>>8&15|n>>4&240,n>>4&15|n&240,(n&15)<<4|n&15,1):t===8?Et(n>>24&255,n>>16&255,n>>8&255,(n&255)/255):t===4?Et(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|n&240,((n&15)<<4|n&15)/255):null):(n=Ju.exec(e))?new nn(n[1],n[2],n[3],1):(n=Zu.exec(e))?new nn(n[1]*255/100,n[2]*255/100,n[3]*255/100,1):(n=xu.exec(e))?Et(n[1],n[2],n[3],n[4]):(n=ec.exec(e))?Et(n[1]*255/100,n[2]*255/100,n[3]*255/100,n[4]):(n=nc.exec(e))?Wi(n[1],n[2]/100,n[3]/100,1):(n=tc.exec(e))?Wi(n[1],n[2]/100,n[3]/100,n[4]):Di.hasOwnProperty(e)?Xi(Di[e]):e==="transparent"?new nn(NaN,NaN,NaN,0):null}function Xi(e){return new nn(e>>16&255,e>>8&255,e&255,1)}function Et(e,n,t,o){return o<=0&&(e=n=t=NaN),new nn(e,n,t,o)}function rc(e){return e instanceof Tt||(e=Gn(e)),e?(e=e.rgb(),new nn(e.r,e.g,e.b,e.opacity)):new nn}function Lo(e,n,t,o){return arguments.length===1?rc(e):new nn(e,n,t,o??1)}function nn(e,n,t,o){this.r=+e,this.g=+n,this.b=+t,this.opacity=+o}Qo(nn,Lo,Br(Tt,{brighter(e){return e=e==null?Jt:Math.pow(Jt,e),new nn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Pt:Math.pow(Pt,e),new nn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new nn(Yn(this.r),Yn(this.g),Yn(this.b),Zt(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zi,formatHex:zi,formatHex8:ac,formatRgb:Vi,toString:Vi}));function zi(){return`#${Kn(this.r)}${Kn(this.g)}${Kn(this.b)}`}function ac(){return`#${Kn(this.r)}${Kn(this.g)}${Kn(this.b)}${Kn((isNaN(this.opacity)?1:this.opacity)*255)}`}function Vi(){const e=Zt(this.opacity);return`${e===1?"rgb(":"rgba("}${Yn(this.r)}, ${Yn(this.g)}, ${Yn(this.b)}${e===1?")":`, ${e})`}`}function Zt(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Yn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Kn(e){return e=Yn(e),(e<16?"0":"")+e.toString(16)}function Wi(e,n,t,o){return o<=0?e=n=t=NaN:t<=0||t>=1?e=n=NaN:n<=0&&(e=NaN),new Cn(e,n,t,o)}function Fr(e){if(e instanceof Cn)return new Cn(e.h,e.s,e.l,e.opacity);if(e instanceof Tt||(e=Gn(e)),!e)return new Cn;if(e instanceof Cn)return e;e=e.rgb();var n=e.r/255,t=e.g/255,o=e.b/255,i=Math.min(n,t,o),r=Math.max(n,t,o),a=NaN,l=r-i,s=(r+i)/2;return l?(n===r?a=(t-o)/l+(t<o)*6:t===r?a=(o-n)/l+2:a=(n-t)/l+4,l/=s<.5?r+i:2-r-i,a*=60):l=s>0&&s<1?0:a,new Cn(a,l,s,e.opacity)}function sc(e,n,t,o){return arguments.length===1?Fr(e):new Cn(e,n,t,o??1)}function Cn(e,n,t,o){this.h=+e,this.s=+n,this.l=+t,this.opacity=+o}Qo(Cn,sc,Br(Tt,{brighter(e){return e=e==null?Jt:Math.pow(Jt,e),new Cn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pt:Math.pow(Pt,e),new Cn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,n=isNaN(e)||isNaN(this.s)?0:this.s,t=this.l,o=t+(t<.5?t:1-t)*n,i=2*t-o;return new nn(wo(e>=240?e-240:e+120,i,o),wo(e,i,o),wo(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new Cn(Ki(this.h),Dt(this.s),Dt(this.l),Zt(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zt(this.opacity);return`${e===1?"hsl(":"hsla("}${Ki(this.h)}, ${Dt(this.s)*100}%, ${Dt(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ki(e){return e=(e||0)%360,e<0?e+360:e}function Dt(e){return Math.max(0,Math.min(1,e||0))}function wo(e,n,t){return(e<60?n+(t-n)*e/60:e<180?t:e<240?n+(t-n)*(240-e)/60:n)*255}const Jo=e=>()=>e;function lc(e,n){return function(t){return e+t*n}}function uc(e,n,t){return e=Math.pow(e,t),n=Math.pow(n,t)-e,t=1/t,function(o){return Math.pow(e+o*n,t)}}function cc(e){return(e=+e)==1?Er:function(n,t){return t-n?uc(n,t,e):Jo(isNaN(n)?t:n)}}function Er(e,n){var t=n-e;return t?lc(e,t):Jo(isNaN(e)?n:e)}const xt=function e(n){var t=cc(n);function o(i,r){var a=t((i=Lo(i)).r,(r=Lo(r)).r),l=t(i.g,r.g),s=t(i.b,r.b),u=Er(i.opacity,r.opacity);return function(f){return i.r=a(f),i.g=l(f),i.b=s(f),i.opacity=u(f),i+""}}return o.gamma=e,o}(1);function dc(e,n){n||(n=[]);var t=e?Math.min(n.length,e.length):0,o=n.slice(),i;return function(r){for(i=0;i<t;++i)o[i]=e[i]*(1-r)+n[i]*r;return o}}function fc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function pc(e,n){var t=n?n.length:0,o=e?Math.min(t,e.length):0,i=new Array(o),r=new Array(t),a;for(a=0;a<o;++a)i[a]=co(e[a],n[a]);for(;a<t;++a)r[a]=n[a];return function(l){for(a=0;a<o;++a)r[a]=i[a](l);return r}}function mc(e,n){var t=new Date;return e=+e,n=+n,function(o){return t.setTime(e*(1-o)+n*o),t}}function kn(e,n){return e=+e,n=+n,function(t){return e*(1-t)+n*t}}function vc(e,n){var t={},o={},i;(e===null||typeof e!="object")&&(e={}),(n===null||typeof n!="object")&&(n={});for(i in n)i in e?t[i]=co(e[i],n[i]):o[i]=n[i];return function(r){for(i in t)o[i]=t[i](r);return o}}var qo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Co=new RegExp(qo.source,"g");function hc(e){return function(){return e}}function gc(e){return function(n){return e(n)+""}}function Dr(e,n){var t=qo.lastIndex=Co.lastIndex=0,o,i,r,a=-1,l=[],s=[];for(e=e+"",n=n+"";(o=qo.exec(e))&&(i=Co.exec(n));)(r=i.index)>t&&(r=n.slice(t,r),l[a]?l[a]+=r:l[++a]=r),(o=o[0])===(i=i[0])?l[a]?l[a]+=i:l[++a]=i:(l[++a]=null,s.push({i:a,x:kn(o,i)})),t=Co.lastIndex;return t<n.length&&(r=n.slice(t),l[a]?l[a]+=r:l[++a]=r),l.length<2?s[0]?gc(s[0].x):hc(n):(n=s.length,function(u){for(var f=0,h;f<n;++f)l[(h=s[f]).i]=h.x(u);return l.join("")})}function co(e,n){var t=typeof n,o;return n==null||t==="boolean"?Jo(n):(t==="number"?kn:t==="string"?(o=Gn(n))?(n=o,xt):Dr:n instanceof Gn?xt:n instanceof Date?mc:fc(n)?dc:Array.isArray(n)?pc:typeof n.valueOf!="function"&&typeof n.toString!="function"||isNaN(n)?vc:kn)(e,n)}function yc(e,n){return e=+e,n=+n,function(t){return Math.round(e*(1-t)+n*t)}}var Yi=180/Math.PI,Uo={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function jr(e,n,t,o,i,r){var a,l,s;return(a=Math.sqrt(e*e+n*n))&&(e/=a,n/=a),(s=e*t+n*o)&&(t-=e*s,o-=n*s),(l=Math.sqrt(t*t+o*o))&&(t/=l,o/=l,s/=l),e*o<n*t&&(e=-e,n=-n,s=-s,a=-a),{translateX:i,translateY:r,rotate:Math.atan2(n,e)*Yi,skewX:Math.atan(s)*Yi,scaleX:a,scaleY:l}}var jt;function bc(e){const n=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return n.isIdentity?Uo:jr(n.a,n.b,n.c,n.d,n.e,n.f)}function kc(e){return e==null||(jt||(jt=document.createElementNS("http://www.w3.org/2000/svg","g")),jt.setAttribute("transform",e),!(e=jt.transform.baseVal.consolidate()))?Uo:(e=e.matrix,jr(e.a,e.b,e.c,e.d,e.e,e.f))}function Hr(e,n,t,o){function i(u){return u.length?u.pop()+" ":""}function r(u,f,h,m,C,I){if(u!==h||f!==m){var le=C.push("translate(",null,n,null,t);I.push({i:le-4,x:kn(u,h)},{i:le-2,x:kn(f,m)})}else(h||m)&&C.push("translate("+h+n+m+t)}function a(u,f,h,m){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),m.push({i:h.push(i(h)+"rotate(",null,o)-2,x:kn(u,f)})):f&&h.push(i(h)+"rotate("+f+o)}function l(u,f,h,m){u!==f?m.push({i:h.push(i(h)+"skewX(",null,o)-2,x:kn(u,f)}):f&&h.push(i(h)+"skewX("+f+o)}function s(u,f,h,m,C,I){if(u!==h||f!==m){var le=C.push(i(C)+"scale(",null,",",null,")");I.push({i:le-4,x:kn(u,h)},{i:le-2,x:kn(f,m)})}else(h!==1||m!==1)&&C.push(i(C)+"scale("+h+","+m+")")}return function(u,f){var h=[],m=[];return u=e(u),f=e(f),r(u.translateX,u.translateY,f.translateX,f.translateY,h,m),a(u.rotate,f.rotate,h,m),l(u.skewX,f.skewX,h,m),s(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,m),u=f=null,function(C){for(var I=-1,le=m.length,g;++I<le;)h[(g=m[I]).i]=g.x(C);return h.join("")}}}var wc=Hr(bc,"px, ","px)","deg)"),Cc=Hr(kc,", ",")",")"),pt=0,wt=0,bt=0,Xr=1e3,eo,Ct,no=0,Qn=0,fo=0,At=typeof performance=="object"&&performance.now?performance:Date,zr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function Zo(){return Qn||(zr(_c),Qn=At.now()+fo)}function _c(){Qn=0}function to(){this._call=this._time=this._next=null}to.prototype=Vr.prototype={constructor:to,restart:function(e,n,t){if(typeof e!="function")throw new TypeError("callback is not a function");t=(t==null?Zo():+t)+(n==null?0:+n),!this._next&&Ct!==this&&(Ct?Ct._next=this:eo=this,Ct=this),this._call=e,this._time=t,Oo()},stop:function(){this._call&&(this._call=null,this._time=1/0,Oo())}};function Vr(e,n,t){var o=new to;return o.restart(e,n,t),o}function $c(){Zo(),++pt;for(var e=eo,n;e;)(n=Qn-e._time)>=0&&e._call.call(void 0,n),e=e._next;--pt}function Gi(){Qn=(no=At.now())+fo,pt=wt=0;try{$c()}finally{pt=0,Ic(),Qn=0}}function Pc(){var e=At.now(),n=e-no;n>Xr&&(fo-=n,no=e)}function Ic(){for(var e,n=eo,t,o=1/0;n;)n._call?(o>n._time&&(o=n._time),e=n,n=n._next):(t=n._next,n._next=null,n=e?e._next=t:eo=t);Ct=e,Oo(o)}function Oo(e){if(!pt){wt&&(wt=clearTimeout(wt));var n=e-Qn;n>24?(e<1/0&&(wt=setTimeout(Gi,e-At.now()-fo)),bt&&(bt=clearInterval(bt))):(bt||(no=At.now(),bt=setInterval(Pc,Xr)),pt=1,zr(Gi))}}function Qi(e,n,t){var o=new to;return n=n==null?0:+n,o.restart(i=>{o.stop(),e(i+n)},n,t),o}var Ac=Ko("start","end","cancel","interrupt"),Sc=[],Wr=0,Ji=1,Bo=2,Wt=3,Zi=4,Fo=5,Kt=6;function po(e,n,t,o,i,r){var a=e.__transition;if(!a)e.__transition={};else if(t in a)return;Tc(e,t,{name:n,index:o,group:i,on:Ac,tween:Sc,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Wr})}function xo(e,n){var t=_n(e,n);if(t.state>Wr)throw new Error("too late; already scheduled");return t}function Sn(e,n){var t=_n(e,n);if(t.state>Wt)throw new Error("too late; already running");return t}function _n(e,n){var t=e.__transition;if(!t||!(t=t[n]))throw new Error("transition not found");return t}function Tc(e,n,t){var o=e.__transition,i;o[n]=t,t.timer=Vr(r,0,t.time);function r(u){t.state=Ji,t.timer.restart(a,t.delay,t.time),t.delay<=u&&a(u-t.delay)}function a(u){var f,h,m,C;if(t.state!==Ji)return s();for(f in o)if(C=o[f],C.name===t.name){if(C.state===Wt)return Qi(a);C.state===Zi?(C.state=Kt,C.timer.stop(),C.on.call("interrupt",e,e.__data__,C.index,C.group),delete o[f]):+f<n&&(C.state=Kt,C.timer.stop(),C.on.call("cancel",e,e.__data__,C.index,C.group),delete o[f])}if(Qi(function(){t.state===Wt&&(t.state=Zi,t.timer.restart(l,t.delay,t.time),l(u))}),t.state=Bo,t.on.call("start",e,e.__data__,t.index,t.group),t.state===Bo){for(t.state=Wt,i=new Array(m=t.tween.length),f=0,h=-1;f<m;++f)(C=t.tween[f].value.call(e,e.__data__,t.index,t.group))&&(i[++h]=C);i.length=h+1}}function l(u){for(var f=u<t.duration?t.ease.call(null,u/t.duration):(t.timer.restart(s),t.state=Fo,1),h=-1,m=i.length;++h<m;)i[h].call(e,f);t.state===Fo&&(t.on.call("end",e,e.__data__,t.index,t.group),s())}function s(){t.state=Kt,t.timer.stop(),delete o[n];for(var u in o)return;delete e.__transition}}function Eo(e,n){var t=e.__transition,o,i,r=!0,a;if(t){n=n==null?null:n+"";for(a in t){if((o=t[a]).name!==n){r=!1;continue}i=o.state>Bo&&o.state<Fo,o.state=Kt,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete t[a]}r&&delete e.__transition}}function Nc(e){return this.each(function(){Eo(this,e)})}function Mc(e,n){var t,o;return function(){var i=Sn(this,e),r=i.tween;if(r!==t){o=t=r;for(var a=0,l=o.length;a<l;++a)if(o[a].name===n){o=o.slice(),o.splice(a,1);break}}i.tween=o}}function Rc(e,n,t){var o,i;if(typeof t!="function")throw new Error;return function(){var r=Sn(this,e),a=r.tween;if(a!==o){i=(o=a).slice();for(var l={name:n,value:t},s=0,u=i.length;s<u;++s)if(i[s].name===n){i[s]=l;break}s===u&&i.push(l)}r.tween=i}}function Lc(e,n){var t=this._id;if(e+="",arguments.length<2){for(var o=_n(this.node(),t).tween,i=0,r=o.length,a;i<r;++i)if((a=o[i]).name===e)return a.value;return null}return this.each((n==null?Mc:Rc)(t,e,n))}function ei(e,n,t){var o=e._id;return e.each(function(){var i=Sn(this,o);(i.value||(i.value={}))[n]=t.apply(this,arguments)}),function(i){return _n(i,o).value[n]}}function Kr(e,n){var t;return(typeof n=="number"?kn:n instanceof Gn?xt:(t=Gn(n))?(n=t,xt):Dr)(e,n)}function qc(e){return function(){this.removeAttribute(e)}}function Uc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Oc(e,n,t){var o,i=t+"",r;return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=n(o=a,t)}}function Bc(e,n,t){var o,i=t+"",r;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=n(o=a,t)}}function Fc(e,n,t){var o,i,r;return function(){var a,l=t(this),s;return l==null?void this.removeAttribute(e):(a=this.getAttribute(e),s=l+"",a===s?null:a===o&&s===i?r:(i=s,r=n(o=a,l)))}}function Ec(e,n,t){var o,i,r;return function(){var a,l=t(this),s;return l==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),s=l+"",a===s?null:a===o&&s===i?r:(i=s,r=n(o=a,l)))}}function Dc(e,n){var t=uo(e),o=t==="transform"?Cc:Kr;return this.attrTween(e,typeof n=="function"?(t.local?Ec:Fc)(t,o,ei(this,"attr."+e,n)):n==null?(t.local?Uc:qc)(t):(t.local?Bc:Oc)(t,o,n))}function jc(e,n){return function(t){this.setAttribute(e,n.call(this,t))}}function Hc(e,n){return function(t){this.setAttributeNS(e.space,e.local,n.call(this,t))}}function Xc(e,n){var t,o;function i(){var r=n.apply(this,arguments);return r!==o&&(t=(o=r)&&Hc(e,r)),t}return i._value=n,i}function zc(e,n){var t,o;function i(){var r=n.apply(this,arguments);return r!==o&&(t=(o=r)&&jc(e,r)),t}return i._value=n,i}function Vc(e,n){var t="attr."+e;if(arguments.length<2)return(t=this.tween(t))&&t._value;if(n==null)return this.tween(t,null);if(typeof n!="function")throw new Error;var o=uo(e);return this.tween(t,(o.local?Xc:zc)(o,n))}function Wc(e,n){return function(){xo(this,e).delay=+n.apply(this,arguments)}}function Kc(e,n){return n=+n,function(){xo(this,e).delay=n}}function Yc(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Wc:Kc)(n,e)):_n(this.node(),n).delay}function Gc(e,n){return function(){Sn(this,e).duration=+n.apply(this,arguments)}}function Qc(e,n){return n=+n,function(){Sn(this,e).duration=n}}function Jc(e){var n=this._id;return arguments.length?this.each((typeof e=="function"?Gc:Qc)(n,e)):_n(this.node(),n).duration}function Zc(e,n){if(typeof n!="function")throw new Error;return function(){Sn(this,e).ease=n}}function xc(e){var n=this._id;return arguments.length?this.each(Zc(n,e)):_n(this.node(),n).ease}function ed(e,n){return function(){var t=n.apply(this,arguments);if(typeof t!="function")throw new Error;Sn(this,e).ease=t}}function nd(e){if(typeof e!="function")throw new Error;return this.each(ed(this._id,e))}function td(e){typeof e!="function"&&(e=Ar(e));for(var n=this._groups,t=n.length,o=new Array(t),i=0;i<t;++i)for(var r=n[i],a=r.length,l=o[i]=[],s,u=0;u<a;++u)(s=r[u])&&e.call(s,s.__data__,u,r)&&l.push(s);return new Fn(o,this._parents,this._name,this._id)}function od(e){if(e._id!==this._id)throw new Error;for(var n=this._groups,t=e._groups,o=n.length,i=t.length,r=Math.min(o,i),a=new Array(o),l=0;l<r;++l)for(var s=n[l],u=t[l],f=s.length,h=a[l]=new Array(f),m,C=0;C<f;++C)(m=s[C]||u[C])&&(h[C]=m);for(;l<o;++l)a[l]=n[l];return new Fn(a,this._parents,this._name,this._id)}function id(e){return(e+"").trim().split(/^|\s+/).every(function(n){var t=n.indexOf(".");return t>=0&&(n=n.slice(0,t)),!n||n==="start"})}function rd(e,n,t){var o,i,r=id(n)?xo:Sn;return function(){var a=r(this,e),l=a.on;l!==o&&(i=(o=l).copy()).on(n,t),a.on=i}}function ad(e,n){var t=this._id;return arguments.length<2?_n(this.node(),t).on.on(e):this.each(rd(t,e,n))}function sd(e){return function(){var n=this.parentNode;for(var t in this.__transition)if(+t!==e)return;n&&n.removeChild(this)}}function ld(){return this.on("end.remove",sd(this._id))}function ud(e){var n=this._name,t=this._id;typeof e!="function"&&(e=Yo(e));for(var o=this._groups,i=o.length,r=new Array(i),a=0;a<i;++a)for(var l=o[a],s=l.length,u=r[a]=new Array(s),f,h,m=0;m<s;++m)(f=l[m])&&(h=e.call(f,f.__data__,m,l))&&("__data__"in f&&(h.__data__=f.__data__),u[m]=h,po(u[m],n,t,m,u,_n(f,t)));return new Fn(r,this._parents,n,t)}function cd(e){var n=this._name,t=this._id;typeof e!="function"&&(e=Ir(e));for(var o=this._groups,i=o.length,r=[],a=[],l=0;l<i;++l)for(var s=o[l],u=s.length,f,h=0;h<u;++h)if(f=s[h]){for(var m=e.call(f,f.__data__,h,s),C,I=_n(f,t),le=0,g=m.length;le<g;++le)(C=m[le])&&po(C,n,t,le,m,I);r.push(m),a.push(f)}return new Fn(r,a,n,t)}var dd=St.prototype.constructor;function fd(){return new dd(this._groups,this._parents)}function pd(e,n){var t,o,i;return function(){var r=ft(this,e),a=(this.style.removeProperty(e),ft(this,e));return r===a?null:r===t&&a===o?i:i=n(t=r,o=a)}}function Yr(e){return function(){this.style.removeProperty(e)}}function md(e,n,t){var o,i=t+"",r;return function(){var a=ft(this,e);return a===i?null:a===o?r:r=n(o=a,t)}}function vd(e,n,t){var o,i,r;return function(){var a=ft(this,e),l=t(this),s=l+"";return l==null&&(s=l=(this.style.removeProperty(e),ft(this,e))),a===s?null:a===o&&s===i?r:(i=s,r=n(o=a,l))}}function hd(e,n){var t,o,i,r="style."+n,a="end."+r,l;return function(){var s=Sn(this,e),u=s.on,f=s.value[r]==null?l||(l=Yr(n)):void 0;(u!==t||i!==f)&&(o=(t=u).copy()).on(a,i=f),s.on=o}}function gd(e,n,t){var o=(e+="")=="transform"?wc:Kr;return n==null?this.styleTween(e,pd(e,o)).on("end.style."+e,Yr(e)):typeof n=="function"?this.styleTween(e,vd(e,o,ei(this,"style."+e,n))).each(hd(this._id,e)):this.styleTween(e,md(e,o,n),t).on("end.style."+e,null)}function yd(e,n,t){return function(o){this.style.setProperty(e,n.call(this,o),t)}}function bd(e,n,t){var o,i;function r(){var a=n.apply(this,arguments);return a!==i&&(o=(i=a)&&yd(e,a,t)),o}return r._value=n,r}function kd(e,n,t){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(n==null)return this.tween(o,null);if(typeof n!="function")throw new Error;return this.tween(o,bd(e,n,t??""))}function wd(e){return function(){this.textContent=e}}function Cd(e){return function(){var n=e(this);this.textContent=n??""}}function _d(e){return this.tween("text",typeof e=="function"?Cd(ei(this,"text",e)):wd(e==null?"":e+""))}function $d(e){return function(n){this.textContent=e.call(this,n)}}function Pd(e){var n,t;function o(){var i=e.apply(this,arguments);return i!==t&&(n=(t=i)&&$d(i)),n}return o._value=e,o}function Id(e){var n="text";if(arguments.length<1)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;return this.tween(n,Pd(e))}function Ad(){for(var e=this._name,n=this._id,t=Gr(),o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],l=a.length,s,u=0;u<l;++u)if(s=a[u]){var f=_n(s,n);po(s,e,t,u,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Fn(o,this._parents,e,t)}function Sd(){var e,n,t=this,o=t._id,i=t.size();return new Promise(function(r,a){var l={value:a},s={value:function(){--i===0&&r()}};t.each(function(){var u=Sn(this,o),f=u.on;f!==e&&(n=(e=f).copy(),n._.cancel.push(l),n._.interrupt.push(l),n._.end.push(s)),u.on=n}),i===0&&r()})}var Td=0;function Fn(e,n,t,o){this._groups=e,this._parents=n,this._name=t,this._id=o}function Gr(){return++Td}var Un=St.prototype;Fn.prototype={constructor:Fn,select:ud,selectAll:cd,selectChild:Un.selectChild,selectChildren:Un.selectChildren,filter:td,merge:od,selection:fd,transition:Ad,call:Un.call,nodes:Un.nodes,node:Un.node,size:Un.size,empty:Un.empty,each:Un.each,on:ad,attr:Dc,attrTween:Vc,style:gd,styleTween:kd,text:_d,textTween:Id,remove:ld,tween:Lc,delay:Yc,duration:Jc,ease:xc,easeVarying:nd,end:Sd,[Symbol.iterator]:Un[Symbol.iterator]};function Nd(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Md={time:null,delay:0,duration:250,ease:Nd};function Rd(e,n){for(var t;!(t=e.__transition)||!(t=t[n]);)if(!(e=e.parentNode))throw new Error(`transition ${n} not found`);return t}function Ld(e){var n,t;e instanceof Fn?(n=e._id,e=e._name):(n=Gr(),(t=Md).time=Zo(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],l=a.length,s,u=0;u<l;++u)(s=a[u])&&po(s,e,n,u,a,t||Rd(s,n));return new Fn(o,this._parents,e,n)}St.prototype.interrupt=Nc;St.prototype.transition=Ld;const _o=e=>()=>e;function qd(e,{sourceEvent:n,target:t,selection:o,mode:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:n,enumerable:!0,configurable:!0},target:{value:t,enumerable:!0,configurable:!0},selection:{value:o,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Ud(e){e.stopImmediatePropagation()}function $o(e){e.preventDefault(),e.stopImmediatePropagation()}var xi={name:"drag"},Po={name:"space"},st={name:"handle"},lt={name:"center"};const{abs:er,max:Ye,min:Ge}=Math;function nr(e){return[+e[0],+e[1]]}function tr(e){return[nr(e[0]),nr(e[1])]}var Yt={name:"x",handles:["w","e"].map(oo),input:function(e,n){return e==null?null:[[+e[0],n[0][1]],[+e[1],n[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Io={name:"y",handles:["n","s"].map(oo),input:function(e,n){return e==null?null:[[n[0][0],+e[0]],[n[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},On={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},or={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},ir={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Od={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},Bd={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function oo(e){return{type:e}}function Fd(e){return!e.ctrlKey&&!e.button}function Ed(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Dd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ao(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function jd(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Hd(){return Xd(Yt)}function Xd(e){var n=Ed,t=Fd,o=Dd,i=!0,r=Ko("start","brush","end"),a=6,l;function s(g){var S=g.property("__brush",le).selectAll(".overlay").data([oo("overlay")]);S.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",On.overlay).merge(S).each(function(){var y=Ao(this).extent;wn(this).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1])}),g.selectAll(".selection").data([oo("selection")]).enter().append("rect").attr("class","selection").attr("cursor",On.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var P=g.selectAll(".handle").data(e.handles,function(y){return y.type});P.exit().remove(),P.enter().append("rect").attr("class",function(y){return"handle handle--"+y.type}).attr("cursor",function(y){return On[y.type]}),g.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",m).filter(o).on("touchstart.brush",m).on("touchmove.brush",C).on("touchend.brush touchcancel.brush",I).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}s.move=function(g,S,P){g.tween?g.on("start.brush",function(y){f(this,arguments).beforestart().start(y)}).on("interrupt.brush end.brush",function(y){f(this,arguments).end(y)}).tween("brush",function(){var y=this,p=y.__brush,k=f(y,arguments),q=p.selection,X=e.input(typeof S=="function"?S.apply(this,arguments):S,p.extent),x=co(q,X);function fe(re){p.selection=re===1&&X===null?null:x(re),u.call(y),k.brush()}return q!==null&&X!==null?fe:fe(1)}):g.each(function(){var y=this,p=arguments,k=y.__brush,q=e.input(typeof S=="function"?S.apply(y,p):S,k.extent),X=f(y,p).beforestart();Eo(y),k.selection=q===null?null:q,u.call(y),X.start(P).brush(P).end(P)})},s.clear=function(g,S){s.move(g,null,S)};function u(){var g=wn(this),S=Ao(this).selection;S?(g.selectAll(".selection").style("display",null).attr("x",S[0][0]).attr("y",S[0][1]).attr("width",S[1][0]-S[0][0]).attr("height",S[1][1]-S[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(P){return P.type[P.type.length-1]==="e"?S[1][0]-a/2:S[0][0]-a/2}).attr("y",function(P){return P.type[0]==="s"?S[1][1]-a/2:S[0][1]-a/2}).attr("width",function(P){return P.type==="n"||P.type==="s"?S[1][0]-S[0][0]+a:a}).attr("height",function(P){return P.type==="e"||P.type==="w"?S[1][1]-S[0][1]+a:a})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(g,S,P){var y=g.__brush.emitter;return y&&(!P||!y.clean)?y:new h(g,S,P)}function h(g,S,P){this.that=g,this.args=S,this.state=g.__brush,this.active=0,this.clean=P}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,S){return this.starting?(this.starting=!1,this.emit("start",g,S)):this.emit("brush",g),this},brush:function(g,S){return this.emit("brush",g,S),this},end:function(g,S){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,S)),this},emit:function(g,S,P){var y=wn(this.that).datum();r.call(g,this.that,new qd(g,{sourceEvent:S,target:s,selection:e.output(this.state.selection),mode:P,dispatch:r}),y)}};function m(g){if(l&&!g.touches||!t.apply(this,arguments))return;var S=this,P=g.target.__data__.type,y=(i&&g.metaKey?P="overlay":P)==="selection"?xi:i&&g.altKey?lt:st,p=e===Io?null:Od[P],k=e===Yt?null:Bd[P],q=Ao(S),X=q.extent,x=q.selection,fe=X[0][0],re,T,J=X[0][1],O,V,we=X[1][0],W,te,ue=X[1][1],oe,ie,ve=0,Q=0,K,rn=p&&k&&i&&g.shiftKey,E,$n,qe=Array.from(g.touches||[g],G=>{const de=G.identifier;return G=Ei(G,S),G.point0=G.slice(),G.identifier=de,G});Eo(S);var Ze=f(S,arguments,!0).beforestart();if(P==="overlay"){x&&(K=!0);const G=[qe[0],qe[1]||qe[0]];q.selection=x=[[re=e===Io?fe:Ge(G[0][0],G[1][0]),O=e===Yt?J:Ge(G[0][1],G[1][1])],[W=e===Io?we:Ye(G[0][0],G[1][0]),oe=e===Yt?ue:Ye(G[0][1],G[1][1])]],qe.length>1&&De(g)}else re=x[0][0],O=x[0][1],W=x[1][0],oe=x[1][1];T=re,V=O,te=W,ie=oe;var Pn=wn(S).attr("pointer-events","none"),xe=Pn.selectAll(".overlay").attr("cursor",On[P]);if(g.touches)Ze.moved=Ve,Ze.ended=je;else{var Nn=wn(g.view).on("mousemove.brush",Ve,!0).on("mouseup.brush",je,!0);i&&Nn.on("keydown.brush",vn,!0).on("keyup.brush",He,!0),Yu(g.view)}u.call(S),Ze.start(g,y.name);function Ve(G){for(const de of G.changedTouches||[G])for(const dn of qe)dn.identifier===de.identifier&&(dn.cur=Ei(de,S));if(rn&&!E&&!$n&&qe.length===1){const de=qe[0];er(de.cur[0]-de[0])>er(de.cur[1]-de[1])?$n=!0:E=!0}for(const de of qe)de.cur&&(de[0]=de.cur[0],de[1]=de.cur[1]);K=!0,$o(G),De(G)}function De(G){const de=qe[0],dn=de.point0;var D;switch(ve=de[0]-dn[0],Q=de[1]-dn[1],y){case Po:case xi:{p&&(ve=Ye(fe-re,Ge(we-W,ve)),T=re+ve,te=W+ve),k&&(Q=Ye(J-O,Ge(ue-oe,Q)),V=O+Q,ie=oe+Q);break}case st:{qe[1]?(p&&(T=Ye(fe,Ge(we,qe[0][0])),te=Ye(fe,Ge(we,qe[1][0])),p=1),k&&(V=Ye(J,Ge(ue,qe[0][1])),ie=Ye(J,Ge(ue,qe[1][1])),k=1)):(p<0?(ve=Ye(fe-re,Ge(we-re,ve)),T=re+ve,te=W):p>0&&(ve=Ye(fe-W,Ge(we-W,ve)),T=re,te=W+ve),k<0?(Q=Ye(J-O,Ge(ue-O,Q)),V=O+Q,ie=oe):k>0&&(Q=Ye(J-oe,Ge(ue-oe,Q)),V=O,ie=oe+Q));break}case lt:{p&&(T=Ye(fe,Ge(we,re-ve*p)),te=Ye(fe,Ge(we,W+ve*p))),k&&(V=Ye(J,Ge(ue,O-Q*k)),ie=Ye(J,Ge(ue,oe+Q*k)));break}}te<T&&(p*=-1,D=re,re=W,W=D,D=T,T=te,te=D,P in or&&xe.attr("cursor",On[P=or[P]])),ie<V&&(k*=-1,D=O,O=oe,oe=D,D=V,V=ie,ie=D,P in ir&&xe.attr("cursor",On[P=ir[P]])),q.selection&&(x=q.selection),E&&(T=x[0][0],te=x[1][0]),$n&&(V=x[0][1],ie=x[1][1]),(x[0][0]!==T||x[0][1]!==V||x[1][0]!==te||x[1][1]!==ie)&&(q.selection=[[T,V],[te,ie]],u.call(S),Ze.brush(G,y.name))}function je(G){if(Ud(G),G.touches){if(G.touches.length)return;l&&clearTimeout(l),l=setTimeout(function(){l=null},500)}else Gu(G.view,K),Nn.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);Pn.attr("pointer-events","all"),xe.attr("cursor",On.overlay),q.selection&&(x=q.selection),jd(x)&&(q.selection=null,u.call(S)),Ze.end(G,y.name)}function vn(G){switch(G.keyCode){case 16:{rn=p&&k;break}case 18:{y===st&&(p&&(W=te-ve*p,re=T+ve*p),k&&(oe=ie-Q*k,O=V+Q*k),y=lt,De(G));break}case 32:{(y===st||y===lt)&&(p<0?W=te-ve:p>0&&(re=T-ve),k<0?oe=ie-Q:k>0&&(O=V-Q),y=Po,xe.attr("cursor",On.selection),De(G));break}default:return}$o(G)}function He(G){switch(G.keyCode){case 16:{rn&&(E=$n=rn=!1,De(G));break}case 18:{y===lt&&(p<0?W=te:p>0&&(re=T),k<0?oe=ie:k>0&&(O=V),y=st,De(G));break}case 32:{y===Po&&(G.altKey?(p&&(W=te-ve*p,re=T+ve*p),k&&(oe=ie-Q*k,O=V+Q*k),y=lt):(p<0?W=te:p>0&&(re=T),k<0?oe=ie:k>0&&(O=V),y=st),xe.attr("cursor",On[P]),De(G));break}default:return}$o(G)}}function C(g){f(this,arguments).moved(g)}function I(g){f(this,arguments).ended(g)}function le(){var g=this.__brush||{selection:null};return g.extent=tr(n.apply(this,arguments)),g.dim=e,g}return s.extent=function(g){return arguments.length?(n=typeof g=="function"?g:_o(tr(g)),s):n},s.filter=function(g){return arguments.length?(t=typeof g=="function"?g:_o(!!g),s):t},s.touchable=function(g){return arguments.length?(o=typeof g=="function"?g:_o(!!g),s):o},s.handleSize=function(g){return arguments.length?(a=+g,s):a},s.keyModifiers=function(g){return arguments.length?(i=!!g,s):i},s.on=function(){var g=r.on.apply(r,arguments);return g===r?s:g},s}function zd(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function io(e,n){if((t=(e=n?e.toExponential(n-1):e.toExponential()).indexOf("e"))<0)return null;var t,o=e.slice(0,t);return[o.length>1?o[0]+o.slice(2):o,+e.slice(t+1)]}function mt(e){return e=io(Math.abs(e)),e?e[1]:NaN}function Vd(e,n){return function(t,o){for(var i=t.length,r=[],a=0,l=e[0],s=0;i>0&&l>0&&(s+l+1>o&&(l=Math.max(1,o-s)),r.push(t.substring(i-=l,i+l)),!((s+=l+1)>o));)l=e[a=(a+1)%e.length];return r.reverse().join(n)}}function Wd(e){return function(n){return n.replace(/[0-9]/g,function(t){return e[+t]})}}var Kd=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ro(e){if(!(n=Kd.exec(e)))throw new Error("invalid format: "+e);var n;return new ni({fill:n[1],align:n[2],sign:n[3],symbol:n[4],zero:n[5],width:n[6],comma:n[7],precision:n[8]&&n[8].slice(1),trim:n[9],type:n[10]})}ro.prototype=ni.prototype;function ni(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}ni.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Yd(e){e:for(var n=e.length,t=1,o=-1,i;t<n;++t)switch(e[t]){case".":o=i=t;break;case"0":o===0&&(o=t),i=t;break;default:if(!+e[t])break e;o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(i+1):e}var Qr;function Gd(e,n){var t=io(e,n);if(!t)return e+"";var o=t[0],i=t[1],r=i-(Qr=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return r===a?o:r>a?o+new Array(r-a+1).join("0"):r>0?o.slice(0,r)+"."+o.slice(r):"0."+new Array(1-r).join("0")+io(e,Math.max(0,n+r-1))[0]}function rr(e,n){var t=io(e,n);if(!t)return e+"";var o=t[0],i=t[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}const ar={"%":(e,n)=>(e*100).toFixed(n),b:e=>Math.round(e).toString(2),c:e=>e+"",d:zd,e:(e,n)=>e.toExponential(n),f:(e,n)=>e.toFixed(n),g:(e,n)=>e.toPrecision(n),o:e=>Math.round(e).toString(8),p:(e,n)=>rr(e*100,n),r:rr,s:Gd,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function sr(e){return e}var lr=Array.prototype.map,ur=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function Qd(e){var n=e.grouping===void 0||e.thousands===void 0?sr:Vd(lr.call(e.grouping,Number),e.thousands+""),t=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",r=e.numerals===void 0?sr:Wd(lr.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",s=e.nan===void 0?"NaN":e.nan+"";function u(h){h=ro(h);var m=h.fill,C=h.align,I=h.sign,le=h.symbol,g=h.zero,S=h.width,P=h.comma,y=h.precision,p=h.trim,k=h.type;k==="n"?(P=!0,k="g"):ar[k]||(y===void 0&&(y=12),p=!0,k="g"),(g||m==="0"&&C==="=")&&(g=!0,m="0",C="=");var q=le==="$"?t:le==="#"&&/[boxX]/.test(k)?"0"+k.toLowerCase():"",X=le==="$"?o:/[%p]/.test(k)?a:"",x=ar[k],fe=/[defgprs%]/.test(k);y=y===void 0?6:/[gprs]/.test(k)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function re(T){var J=q,O=X,V,we,W;if(k==="c")O=x(T)+O,T="";else{T=+T;var te=T<0||1/T<0;if(T=isNaN(T)?s:x(Math.abs(T),y),p&&(T=Yd(T)),te&&+T==0&&I!=="+"&&(te=!1),J=(te?I==="("?I:l:I==="-"||I==="("?"":I)+J,O=(k==="s"?ur[8+Qr/3]:"")+O+(te&&I==="("?")":""),fe){for(V=-1,we=T.length;++V<we;)if(W=T.charCodeAt(V),48>W||W>57){O=(W===46?i+T.slice(V+1):T.slice(V))+O,T=T.slice(0,V);break}}}P&&!g&&(T=n(T,1/0));var ue=J.length+T.length+O.length,oe=ue<S?new Array(S-ue+1).join(m):"";switch(P&&g&&(T=n(oe+T,oe.length?S-O.length:1/0),oe=""),C){case"<":T=J+T+O+oe;break;case"=":T=J+oe+T+O;break;case"^":T=oe.slice(0,ue=oe.length>>1)+J+T+O+oe.slice(ue);break;default:T=oe+J+T+O;break}return r(T)}return re.toString=function(){return h+""},re}function f(h,m){var C=u((h=ro(h),h.type="f",h)),I=Math.max(-8,Math.min(8,Math.floor(mt(m)/3)))*3,le=Math.pow(10,-I),g=ur[8+I/3];return function(S){return C(le*S)+g}}return{format:u,formatPrefix:f}}var Ht,Jr,Zr;Jd({thousands:",",grouping:[3],currency:["$",""]});function Jd(e){return Ht=Qd(e),Jr=Ht.format,Zr=Ht.formatPrefix,Ht}function Zd(e){return Math.max(0,-mt(Math.abs(e)))}function xd(e,n){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(mt(n)/3)))*3-mt(Math.abs(e)))}function ef(e,n){return e=Math.abs(e),n=Math.abs(n)-e,Math.max(0,mt(n)-mt(e))+1}function ti(e,n){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(n).domain(e);break}return this}const cr=Symbol("implicit");function xr(){var e=new Ui,n=[],t=[],o=cr;function i(r){let a=e.get(r);if(a===void 0){if(o!==cr)return o;e.set(r,a=n.push(r)-1)}return t[a%t.length]}return i.domain=function(r){if(!arguments.length)return n.slice();n=[],e=new Ui;for(const a of r)e.has(a)||e.set(a,n.push(a)-1);return i},i.range=function(r){return arguments.length?(t=Array.from(r),i):t.slice()},i.unknown=function(r){return arguments.length?(o=r,i):o},i.copy=function(){return xr(n,t).unknown(o)},ti.apply(i,arguments),i}function ea(){var e=xr().unknown(void 0),n=e.domain,t=e.range,o=0,i=1,r,a,l=!1,s=0,u=0,f=.5;delete e.unknown;function h(){var m=n().length,C=i<o,I=C?i:o,le=C?o:i;r=(le-I)/Math.max(1,m-s+u*2),l&&(r=Math.floor(r)),I+=(le-I-r*(m-s))*f,a=r*(1-s),l&&(I=Math.round(I),a=Math.round(a));var g=dl(m).map(function(S){return I+r*S});return t(C?g.reverse():g)}return e.domain=function(m){return arguments.length?(n(m),h()):n()},e.range=function(m){return arguments.length?([o,i]=m,o=+o,i=+i,h()):[o,i]},e.rangeRound=function(m){return[o,i]=m,o=+o,i=+i,l=!0,h()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(m){return arguments.length?(l=!!m,h()):l},e.padding=function(m){return arguments.length?(s=Math.min(1,u=+m),h()):s},e.paddingInner=function(m){return arguments.length?(s=Math.min(1,m),h()):s},e.paddingOuter=function(m){return arguments.length?(u=+m,h()):u},e.align=function(m){return arguments.length?(f=Math.max(0,Math.min(1,m)),h()):f},e.copy=function(){return ea(n(),[o,i]).round(l).paddingInner(s).paddingOuter(u).align(f)},ti.apply(h(),arguments)}function nf(e){return function(){return e}}function tf(e){return+e}var dr=[0,1];function ut(e){return e}function Do(e,n){return(n-=e=+e)?function(t){return(t-e)/n}:nf(isNaN(n)?NaN:.5)}function of(e,n){var t;return e>n&&(t=e,e=n,n=t),function(o){return Math.max(e,Math.min(n,o))}}function rf(e,n,t){var o=e[0],i=e[1],r=n[0],a=n[1];return i<o?(o=Do(i,o),r=t(a,r)):(o=Do(o,i),r=t(r,a)),function(l){return r(o(l))}}function af(e,n,t){var o=Math.min(e.length,n.length)-1,i=new Array(o),r=new Array(o),a=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),n=n.slice().reverse());++a<o;)i[a]=Do(e[a],e[a+1]),r[a]=t(n[a],n[a+1]);return function(l){var s=nl(e,l,1,o)-1;return r[s](i[s](l))}}function sf(e,n){return n.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function lf(){var e=dr,n=dr,t=co,o,i,r,a=ut,l,s,u;function f(){var m=Math.min(e.length,n.length);return a!==ut&&(a=of(e[0],e[m-1])),l=m>2?af:rf,s=u=null,h}function h(m){return m==null||isNaN(m=+m)?r:(s||(s=l(e.map(o),n,t)))(o(a(m)))}return h.invert=function(m){return a(i((u||(u=l(n,e.map(o),kn)))(m)))},h.domain=function(m){return arguments.length?(e=Array.from(m,tf),f()):e.slice()},h.range=function(m){return arguments.length?(n=Array.from(m),f()):n.slice()},h.rangeRound=function(m){return n=Array.from(m),t=yc,f()},h.clamp=function(m){return arguments.length?(a=m?!0:ut,f()):a!==ut},h.interpolate=function(m){return arguments.length?(t=m,f()):t},h.unknown=function(m){return arguments.length?(r=m,h):r},function(m,C){return o=m,i=C,f()}}function uf(){return lf()(ut,ut)}function cf(e,n,t,o){var i=ul(e,n,t),r;switch(o=ro(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(n));return o.precision==null&&!isNaN(r=xd(i,a))&&(o.precision=r),Zr(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(r=ef(i,Math.max(Math.abs(e),Math.abs(n))))&&(o.precision=r-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(r=Zd(i))&&(o.precision=r-(o.type==="%")*2);break}}return Jr(o)}function df(e){var n=e.domain;return e.ticks=function(t){var o=n();return ll(o[0],o[o.length-1],t??10)},e.tickFormat=function(t,o){var i=n();return cf(i[0],i[i.length-1],t??10,o)},e.nice=function(t){t==null&&(t=10);var o=n(),i=0,r=o.length-1,a=o[i],l=o[r],s,u,f=10;for(l<a&&(u=a,a=l,l=u,u=i,i=r,r=u);f-- >0;){if(u=To(a,l,t),u===s)return o[i]=a,o[r]=l,n(o);if(u>0)a=Math.floor(a/u)*u,l=Math.ceil(l/u)*u;else if(u<0)a=Math.ceil(a*u)/u,l=Math.floor(l*u)/u;else break;s=u}return e},e}function na(){var e=uf();return e.copy=function(){return sf(e,na())},ti.apply(e,arguments),df(e)}function _t(e,n,t){this.k=e,this.x=n,this.y=t}_t.prototype={constructor:_t,scale:function(e){return e===1?this:new _t(this.k*e,this.x,this.y)},translate:function(e,n){return e===0&n===0?this:new _t(this.k,this.x+this.k*e,this.y+this.k*n)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};_t.prototype;function fr(e,n,t){const o=new B(10).pow(n-t);return new B(1.0001).pow(e).mul(o)}const ff=tn({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""}},setup(e,n){const t=N(1),o=N(""),i=N(""),r=ne(()=>{var p,k,q;return h.sqrtPriceX64ToPrice((p=e.poolInfo)==null?void 0:p.current_sqrt_price,(k=e.poolInfo)==null?void 0:k.coinA.decimals,(q=e.poolInfo)==null?void 0:q.coinB.decimals).toString()}),a=ne(()=>{let p=0;return e.direction?p=(Number(e.minPrice)/Number(r.value)-1)*100:p=(Number(e.minPrice)/Number(1/Number(r.value))-1)*100,p=p>0&&p<.1?.1:p,p=p<0&&p>-.1?-.1:p,p}),l=ne(()=>{let p=0;return e.direction?p=(Number(e.maxPrice)/Number(r.value)-1)*100:p=(Number(e.maxPrice)/Number(1/Number(r.value))-1)*100,p=p>0&&p<.1?.1:p,p=p<0&&p>-.1?-.1:p,p}),s=un(),u=ne(()=>s),f=ne(()=>u.value.chainName?jo(u.value.chainName):{}),{TickMath:h,getNearestTickByTick:m}=f.value,C=()=>{const p=t.value/2;t.value=p,g(e.poolInfo,p)},I=()=>{const p=t.value*2;t.value=p,g(e.poolInfo,p)},le=(p=[])=>{let k=6;const q=Math.abs(Number(p[0])-Number(p[p.length-1]));return q>=6?k=0:q>=1?k=1:q>=.1?k=2:q>=.01?k=3:q>=.001?k=4:q>=1e-4?k=5:q>=1e-5?k=6:q>=1e-6?k=7:q>=1e-7&&(k=8),k},g=(p,k=1)=>{if(p&&p.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const q=Number(e.poolInfo.current_tick_index);console.log("0117###dataProcessing###currentTick###",q),console.log("0117###dataProcessing###minPrice###",e.minPrice),console.log("0117###dataProcessing###maxPrice###",e.maxPrice),console.log("0117###dataProcessing###poolInfo###",e.poolInfo);let X=q+100*k,x=q-100*k,fe,re;e.maxPrice==="∞"?re=0:e.direction?re=h.priceToTickIndex(new B(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):re=h.priceToTickIndex(new B(1/Number(e.minPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals),e.minPrice==="0"?fe=0:e.direction?fe=h.priceToTickIndex(new B(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):fe=h.priceToTickIndex(new B(1/Number(e.maxPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals);let T=0;if(e.currentPriceTab!=="full range"){if(q>=fe&&q<=re){const Q=q-fe,K=re-q;T=Math.max(Math.abs(Q),Math.abs(K))}else q<fe?T=Math.abs(re-q):T=Math.abs(q-fe);X=q+T+100*k,x=q-T-100*k}else{const Q=(Math.abs(q)>5e3,2e4);X=q+Q*k,x=q-Q*k}x<-443636&&(x=-443636),X>443636&&(X=443636);const J=new B(p.liquidity).div(Math.pow(10,8)).toString(),O=e.tickList;console.log("0117####drawChart####tick_info_array####",O);const V=[],we=[];let W={};for(let Q=0;Q<O.length;Q++){if(W=O[Q],W.index<=q&&W.index>=x){if(V.length<1&&Q!==0){const K=O[Q-1];V.unshift({...K,index:x})}V.unshift(W)}else if(W.index>q&&W.index<=X&&(we.push(W),V.length<1&&Q!==0)){const K=O[Q-1];V.push({...K,index:x})}if(W.index>X){const K=O[Q];if(we.push({...K,index:X}),V.length<1&&Q!==0){const rn=O[Q-1];V.push({...rn,index:x})}break}}let te="0";for(let Q=V.length-1;Q>=0;Q--)te=new B(te).plus(new B(V[Q].liquidityNet.toString()).div(Math.pow(10,8))).toString(),V[Q].liquityAmount=te;let ue=J;for(let Q=0;Q<we.length;Q++)ue=new B(ue).plus(new B(we[Q].liquidityNet.toString()).div(Math.pow(10,8))).toString(),we[Q].liquityAmount=ue;let oe=[];const ie=O&&O.length>0?{index:q,liquityAmount:Number(J)}:{index:q,liquityAmount:0};(V.length>0||we.length>0)&&(oe=[...V.reverse(),ie,...we],e.direction||(oe=oe.reverse()));const ve=[];O.forEach(Q=>{ve.push({...Q,liquidityGross:Q.liquidityGross.toString(),liquidityNet:Q.liquidityNet.toString()})}),console.log("0117####drawChart####testTickInfoArray####",ve),console.log("0117####drawChart####currentLiquity####",J),P(oe,x,X,fe,re,q)}};let S=N(!1);ao(()=>{document.body.clientWidth<750?S.value=!1:S.value=!0,window.onresize=()=>{document.body.clientWidth<750?S.value=!1:S.value=!0,g(e.poolInfo,t.value)}});const P=(p,k,q,X,x,fe)=>{console.log("0117####drawChart####chartData####",p),console.log("0117####drawChart####tickMin####",k),console.log("0117####drawChart####tickMax####",q),console.log("0117####drawChart####minPriceTick####",X),console.log("0117####drawChart####maxPriceTick####",x),console.log("0117####drawChart####currentTick####",fe),console.log("0117####drawChart####props.direction####",e.direction);let re,T;e.direction?(re=e.before7dContractPriceLowest?h.priceToTickIndex(new B(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",T=e.before7dContractPriceHighest?h.priceToTickIndex(new B(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(re=e.before7dContractPriceLowest?h.priceToTickIndex(new B(1/Number(e.before7dContractPriceLowest)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",T=e.before7dContractPriceHighest?h.priceToTickIndex(new B(1/Number(e.before7dContractPriceHighest)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const J={top:30,right:35,bottom:20,left:55};let O,V;S.value?(O=460-J.left-J.right,V=205-J.top-J.bottom):(O=340-J.left-J.right,V=205-J.top-J.bottom);const we=q-k,W=parseInt(String(we/4));let te=[k+W/4,k+W,k+2*W,q-W,q-W/4];const ue=k,oe=q,ie=O/(oe-ue);e.currentPriceTab==="full range"&&(te=[k,k+2*W,q]),console.log("0117####drawChart####xArr####",te),console.log("0117####drawChart####utickMin####",ue),console.log("0117####drawChart####utickMax####",oe),console.log("0117####drawChart####unit####",ie);const ve=te.map(D=>e.direction?fr(D,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():1/fr(D,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),Q=le(ve);wn("#chart").selectAll("*").remove();const K=wn("#chart").attr("width",O+J.left+J.right).attr("height",V+J.top+J.bottom).append("g").attr("transform",`translate(${J.left},${J.right})`),rn=cl(p,function(D){return Number(Math.abs(D.liquityAmount))})||0,E=na().range([0,V]).domain([rn,0]);ea().rangeRound([0,O]).padding(.1);const qe=K.append("g").attr("id","barsBox").selectAll("rect").data(p).enter().append("rect");u.value.theme=="default"?qe.attr("x",function(D,z){return z===0?0:e.direction?Math.abs(D.index-ue)*ie:Math.abs(oe-D.index)*ie}).attr("y",function(D,z){return e.direction?z===p.length-1?0:E(D.liquityAmount):z===p.length-1?0:E(p[z+1].liquityAmount)}).attr("width",function(D,z){return z===0&&p.length===1&&D.liquityAmount>0?O:(e.direction,z!==p.length-1?Math.abs(p[z+1].index-D.index)*ie:0)}).attr("height",function(D,z){return z===0&&p.length===1&&D.liquityAmount>0?V:e.direction?z===p.length-1?0:V-E(D.liquityAmount):z===p.length-1?0:V-E(p[z+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):qe.attr("x",function(D,z){return z===0?0:e.direction?Math.abs(D.index-ue)*ie:Math.abs(oe-D.index)*ie}).attr("y",function(D,z){return e.direction?z===p.length-1?0:E(Math.abs(D.liquityAmount)):z===p.length-1?0:E(Math.abs(p[z+1].liquityAmount))}).attr("width",function(D,z){return z===0&&p.length===1&&D.liquityAmount>0?O:(e.direction,z!==p.length-1?Math.abs(p[z+1].index-D.index)*ie:0)}).attr("height",function(D,z){if(z===0&&p.length===1&&D.liquityAmount>0)return V;if(e.direction)return z===p.length-1?0:Number(D.liquityAmount)?V-E(Math.abs(D.liquityAmount)):0;{if(z===p.length-1)return 0;const $=V-E(Math.abs(p[z+1].liquityAmount));return Number(p[z+1].liquityAmount)?$:0}}).attr("fill","#407497").attr("class","bars").attr("stroke-width",1).attr("stroke","#407497");const Ze=K.append("g");Ze.append("line").attr("x1",0).attr("y1",155).attr("x2",O).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const Pn=Ze.append("g");let xe=0;if(e.direction){for(let D=0;D<te.length;D++){const z=Me(ve[D],Q)||"0";console.log("0423####price####",z),ve.push(z);const $=Math.abs(te[D]-ue)*ie;let _=0;for(let Fe=0;Fe<z.length;Fe++)z[Fe]==="1"?_+=4.02:z[Fe]==="."?_+=2.64:z[Fe]==="7"?_+=5.48:_+=6;console.log($,"x=>>>"),Pn.append("text").text(z).attr("x",$-_/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}xe=Math.abs(fe-ue)*ie}else{for(let D=te.length-1;D>=0;D--){const z=Me(ve[D],Q)||0;ve.push(z);const $=Math.abs(te[D]-oe)*ie;let _=0;for(let Fe=0;Fe<z.length;Fe++)z[Fe]==="1"?_+=4.02:z[Fe]==="."?_+=2.64:z[Fe]==="7"?_+=5.48:_+=6;Pn.append("text").text(z).attr("x",$-_/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}xe=Math.abs(fe-oe)*ie}(u.value.theme=="default"?K.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):K.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+xe+", 0)");let Ve,De,je,vn;e.direction?(Ve=X<ue?-100:Math.abs(X-ue)*ie,De=x<ue?-100:Math.abs(x-ue)*ie,je=re<ue?-100:Math.abs(re-ue)*ie,vn=T<ue?-100:Math.abs(T-ue)*ie):(De=X<ue?-100:Math.abs(oe-X)*ie,Ve=x<ue?-100:Math.abs(oe-x)*ie,vn=re<ue?-100:Math.abs(oe-re)*ie,je=T<ue?-100:Math.abs(oe-T)*ie),e.minPrice==="0"&&(Ve=0),e.maxPrice==="∞"&&(De=O),S.value?o.value=O-Ve+60+"px":o.value=O-Ve+52+"px",i.value=De+74+"px",re&&je<O&&K.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+je+", 0)"),T&&vn<O&&K.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+vn+", 0)");const He=K.append("g").attr("id","left-handle"),G=K.append("g").attr("id","right-handle");u.value.theme=="default"?(He.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),He.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),He.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),He.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),G.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),G.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),G.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),G.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(He.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),He.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),He.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),He.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),G.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),G.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),G.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),G.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),He.attr("transform","translate("+Ve+", 0)"),G.attr("transform","translate("+De+", 0)");const de=Hd().extent([[0,0],[O,V]]).handleSize(30).on("end",dn);K.append("g").attr("class","brush").call(de).call(de.move,[Ve,De]);function dn(D){if(!D.sourceEvent||!D.selection)return;He.attr("transform","translate("+D.selection[0]+", 0)"),G.attr("transform","translate("+D.selection[1]+", 0)"),S.value?o.value=O-D.selection[0]+60+"px":o.value=O-D.selection[0]+52+"px",i.value=D.selection[1]+74+"px";let z,$,_=0,Fe=0;e.direction?(_=m(D.selection[0]/ie+ue,Number(e.poolInfo.tickSpacing)),z=h.tickIndexToPrice(_,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),Fe=m(D.selection[1]/ie+ue,Number(e.poolInfo.tickSpacing)),$=h.tickIndexToPrice(Fe,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()):(Fe=m(oe-D.selection[0]/ie,Number(e.poolInfo.tickSpacing)),z=1/h.tickIndexToPrice(Fe,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),_=m(oe-D.selection[1]/ie,Number(e.poolInfo.tickSpacing)),$=1/h.tickIndexToPrice(_,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),n.emit("onChangeMinPrice",String(Me(String(z),6))),n.emit("onChangeMaxPrice",String(Me(String($),6)))}u.value.theme=="default"?wn(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):wn(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632")};N(""),Ae(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab],([p,k,q,X])=>{console.log(p,k,q,q>k,"poolInfo && minPrice && maxPrice && (maxPrice > minPrice)"),p&&k&&q&&(q=="∞"||Number(q)>Number(k))&&g(p,t.value)},{immediate:!0});const y=N(!0);return Ae(()=>e.chartLoading,(p,k)=>{p!==k&&(y.value=p)},{immediate:!0,deep:!0}),{store:u,loading:y,zoomOut:C,zoomIn:I,rangeSizeLower:a,rangeSizeUpper:l,rangeSizeLowerPosition:o,rangeSizeUpperPosition:i,decimalFormat:dt,numberformat:So}}});const pf=e=>(En("data-v-cc6ba58f"),e=e(),Dn(),e),mf={class:"chart-box"},vf={class:"chart"},hf={class:"zoom"},gf=pf(()=>d("svg",{id:"chart"},null,-1));function yf(e,n,t,o,i,r){return b(),A("div",mf,[Pa(d("div",vf,[d("div",hf,[d("div",{class:"amplification",onClick:n[0]||(n[0]=(...a)=>e.zoomOut&&e.zoomOut(...a))}),d("div",{class:"narrow",onClick:n[1]||(n[1]=(...a)=>e.zoomIn&&e.zoomIn(...a))})]),e.currentPriceTab!=="full range"?(b(),A("div",{key:0,class:"range-size range-size-lower",style:Mi({right:e.rangeSizeLowerPosition})},w(("numberformat"in e?e.numberformat:Ie(So))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):L("",!0),e.currentPriceTab!=="full range"?(b(),A("div",{key:1,class:"range-size range-size-upper",style:Mi({left:e.rangeSizeUpperPosition})},w(("numberformat"in e?e.numberformat:Ie(So))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):L("",!0),gf],512),[[Ia,!e.loading]])])}const bf=on(ff,[["render",yf],["__scopeId","data-v-cc6ba58f"]]),kf=tn({props:{poolInfo:{type:Object,default:()=>({})},aprRewardsParameter:{type:Number,default:30},label:{type:Boolean,default:!0}},setup(e,n){const t=N(""),o=N(""),i=N(""),r=un(),a=ne(()=>r);console.log(e,"props124====>");const l=Jn(),s=ne(()=>l),u=(y,p)=>y&&p?Xt(Ra.plus(ko(y),ko(p)),2):y>0?y:0,f=y=>{let p=0;return y&&y.forEach(k=>{p+=ko(String(k))}),String($t(String(p),2))},h=N([]),m=N([]),C=N(""),I=N(""),le=N(!0);Ae(()=>[a.value.newTopPoolsObj,e.poolInfo,s.value.tokensObj,e.aprRewardsParameter],async([y,p,k])=>{var q;if(y&&p&&k){const X=y[p==null?void 0:p.poolAddress];if(X){console.log(X,"===>stats"),t.value=X&&X.apr_7day&&X.apr_7day.replace("%","")||"0",I.value=f(X&&X.rewarder_apr),C.value=u(X&&X.apr_7day,X&&f(X.rewarder_apr)),console.log(t.value,"===>apr.value "),console.log(C.value,"===> rewardApr.value"),o.value=ln(X.tvl_in_usd,2),i.value=ln(X.vol_in_usd_24h,2);const x=p&&e.poolInfo.rewarder_infos||[],fe=[];for(let T=0;T<x.length;T++){const J=x[T];if(k[J.coinAddress]){const O=k[J.coinAddress].decimals,V=dt(J.emissionsEveryDay/Math.pow(10,O),4),we=Number(V)>0?ln(V):V,W=dt(Number(V)*((q=s.value.RATES[J.coinAddress])==null?void 0:q.price),4);fe.push({...J,logoUrl:k[J.coinAddress].logoURI,day:we,dayUSD:W,symbol:k[J.coinAddress].symbol,rewarder_display:p&&p[`rewarder_display${T+1}`]?p[`rewarder_display${T+1}`]:!1})}}console.log(fe,"mockArr206===>"),h.value=fe.filter(T=>T.rewarder_display);const re=[];fe.forEach((T,J)=>{k[T.coinAddress]&&re.push({...T,symbol:k[T.coinAddress].symbol,rewarderApr:X.rewarder_apr[J]&&X.rewarder_apr[J].replace("%","")})}),m.value=re.filter(T=>T.rewarder_display)}else t.value="0",o.value="--",i.value="--",C.value=="0";console.log(m.value,"===>rewarderArr.value"),le.value=!1}},{immediate:!0,deep:!0});const g=()=>{n.emit("reviseValue")},S=y=>{var p;return(y==null?void 0:y.logoURI)||(y==null?void 0:y.logo_url)||((p=s.value.tokensObj[y==null?void 0:y.address])==null?void 0:p.logo_url)||(a.value.theme==="default"?Ee("/image/coins/unknown.png"):Ee("/image/coins/sui-unknown.png"))},P=ne(()=>s.value.tokensObj);return console.log(P.value,"==>tokensObj"),console.log(e.poolInfo,"props.poolInfo====>"),{tokensObj:P,rewarderInfo:h,rewarderArr:m,rewardApr:C,rewardAprList:I,apr:t,liquidityTvl:o,vol24:i,addCommom:ln,reviseValue:g,loading:le,getCoinIcon:S,store:r}}});const mo=e=>(En("data-v-d7c41f36"),e=e(),Dn(),e),wf={key:0,class:"pool-info"},Cf=mo(()=>d("use",{"xlink:href":"#icon-icon_on"},null,-1)),_f=[Cf],$f={key:0,class:"info-block-container"},Pf={class:"info-block"},If={class:"coin-tips"},Af={class:"left"},Sf=["src"],Tf={class:"address"},Nf={key:0,class:"pool-warning"},Mf=mo(()=>d("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Rf=[Mf],Lf={class:"info-block"},qf={class:"coin-tips"},Uf={class:"left"},Of=["src"],Bf={class:"address"},Ff={key:0,class:"pool-warning"},Ef=mo(()=>d("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Df=[Ef],jf={class:"info-block"},Hf={class:"leabl"},Xf={class:"text"},zf={class:"apr-hover-content"},Vf={class:"info-block"},Wf={class:"leabl"},Kf={class:"text"},Yf={class:"info-block"},Gf={class:"leabl"},Qf={class:"text"},Jf={class:"info-block"},Zf={class:"leabl"},xf={class:"text"},ep={key:1,class:"pool-rewards-info"},np={class:"rewards-list-all"},tp=mo(()=>d("div",{class:"icon-sign"},null,-1)),op=["src"],ip={class:"rewards-value"};function rp(e,n,t,o,i,r){const a=Ma,l=yr;return e.poolInfo?(b(),A("div",wf,[e.loading?(b(),ye(l,{key:1})):(b(),A(Bn,{key:0},[d("div",{class:Pe(e.label?"pool-info-border pool-info-title":"pool-info-title")},[Be(w(e.$t("newAdd.poolInfo"))+" ",1),(b(),A("svg",{class:Pe(e.label?"show-icon icon":"icon"),"aria-hidden":"true",onClick:n[0]||(n[0]=s=>e.reviseValue())},_f,2))],2),e.label?(b(),A("div",$f,[d("div",Pf,[d("div",If,[d("div",Af,[d("img",{src:e.getCoinIcon(e.poolInfo.token_a),alt:""},null,8,Sf),d("div",Tf,w(e.poolInfo.token_a.address),1),e.tokensObj&&e.poolInfo&&e.poolInfo.coin_a_address&&e.tokensObj[e.poolInfo.coin_a_address]&&e.tokensObj[e.poolInfo.coin_a_address].isSelfBuilt?(b(),A("div",Nf)):L("",!0)]),(b(),A("svg",{class:"icon","aria-hidden":"true",onClick:n[1]||(n[1]=s=>e.store.copy(e.poolInfo.token_a.address&&e.poolInfo.token_a.address))},Rf))])]),d("div",Lf,[d("div",qf,[d("div",Uf,[d("img",{src:e.getCoinIcon(e.poolInfo.token_b),alt:""},null,8,Of),d("div",Bf,w(e.poolInfo.token_b.address),1),e.tokensObj&&e.poolInfo&&e.poolInfo.coin_b_address&&e.tokensObj[e.poolInfo.coin_b_address]&&e.tokensObj[e.poolInfo.coin_b_address].isSelfBuilt?(b(),A("div",Ff)):L("",!0)]),(b(),A("svg",{class:"icon","aria-hidden":"true",onClick:n[2]||(n[2]=s=>e.store.copy(e.poolInfo.token_b.address&&e.poolInfo.token_b.address))},Df))])]),d("div",jf,[d("div",Hf,w(e.$t("common.apr")),1),d("div",Xf,[Be(w(e.poolInfo.is_display_rewarder?e.rewardApr>0&&e.rewardApr<.01?"<0.01":("addCommom"in e?e.addCommom:Ie(ln))(e.rewardApr,2):e.apr>0&&e.apr<.01?"<0.01":("addCommom"in e?e.addCommom:Ie(ln))(e.apr,2))+"% ",1),d("div",zf,[be(a,{"l-item":{apr:e.apr,aprTotal:e.rewardApr,rewarder_apr:e.rewardAprList,is_display_rewarder:e.poolInfo.is_display_rewarder},"rewarder-info":e.rewarderArr},null,8,["l-item","rewarder-info"])])])]),d("div",Vf,[d("div",Wf,w(e.$t("common.liquidity")),1),d("div",Kf,"$"+w(e.liquidityTvl),1)]),d("div",Yf,[d("div",Gf,w(e.$t("common.volume24h")),1),d("div",Qf,"$"+w(e.vol24),1)]),d("div",Jf,[d("div",Zf,w(e.$t("newAdd.tickSpacing")),1),d("div",xf,w(e.poolInfo&&e.poolInfo.tick_spacing),1)])])):L("",!0),e.poolInfo.is_display_rewarder&&e.label&&e.rewarderInfo&&e.rewarderInfo.length>0?(b(),A("div",ep,[Be(w("Farming Bonus")+" "),d("div",np,[(b(!0),A(Bn,null,kt(e.rewarderInfo,s=>(b(),A("div",{key:s,class:Pe(["rewards-list",s.day==0?"rewards-none":""])},[tp,d("img",{src:s.logoUrl,alt:""},null,8,op),d("div",ip,[d("p",null,w(s.day)+" "+w(s.symbol)+" / "+w(e.$t("newAdd.day"))+" ",1)])],2))),128))])])):L("",!0)],64))])):L("",!0)}const ap=on(kf,[["render",rp],["__scopeId","data-v-d7c41f36"]]),sp=tn({components:{Modal:Xo},props:{poolInfo:{type:Object,required:!0}},setup(e){const n=N({}),t=un(),o=ne(()=>t),i=ne(()=>o.value.chainName),r=ne(()=>Wn[i.value]);let a=N(!0);const l=Jn(),s=ne(()=>l),u=Ho(),f=ne(()=>e.poolInfo.needReverse);return Ae(()=>s.value.currentPositionInfo,m=>{console.log(m,"==>newVal111111"),m&&(n.value=m)},{immediate:!0}),{addCommom:ln,router:u,pools:s,positionInfo:n,decimalFormat:dt,rateChange:a,config:r,importIcon:Ee,store:o,chainName:i,checkNullObj:bn,needReverse:f,getCoinIcon:m=>{var C;return(m==null?void 0:m.logoURI)||(m==null?void 0:m.logo_url)||((C=s.value.tokensObj[m==null?void 0:m.address])==null?void 0:C.logo_url)||(o.value.theme==="default"?Ee("/image/coins/unknown.png"):Ee("/image/coins/sui-unknown.png"))},decimalUi:Me}}});const Nt=e=>(En("data-v-d3550350"),e=e(),Dn(),e),lp=Nt(()=>d("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),up={class:"rejected-container"},cp={class:"coin-pair"},dp=Nt(()=>d("use",{"xlink:href":"#icon-icon-copy"},null,-1)),fp=[dp],pp=["href"],mp=Nt(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-icon-jump"})],-1)),vp=[mp],hp=["href"],gp=Nt(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-icon-jump"})],-1)),yp=[gp],bp={class:"coin-pair"},kp=["src"],wp=["src"],Cp={class:"fee"},_p={class:"status"},$p={class:"min-and-max"},Pp={key:0},Ip={class:"text"},Ap={key:0,src:Vo,alt:""},Sp={key:1,src:Wo,alt:""},Tp={class:"text"},Np={key:1},Mp={class:"text"},Rp={key:0,src:Vo,alt:""},Lp={key:1,src:Wo,alt:""},qp={class:"text"},Up=Nt(()=>d("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Op=[Up];function Bp(e,n,t,o,i,r){const a=gr,l=La,s=lo,u=zo("Modal");return b(),ye(u,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:n[3]||(n[3]=f=>e.$emit("onClose"))},{closeIcon:$e(()=>[lp]),default:$e(()=>[d("div",up,[be(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:$e(()=>[d("div",cp,[Be(w(e.positionInfo.tokenName)+" ",1),(b(),A("svg",{class:"icon","aria-hidden":"true",onClick:n[0]||(n[0]=f=>e.store.copy(e.positionInfo.nftHash))},fp)),e.chainName==="Aptos"?(b(),A("a",{key:0,href:`${("config"in e?e.config:Ie(Wn)).explorerUrl}/token/${e.positionInfo.nftHash}/0?network=${("config"in e?e.config:Ie(Wn)).network}`,target:"_blank"},vp,8,pp)):(b(),A("a",{key:1,href:`${("config"in e?e.config:Ie(Wn)).explorerUrl}/object/${e.positionInfo.pos_object_id}?network=${("config"in e?e.config:Ie(Wn)).network}`,target:"_blank"},yp,8,hp))])]),_:1},8,["loading"]),d("div",{class:Pe(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[be(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:$e(()=>{var f,h,m,C,I,le,g,S,P,y,p,k;return[d("div",bp,[d("div",null,[d("img",{src:e.getCoinIcon(e.needReverse?(h=e.positionInfo)==null?void 0:h.token_b:(f=e.positionInfo)==null?void 0:f.token_a)},null,8,kp),d("img",{src:e.getCoinIcon(e.needReverse?(C=e.positionInfo)==null?void 0:C.token_a:(m=e.positionInfo)==null?void 0:m.token_b)},null,8,wp)]),d("span",null,w(e.needReverse?(S=(g=e.positionInfo)==null?void 0:g.token_b)==null?void 0:S.symbol:(le=(I=e.positionInfo)==null?void 0:I.token_a)==null?void 0:le.symbol)+" - "+w(e.needReverse?(k=(p=e.positionInfo)==null?void 0:p.token_a)==null?void 0:k.symbol:(y=(P=e.positionInfo)==null?void 0:P.token_b)==null?void 0:y.symbol),1)]),d("div",Cp,w(e.$t("common.fee"))+" "+w(e.positionInfo.fee*100)+"%",1)]}),_:1},8,["loading"])],2),d("div",_p,[be(l,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),be(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:$e(()=>{var f,h,m,C,I,le,g,S;return[d("div",$p,[(e.needReverse?!e.rateChange:e.rateChange)?(b(),A("div",Pp,[d("div",Ip,w(("addCommom"in e?e.addCommom:Ie(ln))(("decimalUi"in e?e.decimalUi:Ie(Me))(String(e.positionInfo&&e.positionInfo.minPrice),6))),1),e.store.theme=="default"?(b(),A("img",Ap)):(b(),A("img",Sp)),d("div",Tp,w(e.positionInfo&&e.positionInfo.maxPrice.indexOf("∞")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in e?e.addCommom:Ie(ln))(("decimalUi"in e?e.decimalUi:Ie(Me))(String(e.positionInfo&&e.positionInfo.maxPrice),6)))+" "+w((h=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:h.symbol)+" per "+w((C=(m=e.positionInfo)==null?void 0:m.token_a)==null?void 0:C.symbol),1)])):(b(),A("div",Np,[d("div",Mp,w(("addCommom"in e?e.addCommom:Ie(ln))(("decimalUi"in e?e.decimalUi:Ie(Me))(String(1/Number(e.positionInfo&&e.positionInfo.maxPrice)),6))),1),e.store.theme=="default"?(b(),A("img",Rp)):(b(),A("img",Lp)),d("div",qp,w(e.positionInfo&&e.positionInfo.maxPrice.indexOf("∞")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in e?e.addCommom:Ie(ln))(("decimalUi"in e?e.decimalUi:Ie(Me))(String(1/Number(e.positionInfo&&e.positionInfo.minPrice)),6)))+" "+w((le=(I=e.positionInfo)==null?void 0:I.token_a)==null?void 0:le.symbol)+" per "+w((S=(g=e.positionInfo)==null?void 0:g.token_b)==null?void 0:S.symbol),1)])),(b(),A("svg",{class:"icon-change","aria-hidden":"true",onClick:n[1]||(n[1]=P=>e.rateChange=!e.rateChange)},Op))])]}),_:1},8,["loading"])]),be(s,{disabled:("checkNullObj"in e?e.checkNullObj:Ie(bn))(e.positionInfo),onClick:n[2]||(n[2]=f=>e.router.push(`/position-detail?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}&pos=${e.positionInfo.pos_object_id}`))},{default:$e(()=>[Be(w(e.$t("newAdd.viewDetail")),1)]),_:1},8,["disabled"])]),_:1},8,["title"])}const Fp=on(sp,[["render",Bp],["__scopeId","data-v-d3550350"]]),Ep=tn({components:{Modal:Xo},setup(){const e=un(),n=ne(()=>e);return{importIcon:Ee,store:n}}}),Dp=""+new URL("img-Creat-success_2x.b6f0a395.png",import.meta.url).href,jp=""+new URL("img-Creat-success.9734ad6f.png",import.meta.url).href;const Hp=e=>(En("data-v-d7a9ceb3"),e=e(),Dn(),e),Xp=Hp(()=>d("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),zp={class:"create-success-container"},Vp={key:0,src:Dp,alt:""},Wp={key:1,src:jp,alt:""},Kp={class:"waiting-title"};function Yp(e,n,t,o,i,r){const a=zo("Modal");return b(),ye(a,{visible:!0,class:"",centered:"",title:"",width:"400px",footer:null,onCancel:n[0]||(n[0]=l=>e.$emit("onClose"))},{closeIcon:$e(()=>[Xp]),default:$e(()=>[d("div",zp,[e.store.theme=="default"?(b(),A("img",Vp)):(b(),A("img",Wp)),d("p",Kp,w(e.$t("newAdd.createPoolSuccessText")),1)])]),_:1})}const Gp=on(Ep,[["render",Yp],["__scopeId","data-v-d7a9ceb3"]]),Qp=tn({components:{Modal:Xo,CoinPairName:Cr},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},currentPrice:{type:String,default:""},needReverse:{type:Boolean,default:!1},direct:{type:Boolean,default:!0}},setup(e,n){const{t}=br(),o=so(),i=un(),r=ne(()=>i),a=Jn(),l=ne(()=>a);return{t,route:o,decimalFormat:dt,addCommom:ln,store:r,createPool:()=>{n.emit("createPool")},importIcon:Ee,getCoinIcon:f=>{var h;return(f==null?void 0:f.logoURI)||(f==null?void 0:f.logo_url)||((h=l.value.tokensObj[f==null?void 0:f.address])==null?void 0:h.logo_url)||(r.value.theme==="default"?Ee("/image/coins/unknown.png"):Ee("/image/coins/sui-unknown.png"))},decimalUi:Me}}});const Jp=e=>(En("data-v-cbedbdec"),e=e(),Dn(),e),Zp=Jp(()=>d("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),xp={class:"create-pool-content"},em={class:"top"},nm={class:"coin-pair-box"},tm={class:"induction info"},om={class:"item"},im={class:"induction-text"},rm={class:"induction-value"},am={class:"item"},sm={class:"induction-text"},lm={class:"induction-value"},um={class:"item"},cm={class:"induction-text"},dm={class:"induction-value"},fm={class:"min-and-max"},pm={class:"text"},mm={key:0,src:Vo,alt:""},vm={key:1,src:Wo,alt:""},hm={class:"text"},gm={class:"deposit-amount"},ym={class:"deposit-amount-title"},bm={class:"bottom"},km=["src"],wm=["src"];function Cm(e,n,t,o,i,r){const a=Cr,l=lo,s=zo("Modal");return b(),ye(s,{width:"440px",visible:!0,footer:null,title:e.$t("newAdd.preview"),class:"add-liquidity-modal",onCancel:n[0]||(n[0]=u=>e.$emit("onClose"))},{closeIcon:$e(()=>[Zp]),default:$e(()=>{var u,f;return[d("div",xp,[d("div",em,[d("div",nm,[be(a,{"from-coin":e.fromCoin,"to-coin":e.toCoin},null,8,["from-coin","to-coin"])]),d("div",tm,[d("div",om,[d("span",im,w(e.$t("common.feeTier")),1),d("span",rm,w(((f=(u=e.route)==null?void 0:u.query)==null?void 0:f.fee)*100)+" %",1)]),d("div",am,[d("span",sm,w(e.$t("newAdd.initialPrice")),1),d("span",lm,w(e.currentPrice)+" "+w((e.needReverse?!e.direct:e.direct)?e.toCoin.symbol:e.fromCoin.symbol)+" per "+w((e.needReverse?!e.direct:e.direct)?e.fromCoin.symbol:e.toCoin.symbol),1)]),d("div",um,[d("span",cm,w(e.$t("newAdd.priceRange")),1),d("span",dm,[d("div",fm,[d("div",pm,w(("decimalUi"in e?e.decimalUi:Ie(Me))(e.minPrice,6)),1),e.store.theme=="default"?(b(),A("img",mm)):(b(),A("img",vm)),d("div",hm,w(e.maxPrice&&String(e.maxPrice).indexOf("+")>-1?"∞":("decimalUi"in e?e.decimalUi:Ie(Me))(e.maxPrice,6)),1)])])])])]),d("div",gm,[d("div",ym,w(e.$t("newAdd.depositAmount")),1),d("div",bm,[d("div",null,[d("img",{src:e.getCoinIcon(e.fromCoin)},null,8,km),d("p",null,w((e.needReverse?!e.direct:e.direct)?e.fromCoinAmount?e.fromCoinAmount:0:e.toCoinAmount?e.toCoinAmount:0),1),d("span",null,w(e.fromCoin.symbol),1)]),d("div",null,[d("img",{src:e.getCoinIcon(e.toCoin)},null,8,wm),d("p",null,w((e.needReverse?!e.direct:e.direct)?e.toCoinAmount?e.toCoinAmount:0:e.fromCoinAmount?e.fromCoinAmount:0),1),d("span",null,w(e.toCoin.symbol),1)])])])]),be(l,{class:"big-btn liquidity-btn",onClick:e.createPool},{default:$e(()=>[Be(w(e.$t("newAdd.createAndAddLiquidity")),1)]),_:1},8,["onClick"])]}),_:1},8,["title"])}const _m=on(Qp,[["render",Cm],["__scopeId","data-v-cbedbdec"]]),$m={1e-4:2,5e-4:10,.002:60,.006:200},Pm={1e-4:2,5e-4:10,.0025:60,.01:200},Im=tn({setup(){let e=N(!1);const{t:n,locale:t}=br(),o=Ca(),i=ne(()=>o),r=un(),a=N(0),l=N(!1),s=N(!1),u=N(!1),f=N("fromCoin"),h=N(""),m=N(""),C=N(!1),I=N(!0),le=N(!1),g=N(!0),S=N(!1),P=N(""),y=N(""),p=N(""),k=N(""),q=N(""),X=N(""),x=N(!1),fe=N(!1),re=N(!1),T=N(""),J=N(0),O=N(!0),V=N(!1),we=N([]),W=N(""),te=N(30),ue=N("30D"),oe=N("Estimated APR"),ie=N([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),ve=N(!0),Q=un(),K=ne(()=>Q),rn=ne(()=>{var c;return!!((c=j==null?void 0:j.query)!=null&&c.action&&(!$.value||!_.value||!T.value))}),E=ne(()=>K.value.chainName?jo(K.value.chainName):{}),$n=c=>{console.log(c,"====>>>>item",c.num,te.value),an.updateCurrentPools(pe.value.poolAddress,K.value.chainName),ue.value=c.time,te.value=c.num},qe=()=>{console.log("reviseValue==>"),ve.value=!ve.value},Ze=N([]),Pn=()=>{a.value=0,an.updateCurrentPools(pe.value.poolAddress,K.value.chainName),gn(),gt()},xe=ne(()=>Number(p.value)>0&&Number(k.value)>0&&Number(p.value)>Number(k.value)),Nn=c=>{le.value=c,p.value="0",k.value="∞"},Ve=ne(()=>{if(H.value.poolConfigList&&$.value&&_.value){const c=H.value.poolConfigList.filter(M=>{var Y,F,Z,ae;return M.token_a.address.toUpperCase()===((Y=$.value.address)==null?void 0:Y.toUpperCase())&&M.token_b.address.toUpperCase()===((F=_.value.address)==null?void 0:F.toUpperCase())||M.token_b.address.toUpperCase()===((Z=$.value.address)==null?void 0:Z.toUpperCase())&&M.token_a.address.toUpperCase()===((ae=_.value.address)==null?void 0:ae.toUpperCase())});console.log(c,"===>info");const v=[];return c.forEach(M=>{v.push(Number(M.fee))}),console.log(v,"===>>result"),v}}),De=ne(()=>[{label:.01+"% "+n("common.feeTier"),title:.01+"% ",fee:1e-4,text:n("newAdd.bestVeryStablePairs")},{label:.05+"% "+n("common.feeTier"),title:.05+"% ",fee:5e-4,text:n("newAdd.bestStablePairs")},K.value.chainName=="Aptos"?{label:.2+"% "+n("common.feeTier"),title:.2+"% ",fee:.002,text:n("newAdd.bestMostPairs")}:{label:.25+"% "+n("common.feeTier"),title:.25+"% ",fee:.0025,text:n("newAdd.bestMostPairs")},K.value.chainName=="Aptos"?{label:.6+"% "+n("common.feeTier"),title:.6+"% ",fee:.006,text:n("newAdd.besteExoticPairs")}:{label:"1% "+n("common.feeTier"),title:"1% ",fee:.01,text:n("newAdd.besteExoticPairs")}]),je=ne(()=>r.slippage),vn=ne(()=>!$.value||!_.value),He=ne(()=>{var c,v;return!P.value&&!y.value?(console.log("addLiquidityBtnDisabled11111"),!0):Number(P.value)>Number(We.value)||Number(y.value)>Number(Ke.value)?(console.log("addLiquidityBtnDisabled22222"),!0):G.value!==n("button.addLiquidity")&&G.value!==n("newAdd.preview")?(console.log("addLiquidityBtnDisabled33333###",G.value),!0):pe.value&&pe.value&&pe.value.is_pause?(console.log("addLiquidityBtnDisabled44444"),!0):(c=j==null?void 0:j.query)!=null&&c.action&&!U.value&&!((v=U.value)!=null&&v.currentPrice)?(console.log("addLiquidityBtnDisabled55555"),!0):Number(P.value)<=0&&Number(y.value)<=0}),G=ne(()=>{var c,v;return pe.value&&pe.value.is_pause?"Pool Closed":!$.value||!_.value||vn.value?n("modal.selectTokenModalTitle"):!Wn[K.value.chainName].hasCreatePool&&!pe.value?n("button.poolNotFound"):Number(P.value)>Number(We.value)?n("button.insufficientBalance",{name:$.value.symbol}):Number(y.value)>Number(Ke.value)?n("button.insufficientBalance",{name:_.value.symbol}):S.value?n("modal.selectTokenModalTitle"):(console.log(pe.value,"==>poolInfo.value"),console.log(!pe.value&&((c=j==null?void 0:j.query)==null?void 0:c.action),"===>!poolInfo.value && route?.query?.action"),!pe.value&&$.value&&_.value&&((v=j==null?void 0:j.query)==null?void 0:v.action)=="create-pool"?n("newAdd.preview"):k.value!=="∞"&&Number(p.value)>=Number(k.value)?n("newAdd.invalidRange"):!Number(P.value)&&!Number(y.value)?n("button.enterAmount"):n("button.addLiquidity"))}),de=ne(()=>{var c,v,M;return!pe.value||bn(K.value.addressHistTokens)||!K.value.addressHistTokens[(c=pe.value)==null?void 0:c.poolAddress]?null:Object.fromEntries((M=K.value.addressHistTokens[(v=pe.value)==null?void 0:v.poolAddress])==null?void 0:M.data.map(Y=>[Y.key,Y.value]))}),dn=ne(()=>I.value?de.value&&Me(te.value==7?de.value.before_7_d_contract_price_lowest:te.value==24?de.value.before_24_h_contract_price_lowest:de.value.before_30_d_contract_price_lowest,6)||0:de.value&&Me(new B(1).div(te.value==7?de.value.before_7_d_contract_price_highest:te.value==24?de.value.before_24_h_contract_price_highest:de.value.before_30_d_contract_price_highest).toString(),6)||0),D=ne(()=>I.value?de.value&&Me(te.value==7?de.value.before_7_d_contract_price_highest:te.value==24?de.value.before_24_h_contract_price_highest:de.value.before_30_d_contract_price_highest,6)||0:(de.value&&Me(1/Number(te.value==7?de.value.before_7_d_contract_price_lowest:te.value==24?de.value.before_24_h_contract_price_lowest:de.value.before_30_d_contract_price_lowest),6))==1/0?0:de.value&&Me(1/Number(te.value==7?de.value.before_7_d_contract_price_lowest:te.value==24?de.value.before_24_h_contract_price_lowest:de.value.before_30_d_contract_price_lowest),6)||0),z=Ho(),$=N(),_=N();ao(()=>{document.body.clientWidth<750?(ve.value=!1,e.value=!1):(ve.value=!0,e.value=!0)});const Fe=c=>{console.log("价格变动==>"),c!==p.value&&(W.value="custom"),p.value=c},Mt=c=>{c!==k.value&&(W.value="custom"),k.value=c},Rt=()=>{var v;if(j.query.action)I.value=!I.value,U.value&&ai(Me(1/U.value.currentPrice,(v=_==null?void 0:_.value)==null?void 0:v.decimals));else if(O.value=!0,O.value=!1,I.value=!I.value,p.value!==""&&k.value!==""&&p.value!=="0"&&k.value!=="∞"){const M=p.value,Y=k.value;p.value=String(1/Number(Y)),k.value=String(1/Number(M));const F=q.value,Z=X.value;q.value=String(1/Number(Z)),X.value=String(1/Number(F)),V.value=!1}const c=$.value;$.value=_.value,_.value=c,g.value?P.value=y.value:y.value=P.value};Ae([p,k],([c,v])=>{console.log(c,v,"==>minPrice,maxPrice"),Number(c)!==0&&Number(v)!==0&&gn(),v!=="∞"&&Number(c)!==0&&Number(v)!==0&&Number(c)>=Number(v)?re.value=!0:re.value=!1});const Lt=c=>{var v,M,Y,F;ui.value&&c==="toCoin"||(f.value=c,c==="fromCoin"?(h.value=((v=_.value)==null?void 0:v.address)||"",m.value=((M=$.value)==null?void 0:M.address)||""):(h.value=((Y=$.value)==null?void 0:Y.address)||"",m.value=((F=_.value)==null?void 0:F.address)||""),C.value=!0)},Ue=N(null),Oe=N(null),vt=N({}),ht=N({}),qt=c=>{S.value=!1,f.value==="fromCoin"?(_.value&&c.address.toLowerCase()===(_==null?void 0:_.value.address.toLowerCase())&&(_.value=null,Oe.value=null,T.value=""),$.value=c,console.log("0411是走到这里了吗###",c),Ue.value=c):($.value&&c.address.toLowerCase()===($==null?void 0:$.value.address.toLowerCase())&&($.value=null,Ue.value=null,T.value=""),_.value=c,Oe.value=c),C.value=!1},Ut=c=>{c==="fromCoin"?(g.value=!0,K.value.chainName==="Aptos"?P.value=Number(We.value)>0?$.value.symbol=="APT"?new B(Number(We.value)).sub(new B(.1)).lt(new B(0))?"0":new B(Number(We.value)).sub(new B(.1)).toString():String(We.value):"":P.value=Number(We.value)>0?$.value.symbol=="SUI"?new B(Number(We.value)).sub(new B(1e-4)).lt(new B(0))?"0":new B(Number(We.value)).sub(new B(1e-4)).toString():String(We.value):""):(g.value=!1,K.value.chainName==="Aptos"?y.value=Number(Ke.value)>0?_.value.symbol=="APT"?new B(Number(Ke.value)).sub(new B(.1)).lt(new B(0))?"0":new B(Number(Ke.value)).sub(new B(.1)).toString():String(Ke.value):"":y.value=Number(Ke.value)>0?_.value.symbol=="SUI"?new B(Number(Ke.value)).sub(new B(1e-4)).lt(new B(0))?"0":new B(Number(Ke.value)).sub(new B(1e-4)).toString():String(Ke.value):"")},Ot=c=>{c==="fromCoin"?(g.value=!0,P.value=Number(We.value)>0?Xt(new B(Number(We.value)).div(2).toString(),$.value.decimals).toString():""):(g.value=!1,y.value=Number(Ke.value)>0?Xt(new B(Number(Ke.value)).div(2).toString(),_.value.decimals).toString():"")};Ae(P,(c,v)=>{console.log(P,"===>fromCoinAmount"),c==""&&g.value&&(y.value=""),c&&g.value&&gn()}),Ae(y,(c,v)=>{console.log(c,"===>>>>newValsda"),c==""&&!g.value&&(P.value=""),c&&!g.value&&gn()});const Bt=()=>{$.value=null,_.value=null,p.value="0",k.value="0",P.value="",y.value="",S.value=!0,T.value="",x.value=!1,Se.value=!0,Te.value=!0,O.value=!1},Zn=N(!1),{setIsShowSuccess:Mn,setIsShowRejected:Rn,setIsShowWaiting:Qe,setTransactionDesc:xn,setTransactionTxid:Ln,setPositiomNum:et}=r,j=so(),an=Jn(),H=ne(()=>an);Ae(()=>H.value.tokens,async c=>{if(c&&c.length>0){const v=c;if(j&&j.query&&j.query.tokena&&(console.log("0410###deposite###watch###route.query.tokena####",j.query.tokena),j.query.tokena)){const M=await E.value.getTokenBySymbol(v,j.query.tokena);$.value=M,Ue.value=M}if(j&&j.query&&j.query.tokenb&&j.query.tokenb){const M=await E.value.getTokenBySymbol(v,j.query.tokenb);_.value=M,Oe.value=M}}},{immediate:!0});const qn=N({}),Se=N(!1),Te=N(!1),nt=N(),tt=N(),Xe=N(),hn=N(),gn=async()=>{var ge,fn,In,pn,sn,ze;if(!p.value&&!k.value)return!1;if(!P.value&&!y.value&&!p.value&&!k.value)return;const c=pe.value?pe.value:U.value;if(console.log(c,"===>poolInfos"),bn(c))return;console.log("添加流动性预计算=====>");const{TickUtil:v,TickMath:M,getNearestTickByTick:Y}=E.value,F=c==null?void 0:c.token_a.decimals,Z=c==null?void 0:c.token_b.decimals;let ae,me,ee,ce,se,ke,Le,Re,Ce=c.current_tick_index,he;if(c.token_a.address.toLowerCase()===$.value.address.toLowerCase()&&c.token_b.address.toLowerCase()===_.value.address.toLowerCase()?he=!0:he=!1,console.log(he,"=====>directs"),console.log("currentTickIndex####",Ce),console.log("currentTickIndex####",Ce),console.log("currentTickIndex####",Ce),p.value==="0"&&k.value==="∞"?(ee=v.getMinIndex(Number(c.tickSpacing)),ce=v.getMaxIndex(Number(c.tickSpacing)),se=M.tickIndexToSqrtPriceX64(ee),ke=M.tickIndexToSqrtPriceX64(ce)):W.value=="custom"||j.query.action?(console.log(he,"===>directs1866"),he?(ae=Number(p.value),me=Number(k.value)):(ae=1/Number(k.value),me=1/Number(p.value)),console.log(ae,me,"min max1875"),console.log(p.value,k.value,"===>maxPrice.value"),Le=ae==0?-443636:M.priceToTickIndex(new B(ae),F,Z),Re=M.priceToTickIndex(new B(me),F,Z),ee=Y(Le,Number(c.tickSpacing)),ce=Y(Re,Number(c.tickSpacing)),se=M.priceToSqrtPriceX64(new B(ae),F,Z),ke=M.priceToSqrtPriceX64(new B(me),F,Z),console.log(ee,"===>tick_lower"),console.log(ce,"===>tick_upper")):(ee=(ge=Hn.value[W.value])==null?void 0:ge.lower,ce=(fn=Hn.value[W.value])==null?void 0:fn.upper,se=M.tickIndexToSqrtPriceX64(ee),ke=M.tickIndexToSqrtPriceX64(ce)),k.value!=="∞"&&ee>=ce){Se.value=!0,P.value="",Te.value=!0,y.value="";return}if(console.log(ce,Ce,ee,"1922"),k.value==="∞"||Ce>ee&&Ce<ce){Se.value=!1,Te.value=!1;let Ne;if(P.value||y.value){if(g.value){const at=new B(P.value).mul(Math.pow(10,$.value.decimals)).toString();Ne=new yn(at)}else{const at=new B(y.value).mul(Math.pow(10,_.value.decimals)).toString();Ne=new yn(at)}console.log(he,"======>directs");const{liquidityAmount:_e,tokenMaxA:en,tokenMaxB:Je,tokenMaxAOrigin:mn,tokenMaxBOrigin:rt}=E.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:c.token_a,tokenB:c.token_b,lowerTick:ee,upperTick:ce,coinAmount:Ne,iscoinA:he?g.value:!g.value,roundUp:!0,slippage:Number(je.value)/100,curSqrtPrice:new yn(c.current_sqrt_price)});qn.value={liquidityAmount:_e,tokenMaxA:en,tokenMaxB:Je,tokenMaxAOrigin:mn,tokenMaxBOrigin:rt},console.log(_e,en,Je,mn,rt,"preAdd"),he?g.value?y.value=Number(Je)>0?Je:"":P.value=Number(en)>0?en:"":g.value?y.value=en:P.value=Je}}else if(Ce>=ce){if(he?P.value="":y.value="",Se.value=he,Te.value=!he,(In=j==null?void 0:j.query)!=null&&In.action&&(Se.value=!0,Te.value=!0),P.value||y.value){let Ne;if(he){const _e=new B(y.value).mul(Math.pow(10,(pn=_.value)==null?void 0:pn.decimals)).toString();Ne=new yn(_e),qn.value={liquidityAmount:E.value.estimateLiquidityForCoinB(se,ke,Ne),tokenMaxA:0,tokenMaxB:y.value}}else{const _e=new B(P.value).mul(Math.pow(10,(sn=$.value)==null?void 0:sn.decimals)).toString();Ne=new yn(_e),qn.value={liquidityAmount:E.value.estimateLiquidityForCoinB(se,ke,Ne),tokenMaxA:0,tokenMaxB:P.value}}}}else if(Ce<=ee){if(Se.value=!he,Te.value=he,(ze=j==null?void 0:j.query)!=null&&ze.action&&(Se.value=!0,Te.value=!0),he?y.value="":P.value="",P.value||y.value){let Ne;if(he){const _e=new B(P.value).mul(Math.pow(10,$.value.decimals)).toString();Ne=new yn(_e),console.log(se,"minPriceX64===>"),console.log(ke,"maxPriceX64===>maxPriceX64"),console.log(_e,"===>amount"),qn.value={liquidityAmount:E.value.estimateLiquidityForCoinA(se,ke,Ne),tokenMaxA:P.value,tokenMaxB:0}}else{const _e=new B(y.value).mul(Math.pow(10,_.value.decimals)).toString();Ne=new yn(_e),qn.value={liquidityAmount:E.value.estimateLiquidityForCoinA(se,ke,Ne),tokenMaxA:y.value,tokenMaxB:0}}}}else Se.value=!0,P.value="",Te.value=!0,y.value=""},jn=N(0);Ae(()=>j.query,c=>{c&&c.fee&&(jn.value=c.fee,T.value=Number(c.fee)*100+"% "+n("common.feeTier"))},{immediate:!0,deep:!0});const ot=ne(()=>{var F,Z,ae,me,ee;const c=(F=j==null?void 0:j.query)==null?void 0:F.fee,v=(Z=j==null?void 0:j.query)==null?void 0:Z.tokena,M=(ae=j==null?void 0:j.query)==null?void 0:ae.tokenb;let Y=null;console.log("0501###basePoolInfo###tokena###",v),console.log("0501###basePoolInfo###tokenb###",M),console.log("0501###basePoolInfo###fromCoin###",(me=$==null?void 0:$.value)==null?void 0:me.address),console.log("0501###basePoolInfo###toCoin###",(ee=_==null?void 0:_.value)==null?void 0:ee.address),console.log("0501###basePoolInfo###fee###",c);for(let ce=0;ce<H.value.poolConfigList.length;ce++){const se=H.value.poolConfigList[ce];console.log(se,"p===>"),!v||!M?Y={}:(se.token_a.address.toUpperCase()===(v==null?void 0:v.toUpperCase())&&se.token_b.address.toUpperCase()===(M==null?void 0:M.toUpperCase())||se.token_b.address.toUpperCase()===(v==null?void 0:v.toUpperCase())&&se.token_a.address.toUpperCase()===(M==null?void 0:M.toUpperCase()))&&(Y=se)}return console.log("0501###baseInfo###",Y),Y}),pe=ne(()=>{var v,M,Y,F,Z,ae,me,ee,ce,se,ke,Le,Re;const c=(v=j==null?void 0:j.query)==null?void 0:v.fee;if($.value&&_.value){let Ce=null;if(c)for(const he in H.value.poolsObj){const ge=H.value.poolsObj[he];(ge.token_a.address.toUpperCase()===((Y=(M=$==null?void 0:$.value)==null?void 0:M.address)==null?void 0:Y.toUpperCase())&&ge.token_b.address.toUpperCase()===((Z=(F=_==null?void 0:_.value)==null?void 0:F.address)==null?void 0:Z.toUpperCase())&&Number(ge.fee)==Number(jn.value)||ge.token_b.address.toUpperCase()===((ae=$==null?void 0:$.value.address)==null?void 0:ae.toUpperCase())&&ge.token_a.address.toUpperCase()===((ee=(me=_==null?void 0:_.value)==null?void 0:me.address)==null?void 0:ee.toUpperCase())&&Number(ge.fee)==Number(jn.value))&&(Ce=ge)}if(!((ce=j==null?void 0:j.query)!=null&&ce.action)&&(!c||!Ce))for(const he in H.value.poolsObj){const ge=H.value.poolsObj[he];(ge.token_a.address.toUpperCase()===((se=$==null?void 0:$.value.address)==null?void 0:se.toUpperCase())&&ge.token_b.address.toUpperCase()===((ke=_.value.address)==null?void 0:ke.toUpperCase())||ge.token_b.address.toUpperCase()===((Le=$==null?void 0:$.value.address)==null?void 0:Le.toUpperCase())&&ge.token_a.address.toUpperCase()===((Re=_.value.address)==null?void 0:Re.toUpperCase()))&&(Ce=ge)}return Ce&&!bn(Ce)?Ce:null}return null}),Ft=ne(()=>{var Y,F,Z,ae;const c=(Y=$==null?void 0:$.value)==null?void 0:Y.address,v=(F=_==null?void 0:_.value)==null?void 0:F.address;let M=null;console.log("0501###basePoolInfo###tokena###",c),console.log("0501###basePoolInfo###tokenb###",v),console.log("0501###basePoolInfo###fromCoin###",(Z=$==null?void 0:$.value)==null?void 0:Z.address),console.log("0501###basePoolInfo###toCoin###",(ae=_==null?void 0:_.value)==null?void 0:ae.address);for(let me=0;me<H.value.poolConfigList.length;me++){const ee=H.value.poolConfigList[me];console.log(ee,"p===>"),!c||!v?M={}:(ee.token_a.address.toUpperCase()===(c==null?void 0:c.toUpperCase())&&ee.token_b.address.toUpperCase()===(v==null?void 0:v.toUpperCase())||ee.token_b.address.toUpperCase()===(c==null?void 0:c.toUpperCase())&&ee.token_a.address.toUpperCase()===(v==null?void 0:v.toUpperCase()))&&(M=ee)}return console.log("0501###baseInfo###",M),M});Ae(()=>[ot.value,pe.value,H.value.recommendRangesObj],(c,v)=>{var M,Y,F;c[0]&&!c[1]&&c[2]&&!bn(c[2])&&(!v||c[0]&&((M=c[0])==null?void 0:M.address)!==v[0]&&((Y=v[0])!=null&&Y.address))&&an.setSinglePool(c[0],c[2][(F=c[0])==null?void 0:F.address],K.value.chainName)},{immediate:!0,deep:!0});const Hn=N({}),R=async(c,v)=>{if(console.log("deposit##poolInfoWatch###value####",c),c){const{TickMath:M,getNearestTickByTick:Y}=E.value;v&&(O.value=!0),c.token_a.address.toLowerCase()===$.value.address.toLowerCase()&&c.token_b.address.toLowerCase()===_.value.address.toLowerCase()?I.value=!0:I.value=!1,V.value=!0;const F=c.token_a.decimals,Z=c.token_b.decimals;Se.value=!1,Te.value=!1,T.value=c.fee*100+"% "+n("common.feeTier");const ae=c.current_tick_index;Xe.value=M.sqrtPriceX64ToPrice(c.current_sqrt_price,F,Z).toString(),hn.value=String(1/Xe.value);const me=await E.value.getTicks(c);if(we.value=me?E.value.getTickDataFromUrlData(me):[],v){let ee=H.value.poolPriceConfigObj&&H.value.poolPriceConfigObj[c.address]&&H.value.poolPriceConfigObj[c.address].recommend_ranges||{};const ce=H.value.poolPriceConfigObj&&H.value.poolPriceConfigObj[c.address]&&H.value.poolPriceConfigObj[c.address].type||"",se=ae-Number(ce=="unstable"?Number(c.tickSpacing)*2:Number(c.tickSpacing)*3),ke=ae+Number(ce=="unstable"?Number(c.tickSpacing)*2:Number(c.tickSpacing)*3);ee["full range"]={lower:-443636,upper:443636},ee.custom={lower:se,upper:ke};const Le=[];for(let Re in ee)ee[Re]&&Le.push({...ee[Re],key:Re});Ze.value=Le,ce?c.isSelfBuilt?W.value="custom":ce=="stable"?W.value="suggested":W.value="passive":W.value="custom",Hn.value=ee,ii({key:W.value,...ee[W.value]})}O.value=!1}else O.value=!1},Xn=ne(()=>an.getPoolInfoSuccess),Vn=ne(()=>Wn[K.value.chainName].hasCreatePool);Ae(()=>pe.value,(c,v)=>{var M,Y,F,Z,ae,me,ee,ce,se;console.log("0419###poolInfo###watch###",c),console.log("0419###poolInfo###pools.value.poolsObj###",H.value.poolsObj),c?((!v||c.poolAddress!==v.poolAddress||c.current_sqrt_price!==v.current_sqrt_price)&&R(c,!v||c.poolAddress!==v.poolAddress),(M=j==null?void 0:j.query)!=null&&M.action&&z.push(`/deposit?poolAddress=${c==null?void 0:c.address}&tokena=${(Y=$==null?void 0:$.value)==null?void 0:Y.address}&tokenb=${(F=_==null?void 0:_.value)==null?void 0:F.address}&fee=${c==null?void 0:c.fee}`)):((Z=j==null?void 0:j.query)==null?void 0:Z.actions)=="new-position"||(!Ft.value&&Vn.value?(T.value="",p.value="0",k.value="0",Se.value=!1,Te.value=!1,O.value=!1,Xe.value="",hn.value="",console.log("0501####222222"),z.push(`/deposit?action=create-pool&tokena=${(ae=$==null?void 0:$.value)==null?void 0:ae.address}&tokenb=${(me=_==null?void 0:_.value)==null?void 0:me.address}`)):Vn.value&&!c&&!((ee=j==null?void 0:j.query)!=null&&ee.action)&&Xn.value&&!ot.value?(T.value="",p.value="0",k.value="0",Se.value=!1,Te.value=!1,O.value=!1,Xe.value="",hn.value="",console.log("0501####222222"),z.push(`/deposit?action=create-pool&tokena=${(ce=$==null?void 0:$.value)==null?void 0:ce.address}&tokenb=${(se=_==null?void 0:_.value)==null?void 0:se.address}`)):(Se.value=!1,Te.value=!1,O.value=!1,Xe.value="",hn.value="")),console.log(!ot.value,"===>getPoolInfoSuccess.value&& !basePoolInfo.value")},{immediate:!0});const We=ne(()=>i.value.assets&&$.value&&i.value.assets[$.value.address]?Ni(i.value.assets[$.value.address].balance,$.value.decimals):"0"),Ke=ne(()=>i.value.assets&&_.value&&i.value.assets[_.value.address]?Ni(i.value.assets[_.value.address].balance,_.value.decimals):"0"),gt=async()=>{console.log("0412###resetTickList####");const c=await E.value.getTicks(pe.value);console.log("0412###resetTickList###result####",c);const v=c?E.value.getTickDataFromUrlData(c):[];we.value=v,console.log("0412###resetTickList###tickList####",v)},oi=qa(),vo=ne(()=>H.value.currentPositionInfo),ia=async c=>{var se,ke,Le,Re,Ce,he,ge,fn,In,pn;console.log(pe.value,"===> poolInfo.value"),Zn.value=!1,H.value.currentPositionInfo={},Ln(""),xn(n("tips.increaseLiquiditySuccess",{from:Se.value?"":`${P.value} ${(se=$.value)==null?void 0:se.symbol}`,and:!Se.value&&!Te.value?"and":"",to:Te.value?"":`${y.value} ${(ke=_.value)==null?void 0:ke.symbol}`})),Qe(!0);const v=I.value?g.value:!g.value;let M,Y,F,Z,ae,me;const ee=pe.value.token_a.decimals,ce=pe.value.token_b.decimals;p.value==="0"&&k.value==="∞"?(F=E.value.TickUtil.getMinIndex(Number(pe.value.tickSpacing)),Z=E.value.TickUtil.getMaxIndex(Number(pe.value.tickSpacing))):W.value=="custom"?(I.value?(M=Number(p.value),Y=Number(k.value)):(M=1/Number(k.value),Y=1/Number(p.value)),ae=M==0?-443636:E.value.TickMath.priceToTickIndex(new B(M),ee,ce),me=E.value.TickMath.priceToTickIndex(new B(Y),ee,ce),F=E.value.getNearestTickByTick(ae,Number(pe.value.tickSpacing)),Z=E.value.getNearestTickByTick(me,Number(pe.value.tickSpacing))):(F=Hn.value[W.value].lower,Z=Hn.value[W.value].upper);try{const sn=await E.value.getAddLiquidityTransactionPayload({pool:{poolAddress:pe.value.poolAddress,token_a:pe.value.token_a,token_b:pe.value.token_b},amount:g.value?P.value:y.value,fix_amount_a:v,tick_lower:F,tick_upper:Z,index:0,slippage:Number(je.value)/100,roundUp:!0});let ze;if(K.value.chainName==="Aptos")ze=await i.value.currentWallet.signAndSubmitTransaction(sn);else{const Ne=await i.value.currentWallet.signAndExecuteTransactionBlock(sn);ze=E.value.handleTx(Ne)}if(console.log("0410###tx###",ze),ze&&ze.hash){Ln(ze.hash),Qe(!1),Mn(!0);const Ne=ri();let _e;pe.value.needReverse?pe.value.token_a.address.toLowerCase()===$.value.address.toLowerCase()&&pe.value.token_b.address.toLowerCase()===_.value.address.toLowerCase()?_e=!1:_e=!0:pe.value.token_a.address.toLowerCase()===$.value.address.toLowerCase()&&pe.value.token_b.address.toLowerCase()===_.value.address.toLowerCase()?_e=!0:_e=!1,console.log(_e,"===>directs");const en={title:"Supplied",desc:n("tips.addLiquiditySuccessText",{from:Se.value?"":`${P.value} ${(Le=$.value)==null?void 0:Le.symbol}`,and:!Se.value&&!Te.value?"and":"",to:Te.value?"":`${y.value} ${(Re=_.value)==null?void 0:Re.symbol}`}),hash:ze.hash,tit:"Position Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:_e?(Ce=$.value)==null?void 0:Ce.address:(he=_.value)==null?void 0:he.address,numa:_e?P.value:y.value,logoa:_e?H.value.tokensObj&&$.value&&$.value.address&&H.value.tokensObj[$.value.address]&&H.value.tokensObj[$.value.address].logoURI:H.value.tokensObj&&_.value&&_.value.address&&H.value.tokensObj[_.value.address]&&H.value.tokensObj[_.value.address].logoURI,tokenb:_e?(fn=_.value)==null?void 0:fn.address:(ge=$.value)==null?void 0:ge.address,numb:_e?y.value:P.value,logob:_e?H.value.tokensObj&&_.value&&_.value.address&&H.value.tokensObj[_.value.address]&&H.value.tokensObj[_.value.address].logoURI:H.value.tokensObj&&$.value&&$.value.address&&H.value.tokensObj[$.value.address]&&H.value.tokensObj[$.value.address].logoURI},text:`Deopsit ${Se.value?"":`${P.value} ${(In=$.value)==null?void 0:In.symbol}`} ${!Se.value&&!Te.value?"and":""} ${Te.value?"":`${y.value} ${(pn=_.value)==null?void 0:pn.symbol}`}`};K.value.chainName!=="Aptos"&&(en.res=ze.res),E.value.showTransitionPending(en);const Je=await E.value.watchTransaction(en,!0);if(Je.status){if(Mn(!1),H.value.setCurrentPositionLoading(!0),s.value=!0,K.value.chainName==="Aptos")console.log(Je.nftInfo,"===> watchInfo.nftInfo"),await H.value.setCurrentPositionInfo(Je.nftInfo[0].data.id.creator,Je.nftInfo[0].data.id.collection,Je.nftInfo[0].data.name,K.value.chainName),c&&await oi.subscribePosition({pool_address:vo.value.poolAddress,position_index:vo.value.index},vo.value.nftHash);else{const mn=Je.nftInfo,rt=await _a(2e3);await H.value.setCurrentPositionInfo(mn==null?void 0:mn.pool,"","",K.value.chainName,mn==null?void 0:mn.position)}setTimeout(()=>{an.updateCurrentPools(pe.value.poolAddress,K.value.chainName),E.value.getAccount(i.value.address)},3e3),setTimeout(async()=>{gt()},3e3)}et()}else Qe(!1),Rn(!0);P.value="",y.value=""}catch(sn){P.value="",y.value="",console.log("0330###Add liquidity Error###",sn),Qe(!1),Rn(!0)}},ra=c=>{switch(c){case"active":return n("newAdd.activeTips");case"passive":return n("newAdd.passiveTips");case"full range":return n("newAdd.fullRangTips");case"suggested":return n("newAdd.suggestedTips");case"custom":return n("newAdd.customTips")}},aa=c=>{switch(c){case"suggested":return n("newAdd.suggested");case"active":return n("newAdd.active");case"passive":return n("newAdd.conservative");case"full range":return n("newAdd.fullRange");case"custom":return n("newAdd.custom")}},ii=c=>{console.log("priceTab====>",c),console.log("priceTab###poolInfo###",pe.value),W.value=c.key.toLowerCase();const v=pe.value.token_a.decimals,M=pe.value.token_b.decimals,{lower:Y,upper:F}=c,Z=E.value.TickMath.tickIndexToPrice(Y,v,M).toString(),ae=E.value.TickMath.tickIndexToPrice(F,v,M).toString();if(c.key=="full range"){nt.value=Y,tt.value=F,Nn(!0),gn();return}I.value?(q.value=String(Z),p.value=String(Z),X.value=String(ae),k.value=String(ae),nt.value=Y,tt.value=F,gn()):(q.value=String(1/Number(ae)),p.value=String(1/Number(ae)),X.value=String(1/Number(Z)),k.value=String(1/Number(Z)),nt.value=E.value.TickMath.priceToTickIndex(new B(1/Number(ae)),v,M),tt.value=E.value.TickMath.priceToTickIndex(new B(1/Number(Z)),v,M),gn())},sa=ne(()=>H.value.tokensObj&&$.value.address&&H.value.tokensObj[$.value.address]&&H.value.tokensObj[$.value.address].logoURI),la=ne(()=>H.value.tokensObj&&_.value.address&&H.value.tokensObj[_.value.address]&&H.value.tokensObj[_.value.address].logoURI),ri=()=>{var M,Y,F,Z,ae,me,ee,ce;let c=null;const v=H.value.poolConfigList;for(let se=0;se<v.length;se++){const ke=v[se];if(ke.token_a.address.toUpperCase()===((Y=(M=$==null?void 0:$.value)==null?void 0:M.address)==null?void 0:Y.toUpperCase())&&ke.token_b.address.toUpperCase()===((Z=(F=_==null?void 0:_.value)==null?void 0:F.address)==null?void 0:Z.toUpperCase())||ke.token_b.address.toUpperCase()===((me=(ae=$==null?void 0:$.value)==null?void 0:ae.address)==null?void 0:me.toUpperCase())&&ke.token_a.address.toUpperCase()===((ce=(ee=_==null?void 0:_.value)==null?void 0:ee.address)==null?void 0:ce.toUpperCase())){c=ke;break}}return c},ua=c=>{var M,Y,F,Z,ae,me,ee,ce,se;const v=ri();if(v&&(Ue.value=v.needReverse?v==null?void 0:v.token_b:v==null?void 0:v.token_a,Oe.value=v.needReverse?v==null?void 0:v.token_a:v==null?void 0:v.token_b,$.value=v.needReverse?v==null?void 0:v.token_b:v==null?void 0:v.token_a,_.value=v.needReverse?v==null?void 0:v.token_a:v==null?void 0:v.token_b,I.value=$.value.address===((M=v==null?void 0:v.token_a)==null?void 0:M.address)),Ve.value.includes(c.fee))T.value=c.label,jn.value=c.fee,z.push(`/deposit?tokena=${v?v.needReverse?(F=v==null?void 0:v.token_b)==null?void 0:F.address:(Y=v==null?void 0:v.token_a)==null?void 0:Y.address:$.value.address}&tokenb=${v?v.needReverse?(ae=v==null?void 0:v.token_a)==null?void 0:ae.address:(Z=v==null?void 0:v.token_b)==null?void 0:Z.address:_.value.address}&fee=${c.fee}`),p.value="0",k.value="0";else{if(K.value.chainName!=="Aptos"&&$.value.address!=="0x2::sui::SUI"&&_.value.address!=="0x2::sui::SUI")return;jn.value=c.fee,T.value=c.label,pe.value&&(p.value="",k.value=""),z.push(`/deposit?action=create-pool&tokena=${v?v.needReverse?(ee=v==null?void 0:v.token_b)==null?void 0:ee.address:(me=v==null?void 0:v.token_a)==null?void 0:me.address:$.value.address}&tokenb=${v?v.needReverse?(se=v==null?void 0:v.token_a)==null?void 0:se.address:(ce=v==null?void 0:v.token_b)==null?void 0:ce.address:_.value.address}&fee=${c.fee}`),v||(I.value=!0)}},it=N(!1),ca=()=>{pe.value?Zn.value=!0:it.value=!0},U=N(null),ho=N(""),go=N(""),ai=c=>{var me,ee,ce,se,ke,Le,Re,Ce;c?(ho.value=c,Xe.value=c,hn.value=c,go.value=hn.value,O.value=!1):(ho.value="",Xe.value="",hn.value="",go.value="");let v=!1,M=!0;const Y=H.value.poolConfigList;console.log("0411###changecurrentPrice###poolConfigList###",Y),console.log("0411###changecurrentPrice###createPoolFromCoin###",Ue.value),console.log("0411###changecurrentPrice###createPoolToCoin###",Oe.value);let F=null;for(let he=0;he<Y.length;he++){const ge=Y[he];if(ge.token_a.address.toUpperCase()===((ee=(me=Ue==null?void 0:Ue.value)==null?void 0:me.address)==null?void 0:ee.toUpperCase())&&ge.token_b.address.toUpperCase()===((se=(ce=Oe==null?void 0:Oe.value)==null?void 0:ce.address)==null?void 0:se.toUpperCase())){M=!0,v=ge.needReverse,F=ge;break}else if(ge.token_b.address.toUpperCase()===((Le=(ke=Ue==null?void 0:Ue.value)==null?void 0:ke.address)==null?void 0:Le.toUpperCase())&&ge.token_a.address.toUpperCase()===((Ce=(Re=Oe==null?void 0:Oe.value)==null?void 0:Re.address)==null?void 0:Ce.toUpperCase())){M=!1,v=ge.needReverse,F=ge;break}}console.log("0411###changecurrentPrice######direct.value###",I.value),console.log("0411###changecurrentPrice######realDirect###",M);const Z=I.value;console.log("0411###changecurrentPrice######newDirect###",Z),console.log("0411###changecurrentPrice######createPoolFromCoin###",Ue.value),console.log("0411###changecurrentPrice######createPoolToCoin###",Oe.value);const ae=K.value.chainName=="Aptos"?$m:Pm;if($.value&&_.value&&c){const he=F?F==null?void 0:F.token_a.decimals:Ue.value.decimals,ge=F?F==null?void 0:F.token_b.decimals:Oe.value.decimals,fn=c&&E.value.TickMath.priceToSqrtPriceX64(Z?new B(c):new B(1/c),he,ge);console.log(fn.toString(),"===>current_sqrt_price.toString");const In=c&&E.value.TickMath.priceToSqrtPriceX64(new B(1/c),$.value.decimals,_.value.decimals);console.log(c,"===>emitCurrentPrice");const pn=E.value.TickMath.priceToTickIndex(Z?new B(c):new B(1/c),he,ge,ae[j.query.fee]);console.log(c,1/c,"emitCurrentPrice2950");const sn=pn-ae[j.query.fee]*5,ze=pn+ae[j.query.fee]*5,Ne=E.value.TickMath.tickIndexToPrice(sn,he,ge).toString(),_e=E.value.TickMath.tickIndexToPrice(ze,he,ge).toString();console.log(Ne,_e,"minmax===>"),Z?(p.value=Ne,k.value=_e,q.value=Ne,X.value=_e):(p.value=String(1/_e),k.value=String(1/Ne),q.value=String(1/_e),X.value=String(1/Ne)),console.log("0411###changecurrentPrice### minPrice.value####",p.value),console.log("0411###changecurrentPrice###maxPrice.value####",k.value),console.log("0411###changecurrentPrice###needReverse####",v);const en={token_a:F?F.token_a:Ue.value,token_b:F?F.token_b:Oe.value,isCreate:!0,tickSpacing:ae[j.query.fee],currentPrice:c,current_sqrt_price:fn,tick_lower:sn,tick_upper:ze,current_tick_index:pn,currentPriceReverse:dt(String(1/c),6),reverse_current_sqrt_price:In,needReverse:v};console.log(fn,"===>current_sqrt_price"),U.value=en,console.log(U.value,"===>createPoolInfo.value"),console.log("0411###changecurrentPrice######createPoolInfo###",U.value),gn()}else U.value=null,p.value="",k.value=""},da=async()=>{var ce,se,ke,Le;if(K.value.chainName!=="Aptos"){si();return}it.value=!1;let c,v,M,Y,F,Z;const ae=Ue.value.decimals,me=Oe.value.decimals;Ln(""),xn(n("tips.increaseLiquiditySuccess",{from:Se.value?"":`${P.value} ${(ce=$.value)==null?void 0:ce.symbol}`,and:!Se.value&&!Te.value?"and":"",to:Te.value?"":`${y.value} ${(se=_.value)==null?void 0:se.symbol}`})),Qe(!0),p.value==="0"&&k.value==="∞"?(M=E.value.TickUtil.getMinIndex(Number(U.value.tickSpacing)),Y=E.value.TickUtil.getMaxIndex(Number(U.value.tickSpacing))):(I.value?(c=Number(p.value),v=Number(k.value)):(c=1/Number(k.value),v=1/Number(p.value)),F=c==0?-443636:E.value.TickMath.priceToTickIndex(new B(c),ae,me),Z=E.value.TickMath.priceToTickIndex(new B(v),ae,me),M=E.value.getNearestTickByTick(F,Number(U.value.tickSpacing)),Y=E.value.getNearestTickByTick(Z,Number(U.value.tickSpacing)));const ee=I.value?g.value:!g.value;try{const Re=await E.value.getCreatPoolTransactionPayload({coinTypeA:Ue.value.address,coinTypeB:Oe.value.address,tick_spacing:Number(U.value.tickSpacing),initialize_sqrt_price:new yn(U.value.current_sqrt_price),uri:"",current_tick_index:U.value.current_tick_index,max_amount_a:I.value?P.value:y.value,max_amount_b:I.value?y.value:P.value,tick_lower:M,tick_upper:Y,slippage:Number(je.value)/100,decimalsA:ae,decimalsB:me,fix_amount_a:ee,liquidityInput:qn.value});let Ce;if(console.log(JSON.stringify(Re),"===>creatPoolPayload"),K.value.chainName==="Aptos")Ce=await i.value.currentWallet.signAndSubmitTransaction(Re);else{const he=await i.value.currentWallet.signAndExecuteTransactionBlock(Re);Ce=E.value.handleTx(he)}if(Ce&&Ce.hash){Ln(Ce.hash),Qe(!1),Mn(!0);const he={title:"Created pool",desc:"Pool created successfully ",hash:Ce.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(ke=$.value)==null?void 0:ke.address}`,numa:Se.value?"":`- ${P.value}`,logoa:H.value.tokensObj&&$.value&&$.value.address&&H.value.tokensObj[$.value.address]&&H.value.tokensObj[$.value.address].logoURI,tokenb:`${(Le=_.value)==null?void 0:Le.address}`,numb:Te.value?"":`- ${y.value}`,logob:H.value.tokensObj&&_.value&&_.value.address&&H.value.tokensObj[_.value.address]&&H.value.tokensObj[_.value.address].logoURI},text:"Pool created successfully"};K.value.chainName!=="Aptos"&&(he.res=Ce.res),E.value.showTransitionPending(he),(await E.value.watchTransaction(he,!0)).status&&(Mn(!1),l.value=!0,setTimeout(()=>{an.setPoolConfigList(K.value.chainName,K.value.filterCoinsObj),E.value.getAccount(i.value.address)},1e3)),et()}else Qe(!1),Rn(!0);P.value="",y.value=""}catch(Re){an.setPoolConfigList(K.value.chainName,K.value.filterCoinsObj),it.value=!1,console.log(Re,"error===>"),P.value="",y.value="",Qe(!1),Rn(!0)}},si=async()=>{var Re,Ce,he,ge,fn,In,pn,sn,ze,Ne,_e,en,Je,mn,rt,at,ci,di,fi,pi,mi,vi,hi,gi,yi,bi,ki,wi,Ci,_i,$i,Pi,Ii,Ai,Si,Ti;it.value=!1;let c=!1;E.value.getIsSortedSymbols(Ue.value.address,Oe.value.address)&&(c=!0),Ln("");const v=Se.value?"":`${P.value} ${(Re=$.value)==null?void 0:Re.symbol}`,M=Te.value?"":`${y.value} ${(Ce=_.value)==null?void 0:Ce.symbol}`;console.log("0424###createPoolFromCoin###",Ue.value),console.log("0424###createPoolToCoin###",Oe.value),console.log("0424###needReverse###",c),console.log("0424###createPoolInfo?.value?.needReverse###",(he=U==null?void 0:U.value)==null?void 0:he.needReverse),xn(n("tips.increaseLiquiditySuccess",{from:!c&&!((ge=U==null?void 0:U.value)!=null&&ge.needReverse)||c&&((fn=U==null?void 0:U.value)!=null&&fn.needReverse)?v:M,and:!Se.value&&!Te.value?"and":"",to:!c&&!((In=U==null?void 0:U.value)!=null&&In.needReverse)||c&&((pn=U==null?void 0:U.value)!=null&&pn.needReverse)?M:v})),Qe(!0);let Y="",F="",Z="",ae="",me="",ee="",ce=0,se=0,ke=!1,Le;if(c||(sn=U==null?void 0:U.value)!=null&&sn.needReverse){const zn=c&&!((ze=U==null?void 0:U.value)!=null&&ze.needReverse);Y=zn?(Je=(en=U==null?void 0:U.value)==null?void 0:en.token_b)==null?void 0:Je.address:(_e=(Ne=U==null?void 0:U.value)==null?void 0:Ne.token_a)==null?void 0:_e.address,F=zn?(ci=(at=U==null?void 0:U.value)==null?void 0:at.token_a)==null?void 0:ci.address:(rt=(mn=U==null?void 0:U.value)==null?void 0:mn.token_b)==null?void 0:rt.address,Z=zn?(mi=(pi=U==null?void 0:U.value)==null?void 0:pi.token_b)==null?void 0:mi.decimals:(fi=(di=U==null?void 0:U.value)==null?void 0:di.token_a)==null?void 0:fi.decimals,ae=zn?(yi=(gi=U==null?void 0:U.value)==null?void 0:gi.token_a)==null?void 0:yi.decimals:(hi=(vi=U==null?void 0:U.value)==null?void 0:vi.token_b)==null?void 0:hi.decimals,(bi=U==null?void 0:U.value)!=null&&bi.needReverse?(me=I.value?P.value:y.value,ee=I.value?y.value:P.value,ce=I.value?Number(p.value):1/Number(k.value),se=I.value?Number(k.value):1/Number(p.value),ke=I.value?g.value:!g.value,Le=I.value?Xe.value:1/Number(Xe.value)):(me=I.value?y.value:P.value,ee=I.value?P.value:y.value,ce=I.value?1/Number(k.value):Number(p.value),se=I.value?1/Number(p.value):Number(k.value),ke=I.value?!g.value:g.value,Le=I.value?1/Number(Xe.value):Xe.value)}else Y=(wi=(ki=U==null?void 0:U.value)==null?void 0:ki.token_a)==null?void 0:wi.address,F=(_i=(Ci=U==null?void 0:U.value)==null?void 0:Ci.token_b)==null?void 0:_i.address,Z=(Pi=($i=U==null?void 0:U.value)==null?void 0:$i.token_a)==null?void 0:Pi.decimals,ae=(Ai=(Ii=U==null?void 0:U.value)==null?void 0:Ii.token_b)==null?void 0:Ai.decimals,me=I.value?P.value:y.value,ee=I.value?y.value:P.value,ce=I.value?Number(p.value):1/Number(k.value),se=I.value?Number(k.value):1/Number(p.value),ke=I.value?g.value:!g.value,Le=I.value?Xe.value:1/Number(Xe.value);try{console.log("0501###toCreatePool###params###",{coinTypeA:Y,coinTypeB:F,decimalsA:Z,decimalsB:ae,amountA:me,amountB:ee,minPrice:ce,maxPrice:se,fix_amount_a:ke,tick_spacing:Number(U.value.tickSpacing),slippage:Number(je.value)/100,price:Le});const zn=await E.value.getCreatPoolTransactionPayload({coinTypeA:Y,coinTypeB:F,decimalsA:Z,decimalsB:ae,amountA:me,amountB:ee,minPrice:ce,maxPrice:se,fix_amount_a:ke,tick_spacing:Number(U.value.tickSpacing),slippage:Number(je.value)/100,price:Le}),ha=await i.value.currentWallet.signAndExecuteTransactionBlock(zn),yt=E.value.handleTx(ha);if(yt&&yt.hash){Ln(yt.hash),Qe(!1),Mn(!0);const bo={title:"Created pool",desc:"Pool created successfully ",hash:yt.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(Si=$.value)==null?void 0:Si.address}`,numa:Se.value?"":`- ${P.value}`,logoa:H.value.tokensObj&&$.value&&$.value.address&&H.value.tokensObj[$.value.address]&&H.value.tokensObj[$.value.address].logoURI,tokenb:`${(Ti=_.value)==null?void 0:Ti.address}`,numb:Te.value?"":`- ${y.value}`,logob:H.value.tokensObj&&_.value&&_.value.address&&H.value.tokensObj[_.value.address]&&H.value.tokensObj[_.value.address].logoURI},text:"Pool created successfully"};K.value.chainName!=="Aptos"&&(bo.res=yt.res),E.value.showTransitionPending(bo),(await E.value.watchTransaction(bo,!0)).status&&(Mn(!1),l.value=!0,setTimeout(()=>{an.setPoolConfigList(K.value.chainName,K.value.filterCoinsObj),E.value.getAccount(i.value.address)},1e3)),et()}else Qe(!1),Rn(!0);P.value="",y.value=""}catch(zn){console.log("0407###createPool###error##",zn),it.value=!1,an.setPoolConfigList(K.value.chainName,K.value.filterCoinsObj),P.value="",y.value="",Qe(!1),Rn(!0)}},fa=ne(()=>{var c,v,M,Y,F,Z;return((c=$.value)==null?void 0:c.isSelfBuilt)||((v=_.value)==null?void 0:v.isSelfBuilt)||((Y=H.value.tokensObj[(M=$.value)==null?void 0:M.address])==null?void 0:Y.isSelfBuilt)||((Z=H.value.tokensObj[(F=_.value)==null?void 0:F.address])==null?void 0:Z.isSelfBuilt)}),pa=c=>{var v;return(c==null?void 0:c.logoURI)||(c==null?void 0:c.logo_url)||((v=H.value.tokensObj[c==null?void 0:c.address])==null?void 0:v.logo_url)||(K.value.theme==="default"?Ee("/image/coins/unknown.png"):Ee("/image/coins/sui-unknown.png"))},yo=(c,v)=>{console.log(f.value,"===>currentCoinKey.value"),console.log(c);const M=localStorage.getItem(c.address);console.log(H.value.tokensObj,"===>pools.value.tokensObj"),console.log(M,"===>coinLocak"),H.value.tokensObj&&H.value.tokensObj[c.address]&&H.value.tokensObj[c.address].isSelfBuilt&&!M&&(v=="fromCoin"&&(vt.value=c),v=="toCoin"&&(ht.value=c),li.value=!0)};Ae(()=>[$.value,_.value],([c,v])=>{c&&!bn(c)&&yo(c,"fromCoin"),v&&!bn(v)&&yo(v,"toCoin")},{immediate:!0});const li=N(!1),ma=()=>{z.push("/pools")},va=ne(()=>K.value.chainName),ui=ne(()=>{var c;return((c=j==null?void 0:j.query)==null?void 0:c.action)=="create-pool"});return{warningToCoin:ht,warningFromCoin:vt,getTokenSource:yo,closeTokenWarning:ma,isShowTokenWarning:li,chainName:va,hasCreatePool:Vn,isCreateSuccess:l,intPriceReverse:go,isShowMask:rn,isPc:e,intPrice:ho,createPoolToCoin:Oe,createPoolFromCoin:Ue,getPoolInfoSuccess:Xn,toCreatePool:da,createPoolInfo:U,changecurrentPrice:ai,isShowCreatePoolModal:it,addOrCreate:ca,halfBtnSelect:Ot,selectFee:ua,isViewDetail:s,addCommom:ln,decimalUi:Me,fromCoinUrl:sa,toCoinUrl:la,t:n,wallet:i,toAdd:ia,chartLoading:O,currentTick:J,tickList:we,poolInfo:pe,storeIndex:K,importIcon:Ee,addLiquidityBtnText:G,slippage:je,countdown:a,loading:u,fromCoin:$,toCoin:_,openCoinSelect:Lt,onCoinSelect:qt,existingCoins:h,lastSelectCoin:m,currentCoinKey:f,showCoinSelect:C,fromCoinAmount:P,toCoinAmount:y,maxBtnSelect:Ut,fixedFromCoin:g,isShowLiquidityModal:Zn,direct:I,toggle:Rt,edit:x,inputValue:T,feeTierList:De,minPrice:p,maxPrice:k,invalidPriceRange:xe,defaultMinPrice:q,defaultMaxPrice:X,priceRangeChangeMin:Fe,priceRangeChangeMax:Mt,toFullRange:Nn,clearAll:Bt,clickClear:S,positionError:re,positionTips:fe,router:z,clickRefresh:Pn,fromCoinBlance:We,toCoinBlance:Ke,showToCoinLock:Te,showFromCoinLock:Se,currentPriceReverse:hn,currentPrice:Xe,getPirceText:ra,currentPriceTab:W,currentPriceTabList:Ze,getPirceKey:aa,priceTab:ii,aprRewardsParameter:te,aprRewardsDateList:ie,aprTab:$n,reviseValue:qe,label:ve,aprTitle:oe,isCreatePool:Ve,before7dContractPriceLowest:dn,before7dContractPriceHighest:D,aprRewardsTime:ue,addLiquidityBtnDisabled:He,checkNullObj:bn,sFixD:Xt,toCreateSuiPool:si,isSelfBuilt:fa,getCoinIcon:pa,isToCoinBlockDisabled:ui}}}),pr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAJFBMVEVHcEwlW04mW04oXlEmW04SHx4jR0B2/9wQFBMVJyVk17szaV2jJaSaAAAABHRSTlMA8K8m/cUwkQAAAL5JREFUSMdjYMAKmBWFDBgIAUMXF2GCilQy2pyQ+Swu2EBHhyNIkgnIdMCjyCUUCMJgilxDMUFKRpsblBmCU9EUFxdPgooiU9ymElSEBEYVDR1FkaumElYUVp46qmjAFTGruE0lqMgQkaGnpYFAdvk2MJ2JpEgFUTQsL0cGVUiKRKCFDLGKiLKOKIdTGASjSYWWiogqMEYL1lFFWJoRTgYEFU0Bt6QIKEoBt6SwN43QWlJEKSKx4UZ+ExDUmAQAo9rc9CAs4WAAAAAASUVORK5CYII=",mr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAeUExURUdwTANNcARNcAdKcgEdMQRNcBM8V3bI/2Gq2ihWdudYHvAAAAAEdFJOUwDwryb9xTCRAAAAuklEQVRIx2NgwAqYFYUMGAgBw9BQYYKKVFPcgpD5rKHYgItLIEiSCcgMwKMIiFxcXGGKQlwwQWqKWxiU6YpTEdCEEIKKXFLDXAgrQjJ0VNHQUdRBhCK38pRRRQOuiFk1jLAiQ0SGdksDgczyaWA6BUmRKqJoaC9HBhVIikShhQyxioiyjiiHUxgEo0mFloqIKjBGC9ZRRViaEUEGBBW5gltSBBSFgltS2JtGaC0pohSR2HAjvwkIakwCANqYbmgtLE7YAAAAAElFTkSuQmCC",ta=""+new URL("img-no-data_2x.e925467a.png",import.meta.url).href,oa=""+new URL("img-no-data_2x.8bc9afa2.png",import.meta.url).href;const Tn=e=>(En("data-v-753becff"),e=e(),Dn(),e),Am={class:"pools-container"},Sm={key:0,class:"content pc-content"},Tm={class:"content-left"},Nm={class:"content-left-bg"},Mm={class:"content-left-title"},Rm={key:0,class:"pool-warning"},Lm={class:"coin-select"},qm={key:0,class:"icon","aria-hidden":"true"},Um=Tn(()=>d("use",{"xlink:href":"#icon-edit"},null,-1)),Om=[Um],Bm={key:0,class:"fee-container"},Fm=["onClick"],Em={key:0,class:"icon fee-disabled","aria-hidden":"true"},Dm=Tn(()=>d("use",{"xlink:href":"#icon-icon-disable"},null,-1)),jm=[Dm],Hm={key:1},Xm={key:2},zm={class:"deposit-title"},Vm={class:"card-container"},Wm={class:"card-item"},Km={class:"card-item"},Ym={key:0,class:"icon","aria-hidden":"true"},Gm=Tn(()=>d("use",{"xlink:href":"#icon-icon-add"},null,-1)),Qm=[Gm],Jm={class:"pc-network"},Zm={class:"content-right"},xm={key:0,class:"initPrice-mask"},ev={class:"content-right-title"},nv=Tn(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-icon-information"})],-1)),tv={class:"content-right-bg"},ov={key:1,class:"price-tab"},iv=["onClick"],rv={key:2,class:"create-pool-tips"},av={key:3,class:"set-price-range"},sv={key:0},lv={key:1,class:"coin"},uv={key:2,class:"coin"},cv={key:3,class:"no-price"},dv=["src"],fv=["src"],pv={key:6,class:"position-tips"},mv=["src"],vv={class:"tips"},hv={key:7,class:"position-tips"},gv=["src"],yv={class:"error"},bv={key:8,class:"d3-chart-box"},kv={key:9,class:"day-7-price-range"},wv=Tn(()=>d("i",null,null,-1)),Cv={class:"gray"},_v={key:11,class:"create-pool-tips"},$v={key:1,class:"no-data"},Pv={key:0,src:ta,alt:""},Iv={key:1,src:oa,alt:""},Av={key:1,class:"content h5-content"},Sv={class:"content-left"},Tv={class:"content-left-bg"},Nv={class:"content-left-title"},Mv={key:0,class:"pool-warning"},Rv={class:"coin-select"},Lv={key:0,class:"icon","aria-hidden":"true"},qv=Tn(()=>d("use",{"xlink:href":"#icon-edit"},null,-1)),Uv=[qv],Ov={key:0,class:"fee-container"},Bv=["onClick"],Fv={key:0},Ev={key:1},Dv={class:"content-right"},jv={key:0,class:"initPrice-mask"},Hv={class:"content-right-title"},Xv=Tn(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-icon-information"})],-1)),zv={class:"content-right-bg"},Vv={key:1,class:"price-tab"},Wv=["onClick"],Kv={key:2,class:"create-pool-tips"},Yv={key:3,class:"set-price-range"},Gv={key:0},Qv={key:1,class:"coin"},Jv={key:2,class:"coin"},Zv={key:3,class:"no-price"},xv=["src"],eh=["src"],nh={key:6,class:"position-tips"},th=["src"],oh={class:"tips"},ih={key:7,class:"position-tips"},rh=["src"],ah={class:"error"},sh={key:8,class:"d3-chart-box"},lh={key:9,class:"day-7-price-range"},uh=Tn(()=>d("i",null,null,-1)),ch={class:"gray"},dh={key:11,class:"create-pool-tips"},fh={key:1,class:"no-data"},ph={key:0,src:ta,alt:""},mh={key:1,src:oa,alt:""},vh={key:0,class:"icon","aria-hidden":"true"},hh=Tn(()=>d("use",{"xlink:href":"#icon-icon-add"},null,-1)),gh=[hh],yh={class:"pc-network"},bh={class:"new-right"},kh={class:"deposit-title"},wh={class:"card-container"},Ch={class:"card-item"},_h={class:"card-item"},$h={key:0,class:"icon","aria-hidden":"true"},Ph=Tn(()=>d("use",{"xlink:href":"#icon-icon-add"},null,-1)),Ih=[Ph],Ah={class:"h5-network"};function Sh(e,n,t,o,i,r){var J,O,V,we,W,te,ue,oe,ie,ve,Q,K,rn,E,$n,qe,Ze,Pn,xe,Nn,Ve,De,je,vn,He,G,de,dn,D,z,$,_,Fe,Mt,Rt,Lt,Ue,Oe,vt,ht,qt,Ut,Ot,Bt,Zn,Mn,Rn,Qe,xn,Ln,et,j,an,H,qn,Se,Te,nt,tt,Xe,hn,gn,jn,ot,pe,Ft,Hn;const a=ga,l=Ha,s=vr,u=xa,f=Aa,h=as,m=fs,C=$s,I=lo,le=wa,g=Ts,S=Gs,P=bf,y=yr,p=Na,k=ap,q=Sa,X=Ta,x=Fp,fe=Gp,re=_m,T=ba;return b(),A("div",Am,[be(a),be(l,{"pool-info":e.poolInfo,onClearAll:e.clearAll,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClearAll","onClickRefresh"]),e.isPc?(b(),A("div",Sm,[d("div",Tm,[d("div",Nm,[d("div",Mm,[Be(w(e.$t("common.selectPool"))+" ",1),be(s,{placement:"bottom","arrow-point-at-center":""},{title:$e(()=>[d("span",null,w(e.t("newAdd.poolWarning")),1)]),default:$e(()=>[e.isSelfBuilt?(b(),A("div",Rm)):L("",!0)]),_:1})]),d("div",Lm,[be(u,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.logoURI:e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.symbol:e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b:e.poolInfo.token_a:e.createPoolFromCoin,onClick:n[0]||(n[0]=R=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),be(u,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.logoURI:e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.symbol:e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a:e.poolInfo.token_b:e.createPoolToCoin,"is-disabled":e.isToCoinBlockDisabled,onClick:n[1]||(n[1]=R=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin","is-disabled"])]),d("div",{class:Pe(["pool-fee",e.edit?"pool-fee-edit":""])},[d("div",{class:"pool-fee-header",onClick:n[2]||(n[2]=R=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[d("span",{class:Pe(e.inputValue?"":"fee-span")},w(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(b(),A("svg",qm,Om)):L("",!0)]),e.edit?(b(),A("div",Bm,[(b(!0),A(Bn,null,kt(e.feeTierList,(R,Xn)=>{var Vn,We,Ke,gt;return b(),A("div",{key:Xn,class:Pe(["fee-item",[e.inputValue&&e.inputValue==R.label?"fee-item-active":"",e.isCreatePool&&e.isCreatePool.includes(R.fee)&&e.$route.query.action?" pool-created":" pool-not-created",e.chainName!=="Aptos"&&e.isCreatePool&&!e.isCreatePool.includes(R.fee)&&((Vn=e.fromCoin)==null?void 0:Vn.address)!=="0x2::sui::SUI"&&((We=e.toCoin)==null?void 0:We.address)!=="0x2::sui::SUI"?"disabled":""]]),onClick:oi=>e.selectFee(R)},[e.chainName!=="Aptos"&&e.isCreatePool&&!e.isCreatePool.includes(R.fee)&&((Ke=e.fromCoin)==null?void 0:Ke.address)!=="0x2::sui::SUI"&&((gt=e.toCoin)==null?void 0:gt.address)!=="0x2::sui::SUI"?(b(),A("svg",Em,jm)):L("",!0),e.$route.query.action=="create-pool"?(b(),A("div",Hm,[d("p",null,w(R.title),1),d("p",{class:Pe(e.isCreatePool&&e.isCreatePool.includes(R.fee)?"text-default":"text-theme")},w(e.isCreatePool&&e.isCreatePool.includes(R.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(b(),A("div",Xm,[d("p",{class:Pe(e.isCreatePool&&e.isCreatePool.includes(R.fee)?"text-active":"text-default")},w(R.title),3),d("p",null,w(e.isCreatePool&&e.isCreatePool.includes(R.fee)?"":e.$t("newAdd.notCreated")),1)])),d("span",null,w(R.text),1)],10,Fm)}),128))])):L("",!0)],2),d("div",zm,w(e.$t("newAdd.depositAmounts")),1),d("div",Vm,[d("div",Wm,[be(f,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[3]||(n[3]=R=>e.fromCoinAmount=R),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[4]||(n[4]=R=>e.maxBtnSelect("fromCoin")),onOnHalf:n[5]||(n[5]=R=>e.halfBtnSelect("fromCoin")),onOnInput:n[6]||(n[6]=R=>{e.fromCoinAmount=R,e.fixedFromCoin=!0}),onOnSelect:n[7]||(n[7]=R=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(b(),ye(h,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):L("",!0)]),d("div",Km,[be(f,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[8]||(n[8]=R=>e.toCoinAmount=R),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[9]||(n[9]=R=>e.maxBtnSelect("toCoin")),onOnHalf:n[10]||(n[10]=R=>e.halfBtnSelect("toCoin")),onOnInput:n[11]||(n[11]=R=>{e.toCoinAmount=R,e.fixedFromCoin=!1}),onOnSelect:n[12]||(n[12]=R=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(b(),ye(h,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):L("",!0)]),(O=(J=e.$route)==null?void 0:J.query)!=null&&O.action&&!e.poolInfo&&(!e.createPoolInfo||!e.createPoolInfo.currentPrice)?(b(),ye(m,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):L("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(b(),A("img",{key:1,class:"add",src:pr,alt:"",onClick:n[13]||(n[13]=(...R)=>e.toggle&&e.toggle(...R))})):L("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(b(),A("img",{key:2,class:"add",src:mr,alt:"",onClick:n[14]||(n[14]=(...R)=>e.toggle&&e.toggle(...R))})):L("",!0)]),e.poolInfo?(b(),ye(C,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):L("",!0)]),be(I,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:n[15]||(n[15]=R=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:$e(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")?(b(),A("svg",Ym,Qm)):L("",!0),d("span",null,w(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),d("div",Jm,[be(le)])]),d("div",Zm,[e.isShowMask?(b(),A("div",xm)):L("",!0),d("div",ev,[Be(w(e.poolInfo?e.$t("newAdd.selectRange"):(we=(V=e.$router)==null?void 0:V.query)!=null&&we.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(b(),ye(s,{key:0,placement:"bottom","arrow-point-at-center":""},{title:$e(()=>[d("span",null,w(e.$t("newAdd.selectRangeTips")),1)]),default:$e(()=>[nv]),_:1})):L("",!0)]),d("div",tv,[!((te=(W=e.$route)==null?void 0:W.query)!=null&&te.action)&&e.poolInfo||(oe=(ue=e.$route)==null?void 0:ue.query)!=null&&oe.action?(b(),A(Bn,{key:0},[(ve=(ie=e.$route)==null?void 0:ie.query)!=null&&ve.action&&!e.poolInfo?(b(),ye(g,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):L("",!0),e.poolInfo?(b(),A("div",ov,[(b(!0),A(Bn,null,kt(e.currentPriceTabList,R=>(b(),A("div",{key:R,class:Pe(["price-item",{"price-item-active":R.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:Xn=>e.priceTab(R)},[be(s,{placement:"bottom","arrow-point-at-center":""},{title:$e(()=>[d("span",null,w(e.getPirceText(R.key)),1)]),default:$e(()=>[Be(" "+w(e.getPirceKey(R.key)),1)]),_:2},1024)],10,iv))),128))])):L("",!0),(K=(Q=e.$route)==null?void 0:Q.query)!=null&&K.action&&!e.poolInfo?(b(),A("div",rv,w(e.$t("newAdd.createPoolInitialText")),1)):L("",!0),!e.poolInfo&&((E=(rn=e.$route)==null?void 0:rn.query)!=null&&E.action)?(b(),A("div",av,w(e.$t("common.setPriceRange")),1)):L("",!0),e.poolInfo||(qe=($n=e.$route)==null?void 0:$n.query)!=null&&qe.action?(b(),A("div",{key:4,class:Pe(["current-price",(Pn=(Ze=e.$route)==null?void 0:Ze.query)!=null&&Pn.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(b(),A("span",sv,w(e.$t("common.currentPrice")),1)):L("",!0),e.fromCoin&&e.toCoin&&e.direct?(b(),A("div",lv,[d("span",null,w(e.$t("common.currentPrice")),1),Be(" "+w(("decimalUi"in e?e.decimalUi:Ie(Me))(e.currentPrice,6))+" "+w((xe=e.toCoin)==null?void 0:xe.symbol)+" per "+w((Nn=e.fromCoin)==null?void 0:Nn.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(b(),A("div",uv,[d("span",null,w(e.$t("common.currentPrice")),1),Be(" "+w(("decimalUi"in e?e.decimalUi:Ie(Me))(e.currentPriceReverse,6))+" "+w((Ve=e.toCoin)==null?void 0:Ve.symbol)+" per "+w((De=e.fromCoin)==null?void 0:De.symbol),1)])):(b(),A("div",cv,"0.0")),e.fromCoin&&e.toCoin?(b(),A("div",{key:4,class:Pe(e.poolInfo&&((je=e.poolInfo)!=null&&je.needReverse)||e.createPoolInfo&&((vn=e.createPoolInfo)!=null&&vn.needReverse)?"toggle reverse":"toggle")},[d("div",{class:Pe(e.direct?"item active-item":"item"),onClick:n[16]||(n[16]=R=>e.direct?"":e.toggle())},[d("img",{src:e.getCoinIcon(e.direct?e.fromCoin:e.toCoin),alt:""},null,8,dv),Be(" "+w(e.direct?(He=e.fromCoin)==null?void 0:He.symbol:(G=e.toCoin)==null?void 0:G.symbol),1)],2),d("div",{class:Pe(e.direct?"item ":"item active-item"),onClick:n[17]||(n[17]=R=>e.direct?e.toggle():"")},[d("img",{src:e.getCoinIcon(e.direct?e.toCoin:e.fromCoin),alt:""},null,8,fv),Be(" "+w(e.direct?(de=e.toCoin)==null?void 0:de.symbol:(dn=e.fromCoin)==null?void 0:dn.symbol),1)],2)],2)):L("",!0)],2)):L("",!0),e.poolInfo||(z=(D=e.$route)==null?void 0:D.query)!=null&&z.action?(b(),ye(S,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,"int-price":e.intPrice,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","int-price","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):L("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(b(),A("div",pv,[d("img",{src:("importIcon"in e?e.importIcon:Ie(Ee))("/image/icon-tips@2x.png"),alt:""},null,8,mv),d("p",vv,w(e.$t("tips.positionTips")),1)])):L("",!0),e.positionError&&(e.poolInfo||(_=($=e.$route)==null?void 0:$.query)!=null&&_.action)?(b(),A("div",hv,[d("img",{src:("importIcon"in e?e.importIcon:Ie(Ee))("/image/icon-tips-error@2x.png"),alt:""},null,8,gv),d("p",yv,w(e.$t("tips.positionError")),1)])):L("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(b(),A("div",bv,[e.fromCoin&&e.toCoin&&e.poolInfo?(b(),ye(P,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):L("",!0),e.chartLoading?(b(),ye(y,{key:1})):L("",!0)])):L("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(b(),A("div",kv,[wv,d("span",Cv,w(e.aprRewardsTime)+" Price Range",1),d("span",null,w(e.before7dContractPriceLowest)+" - "+w(e.before7dContractPriceHighest),1)])):L("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(b(),ye(p,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):L("",!0),(Mt=(Fe=e.$route)==null?void 0:Fe.query)!=null&&Mt.action&&!e.poolInfo?(b(),A("div",_v,w(e.$t("newAdd.createPoolText")),1)):L("",!0)],64)):(b(),A("div",$v,[e.storeIndex.theme=="default"?(b(),A("img",Pv)):(b(),A("img",Iv)),d("p",null,w(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo?(b(),ye(k,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):L("",!0)])])):L("",!0),e.isPc?L("",!0):(b(),A("div",Av,[d("div",Sv,[d("div",Tv,[d("div",Nv,[Be(w(e.$t("common.selectPool"))+" ",1),be(s,{placement:"bottom","arrow-point-at-center":""},{title:$e(()=>[d("span",null,w(e.t("newAdd.poolWarning")),1)]),default:$e(()=>[e.poolInfo&&e.isSelfBuilt?(b(),A("div",Mv)):L("",!0)]),_:1})]),d("div",Rv,[be(u,{"coin-icon":e.poolInfo?e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.token_a:e.createPoolFromCoin,onClick:n[18]||(n[18]=R=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),be(u,{"coin-icon":e.poolInfo?e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.token_b:e.createPoolToCoin,onClick:n[19]||(n[19]=R=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),d("div",{class:Pe(["pool-fee",e.edit?"pool-fee-edit":""])},[d("div",{class:"pool-fee-header",onClick:n[20]||(n[20]=R=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[d("span",{class:Pe(e.inputValue?"":"fee-span")},w(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(b(),A("svg",Lv,Uv)):L("",!0)]),e.edit?(b(),A("div",Ov,[e.getPoolInfoSuccess?(b(!0),A(Bn,{key:1},kt(e.feeTierList,(R,Xn)=>(b(),A("div",{key:Xn,class:Pe(["fee-item",[e.inputValue&&e.inputValue==R.label?"fee-item-active":"",e.isCreatePool.includes(R.fee)&&e.$route.query.action?" pool-created":" pool-not-created"]]),onClick:Vn=>e.selectFee(R)},[e.$route.query.action=="create-pool"?(b(),A("div",Fv,[d("p",null,w(R.title),1),d("p",{class:Pe(e.isCreatePool.includes(R.fee)?"text-default":"text-theme")},w(e.isCreatePool.includes(R.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(b(),A("div",Ev,[d("p",{class:Pe(e.isCreatePool.includes(R.fee)?"text-active":"text-default")},w(R.title),3),d("p",null,w(e.isCreatePool.includes(R.fee)?"":e.$t("newAdd.notCreated")),1)])),d("span",null,w(R.text),1)],10,Bv))),128)):(b(),ye(y,{key:0}))])):L("",!0)],2)]),d("div",Dv,[e.isShowMask?(b(),A("div",jv)):L("",!0),d("div",Hv,[Be(w((Rt=e.$route)!=null&&Rt.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(b(),ye(s,{key:0,placement:"bottom","arrow-point-at-center":""},{title:$e(()=>[d("span",null,w(e.$t("newAdd.selectRangeTips")),1)]),default:$e(()=>[Xv]),_:1})):L("",!0)]),d("div",zv,[!((Ue=(Lt=e.$route)==null?void 0:Lt.query)!=null&&Ue.action)&&e.poolInfo||(vt=(Oe=e.$route)==null?void 0:Oe.query)!=null&&vt.action?(b(),A(Bn,{key:0},[(qt=(ht=e.$route)==null?void 0:ht.query)!=null&&qt.action&&!e.poolInfo?(b(),ye(g,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):L("",!0),e.poolInfo?(b(),A("div",Vv,[(b(!0),A(Bn,null,kt(e.currentPriceTabList,R=>(b(),A("div",{key:R,class:Pe(["price-item",{"price-item-active":R.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:Xn=>e.priceTab(R)},[be(s,{placement:"bottom","arrow-point-at-center":""},{title:$e(()=>[d("span",null,w(e.getPirceText(R.key)),1)]),default:$e(()=>[Be(" "+w(e.getPirceKey(R.key)),1)]),_:2},1024)],10,Wv))),128))])):L("",!0),(Ot=(Ut=e.$route)==null?void 0:Ut.query)!=null&&Ot.action&&!e.poolInfo?(b(),A("div",Kv,w(e.$t("newAdd.createPoolInitialText")),1)):L("",!0),!e.poolInfo&&((Zn=(Bt=e.$route)==null?void 0:Bt.query)!=null&&Zn.action)?(b(),A("div",Yv,w(e.$t("common.setPriceRange")),1)):L("",!0),e.poolInfo||(Rn=(Mn=e.$route)==null?void 0:Mn.query)!=null&&Rn.action?(b(),A("div",{key:4,class:Pe(["current-price",(xn=(Qe=e.$route)==null?void 0:Qe.query)!=null&&xn.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(b(),A("span",Gv,w(e.$t("common.currentPrice")),1)):L("",!0),e.fromCoin&&e.toCoin&&e.direct?(b(),A("div",Qv,[d("span",null,w(e.$t("common.currentPrice")),1),Be(" "+w(("decimalUi"in e?e.decimalUi:Ie(Me))(e.currentPrice,6))+" "+w((Ln=e.toCoin)==null?void 0:Ln.symbol)+" per "+w((et=e.fromCoin)==null?void 0:et.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(b(),A("div",Jv,[d("span",null,w(e.$t("common.currentPrice")),1),Be(" "+w(("decimalUi"in e?e.decimalUi:Ie(Me))(e.currentPriceReverse,6))+" "+w((j=e.toCoin)==null?void 0:j.symbol)+" per "+w((an=e.fromCoin)==null?void 0:an.symbol),1)])):(b(),A("div",Zv,"0.0")),e.fromCoin&&e.toCoin?(b(),A("div",{key:4,class:Pe(e.poolInfo&&((H=e.poolInfo)!=null&&H.needReverse)||e.createPoolInfo&&((qn=e.createPoolInfo)!=null&&qn.needReverse)?"toggle reverse":"toggle")},[d("div",{class:Pe(e.direct?"item active-item":"item"),onClick:n[21]||(n[21]=R=>e.direct?"":e.toggle())},[d("img",{src:e.getCoinIcon(e.direct?e.fromCoin:e.toCoin),alt:""},null,8,xv),Be(" "+w(e.direct?(Se=e.fromCoin)==null?void 0:Se.symbol:(Te=e.toCoin)==null?void 0:Te.symbol),1)],2),d("div",{class:Pe(e.direct?"item ":"item active-item"),onClick:n[22]||(n[22]=R=>e.direct?e.toggle():"")},[d("img",{src:e.getCoinIcon(e.direct?e.toCoin:e.fromCoin),alt:""},null,8,eh),Be(" "+w(e.direct?(nt=e.toCoin)==null?void 0:nt.symbol:(tt=e.fromCoin)==null?void 0:tt.symbol),1)],2)],2)):L("",!0)],2)):L("",!0),e.poolInfo||(hn=(Xe=e.$route)==null?void 0:Xe.query)!=null&&hn.action?(b(),ye(S,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):L("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(b(),A("div",nh,[d("img",{src:("importIcon"in e?e.importIcon:Ie(Ee))("/image/icon-tips@2x.png"),alt:""},null,8,th),d("p",oh,w(e.$t("tips.positionTips")),1)])):L("",!0),e.positionError&&(e.poolInfo||(jn=(gn=e.$route)==null?void 0:gn.query)!=null&&jn.action)?(b(),A("div",ih,[d("img",{src:("importIcon"in e?e.importIcon:Ie(Ee))("/image/icon-tips-error@2x.png"),alt:""},null,8,rh),d("p",ah,w(e.$t("tips.positionError")),1)])):L("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(b(),A("div",sh,[e.fromCoin&&e.toCoin&&e.poolInfo?(b(),ye(P,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):L("",!0),e.chartLoading?(b(),ye(y,{key:1})):L("",!0)])):L("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(b(),A("div",lh,[uh,d("span",ch,w(e.aprRewardsTime)+" Price Range",1),d("span",null,w(e.before7dContractPriceLowest)+" - "+w(e.before7dContractPriceHighest),1)])):L("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(b(),ye(p,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):L("",!0),(pe=(ot=e.$route)==null?void 0:ot.query)!=null&&pe.action&&!e.poolInfo?(b(),A("div",dh,w(e.$t("newAdd.createPoolText")),1)):L("",!0)],64)):(b(),A("div",fh,[e.storeIndex.theme=="default"?(b(),A("img",ph)):(b(),A("img",mh)),d("p",null,w(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&!e.isSelfBuilt?(b(),ye(k,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):L("",!0)]),be(I,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:n[23]||(n[23]=R=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:$e(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")?(b(),A("svg",vh,gh)):L("",!0),d("span",null,w(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),d("div",yh,[be(le)])]),d("div",bh,[d("div",kh,w(e.$t("newAdd.depositAmounts")),1),d("div",wh,[d("div",Ch,[be(f,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":n[24]||(n[24]=R=>e.fromCoinAmount=R),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[25]||(n[25]=R=>e.maxBtnSelect("fromCoin")),onOnHalf:n[26]||(n[26]=R=>e.halfBtnSelect("fromCoin")),onOnInput:n[27]||(n[27]=R=>{e.fromCoinAmount=R,e.fixedFromCoin=!0}),onOnSelect:n[28]||(n[28]=R=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(b(),ye(h,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):L("",!0)]),d("div",_h,[be(f,{modelValue:e.toCoinAmount,"onUpdate:modelValue":n[29]||(n[29]=R=>e.toCoinAmount=R),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[30]||(n[30]=R=>e.maxBtnSelect("toCoin")),onOnHalf:n[31]||(n[31]=R=>e.halfBtnSelect("toCoin")),onOnInput:n[32]||(n[32]=R=>{e.toCoinAmount=R,e.fixedFromCoin=!1}),onOnSelect:n[33]||(n[33]=R=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(b(),ye(h,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):L("",!0)]),(Hn=(Ft=e.$route)==null?void 0:Ft.query)!=null&&Hn.action&&!e.poolInfo&&(!e.createPoolInfo||!e.createPoolInfo.currentPrice)?(b(),ye(m,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):L("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(b(),A("img",{key:1,class:"add",src:pr,alt:"",onClick:n[34]||(n[34]=(...R)=>e.toggle&&e.toggle(...R))})):L("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(b(),A("img",{key:2,class:"add",src:mr,alt:"",onClick:n[35]||(n[35]=(...R)=>e.toggle&&e.toggle(...R))})):L("",!0)]),e.poolInfo||e.createPoolInfo?(b(),ye(C,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):L("",!0)])])),be(I,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn h5-btn",onClick:n[36]||(n[36]=R=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:$e(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")?(b(),A("svg",$h,Ih)):L("",!0),d("span",null,w(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),d("div",Ah,[be(le)]),e.showCoinSelect?(b(),ye(q,{key:2,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:n[37]||(n[37]=R=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):L("",!0),e.isShowLiquidityModal?(b(),ye(X,{key:3,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"pool-info":e.poolInfo,"current-direct":e.direct,onToAdd:e.toAdd,onOnClose:n[38]||(n[38]=R=>e.isShowLiquidityModal=!1)},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","min-price","max-price","current-price","current-price-reverse","pool-info","current-direct","onToAdd"])):L("",!0),e.isViewDetail?(b(),ye(x,{key:4,"pool-info":e.poolInfo,onOnClose:n[39]||(n[39]=R=>e.isViewDetail=!1)},null,8,["pool-info"])):L("",!0),e.isCreateSuccess?(b(),ye(fe,{key:5,onOnClose:n[40]||(n[40]=R=>e.isCreateSuccess=!1)})):L("",!0),e.isShowCreatePoolModal&&e.fromCoin&&e.toCoin?(b(),ye(re,{key:6,"from-coin":e.createPoolFromCoin,"to-coin":e.createPoolToCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price":e.createPoolInfo.currentPrice,"need-reverse":e.createPoolInfo.needReverse,direct:e.direct,onOnClose:n[41]||(n[41]=R=>e.isShowCreatePoolModal=!1),onCreatePool:e.toCreatePool},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","min-price","max-price","current-price","need-reverse","direct","onCreatePool"])):L("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(b(),ye(T,{key:7,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:n[42]||(n[42]=R=>e.isShowTokenWarning=!1)},null,8,["from-coin","to-coin","onClose"])):L("",!0)])}const tg=on(Im,[["render",Sh],["__scopeId","data-v-753becff"]]);export{tg as default};
