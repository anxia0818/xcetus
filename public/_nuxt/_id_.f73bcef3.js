import{_ as me}from"./new-position-title.b2e26799.js";import{_ as Go}from"./token-warning.e411e5c7.js";import{_ as ve}from"./status-block.150aca84.js";import{_ as Qo}from"./auto-pool-apy-tips.adbba421.js";import{u as Lo,g as pe,a as L,d as No,c as mo,p as Zo,b as xo,s as ao,e as to,T as ko,f as fe,h as _e,C as Jo}from"./pool.370b76e0.js";import{u as Co,a as jo}from"./sha256.1749b4df.js";import{i as co}from"./import-icon.de3e6c66.js";import{u as Uo,a as oe}from"./autoPool.80db6899.js";import{a as go,l as c,r as q,m as ho,q as so,e as yo,s as Bo,o as f,f as M,h as e,t as no,i as E,v as d,j as uo,x as bo,u as U,p as So,k as wo,M as ee,y as Fo,z as ne,c as V,w as lo,B as Xo,A as te,C as Yo,D as be,L as ge,I as he,S as se,E as ye,b as ie,F as Ie,G as $e,H as ke}from"./entry.810bcc8c.js";import{_ as Ce}from"./assets-card.481db90f.js";import{_ as Se}from"./coin-lock.169b788c.js";import{D as y}from"./decimal.0e8aa3f1.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./decimal.633e31ee.js";import{V as Ko}from"./index.bc03a913.js";import"./back.c9dc2c8f.js";import"./swap-setting.3b51cff6.js";/* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.e240681a.js";const we=go({components:{AutoPoolApyTips:Qo},setup(){const o=Co(),n=c(()=>o),T=Lo(),A=c(()=>T),N=c(()=>n.value.theme),k=i=>{var s;return(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((s=A.value.tokensObj[i==null?void 0:i.address])==null?void 0:s.logo_url)||(N.value==="default"?co("/image/coins/unknown.png"):co("/image/coins/sui-unknown.png"))},g=q(!0),_=Uo(),m=c(()=>_),h=ho(),l=q();so(()=>[m.value.positionInfoObj,h.params.id],([i,s])=>{i&&!mo(i)&&s&&(l.value=i[s],console.log(l.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const t=c(()=>{var i;return(i=l.value)==null?void 0:i.needReverse}),u=c(()=>{var i,s;return m.value.apyObj&&((s=m.value.apyObj[(i=l.value)==null?void 0:i.id])==null?void 0:s.tvl)||"--"}),a=c(()=>{var i,s;return m.value.apyObj&&((s=m.value.apyObj[(i=l.value)==null?void 0:i.id])==null?void 0:s.apr)||"--"});return{positionInfo:l,tvl:u,store:n,indexStore:o,needReverse:t,getCoinIcon:k,getExplorerUrl:pe,addCommom:L,decimalUi:No,direct:g,apy:a}}});const Oo=o=>(So("data-v-86289a90"),o=o(),wo(),o),Ae={class:"auto-position-info"},Pe={class:"pool-info"},Re={class:"left"},qe={class:"coin-a"},Te={alt:""},Ne={class:"coin-b"},Le={alt:""},Be={class:"position-name"},Oe={key:0,class:"pool-fee"},Me=Oo(()=>e("span",null,"Fee tier",-1)),De={class:"right"},je={class:"price-info"},Ue={class:"current-price"},Fe=Oo(()=>e("span",null,"Current Price",-1)),We={class:"coin-rate"},Ee=Oo(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Xe=Oo(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ze=[Ee,Xe],He={key:0},Ve={key:1},Ye={class:"apy-and-tvl"},Ge={class:"apy"},Ze=Oo(()=>e("div",{class:"apy-title"},"APY",-1)),Je={class:"apy-text"},Ke={class:"tvl"},Qe=Oo(()=>e("div",{class:"tvl-title"},"TVL",-1)),xe={class:"tvl-text"};function on(o,n,T,A,N,k){var l,t,u,a,i,s,r,$,C,b,X,P,S,F,D,j,w,Q,J,Y,z,G,oo,eo,Mo,vo,ro,po,Ro,Io,fo,p,W;const g=Go,_=ve,m=Qo,h=Bo("image");return f(),M("div",Ae,[e("div",Pe,[e("div",Re,[e("div",qe,[no(e("img",Te,null,512),[[h,o.needReverse?o.getCoinIcon((t=o.positionInfo)==null?void 0:t.token_b):o.getCoinIcon((l=o.positionInfo)==null?void 0:l.token_a)]]),E(g,{address:o.needReverse?(s=(i=o.positionInfo)==null?void 0:i.token_b)==null?void 0:s.address:(a=(u=o.positionInfo)==null?void 0:u.token_a)==null?void 0:a.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Ne,[no(e("img",Le,null,512),[[h,o.needReverse?o.getCoinIcon(($=o.positionInfo)==null?void 0:$.token_a):o.getCoinIcon((r=o.positionInfo)==null?void 0:r.token_b)]]),E(g,{address:o.needReverse?(P=(X=o.positionInfo)==null?void 0:X.token_a)==null?void 0:P.address:(b=(C=o.positionInfo)==null?void 0:C.token_b)==null?void 0:b.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Be,d(o.needReverse?(F=(S=o.positionInfo)==null?void 0:S.token_b)==null?void 0:F.symbol:(j=(D=o.positionInfo)==null?void 0:D.token_a)==null?void 0:j.symbol)+" - "+d(o.needReverse?(Q=(w=o.positionInfo)==null?void 0:w.token_a)==null?void 0:Q.symbol:(Y=(J=o.positionInfo)==null?void 0:J.token_b)==null?void 0:Y.symbol),1),(z=o.positionInfo)!=null&&z.fee?(f(),M("div",Oe,[Me,uo(" "+d(((G=o.positionInfo)==null?void 0:G.fee)*100)+"% ",1)])):bo("",!0)]),e("div",De,[E(_,{"current-status":(oo=o.positionInfo)==null?void 0:oo.currentStatus},null,8,["current-status"])])]),e("div",je,[e("div",Ue,[e("div",null,[Fe,e("div",We,[e("div",{onClick:n[0]||(n[0]=_o=>o.direct=!o.direct)},ze)])]),(o.needReverse?!o.direct:o.direct)?(f(),M("div",He,[uo(d(("addCommom"in o?o.addCommom:U(L))(("decimalUi"in o?o.decimalUi:U(No))((eo=o.positionInfo)==null?void 0:eo.price,6)))+"   ",1),e("span",null,d((vo=(Mo=o.positionInfo)==null?void 0:Mo.token_b)==null?void 0:vo.symbol)+" per "+d((po=(ro=o.positionInfo)==null?void 0:ro.token_a)==null?void 0:po.symbol),1)])):(f(),M("div",Ve,[uo(d(("addCommom"in o?o.addCommom:U(L))(("decimalUi"in o?o.decimalUi:U(No))(1/((Ro=o.positionInfo)==null?void 0:Ro.price),6)))+"   ",1),e("span",null,d((fo=(Io=o.positionInfo)==null?void 0:Io.token_a)==null?void 0:fo.symbol)+" per "+d((W=(p=o.positionInfo)==null?void 0:p.token_b)==null?void 0:W.symbol),1)]))]),e("div",Ye,[e("div",Ge,[Ze,e("div",Je,[uo(d(o.apy)+" ",1),E(m)])]),e("div",Ke,[Qe,e("div",xe,"$"+d(("addCommom"in o?o.addCommom:U(L))(o.tvl,2)),1)])])])])}const le=yo(we,[["render",on],["__scopeId","data-v-86289a90"]]),en=go({setup(){const o=Uo(),n=c(()=>o),T=ho(),A=c(()=>(console.log(n.value.positionInfoObj[T.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),n.value.positionInfoObj[T.params.id])),N=c(()=>{var m;return(m=A.value)==null?void 0:m.needReverse}),k=jo(),g=c(()=>k);return{positionInfo:A,needReverse:N,addCommom:L,wallet:g,getCoinIcon:m=>(m==null?void 0:m.logoURI)||(m==null?void 0:m.logo_url)||co("/image/coins/sui-unknown.png")}}});const Ao=o=>(So("data-v-ddd2440b"),o=o(),wo(),o),nn={class:"auto-position-liquidity"},tn={class:"my-liquidity"},sn={class:"left"},ln=Ao(()=>e("div",null,"My Liquidity",-1)),an={key:0},un={key:1},rn={class:"right"},dn=Ao(()=>e("div",null,"My share",-1)),cn={key:0},mn={key:1},vn={class:"my-liquidity-info"},pn={class:"lp-info"},fn={class:"lp-bg"},_n={alt:""},bn={key:0,class:"lp-num"},gn={key:1,class:"lp-num"},hn=Ao(()=>e("div",{class:"assets-pooled-title"}," Pooled Assets ",-1)),yn={class:"assets-pooled"},In={alt:""},$n={key:0},kn={key:1},Cn=Ao(()=>e("p",null,"--",-1)),Sn=Ao(()=>e("p",null,"--",-1)),wn=[Cn,Sn],An={alt:""},Pn={key:0},Rn={key:1},qn=Ao(()=>e("p",null,"--",-1)),Tn=Ao(()=>e("p",null,"--",-1)),Nn=[qn,Tn];function Ln(o,n,T,A,N,k){var _,m,h,l,t,u,a,i,s,r,$,C,b,X,P,S,F,D,j,w,Q,J,Y,z,G,oo,eo;const g=Bo("image");return f(),M("div",nn,[e("div",tn,[e("div",sn,[ln,(_=o.wallet)!=null&&_.connected?(f(),M("div",an,"$"+d(("addCommom"in o?o.addCommom:U(L))((m=o.positionInfo)==null?void 0:m.myLiquidityUSD)),1)):(f(),M("div",un,"--"))]),e("div",rn,[dn,(h=o.wallet)!=null&&h.connected?(f(),M("div",cn,d((l=o.positionInfo)==null?void 0:l.myShare)+"%",1)):(f(),M("div",mn,"--%"))])]),e("div",vn,[e("div",pn,[e("div",fn,[no(e("img",_n,null,512),[[g,((u=(t=o.positionInfo)==null?void 0:t.lpInfo)==null?void 0:u.logo_url)||o.getCoinIcon((a=o.positionInfo)==null?void 0:a.lpInfo)]])]),(i=o.wallet)!=null&&i.connected?(f(),M("div",bn,d(("addCommom"in o?o.addCommom:U(L))((s=o.positionInfo)==null?void 0:s.myLiquidity))+" LP",1)):(f(),M("div",gn,"-- LP"))]),hn,e("div",yn,[e("div",null,[no(e("img",In,null,512),[[g,o.needReverse?o.getCoinIcon((r=o.positionInfo)==null?void 0:r.token_b):o.getCoinIcon(($=o.positionInfo)==null?void 0:$.token_a)]]),(C=o.wallet)!=null&&C.connected?(f(),M("div",$n,[e("p",null,d((b=o.positionInfo)==null?void 0:b.myAmountAUSD),1),e("p",null,d(("addCommom"in o?o.addCommom:U(L))((X=o.positionInfo)==null?void 0:X.amountA))+" "+d(o.needReverse?(S=(P=o.positionInfo)==null?void 0:P.token_b)==null?void 0:S.symbol:(D=(F=o.positionInfo)==null?void 0:F.token_a)==null?void 0:D.symbol),1)])):(f(),M("div",kn,wn))]),e("div",null,[no(e("img",An,null,512),[[g,o.needReverse?o.getCoinIcon((j=o.positionInfo)==null?void 0:j.token_a):o.getCoinIcon((w=o.positionInfo)==null?void 0:w.token_b)]]),(Q=o.wallet)!=null&&Q.connected?(f(),M("div",Pn,[e("p",null,d((J=o.positionInfo)==null?void 0:J.myAmountBUSD),1),e("p",null,d(("addCommom"in o?o.addCommom:U(L))((Y=o.positionInfo)==null?void 0:Y.amountB))+" "+d(o.needReverse?(G=(z=o.positionInfo)==null?void 0:z.token_a)==null?void 0:G.symbol:(eo=(oo=o.positionInfo)==null?void 0:oo.token_b)==null?void 0:eo.symbol),1)])):(f(),M("div",Rn,Nn))])])])])}const ae=yo(en,[["render",Ln],["__scopeId","data-v-ddd2440b"]]),Bn=go({components:{Modal:ee},props:{poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},totalAmount:{type:String,default:""},shareOfPool:{type:String,default:""},minimumReceivedLP:{type:String,default:""}},setup(o,n){const{t:T}=Fo(),A=c(()=>{var u,a,i;return((u=o==null?void 0:o.poolInfo)==null?void 0:u.needReverse)||((i=(a=o==null?void 0:o.poolInfo)==null?void 0:a.poolInfo)==null?void 0:i.needReverse)}),N=Lo(),k=c(()=>N),g=Co(),_=c(()=>g),m=u=>{var a;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((a=k.value.tokensObj[u==null?void 0:u.address])==null?void 0:a.logo_url)||(_.value.theme==="default"?co("/image/coins/unknown.png"):co("/image/coins/sui-unknown.png"))},h=ho(),l=q(!1),t=()=>{n.emit("toAdd")};return console.log(o,"props451"),{needReverse:A,getCoinIcon:m,addCommom:L,t:T,route:h,checked:l,decimalUi:No,clickSubmit:t}}});const Wo=o=>(So("data-v-bb911124"),o=o(),wo(),o),On=Wo(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Mn={class:"modal-content"},Dn={class:"pool-info"},jn={class:"left"},Un={alt:""},Fn={alt:""},Wn={class:"pool-name"},En={class:"right"},Xn={class:"coin-info"},zn={class:"from-coin-info"},Hn={class:"left"},Vn={class:"coin-amount"},Yn={class:"coin-symbol"},Gn={class:"right"},Zn={class:"to-coin-info"},Jn={class:"left"},Kn={class:"coin-amount"},Qn={class:"coin-symbol"},xn={class:"right"},ot=Wo(()=>e("div",{class:"to-swap-logo"},null,-1)),et={class:"add-info"},nt={class:"total-amount"},tt=Wo(()=>e("span",null,"Total Amount",-1)),st={class:"total-amount"},it=Wo(()=>e("span",null,"Share of Pool",-1)),lt={class:"total-amount"},at=Wo(()=>e("span",null,"Minimum Received LP",-1));function ut(o,n,T,A,N,k){const g=Go,_=Xo,m=ne("Modal"),h=Bo("image");return f(),V(m,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:n[0]||(n[0]=l=>o.$emit("onClose"))},{closeIcon:lo(()=>[On]),default:lo(()=>{var l,t,u,a,i,s,r,$,C,b,X,P,S,F,D,j,w,Q,J,Y,z,G,oo,eo;return[e("div",Mn,[e("div",Dn,[e("div",jn,[e("div",null,[no(e("img",Un,null,512),[[h,o.needReverse?(a=(u=o.poolInfo)==null?void 0:u.token_b)==null?void 0:a.logo_url:(t=(l=o.poolInfo)==null?void 0:l.token_a)==null?void 0:t.logo_url]]),E(g,{address:o.needReverse?($=(r=o.poolInfo)==null?void 0:r.token_b)==null?void 0:$.address:(s=(i=o.poolInfo)==null?void 0:i.token_a)==null?void 0:s.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[no(e("img",Fn,null,512),[[h,o.needReverse?(P=(X=o.poolInfo)==null?void 0:X.token_a)==null?void 0:P.logo_url:(b=(C=o.poolInfo)==null?void 0:C.token_b)==null?void 0:b.logo_url]]),E(g,{address:o.needReverse?(j=(D=o.poolInfo)==null?void 0:D.token_a)==null?void 0:j.address:(F=(S=o.poolInfo)==null?void 0:S.token_b)==null?void 0:F.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",Wn,[e("span",null,d(o.needReverse?(Y=(J=o.poolInfo)==null?void 0:J.token_b)==null?void 0:Y.symbol:(Q=(w=o.poolInfo)==null?void 0:w.token_a)==null?void 0:Q.symbol),1),uo(" - "),e("span",null,d(o.needReverse?(eo=(oo=o.poolInfo)==null?void 0:oo.token_a)==null?void 0:eo.symbol:(G=(z=o.poolInfo)==null?void 0:z.token_b)==null?void 0:G.symbol),1)])]),e("div",En,[uo(" Fee tier "),e("span",null,d(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),e("div",Xn,[e("div",zn,[e("div",Hn,[e("div",Vn,d(("addCommom"in o?o.addCommom:U(L))(o.fromCoinAmount)||0),1),e("div",Yn,d(o.fromCoin&&o.fromCoin.symbol),1)]),e("div",Gn,[no(e("img",null,null,512),[[h,o.fromCoin&&o.fromCoin.logoURI||o.getCoinIcon(o.fromCoin)]]),E(g,{address:o.fromCoin&&o.fromCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])])]),e("div",Zn,[e("div",Jn,[e("div",Kn,d(("addCommom"in o?o.addCommom:U(L))(o.toCoinAmount)||0),1),e("div",Qn,d(o.toCoin&&o.toCoin.symbol),1)]),e("div",xn,[no(e("img",null,null,512),[[h,o.toCoin&&o.toCoin.logoURI||o.getCoinIcon(o.toCoin)]]),E(g,{address:o.toCoin&&o.toCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),ot])]),e("div",et,[e("div",nt,[tt,e("span",null,"$"+d(("addCommom"in o?o.addCommom:U(L))(o.totalAmount)),1)]),e("div",st,[it,e("span",null,d(o.shareOfPool)+"%",1)]),e("div",lt,[at,e("span",null,d(("addCommom"in o?o.addCommom:U(L))(o.minimumReceivedLP))+" "+d(o.fromCoin.symbol)+"-"+d(o.toCoin.symbol),1)])])]),E(_,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:lo(()=>[uo(" Add Liquidity ")]),_:1},8,["onClick"])]}),_:1})}const ue=yo(Bn,[["render",ut],["__scopeId","data-v-bb911124"]]),rt=go({components:{AutoPoolAddModal:ue},setup(){const o=jo(),n=q(!1),T=Co(),A=c(()=>T),N=c(()=>A.value.chainName),k=c(()=>o),g=Uo(),_=c(()=>g),m=Lo(),h=c(()=>m),l=q(),t=ho();so(()=>[_.value.positionInfoObj,t.params.id],([v,I])=>{v&&!mo(v)&&I&&(l.value=v[I],console.log(l.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const u=c(()=>{var v,I;return console.log((v=l.value)==null?void 0:v.needReverse,"##positionInfo.value?.needReverse"),(I=l.value)==null?void 0:I.needReverse}),a=q(),i=q(),s=q(),r=q(),$=q(!0),C=c(()=>k.value.assets&&a.value&&k.value.assets[a.value.address]?Zo(k.value.assets[a.value.address].balance,a.value.decimals):0),b=c(()=>k.value.assets&&i.value&&k.value.assets[i.value.address]?Zo(k.value.assets[i.value.address].balance,i.value.decimals):0),X=v=>{v==="fromCoin"?($.value=!0,s.value=C.value>0?a.value.symbol=="SUI"?new y(Number(C.value)).sub(new y(.05)).lt(new y(0))?"0":new y(Number(C.value)).sub(new y(.05)).toString():String(C.value):""):($.value=!1,r.value=b.value>0?i.value.symbol=="SUI"?new y(Number(b.value)).sub(new y(.05)).lt(new y(0))?"0":new y(Number(b.value)).sub(new y(.05)).toString():String(b.value):"")},P=v=>{v==="fromCoin"?($.value=!0,s.value=C.value>0?ao(new y(Number(C.value)).div(2).toString(),a.value.decimals).toString():""):($.value=!1,r.value=b.value>0?ao(new y(Number(b.value)).div(2).toString(),i.value.decimals).toString():"")},S=c(()=>N.value?xo(N.value):{}),F=c(()=>A.value.slippage),D=q("--"),j=q("--"),w=v=>{const I=new y(l.value.autoPoolPositionInfo.liquidity),B=new y(v.toString());if(I.toNumber()>0&&B.toNumber()>0){const R=B.add(I);console.log("totalLiquidity:",B.div(R).mul(100).toString());const K=B.div(R).mul(100).toNumber(),O=fe(K),Z=O==-1?2:O+2,io=ao(B.div(R).mul(100).toNumber(),Z);console.log(l.value.decimals,"##positionInfo.value.decimal");const x=new y(1).div(new y(Math.pow(10,l.value.lpInfo.decimals))).toString();console.log(io,x,"###288"),Number(io)<Number(x)?D.value=`<${x}`:D.value=io}else B.toNumber()>0&&I.toNumber()<=0?D.value="100":D.value="--"},Q=v=>{const I=new y(v.toString());console.log(v.toString(),"##liquidityAmount.toString()");const B=I.mul(new y(F.value).div(100)),R=new y(Math.pow(10,l.value.lpInfo.decimals));console.log(I.minus(B).div(R).toString(),"##liquidity.minus(minimum).div(decimals).toString()"),j.value=ao(I.minus(B).div(R).toString(),l.value.lpInfo.decimals)},J=q(!1),Y=q(!1),z=()=>{if(console.log(l.value,"238##"),!l.value)return;const v=l.value.autoPoolPositionInfo.tick_lower_index,I=l.value.autoPoolPositionInfo.tick_upper_index;console.log(l.value,"###467");const B=ko.sqrtPriceX64ToTickIndex(new to(l.value.current_sqrt_price));console.log(v,B,I,"###324"),B<v&&(u.value?J.value=!0:Y.value=!0),B>I&&(u.value?Y.value=!0:J.value=!0);let R;if(s.value||r.value){if($.value){const H=new y(s.value).mul(Math.pow(10,a.value.decimals)).toString();R=new to(H)}else{const H=new y(r.value).mul(Math.pow(10,i.value.decimals)).toString();R=new to(H)}const{liquidityAmount:K,tokenMaxA:O,tokenMaxB:Z,tokenMaxAOrigin:io,tokenMaxBOrigin:x}=S.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:a.value,tokenB:i.value,lowerTick:v,upperTick:I,coinAmount:R,iscoinA:$.value,roundUp:!0,slippage:Number(F.value)/100,curSqrtPrice:new to(l.value.current_sqrt_price)});console.log(l.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(Z.toString(),O.toString(),l.value,"###323"),$.value?r.value=Number(Z)>0?Z:"":s.value=Number(O)>0?O:"",w(K),Q(K)}};so(()=>l.value,v=>{v&&!mo(v)&&(a.value=v==null?void 0:v.token_a,i.value=v==null?void 0:v.token_b,J.value=!1,Y.value=!1,z())},{immediate:!0});const G=c(()=>h.value.RATES),oo=c(()=>{var v,I,B,R,K,O,Z,io,x,H;if((I=G.value[(v=a.value)==null?void 0:v.address])!=null&&I.price&&((R=G.value[(B=i.value)==null?void 0:B.address])!=null&&R.price)){console.log((O=G.value[(K=a.value)==null?void 0:K.address])==null?void 0:O.price,"RATES.value[fromCoin.value?.address]?.price");const Do=new y(s.value||0).mul(new y((io=G.value[(Z=a.value)==null?void 0:Z.address])==null?void 0:io.price)),Ho=new y(r.value||0).mul(new y((H=G.value[(x=i.value)==null?void 0:x.address])==null?void 0:H.price));return No(Do.add(Ho).toString(),2)}else return"--"});so(s,(v,I)=>{v&&z(),v==""&&(D.value="--",r.value="",j.value="--")}),so(r,(v,I)=>{v&&z(),v==""&&(s.value="",D.value="--",j.value="--")});const{t:eo,locale:Mo}=Fo(),vo=c(()=>{const v=Number(s.value)>Number(C.value),I=Number(r.value)>Number(b.value);return!s.value&&!r.value?eo("button.enterAmount"):v?eo("button.insufficientBalance",{name:a.value.symbol}):I?eo("button.insufficientBalance",{name:i.value.symbol}):"Add Liquidity"}),ro=c(()=>{const v=Number(s.value)>Number(C.value),I=Number(r.value)>Number(b.value);return!!(!s.value&&!r.value||v||I||s.value<=0&&r.value<=0)}),po=q(!0),{setIsShowSuccess:Ro,setIsShowRejected:Io,setIsShowWaiting:fo,setTransactionDesc:p,setTransactionTxid:W,setPositiomNum:_o}=T,$o=oe("Sui");return{wallet:k,positionInfo:l,isShowAddModal:n,needReverse:u,fromCoin:a,toCoin:i,fromCoinAmount:s,toCoinAmount:r,fromCoinBlance:C,toCoinBlance:b,fixedFromCoin:$,maxBtnSelect:X,halfBtnSelect:P,totalAmountUSD:oo,addCommom:L,shareOfPool:D,minimumReceivedLP:j,addLiquidityBtnText:vo,addLiquidityBtnDisabled:ro,toAdd:async()=>{var io,x;n.value=!1,po.value=!0,W("");const v=`${L(s.value)} ${(io=a.value)==null?void 0:io.symbol}`,I=`${L(r.value)} ${(x=i.value)==null?void 0:x.symbol}`;p(`Deposit ${s.value>0?v:""} ${r.value>0&&s.value>0?"and":""} ${r.value>0?I:""}`),fo(!0);const B=$.value,R=l.value.autoPoolPositionInfo.tick_lower_index,K=l.value.autoPoolPositionInfo.tick_upper_index;let O;if($.value){const H=new y(s.value).mul(Math.pow(10,a.value.decimals)).toString();O=new to(H)}else{const H=new y(r.value).mul(Math.pow(10,i.value.decimals)).toString();O=new to(H)}const Z=l.value.rewarderInfo.map(H=>H.coinAddress);try{const H={lowerTick:R,upperTick:K,coinAmount:O,fix_amount_a:B,slippage:Number(F.value)/100,curSqrtPrice:new to(l.value.current_sqrt_price),id:l.value.id,clmm_pool:l.value.autoPoolPositionInfo.pool,lp_token_type:l.value.lp_token_type,coinTypeA:l.value.autoPoolPositionInfo.coin_type_a,coinTypeB:l.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:Z},Do=await $o.deposit(H);console.log(Do,"===>payloadAdd11111");const Ho=await k.value.currentWallet.signAndExecuteTransactionBlock(Do);let To=S.value.handleTx(Ho);if(console.log("toAdd###tx###",To),To&&To.hash){W(To.hash),fo(!1),Ro(!0),console.log(l,"===>positionInfo");const Vo={title:"Supplied",desc:`Deposit ${s.value>0?v:""} ${r.value>0&&s.value>0?"and":""} ${r.value>0?I:""}`,hash:To.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${s.value>0?v:""} ${r.value>0&&s.value>0?"and":""} ${r.value>0?I:""}`};N.value!=="Aptos"&&(Vo.res=To.res),S.value.showTransitionPending(Vo),await S.value.watchTransaction(Vo)&&setTimeout(()=>{g.updatePositionItem(l.value.id),S.value.getAccount(k.value.address)},1e3),_o()}else fo(!1),Io(!0);s.value="",r.value="",po.value=!1}catch(H){s.value="",r.value="",console.log("addError###",H),po.value=!1,fo(!1),Io(!0)}},showToCoinLock:Y,showFromCoinLock:J}}});const Eo=o=>(So("data-v-1b28715c"),o=o(),wo(),o),dt={class:"auto-pool-add"},ct={class:"auto-pool-add-content"},mt={class:"liquidity-action-tab"},vt=Eo(()=>e("div",{class:"increase tab-active"},"Add",-1)),pt={class:"card-item"},ft={class:"card-item"},_t={class:"add-info"},bt={class:"total-amount"},gt=Eo(()=>e("span",null,"Total Amount",-1)),ht={class:"total-amount"},yt=Eo(()=>e("span",null,"Share of Pool",-1)),It={class:"total-amount"},$t=Eo(()=>e("span",null,"Minimum Received LP",-1)),kt=Eo(()=>e("span",null,"Pool Closed",-1));function Ct(o,n,T,A,N,k){var l,t,u,a,i;const g=Ce,_=Se,m=Xo,h=ue;return f(),M("div",dt,[e("div",ct,[e("div",mt,[vt,e("div",{class:"remove",onClick:n[0]||(n[0]=te(s=>o.$emit("changeCurrentTab"),["stop"]))},"Remove")]),e("div",{class:Yo(o.needReverse?"card-container reverse":"card-container")},[e("div",pt,[E(g,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":n[1]||(n[1]=s=>o.fromCoinAmount=s),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[2]||(n[2]=s=>o.maxBtnSelect("fromCoin")),onOnHalf:n[3]||(n[3]=s=>o.halfBtnSelect("fromCoin")),onOnInput:n[4]||(n[4]=s=>{o.fromCoinAmount=s}),onOnFocus:n[5]||(n[5]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock?(f(),V(_,{key:0})):bo("",!0)]),e("div",ft,[E(g,{modelValue:o.toCoinAmount,"onUpdate:modelValue":n[6]||(n[6]=s=>o.toCoinAmount=s),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[7]||(n[7]=s=>o.maxBtnSelect("toCoin")),onOnHalf:n[8]||(n[8]=s=>o.halfBtnSelect("toCoin")),onOnInput:n[9]||(n[9]=s=>{o.toCoinAmount=s}),onOnFocus:n[10]||(n[10]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock?(f(),V(_,{key:0})):bo("",!0)])],2),e("div",_t,[e("div",bt,[gt,e("span",null,"$"+d(("addCommom"in o?o.addCommom:U(L))(o.totalAmountUSD)),1)]),e("div",ht,[yt,e("span",null,d(o.shareOfPool)+"%",1)]),e("div",It,[$t,e("span",null,d(("addCommom"in o?o.addCommom:U(L))(o.minimumReceivedLP))+" "+d(o.needReverse?(l=o.toCoin)==null?void 0:l.symbol:(t=o.fromCoin)==null?void 0:t.symbol)+"-"+d(o.needReverse?(u=o.fromCoin)==null?void 0:u.symbol:(a=o.toCoin)==null?void 0:a.symbol),1)])])]),(i=o.positionInfo)!=null&&i.is_pause?(f(),V(m,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:lo(()=>[kt]),_:1})):o.wallet.connected?(f(),V(m,{key:1,class:"big-btn liquidity-btn",disabled:o.addLiquidityBtnDisabled,onClick:n[11]||(n[11]=s=>o.isShowAddModal=!0)},{default:lo(()=>[e("span",null,d(o.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(f(),V(m,{key:2,class:"big-btn",onClick:n[12]||(n[12]=s=>o.wallet.setIsShowWalletModal(!0))},{default:lo(()=>[e("span",null,d(o.$t("button.connectWallet")),1)]),_:1})),o.isShowAddModal?(f(),V(h,{key:3,"pool-info":o.positionInfo,"from-coin":o.needReverse?o.positionInfo.token_b:o.positionInfo.token_a,"to-coin":o.needReverse?o.positionInfo.token_a:o.positionInfo.token_b,"from-coin-amount":o.needReverse?o.toCoinAmount:o.fromCoinAmount,"to-coin-amount":o.needReverse?o.fromCoinAmount:o.toCoinAmount,"total-amount":o.totalAmountUSD,"share-of-pool":o.shareOfPool,"minimum-received-l-p":o.minimumReceivedLP,onOnClose:n[13]||(n[13]=s=>o.isShowAddModal=!1),onToAdd:o.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","onToAdd"])):bo("",!0)])}const re=yo(rt,[["render",Ct],["__scopeId","data-v-1b28715c"]]),St=go({props:{inputValue:{type:String,default:""},balance:{type:String,default:""},lpDecimals:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},inputDisabled:{type:Boolean,default:!1},positionInfo:{default:()=>({})}},setup(o,n){const{t:T,locale:A}=Fo(),N=Co(),k=c(()=>N),g=c(()=>new y(Number(o.balance)).div(2)),_=be(ge,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function m(){this.$emit("onSelect")}const h=b=>{const X=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${o.lpDecimals&&o.lpDecimals}})?).*$`);b.target.value=b.target.value.replace(X,"$1")},l=jo(),t=c(()=>l),u=Lo(),a=c(()=>u),i=c(()=>a.value.tokensWarningObj);so(()=>a.value.RATES,b=>{b&&console.log(b,"price====>")},{immediate:!0});const s=c(()=>a.value.tokensObj),r=c(()=>k.value.theme),$=ho(),C=b=>(b==null?void 0:b.logoURI)||(b==null?void 0:b.logo_url)||co("/image/coins/sui-unknown.png");return console.log(o,"props###158"),{route:$,theme:r,tokensObj:s,pool:a,halfBalance:g,t:T,addCommom:L,store:k,wallet:t,indicator:_,inputChange:h,importIcon:co,selectCoin:m,formatNumber:_e,tokensWarningObj:i,checkNullObj:mo,getCoinIcon:C}}});const wt=o=>(So("data-v-afb7957e"),o=o(),wo(),o),At={class:"card"},Pt={class:"top"},Rt={key:1,class:"input-div"},qt={key:0},Tt={class:"left"},Nt={class:"loading-token"},Lt={class:"lp-bg"},Bt={key:0,alt:""},Ot={class:"bottom"},Mt=wt(()=>e("div",null,null,-1)),Dt={class:"top"},jt={class:"right"};function Ut(o,n,T,A,N,k){const g=he,_=se,m=Bo("image");return f(),M("div",At,[e("div",Pt,[o.inputDisabled?(f(),M("div",Rt,[o.inputValue?(f(),M("span",qt,d(o.inputValue),1)):(f(),V(_,{key:1,indicator:o.indicator},null,8,["indicator"]))])):(f(),V(g,{key:0,value:o.inputValue=="InsufficientLiquidity"?"":o.inputValue,placeholder:"0.0",disabled:o.inputDisabled,onChange:o.inputChange,onInput:n[0]||(n[0]=h=>o.$emit("onInput",h.target.value)),onFocus:n[1]||(n[1]=h=>o.$emit("onFocus"))},null,8,["value","disabled","onChange"])),e("div",Tt,[e("div",Nt,[e("div",Lt,[o.positionInfo&&!("checkNullObj"in o?o.checkNullObj:U(mo))(o.positionInfo)&&o.positionInfo.lpInfo?no((f(),M("img",Bt,null,512)),[[m,o.getCoinIcon(o.positionInfo.lpInfo)]]):bo("",!0)]),e("p",null,d(o.fromCoin.symbol)+" - "+d(o.toCoin.symbol),1)])])]),e("div",Ot,[Mt,e("div",Dt,[e("div",jt,[uo(d(o.$t("common.balance"))+" ",1),e("span",{class:"balance",onClick:n[2]||(n[2]=h=>o.$emit("onMax"))},d(o.wallet.connected?("addCommom"in o?o.addCommom:U(L))(o.balance,o.lpDecimals):"0"),1)])])])])}const Ft=yo(St,[["render",Ut],["__scopeId","data-v-afb7957e"]]),Wt=go({components:{Modal:ee},props:{title:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"11111111111"},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},isIncrease:{type:Boolean,default:!1},fixedFromCoin:{type:Boolean,default:!0},currentPriceTab:{type:String,default:""},currentPrice:{type:String,default:""},currentPriceReverse:{type:String,default:""},showFromCoinLock:{type:Boolean,default:!1},showToCoinLock:{type:Boolean,default:!1},currentDirect:{type:Boolean,default:!0},positionTotalAmount:{type:Number,default:0},tickLower:{type:Number,default:0},tickUpper:{type:Number,default:0},isCreate:{type:Boolean,default:!1}},setup(o,n){const{t:T}=Fo(),A=c(()=>{var u,a,i;return((u=o==null?void 0:o.poolInfo)==null?void 0:u.needReverse)||((i=(a=o==null?void 0:o.poolInfo)==null?void 0:a.poolInfo)==null?void 0:i.needReverse)}),N=Lo(),k=c(()=>N),g=Co(),_=c(()=>g),m=u=>{var a;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((a=k.value.tokensObj[u==null?void 0:u.address])==null?void 0:a.logo_url)||(_.value.theme==="default"?co("/image/coins/unknown.png"):co("/image/coins/sui-unknown.png"))},h=ho(),l=q(!1),t=()=>{n.emit("toAdd")};return console.log(o,"props451"),{needReverse:A,getCoinIcon:m,addCommom:L,t:T,route:h,checked:l,decimalUi:No,clickSubmit:t}}});const Po=o=>(So("data-v-a27577b5"),o=o(),wo(),o),Et=Po(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Xt={class:"modal-content"},zt={class:"pool-info"},Ht={class:"left"},Vt={alt:""},Yt={alt:""},Gt={class:"pool-name"},Zt={class:"right"},Jt=Po(()=>e("div",{class:"lp-info"},[e("div",{class:"lp-num"},[e("p",null,"1,126,122.123456"),e("span",null,"USDT-USDC LP")]),e("div",{class:"lp-bg"})],-1)),Kt={class:"est-receive"},Qt=Po(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),xt={class:"token-a"},os=Po(()=>e("div",null,"0.941824",-1)),es={alt:""},ns=Po(()=>e("span",null,"USDT",-1)),ts={class:"token-a"},ss=Po(()=>e("div",null,"0.941824",-1)),is={alt:""},ls=Po(()=>e("span",null,"USDC",-1));function as(o,n,T,A,N,k){const g=Go,_=Xo,m=ne("Modal"),h=Bo("image");return f(),V(m,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:n[0]||(n[0]=l=>o.$emit("onClose"))},{closeIcon:lo(()=>[Et]),default:lo(()=>{var l,t,u,a,i,s,r,$,C,b,X,P,S,F,D,j,w,Q,J,Y,z,G,oo,eo;return[e("div",Xt,[e("div",zt,[e("div",Ht,[e("div",null,[no(e("img",Vt,null,512),[[h,o.needReverse?(a=(u=o.poolInfo)==null?void 0:u.token_b)==null?void 0:a.logo_url:(t=(l=o.poolInfo)==null?void 0:l.token_a)==null?void 0:t.logo_url]]),E(g,{address:o.needReverse?($=(r=o.poolInfo)==null?void 0:r.token_b)==null?void 0:$.address:(s=(i=o.poolInfo)==null?void 0:i.token_a)==null?void 0:s.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[no(e("img",Yt,null,512),[[h,o.needReverse?(P=(X=o.poolInfo)==null?void 0:X.token_a)==null?void 0:P.logo_url:(b=(C=o.poolInfo)==null?void 0:C.token_b)==null?void 0:b.logo_url]]),E(g,{address:o.needReverse?(j=(D=o.poolInfo)==null?void 0:D.token_a)==null?void 0:j.address:(F=(S=o.poolInfo)==null?void 0:S.token_b)==null?void 0:F.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",Gt,[e("span",null,d(o.needReverse?(Y=(J=o.poolInfo)==null?void 0:J.token_b)==null?void 0:Y.symbol:(Q=(w=o.poolInfo)==null?void 0:w.token_a)==null?void 0:Q.symbol),1),uo(" - "),e("span",null,d(o.needReverse?(eo=(oo=o.poolInfo)==null?void 0:oo.token_a)==null?void 0:eo.symbol:(G=(z=o.poolInfo)==null?void 0:z.token_b)==null?void 0:G.symbol),1)])]),e("div",Zt,[uo(" Fee tier "),e("span",null,d(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),Jt,e("div",Kt,[Qt,e("div",xt,[os,e("div",null,[no(e("img",es,null,512),[[h,"1"]]),ns])]),e("div",ts,[ss,e("div",null,[no(e("img",is,null,512),[[h,"1"]]),ls])])])]),E(_,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:lo(()=>[uo(d(o.isIncrease?"Increase Liquidity":o.title==o.$t("button.addLiquidity")?"Add Liquidity":"Create and Add Liquidity"),1)]),_:1},8,["onClick"])]}),_:1})}const de=yo(Wt,[["render",as],["__scopeId","data-v-a27577b5"]]),us=go({components:{AutoPoolRemoveModal:de},setup(){const o=jo(),n=c(()=>o),T=Co(),A=c(()=>T),N=c(()=>A.value.slippage),k=c(()=>A.value.chainName),g=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],_=q(25),m=ho(),h=Uo(),l=c(()=>h),t=c(()=>(console.log(l.value.positionInfoObj[m.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),l.value.positionInfoObj[m.params.id])),u=c(()=>{var p;return(p=t.value)==null?void 0:p.needReverse}),a=q(),i=q(),s=q(!1),r=q(),$=c(()=>{var p;return(p=t.value)==null?void 0:p.myLiquidity}),C=q(!0),b=c(()=>k.value?xo(k.value):{}),X=oe("Sui"),P=q("--"),S=q("--"),F=q("--"),D=()=>{if(C.value||!t.value)return;if(!r.value){P.value="--",S.value="--",_.value=0;return}if(Number(r.value)>Number($.value))return;if(Number(r.value)*Math.pow(10,t.value.decimals)==Number($.value)){_.value=100,w({value:1}),C.value=!0;return}const p=new y(r.value).mul(Math.pow(10,t.value.lpInfo.decimals)).toString();console.log(r.value,$.value,"##lpBalance.value");const W=new y(r.value).div(new y($.value)).mul(100);console.log(new y("0.000000001").div(new y("5.092202763")).toString(),"3333");const _o=t.value.tick_lower_index,$o=t.value.tick_upper_index,qo=t.value.token_a.decimals,v=t.value.token_b.decimals,I=ko.tickIndexToSqrtPriceX64(_o),B=ko.tickIndexToSqrtPriceX64($o);console.log(t.value.object.current_sqrt_price,"##positionInfo.value.object.current_sqrt_price"),console.log(p.toString(),t.value.total_supply,"amount.toString");const R=Ko.get_share_liquidity_by_amount({liquidity:t.value.liquidity,total_supply:t.value.total_supply},p.toString());console.log(R,"###liquidity");const K=Jo.getCoinAmountFromLiquidity(new to(R),new to(t.value.object.current_sqrt_price),I,B,!1),O=new y(K.coinA.toString()).div(Math.pow(10,qo)).toString(),Z=new y(K.coinB.toString()).div(Math.pow(10,v)).toString();P.value=Number(O)>0?O:"--",S.value=Number(Z)>0?Z:"--",console.log(W.toString(),"##ratio"),_.value=W.toString(),F.value=ao(p,0),j.value=ao(R,0)},j=q(),w=p=>{if(!C.value)return;C.value=!0;const W=t.value.token_a.decimals,_o=t.value.token_b.decimals,$o=t.value.tick_lower_index,qo=t.value.tick_upper_index,v=ko.tickIndexToSqrtPriceX64($o),I=ko.tickIndexToSqrtPriceX64(qo);let B="",R;console.log(t.value,"positionInfo.value.myLiquidity###"),p.value!==1?R=new y(t.value.myLiquidity).mul(Math.pow(10,t.value.lpInfo.decimals)).mul(p.value).toString():R=new y(t.value.myLiquidity).mul(Math.pow(10,t.value.lpInfo.decimals)).toString(),r.value=new y(R).div(Math.pow(10,t.value.lpInfo.decimals)),B=Ko.get_share_liquidity_by_amount({liquidity:t.value.liquidity,total_supply:t.value.total_supply},R),F.value=ao(R,0),j.value=ao(B,0),console.log(t.value.myLiquidity,"##positionInfo.value.myLiquidity");const K=Jo.getCoinAmountFromLiquidity(new to(B),new to(t.value.object.current_sqrt_price),v,I,!1),O=new y(K.coinA.toString()).div(Math.pow(10,W)).toString(),Z=new y(K.coinB.toString()).div(Math.pow(10,_o)).toString();console.log(O,Z,"amountA121212"),P.value=Number(O)>0?O:"--",S.value=Number(Z)>0?Z:"--"};so(_,ye((p,W)=>{p!==W&&(Number(p)>100?_.value=100:p&&t.value?(console.log("687===>"),_.value=p,w({value:_.value/100})):(P.value="--",S.value="--"))},300)),so(()=>r.value,p=>{D()},{immediate:!0});const Q=ie(),{setIsShowSuccess:J,setIsShowRejected:Y,setIsShowWaiting:z,setTransactionDesc:G,setTransactionTxid:oo,setPositiomNum:eo,setTransactionDescText:Mo}=T,vo=q(!1),{t:ro}=Fo(),po=async()=>{var R,K;vo.value=!0,oo("");const p=Number(P.value)>0?`${L(P.value,a.value.decimals)} ${a.value.symbol}`:"",W=Number(S.value)>0?`${L(S.value,i.value.decimals)} ${i.value.symbol}`:"";console.log(p,W,"###transactionDescTo"),G(ro("tips.removeLiquidiyText",{from:u.value?W:p,and:Number(P.value)>0&&Number(S.value)>0?"and":"",to:u.value?p:W})),z(!0);const _o=ro("modal.removeLiquidityText2");Mo(_o);const $o=t.value.autoPoolPositionInfo.tick_lower_index,qo=t.value.autoPoolPositionInfo.tick_upper_index,v=ko.tickIndexToSqrtPriceX64($o),I=ko.tickIndexToSqrtPriceX64(qo),B=t.value.rewarderInfo.map(O=>O.coinAddress);console.log(j.value,"##liquidityVal.value");try{const O={lowerSqrtPrice:v,upperSqrtPrice:I,lpTokenAmount:new to(F.value),liquidity:new to(j.value),curSqrtPrice:new to(t.value.object.current_sqrt_price),slippage:Number(N.value)/100,id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.pool,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coin_type_a,coinTypeB:t.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:B},Z=await X.remove(O),io=await n.value.currentWallet.signAndExecuteTransactionBlock(Z);let x=b.value.handleTx(io);if(console.log("0331###remove###tx####",x),x&&x.hash){oo(x.hash),z(!1),J(!0);const H={title:ro("common.removeLiquidity"),desc:"",hash:x.hash,descTransactions:`Remove ${p} ${Number(P.value)>0&&Number(S.value)>0?"and":""} ${W} from the pool`,sender:n.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${P.value} ${(R=a.value)==null?void 0:R.symbol} and ${S.value} ${(K=i.value)==null?void 0:K.symbol}`};H.res=x.res,b.value.showTransitionPending(H),await b.value.watchTransaction(H)&&(P.value="",S.value="",r.value="",_.value=0,setTimeout(()=>{h.updatePositionItem(t.value.id),b.value.getAccount(n.value.address)},1e3),Number(_.value)==100&&m.name=="auto-pool-detail"&&Q.push("/pool/auto"))}else z(!1),Y(!0);vo.value=!1}catch(O){console.log("Remove error",O),vo.value=!1,z(!1),Y(!0)}};so(()=>t.value,(p,W)=>{p&&!mo(p)&&(a.value=p==null?void 0:p.token_a,i.value=p==null?void 0:p.token_b,console.log("触发###"),(!W||W&&W.address!==p.address)&&w({value:_.value/100}))},{immediate:!0});const Ro=c(()=>{const p=Number(r.value)>Number($.value);return!r.value||r.value<=0?ro("button.enterAmount"):p?"Invalid Amount":ro("button.remove")}),Io=c(()=>{const p=Number(r.value)>Number($.value);return!!(!r.value||r.value<=0||p)});return{removeLiquidityBtnText:Ro,removeLiquidityBtnDisabled:Io,wallet:n,ratioArr:g,positionInfo:t,isShowRemoveModal:s,needReverse:u,fromCoin:a,toCoin:i,lpAmount:r,lpBalance:$,sliderVal:_,sFixD:ao,isSlider:C,fromCoinAmount:P,toCoinAmount:S,setPercent:w,toRemove:po,addCommom:L,getCoinIcon:p=>(p==null?void 0:p.logoURI)||(p==null?void 0:p.logo_url)||co("/image/coins/sui-unknown.png")}}});const zo=o=>(So("data-v-3b3f70cf"),o=o(),wo(),o),rs={class:"auto-pool-add"},ds={class:"auto-pool-add-content"},cs={class:"liquidity-action-tab"},ms=zo(()=>e("div",{class:"remove tab-active"},"Remove",-1)),vs={class:"card-item"},ps={class:"remove-ratio"},fs=zo(()=>e("div",{class:"remove-ratio-title"},"Amount",-1)),_s={class:"remove-ratio-select"},bs={key:0,class:"ratio"},gs={key:1,class:"ratio"},hs={class:"ratio-list"},ys=["onClick"],Is={class:"est-receive"},$s=zo(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),ks={class:"token-a"},Cs={alt:""},Ss={class:"token-a"},ws={alt:""},As=zo(()=>e("span",null,"Pool Closed",-1));function Ps(o,n,T,A,N,k){var t,u,a,i,s,r,$,C,b,X,P,S,F,D,j;const g=Ft,_=ke,m=Xo,h=de,l=Bo("image");return f(),M("div",rs,[e("div",ds,[e("div",cs,[e("div",{class:"increase",onClick:n[0]||(n[0]=te(w=>o.$emit("changeCurrentTab"),["stop"]))},"Add"),ms]),e("div",{class:Yo(o.needReverse?"card-container reverse":"card-container")},[e("div",vs,[E(g,{modelValue:o.lpAmount,"onUpdate:modelValue":n[1]||(n[1]=w=>o.lpAmount=w),"input-value":o.lpAmount,balance:o.lpBalance,"from-coin":o.needReverse?o.toCoin:o.fromCoin,"to-coin":o.needReverse?o.fromCoin:o.toCoin,"position-info":o.positionInfo,"lp-decimals":(u=(t=o.positionInfo)==null?void 0:t.lpInfo)==null?void 0:u.decimals,onOnMax:n[2]||(n[2]=()=>{o.sliderVal=100,o.setPercent({value:1})}),onOnInput:n[3]||(n[3]=w=>{o.isSlider=!1,o.lpAmount=w})},null,8,["modelValue","input-value","balance","from-coin","to-coin","position-info","lp-decimals"])])],2),e("div",ps,[fs,e("div",_s,[Number(o.lpBalance)>=Number(o.lpAmount)?(f(),M("div",bs,d(o.sliderVal>0&&Number(("sFixD"in o?o.sFixD:U(ao))(o.sliderVal,2))<.01?"<0.01":("sFixD"in o?o.sFixD:U(ao))(o.sliderVal,2))+"% ",1)):(f(),M("div",gs,"--")),e("div",hs,[(f(!0),M(Ie,null,$e(o.ratioArr,(w,Q)=>(f(),M("div",{key:Q,class:Yo(["ratio-item",o.sliderVal==w.value?"ratio-item-active":""]),onClick:()=>{o.isSlider=!0,o.sliderVal=w.value}},d(w.name),11,ys))),128))])]),E(_,{value:o.sliderVal,"onUpdate:value":n[4]||(n[4]=w=>o.sliderVal=w)},null,8,["value"])]),e("div",Is,[$s,e("div",ks,[e("div",null,d(("addCommom"in o?o.addCommom:U(L))(o.fromCoinAmount)),1),e("div",null,[no(e("img",Cs,null,512),[[l,o.needReverse?o.getCoinIcon((a=o.positionInfo)==null?void 0:a.token_b):o.getCoinIcon((i=o.positionInfo)==null?void 0:i.token_a)]]),e("span",null,d(o.needReverse?(r=(s=o.positionInfo)==null?void 0:s.token_b)==null?void 0:r.symbol:(C=($=o.positionInfo)==null?void 0:$.token_a)==null?void 0:C.symbol),1)])]),e("div",Ss,[e("div",null,d(("addCommom"in o?o.addCommom:U(L))(o.toCoinAmount)),1),e("div",null,[no(e("img",ws,null,512),[[l,o.needReverse?o.getCoinIcon((b=o.positionInfo)==null?void 0:b.token_a):o.getCoinIcon((X=o.positionInfo)==null?void 0:X.token_b)]]),e("span",null,d(o.needReverse?(S=(P=o.positionInfo)==null?void 0:P.token_a)==null?void 0:S.symbol:(D=(F=o.positionInfo)==null?void 0:F.token_b)==null?void 0:D.symbol),1)])])])]),(j=o.positionInfo)!=null&&j.is_pause?(f(),V(m,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:lo(()=>[As]),_:1})):o.wallet.connected?(f(),V(m,{key:1,class:"big-btn liquidity-btn",disabled:o.removeLiquidityBtnDisabled,onClick:o.toRemove},{default:lo(()=>[e("span",null,d(o.removeLiquidityBtnText),1)]),_:1},8,["disabled","onClick"])):(f(),V(m,{key:2,class:"big-btn",onClick:n[5]||(n[5]=w=>o.wallet.setIsShowWalletModal(!0))},{default:lo(()=>[e("span",null,d(o.$t("button.connectWallet")),1)]),_:1})),o.isShowRemoveModal?(f(),V(h,{key:3,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,onOnClose:n[6]||(n[6]=w=>o.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):bo("",!0)])}const ce=yo(us,[["render",Ps],["__scopeId","data-v-3b3f70cf"]]),Rs=go({components:{AutoPoolAdd:re,AutoPositionInfo:le,AutoPositionLiquidity:ae,AutoPoolRemove:ce},setup(){const o=q("add"),n=jo(),T=c(()=>n),A=Uo(),N=c(()=>A),k=Lo(),g=c(()=>k);so(()=>g.value.poolConfigList,a=>{a&&a.length>0&&A.getAutoPoolList()},{immediate:!0}),so(()=>[T.value.address,N.value.autoPoolList,g.value.poolConfigList],([a,i,s])=>{a&&i&&i.length>0&&s&&s.length>0&&A.getMyAutoPoolPosition()},{immediate:!0});const _=ho(),m=c(()=>(console.log(N.value.positionInfoObj[_.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),N.value.positionInfoObj[_.params.id]||{}));so(()=>_.query.action,a=>{a&&(o.value=a)},{immediate:!0});const h=ie();so(()=>T.value.address,a=>{a||h.push("/pool/auto")},{immediate:!0});const l=Co(),t=c(()=>l);return{currentTab:o,positionInfo:m,clickRefresh:()=>{A.getAutoPoolAPY(),A.getAutoPoolList(),k.setPoolConfigList(t.value.chainName,t.value.filterCoinsObj)},checkNullObj:mo}}});const qs={class:"auto-increase-liquidity"},Ts={class:"auto-increase-liquidity-content pc-content"},Ns={class:"left"},Ls={class:"right"},Bs={class:"auto-increase-liquidity-content h5-content"},Os={class:"left"},Ms={class:"right"};function Ds(o,n,T,A,N,k){const g=me,_=le,m=ae,h=re,l=ce,t=se;return f(),M("div",qs,[E(g,{onClickRefresh:o.clickRefresh},null,8,["onClickRefresh"]),e("div",Ts,[e("div",Ns,[E(_),E(m)]),e("div",Ls,[o.currentTab=="add"?(f(),V(h,{key:0,onChangeCurrentTab:n[0]||(n[0]=u=>o.currentTab="remove")})):(f(),V(l,{key:1,onChangeCurrentTab:n[1]||(n[1]=u=>o.currentTab="add")}))]),("checkNullObj"in o?o.checkNullObj:U(mo))(o.positionInfo)?(f(),V(t,{key:0})):bo("",!0)]),e("div",Bs,[e("div",Os,[E(_),o.currentTab=="add"?(f(),V(h,{key:0,onChangeCurrentTab:n[2]||(n[2]=u=>o.currentTab="remove")})):(f(),V(l,{key:1,onChangeCurrentTab:n[3]||(n[3]=u=>o.currentTab="add")}))]),e("div",Ms,[E(m)]),("checkNullObj"in o?o.checkNullObj:U(mo))(o.positionInfo)?(f(),V(t,{key:0})):bo("",!0)])])}const ri=yo(Rs,[["render",Ds],["__scopeId","data-v-410a8251"]]);export{ri as default};
