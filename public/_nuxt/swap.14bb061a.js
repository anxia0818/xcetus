import{_ as ln,a as un}from"./token-warning-modal.a222d5af.js";import{_ as rn,a as dn}from"./coin-select.bdc6889a.js";import{a as ke,u as $e,b as To,c as be,D as m,s as Y,d as E,j as No,h as Ve,z as Ao,f as ve,_ as Ee,w as So,p as Ce,g as he,e as je}from"./pool.d1aca0eb.js";import{e as Ie,a as Ue,a1 as _o,a2 as Bo,r as p,m as A,A as Z,o as a,f as g,h as o,c as W,s as F,j as J,t as s,x as re,u as L,J as Fo,S as Oo,p as Te,k as Ne,M as eo,l as Po,K as oo,w as se,i as me,B as no,a4 as cn,F as xe,q as ko,b as $o,v as mn,z as vn,a7 as Me,D as pn}from"./entry.794bfa8c.js";/* empty css              *//* empty css              */import"./decimal.9edc4e5e.js";import{i as ie}from"./import-icon.de3e6c66.js";import{a as fn,_ as gn}from"./network-tips.dbe1ca8d.js";/* empty css              */import{u as Cn}from"./swapRouter.ede91f90.js";import{_ as hn}from"./img-leverage_2x.1c577303.js";/* empty css              */import"./icon-selected_3x.350736e2.js";import"./token-warning.a44f63ed.js";/* empty css              */import"./img-no-Positions_2x.39cb5eb9.js";const bn=""+globalThis.__publicAssetsURL("sui-image/route-view.png");const wn=Ue({props:{swapLoading:{type:Boolean,default:!1},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},routertotalPercents:{type:Array,default:()=>[]},routerPool:{type:Array,default:()=>[]},impact:{type:String,default:""},insufficientLiquidity:{type:Boolean,default:!1},oneToAmount:{type:String,default:""},oneFromAmount:{type:String,default:""},suiPreSwapdata:{type:Object,default:()=>({})},suiSwapFee:{type:String,default:""},swapRouterLoading:{type:Boolean,default:!1}},setup(e){const u=_o(Bo,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0}),b=p(!1),h=ke(),I=A(()=>h),P=A(()=>I.value.slippage),v=A(()=>I.isShowRouterModal);Z(()=>e,k=>{console.log(k,"==>newValue")},{immediate:!0,deep:!0});const j=$e(),O=A(()=>j),X=To("Sui"),_=p({}),Q=p({}),z=p({});Z(()=>[e.suiPreSwapdata,O.value.tokensObj],async([k,f])=>{k&&!be(k)&&f&&!be(f)&&(k.coinTypeA&&(_.value=f[k.coinTypeA]||(await X.getTokenListByCoinType([k.coinTypeA]))[0]),k.coinTypeB&&(Q.value=f[k.coinTypeB]||(await X.getTokenListByCoinType([k.coinTypeB]))[0]),k.coinTypeC&&(z.value=f[k.coinTypeC]||(await X.getTokenListByCoinType([k.coinTypeC]))[0]))},{immediate:!0});const T=p(0),K=p(0);return Z(()=>[e.fromCoinAmount,e.toCoinAmount,e.fromCoin,e.toCoin,e.fixedFromCoin,P.value],([k,f,le,N,G,t])=>{if(k&&f&&le&&N&&t)if(G){const r=new m(f).mul(new m(t/100));K.value=new m(f).sub(r).toString()}else{const r=new m(k).mul(new m(t/100));T.value=new m(k).sub(r).toString()}},{immediate:!0}),{sFixD:Y,getCoinIcon:k=>{var f;return(k==null?void 0:k.logoURI)||(k==null?void 0:k.logo_url)||((f=O.value.tokensObj[k==null?void 0:k.address])==null?void 0:f.logo_url)||(I.theme==="default"?ie("/image/coins/unknown.png"):ie("/image/coins/sui-unknown.png"))},indicator:u,rateChange:b,slippage:P,isShowRouterModal:v,indexStore:h,coinTypeA:_,coinTypeB:Q,coinTypeC:z,maximumSold:T,minimumReceived:K,addCommom:E}}}),we=e=>(Te("data-v-ace85ee6"),e=e(),Ne(),e),yn={key:0,class:"swap-info"},An={class:"loading-swap"},Sn={key:1,class:"swap-rate"},kn={key:0},$n=["src"],In={key:0},Tn=["src"],Nn={key:1},_n={key:0},Bn=["src"],Fn=["src"],On=we(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Pn=we(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Un=[On,Pn],Rn={key:2},Dn={class:"trade-info"},Ln={class:"trade-block"},jn=we(()=>o("div",{class:"lebal"},"Price Impact",-1)),Mn={key:0,class:"icon","aria-hidden":"true"},En=we(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),qn=[En],Wn={class:"trade-block"},Xn={class:"lebal"},Qn={key:0,class:"text"},Hn={class:"trade-block"},zn=we(()=>o("div",{class:"lebal"},"Fee",-1)),Jn={key:0,class:"text"},Kn={key:0,class:"trade-block"},Zn=we(()=>o("div",{class:"lebal"},"Route",-1)),Yn={key:0,class:"text"},Gn={key:0},Vn={key:1},xn={key:2},es=we(()=>o("img",{src:bn,alt:""},null,-1));function os(e,u,b,h,I,P){const v=Fo,j=Oo;return e.swapLoading||Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&!e.insufficientLiquidity?(a(),g("div",yn,[o("div",An,[e.swapLoading||e.swapRouterLoading?(a(),W(v,{key:0,size:"small",indicator:e.indicator},null,8,["indicator"])):F("",!0),e.swapLoading?e.swapLoading?(a(),g("span",Rn,"Best route and price")):F("",!0):(a(),g("div",Sn,[e.rateChange?(a(),g("span",Nn,[e.fromCoinAmount&&e.toCoinAmount?(a(),g("span",_n,[o("img",{src:e.getCoinIcon(e.toCoin)},null,8,Bn),J(" 1 "+s(e.toCoin.symbol)+" ≈ ",1),o("img",{src:e.getCoinIcon(e.fromCoin)},null,8,Fn),J(s(e.oneFromAmount==1/0?0:e.oneFromAmount)+" "+s(e.fromCoin.symbol),1)])):(a(),W(v,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(a(),g("span",kn,[o("img",{src:e.getCoinIcon(e.fromCoin)},null,8,$n),J(" 1 "+s(e.fromCoin.symbol)+" ≈ ",1),e.fromCoinAmount&&e.toCoinAmount?(a(),g("span",In,[o("img",{src:e.getCoinIcon(e.toCoin)},null,8,Tn),J(s(e.oneToAmount==1/0?0:e.oneToAmount)+" "+s(e.toCoin.symbol),1)])):(a(),W(v,{key:1,indicator:e.indicator},null,8,["indicator"]))])),o("div",{class:"right",onClick:u[0]||(u[0]=O=>e.rateChange=!e.rateChange)},Un)]))]),o("div",Dn,[o("div",Ln,[jn,e.swapRouterLoading?(a(),W(j,{key:1,paragraph:!1,active:""})):(a(),g("div",{key:0,class:re(["text",e.impact<1?"impact-s":e.impact<10&&e.impact>=1?"impact-w":"impact-e"])},[J(s(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(a(),g("svg",Mn,qn)):F("",!0)],2))]),o("div",Wn,[o("div",Xn,s(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swapRouterLoading?(a(),W(j,{key:1,paragraph:!1,active:""})):(a(),g("div",Qn,s(e.fixedFromCoin?("addCommom"in e?e.addCommom:L(E))(("sFixD"in e?e.sFixD:L(Y))(e.minimumReceived,e.toCoin.decimals)):("addCommom"in e?e.addCommom:L(E))(("sFixD"in e?e.sFixD:L(Y))(e.maximumSold,e.fromCoin.decimals)))+" "+s(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",Hn,[zn,e.swapRouterLoading?(a(),W(j,{key:1,paragraph:!1,active:""})):(a(),g("div",Jn,s(e.suiSwapFee),1))]),e.insufficientLiquidity?F("",!0):(a(),g("div",Kn,[Zn,e.swapRouterLoading?(a(),W(j,{key:1,paragraph:!1,active:""})):(a(),g("div",{key:0,class:"text",onClick:u[1]||(u[1]=O=>e.indexStore.setIsShowRouterModal(!e.isShowRouterModal))},[e.swapRouterLoading?F("",!0):(a(),g("div",Yn,[e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeA?(a(),g("span",Gn,s(e.coinTypeA.symbol)+" "+s(e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeB?"> ":""),1)):F("",!0),e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeB?(a(),g("span",Vn,s(e.coinTypeB.symbol)+" "+s(e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeC?"> ":""),1)):F("",!0),e.suiPreSwapdata&&e.suiPreSwapdata.coinTypeC?(a(),g("span",xn,s(e.coinTypeC.symbol),1)):F("",!0)])),es]))]))])])):F("",!0)}const ns=Ie(wn,[["render",os],["__scopeId","data-v-ace85ee6"]]),Io={SUI:{symbol:"SUI",name:"Sui Coin",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::BTC"},sBTC:{symbol:"sBTC",name:"Wrapped BTC",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::BTC"},sETH:{symbol:"sETH",name:"Wrapped Ether",decimals:8,balance:0,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::ETH"},USDC:{symbol:"USDC",name:"USDC Coin",decimals:6,balance:12e3,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDC"},USDT:{symbol:"USDT",name:"Tether USD",decimals:6,balance:1e4,address:"0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDT"}},ss={"USDT-USDC":{symbol:"USDT-USDC",name:"USDT-USDC",decimals:6,coinA:Io.USDT,coinB:Io.USDC,feeDenominator:"10000",feeNumerator:"1",fee:"0.01",address:"0x1ce98d89494e9d3d7935bc3bd5fc714fc2abb99db3f024162552c4ba172f4d28::amm_swap::PoolLiquidityCoin<0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDT,0x84dc9d921d277db5047dcb17addc2ecfbddfad087dd4ea825b2d17785755cb29::cetus_faucet::USDC>"}};function as(e,u){const b=Object.values(ss).filter(h=>e===h.coinA.symbol&&u===h.coinB.symbol||e===h.coinB.symbol&&u===h.coinA.symbol);return b&&b[0]||null}const ts=Ue({components:{Modal:eo},props:{fromCoin:{type:Object,required:!0},toCoin:{type:Object,required:!0},fromCoinAmount:{type:String,required:!0},toCoinAmount:{type:String,required:!0},impact:{type:Number,required:!0},fee:{type:String,required:!0},fixedFromCoin:{type:Boolean,required:!0},formatFee:{type:String,default:""}},emits:["to-swap","on-close"],setup(e,u){const{t:b,locale:h}=Po(),I=ke(),P=No();A(()=>P);const v=A(()=>{const N=as(e.fromCoin.symbol,e.toCoin.symbol);return Ve(Ao(e.fromCoinAmount).mul(Ao(N.fee).div(100)).toString(),e.fromCoin.decimals)}),j=p(I.slippage||.5),O=p(!0),X=p(!1);function _(N){O.value=N}const Q=async()=>{u.emit("to-swap")},z=$e(),T=A(()=>z),K=A(()=>T.value.tokensObj&&e.fromCoin.address&&T.value.tokensObj[e.fromCoin.address]&&T.value.tokensObj[e.fromCoin.address].logoURI),oe=A(()=>T.value.tokensObj&&e.toCoin.address&&T.value.tokensObj[e.toCoin.address]&&T.value.tokensObj[e.toCoin.address].logoURI),k=ke(),f=A(()=>k);return{fromCoinUrl:K,toCoinUrl:oe,t:b,importIcon:ie,fixD:ve,decimalFormat:Ve,direct:O,changeDirect:_,rateChange:X,clickNextBtn:Q,slippage:j,liquidityProviderFee:v,getCoinIcon:N=>{var G;return(N==null?void 0:N.logoURI)||(N==null?void 0:N.logo_url)||((G=T.value.tokensObj[N==null?void 0:N.address])==null?void 0:G.logo_url)||(f.value.theme==="default"?ie("/image/coins/unknown.png"):ie("/image/coins/sui-unknown.png"))},addCommom:E,sFixD:Y}}});const qe=e=>(Te("data-v-39c58222"),e=e(),Ne(),e),is=qe(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ls={class:"swap-confirm-container"},us={class:"card-content"},rs={class:"top"},ds={class:"coin"},cs=["src"],ms=qe(()=>o("div",{class:"svg-box"},[o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-swap2"})])],-1)),vs={class:"coin"},ps=["src"],fs={class:"bottom"},gs={class:"induction"},Cs={class:"item"},hs={class:"induction-text"},bs={class:"induction-value induction-value-change"},ws={key:0},ys={key:1},As=qe(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Ss=[As],ks={class:"item"},$s={class:"induction-text"},Is={class:"induction-value"},Ts={class:"item"},Ns={class:"induction-text"},_s={class:"induction-value"},Bs={key:0,class:"item"},Fs={class:"induction-text"},Os={key:0,class:"icon","aria-hidden":"true"},Ps=qe(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),Us=[Ps],Rs={key:1,class:"item"},Ds={class:"induction-text"},Ls={key:0,class:"induction-value"},js={key:1,class:"induction-value"};function Ms(e,u,b,h,I,P){const v=no,j=oo("Modal");return a(),W(j,{width:"440px",visible:!0,footer:null,title:e.$t("modal.swapConfirmTitle"),class:"swap-confirm-modal",onCancel:u[2]||(u[2]=O=>e.$emit("on-close"))},{closeIcon:se(()=>[is]),default:se(()=>[o("div",ls,[o("div",us,[o("div",rs,[o("div",ds,[o("img",{src:e.fromCoinUrl||e.getCoinIcon(e.fromCoin)},null,8,cs),o("p",null,s(e.fromCoinAmount),1),J("    "),o("p",null,s(e.fromCoin.symbol),1)]),ms,o("div",vs,[o("img",{src:e.toCoinUrl||e.getCoinIcon(e.toCoin)},null,8,ps),o("p",null,s(e.toCoinAmount),1),J("    "),o("p",null,s(e.toCoin.symbol),1)])]),o("div",fs,[o("div",gs,[o("div",Cs,[o("div",hs,s(e.$t("common.rate")),1),o("div",bs,[e.rateChange?(a(),g("span",ys," 1 "+s(e.toCoin.symbol)+" ≈ "+s(("addCommom"in e?e.addCommom:L(E))(("sFixD"in e?e.sFixD:L(Y))(Number(e.fromCoinAmount)/Number(e.toCoinAmount),e.toCoin.decimals)))+" "+s(e.fromCoin.symbol),1)):(a(),g("span",ws," 1 "+s(e.fromCoin.symbol)+" ≈ "+s(("addCommom"in e?e.addCommom:L(E))(("sFixD"in e?e.sFixD:L(Y))(Number(e.toCoinAmount)/Number(e.fromCoinAmount),e.toCoin.decimals)))+" "+s(e.toCoin.symbol),1)),(a(),g("svg",{class:"icon-change","aria-hidden":"true",onClick:u[0]||(u[0]=O=>e.rateChange=!e.rateChange)},Ss))])]),o("div",ks,[o("div",$s,s(e.$t("modal.slippageTolerance")),1),o("div",Is,s(e.slippage)+"%",1)]),o("div",Ts,[o("div",Ns,s(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",_s,s(e.fixedFromCoin?("addCommom"in e?e.addCommom:L(E))(("sFixD"in e?e.sFixD:L(Y))(e.toCoinAmount-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals)):("addCommom"in e?e.addCommom:L(E))(("sFixD"in e?e.sFixD:L(Y))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals)))+" "+s(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),e.chainName=="Sui"?(a(),g("div",Bs,[o("div",Fs,s(e.$t("common.priceImpact")),1),o("div",{class:re(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>1?"impact-w":"impact-e"])},[J(s(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(a(),g("svg",Os,Us)):F("",!0)],2)])):F("",!0),e.fee?(a(),g("div",Rs,[o("div",Ds,s(e.$t("common.fee")),1),e.chainName=="Aptos"?(a(),g("div",Ls,s(e.formatFee)+" "+s(e.fromCoin.symbol)+" ("+s(e.fee*100)+"%) ",1)):(a(),g("div",js,s(e.fee),1))])):F("",!0)])])])]),me(v,{class:"big-btn swap-confirm-btn",onClick:u[1]||(u[1]=O=>e.clickNextBtn())},{default:se(()=>[J(s(e.$t("button.confirmSwap")),1)]),_:1})]),_:1},8,["title"])}const Es=Ie(ts,[["render",Ms],["__scopeId","data-v-39c58222"]]);async function qs(e){const{prices:u}=await $fetch(`https://api.coingecko.com/api/v3/coins/${e}/market_chart?vs_currency=usd&id=${e}&days=1&interval=hourly`,{headers:{Connection:"keep-alive",Accept:"*/*"}});return u}const Ws={props:{coin:{type:Object,default:()=>({})},refresh:{type:Boolean,default:!1},id:{type:String,default:""}},setup(e,u){const{$echarts:b}=cn();let h=null,I;const P=p(!0),v=(t,r,U)=>{I={xAxis:{type:"category",boundaryGap:!1,show:!1,data:r},yAxis:{type:"value",show:!1,min:function(B){return B.min-B.min*.1},max:function(B){return B.max+B.max*.1}},grid:{top:1,right:1,bottom:1,left:1},tooltip:{trigger:"axis",borderWidth:0,padding:0,backgroundColor:"transparent",axisPointer:{lineStyle:{color:T.value.chainName=="Aptos"?"#68FFD8":"#76C8FF"}},formatter:function(B){return`<div class="chart-tip">
              <div>${B&&B[0]&&B[0].name}</div>
              <div>$${ve(B&&B[0]&&B[0].value,4)}</div>
            </chart-tip>`}},color:{type:"linear",x:0,y:0,x2:0,y2:1,colorStops:[{offset:0,color:T.value.chainName=="Aptos"?"#0C4535":"#2E546D"},{offset:1,color:T.value.chainName=="Aptos"?"#151817":"#1B1B1B"}]},series:[{data:t,type:"line",showSymbol:!1,areaStyle:{},lineStyle:{color:T.value.chainName=="Aptos"?"#68FFD8":"#76C8FF",width:2,type:"solid"}}]},I&&h.clear(),I&&h.setOption(I,!0),h.resize(),P.value=!1},j=$e(),O=A(()=>j),X=p(""),_=p(""),Q=async t=>{var x,ge;const r=[],U=[],B=await qs(t);X.value=B&&B.length>1&&(B[B.length-1][1]-B[0][1])/B[0][1]*100,_.value=B&&B.length>1&&B[B.length-1][1],B.forEach(M=>{r.push(M[1]);const H=So(M[0],"MD"),i=So(M[0],"HM");U.push(H+" "+i)});let ye=document.getElementById(`main${(x=e.coin)==null?void 0:x.name}`);h=b.init(ye),v(r,U,(ge=e.coin)==null?void 0:ge.name)},z=ke(),T=A(()=>z),K=A(()=>T.value.chainName),oe=A(()=>Ee[K.value]);Z(()=>e.id,(t,r)=>{console.log(t,r,"===>oldValue"),console.log(!P.value,"!isFirst.value"),t&&(X.value="",_.value="",setTimeout(()=>{Q(t)},1e3))},{immediate:!0});const k=p(""),f=p(""),le=p(""),N=p("");Z(()=>[O.value.tokensObj,e.coin],([t,r])=>{var U,B;t&&r&&t[r.address]&&(console.log(t[r.address],"===>newValue[coin.address]"),f.value=((U=t[r.address])==null?void 0:U.labels)&&((B=t[r.address])==null?void 0:B.labels[0]),k.value=t[r.address].name,le.value=t[r.address].symbol,N.value=t[r.address].address)},{immediate:!0,deep:!0}),Z(()=>e.refresh,t=>{t&&Q(e.id)});const G=A(()=>T.value.theme);return console.log(e.coin.address=="0x2::sui::SUI","0x2::sui::SUI"),{theme:G,store:z,importIcon:ie,fixD:ve,config:oe,price_rate_24h:X,nowPrice:_,coinName:k,coinLabels:f,coinSymbol:le,address:N}}};const Xs=e=>(Te("data-v-079780ad"),e=e(),Ne(),e),Qs={class:"token-info"},Hs={class:"token-info-padding"},zs={class:"token-info-header"},Js={class:"left"},Ks=["src","onerror"],Zs={class:"name"},Ys={class:"desc"},Gs={class:"right"},Vs={class:"price"},xs={class:"token-info-footer"},ea={class:"left"},oa={class:"address"},na={key:0,class:"pc-address"},sa={key:1,class:"pc-address"},aa={class:"h5-address"},ta=Xs(()=>o("use",{"xlink:href":"#icon-icon-copy"},null,-1)),ia=[ta],la={class:"right"},ua=["id"];function ra(e,u,b,h,I,P){var v;return a(),g("div",Qs,[o("div",Hs,[o("div",zs,[o("div",Js,[o("img",{src:b.coin.logoURI||h.importIcon(`/image/coins/${b.coin.symbol.toLowerCase()}.png`),onerror:h.theme=="default"?h.importIcon("/image/coins/unknown.png"):h.importIcon("/image/coins/sui-unknown.png")},null,8,Ks),o("div",null,[o("div",Zs,s(h.coinSymbol),1),o("div",Ys,[o("span",null,s(h.coinName)+" "+s(h.coinLabels?`(${h.coinLabels})`:""),1)])])]),o("div",Gs,[o("div",Vs,"$"+s(h.fixD(h.nowPrice,2)),1),h.price_rate_24h?(a(),g("div",{key:0,class:re(h.price_rate_24h>0?"increase up":h.price_rate_24h<0?"increase down":"increase up")},s(h.price_rate_24h>0?`+ ${h.fixD(h.price_rate_24h,2)}`:h.price_rate_24h<0?+`${h.fixD(h.price_rate_24h,2)}`:`+${h.fixD(h.price_rate_24h,2)}`)+"% ",3)):F("",!0)])]),o("div",xs,[o("div",ea,[o("div",oa,[b.coin&&h.address!=="0x2::sui::SUI"?(a(),g("span",na,s(b.coin&&b.coin.address.substr(0,13))+" ... "+s(b.coin&&b.coin.address.substr(b.coin.address.length-13,13)),1)):(a(),g("span",sa,s(b.coin&&b.coin.address),1)),o("span",aa,s(b.coin&&b.coin.address.substr(0,4))+" ... "+s(b.coin&&b.coin.address.substr(b.coin.address.length-4,4)),1),(a(),g("svg",{class:"icon","aria-hidden":"true",onClick:u[0]||(u[0]=j=>h.store.copy(b.coin&&b.coin.address))},ia))])]),o("div",la,[o("div",{id:`main${(v=b.coin)==null?void 0:v.name}`,class:"main"},null,8,ua)])])])])}const da=Ie(Ws,[["render",ra],["__scopeId","data-v-079780ad"]]);const ca=Ue({components:{Modal:eo},props:{routertotalPercents:{type:Array,default:()=>[]},routerPool:{type:Array,default:()=>[]},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},routerTotalAmounts:{type:String,default:""}},setup(e){const u=$e(),b=A(()=>u),h=p([]);return Z(()=>[e.routerPool,b.value.poolConfigObj,e.routerTotalAmounts,e.fromCoin,e.toCoin],([I,P,v,j,O])=>{if(console.log(e,"props=====>100"),I&&I.length>0&&P&&!be(P)&&v){const X=[];I.forEach(_=>{console.log(v,"===>routerTotalAmounts"),console.log(_,"ele.amountIn===>");const Q="100",z=_.amountIn.toString(),T=Ce(_.amountOut.toString(),O.decimals),K=_.poolAddress.map((oe,k)=>{const f=P&&P[oe];return console.log(_,"ele===>118"),{...f}});X.push({percent:Q,..._,amountIn:z,amountOut:T,poolAddress:K})}),console.log(X,"result===>"),h.value=X}},{immediate:!0}),A(()=>{var I,P;return(P=(I=b.value)==null?void 0:I.poolInfo)==null?void 0:P.needReverse}),{addCommom:E,routerStep:h}}}),We=e=>(Te("data-v-a3281978"),e=e(),Ne(),e),ma=We(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),va={class:"route-top"},pa={class:"token-a"},fa=["src"],ga={class:"token-num"},Ca={class:"token-symbol"},ha={class:"token-b"},ba={class:"token-num"},wa={class:"token-symbol"},ya=["src"],Aa={class:"route-bottom"},Sa=We(()=>o("div",{class:"left-round"},null,-1)),ka=We(()=>o("div",{class:"right-round"},null,-1)),$a={class:"percent"},Ia={class:"pool-info"},Ta=["src"],Na=["src"],_a={key:0,class:"icon","aria-hidden":"true"},Ba=We(()=>o("use",{"xlink:href":"#icon-icon_on1"},null,-1)),Fa=[Ba];function Oa(e,u,b,h,I,P){const v=oo("Modal");return a(),W(v,{title:"Route",width:"600px",visible:!0,footer:null,onCancel:u[0]||(u[0]=j=>e.$emit("onClose"))},{closeIcon:se(()=>[ma]),default:se(()=>{var j,O,X,_;return[o("div",va,[o("div",pa,[o("img",{src:(j=e.fromCoin)==null?void 0:j.logo_url,alt:""},null,8,fa),o("span",ga,s(("addCommom"in e?e.addCommom:L(E))(e.fromCoinAmount)),1),o("span",Ca,s((O=e.fromCoin)==null?void 0:O.symbol),1)]),o("div",ha,[o("span",ba,s(("addCommom"in e?e.addCommom:L(E))(e.toCoinAmount)),1),o("span",wa,s((X=e.toCoin)==null?void 0:X.symbol),1),o("img",{src:(_=e.toCoin)==null?void 0:_.logo_url,alt:""},null,8,ya)])]),o("div",Aa,[Sa,ka,(a(!0),g(xe,null,ko(e.routerStep,(Q,z)=>(a(),g("div",{key:Q,class:re(["route-path",z!==0?"route-path-active":""])},[o("div",$a,[o("span",null,s(Q.percent)+"%",1),o("span",null,s(("addCommom"in e?e.addCommom:L(E))(Q.amountOut))+" "+s(e.toCoin.symbol),1)]),(a(!0),g(xe,null,ko(Q.poolAddress,(T,K)=>(a(),g("div",{key:K,class:"pool-info-box"},[o("div",Ia,[o("img",{class:"token-a-img",src:T.needReverse?T.coinB.logo_url:T.coinA.logo_url,alt:""},null,8,Ta),o("img",{class:"token-b-img",src:T.needReverse?T.coinA.logo_url:T.coinB.logo_url,alt:""},null,8,Na),o("span",null,s(T.fee*100)+"%",1)]),K!==Q.poolAddress.length-1?(a(),g("svg",_a,Fa)):F("",!0)]))),128))],2))),128))])]}),_:1})}const Pa=Ie(ca,[["render",Oa],["__scopeId","data-v-a3281978"]]),Ua=Ue({components:{Modal:eo},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"998041.711793"},slippage:{type:String,default:""},impact:{type:Number,required:!0},fixedFromCoin:{type:Boolean,default:!1},fee:{type:String,required:!0},formatFee:{type:String,default:""},isShowAccept:{type:Boolean,default:!1},swapLoading:{type:Boolean,required:!0},oneFromAmount:{type:String,default:""},oneToAmount:{type:String,default:""}},setup(e,u){const b=$e(),h=A(()=>b),I=ke(),P=A(()=>I),v=_=>{var Q;return(_==null?void 0:_.logoURI)||(_==null?void 0:_.logo_url)||((Q=h.value.tokensObj[_==null?void 0:_.address])==null?void 0:Q.logo_url)||(P.value.theme==="default"?ie("/image/coins/unknown.png"):ie("/image/coins/sui-unknown.png"))},j=p(!1),O=A(()=>P.value.chainName),X=async()=>{u.emit("to-swap")};return console.log(e.swapLoading,"swapLoading===>"),{getCoinIcon:v,addCommom:E,sFixD:Y,rateChange:j,chainName:O,clickNextBtn:X}}});const pe=e=>(Te("data-v-521d63d0"),e=e(),Ne(),e),Ra=pe(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Da={class:"new-swap-contnet"},La={class:"coin-info"},ja={class:"from-coin-info"},Ma={class:"left"},Ea={class:"coin-amount"},qa={class:"coin-symbol"},Wa={class:"right"},Xa=["src"],Qa={class:"to-coin-info"},Ha={class:"left"},za={class:"coin-amount"},Ja={class:"coin-symbol"},Ka={class:"right"},Za=["src"],Ya=pe(()=>o("div",{class:"to-swap-logo"},null,-1)),Ga={class:"coin-rate"},Va={key:0},xa={class:"left"},et=["src"],ot=["src"],nt=pe(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),st=pe(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),at=[nt,st],tt={key:1},it={class:"left"},lt=["src"],ut=["src"],rt=pe(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),dt=pe(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ct=[rt,dt],mt={class:"bottom"},vt={class:"induction"},pt={class:"item"},ft={class:"induction-text"},gt={class:"induction-value"},Ct={class:"item"},ht={class:"induction-text"},bt={class:"induction-value"},wt={key:0,class:"item"},yt={class:"induction-text"},At={key:0,class:"icon","aria-hidden":"true"},St=pe(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),kt=[St],$t={key:1,class:"item"},It={class:"induction-text"},Tt={key:0,class:"induction-value"},Nt={key:1,class:"induction-value"},_t={key:0,class:"price-updated"},Bt=pe(()=>o("span",null,"Price updated",-1));function Ft(e,u,b,h,I,P){const v=no,j=oo("Modal");return a(),W(j,{width:"440px",visible:!0,footer:null,title:e.$t("button.swap"),class:"add-liquidity-modal",onCancel:u[4]||(u[4]=O=>e.$emit("on-close"))},{closeIcon:se(()=>[Ra]),default:se(()=>[o("div",Da,[o("div",La,[o("div",ja,[o("div",Ma,[o("div",Ea,s(e.fromCoinAmount&&("addCommom"in e?e.addCommom:L(E))(e.fromCoinAmount)),1),o("div",qa,s(e.fromCoin&&e.fromCoin.symbol),1)]),o("div",Wa,[o("img",{src:e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)},null,8,Xa)])]),o("div",Qa,[o("div",Ha,[o("div",za,s(e.toCoinAmount&&("addCommom"in e?e.addCommom:L(E))(e.toCoinAmount)),1),o("div",Ja,s(e.toCoin&&e.toCoin.symbol),1)]),o("div",Ka,[o("img",{src:e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)},null,8,Za)]),Ya]),o("div",Ga,[e.rateChange?(a(),g("div",tt,[o("div",it,[o("img",{src:e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)},null,8,lt),o("span",null,"1 "+s(e.toCoin&&e.toCoin.symbol)+" ≈",1),o("img",{src:e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)},null,8,ut),o("span",null,s(e.oneFromAmount)+" "+s(e.fromCoin.symbol),1)]),o("div",{class:"right",onClick:u[1]||(u[1]=O=>e.rateChange=!e.rateChange)},ct)])):(a(),g("div",Va,[o("div",xa,[o("img",{src:e.fromCoin&&e.fromCoin.logoURI||e.getCoinIcon(e.fromCoin)},null,8,et),o("span",null,"1 "+s(e.fromCoin&&e.fromCoin.symbol)+" ≈",1),o("img",{src:e.toCoin&&e.toCoin.logoURI||e.getCoinIcon(e.toCoin)},null,8,ot),o("span",null,s(e.oneToAmount)+" "+s(e.toCoin.symbol),1)]),o("div",{class:"right",onClick:u[0]||(u[0]=O=>e.rateChange=!e.rateChange)},at)]))])]),o("div",mt,[o("div",vt,[o("div",pt,[o("div",ft,s(e.$t("modal.slippageTolerance")),1),o("div",gt,s(e.slippage)+"%",1)]),o("div",Ct,[o("div",ht,s(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),o("div",bt,s(e.fixedFromCoin?("addCommom"in e?e.addCommom:L(E))(("sFixD"in e?e.sFixD:L(Y))(e.toCoinAmount-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals)):("addCommom"in e?e.addCommom:L(E))(("sFixD"in e?e.sFixD:L(Y))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals)))+" "+s(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1)]),e.chainName=="Sui"?(a(),g("div",wt,[o("div",yt,s(e.$t("common.priceImpact")),1),o("div",{class:re(["induction-value",e.impact<1?"impact-s":e.impact<10&&e.impact>1?"impact-w":"impact-e"])},[J(s(e.impact<.01?"<0.01":e.impact>100?"100":e.impact)+"% ",1),e.impact>=10?(a(),g("svg",At,kt)):F("",!0)],2)])):F("",!0),e.fee?(a(),g("div",$t,[o("div",It,s(e.$t("common.fee")),1),e.chainName=="Aptos"?(a(),g("div",Tt,s(e.formatFee)+" "+s(e.fromCoin.symbol)+" ("+s(e.fee*100)+"%) ",1)):(a(),g("div",Nt,s(e.fee),1))])):F("",!0)])])]),e.isShowAccept?(a(),g("div",_t,[Bt,me(v,{class:"accept-btn",loading:e.swapLoading,onClick:u[2]||(u[2]=O=>e.$emit("accept"))},{default:se(()=>[J("Accept")]),_:1},8,["loading"])])):(a(),W(v,{key:1,class:"big-btn swap-confirm-btn",onClick:u[3]||(u[3]=O=>e.clickNextBtn())},{default:se(()=>[J(s(e.$t("button.confirmSwap")),1)]),_:1}))]),_:1},8,["title"])}const Ot=Ie(Ua,[["render",Ft],["__scopeId","data-v-521d63d0"]]),Pt=Ue({setup(){const e=$o(),u=_o(Bo,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),{t:b,locale:h}=Po(),I=ke(),P=$e(),v=A(()=>P);let j=p(!1),O=p(!1),X=p(!1),_=p(!1),Q=p(!1),z=p(!1);const T=p("fromCoin"),K=p(""),oe=p(""),k=p(!1),f=p(!0),le=p(!1),N=p(!1),G=p(!1),t=p(""),r=p(""),U=p(20),B=p(0),ye=p(null),x=p(!1),ge=A(()=>I.slippage),M=A(()=>I.chainName),H=A(()=>M.value?To(M.value):{}),i=p(),c=p(),Xe=A(()=>Ee&&Ee[M.value]&&Ee[M.value].hasRouter),so=A(()=>P.getPoolInfoSuccess),Uo=A(()=>{var n;return $.value&&((n=$.value)!=null&&n.is_pause)?"Pool Closed":!i.value||!c.value?b("modal.selectTokenModalTitle"):!Xe.value&&!$.value&&so.value?"Pool Not Found":Xe.value&&Fe.value?"No Available Route":(console.log(x.value,"===>insufficientLiquidity.value"),x.value?b("button.insufficientLiquidity"):!Number(t.value)&&!Number(r.value)?b("button.enterAmount"):Number(t.value)>Number(ne.value)?b("button.insufficientBalance",{name:i.value.symbol}):b("button.swap"))}),Ro=n=>{var d,l,C,w;T.value=n,n==="fromCoin"?(K.value=((d=c.value)==null?void 0:d.address)||"",oe.value=((l=i.value)==null?void 0:l.address)||""):(K.value=((C=i.value)==null?void 0:C.address)||"",oe.value=((w=c.value)==null?void 0:w.address)||""),k.value=!0},Qe=p({}),He=p({}),Do=n=>{T.value==="fromCoin"?(Qe.value=n,Je(n)):(He.value=n,Je(n))},Lo=n=>{n==="fromCoin"?(f.value=!0,M.value==="Aptos"?t.value=ne.value>0?i.value.symbol=="APT"?new m(Number(ne.value)).sub(new m(.1)).lt(new m(0))?"0":new m(Number(ne.value)).sub(new m(.1)).toString():String(ne.value):"":t.value=ne.value>0?i.value.symbol=="SUI"?new m(Number(ne.value)).sub(new m(.05)).lt(new m(0))?"0":new m(Number(ne.value)).sub(new m(.05)).toString():String(ne.value):""):(f.value=!1,M.value==="Aptos"?r.value=te.value>0?c.value.symbol=="APT"?new m(Number(te.value)).sub(new m(.1)).lt(new m(0))?"0":new m(Number(te.value)).sub(new m(.1)).toString():String(te.value):"":r.value=te.value>0?c.value.symbol=="SUI"?new m(Number(te.value)).sub(new m(.05)).lt(new m(0))?"0":new m(Number(te.value)).sub(new m(.05)).toString():String(te.value):"")},jo=n=>{n==="fromCoin"?(f.value=!0,t.value=ne.value>0?Y(new m(Number(ne.value)).div(2).toString(),i.value.decimals).toString():""):(f.value=!1,r.value=te.value>0?Y(new m(Number(te.value)).div(2).toString(),c.value.decimals).toString():"")};mn(()=>{to()}),vn(()=>{clearInterval(ye.value)});const ze=A(()=>I),ao=()=>{!$.value&&!Xe.value||(clearInterval(ye.value),P.setPoolConfigList(ze.value.chainName,ze.value.filterCoinsObj),B.value=0,O.value=!0,$.value&&P.updateCurrentPools($.value.poolAddress,M.value),Se(f.value?t.value:r.value),I.getStatsData(M.value,ze.value.filterCoinsObj),setTimeout(()=>{O.value=!1,to()},1e3))},to=()=>{ye.value=setInterval(()=>{O.value=!1,le.value||B.value<U.value&&(B.value+=1,B.value===U.value&&(M.value=="Aptos"?$.value&&$.value.poolAddress&&P.updateCurrentPools($.value.poolAddress,M.value):z.value||ao(),B.value=0,O.value=!0))},1e3)};Z(f,Me((n,d)=>{f.value=n},500));const Ae=p(!1);Z(t,Me((n,d)=>{n&&n!==0&&f.value&&Se(n),n==""&&f.value&&(r.value="")},500)),Z(r,Me((n,d)=>{n&&n!==0&&!f.value&&Se(n),n==""&&!f.value&&(t.value="")},500));const de=p(1e-4),io=async n=>{let d=n;if(console.log(d,"poolInfo====>"),M.value==="Aptos"&&!d.current_sqrt_price&&t.value&&r.value){const l=await H.value.getPools([d.address]);l&&l[0]&&(d={...n,...l[0],fee:Number(l[0].fee_rate)/1e6})}if(d.current_sqrt_price&&t.value&&r.value){const C=(i.value.address===d.coinA.address&&c.value.address===d.coinB.address?0:1)==0,w=new m(t.value),y=new m(r.value),R=w.sub(w.mul(new m(d.fee)));console.log("getImpact###poolInfo.fee####",d.fee),console.log("getImpact###fAmount####",w.toString()),console.log("getImpact###tAmount####",y.toString()),console.log("getImpact###f####",R.toString());const q=y.div(R);console.log("getImpact####rates####",q.toString());const S=H.value.getPriceImpactPct(d,q.toString(),C);return console.log(S,"t===>"),S}return"--"},lo=p(0),uo=p(0),Mo=p(),ae=p({}),Eo=async n=>{if($.value&&(console.log(Number(t.value)==0,"===>Number(fromCoinAmount.value)==0"),!(f.value&&Number(t.value)==0)&&!(!f.value&&Number(r.value)==0)))if(i.value&&c.value&&(t.value||r.value)){N.value=!0,G.value=!0,x.value=!1;const d=i.value.address===$.value.coinA.address&&c.value.address===$.value.coinB.address?0:1;console.log($.value,"poolInfo=====>451"),console.log(f.value?t.value:r.value,"fixedFromCoin.value ? fromCoinAmount.value : toCoinAmount.value"),console.log(d,"===>direct");try{let l=await H.value.preSwap({pool:$.value,a2b:d==0,byAmountIn:f.value,amount:f.value?t.value:r.value});console.log(l,"preSwapRespreSwapRes"),x.value=l==null?void 0:l.isExceed,Mo.value=l==null?void 0:l.estimatedFeeAmount,f.value?(r.value=l.estimatedAmountOut,Q.value?_e.value=(n/Number(l.estimatedAmountOut)).toString():Be.value=(Number(l.estimatedAmountOut)/n).toString()):(t.value=l.estimatedAmountIn,Q.value?_e.value=(Number(l.estimatedAmountIn)/n).toString():Be.value=(n/Number(l.estimatedAmountIn)).toString()),lo.value=new m(r.value).div(t.value).toString(),uo.value=new m(t.value).div(r.value).toString(),console.log("0524###getAmount###toAddLiquidiPoolInfo.value ###",ae.value),console.log("0524###getAmount###poolInfo.value ###",$.value),de.value=M.value=="Aptos"?await io($.value):await io(ae.value||$.value),N.value=!1,G.value=!1}catch(l){console.log("pre swap error",l),N.value=!1,G.value=!1}}else f.value?r.value="":t.value="",N.value=!1,G.value=!1},qo=No(),ue=A(()=>qo),Wo=p({}),_e=p(""),Be=p(""),ne=A(()=>ue.value.assets&&i.value&&ue.value.assets[i.value.address]?Ce(ue.value.assets[i.value.address].balance,i.value.decimals):0),te=A(()=>ue.value.assets&&c.value&&ue.value.assets[c.value.address]?Ce(ue.value.assets[c.value.address].balance,c.value.decimals):0),Xo=$o();Z(()=>v.value.tokensObj,async n=>{if(!be(n)){console.log(n,"===>newValue626"),console.log(Xo,"===>route625");const d=e?e.currentRoute.value.query.to:"",l=e?e.currentRoute.value.query.from:"";l?i.value=await H.value.getTokenBySymbol(n,l):!l&&!i.value&&(i.value=await H.value.getTokenBySymbol(n,I.chainName==="Aptos"?"0x3cfe7b9f6106808a8178ebd2d5ae6656cd0ccec15d33e63fd857c180bde8da75::coin::CetusUSDC":"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::usdc::USDC"),console.log(i.value,"===>fromCoin.value")),d?c.value=await H.value.getTokenBySymbol(n,d):!d&&!c.value&&(c.value=await H.value.getTokenBySymbol(n,I.chainName==="Aptos"?"0x1::aptos_coin::AptosCoin":"0x26b3bc67befc214058ca78ea9a2690298d731a2d4309485ec3d40198063c4abc::usdt::USDT")),!l&&d&&(i.value="")}},{immediate:!0});const $=A(()=>{var n,d,l,C,w;if(i.value&&c.value){let y=null,R={};if(console.log(c.value.address,"===>toCoin.value.address930"),Object.values(v.value.poolConfigList).forEach(S=>{var D,V,ee,ce;(S.coinA.address.toUpperCase()===((D=i.value.address)==null?void 0:D.toUpperCase())&&S.coinB.address.toUpperCase()===((V=c.value.address)==null?void 0:V.toUpperCase())||S.coinB.address.toUpperCase()===((ee=i.value.address)==null?void 0:ee.toUpperCase())&&S.coinA.address.toUpperCase()===((ce=c.value.address)==null?void 0:ce.toUpperCase()))&&(console.log(S,"p===>"),R[S.address]={...S})}),M.value=="Aptos"&&v.value.poolsObj&&!be(v.value.poolsObj))for(const S in v.value.poolsObj){const D=v.value.poolsObj[S];(D.token_a.address.toUpperCase()===((n=i.value.address)==null?void 0:n.toUpperCase())&&D.token_b.address.toUpperCase()===((d=c.value.address)==null?void 0:d.toUpperCase())||D.token_b.address.toUpperCase()===((l=i.value.address)==null?void 0:l.toUpperCase())&&D.token_a.address.toUpperCase()===((C=c.value.address)==null?void 0:C.toUpperCase()))&&(R[D.address]={...D})}console.log(R,"===>currentPoolsObj");const q=Object.values(R).sort((S,D)=>S.fee-D.fee);console.log("0507####swap###poolInfo###poolSortList###",q);for(let S=0;S<q.length;S++)if(!((w=q[S])!=null&&w.is_pause)){y=q[S];break}return y=Object.values(R).sort((S,D)=>S.fee-D.fee)[0],console.log(R,"currentPoolsObj===>"),console.log("0507####swap###poolInfo###info###",y),y&&!be(y)?y:null}return null}),ro=p(!0),co=p(!1),Qo=async n=>{n&&M.value=="Aptos"&&(Se(f.value?t.value:r.value),co.value=!0,n.coinA.symbol.toLowerCase()===i.value.symbol.toLowerCase()&&n.coinB.symbol.toLowerCase()===c.value.symbol.toLowerCase()?ro.value=!0:ro.value=!1,x.value=!1)};Z(()=>$.value,(n,d)=>{n&&(!d||n.address!==d.address||n.current_sqrt_price!==d.current_sqrt_price)&&Qo(n)},{immediate:!0,deep:!0});const Ho=A(()=>v.value.tokensObj&&i.value&&i.value.address&&v.value.tokensObj[i.value.address]&&v.value.tokensObj[i.value.address].logoURI),zo=A(()=>(console.log(v.value.tokensObj,"===>pools.value.tokensObj"),v.value.tokensObj&&c.value&&c.value.address&&v.value.tokensObj[c.value.address]&&v.value.tokensObj[c.value.address].logoURI)),Jo=A(()=>v.value.tokensObj&&i.value&&i.value.address&&v.value.tokensObj[i.value.address]&&v.value.tokensObj[i.value.address].coingecko_id||null),Ko=A(()=>v.value.tokensObj&&c.value&&c.value.address&&v.value.tokensObj[c.value.address]&&v.value.tokensObj[c.value.address].coingecko_id||null),Zo=A(()=>{var C,w,y;const n=new m(t.value);console.log(ae.value,"===>toAddLiquidiPoolInfo"),console.log((C=ae==null?void 0:ae.value)==null?void 0:C.fee,"toAddLiquidiPoolInfo?.value?.fee");const d=new m(M.value=="Aptos"?(w=$==null?void 0:$.value)==null?void 0:w.fee:(y=ae==null?void 0:ae.value)==null?void 0:y.fee),l=n.mul(d).toString();return console.log(l,"===>fee"),Number(l)<1/Math.pow(10,i.value.decimals)?`<${new m(1).div(new m(Math.pow(10,i.value.decimals))).toString()}`:Y(l,i.value.decimals)}),{setIsShowSuccess:Yo,setIsShowRejected:mo,setIsShowWaiting:Re,setTransactionDesc:Go,setTransactionTxid:vo}=I,Vo=async()=>{var d,l,C,w,y,R,q,S;z.value=!1,N.value=!0,clearInterval(Pe),window.clearInterval(Pe),vo(""),Go(b("tips.swapping",{from:`${t.value} ${(d=i.value)==null?void 0:d.symbol}`,to:`${r.value} ${(l=c.value)==null?void 0:l.symbol}`})),Re(!0);let n;M.value=="Aptos"&&(n=i.value.address===$.value.token_a.address&&c.value.address===$.value.token_b.address?0:1);try{console.log("0221####swap start####",M.value,"###",H),console.log("0412###toSwap###poolInfo.value###",$.value);let D;M.value=="Aptos"?D=await H.value.getSwapTransactionPayload({pool:$.value,a2b:n==0,byAmountIn:f.value,amount:f.value?t.value:r.value,slippage:Number(ge.value)/100}):(console.log(ae.value,"===>toAddLiquidiPoolInfo.value"),D=await De.value.swapRouterContract.getSwapRouterPayload(f.value,Le.value.createTxParams)),console.log("0221####swap###swapPayload###",D);let V;if(M.value==="Aptos")V=await ue.value.currentWallet.signAndSubmitTransaction(D);else{console.log("0221###swap###sui##signAndExecuteTransaction前###",M.value,"###swapPayload###",D);const ee=await ue.value.currentWallet.signAndExecuteTransactionBlock(D);console.log("0221###sui swap res###",ee),V=H.value.handleTx(ee),console.log("0221###swap###sui##tx###",V)}if(V&&V.hash){vo(V.hash),Re(!1),Yo(!0);const ee={title:b("tips.swap"),desc:b("tips.swapSuccessText",{from:`${t.value} ${(C=i.value)==null?void 0:C.symbol}`,to:`${r.value} ${(w=c.value)==null?void 0:w.symbol}`}),hash:V.hash,tit:"Swap",icon:"icon-icon-swap1",tokenInfo:{tokena:`${(y=i.value)==null?void 0:y.address}`,numa:`- ${t.value}`,logoa:v.value.tokensObj&&i.value&&i.value.address&&v.value.tokensObj[i.value.address]&&v.value.tokensObj[i.value.address].logoURI,tokenb:`${(R=c.value)==null?void 0:R.address}`,numb:`+ ${r.value}`,logob:v.value.tokensObj&&c.value&&c.value.address&&v.value.tokensObj[c.value.address]&&v.value.tokensObj[c.value.address].logoURI},text:`Pay ${t.value} ${(q=i.value)==null?void 0:q.symbol} to receive ${r.value} ${(S=c.value)==null?void 0:S.symbol}`};M.value!=="Aptos"&&(ee.res=V.res),H.value.showTransitionPending(ee);const ce=await H.value.watchTransaction(ee);console.log("0221###swap###transitionStatus####",ce),ce&&setTimeout(()=>{M.value=="Aptos"&&P.updateCurrentPools($.value.poolAddress,M.value),H.value.getAccount(ue.value.address)},1e3)}else Re(!1),mo(!0);t.value="",r.value="",N.value=!1}catch(D){t.value="",r.value="",console.log("Swap Error###",D),N.value=!1,Re(!1),mo(!0)}},xo=n=>{var d;return(n==null?void 0:n.logoURI)||(n==null?void 0:n.logo_url)||((d=v.value.tokensObj[n==null?void 0:n.address])==null?void 0:d.logo_url)||(I.theme==="default"?ie("/image/coins/unknown.png"):ie("/image/coins/sui-unknown.png"))},po=p([]);Z(()=>[i.value,c.value,v.value.poolConfigList],([n,d,l])=>{if(l&&l.length>0&&n&&d){const C=[];l.forEach(w=>{var y,R,q,S;(w.coinA.address.toUpperCase()===((y=n.address)==null?void 0:y.toUpperCase())&&w.coinB.address.toUpperCase()===((R=d.address)==null?void 0:R.toUpperCase())||w.coinB.address.toUpperCase()===((q=n.address)==null?void 0:q.toUpperCase())&&w.coinA.address.toUpperCase()===((S=d.address)==null?void 0:S.toUpperCase()))&&(w!=null&&w.is_pause||C.push(w.address))}),console.log(C,"result===>"),po.value=C}},{immediate:!0});const Je=n=>{console.log(T.value,"===>currentCoinKey.value"),console.log(n);const d=localStorage.getItem(n.address);console.log(v.value.tokensObj,"===>pools.value.tokensObj"),console.log(d,"===>coinLocak"),v.value.tokensObj&&v.value.tokensObj[n.address]&&v.value.tokensObj[n.address].isSelfBuilt&&!d?Ke.value=!0:(T.value==="fromCoin"?(t.value="",c.value&&n.address.toLowerCase()===(c==null?void 0:c.value.address.toLowerCase())&&(c.value=null),i.value=n):(i.value&&(r.value="",n.address.toLowerCase()===(i==null?void 0:i.value.address.toLowerCase())&&(i.value=null)),c.value=n),fo())},Ke=p(!1),fo=()=>{He.value={},Qe.value={},Ke.value=!1},en=A(()=>I.isShowRouterModal),Ze=p([]),Ye=p(""),on=p(!1),go=Cn(),De=A(()=>go),Fe=p(!1),Le=p({}),Ge=p(""),Co=n=>{if(n&&n.paths&&n.paths.length>0){const d=n.paths[0];if(n.coinTypeA&&n.coinTypeB&&n.coinTypeC){const l=v.value.poolConfigObj[d.poolAddress[0]],C=v.value.poolConfigObj[d.poolAddress[1]],w=Ce(n.paths[0].amountIn.toString(),i.value.decimals)*l.fee;let y,R=C.token_a.address==c.value.address?C.token_b.decimals:C.token_a.decimals;f.value?y=Ce(d.rawAmountLimit[0].toString(),R)*C.fee:y=Ce(d.rawAmountLimit[1].toString(),R)*C.fee;let q;console.log(C.token_a.address,c.value.address,"===>toCoin.value.address"),l.token_a.address==i.value.address?q=!1:q=!0;let S;q?S=H.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],l.token_a.decimals,l.token_b.decimals).toString():S=1/H.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],l.token_a.decimals,l.token_b.decimals).toString(),console.log(l,"===>1398 poolA"),console.log(R,"===>1398feeBDecimals"),console.log(q,"a2b1398"),console.log(S,1/S,y,"===>1398");const D=w+y*S;l.fee*100+"",Ge.value=D>0&&D<1e-6?`<0.000001 ${i.value.symbol}`:E(Y(D,i.value.decimals))+` ${i.value.symbol}`}else{const l=v.value.poolConfigObj[d.poolAddress[0]],C=Ce(n.paths[0].amountIn.toString(),i.value.decimals)*l.fee;Ge.value=C>0&&C<1e-6?`<0.000001 ${i.value.symbol} (${l.fee*100}%)`:E(Y(C,i.value.decimals))+` ${i.value.symbol} (${l.fee*100}%)`}}},ho=async n=>{if(console.log(n,"==>swapRouter"),de.value=1e-5,n&&n.paths&&n.paths.length>0){console.log("这里执行了吗1");const d=n.paths[0];if(console.log(n.coinTypeA,"===>swapRouter.coinTypeA"),console.log(i.value.address,"===>fromCoin.value.address"),console.log(n.coinTypeC,"====>toCoin.value.address"),console.log(c.value.address,"===>toCoin.value.address"),n.coinTypeA&&n.coinTypeB&&n.coinTypeC&&n.coinTypeA==i.value.address&&n.coinTypeC==c.value.address){const l=v.value.poolConfigObj[d.poolAddress[0]],C=H.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],l.coinA.decimals,l.coinB.decimals).toNumber(),w=v.value.poolConfigObj[d.poolAddress[1]],y=H.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[1],w.coinA.decimals,w.coinB.decimals).toNumber();console.log(l,"poolA"),console.log(i.value.address,c.value.address,"===>1343"),console.log(l.token_a.address,l.token_b.address,"poolA1465"),console.log(w.token_a.address,w.token_b.address,"poolB1465");let R,q;l.token_a.address==i.value.address?R=!0:R=!1,w.token_b.address==c.value.address?q=!0:q=!1,console.log(R,q,"a2bb2c"),new m(t.value).div(r.value).toNumber();const S=new m(r.value).div(t.value).toNumber();console.log(C,y,"池子A当前价格 池子A交易后价格 池子B当前价格 池子B交易后价格");let D;const V=R?new m(C):new m(1).div(new m(C)),ee=q?new m(y):new m(1).div(new m(y));console.log(V.toString(),ee.toString(),S,"==>currentPriceDirectA");const ce=new m(V.mul(ee)).sub(S).div(new m(V.mul(ee))).mul(new m(100)).toNumber();D=ce,console.log(ce,"==>priceImpact"),D>100&&(console.log("我大于100了"),de.value=100),de.value=Number(ve(Math.abs(D),2))}else if(n&&n.currentSqrtPrice&&n.currentSqrtPrice.length==1&&d&&!be(d)){const l=v.value.poolConfigObj[d.poolAddress[0]],C=H.value.TickMath.sqrtPriceX64ToPrice(n.currentSqrtPrice[0],l.coinA.decimals,l.coinB.decimals).toNumber();let w;l.token_a.address==i.value.address?w=!0:w=!1;const y=w?new m(C):new m(1).div(new m(C)),R=new m(r.value).div(t.value).toNumber(),q=new m(y).sub(R).div(new m(y)).mul(new m(100)).toNumber(),S=q;console.log(q,"==>priceImpact"),S>100&&(console.log("我大于100了"),de.value=100),de.value=Number(ve(Math.abs(S),2)),console.log(q,"这里执行了吗"),console.log(l,"pool===>"),console.log(de.value,"==>impact.value")}}},bo=async n=>{if(i.value&&c.value&&(Number(t.value)>0||Number(r.value)>0)){console.log(new Date().getTime(),"开始计算时间戳"),console.log("执行吧"),(!t.value&&r.value||t.value&&!r.value)&&(N.value=!0),Ae.value=!0,Fe.value=!1,console.log($.value,"==>poolInfo.value.");let d;$.value&&(d=i.value.address===$.value.coinA.address&&c.value.address===$.value.coinB.address?0:1);try{let l;if(f.value){const R=new m(t.value).mul(Math.pow(10,i.value.decimals)).toString();l=new je(R)}else{const R=new m(r.value).mul(Math.pow(10,c.value.decimals)).toString();l=new je(R)}console.log(l.toString(),"====>1498");const C=Number(ge.value)/100;console.log(De.value,"===>swapRouterContract.value");const w=$.value?{poolAddresses:po.value,coinTypeA:$.value.coin_a_address,coinTypeB:$.value.coin_b_address,decimalsA:$.value.coinA.decimals,decimalsB:$.value.coinB.decimals,a2b:d==0,byAmountIn:f.value,amount:f.value?t.value:r.value}:"",y=await De.value.swapRouterContract.getSwapRouter(i,c,l,f.value,C,"",$.value?w:"");console.log(new Date().getTime(),"计算完成时间戳"),console.log(y,"===> swapRouter1454"),y?(Le.value=y,Ze.value=y.paths,x.value=y.isExceed,console.log(y.isExceed,x.value,"===>swapRouter.isExceed"),Ye.value=y.amountIn,Co(y),f.value?t.value&&(r.value=y.amountOut):r.value&&(t.value=y.amountIn),_e.value=E(he(new m(t.value).div(new m(r.value).toString()),i.value.decimals)),Be.value=E(he(new m(r.value).div(t.value).toString(),c.value.decimals)),ho(y),N.value=!1,Fe.value=!1,Ae.value=!1):(N.value=!1,Fe.value=!0,Ae.value=!1)}catch(l){console.log("pre swap error",l),N.value=!1,Ae.value=!1}}else f.value?r.value="":t.value="",N.value=!1,Ae.value=!1;console.log(N.value,"====>routerSwaping")},Oe=p(!1),wo=async n=>{console.log("3s执行一次");try{let d;if(f.value){const w=new m(t.value).mul(Math.pow(10,i.value.decimals)).toString();d=new je(w)}else{const w=new m(r.value).mul(Math.pow(10,c.value.decimals)).toString();d=new je(w)}const l=Number(ge.value)/100,C=await De.value.swapRouterContract.getSwapRouter(i,c,d,f.value,l,"");C&&(Le.value=C,Ze.value=C.paths,x.value=C.isExceed,console.log(C.isExceed,x.value,"===>swapRouter.isExceed"),Ye.value=C.amountIn,Co(C),_e.value=E(he(new m(t.value).div(new m(r.value).toString()),i.value.decimals)),Be.value=E(he(new m(r.value).div(t.value).toString(),c.value.decimals)),ho(C),f.value?r.value!==C.amountOut&&(Oe.value=!0,r.value=C.amountOut):t.value!==C.amountIn&&(Oe.value=!0,t.value=C.amountIn))}catch(d){console.log("pre swap error",d)}};let Pe=p(null);Z(()=>z.value,n=>{n?(console.log("我开启了"),Pe.value=setInterval(()=>{wo(f.value)},3e3)):(console.log("我关闭了"),clearInterval(Pe.value),window.clearInterval(Pe.value))},{immediate:!0});const Se=async n=>{M.value=="Aptos"?Eo(n):(console.log("调用sui"),bo())},nn=A(()=>go),sn=A(()=>nn.value.isInitRouter);Z(()=>sn.value,n=>{n||Se(f.value?t.value:r.value)},{immediate:!0}),Z(()=>[i.value,c.value],([n,d])=>{n&&d&&Se(f.value?t.value:r.value)},{immediate:!0});function an(n,d=500){let l=null;return function(...C){clearTimeout(l),l=setTimeout(()=>{n.call(this,...C)},d)}}const tn=an(yo);function yo(){console.log("====>调用了几次");const n=i.value;i.value=c.value,c.value=n,j.value=!0,f.value=!f.value,f.value?(t.value=r.value,r.value=""):(r.value=t.value,t.value=""),setTimeout(()=>{j.value=!1},300)}return{closeSwapConfirmModal:()=>{z.value=!1,Oe.value=!1},updateAccept:()=>{Oe.value=!1},clickExchange:yo,debounceClickExchange:tn,closeTokenWarning:fo,isShowTokenWarning:Ke,getTokenSource:Je,hasPool:co,getPoolInfoSuccess:so,halfBtnSelect:jo,formCoinId:Jo,toCoinId:Ko,fromCoinUrl:Ho,toCoinUrl:zo,t:b,indicator:u,wallet:ue,currentLpInfo:Wo,fixD:ve,decimalFormat:Ve,impact:de,oneFromAmount:_e,oneToAmount:Be,importIcon:ie,clickRefresh:ao,refresh:O,change:j,isShowAddress:X,isShowSwapSetting:_,fromCoin:i,toCoin:c,slippage:ge,openCoinSelect:Ro,onCoinSelect:Do,existingCoins:K,lastSelectCoin:oe,currentCoinKey:T,showCoinSelect:k,fromCoinAmount:t,toCoinAmount:r,maxBtnSelect:Lo,fixedFromCoin:f,swapBtnText:Uo,toSwap:Vo,loading:le,swaping:N,autoRefreshTime:U,countdown:B,marketTimer:ye,rateChange:Q,isSwapConfirmMpdal:z,fromCoinBlance:ne,toCoinBlance:te,poolInfo:$,chainName:M,swapRouterLoading:Ae,formatFee:Zo,calculating:G,currentRate:lo,currentRateReverse:uo,getCoinIcon:xo,toAddLiquidiPoolInfo:ae,decimalUi:he,warningToCoin:He,warningFromCoin:Qe,isShowRouterModal:en,toSwapLoading:on,insufficientLiquidity:x,routerPool:Ze,routerTotalAmounts:Ye,store:I,suiPreSwapdata:Le,suiSwapFee:Ge,addCommom:E,debounce:Me,notFoundRouter:Fe,getSuiAmountAccept:wo,isShowAccept:Oe,getSuiAmount:bo}}}),Ut="data:image/png;base64,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";const fe=e=>(Te("data-v-0e7db067"),e=e(),Ne(),e),Rt={class:"swap-container"},Dt={class:"title"},Lt={class:"left"},jt={class:"right title-right"},Mt=fe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Et={class:"swap-card"},qt={class:"card-container"},Wt={class:"card-item"},Xt={class:"card-item"},Qt=fe(()=>o("use",{"xlink:href":"#icon-icon-swap1"},null,-1)),Ht=[Qt],zt={key:1,class:"induction"},Jt={key:0,class:"exchange-rate-btn"},Kt={key:0},Zt=["src"],Yt={key:0},Gt=["src"],Vt={key:0},xt={key:1},ei={key:0},oi=["src"],ni=["src"],si=fe(()=>o("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),ai=[si],ti={class:"item"},ii={class:"induction-text"},li={key:0,class:"icon","aria-hidden":"true"},ui=fe(()=>o("use",{"xlink:href":"#icon-icon-warning1"},null,-1)),ri=[ui],di={class:"item"},ci={class:"induction-text"},mi={key:0,class:"induction-value"},vi={class:"item"},pi={class:"induction-text"},fi={key:0,class:"induction-value"},gi={key:0,class:"icon","aria-hidden":"true"},Ci=fe(()=>o("use",{"xlink:href":"#icon-icon-swap"},null,-1)),hi=[Ci],bi={key:3,class:"token-info-container"},wi={class:"token-info-title"},yi=fe(()=>o("span",{class:"coingecko"},"Ref. CoinGecko",-1)),Ai=fe(()=>o("img",{src:Ut,alt:""},null,-1)),Si=fe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-information"})],-1));function ki(e,u,b,h,I,P){var t,r;const v=ln,j=rn,O=ns,X=Fo,_=Oo,Q=no,z=fn,T=dn,K=gn,oe=Es,k=pn,f=da,le=un,N=Pa,G=Ot;return a(),g("div",Rt,[o("div",Dt,[o("div",Lt,s(e.$t("menu.swap")),1),o("div",jt,[o("div",{class:"slippage-icon",onClick:u[0]||(u[0]=U=>e.isShowSwapSetting=!0)},[Mt,o("span",null,s(e.slippage)+"%",1)]),me(v,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])]),o("div",Et,[o("div",qt,[o("div",Wt,[me(j,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":u[1]||(u[1]=U=>e.fromCoinAmount=U),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logo_url:"",address:e.fromCoin?e.fromCoin.address:"","swap-direction":"From",onOnMax:u[2]||(u[2]=U=>e.maxBtnSelect("fromCoin")),onOnHalf:u[3]||(u[3]=U=>e.halfBtnSelect("fromCoin")),onOnInput:u[4]||(u[4]=U=>{e.fromCoinAmount=U,e.fixedFromCoin=!0}),onOnSelect:u[5]||(u[5]=U=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("div",Xt,[me(j,{modelValue:e.toCoinAmount,"onUpdate:modelValue":u[6]||(u[6]=U=>e.toCoinAmount=U),"input-value":e.toCoinAmount,havemax:!1,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direction":"To","coin-icon":e.toCoin?e.toCoin.logo_url:"",address:e.toCoin?e.toCoin.address:"",onOnInput:u[7]||(u[7]=U=>{e.toCoinAmount=U,e.fixedFromCoin=!1}),onOnSelect:u[8]||(u[8]=U=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),o("img",{class:re(e.change?"gang animationex":"gang"),src:hn,alt:""},null,2),o("div",{class:re(["exchange",e.chainName=="Sui"?"sui-exchange":""]),onClick:u[9]||(u[9]=(...U)=>e.debounceClickExchange&&e.debounceClickExchange(...U))},[(a(),g("svg",{class:re(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Ht,2))],2)]),e.chainName=="Sui"&&!e.notFoundRouter?(a(),W(O,{key:0,"swap-loading":e.swaping,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"router-pool":e.routerPool,impact:e.impact,"insufficient-liquidity":e.insufficientLiquidity,"one-to-amount":e.oneToAmount,"one-from-amount":e.oneFromAmount,"sui-pre-swapdata":e.suiPreSwapdata,"sui-swap-fee":e.suiSwapFee,"swap-router-loading":e.swapRouterLoading},null,8,["swap-loading","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","router-pool","impact","insufficient-liquidity","one-to-amount","one-from-amount","sui-pre-swapdata","sui-swap-fee","swap-router-loading"])):e.poolInfo&&e.fromCoinAmount&&e.toCoinAmount&&e.fromCoinAmount!=="0"&&e.toCoinAmount!=="0"&&e.swapBtnText!==e.$t("button.poolNotFound")?(a(),g("div",zt,[Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(a(),g("div",Jt,[e.rateChange?Number(e.fromCoinAmount)&&Number(e.toCoinAmount)&&e.rateChange?(a(),g("span",xt,[Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(a(),g("span",ei,[o("img",{src:e.toCoinUrl||e.getCoinIcon(e.toCoin)},null,8,oi),J(" 1 "+s(e.toCoin.symbol)+" ≈ ",1),o("img",{src:e.fromCoinUrl||e.getCoinIcon(e.fromCoin)},null,8,ni),o("span",null,s(("addCommom"in e?e.addCommom:L(E))(("decimalUi"in e?e.decimalUi:L(he))(e.currentRateReverse,e.fromCoin.decimals),e.fromCoin.decimals)),1),J("  "+s(e.fromCoin.symbol),1)])):(a(),W(X,{key:1,indicator:e.indicator},null,8,["indicator"]))])):F("",!0):(a(),g("span",Kt,[o("img",{src:e.fromCoinUrl||e.getCoinIcon(e.fromCoin)},null,8,Zt),J(" 1 "+s(e.fromCoin.symbol)+" ≈ ",1),Number(e.fromCoinAmount)&&Number(e.toCoinAmount)?(a(),g("span",Yt,[o("img",{src:e.toCoinUrl||e.getCoinIcon(e.toCoin)},null,8,Gt),e.calculating?F("",!0):(a(),g("span",Vt,s(("addCommom"in e?e.addCommom:L(E))(("decimalUi"in e?e.decimalUi:L(he))(e.currentRate,e.toCoin.decimals))),1)),e.calculating?(a(),W(X,{key:1,indicator:e.indicator},null,8,["indicator"])):F("",!0),J("  "+s(e.toCoin.symbol),1)])):(a(),W(X,{key:1,indicator:e.indicator},null,8,["indicator"]))])),(a(),g("svg",{class:"icon-change","aria-hidden":"true",onClick:u[10]||(u[10]=U=>e.rateChange=!e.rateChange)},ai))])):F("",!0),Number(e.fromCoinAmount)>0&&Number(e.toCoinAmount)>0?(a(),g(xe,{key:1},[o("div",ti,[o("div",ii,s(e.$t("common.priceImpact")),1),e.swaping?(a(),W(_,{key:1,paragraph:!1,active:""})):(a(),g("div",{key:0,class:re(["induction-value",Number(e.impact)<1?"impact-s":Number(e.impact)<10&&Number(e.impact)>1?"impact-w":"impact-e"])},[J(s(Number(e.impact)<.01?"<0.01":Number(e.impact)>100?"100":e.impact)+"% ",1),e.impact>=10?(a(),g("svg",li,ri)):F("",!0)],2))]),o("div",di,[o("div",ci,s(e.fixedFromCoin?e.$t("common.minimumReceived"):e.$t("common.maximumSold")),1),e.swaping?(a(),W(_,{key:1,paragraph:!1,active:""})):(a(),g("div",mi,s(e.fixedFromCoin?("addCommom"in e?e.addCommom:L(E))(("fixD"in e?e.fixD:L(ve))(Number(e.toCoinAmount)-Number(e.toCoinAmount)*Number(e.slippage)/100,e.toCoin.decimals),e.toCoin.decimals):("addCommom"in e?e.addCommom:L(E))(("fixD"in e?e.fixD:L(ve))(Number(e.fromCoinAmount)*Number(e.slippage)/100+Number(e.fromCoinAmount),e.fromCoin.decimals),e.fromCoin.decimals))+" "+s(e.fixedFromCoin?e.toCoin.symbol:e.fromCoin.symbol),1))]),o("div",vi,[o("div",pi,s(e.$t("common.fee")),1),e.swaping?(a(),W(_,{key:1,paragraph:!1,active:""})):(a(),g("div",fi,s(("addCommom"in e?e.addCommom:L(E))(e.formatFee,e.fromCoin.decimals))+" "+s(e.fromCoin.symbol)+" ("+s(e.chainName=="Aptos"?e.poolInfo.fee*100:((t=e.toAddLiquidiPoolInfo)==null?void 0:t.fee)*100)+"%) ",1))])],64)):F("",!0)])):F("",!0)]),me(Q,{disabled:e.wallet.connected?e.swaping||!e.fromCoin||!e.toCoin||!Number(e.fromCoinAmount)||!Number(e.toCoinAmount)||Number(e.fromCoinAmount)>Number(e.fromCoinBlance)||e.swapBtnText==e.$t("button.poolNotFound")||e.swapBtnText!==e.$t("button.swap")||((r=e.poolInfo)==null?void 0:r.is_pause)||e.swapRouterLoading:!1,class:"big-btn",loading:e.chainName=="Aptos"?e.swaping:!1,onClick:u[11]||(u[11]=U=>e.wallet.connected?e.isSwapConfirmMpdal=!0:e.wallet.setIsShowWalletModal(!0))},{default:se(()=>[e.wallet.connected?(a(),g("svg",gi,hi)):F("",!0),o("span",null,s(e.wallet.connected?e.swapBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled","loading"]),me(z),e.showCoinSelect?(a(),W(T,{key:0,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:u[12]||(u[12]=U=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):F("",!0),e.isShowSwapSetting?(a(),W(K,{key:1,onOnClose:u[13]||(u[13]=U=>e.isShowSwapSetting=!1)})):F("",!0),e.isSwapConfirmMpdal&&e.chainName=="Aptos"?(a(),W(oe,{key:2,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,impact:e.impact,fee:e.chainName=="Aptos"?e.poolInfo.fee:e.suiSwapFee,"format-fee":e.chainName=="Aptos"?e.formatFee:e.suiSwapFee,onOnClose:u[14]||(u[14]=U=>e.isSwapConfirmMpdal=!1),onToSwap:e.toSwap},null,8,["fixed-from-coin","from-coin","to-coin","from-coin-amount","to-coin-amount","impact","fee","format-fee","onToSwap"])):F("",!0),e.chainName&&(e.formCoinId||e.toCoinId)?(a(),g("div",bi,[o("div",wi,[yi,Ai,me(k,{placement:"top","arrow-point-at-center":""},{title:se(()=>[J(" The following price is only an external reference from CoinGecko, which may not reflect actual data on Cetus. ")]),default:se(()=>[Si]),_:1})]),e.fromCoin&&e.formCoinId?(a(),W(f,{key:0,id:e.formCoinId,coin:e.fromCoin,refresh:e.refresh},null,8,["id","coin","refresh"])):F("",!0),e.toCoin&&e.toCoinId?(a(),W(f,{key:1,id:e.toCoinId,coin:e.toCoin,refresh:e.refresh},null,8,["id","coin","refresh"])):F("",!0)])):F("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(a(),W(le,{key:4,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:e.getTokenSource},null,8,["from-coin","to-coin","onClose","onClickContinue"])):F("",!0),e.isShowRouterModal?(a(),W(N,{key:5,"router-pool":e.routerPool,"routertotal-percents":e.routertotalPercents,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"router-total-amounts":e.routerTotalAmounts,onOnClose:u[15]||(u[15]=U=>e.store.setIsShowRouterModal(!1))},null,8,["router-pool","routertotal-percents","from-coin","to-coin","from-coin-amount","to-coin-amount","router-total-amounts"])):F("",!0),e.isSwapConfirmMpdal&&e.chainName=="Sui"?(a(),W(G,{key:6,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,slippage:e.slippage,impact:e.impact,"fixed-from-coin":e.fixedFromCoin,fee:e.suiSwapFee,"format-fee":e.suiSwapFee,"is-show-accept":e.isShowAccept,"swap-loading":e.swapRouterLoading,"one-from-amount":e.oneFromAmount,"one-to-amount":e.oneToAmount,onOnClose:e.closeSwapConfirmModal,onToSwap:e.toSwap,onAccept:e.updateAccept},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","slippage","impact","fixed-from-coin","fee","format-fee","is-show-accept","swap-loading","one-from-amount","one-to-amount","onOnClose","onToSwap","onAccept"])):F("",!0)])}const Qi=Ie(Pt,[["render",ki],["__scopeId","data-v-0e7db067"]]);export{Qi as default};
