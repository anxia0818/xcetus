import{_ as z}from"./upgrade-loading.a64ef311.js";import{_ as H}from"./upgrade-position-item.ffc561c2.js";import{a as Q,r as S,l as X,b as Y,E as Z,m as u,y as x,M as ee,D as O,T as oe,e as se,o as i,f as c,i as $,x as R,F as te,s as ae,h as ne,v as C,w as re,B as le,c as ue,j as ie}from"./entry.02649e34.js";import{u as ce,c as de,a as me}from"./sha256.49997ed8.js";import{u as pe}from"./notifi.3f6a449e.js";import{u as ve,c as ge}from"./pool.6da076ac.js";import{i as D}from"./import-icon.de3e6c66.js";import{_ as fe,a as _e}from"./img-no-Positions_2x.e81e7930.js";import{_ as ye,a as he}from"./img-connect-wallet_2x.bb69a8d1.js";/* empty css              *//* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";import"./status-block.d042b45f.js";/* empty css              */import"./decimal.0e8aa3f1.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./useWhale.69eeac25.js";import"./index.8a40657b.js";const be=Q({setup(){const t=S(!1),{t:w}=X(),j=S(["position"]),G=Y(),E=Z(),N=S(""),k=ce(),p=u(()=>k),d=u(()=>{const o=E.query.poolAddress,e=n.value.poolConfigObj[o];return console.log(e,"infoinfoinfo"),e}),B=u(()=>p.value.chainName?de[p.value.chainName]:{});let m=S([]);const L=ve(),n=u(()=>L),q=me(),h=u(()=>q),W=()=>{t.value=!0,m.value=[],h.value.address&&L.getMyPositons(h.value.address,n.value.poolsObj,p.value.chainName),setTimeout(()=>{t.value=!1},1e3)};x(()=>{m.value=[],L.setMyPositionsLoading(!0)}),ee(()=>{h.value.connected||(m.value=[])});const F=()=>{t.value=!0;let o=[];n.value.myPositions.forEach(e=>{var g,b,T,P;let s,a;const r=e.amountA*((g=n.value.RATES[e.token_a.address])==null?void 0:g.price),l=e.amountB*((b=n.value.RATES[e.token_b.address])==null?void 0:b.price);(T=n.value.RATES[e.token_a.address])!=null&&T.price&&((P=n.value.RATES[e.token_b.address])!=null&&P.price)?(s=r+l,a=r+l):(s=" --",a=0),(e.coinA.address==d.value.coinA.address&&e.coinB.address==d.value.coinB.address&&e.fee==d.value.fee||e.coinA.address==d.value.coinB.address&&e.coinB.address==d.value.coinA.address&&e.fee==d.value.fee)&&o.push({...e,amountUSD:s,amountUSDOrigin:a,tokenARates:r,tokenBRates:l})}),m.value=o.sort((e,s)=>e.amountUSDOrigin-s.amountUSDOrigin),console.log(m.value,"list.value========>")};O(()=>[n.value.myPositions,n.value.RATES,d.value],([o,e,s])=>{o&&e&&s&&(console.log("0605==>updateLpList9099999"),F())},{immediate:!0}),O(()=>[h.value.address,n.value.poolConfigList,n.value.poolsObj,p.value.chainName],([o,e,s,a])=>{var r,l,g;o&&e&&e.length>0&&a&&(a!=null&&a.toLowerCase().includes((r=e[0])==null?void 0:r.chain))&&!ge(s)&&(a==="Aptos"?e.length===Object.values(s).length:(g=(l=Object.values(s)[0])==null?void 0:l.chain)!=null&&g.includes("sui"))&&(console.log("0605==>getMyPositons9099999"),L.getMyPositons(h.value.address,s,a))},{immediate:!0,deep:!0});const A=pe(),v=u(()=>A),U=u(()=>L),I=async o=>{await A.getSourceGroups();const e=v.value.sourceGroups&&v.value.sourceGroups.length>0&&v.value.sourceGroups[0]&&v.value.sourceGroups[0].sources||[];for(let s=0;s<e.length;s++){const{pool_address:a,position_index:r}=JSON.parse(e[s].blockchainAddress);let l=!1,g;for(let b=0;b<o.length;b++){const{poolAddress:T,index:P}=o[b];a==T&&Number(P)==Number(r)&&(l=!0),g={pool_address:a,position_index:r}}l||await A.subscribePosition(g,"",!1,!1)}},J=async()=>{await A.getSourceGroups();const o=v.value.sourceGroups&&v.value.sourceGroups.length>0&&v.value.sourceGroups[0]&&v.value.sourceGroups[0].sources||[];for(let e=0;e<o.length;e++){const{pool_address:s,position_index:a}=JSON.parse(o[e].blockchainAddress),{name:r}=o[e],l={pool_address:s,position_index:a};await A.subscribePosition(l,r,!1,!1)}},K=u(()=>U.value.myPositionsLoading);O(()=>U.value.myPositions,(o,e)=>{B.value.hasNotifi&&(o&&o.length>0&&e&&e.length!==o.length?I(o):o&&o.length==0&&!K.value&&J())},{immediate:!0});const M=o=>{var e;return(o==null?void 0:o.logoURI)||(o==null?void 0:o.logo_url)||((e=n.value.tokensObj[o==null?void 0:o.address])==null?void 0:e.logo_url)||(p.value.theme==="default"?D("/image/coins/unknown.png"):D("/image/coins/sui-unknown.png"))},f=S(null),_=u(()=>f.value&&f.value.firstToken?f.value.firstToken:null),y=u(()=>f.value&&f.value.lastToken?f.value.lastToken:null),V=u(()=>{let o=[];o=m.value;const e=o.filter((s,a)=>_.value&&y.value?s.coinA.symbol==_.value.symbol&&s.coinB.symbol==y.value.symbol||s.coinA.symbol==y.value.symbol&&s.coinB.symbol==_.value.symbol:_.value?s.coinA.symbol.toLowerCase().includes(_.value.symbol.toLowerCase())||s.coinB.symbol.toLowerCase().includes(_.value.symbol.toLowerCase()):y.value?s.coinA.symbol.toLowerCase().includes(y.value.symbol.toLowerCase())||s.coinB.symbol.toLowerCase().includes(y.value.symbol.toLowerCase()):o);return n.value.myPositionsLoading||k.setPositiomAmount(e.length),e});return oe(()=>{k.setPositiomAmount("--")}),{showList:V,childTokenSelectRef:f,firstToken:_,lastToken:y,getCoinIcon:M,t:w,pools:n,store:p,wallet:h,list:m,clickRefresh:W,refresh:t,current:j,router:G,searchKey:N}}});const ke={class:"your-liquidity-container"},Le={key:0,class:"upgrade-loading"},Ae={key:1,class:"position-list"},Se={key:2,class:"no-data"},we={key:0,src:fe,alt:""},Be={key:1,src:_e,alt:""},Te={key:3,class:"no-data"},Pe={key:0,src:ye,alt:""},Re={key:1,src:he,alt:""};function Oe(t,w,j,G,E,N){const k=z,p=H,d=le;return i(),c("div",ke,[t.pools.myPositionsLoading&&t.wallet.connected?(i(),c("div",Le,[$(k,{loading:t.pools.myPositionsLoading,type:"position"},null,8,["loading"])])):R("",!0),t.showList&&t.showList.length>0&&t.wallet.connected&&!t.pools.myPositionsLoading?(i(),c("div",Ae,[(i(!0),c(te,null,ae(t.showList,(B,m)=>(i(),ue(p,{key:m,"p-item":B},null,8,["p-item"]))),128))])):R("",!0),t.showList&&t.showList.length<=0&&!t.pools.myPositionsLoading&&t.wallet.connected?(i(),c("div",Se,[t.store.theme=="default"?(i(),c("img",we)):(i(),c("img",Be)),ne("span",null,C(t.$t("common.noLiquidityPositions")),1)])):R("",!0),t.wallet.connected?R("",!0):(i(),c("div",Te,[t.store.theme=="default"?(i(),c("img",Pe)):(i(),c("img",Re)),$(d,{class:"connect-wallet",onClick:w[0]||(w[0]=B=>t.wallet.setIsShowWalletModal(!0))},{default:re(()=>[ie(C(t.$t("button.connectWallet")),1)]),_:1})]))])}const Xe=se(be,[["render",Oe],["__scopeId","data-v-a76b584a"]]);export{Xe as default};
