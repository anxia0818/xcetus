import{a as K,i as ee,u as oe,h as P,D as ce,f as me,b as pe,p as ve}from"./pool.ccb2d30f.js";import{x as ne,a as se,b as f,R as be,T as te,A as E,e as ae,o as s,f as i,h as n,c as A,t as p,s as Z,l as M,w as _,j as N,k as z,u as L,I as fe,J as le,eO as he,S as ke,B as _e,p as ie,m as de,M as ge,r as D,q as ye,eP as Ce,K as H,E as $e,V as we,F as Y,i as x,D as Se,eQ as Le}from"./entry.555960f3.js";/* empty css              *//* empty css              *//* empty css              */import{i as I}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as Ie,a as Te}from"./img-no-Positions_2x.01c4e398.js";const Oe=ne({props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,d){const{t:l,locale:q}=se(),V=K(),h=f(()=>V),y=f(()=>new ce(Number(e.balance)).div(2)),v=be(te,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function T(){this.$emit("onSelect")}const C=m=>{const t=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(k==null?void 0:k.value)&&(k==null?void 0:k.value)}})?).*$`);m.target.value=m.target.value.replace(t,"$1")},S=ee(),u=f(()=>S),a=oe(),r=f(()=>a);let $={};E(()=>r.value.RATES,m=>{m&&(console.log(m,"price====>"),$=m)},{immediate:!0});const b=f(()=>(console.log(e.inputValue,"==>props.inputValue"),console.log(e.coinName,"===>props.coinName"),me(Number(e.inputValue)*Number($&&$[e.address]&&$[e.address].price),2))),j=f(()=>{var m,t,g;return console.log((m=r.value.tokensObj[e.address])==null?void 0:m.labels,"===> pool.value.tokensObj[props.address]?.labels"),r.value.tokensObj&&e.address&&r.value.tokensObj[e.address]&&((t=r.value.tokensObj[e.address])==null?void 0:t.labels)&&((g=r.value.tokensObj[e.address])==null?void 0:g.labels[0])}),k=f(()=>{var m;return r.value.tokensObj&&e.address&&r.value.tokensObj[e.address]&&((m=r.value.tokensObj[e.address])==null?void 0:m.decimals)}),F=f(()=>{var m,t,g;return e.coinIcon?e.coinIcon:e.address&&((m=r.value)!=null&&m.tokensObj[e.address])?(g=(t=r==null?void 0:r.value)==null?void 0:t.tokensObj[e.address])==null?void 0:g.logo_url:h.value.theme==="default"?I("/image/coins/unknown.png"):I("/image/coins/sui-unknown.png")});return{pool:r,halfBalance:y,coinLabels:j,t:l,addCommom:P,store:h,wallet:u,indicator:v,inputChange:C,importIcon:I,selectCoin:T,amountPirce:b,coinDecimals:k,currentIcon:F}}});const Ae=e=>(ie("data-v-a9cc46f9"),e=e(),de(),e),Ne={class:"card"},je={class:"top"},Be={key:1,class:"input-div"},De={key:0},Me={class:"loading-token"},Pe=["src"],Re={key:0},Ve=Ae(()=>n("use",{"xlink:href":"#icon-icon_on"},null,-1)),Fe=[Ve],ze={class:"bottom"},Ee={key:0,class:"amount-price"},Ze={key:1},qe={class:"top"},Ue={class:"right"},He={class:"balance"};function Ke(e,d,l,q,V,h){const y=fe,v=le,T=he,C=ke,S=_e;return s(),i("div",Ne,[n("div",je,[e.inputDisabled?(s(),i("div",Be,[e.inputValue?(s(),i("span",De,p(e.inputValue),1)):(s(),A(v,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(s(),A(y,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:d[0]||(d[0]=u=>e.$emit("onInput",u.target.value)),onFocus:d[1]||(d[1]=u=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),n("div",{class:Z(["left",e.hasArrow?"":"nohands"]),onClick:d[2]||(d[2]=u=>e.hasArrow&&!e.pool.isTokenLoading?e.selectCoin():"")},[n("div",Me,[e.pool.isTokenLoading?(s(),A(T,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):(s(),i("img",{key:1,src:e.currentIcon},null,8,Pe)),M(C,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:_(()=>[n("div",null,[n("p",null,p(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(s(),i("p",Re,p(e.coinLabels),1)):N("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(s(),i("svg",{key:0,class:Z(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},Fe,2)):N("",!0)],2)]),n("div",ze,[e.inputValue&&e.amountPirce!="--"?(s(),i("div",Ee," $"+p(e.amountPirce),1)):(s(),i("div",Ze)),n("div",qe,[n("div",Ue,[z(p(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),n("span",He,p(e.wallet.connected?("addCommom"in e?e.addCommom:L(P))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(s(),A(S,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:L(P))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:d[3]||(d[3]=u=>e.$emit("onHalf"))},{default:_(()=>[z(p("Half"))]),_:1},8,["disabled"])):N("",!0),e.havemax&&e.wallet.connected?(s(),A(S,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:L(P))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:d[4]||(d[4]=u=>e.$emit("onMax"))},{default:_(()=>[z(p(e.$t("button.max")),1)]),_:1},8,["disabled"])):N("",!0)])])])])}const Mo=ae(Oe,[["render",Ke],["__scopeId","data-v-a9cc46f9"]]);const Je=ne({components:{Modal:ge,LoadingOutlined:te},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""}},setup(e,d){const{t:l,locale:q}=se(),V=ee(),h=f(()=>V),y=oe(),v=f(()=>y),T=K(),C=f(()=>T),S=D([l("tab.all"),l("tab.native"),l("tab.layerZero"),l("tab.wormhole"),l("tab.celer")]),u=D(l("tab.all")),a=D(l("tab.all")),r=K(),$=f(()=>r.chainName),b=D([]);console.log(b,"===>tokenList");const j=D(null);ye(()=>{});const k=D(!1);E(u,t=>{t!==l("tab.all")&&(k.value=!1),t==l("tab.all")?a.value=l("tab.all"):t==l("tab.layerZero")?a.value=l("tab.layerZero"):t==l("tab.wormhole")?a.value=l("tab.wormhole"):t==l("tab.celer")?a.value=l("tab.celer"):t==l("tab.native")&&(a.value=l("tab.native")),F(j.value)});const F=async t=>{var J,Q,W,G,X;let g=[],B=v.value.tokens;if(!(C.value.chainName&&B&&B[0]&&C.value.chainName.toLowerCase().includes((J=B[0])==null?void 0:J.chain))){b.value=[],console.log("执行");return}let U=B;if(t&&t.split("::")&&t.split("::").length==3&&$.value=="Sui"){const c=pe("Sui"),o=v.value.tokensObj[t]||await c.getTokenBySymbol(v.value.tokens,t);((Q=B.filter(w=>(w==null?void 0:w.address)===(o==null?void 0:o.address)))==null?void 0:Q.length)<1&&(y.setNewTokens({[t]:o}),U=B.concat(o))}for(const c of Object.keys(U)){let o=Ce(U[c]);const w=h.value.assets[o.address]&&h.value.assets[o.address].balance?ve(h.value.assets&&h.value.assets[o.address].balance,o.decimals):0;e.lastSelectCoin&&o&&o.address===e.lastSelectCoin?o.unusable=!0:o.unusable=!1;const ue=((W=v.value.tokensObj[o.address])==null?void 0:W.labels)&&((G=v.value.tokensObj[o.address])==null?void 0:G.labels[0]),re=v.value.tokensObj[o.address]?(X=v.value.tokensObj[o.address])==null?void 0:X.name:o.name;o={...o,balance:w,labels:ue,name:re,sort:o.symbol=="APT"||o.symbol=="SUI"?1:-1},g.push(o)}let O;if(h.value.address?O=g.sort((c,o)=>c.symbol.charCodeAt(0)-o.symbol.charCodeAt(0)).sort((c,o)=>o.balance-c.balance):O=g.value.sort((c,o)=>c.symbol.charCodeAt(0)-o.symbol.charCodeAt(0)),t){console.log(O,"sortResult=====>");const c=O.filter(o=>o.symbol.toLowerCase().indexOf(t.toLowerCase())!==-1||o.address.toLowerCase().indexOf(t.toLowerCase())!==-1);if(console.log(c,"===>result"),u.value!==l("tab.all")){const o=c.filter(w=>u.value==l("tab.native")?!w.labels:w.labels&&w.labels.toLowerCase()==u.value.toLowerCase());b.value=o}else b.value=c}else if(console.log(u.value,"===>currentTab.value"),u.value!==l("tab.all")){const c=O.filter(o=>(console.log(o.labels&&o.labels.toLowerCase(),"====>ele.labels"),console.log(u.value.toLowerCase(),"currentTab.value.toLowerCase()"),u.value==l("tab.native")?!o.labels:o.labels&&o.labels.toLowerCase()==u.value.toLowerCase()));b.value=c}else console.log(O,"===>sortResult"),b.value=O;b.value=b.value.sort((c,o)=>o.sort-c.sort).sort((c,o)=>o.unusable-c.unusable),console.log(b.value,"tokenList.value===>322")},m=t=>{d.emit("onSelect",t),d.emit("onClose")};return E(()=>[j.value,k.value],([t,g])=>{console.log(t,"===>keyword"),F(t)},{immediate:!0}),E(()=>v.value.tokens,t=>{t&&(console.log(v.value.tokens,"===>pools.value.tokens"),F(j.value))},{immediate:!0}),{pools:v,t:l,chainName:$,tabList:S,currentTab:u,addCommom:P,tokenList:b,importIcon:I,keyword:j,wallet:h,toSelect:m,store:C,isShowAll:k}}}),Qe=""+globalThis.__publicAssetsURL("image/warning@2x.png");const R=e=>(ie("data-v-c0ef53bd"),e=e(),de(),e),We=R(()=>n("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ge={class:"coin-select-modal"},Xe={class:"search-input"},Ye=["placeholder"],xe=R(()=>n("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),eo=[xe],oo={key:0,class:"tab-list"},no=["onClick"],so={class:"item"},to=R(()=>n("div",{class:"line"},null,-1)),ao={class:"coin-list-box"},lo={key:0,class:"coin-list"},io=["onClick"],uo={class:"left"},ro=["src"],co=["src"],mo={class:"name-box"},po=R(()=>n("img",{src:Qe,alt:""},null,-1)),vo={class:"balance-box"},bo={class:"balance"},fo={key:0},ho={key:1},ko={key:2},_o=R(()=>n("p",null,null,-1)),go={key:1,class:"no-data"},yo={key:0,class:"token-loading"},Co={key:1,class:"no-data-content"},$o={key:0,src:Ie},wo={key:1,src:Te},So=R(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-information"})],-1));function Lo(e,d,l,q,V,h){const y=Se,v=H("loading-outlined"),T=Le,C=le,S=H("vue-scroll"),u=H("Modal");return s(),A(u,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:d[2]||(d[2]=a=>e.$emit("onClose"))},{closeIcon:_(()=>[We]),default:_(()=>[n("div",Ge,[n("div",Xe,[$e(n("input",{"onUpdate:modelValue":d[0]||(d[0]=a=>e.keyword=a),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,Ye),[[we,e.keyword]]),e.keyword?(s(),i("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:d[1]||(d[1]=a=>e.keyword="")},eo)):N("",!0)]),e.chainName!=="Sui"?(s(),i("div",oo,[(s(!0),i(Y,null,x(e.tabList,(a,r)=>(s(),i("div",{key:r,class:Z(["item-container",e.currentTab==a?"item-container-active item-container":"item-container"]),onClick:$=>e.currentTab=a},[n("div",so,p(a),1)],10,no))),128))])):N("",!0),to,n("div",ao,[M(S,null,{default:_(()=>[e.tokenList&&e.tokenList.length>0?(s(),i("ul",lo,[(s(!0),i(Y,null,x(e.tokenList,(a,r)=>(s(),i("li",{key:r,class:Z(a.unusable?"unusable":""),onClick:$=>e.toSelect(a)},[n("div",uo,[a.isChinaToken?(s(),i("img",{key:1,src:e.store.theme=="default"?("importIcon"in e?e.importIcon:L(I))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:L(I))("/image/coins/sui-unknown.png"),alt:""},null,8,co)):(s(),i("img",{key:0,src:a.icon||a.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:L(I))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:L(I))("/image/coins/sui-unknown.png"))},null,8,ro)),n("div",mo,[n("span",null,[z(p(a.symbol)+" ",1),a.isSelfBuilt?(s(),A(y,{key:0,placement:"right","arrow-point-at-center":""},{title:_(()=>[n("span",null,p(e.t("newAdd.notCetusTokenList")),1)]),default:_(()=>[po]),_:1})):N("",!0)]),n("p",null,p(a.name)+" "+p(a.labels?`(${a.labels})`:""),1)])]),n("div",vo,[n("div",bo,[e.wallet.loading?(s(),i("div",fo,[M(T,null,{default:_(()=>[M(v)]),_:1})])):a.balance&&e.wallet.connected?(s(),i("div",ho,p(("addCommom"in e?e.addCommom:L(P))(a.balance,a.decimals)),1)):(s(),i("div",ko,"0"))]),_o])],10,io))),128))])):(s(),i("div",go,[e.pools.isTokenLoading?(s(),i("div",yo,[M(C)])):(s(),i("div",Co,[e.store.theme=="default"?(s(),i("img",$o)):(s(),i("img",wo)),n("p",null,p(e.t("newAdd.noTokensFound")),1),n("div",null,[z(p(e.t("newAdd.enterCoinType"))+" ",1),M(y,{placement:"bottom","arrow-point-at-center":""},{title:_(()=>[n("span",null,p(e.t("newAdd.uniqueIdOfCoin")),1)]),default:_(()=>[So]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const Po=ae(Je,[["render",Lo],["__scopeId","data-v-c0ef53bd"]]);export{Mo as _,Po as a};
