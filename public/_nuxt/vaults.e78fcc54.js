import{s as Rs,a as V,u as _s,d as ns,c as E}from"./pool.76d5ccbc.js";import{a as Z,l as p,r as P,e as x,o as t,f as n,h as o,i as _,v as h,u as k,S as zs,p as ls,k as as,j as U,F as M,E as is,M as Os,b as ps,Q as hs,s as Vs,w as ds,t as G,B as vs,y as Bs,z as us,A as X,x as q,H as Ts,q as Q,K as Hs,c as Js}from"./entry.49fba427.js";/* empty css              */import{a as ss,u as gs}from"./sha256.ccdb7b65.js";import{_ as js}from"./auto-pool-apy-tips.88660e0b.js";/* empty css              */import{u as Ks}from"./farms.c2c9ece9.js";import{_ as Qs}from"./upgrade-loading.bc00433f.js";import{_ as Ns}from"./token-warning.302274be.js";import{i as ts}from"./import-icon.de3e6c66.js";import{u as cs}from"./autoPool.e1f52312.js";import{R as Ds}from"./farms-range.988edf58.js";import{_ as Us}from"./img-connect-wallet_2x.37811b36.js";import{_ as Gs}from"./img-no-Positions_2x.a102dbad.js";import"./decimal.0bdeb344.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const Xs=Z({props:{list:{type:Array,default:()=>[]},listLoading:{type:Boolean,default:!1},totalTVL:{type:String,default:""}},setup(s){const l=ss(),y=p(()=>l),g=P(!1);return{wallet:y,sFixD:Rs,loading:g,addCommom:V}}});const ms=s=>(ls("data-v-4d380896"),s=s(),as(),s),Zs={class:"farms-banner-bg"},xs={class:"vaults-banner"},so={class:"vaults-banner-center"},oo=ms(()=>o("div",{class:"title"},"Vaults",-1)),eo=ms(()=>o("div",{class:"desc"},"Harvesting, compounding & rebalancing is automated.Stake your tokens to earn.",-1)),to={class:"claim-rewards"},no={class:"claim-title"},lo=ms(()=>o("span",null,"Total Value Locked",-1)),ao={key:0,class:"loading-spin"},io={key:1},co={key:2};function ro(s,l,y,g,L,b){const r=zs;return t(),n("div",Zs,[o("div",xs,[o("div",so,[oo,eo,o("div",to,[o("div",no,[lo,s.listLoading?(t(),n("span",ao,[_(r)])):s.wallet.address?(t(),n("span",io,"$"+h(("addCommom"in s?s.addCommom:k(V))(("sFixD"in s?s.sFixD:k(Rs))(s.totalTVL||0,2))),1)):(t(),n("span",co,"--"))])])])])])}const uo=x(Xs,[["render",ro],["__scopeId","data-v-4d380896"]]),_o=Z({setup(){const s=P(!1),l=ss(),y=p(()=>l),g=Ks(),L=p(()=>g),b=p(()=>L.value.farmsPoolList);return{isShowMore:s,wallet:y,walletStore:l,farmsPoolList:b}}});const os=s=>(ls("data-v-68073b49"),s=s(),as(),s),po={class:"vaults-table"},ho=os(()=>o("th",null,"Vaults",-1)),vo=os(()=>o("th",null,"TVL",-1)),go=os(()=>o("th",null,"Your Deposit",-1)),mo=os(()=>o("th",null,"Actions",-1)),ko=os(()=>o("tr",{style:{height:"4px",background:"unset"}},null,-1)),$o={class:"pool"},yo={class:"staked-tvl"},bo={class:"apr"},fo={class:"my-staked"},wo={class:"actions"},So=os(()=>o("tr",{style:{height:"8px",background:"unset !important"}},null,-1));function Co(s,l,y,g,L,b){const r=js,v=Os;return t(),n("div",po,[o("table",null,[o("thead",null,[o("tr",null,[ho,vo,o("th",null,[o("span",null,[U("APY "),_(r)])]),go,mo]),ko]),o("tbody",null,[(t(),n(M,null,is(4,(S,O)=>(t(),n(M,{key:O},[o("tr",null,[o("td",null,[o("div",$o,[_(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),_(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",yo,[_(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",bo,[o("span",null,[_(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),o("td",null,[o("div",fo,[_(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),o("td",null,[o("div",wo,[_(v,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),So],64))),64))])])])}const Lo=x(_o,[["render",Co],["__scopeId","data-v-68073b49"]]),Po=Z({components:{Range:Ds},props:{pItem:{type:Object,default:()=>({})}},setup(s){const l=gs(),y=p(()=>l),g=_s(),L=p(()=>g),b=d=>{var i;return(d==null?void 0:d.logoURI)||(d==null?void 0:d.logo_url)||((i=L.value.tokensObj[d==null?void 0:d.address])==null?void 0:i.logo_url)||(y.value.theme==="default"?ts("/image/coins/unknown.png"):ts("/image/coins/sui-unknown.png"))},r=P(!0),v=cs(),S=p(()=>v),O=p(()=>S.value.positionInfoObj[s.pItem.id]),A=ps(),C=(d,i)=>{A.push(`/vaults-detail/${d.id}?action=${i}`)},f=d=>{const i=d.needReverse,I=i?d.token_b.address:d.token_a.address,D=i?d.token_a.address:d.token_b.address;A.push(`/swap?from=${I}&to=${D}`)},e=ss(),$=p(()=>e);return console.log(s.pItem,"pItem##"),{getCoinIcon:b,direct:r,decimalUi:ns,addCommom:V,autoPool:S,positionInfo:O,toAutoPoolDetail:C,toSwap:f,wallet:$}}}),qs=""+globalThis.__publicAssetsURL("sui-image/range-vaults.png");const z=s=>(ls("data-v-4026a30a"),s=s(),as(),s),Ao={class:"vaults-position-card"},Io={class:"auto-position-card-conetent"},Ro={key:0,class:"no-vaults-data no-data"},Oo=z(()=>o("img",{src:Us},null,-1)),Vo={key:1,class:"auto-position-card"},Bo={class:"position-range"},To=z(()=>o("div",{class:"inrange"},[o("img",{src:qs,alt:""}),o("span",null,"In range")],-1)),jo={class:"right"},No={class:"top"},Do=z(()=>o("p",null,"Position Range",-1)),Uo={key:0},qo={key:1},Mo={class:"item lp-tokens"},Yo=z(()=>o("div",{class:"top"},"Your LP Tokens",-1)),Wo={class:"bottom"},Fo={key:0,class:"lp-num"},Eo={key:1,class:"lp-num"},zo={class:"item share"},Ho=z(()=>o("div",{class:"top"},"Share",-1)),Jo={class:"bottom"},Ko={key:0},Qo={key:1},Go={class:"item yourBanlance"},Xo=z(()=>o("div",{class:"top"},"Your Balance",-1)),Zo={class:"bottom"},xo={class:"token-info"},se={class:"token-num"},oe={alt:""},ee={key:0},te={key:1},ne=z(()=>o("p",null,"--",-1)),le=[ne],ae={class:"token-num"},ie={alt:""},de={key:0},ce={key:1},re=z(()=>o("p",null,"--",-1)),ue=[re],_e={class:"action"};function pe(s,l,y,g,L,b){var O,A,C,f,e,$,d,i;const r=vs,v=hs("Range"),S=Vs("image");return t(),n("div",Ao,[o("div",Io,[s.wallet.address?(t(),n("div",Vo,[o("div",Bo,[To,o("div",jo,[o("div",No,[Do,s.direct?(t(),n("span",Uo,h(("addCommom"in s?s.addCommom:k(V))(("decimalUi"in s?s.decimalUi:k(ns))(s.pItem.price,6)))+" Current",1)):(t(),n("span",qo,h(("addCommom"in s?s.addCommom:k(V))(("decimalUi"in s?s.decimalUi:k(ns))(1/s.pItem.price,6)))+" Current",1))]),_(v,{"pool-info":s.positionInfo,"prop-direct":s.direct,"use-props-direct":!0,onClickChange:l[1]||(l[1]=I=>s.direct=!s.direct)},null,8,["pool-info","prop-direct"])])]),o("div",Mo,[Yo,o("div",Wo,[(O=s.wallet)!=null&&O.connected?(t(),n("div",Fo,h(("addCommom"in s?s.addCommom:k(V))((A=s.positionInfo)==null?void 0:A.myLiquidity))+" LP",1)):(t(),n("div",Eo,"--"))])]),o("div",zo,[Ho,o("div",Jo,[(C=s.wallet)!=null&&C.connected?(t(),n("span",Ko,h((f=s.positionInfo)==null?void 0:f.myShare)+"%",1)):(t(),n("span",Qo,"--%"))])]),o("div",Go,[Xo,o("div",Zo,[o("div",xo,[o("div",se,[G(o("img",oe,null,512),[[S,s.pItem.needReverse?s.pItem.coinB.logo_url:s.pItem.coinA.logo_url]]),(e=s.wallet)!=null&&e.connected?(t(),n("div",ee,[o("span",null,h(("addCommom"in s?s.addCommom:k(V))(($=s.positionInfo)==null?void 0:$.amountA)),1)])):(t(),n("div",te,le))]),o("div",ae,[G(o("img",ie,null,512),[[S,s.pItem.needReverse?s.pItem.coinA.logo_url:s.pItem.coinB.logo_url]]),(d=s.wallet)!=null&&d.connected?(t(),n("div",de,[o("span",null,h(("addCommom"in s?s.addCommom:k(V))((i=s.positionInfo)==null?void 0:i.amountB)),1)])):(t(),n("div",ce,ue))])])])]),o("div",_e,[o("div",null,[o("div",{class:"remove-btn",onClick:l[2]||(l[2]=I=>s.toAutoPoolDetail(s.pItem,"remove"))},"Withdraw")])])])):(t(),n("div",Ro,[Oo,_(r,{class:"add-liquidity-btn",onClick:l[0]||(l[0]=I=>s.wallet.setIsShowWalletModal(!0))},{default:ds(()=>[U("Connect Wallet")]),_:1})]))])])}const he=x(Po,[["render",pe],["__scopeId","data-v-4026a30a"]]),ve=Z({components:{TokenWarning:Ns,Range:Ds},props:{list:{type:Array,default:()=>[]}},setup(){const{t:s}=Bs(),l=gs(),y=p(()=>l),g=_s(),L=p(()=>g),b=a=>{var B;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((B=L.value.tokensObj[a==null?void 0:a.address])==null?void 0:B.logo_url)||(y.value.theme==="default"?ts("/image/coins/unknown.png"):ts("/image/coins/sui-unknown.png"))},r=p(()=>L.value.tokensObj),v=p(()=>y.value.statsData),S=p(()=>y.value.theme),O=cs(),A=p(()=>O),C=P({}),f=a=>{C.value[a]?C.value[a]=!1:C.value[a]=!0,console.log(C.value,"##isShowPosition.value")},e=p(()=>A.value.positionInfoObj),$=ss(),d=p(()=>$),i=P(!1),I=ps(),D=(a,B)=>{I.push(`/vaults-detail/${a.id}?action=${B}`)},j=a=>{const B=a.needReverse,Y=B?a.token_b.address:a.token_a.address,W=B?a.token_a.address:a.token_b.address;I.push(`/swap?from=${Y}&to=${W}`)},N=P(!0);return{router:I,getCoinIcon:b,tokensObj:r,t:s,statsData:v,checkNullObj:E,addCommom:V,importIcon:ts,theme:S,isShowPosition:C,togglePosition:f,positionInfo:e,wallet:d,isShowDetail:i,toAutoPoolDetail:D,toSwap:j,direct:N}}});const R=s=>(ls("data-v-245d959c"),s=s(),as(),s),ge={class:"vaults-table-contianer"},me={class:"table pc-pool-item"},ke={class:"table-header"},$e={class:"table-tr"},ye=R(()=>o("th",null,"Vaults",-1)),be=R(()=>o("th",null,"TVL",-1)),fe=R(()=>o("th",null,"Your Deposit",-1)),we=R(()=>o("th",null,"Actions",-1)),Se=R(()=>o("tr",{style:{height:"4px",background:"unset"}},null,-1)),Ce={class:"table-body"},Le=["onClick"],Pe={class:"token"},Ae={class:"img-box"},Ie=["src"],Re={class:"img-box img-last-box"},Oe=["src"],Ve={class:"name"},Be={class:"top"},Te={class:"token-name"},je={class:"tokena"},Ne={class:"tokenb"},De={class:"fee-warning"},Ue={class:"fee-tier-top"},qe={key:0},Me={class:"skeleton-box"},Ye={key:1},We={key:2},Fe={class:"skeleton-box"},Ee={key:3},ze={key:4},He={class:"skeleton-box"},Je={key:5},Ke={class:"show-position"},Qe={class:"svg-icon"},Ge=R(()=>o("use",{"xlink:href":"#icon-icon_on"},null,-1)),Xe=[Ge],Ze={key:0,class:"table-tr view-table-tr"},xe={colspan:"5"},st=R(()=>o("td",null,null,-1)),ot=R(()=>o("tr",{style:{height:"8px",background:"unset"}},null,-1)),et={class:"h5-pool-item"},tt={class:"token"},nt={class:"img-box"},lt={key:0,class:"pool-warning"},at={class:"img-box img-last-box"},it={key:0,class:"pool-warning"},dt={class:"name"},ct={class:"top"},rt={class:"token-name"},ut={class:"tokena"},_t={class:"tokenb"},pt={class:"fee-warning"},ht={class:"fee-tier-top"},vt={class:"bottom"},gt={class:"row"},mt=R(()=>o("div",{class:"left"},"TVL",-1)),kt={key:0,class:"right"},$t={key:1,class:"right"},yt={class:"row"},bt=R(()=>o("div",{class:"left"},"APY",-1)),ft={key:0,class:"right"},wt={key:1,class:"right theme-right"},St={class:"row"},Ct=R(()=>o("div",{class:"left"},"Your Deposit",-1)),Lt={key:0,class:"right"},Pt={key:1,class:"right"},At=["onClick"],It=R(()=>o("use",{"xlink:href":"#icon-icon_on"},null,-1)),Rt=[It],Ot={key:0,class:"h5-auto-pool-details"},Vt={class:"position-range"},Bt=R(()=>o("div",{class:"inrange"},[o("img",{src:qs,alt:""}),o("span",null,"In range")],-1)),Tt={class:"right"},jt={class:"top"},Nt=R(()=>o("p",null,"Position Range",-1)),Dt={key:0},Ut={key:1},qt={class:"h5-item lp-tokens"},Mt=R(()=>o("div",{class:"top"},"Your LP Tokens",-1)),Yt={class:"bottom"},Wt={key:0,class:"lp-num"},Ft={key:1,class:"lp-num"},Et={class:"h5-item share"},zt=R(()=>o("div",{class:"top"},"Share",-1)),Ht={class:"bottom"},Jt={key:0},Kt={key:1},Qt={class:"h5-item yourBanlance"},Gt=R(()=>o("div",{class:"top"},"Your Balance",-1)),Xt={class:"bottom"},Zt={class:"token-info"},xt={class:"token-num"},sn={alt:""},on={key:0},en={key:1},tn=R(()=>o("p",null,"--",-1)),nn=[tn],ln={class:"token-num"},an={alt:""},dn={key:0},cn={key:1},rn=R(()=>o("p",null,"--",-1)),un=[rn],_n={class:"action"};function pn(s,l,y,g,L,b){const r=js,v=Ns,S=Os,O=vs,A=he,C=hs("Range"),f=Vs("image");return t(),n("div",ge,[o("table",me,[o("thead",ke,[o("tr",$e,[ye,be,o("th",null,[o("span",null,[U("APY "),_(r)])]),fe,we]),Se]),o("tbody",Ce,[(t(!0),n(M,null,is(s.list,(e,$)=>{var d,i,I,D,j,N,a,B,Y,W,H;return t(),n(M,{key:$},[o("tr",{class:"table-tr",onClick:J=>s.togglePosition($)},[o("td",null,[o("div",Pe,[o("div",Ae,[o("img",{src:s.getCoinIcon(e.needReverse?e.coinB:e.coinA)},null,8,Ie),_(v,{address:e.needReverse?(i=e==null?void 0:e.coinB)==null?void 0:i.address:(d=e==null?void 0:e.coinA)==null?void 0:d.address,"style-params":{right:0,bottom:0,width:"12px",height:"12px"}},null,8,["address"])]),o("div",Re,[o("img",{src:s.getCoinIcon(e.needReverse?e.coinA:e.coinB)},null,8,Oe),_(v,{address:e.needReverse?(D=e.coinA)==null?void 0:D.address:(I=e==null?void 0:e.coinB)==null?void 0:I.address,"style-params":{right:0,bottom:0,width:"12px",height:"12px"}},null,8,["address"])]),o("div",Ve,[o("div",Be,[o("p",Te,[o("span",je,h(e.needReverse?(N=e==null?void 0:e.coinB)==null?void 0:N.symbol:(j=e==null?void 0:e.coinA)==null?void 0:j.symbol),1),U(" - "),o("span",Ne,h(e.needReverse?(a=e==null?void 0:e.coinA)==null?void 0:a.symbol:(B=e==null?void 0:e.coinB)==null?void 0:B.symbol),1)]),o("div",De,[o("div",Ue,h((e==null?void 0:e.fee)*100)+"%",1)])])])])]),("checkNullObj"in s?s.checkNullObj:k(E))(s.statsData)?(t(),n("td",qe,[o("div",Me,[_(S,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",Ye," $"+h(Number(e.poolUSD)!==0&&Number(e.poolUSD)<.01?"<0.01":("addCommom"in s?s.addCommom:k(V))(e.poolUSD,2)),1)),("checkNullObj"in s?s.checkNullObj:k(E))(s.statsData)?(t(),n("td",We,[o("div",Fe,[_(S,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",Ee,h(e.apy),1)),(Y=s.wallet)!=null&&Y.connected&&!s.positionInfo[e.id].myLiquidityUSD?(t(),n("td",ze,[o("div",He,[_(S,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])])):(t(),n("td",Je,[s.wallet.connected?(t(),n(M,{key:0},[U(h(((W=s.positionInfo[e.id])==null?void 0:W.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in s?s.addCommom:k(V))((H=s.positionInfo[e.id])==null?void 0:H.myLiquidityUSD)}`:"<$0.01"),1)],64)):(t(),n(M,{key:1},[U("--")],64))])),o("td",null,[o("div",Ke,[_(O,{class:"add-liquidity-btn",onClick:us(J=>s.router.push(`/vaults-detail/${e.id}?action=deposit`),["stop"])},{default:ds(()=>[U("Deposit")]),_:2},1032,["onClick"]),o("div",Qe,[(t(),n("svg",{"aria-hidden":"true",class:X(["icon",s.isShowPosition&&s.isShowPosition[$]?"icon-open":""])},Xe,2))])])])],8,Le),s.isShowPosition&&s.isShowPosition[$]?(t(),n("tr",Ze,[o("td",xe,[_(A,{"p-item":e},null,8,["p-item"])]),st])):q("",!0),ot],64)}),128))])]),o("div",et,[(t(!0),n(M,null,is(s.list,(e,$)=>{var d,i,I,D,j,N,a,B,Y,W,H,J;return t(),n("div",{key:e.address,class:"item"},[o("div",tt,[o("div",nt,[G(o("img",null,null,512),[[f,s.getCoinIcon(e.needReverse?e.coinB:e.coinA)]]),(e.needReverse?(i=s.tokensObj[e.coinB.address])!=null&&i.isSelfBuilt:(d=s.tokensObj[e.coinA.address])!=null&&d.isSelfBuilt)?(t(),n("div",lt)):q("",!0)]),o("div",at,[G(o("img",null,null,512),[[f,s.getCoinIcon(e.needReverse?e.coinA:e.coinB)]]),(e.needReverse?(I=s.tokensObj[e.coinA.address])!=null&&I.isSelfBuilt:(D=s.tokensObj[e.coinB.address])!=null&&D.isSelfBuilt)?(t(),n("div",it)):q("",!0)]),o("div",dt,[o("div",ct,[o("p",rt,[o("span",ut,h(e.needReverse?e.coinB.symbol:e.coinA.symbol),1),U(" - "),o("span",_t,h(e.needReverse?e.coinA.symbol:e.coinB.symbol),1)]),o("div",pt,[o("div",ht,h((e==null?void 0:e.fee)*100)+"%",1)])])])]),o("div",vt,[o("div",gt,[mt,("checkNullObj"in s?s.checkNullObj:k(E))(s.statsData)?(t(),n("div",kt,[_(S,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",$t," $"+h(Number(e.poolUSD)!==0&&Number(e.poolUSD)<.01?"<0.01":("addCommom"in s?s.addCommom:k(V))(e.poolUSD,2)),1))]),o("div",yt,[bt,("checkNullObj"in s?s.checkNullObj:k(E))(s.statsData)?(t(),n("div",ft,[_(S,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",wt,[o("i",null,h(e.apy),1),_(r)]))]),o("div",St,[Ct,("checkNullObj"in s?s.checkNullObj:k(E))(s.positionInfo)&&((j=s.wallet)!=null&&j.connected)?(t(),n("div",Lt,[_(S,{class:"upgrade-text-skeleton",loading:!0,active:"",paragraph:!1})])):(t(),n("div",Pt,[(N=s.wallet)!=null&&N.connected?(t(),n(M,{key:0},[U(h(((a=s.positionInfo[e.id])==null?void 0:a.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in s?s.addCommom:k(V))((B=s.positionInfo[e.id])==null?void 0:B.myLiquidityUSD)}`:"<$0.01"),1)],64)):(t(),n(M,{key:1},[U("--")],64))]))])]),_(O,{class:"h5-add-liquidity-btn",onClick:us(es=>s.router.push(`/vaults-detail/${e.id}?action=deposit`),["stop"])},{default:ds(()=>[U("Deposit")]),_:2},1032,["onClick"]),o("div",{class:X(["details-btn",s.isShowPosition&&s.isShowPosition[$]?"details-btn-text-active":""]),onClick:es=>s.togglePosition($)},[(t(),n("svg",{"aria-hidden":"true",class:X(["icon",s.isShowPosition&&s.isShowPosition[$]?"icon-active":""])},Rt,2))],10,At),s.isShowPosition&&s.isShowPosition[$]?(t(),n("div",Ot,[o("div",Vt,[Bt,o("div",Tt,[o("div",jt,[Nt,s.direct?(t(),n("span",Dt,h(("addCommom"in s?s.addCommom:k(V))(("decimalUi"in s?s.decimalUi:k(ns))(e.price,6)))+" Current",1)):(t(),n("span",Ut,h(("addCommom"in s?s.addCommom:k(V))(("decimalUi"in s?s.decimalUi:k(ns))(1/e.price,6)))+" Current",1))]),_(C,{"pool-info":e,"prop-direct":s.direct,"use-props-direct":!0,onClickChange:l[0]||(l[0]=es=>s.direct=!s.direct)},null,8,["pool-info","prop-direct"])])]),o("div",qt,[Mt,o("div",Yt,[(Y=s.wallet)!=null&&Y.connected?(t(),n("div",Wt,h(("addCommom"in s?s.addCommom:k(V))(e==null?void 0:e.myLiquidity))+" LP",1)):(t(),n("div",Ft,"--"))])]),o("div",Et,[zt,o("div",Ht,[(W=s.wallet)!=null&&W.connected?(t(),n("span",Jt,h(e==null?void 0:e.myShare)+"%",1)):(t(),n("span",Kt,"--%"))])]),o("div",Qt,[Gt,o("div",Xt,[o("div",Zt,[o("div",xt,[G(o("img",sn,null,512),[[f,e.needReverse?e.coinB.logo_url:e.coinA.logo_url]]),(H=s.wallet)!=null&&H.connected?(t(),n("div",on,[o("span",null,h(("addCommom"in s?s.addCommom:k(V))(e==null?void 0:e.amountA)),1)])):(t(),n("div",en,nn))]),o("div",ln,[G(o("img",an,null,512),[[f,e.needReverse?e.coinA.logo_url:e.coinB.logo_url]]),(J=s.wallet)!=null&&J.connected?(t(),n("div",dn,[o("span",null,h(("addCommom"in s?s.addCommom:k(V))(e==null?void 0:e.amountB)),1)])):(t(),n("div",cn,un))])])])]),o("div",_n,[o("div",null,[o("div",{class:"remove-btn",onClick:l[1]||(l[1]=es=>s.toAutoPoolDetail(s.pItem,"remove"))},"Withdraw")])])])):q("",!0)])}),128))])])}const hn=x(ve,[["render",pn],["__scopeId","data-v-245d959c"]]),vn=Z({props:{selectValue:{type:String,default:""},showList:{type:Object,default:()=>({})}},setup(s,l){const y=["All Vaults","My Vaults"],g=P("All Vaults"),L=P(s.selectValue),b=P(!1),r=P(!1),v=ss(),S=p(()=>v),O=cs(),A=p(()=>O),C=p(()=>A.value.autoPoolList),f=()=>s.showList.length,e=()=>{l.emit("clickRefresh")},$=i=>{L.value=i,l.emit("changeSort",i)},d=i=>{g.value=i,console.log(i,"itemitem"),i=="My Vaults"?l.emit("changeTab",!0):l.emit("changeTab",!1)};return Ts(()=>{document.addEventListener("click",()=>{r.value=!1})}),{isOpenList:r,wallet:S,changeSort:$,tabList:y,currentTab:g,sortValue:L,clickRefresh:e,isRefresh:b,vaultsPoolList:C,getListNum:f,changeTab:d}}});const rs=s=>(ls("data-v-c45bd271"),s=s(),as(),s),gn={class:"vaults-tab"},mn={class:"tab-left"},kn=["onClick"],$n={key:0},yn={class:"tab-right"},bn={class:"sort-select"},fn=rs(()=>o("div",null,"Sort by",-1)),wn=rs(()=>o("svg",{class:"sort-icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),Sn=rs(()=>o("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Cn=[Sn],Ln={key:0,class:"sort-list"},Pn={class:"refresh"},An=rs(()=>o("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),In=[An];function Rn(s,l,y,g,L,b){return t(),n("div",gn,[o("div",mn,[(t(!0),n(M,null,is(s.tabList,r=>(t(),n("div",{key:r,class:X(["tab-item",s.currentTab==r?"tab-item-active":""]),onClick:v=>s.changeTab(r)},[o("span",null,h(r),1),s.currentTab==r&&s.getListNum()?(t(),n("p",$n,h(s.currentTab=="My Vaults"&&!s.wallet.address?0:s.getListNum()),1)):q("",!0)],10,kn))),128))]),o("div",yn,[o("div",bn,[o("div",{class:"sort-select-box",onClick:l[0]||(l[0]=us(r=>s.isOpenList=!s.isOpenList,["stop"]))},[fn,o("div",null,[o("span",null,h(s.sortValue),1),wn,(t(),n("svg",{class:X(["arrow-icon",s.isOpenList?"arrow-icon-active":""]),"aria-hidden":"true"},Cn,2))])]),s.isOpenList?(t(),n("div",Ln,[o("div",{class:"sort-item",onClick:l[1]||(l[1]=r=>s.changeSort("APY"))},"APY"),o("div",{class:"sort-item",onClick:l[2]||(l[2]=r=>s.changeSort("TVL"))},"TVL")])):q("",!0)]),o("div",Pn,[(t(),n("svg",{"aria-hidden":"true",class:X(["refresh-icon",s.isRefresh?"refreshing":""]),onClick:l[3]||(l[3]=(...r)=>s.clickRefresh&&s.clickRefresh(...r))},In,2))])])])}const On=x(vn,[["render",Rn],["__scopeId","data-v-c45bd271"]]),Vn=Z({components:{VaultsTabs:On},setup(){Bs();const s=gs(),l=p(()=>s),y=_s(),g=p(()=>y),L=cs(),b=p(()=>L),r=ss(),v=p(()=>r),S=p(()=>b.value.positionInfoObj),O=p(()=>l.value.chainName),A=P(!1),C=P(!1),f=P("TVL"),e=P(["APY"]),$=P(!1),d=u=>{console.log(u,"w121");const T=[];T.push(f.value),e.value.forEach((w,c)=>{w!=u&&T.push(w)}),e.value=T,f.value=u,D(b.value.positionInfoList)};Ts(()=>{document.addEventListener("click",()=>{J("")})});const i=P([]),I=P(!0),D=u=>{console.log(u,"##poolList");const T=[];u.filter(c=>!c.is_pause).forEach(c=>{var $s,ys,bs,fs,ws,Ss,Cs,Ls,Ps,As,Is;const m=l.value.addressLpTokens[c.address],F=g.value.poolsObj[c.address];console.log(b.value.apyObj,"##autoPool.value.apyObj");const K=(($s=b.value.apyObj[c.id])==null?void 0:$s.apr)||"0%",Ms=((ys=b.value.apyObj[c.id])==null?void 0:ys.resultApr)||"0",Ys=((bs=b.value.apyObj[c.id])==null?void 0:bs.tvl)||0;console.log(c.autoPoolPositionInfo.id,"###watchPools 246"),console.log(m,"##statsObj");const Ws=c.needReverse?((Cs=g.value.tokensObj[(Ss=c.coinB)==null?void 0:Ss.address])==null?void 0:Cs.labels)||[]:((ws=g.value.tokensObj[(fs=c.coinA)==null?void 0:fs.address])==null?void 0:ws.labels)||[],Fs=c.needReverse?((Ps=g.value.tokensObj[(Ls=c.coinA)==null?void 0:Ls.address])==null?void 0:Ps.labels)||[]:((Is=g.value.tokensObj[(As=c.coinB)==null?void 0:As.address])==null?void 0:Is.labels)||[],Es=[...new Set(Ws.concat(Fs))];T.push({...c,liqidity:Ys,vol:m?m.vol_in_usd_24h:"0",fee:c.fee?c.fee:F!=null&&F.fee?F.fee:"--",labels:Es,isFarming:c==null?void 0:c.isFarming,fee_24_h:m&&m.fee_24_h,apy:K,resultApr:Ms})});let w=[];f.value=="APY"?w=T.sort((c,m)=>m.resultApr-c.resultApr):w=T.sort((c,m)=>m.liqidity-c.liqidity),i.value=w,I.value=!1,console.log(i.value.length,"##list.value.length"),y.setAutoPoolNum(i.value.length),console.log(i.value,"##list.value")};Q(()=>[b.value.positionInfoList,b.value.apyObj,g.value.poolConfigObj],([u,T,w])=>{console.log("执行次数###",w),u&&u.length>0&&w&&!E(w)&&(console.log(u,"###autoPoolList"),D(u))},{immediate:!0,deep:!0}),Q(()=>[v.value.address,b.value.autoPoolList,g.value.poolConfigObj],([u,T,w])=>{u&&T&&T.length>0&&w&&!E(w)&&L.getMyAutoPoolPosition()},{immediate:!0});const j=P(null),N=p(()=>j.value&&j.value.firstToken?j.value.firstToken:null),a=p(()=>j.value&&j.value.lastToken?j.value.lastToken:null),B=P(),Y=P(""),W=()=>{let u=[];u=i.value,console.log(u,"##pageList");const T=u.filter((m,F)=>N.value&&a.value?m.coinA.address==N.value.address&&m.coinB.address==a.value.address||m.coinA.address==a.value.address&&m.coinB.address==N.value.address:N.value?m.coinA.address.toLowerCase().includes(N.value.address.toLowerCase())||m.coinB.address.toLowerCase().includes(N.value.address.toLowerCase()):a.value?m.coinA.address.toLowerCase().includes(a.value.address.toLowerCase())||m.coinB.address.toLowerCase().includes(a.value.address.toLowerCase()):u);let w=[],c=[];console.log(T,"##filterArr"),T.forEach((m,F)=>{console.log(m,"irem##");const K=S.value&&S.value[m.id];console.log(K,"##positionInfo"),A.value&&Number(K==null?void 0:K.myLiquidity)>0&&v.value.connected?c.push(m):w.push({...m})}),Y.value=w.reduce((m,F)=>m+F.poolUSD,0),console.log(w,"121arrnewValnewValnewVal"),B.value=A.value&&v.value.connected?c:w,console.log(B.value,"##showList.value "),I.value||(A.value&&v.value.connected?y.setAutoPoolNum(c.length):y.setAutoPoolNum(w.length))};Q(()=>[N.value,a.value,i.value,A.value,v.value.address],([u,T,w,c])=>{(u||T||w||c)&&(console.log("newValnewValnewVal",u,T,w,JSON.stringify(w)),W())},{immediate:!0}),Hs(()=>{y.setAutoPoolNum("--")});const H=p(()=>g.value.autoPoolNum),J=u=>{u=="label"?(s.setIsSelect("pools"),$.value=!$.value,C.value=!1,l.value.setIsShowMore(!1)):u=="select"?(s.setIsSelect("pools"),C.value=!C.value,$.value=!1,l.value.setIsShowMore(!1)):(C.value=!1,$.value=!1)};Q(()=>l.value.isSelect,u=>{u!=="pools"&&J("")},{immediate:!0});const es=ps(),ks=()=>{I.value=!0,L.getAutoPoolList(),L.getAutoPoolAPY()};return Q(()=>l.value.isRefresh,u=>{ks()},{immediate:!0}),Q(()=>O.value,u=>{u=="Aptos"&&es.push("/pools")},{immediate:!0}),{totalTVL:Y,clickRefresh:ks,isMyLiquidity:A,chainName:O,store:l,select:C,selectValue:f,selectList:e,label:$,changeSort:d,list:i,listLoading:I,showList:B,childTokenSelectRef:j,wallet:v,autoPoolNum:H}}});const Bn={class:"vaults-container-new"},Tn={class:"vaults-container-center"},jn={class:"auto-pool"},Nn={key:0,class:"no-vaults-data no-data"},Dn=o("img",{src:Us},null,-1),Un={key:0,class:"upgrade-loading pc-loading"},qn={key:1,class:"upgrade-loading h5-loading"},Mn={key:3,class:"no-vaults-data"},Yn=o("img",{src:Gs},null,-1),Wn=o("span",{class:"no-vaults"},"No vaults found",-1),Fn=[Yn,Wn];function En(s,l,y,g,L,b){const r=uo,v=hs("VaultsTabs"),S=vs,O=Lo,A=Qs,C=hn;return t(),n("div",Bn,[_(r,{list:s.showList,"total-t-v-l":s.totalTVL,"list-loading":s.listLoading},null,8,["list","total-t-v-l","list-loading"]),o("div",Tn,[_(v,{"select-value":s.selectValue,"show-list":s.showList,onChangeSort:l[0]||(l[0]=f=>s.changeSort(f)),onChangeTab:l[1]||(l[1]=f=>{s.isMyLiquidity=f}),onClickRefresh:s.clickRefresh},null,8,["select-value","show-list","onClickRefresh"]),o("div",jn,[s.isMyLiquidity&&!s.wallet.address?(t(),n("div",Nn,[Dn,_(S,{class:"add-liquidity-btn",onClick:l[2]||(l[2]=f=>s.wallet.setIsShowWalletModal(!0))},{default:ds(()=>[U("Connect Wallet")]),_:1})])):q("",!0),s.isMyLiquidity&&s.wallet.address&&s.listLoading||!s.isMyLiquidity&&s.listLoading?(t(),n(M,{key:1},[s.listLoading?(t(),n("div",Un,[_(O)])):q("",!0),s.listLoading?(t(),n("div",qn,[_(A,{type:"poolsCard",loading:!0})])):q("",!0)],64)):q("",!0),s.isMyLiquidity&&s.wallet.address&&!s.listLoading||!s.isMyLiquidity&&!s.listLoading?(t(),Js(C,{key:2,list:s.showList},null,8,["list"])):q("",!0),s.autoPoolNum!=="--"&&Number(s.autoPoolNum)<=0&&!s.listLoading?(t(),n("div",Mn,Fn)):q("",!0)])])])}const dl=x(Vn,[["render",En]]);export{dl as default};
