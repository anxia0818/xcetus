import{c as u,b as N,e as I,t as _,d as E}from"./pool.cf46821a.js";import{p as R}from"./precision.a7a6c57b.js";const i=(r,e)=>r&&e?R.plus(_(r),_(e)):r||0,O=r=>{let e=0;return r&&r.forEach(n=>{e+=_(String(n))}),String(E(String(e),2))};function L(r,e,n){var v;const p=[],a=r?n.value.addressLpTokens[r.address]:null;let c,f,g,b,w=[],s=[];if(a&&(c=a.rewarder_apr[0]?Number(a.rewarder_apr[0].substring(0,a.rewarder_apr[0].length-1)):0,f=a.rewarder_apr[1]?Number(a.rewarder_apr[1].substring(0,a.rewarder_apr[1].length-1)):0,g=a.rewarder_apr[2]?Number(a.rewarder_apr[2].substring(0,a.rewarder_apr[2].length-1)):0,b=c+f+g),r!=null&&r.rewarder_infos||r!=null&&r.rewarderInfo?s=(r==null?void 0:r.rewarder_infos)||(r==null?void 0:r.rewarderInfo):!u(n.value.addressLpTokens)&&!u(e.value.tokensObj)&&!u(e.value.RATES)&&!u(n.value.newTopPoolsObj)&&(s=(r==null?void 0:r.address)&&n.value.addressLpTokens[r==null?void 0:r.address]&&n.value.addressLpTokens[r==null?void 0:r.address].rewarder_infos||[]),s&&s.length>0){s.forEach((d,h)=>{var t,S,A;const T=(t=e.value.tokensObj[d.coinAddress])==null?void 0:t.decimals,o=N(d.emissionsEveryDay/Math.pow(10,T),4),k=Number(o)>0?I(o):o,j=N(Number(o)*e.value.RATES[d.coinAddress]&&e.value.RATES[d.coinAddress].price,4);p.push({...d,logoUrl:(S=e.value.tokensObj[d.coinAddress])==null?void 0:S.logoURI,day:k,dayUSD:j,symbol:(A=e.value.tokensObj[d.coinAddress])==null?void 0:A.symbol,rewarders:a?a.rewarder_apr[h].replace("%",""):"",rewarder_display:r[`rewarder_display${h+1}`],resultDay:o})});const l=p.filter(d=>d.rewarder_display);(!s||s.length<1||JSON.stringify(s)!==JSON.stringify(l))&&(w=l),console.log(w,l,JSON.stringify(s)!==JSON.stringify(l),"resultresult")}const y={...r,rewardes:w,liqidity:a?a.tvl_in_usd:"--",vol:a?a.vol_in_usd_24h:"--",apr:a&&a.apr_7day?(v=a.apr_7day)==null?void 0:v.replace("%",""):"--",fee:r&&r.fee?r.fee:"--",aprNum:a&&a.apr_7day?String(Number(a.apr_7day.substring(0,a.apr_7day.length-1))+b):"--",rewarder_apr:O(a&&a.rewarder_apr),aprTotal:i(a&&a.apr_7day,a&&O(a.rewarder_apr)),rewarders0:a&&a.rewarder_apr[0],rewarders1:a&&a.rewarder_apr[1],rewarders2:a&&a.rewarder_apr[2],labels:r!=null&&r.labels?r.labels:[],isFarming:r==null?void 0:r.isFarming,fee_24_h:a?a.fee_24_h:"--"};return e.value.setCurrentPoolMoreInfo(y),y}export{L as g};
