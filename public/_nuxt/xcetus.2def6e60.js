import{_ as qe}from"./xwhale-header.624f2cef.js";import{r as _,T as Te,A as M,e as Y,o as v,f as y,h as n,t as f,j as N,l as ee,s as O,p as Z,k as q,m as c,i as U,c as L,w as V,B as ie,K as Ge,x as le,a as Ae,a1 as Ke,a2 as Qe,u as ze,I as Je,S as et,v as tt,z as nt,F as Ce,q as ye,E as at,a3 as ot,a8 as lt}from"./entry.9449c7e1.js";import{u as ve,a as st}from"./xcetus.7c534725.js";import{i as ge,s as se,c as ke,p as H,a as Ie,u as Be,h as Ne,b as it,r as oe,D as Se}from"./pool.4307b5ad.js";import{i as X}from"./import-icon.de3e6c66.js";import{_ as xe}from"./xWHALE-icon.2df34cd4.js";import{_ as Ee}from"./WHALE-icon.28f954ba.js";import{_ as ut}from"./head-switch.945f06f3.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{_ as rt}from"./img-leverage_2x.1c577303.js";const dt={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,t){const r=_("--"),a=_("--"),S=_("--"),b=_("--");let d=null;Te(()=>{window.clearInterval(d)});const w=()=>{const i=new Date().getTime()/1e3;Number(i)<=Number(e.startTime)&&s(e.startTime),Number(i)>Number(e.startTime)&&Number(i)<=Number(e.endTime)&&s(e.endTime)},s=i=>{clearInterval(d),window.clearInterval(d),d=setInterval(()=>{let g=new Date().getTime()/1e3;console.log(g,"nowTime===>");let m=i-parseInt(String(g));if(console.log(m,"times===>"),m==0){t.emit("countDown"),clearInterval(d),window.clearInterval(d),d=null;return}else m<0&&(clearInterval(d),window.clearInterval(d),t.emit("countDown"),d=null);m--;let l=parseInt(String(m/60/60/24));l=l<10?"0"+l:l;let A=parseInt(String(m/60/60%24));A=A<10?"0"+A:A;let x=parseInt(String(m/60%60));x=x<10?"0"+x:x;let D=parseInt(String(m%60));D=D<10?"0"+D:D,r.value=l,a.value=A,S.value=x,b.value=D},1e3)};return M(()=>e.startTime,(i,g)=>{i!==g&&w()},{immediate:!0}),{day:r,hour:a,min:S,sec:b}}};const ct={class:"count-time"};function mt(e,t,r,a,S,b){return v(),y("div",ct,[n("p",null,f(a.day),1),N(" : "),n("p",null,f(a.hour),1),N(" : "),n("p",null,f(a.min),1),N(" : "),n("p",null,f(a.sec),1)])}const vt=Y(dt,[["render",mt],["__scopeId","data-v-8be4764c"]]),gt={props:{titleText:{type:String,default:""},tipsText:{type:String,default:""},imgIcon:{type:String,default:""},value:{type:String,default:"--"}},setup(e){const{t}=ee();return{t}}};const pt=e=>(Z("data-v-ebd651d1"),e=e(),q(),e),ft={class:"table-rewards"},ht={class:"text-top-all"},_t={key:0,class:"icon-hover-box"},wt=pt(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-information"})],-1)),bt={class:"tips-text-box"},Ct=["src"];function yt(e,t,r,a,S,b){return v(),y("div",ft,[n("div",ht,[n("p",null,f(r.titleText),1),r.tipsText?(v(),y("div",_t,[wt,n("div",bt,f(r.titleText=="est.APR"?"Estimated APR of the current epoch for all xCETUS holders.":"The number of qualified positions in this epoch."),1)])):O("",!0)]),n("span",null,[n("p",null,[r.imgIcon?(v(),y("img",{key:0,src:r.imgIcon,alt:""},null,8,Ct)):O("",!0),N(f(r.value),1)])])])}const St=Y(gt,[["render",yt],["__scopeId","data-v-ebd651d1"]]),Tt={setup(e){const{t}=ee(),r=ve(),a=c(()=>r),S=c(()=>a.value.pendingAmount),b=c(()=>(console.log(a.value.nextStartTime,"===>xcetus.value.nextStartTime"),a.value.nextStartTime)),d=c(()=>1683094391),w=c(()=>a.value.xcetusShare),s=ge(),i=c(()=>s),g=c(()=>a.value.cetusApr&&a.value.cetusApr>.01?se(a.value.cetusApr,2):a.value.cetusApr),h=c(()=>a.value.pendingCoinInfo),m=_("");return M(()=>h.value,A=>{A&&!ke(A)?m.value=`Pending yield (${A.symbol})`:m.value="Pending yield"},{immediate:!0}),{t,pendingAmount:S,nextStartTime:b,wallet:i,myShare:w,importIcon:X,nextEndTime:d,pendingYieldText:m,cetusApr:g,pendingCoinInfo:h,getNextEpoch:()=>{setTimeout(()=>{r.getVeNFTDividendInfo()},3e3)}}}},At=""+new URL("staking-rewards-banner-h5.1c7401db.png",import.meta.url).href,kt="data:image/png;base64,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";const ue=e=>(Z("data-v-a46a38ce"),e=e(),q(),e),It={class:"top-banner"},Bt=ue(()=>n("img",{src:At,alt:""},null,-1)),Nt=ue(()=>n("p",null,"Convert CETUS to xCETUS to start earning",-1)),xt={class:"bot-count"},Et=ue(()=>n("span",null,"Reward distribution in ",-1)),Dt={class:"holder-rewards"},$t={class:"title"},Ut=ue(()=>n("div",{class:"left"},[n("img",{src:kt,alt:""}),n("span",null,"xCETUS Staking Rewards")],-1)),Rt={class:"right"},Lt={class:"rewards-value"},Pt={class:"claim-h5"};function Wt(e,t,r,a,S,b){var i;const d=vt,w=ie,s=St;return v(),y("div",null,[n("div",It,[Bt,Nt,n("div",xt,[Et,U(d,{"start-time":a.nextStartTime,onCountDown:t[0]||(t[0]=g=>e.$emit("getNextEpoch"))},null,8,["start-time"])])]),n("div",Dt,[n("div",$t,[Ut,n("div",Rt,[a.wallet&&a.wallet.address?(v(),L(w,{key:0,disabled:a.pendingAmount=="--"||a.pendingAmount<=0,onClick:t[1]||(t[1]=g=>e.$emit("claimPendingYield"))},{default:V(()=>[N(" Claim ")]),_:1},8,["disabled"])):O("",!0)])]),n("div",Lt,[U(s,{"title-text":"est.APR","tips-text":"good",value:a.cetusApr+"%"},null,8,["title-text","value"]),U(s,{"title-text":"My share",value:a.myShare+"%"},null,8,["value"]),U(s,{"title-text":a.pendingYieldText,"img-icon":(i=a.pendingCoinInfo)==null?void 0:i.logo_url,value:a.pendingAmount},null,8,["title-text","img-icon","value"])]),n("div",Pt,[a.wallet&&a.wallet.address?(v(),L(w,{key:0,disabled:a.pendingAmount=="--"||a.pendingAmount<=0,onClick:t[2]||(t[2]=g=>e.$emit("claimPendingYield"))},{default:V(()=>[N(" Claim ")]),_:1},8,["disabled"])):O("",!0)])])])}const Mt=Y(Tt,[["render",Wt],["__scopeId","data-v-a46a38ce"]]),Ot={props:{startTime:{type:String,require:!0,default:""},endTime:{type:Number,require:!0,default:0}},setup(e,t){const r=_("--"),a=_("--"),S=_("--"),b=_("--");let d=null;Te(()=>{window.clearInterval(d)});const w=()=>{const i=new Date().getTime()/1e3;Number(i)<=Number(e.startTime)&&s(e.startTime),Number(i)>Number(e.startTime)&&Number(i)<=Number(e.endTime)&&s(e.endTime)},s=i=>{d=setInterval(()=>{let g=new Date().getTime()/1e3,m=i-parseInt(String(g));if(m==0){t.emit("countDown"),clearInterval(d),window.clearInterval(d),d=null;return}else m<0&&(clearInterval(d),window.clearInterval(d),t.emit("countDown"),d=null);m--;let l=parseInt(String(m/60/60/24));l=l<10?"0"+l:l;let A=parseInt(String(m/60/60%24));A=A<10?"0"+A:A;let x=parseInt(String(m/60%60));x=x<10?"0"+x:x;let D=parseInt(String(m%60));D=D<10?"0"+D:D,r.value=l,a.value=A,S.value=x,b.value=D},1e3)};return M(()=>e.startTime,(i,g)=>{i!==g&&w()},{immediate:!0}),{day:r,hour:a,min:S,sec:b}}};const re=e=>(Z("data-v-131b3f4e"),e=e(),q(),e),Vt={class:"count-down"},Ft=re(()=>n("span",null,"D : ",-1)),Ht=re(()=>n("span",null,"H : ",-1)),Xt=re(()=>n("span",null,"M : ",-1)),Yt=re(()=>n("span",null,"S",-1));function jt(e,t,r,a,S,b){return v(),y("div",Vt,[N(f(a.day)+" ",1),Ft,N(" "+f(a.hour)+" ",1),Ht,N(" "+f(a.min)+" ",1),Xt,N(" "+f(a.sec)+" ",1),Yt])}const Zt=Y(Ot,[["render",jt],["__scopeId","data-v-131b3f4e"]]),qt={components:{WcountDown:Zt},props:{vItem:{type:Object,default:()=>({})}},setup(e,t){const{t:r}=ee();console.log(e.vItem,"vItem");const a=ve(),S=i=>{t.emit("claim",i),a.setClaimLoading(i.id)},b=c(()=>a),d=c(()=>new Date().getTime()/1e3>e.vItem.locked_until_time),w=c(()=>e.vItem.id==b.value.claimLoading);return{t:r,prettyAmount:H,claimBoolean:d,toClaim:S,loading:w,toCancel:i=>{t.emit("cancelRedeemPayload",i),a.setClaimLoading(i.id)}}}};const pe=e=>(Z("data-v-e16fafac"),e=e(),q(),e),Gt={class:"vesting-box"},Kt={class:"left"},Qt=pe(()=>n("img",{src:xe,alt:""},null,-1)),zt=pe(()=>n("svg",{class:"icon","aria-hidden":"true"},[n("use",{"xlink:href":"#icon-icon-swap2"})],-1)),Jt=pe(()=>n("img",{src:Ee,alt:""},null,-1)),en={class:"available-all"},tn={class:"available"},nn={key:0},an={key:1};function on(e,t,r,a,S,b){const d=Ge("WcountDown"),w=ie;return v(),y("div",Gt,[n("div",Kt,[n("p",null,[n("span",null,[Qt,N(" "+f(a.prettyAmount(r.vItem.xcetus_amount,9))+" xCETUS ",1)]),zt,n("span",null,[Jt,N(" "+f(a.prettyAmount(r.vItem.cetus_amount,9))+" CETUS ",1)])]),n("div",en,[n("div",tn,[n("span",null,f(a.claimBoolean?"Available":"Available in"),1),a.claimBoolean?O("",!0):(v(),L(d,{key:0,"start-time":r.vItem.locked_start_time,"end-time":r.vItem.locked_until_time,onCountDown:t[0]||(t[0]=s=>e.$emit("countDown"))},null,8,["start-time","end-time"]))]),n("div",{class:le(a.claimBoolean?"highlight right-h5":"right-h5")},[a.claimBoolean?(v(),y("span",nn,"Claim")):(v(),y("span",an,"Cancel"))],2)])]),a.claimBoolean?(v(),L(w,{key:0,disabled:!a.claimBoolean,loading:a.loading,onClick:t[1]||(t[1]=s=>a.toClaim(r.vItem))},{default:V(()=>[N(f(a.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["disabled","loading"])):(v(),L(w,{key:1,type:"text",class:"right",loading:a.loading,onClick:t[2]||(t[2]=s=>a.toCancel(r.vItem))},{default:V(()=>[N(f(a.claimBoolean?"Claim":"Cancel"),1)]),_:1},8,["loading"]))])}const ln=Y(qt,[["render",on],["__scopeId","data-v-e16fafac"]]),sn=Ae({props:{inputValue:{type:String,default:""},coinSymbol:{type:String,default:""},whaleDirection:{type:String,default:""},address:{type:String,default:""},balance:{type:String,default:""}},setup(e,t){const{t:r,locale:a}=ee(),S=Ie(),b=c(()=>S),d=Ke(Qe,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0}),w=ge(),s=c(()=>w),i=Be(),g=c(()=>i),h=l=>{const x=new RegExp("[^\\d-]*(\\d*(?:\\.\\d{0,9})?).*$");l.target.value=l.target.value.replace(x,"$1")},m=c(()=>{var l;return g.value.tokensObj&&e.address&&g.value.tokensObj[e.address]&&((l=g.value.tokensObj[e.address])==null?void 0:l.decimals)});return M(()=>g.value.RATES,l=>{l&&console.log(l,"price====>")},{immediate:!0}),{pool:g,t:r,addCommom:Ne,store:b,wallet:s,indicator:d,inputChange:h,importIcon:X,coinDecimals:m}}});const un=e=>(Z("data-v-e2d79e01"),e=e(),q(),e),rn={class:"card"},dn={class:"top"},cn={class:"left"},mn={class:"loading-token"},vn={key:0,src:Ee,alt:""},gn={key:1,src:xe,alt:""},pn={class:"bottom"},fn=un(()=>n("div",null,null,-1)),hn={class:"top"},_n={class:"right"},wn={key:0,class:"balance"};function bn(e,t,r,a,S,b){var i,g;const d=Je,w=et,s=ie;return v(),y("div",rn,[n("div",dn,[U(d,{value:e.inputValue,placeholder:"0.0",onChange:e.inputChange,onInput:t[0]||(t[0]=h=>e.$emit("onInput",h.target.value)),onFocus:t[1]||(t[1]=h=>e.$emit("onFocus"))},null,8,["value","onChange"]),n("div",cn,[n("div",mn,[e.coinSymbol=="CETUS"?(v(),y("img",vn)):(v(),y("img",gn)),n("div",null,[n("p",null,f(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1)])])])]),n("div",pn,[fn,n("div",hn,[n("div",_n,[n("span",null,f(e.$t("common.balance")),1),e.balance?(v(),y("span",wn,f(("addCommom"in e?e.addCommom:ze(Ne))(e.balance)),1)):(v(),L(w,{key:1,loading:!0,class:"loading-token-skeleton",active:"",paragraph:!1})),e.whaleDirection=="From"?(v(),L(s,{key:2,class:"max-btn",disabled:!e.balance||e.balance==0||!((i=e.wallet)!=null&&i.address),onClick:t[2]||(t[2]=h=>e.$emit("halfBalanne"))},{default:V(()=>[N(f("Half"))]),_:1},8,["disabled"])):O("",!0),e.whaleDirection=="From"?(v(),L(s,{key:3,class:"max-btn",disabled:!e.balance||e.balance==0||!((g=e.wallet)!=null&&g.address),onClick:t[3]||(t[3]=h=>e.$emit("maxBalanne"))},{default:V(()=>[N(f(e.$t("button.max")),1)]),_:1},8,["disabled"])):O("",!0)])])])])}const Cn=Y(sn,[["render",bn],["__scopeId","data-v-e2d79e01"]]),yn=Ae({setup(){const e=ve(),t=c(()=>e),r=c(()=>t.value.venft_id),a=c(()=>t.value.venftInfo),S=Be(),b=c(()=>S);c(()=>b.value.tokensObj&&b.value.tokensObj["0x2a4f647bc73f070182436658bff75060246019857c769ad9268c22c4472bca7f::cetus::CETUS"]);const d=_("");let w=_(!1);const s=_(""),i=_(""),g=_(!1),h=_("convert"),{t:m}=ee(),l=_([{time:"15 D",num:15},{time:"30 D",num:30},{time:"90 D",num:90},{time:"180 D",num:180}]),A=_([{name:"est.APR",value:"100.12%"},{name:"My share",value:"<0.1%"},{name:"Pending yield (USDC)",value:0}]),x=_([{name:"My total locked",value:"$100.12"},{name:"Pending rewards (xCETUS)",value:"100.12"},{name:"",value:""}]),D=_([{name:"My positions",value:"12"},{name:"My qualified positions",value:"0"},{name:"Pending rewards (xCETUS)",value:"100.12"}]),De=window.setInterval(()=>{e.getXcetusApr(),p.value.address&&(e.getMyShare(p.value.address),e.getVeNFTDividendInfo())},6e4);tt(()=>{document.addEventListener("visibilitychange",()=>{document.hidden||e.getDividendManager()}),e.getXcetusApr(),e.getDividendManager()}),nt(()=>{window.clearInterval(De)});const G=c(()=>t.value.whaleBalance),$e=c(()=>t.value.xWhaleBalance),K=c(()=>t.value.availableXwhale),Ue=c(()=>t.value.redeemingXwhale),Re=c(()=>{if(h.value=="convert"){if(Number(s.value)>Number(G.value))return!0}else if(Number(s.value)>Number(K.value))return!0;return!s.value||!i.value||Number(s.value)==0||Number(i.value)==0}),k=_("180"),de=c(()=>(console.log(h.value=="convert","===>1212211"),h.value=="convert"&&Number(s.value)>Number(G.value)?m("button.insufficientBalance",{name:"CETUS"}):h.value!=="convert"&&Number(s.value)>Number(K.value)?m("button.insufficientBalance",{name:"xCETUS"}):Number(k.value)<15?"Minimum vesting duration is 15 days":h.value=="convert"&&r?"Convert":h.value!=="convert"&&r?"Redeem":"Convert"));console.log(de.value,"btnText.value===>");const Le=o=>{s.value="",i.value="",h.value=o},Pe=()=>{w.value=!0,setTimeout(()=>{w.value=!1},300)},We=o=>{k.value=o},I=_(!1),F=st("Sui"),fe=ge(),p=c(()=>fe),he=c(()=>t.value.ownerLocks);M(()=>p.value.address,o=>{console.log("触发",o),o?(e.getOwnerVeNFT(o),e.getAccountWhaleBalance(o),e.getOwnerLockCetuss(o),e.getMyShare(o)):e.loginOut()},{immediate:!0});const E=c(()=>ce.value.chainName?it(ce.value.chainName):{}),_e=Ie(),ce=c(()=>_e),Q=c(()=>ce.value.chainName),{setIsShowSuccess:z,setIsShowRejected:P,setIsShowWaiting:T,setTransactionDesc:J,setTransactionTxid:W}=_e,we=async()=>{I.value=!0,T(!0),W(""),J(m("tips.converting",{from:`${s.value} CETUS`,and:"to",to:`${s.value} xCETUS`}));try{let o;const u=oe(s.value,9);console.log(r.value,"===>venft_id.value");const C=await F.depositCetus(u,r.value);console.log(C,"payload==>");const $=await p.value.currentWallet.signAndExecuteTransactionBlock(C);if(o=E.value.handleTx($),o&&o.hash){W(o.hash),T(!1),z(!0);const B={title:"Converted",desc:`Converted ${s.value} xCETUS successfully`,hash:o.hash,tit:"Converted",icon:"icon-icon-Swap",tokenInfo:{tokena:"CETUS",numa:`- ${s.value}`,logoa:X("/sui-image/WHALE-icon.png"),tokenb:"xCETUS",numb:`+ ${s.value}`,logob:X("/sui-image/xWHALE-icon.png")}};Q.value!=="Aptos"&&(B.res=o.res),E.value.showTransitionPending(B);const R=await E.value.watchTransaction(B);console.log("0221###swap###transitionStatus####",R),R&&setTimeout(()=>{e.getAccountWhaleBalance(p.value.address),e.getOwnerVeNFT(p.value.address),e.getOwnerLockCetuss(p.value.address),e.getMyShare(p.value.address)},3e3),I.value=!1}else T(!1),P(!0),I.value=!1;s.value=""}catch(o){T(!1),P(!0),I.value=!1,s.value="",console.log(o,"error===>")}},j=_(!0),me=_("0"),Me=async()=>{const o=oe(s.value,9),u=await F.redeemNum(o,Number(k.value));i.value=H(u.amountOut,9),console.log("===>amount2222"),me.value=u.percent},Oe=async()=>{const o=oe(i.value,9),u=await F.reverseRedeemNum(o,Number(k.value));console.log(u,"===>amount111"),s.value=H(u.amountOut,9),me.value=u.percent};M(()=>[s.value,k.value,j.value],([o,u,C])=>{o&&u&&C&&Number(u)>=15&&Me(),!o&&C&&(i.value="")},{immediate:!0}),M(()=>[i.value,k.value,j.value],([o,u,C])=>{o&&u&&!C&&Number(u)>=15&&(Oe(),console.log(o,"===>toCoinAmount")),!o&&!C&&(s.value="")},{immediate:!0}),M(()=>[k.value,j.value],([o,u])=>{Number(o)>180?k.value="180":Number(o)<15?u?i.value="":s.value="":o||(u?s.value="":i.value="")},{immediate:!0});const Ve=()=>{j.value=!0,s.value=se(new Se(h.value!=="convert"?K.value:G.value).div(new Se(2)).toString(),9)},Fe=()=>{j.value=!0,s.value=h.value!=="convert"?se(K.value,9):se(G.value,9)},be=async()=>{I.value=!0,T(!0),W(""),J(m("tips.redeeming",{from:`${s.value} xCETUS`,to:`${i.value} CETUS`}));try{let o;const u=oe(s.value,9);console.log(u.toString(),"538====>");const C=await F.getRedeemLockPayload(u,r.value,Number(k.value));console.log(C,"payload==>");const $=await p.value.currentWallet.signAndExecuteTransactionBlock(C);if(o=E.value.handleTx($),o&&o.hash){W(o.hash),T(!1),z(!0);const B={title:"Redemption",desc:"Redemption transaction submitted successfully.",hash:o.hash,tit:"Vesting",icon:"icon-icon-Removed",tokenInfo:{tokena:"xCETUS",numa:`- ${s.value}`,logoa:X("/sui-image/xWHALE-icon.png")}};Q.value!=="Aptos"&&(B.res=o.res),E.value.showTransitionPending(B);const R=await E.value.watchTransaction(B);console.log("0221###swap###transitionStatus####",R),R&&setTimeout(()=>{e.getAccountWhaleBalance(p.value.address),e.getOwnerVeNFT(p.value.address),e.getOwnerLockCetuss(p.value.address),e.getMyShare(p.value.address)},3e3),I.value=!1}else T(!1),P(!0),I.value=!1;s.value="",i.value=""}catch(o){T(!1),P(!0),I.value=!1,s.value="",i.value="",console.log(o,"error===>")}};M(()=>[r.value,he.value,a.value,p.value.address],([o,u,C,$])=>{$&&(o&&e.getVeNFTDividendInfo(),o&&!ke(C)&&(console.log("执行了",u),e.getAvailableXCetus()))},{immediate:!0,deep:!0});const He=async o=>{I.value=!0,T(!0),W(""),J("");try{let u;console.log(o.id,"==>vItem.id");const C=await F.getCancelRedeemPayload(o.id,r.value);console.log(C,"payload==>");const $=await p.value.currentWallet.signAndExecuteTransactionBlock(C);if(u=E.value.handleTx($),u&&u.hash){W(u.hash),T(!1),z(!0);const B={title:"Cancelled Redemption",desc:"Cancelled redemption successfully.",hash:u.hash,tit:"Cancelled Redemption",icon:"icon-a-icon-Shutdown",tokenInfo:{tokena:"xCETUS",numa:`+ ${H(o.xcetus_amount,9)}`,logoa:X("/sui-image/xWHALE-icon.png")}};Q.value!=="Aptos"&&(B.res=u.res),E.value.showTransitionPending(B);const R=await E.value.watchTransaction(B);console.log("0221###swap###transitionStatus####",R),R&&setTimeout(()=>{e.getOwnerVeNFT(p.value.address),e.getOwnerLockCetuss(p.value.address)},3e3),I.value=!1}else T(!1),P(!0),I.value=!1;s.value="",i.value=""}catch(u){T(!1),P(!0),I.value=!1,s.value="",i.value="",e.setClaimLoading(""),console.log(u,"error===>")}},Xe=_({}),Ye=()=>{console.log("倒计时结束"),e.getOwnerLockCetuss(p.value.address)},je=async o=>{console.log(o,"vItem===>"),I.value=!0,T(!0),W(""),J(`${m("tips.claimingPendingYield")} ${H(o.cetus_amount,9)} CETUS`);try{let u;const C=await F.getRedeemPayload(o.id,r.value);console.log(C,"payload==>");const $=await p.value.currentWallet.signAndExecuteTransactionBlock(C);if(u=E.value.handleTx($),u&&u.hash){W(u.hash),T(!1),z(!0);const B={title:"Claimed",desc:`Claimed ${H(o.cetus_amount,9)} CETUS successfully.`,hash:u.hash,tit:"CETUS Claimed",icon:"icon-icon-Removed",tokenInfo:{tokena:"CETUS",numa:`+ ${H(o.cetus_amount,9)}`,logoa:X("/sui-image/WHALE-icon.png")}};Q.value!=="Aptos"&&(B.res=u.res),E.value.showTransitionPending(B);const R=await E.value.watchTransaction(B);console.log("0221###swap###transitionStatus####",R),R&&setTimeout(()=>{e.getOwnerLockCetuss(p.value.address),e.getAccountWhaleBalance(p.value.address),e.getOwnerVeNFT(p.value.address),e.getMyShare(p.value.address)},3e3),I.value=!1}else T(!1),P(!0),I.value=!1;s.value="",i.value=""}catch(u){T(!1),P(!0),I.value=!1,s.value="",i.value="",e.setClaimLoading(""),console.log(u,"error===>")}},Ze=()=>{de.value=="Redeem"?be():we()},ne=c(()=>t.value.pendingCoinInfo),ae=c(()=>t.value.pendingAmount);return{validateInput:()=>{k.value&&(k.value=k.value.replace(/[^\d]/g,""),k.value.charAt(0)==="0"&&(k.value=k.value.slice(1)))},countDown:Ye,value:d,change:w,clickExchange:Pe,fromCoinAmount:s,toCoinAmount:i,showCoinSelect:g,headSwitchValue:h,headSwitchChange:Le,vestingDateList:l,vestingParameter:k,vestingTab:We,holderList:A,lockupList:x,leaderboardList:D,whaleBalance:G,depositCetus:we,btnText:de,loading:I,redeemRatio:me,halfBalanne:Ve,maxBalanne:Fe,xWhaleBalance:$e,availableXwhale:K,redeemingXwhale:Ue,withdrawWhale:be,ownerLocks:he,cancelRedeemPayload:He,holderInfo:Xe,btnDisabled:Re,fixedFromCoin:j,walletStore:fe,claimWhale:je,wallet:p,depositOrWithdraw:Ze,pendingAmount:ae,claimPendingYield:async()=>{T(!0),W(""),J(`${m("tips.claimingPendingYield")} ${ae.value} ${ne.value.symbol}`);try{let o;const u=await F.getRedeemDividendPayload(r.value);console.log(u,"payload==>");const C=await p.value.currentWallet.signAndExecuteTransactionBlock(u);if(o=E.value.handleTx(C),o&&o.hash){W(o.hash),T(!1),z(!0);const $={title:"Claim",desc:`Claimed ${ae.value} ${ne.value.symbol} successfully.`,hash:o.hash,tit:"Claimed Rewards",icon:"icon-icon-Removed",tokenInfo:{tokena:ne.value.symbol,numa:`+ ${ae.value}`,logoa:ne.value.logo_url}};Q.value!=="Aptos"&&($.res=o.res),E.value.showTransitionPending($);const B=await E.value.watchTransaction($);console.log("0221###swap###transitionStatus####",B),B&&setTimeout(()=>{e.getVeNFTDividendInfo()},3e3)}else T(!1),P(!0),I.value=!1}catch(o){T(!1),P(!0),console.log(o,"error===>")}},inputBlur:()=>{Number(k.value)<15&&(k.value="15")},getNextEpoch:()=>{e.getVeNFTDividendInfo()}}}});const te=e=>(Z("data-v-402411b7"),e=e(),q(),e),Sn={class:"dashboard-all"},Tn={class:"dashboard-content"},An={class:"content-left"},kn={key:0,class:"vesting"},In=te(()=>n("p",null,"Vesting",-1)),Bn={class:"content-right"},Nn={key:0,class:"card-container"},xn={class:"card-item"},En={class:"card-item"},Dn={class:"exchange"},$n=te(()=>n("use",{"xlink:href":"#icon-icon-swap2"},null,-1)),Un=[$n],Rn={key:1,class:"card-redeem"},Ln={class:"card-item"},Pn={class:"vesting-duration"},Wn=te(()=>n("p",null,"Vesting duration",-1)),Mn={class:"vesting-content"},On={class:"vesting-left"},Vn={class:"value-days"},Fn=te(()=>n("span",null,"days",-1)),Hn={class:"vesting-right"},Xn=["onClick"],Yn={class:"card-item"},jn={class:"redeem-ratio"},Zn=te(()=>n("span",null,"Redeem ratio",-1));function qn(e,t,r,a,S,b){const d=qe,w=Mt,s=ln,i=ut,g=Cn,h=lt,m=ie;return v(),y("div",Sn,[U(d,{title:"Dashboard","total-xwhale":e.xWhaleBalance,"available-xwhale":e.availableXwhale,"redeeming-xwhale":e.redeemingXwhale},null,8,["total-xwhale","available-xwhale","redeeming-xwhale"]),n("div",Tn,[n("div",An,[U(w,{"holder-info":e.holderInfo,"pending-amount":e.pendingAmount,onClaimPendingYield:e.claimPendingYield,onGetNextEpoch:e.getNextEpoch},null,8,["holder-info","pending-amount","onClaimPendingYield","onGetNextEpoch"]),e.ownerLocks&&e.ownerLocks.length>0?(v(),y("div",kn,[In,(v(!0),y(Ce,null,ye(e.ownerLocks,l=>(v(),L(s,{key:l,"v-item":l,onCancelRedeemPayload:e.cancelRedeemPayload,onCountDown:e.countDown,onClaim:e.claimWhale},null,8,["v-item","onCancelRedeemPayload","onCountDown","onClaim"]))),128))])):O("",!0)]),n("div",Bn,[U(i,{"head-switch-value":e.headSwitchValue,"left-text":"Get xCETUS","right-text":"Redeem CETUS",onHeadSwitchChange:t[0]||(t[0]=l=>{e.headSwitchChange(l)})},null,8,["head-switch-value"]),e.headSwitchValue=="convert"?(v(),y("div",Nn,[n("div",xn,[U(g,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[1]||(t[1]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"CETUS","whale-direction":"From",balance:e.whaleBalance,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:t[2]||(t[2]=l=>{e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),n("div",En,[U(g,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[3]||(t[3]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"To",balance:e.availableXwhale,onOnInput:t[4]||(t[4]=l=>{e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance"])]),n("img",{class:le(e.change?"gang animationex":"gang"),src:rt,alt:""},null,2),n("div",Dn,[(v(),y("svg",{class:le(e.change?"icon animationex":"icon"),"aria-hidden":"true"},Un,2))])])):(v(),y("div",Rn,[n("div",Ln,[U(g,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[5]||(t[5]=l=>e.fromCoinAmount=l),"input-value":e.fromCoinAmount,"coin-symbol":"xCETUS","whale-direction":"From",balance:e.availableXwhale,onHalfBalanne:e.halfBalanne,onMaxBalanne:e.maxBalanne,onOnInput:t[6]||(t[6]=l=>{e.fixedFromCoin=!0,e.fromCoinAmount=l})},null,8,["modelValue","input-value","balance","onHalfBalanne","onMaxBalanne"])]),n("div",Pn,[Wn,n("div",Mn,[n("div",On,[n("div",Vn,[at(n("input",{"onUpdate:modelValue":t[7]||(t[7]=l=>e.vestingParameter=l),onInput:t[8]||(t[8]=(...l)=>e.validateInput&&e.validateInput(...l)),onBlur:t[9]||(t[9]=(...l)=>e.inputBlur&&e.inputBlur(...l))},null,544),[[ot,e.vestingParameter]])]),Fn]),n("div",Hn,[(v(!0),y(Ce,null,ye(e.vestingDateList,l=>(v(),y("div",{key:l.time,class:le(["box-table",{"box-table-active":l.num===Number(e.vestingParameter)}]),onClick:A=>e.vestingTab(l.num)},f(l.time),11,Xn))),128))])]),U(h,{value:e.vestingParameter,"onUpdate:value":t[10]||(t[10]=l=>e.vestingParameter=l),max:180,min:15},null,8,["value"])]),n("div",Yn,[U(g,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[11]||(t[11]=l=>e.toCoinAmount=l),"input-value":e.toCoinAmount,"coin-symbol":"CETUS","whale-direction":"To",balance:e.whaleBalance,onOnInput:t[12]||(t[12]=l=>{e.fixedFromCoin=!1,e.toCoinAmount=l})},null,8,["modelValue","input-value","balance"])]),n("div",jn,[Zn,n("p",null,f(e.redeemRatio)+"%",1)])])),e.wallet&&e.wallet.address?(v(),L(m,{key:2,class:"big-btn",loading:e.loading,disabled:e.btnDisabled,onClick:e.depositOrWithdraw},{default:V(()=>[n("span",null,f(e.btnText),1)]),_:1},8,["loading","disabled","onClick"])):(v(),L(m,{key:3,class:"big-btn",onClick:t[13]||(t[13]=l=>e.walletStore.setIsShowWalletModal(!0))},{default:V(()=>[n("span",null,f(e.$t("button.connectWallet")),1)]),_:1}))])])])}const ma=Y(yn,[["render",qn],["__scopeId","data-v-402411b7"]]);export{ma as default};
