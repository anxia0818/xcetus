import{_ as rn}from"./back.0496275e.js";import{_ as dn}from"./refresh-icon.a7bd8c62.js";import{a as He,$ as Vo,y as Co,r as h,ah as vn,e as Ee,Q as no,o as u,c as G,w as be,h as o,i as W,j as Ve,v as m,f as _,F as oo,E as Eo,A as Te,x as z,ai as mn,I as cn,B as So,p as ze,k as Je,H as po,K as Po,l as k,q as Ce,b as To,m as Ke,s as No,t as Ye,u as $,G as Wo,O as Ao,D as ro,C as pn,L as fn,z as jo,P as gn,M as Ho,S as yn}from"./entry.bf11e6cf.js";/* empty css              */import{a as bn,b as kn,_ as hn}from"./icon-error_2x.a3b9072d.js";import{u as Qe,a as zo}from"./autoPool.e99330c8.js";import{u as xe,c as Ze,a as N,g as Io,d as Ue,s as P,T as je,b as pe,p as Mo,e as Jo,f as _n,V as $o}from"./pool.7ca798cc.js";import{_ as fo}from"./token-warning.82e4f051.js";import{_ as Xo}from"./auto-pool-apy-tips.43c832e0.js";import{u as go,a as Ro}from"./sha256.5aa34678.js";import{i as uo}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as Zo}from"./assets-card.7f136e34.js";import{_ as Qo}from"./coin-lock.53a6abe6.js";import{_ as Go,a as Yo}from"./auto-pool-remove-modal.15942bda.js";/* empty css              *//* empty css              */import{D as a}from"./decimal.0bdeb344.js";/* empty css              */import{u as wn}from"./swapRouter.89650254.js";/* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.8202c6f1.js";const An=He({components:{Modal:Vo},setup(e,s){const{t:J,locale:X}=Co(),T=Qe(),C=["0.1","0.5","1"],c=h(T.slippage||.1),{setSlippage:S}=T,w=vn();console.log(c.value,"slippage.value");const i=h(!1);function t(n,v){i.value=!1,c.value=v}function q(){S(c.value),s.emit("onClose",!1)}return{settingArr:C,changeActiveIndex:t,confirm:q,emit:w,slippage:c,t:J,isInput:i,inputChange:n=>{const v=new RegExp(/[^\d^\.]+/g);n.target.value=n.target.value.replace(v,""),c.value=n.target.value}}}});const Ko=e=>(ze("data-v-c5b99de4"),e=e(),Je(),e),In=Ko(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),$n={class:"setting-container"},Cn={class:"title"},Sn=Ko(()=>o("img",{src:hn,alt:""},null,-1)),Pn={class:"tag-list"},Tn={key:0,src:bn,alt:""},Nn={key:1,src:kn,alt:""},Rn={class:"footer"};function qn(e,s,J,X,T,C){const c=mn,S=cn,w=So,i=no("Modal");return u(),G(i,{title:"Settings",class:"setting",centered:"",visible:!0,width:"400px",onCancel:s[3]||(s[3]=t=>e.$emit("onClose"))},{closeIcon:be(()=>[In]),footer:be(()=>[o("div",Rn,[W(w,{type:"cancel",class:"cancel-btn cancel-btn-new",onClick:s[2]||(s[2]=t=>e.$emit("onClose"))},{default:be(()=>[Ve(m(e.$t("button.cancel")),1)]),_:1}),W(w,{class:"confirmbtn",disabled:Number(e.slippage)==0||Number(e.slippage)>1||Number(e.slippage)<.01,onClick:e.confirm},{default:be(()=>[Ve(m(e.$t("button.confirm")),1)]),_:1},8,["disabled","onClick"])])]),default:be(()=>[o("div",$n,[o("div",Cn,[Sn,o("span",null,m(e.$t("modal.slippageTolerance")),1)]),o("div",Pn,[(u(!0),_(oo,null,Eo(e.settingArr,(t,q)=>(u(),G(c,{key:q,class:Te(!e.isInput&&t==e.slippage?"tag-active":""),onClick:p=>e.changeActiveIndex(q,t)},{default:be(()=>[Ve(m(t)+"% ",1)]),_:2},1032,["class","onClick"]))),128)),W(c,{class:Te(["input-tag",e.isInput?"tag-active":""]),onClick:s[1]||(s[1]=t=>e.isInput=!0)},{default:be(()=>[W(S,{value:e.slippage,"onUpdate:value":s[0]||(s[0]=t=>e.slippage=t),placeholder:"",suffix:"%",class:Te(["slippage-input",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-input-waring":Number(e.slippage)>1?"slippage-input-error":""]),onChange:e.inputChange},null,8,["value","class","onChange"])]),_:1},8,["class"])])]),Number(e.slippage)>.5&&Number(e.slippage)<1||Number(e.slippage)>1?(u(),_("div",{key:0,class:Te(["slippage-hint",Number(e.slippage)>.5&&Number(e.slippage)<1?"slippage-hint-waring":Number(e.slippage)>1?"slippage-hint-error":""])},[Number(e.slippage)>.5&&1>=Number(e.slippage)?(u(),_("img",Tn)):z("",!0),Number(e.slippage)>1?(u(),_("img",Nn)):z("",!0),o("p",null,m(Number(e.slippage)>.5&&1>=Number(e.slippage)?e.$t("tips.slippageTolerance2"):Number(e.slippage)>1?e.$t("tips.slippageTolerance1"):""),1)],2)):z("",!0)]),_:1})}const Bn=Ee(An,[["render",qn],["__scopeId","data-v-c5b99de4"]]),Dn=He({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,s){const J=h(!1),X=h(null),T=h(0);let C=h(!1);const c=h(20);xe();const S=Qe(),w=h(!1);po(()=>{}),Po(()=>{clearInterval(X.value)});const i=()=>{C.value=!1,X.value=setInterval(()=>{var r;w.value||T.value<c.value&&(T.value+=1,T.value===c.value&&((r=e==null?void 0:e.poolInfo)!=null&&r.address&&p(),T.value=0))},1e3)},t=k(()=>S.slippage),q=()=>{s.emit("clearAll")},p=()=>{C.value||(C.value=!0,T.value=0,s.emit("clickRefresh"),setTimeout(()=>{C.value=!1},1e3))};Ce(()=>e.poolInfo,r=>{r&&!X.value&&i()},{immediate:!0});const n=To(),v=Ke();return console.log(v,"route"),{refresh:C,clickRefresh:p,isShowSwapSetting:J,countdown:T,autoRefreshTime:c,slippage:t,clearAll:q,checkNullObj:Ze,router:n,route:v}}});const Un=e=>(ze("data-v-71491a33"),e=e(),Je(),e),Ln={class:"title"},Fn={class:"left"},On=Un(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),Mn={key:0,class:"deposit-progress"};function Vn(e,s,J,X,T,C){const c=rn,S=dn,w=Bn;return u(),_("div",Ln,[o("div",Fn,[W(c)]),o("div",{class:Te(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[o("div",{class:"slippage-icon",onClick:s[0]||(s[0]=i=>e.isShowSwapSetting=!0)},[On,o("span",null,m(e.slippage)+"%",1)]),e.route.name!=="liquidity-create"?(u(),_("div",Mn,[W(S,{loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])])):z("",!0)],2),e.isShowSwapSetting?(u(),G(w,{key:0,onOnClose:s[1]||(s[1]=i=>e.isShowSwapSetting=!1)})):z("",!0)])}const En=Ee(Dn,[["render",Vn],["__scopeId","data-v-71491a33"]]),Wn=He({components:{AutoPoolApyTips:Xo},setup(){const e=go(),s=k(()=>e),J=xe(),X=k(()=>J),T=Qe(),C=k(()=>T),c=k(()=>s.value.theme),S=Ke(),w=h();Ce(()=>[C.value.positionInfoObj,S.params.id],([v,r])=>{v&&!Ze(v)&&r&&(w.value=v[r],console.log(w.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const i=k(()=>{var v;return(v=w.value)==null?void 0:v.needReverse}),t=v=>{var r;return(v==null?void 0:v.logoURI)||(v==null?void 0:v.logo_url)||((r=X.value.tokensObj[v==null?void 0:v.address])==null?void 0:r.logo_url)||(c.value==="default"?uo("/image/coins/unknown.png"):uo("/image/coins/sui-unknown.png"))},q=k(()=>{var v,r;return console.log((v=w==null?void 0:w.value)==null?void 0:v.poolUSD,"##positionInfo?.value?.poolUSD"),(r=w==null?void 0:w.value)==null?void 0:r.poolUSD}),p=k(()=>{var v,r;return C.value.apyObj&&((r=C.value.apyObj[(v=w.value)==null?void 0:v.id])==null?void 0:r.apr)||"--"}),n=k(()=>s.value.currentExplorer);return{positionInfo:w,needReverse:i,getCoinIcon:t,tvl:q,apy:p,addCommom:N,getExplorerUrl:Io,currentExplorer:n}}});const Xe=e=>(ze("data-v-3d655e5e"),e=e(),Je(),e),jn={class:"auto-pool-v2-info"},Hn={class:"pool-info"},zn={class:"left"},Jn={class:"coin-a"},Xn={alt:""},Zn={class:"coin-b"},Qn={alt:""},Gn={class:"position-name"},Yn={key:0,class:"pool-fee"},Kn=Xe(()=>o("span",null,"Fee tier",-1)),xn={class:"vault-address"},et=["href"],ot=Xe(()=>o("span",null,"Vault Address",-1)),nt=Xe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),tt=[ot,nt],st={class:"apy-and-tvl"},lt={class:"apy"},it=Xe(()=>o("div",{class:"apy-title"},"APY",-1)),at={class:"apy-text"},ut={class:"tvl"},rt=Xe(()=>o("div",{class:"tvl-title"},"TVL",-1)),dt={class:"tvl-text"},vt={class:"pool-info h5-pool-info"},mt={class:"left"},ct={class:"coin-a"},pt={alt:""},ft={class:"coin-b"},gt={alt:""},yt={class:"position-name"},bt={key:0,class:"pool-fee"},kt=Xe(()=>o("span",null,"Fee tier",-1)),ht={class:"left"},_t={class:"vault-address"},wt=["href"],At=Xe(()=>o("span",null,"Vault Address",-1)),It=Xe(()=>o("svg",{class:"icon","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-icon-link1"})],-1)),$t=[At,It],Ct={class:"apy-and-tvl"},St={class:"apy"},Pt=Xe(()=>o("div",{class:"apy-title"},"APY",-1)),Tt={class:"apy-text"},Nt={class:"tvl"},Rt=Xe(()=>o("div",{class:"tvl-title"},"TVL",-1)),qt={class:"tvl-text"};function Bt(e,s,J,X,T,C){var i,t,q,p,n,v,r,y,I,d,D,F,V,x,de,ae,b,g,Z,te,se,ve,j,ee,ke,he,ce,O,H,fe,me,we,f,Q,Le,ge,Fe,Re,Ie,Se,qe,eo,to,so,ue,oe;const c=fo,S=Xo,w=No("image");return u(),_("div",jn,[o("div",Hn,[o("div",zn,[o("div",Jn,[Ye(o("img",Xn,null,512),[[w,e.needReverse?e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_b):e.getCoinIcon((i=e.positionInfo)==null?void 0:i.token_a)]]),W(c,{address:e.needReverse?(v=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:v.address:(p=(q=e.positionInfo)==null?void 0:q.token_a)==null?void 0:p.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Zn,[Ye(o("img",Qn,null,512),[[w,e.needReverse?e.getCoinIcon((y=e.positionInfo)==null?void 0:y.token_a):e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_b)]]),W(c,{address:e.needReverse?(F=(D=e.positionInfo)==null?void 0:D.token_a)==null?void 0:F.address:(d=(I=e.positionInfo)==null?void 0:I.token_b)==null?void 0:d.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",Gn,m(e.needReverse?(x=(V=e.positionInfo)==null?void 0:V.token_b)==null?void 0:x.symbol:(ae=(de=e.positionInfo)==null?void 0:de.token_a)==null?void 0:ae.symbol)+" - "+m(e.needReverse?(g=(b=e.positionInfo)==null?void 0:b.token_a)==null?void 0:g.symbol:(te=(Z=e.positionInfo)==null?void 0:Z.token_b)==null?void 0:te.symbol),1),(se=e.positionInfo)!=null&&se.fee?(u(),_("div",Yn,[Kn,Ve(" "+m(((ve=e.positionInfo)==null?void 0:ve.fee)*100)+"% ",1)])):z("",!0),o("div",xn,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:$(Io))(e.currentExplorer,"poolAddress",(j=e.positionInfo)==null?void 0:j.id),target:"_blank"},tt,8,et)])]),o("div",st,[o("div",lt,[it,o("div",at,[Ve(m(e.apy)+" ",1),W(S)])]),o("div",ut,[rt,o("div",dt,"$"+m(("addCommom"in e?e.addCommom:$(N))(e.tvl,2)),1)])])]),o("div",vt,[o("div",mt,[o("div",ct,[Ye(o("img",pt,null,512),[[w,e.needReverse?e.getCoinIcon((ke=e.positionInfo)==null?void 0:ke.token_b):e.getCoinIcon((ee=e.positionInfo)==null?void 0:ee.token_a)]]),W(c,{address:e.needReverse?(H=(O=e.positionInfo)==null?void 0:O.token_b)==null?void 0:H.address:(ce=(he=e.positionInfo)==null?void 0:he.token_a)==null?void 0:ce.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",ft,[Ye(o("img",gt,null,512),[[w,e.needReverse?e.getCoinIcon((me=e.positionInfo)==null?void 0:me.token_a):e.getCoinIcon((fe=e.positionInfo)==null?void 0:fe.token_b)]]),W(c,{address:e.needReverse?(Le=(Q=e.positionInfo)==null?void 0:Q.token_a)==null?void 0:Le.address:(f=(we=e.positionInfo)==null?void 0:we.token_b)==null?void 0:f.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),o("div",yt,m(e.needReverse?(Fe=(ge=e.positionInfo)==null?void 0:ge.token_b)==null?void 0:Fe.symbol:(Ie=(Re=e.positionInfo)==null?void 0:Re.token_a)==null?void 0:Ie.symbol)+" - "+m(e.needReverse?(qe=(Se=e.positionInfo)==null?void 0:Se.token_a)==null?void 0:qe.symbol:(to=(eo=e.positionInfo)==null?void 0:eo.token_b)==null?void 0:to.symbol),1),(so=e.positionInfo)!=null&&so.fee?(u(),_("div",bt,[kt,Ve(" "+m(((ue=e.positionInfo)==null?void 0:ue.fee)*100)+"% ",1)])):z("",!0)]),o("div",ht,[o("div",_t,[o("a",{href:("getExplorerUrl"in e?e.getExplorerUrl:$(Io))(e.currentExplorer,"poolAddress",(oe=e.positionInfo)==null?void 0:oe.id),target:"_blank"},$t,8,wt)])]),o("div",Ct,[o("div",St,[Pt,o("div",Tt,[Ve(m(e.apy)+" ",1),W(S)])]),o("div",Nt,[Rt,o("div",qt,"$"+m(("addCommom"in e?e.addCommom:$(N))(e.tvl,2)),1)])])])])}const xo=Ee(Wn,[["render",Bt],["__scopeId","data-v-3d655e5e"]]),Dt=He({components:{Slider:Wo},setup(){const e=h(!0),s=xe(),J=k(()=>s),X=Qe(),T=k(()=>X),C=Ke(),c=h();Ce(()=>[T.value.positionInfoObj,C.params.id],([p,n])=>{p&&!Ze(p)&&n&&(c.value=p[n],console.log(c.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const S=k(()=>{var p;return(p=c.value)==null?void 0:p.needReverse}),w=p=>{var n;return(p==null?void 0:p.logoURI)||(p==null?void 0:p.logo_url)||((n=J.value.tokensObj[p==null?void 0:p.address])==null?void 0:n.logo_url)||uo("/image/coins/sui-unknown.png")},i=k(()=>{var y,I,d,D,F,V,x;const p=e.value?((y=c.value)==null?void 0:y.minPrice)&&P(c==null?void 0:c.value.minPrice,6):((I=c.value)==null?void 0:I.maxPrice)&&P(1/(c==null?void 0:c.value.maxPrice),6),n=e.value?((d=c.value)==null?void 0:d.maxPrice)&&P((D=c.value)==null?void 0:D.maxPrice,6):((F=c.value)==null?void 0:F.minPrice)&&P(1/(c==null?void 0:c.value.minPrice),6),v=(S.value?!e.value:e.value)?P((V=c.value)==null?void 0:V.price,6):P(1/((x=c.value)==null?void 0:x.price),6);let r={};return r[p]={label:"Min Price"},r[n]={label:"Max Price"},v>p&&v<n?r[v]={label:"Current Price"}:v<p?r[Number(p)+1e-9]={label:"Current Price"}:v>n&&(r[Number(n)-1e-9]={label:"Current Price"}),console.log(r,"obj###"),r}),t=k(()=>{var n,v;const p=(S.value?!e.value:e.value)?Ue((n=c.value)==null?void 0:n.price,6):Ue(1/((v=c.value)==null?void 0:v.price),6);return console.log(p,"result##"),p}),q=k(()=>{var n,v;const p=(S.value?!e.value:e.value)?Ue((n=c.value)==null?void 0:n.price,6):Ue(1/((v=c.value)==null?void 0:v.price),6);return console.log(p,"result##111"),p});return{direct:e,positionInfo:c,needReverse:S,getCoinIcon:w,decimalUi:Ue,addCommom:N,sFixD:P,marks:i,currentPrice:t,currentPriceResever:q}}});const yo=e=>(ze("data-v-44da997b"),e=e(),Je(),e),Ut={class:"v2-position-range"},Lt={class:"position-range-top"},Ft=yo(()=>o("div",null,"Position Range",-1)),Ot={class:"base-coin"},Mt={key:0},Vt={alt:""},Et={key:1},Wt={alt:""},jt={key:2},Ht={key:3},zt=yo(()=>o("p",null,"Base coin",-1)),Jt={class:"coin-rate"},Xt=yo(()=>o("div",null,[o("svg",{class:"icon icon-up","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Zt=yo(()=>o("div",null,[o("svg",{class:"icon icon-down","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Qt=[Xt,Zt],Gt={class:"position-range-bottom"},Yt={class:"price-range"},Kt={class:"price-range-bg"},xt={key:0,class:"min-price"},es={key:0},os={key:1},ns={key:1,class:"max-price"},ts={key:0},ss={key:1},ls={key:0,class:"min-price"},is={key:0},as={key:1},us={key:1,class:"max-price"},rs={key:0},ds={key:1};function vs(e,s,J,X,T,C){var i,t,q,p,n,v,r,y,I,d,D,F,V,x,de,ae,b,g,Z,te,se,ve,j,ee,ke,he,ce,O;const c=fo,S=no("Slider"),w=No("image");return u(),_("div",Ut,[o("div",Lt,[Ft,o("div",Ot,[e.needReverse?(u(),_("div",Et,[Ye(o("img",Wt,null,512),[[w,e.direct?e.getCoinIcon((y=e.positionInfo)==null?void 0:y.token_b):e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_a)]]),W(c,{address:e.direct?(F=(D=e.positionInfo)==null?void 0:D.token_b)==null?void 0:F.address:(d=(I=e.positionInfo)==null?void 0:I.token_a)==null?void 0:d.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(u(),_("div",Mt,[Ye(o("img",Vt,null,512),[[w,e.direct?e.getCoinIcon((i=e.positionInfo)==null?void 0:i.token_a):e.getCoinIcon((t=e.positionInfo)==null?void 0:t.token_b)]]),W(c,{address:e.direct?(p=(q=e.positionInfo)==null?void 0:q.token_a)==null?void 0:p.address:(v=(n=e.positionInfo)==null?void 0:n.token_b)==null?void 0:v.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),e.needReverse?(u(),_("span",Ht,m(e.direct?(g=(b=e.positionInfo)==null?void 0:b.token_b)==null?void 0:g.symbol:(te=(Z=e.positionInfo)==null?void 0:Z.token_a)==null?void 0:te.symbol),1)):(u(),_("span",jt,m(e.direct?(x=(V=e.positionInfo)==null?void 0:V.token_a)==null?void 0:x.symbol:(ae=(de=e.positionInfo)==null?void 0:de.token_b)==null?void 0:ae.symbol),1)),zt,o("div",Jt,[o("div",{onClick:s[0]||(s[0]=H=>e.direct=!e.direct)},Qt)])])]),o("div",Gt,[o("div",Yt,[o("div",Kt,[e.direct?(u(),G(S,{key:0,value:e.currentPrice,class:Te(["position-slider",e.currentPrice<Number(("sFixD"in e?e.sFixD:$(P))((se=e.positionInfo)==null?void 0:se.minPrice,6))||e.currentPrice>Number(("sFixD"in e?e.sFixD:$(P))((ve=e.positionInfo)==null?void 0:ve.maxPrice,6))?"hide-handler":""]),step:null,marks:e.marks,disabled:!0,min:Number(("decimalUi"in e?e.decimalUi:$(Ue))((j=e.positionInfo)==null?void 0:j.minPrice,6)),max:Number(("decimalUi"in e?e.decimalUi:$(Ue))((ee=e.positionInfo)==null?void 0:ee.maxPrice,6))},{mark:be(({label:H})=>{var fe,me,we,f,Q,Le,ge,Fe,Re,Ie,Se,qe;return[H=="Min Price"?(u(),_("div",xt,[o("div",null,m(H),1),e.direct?(u(),_("div",es,m(((fe=e.positionInfo)==null?void 0:fe.minPrice)&&("sFixD"in e?e.sFixD:$(P))((me=e.positionInfo)==null?void 0:me.minPrice,6)),1)):(u(),_("div",os,m(((we=e.positionInfo)==null?void 0:we.maxPrice)&&("sFixD"in e?e.sFixD:$(P))(1/((f=e.positionInfo)==null?void 0:f.maxPrice),6)),1))])):z("",!0),H=="Max Price"?(u(),_("div",ns,[o("div",null,m(H),1),e.direct?(u(),_("div",ts,m(((Q=e.positionInfo)==null?void 0:Q.maxPrice)&&("sFixD"in e?e.sFixD:$(P))((Le=e.positionInfo)==null?void 0:Le.maxPrice,6)),1)):(u(),_("div",ss,m(((ge=e.positionInfo)==null?void 0:ge.minPrice)&&("sFixD"in e?e.sFixD:$(P))(1/((Fe=e.positionInfo)==null?void 0:Fe.minPrice),6)),1))])):z("",!0),H=="Current Price"?(u(),_("div",{key:2,class:Te(["current-price",e.currentPrice<Number(("sFixD"in e?e.sFixD:$(P))((Re=e.positionInfo)==null?void 0:Re.minPrice,6))?"current-price-left":e.currentPrice>Number(("sFixD"in e?e.sFixD:$(P))((Ie=e.positionInfo)==null?void 0:Ie.maxPrice,6))?"current-price-right":""])},[o("div",null,m(H),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(u(),_(oo,{key:0},[Ve(m(("addCommom"in e?e.addCommom:$(N))(("decimalUi"in e?e.decimalUi:$(Ue))((Se=e.positionInfo)==null?void 0:Se.price,6))),1)],64)):(u(),_(oo,{key:1},[Ve(m(("addCommom"in e?e.addCommom:$(N))(("decimalUi"in e?e.decimalUi:$(Ue))(1/((qe=e.positionInfo)==null?void 0:qe.price),6))),1)],64))])],2)):z("",!0)]}),_:1},8,["value","class","marks","min","max"])):(u(),G(S,{key:1,value:e.currentPriceResever,class:Te(["position-slider",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:$(P))(1/((ke=e.positionInfo)==null?void 0:ke.maxPrice),6))||e.currentPriceResever>Number(("sFixD"in e?e.sFixD:$(P))(1/((he=e.positionInfo)==null?void 0:he.minPrice),6))?"hide-handler":""]),step:null,min:Number(("decimalUi"in e?e.decimalUi:$(Ue))(1/((ce=e.positionInfo)==null?void 0:ce.maxPrice),6)),max:Number(("decimalUi"in e?e.decimalUi:$(Ue))(1/((O=e.positionInfo)==null?void 0:O.minPrice),6)),marks:e.marks,disabled:!0},{mark:be(({label:H})=>{var fe,me,we,f,Q,Le,ge,Fe,Re,Ie,Se,qe;return[H=="Min Price"?(u(),_("div",ls,[o("div",null,m(H),1),e.direct?(u(),_("div",is,m(((fe=e.positionInfo)==null?void 0:fe.minPrice)&&("sFixD"in e?e.sFixD:$(P))((me=e.positionInfo)==null?void 0:me.minPrice,6)),1)):(u(),_("div",as,m(((we=e.positionInfo)==null?void 0:we.maxPrice)&&("sFixD"in e?e.sFixD:$(P))(1/((f=e.positionInfo)==null?void 0:f.maxPrice),6)),1))])):z("",!0),H=="Max Price"?(u(),_("div",us,[o("div",null,m(H),1),e.direct?(u(),_("div",rs,m(((Q=e.positionInfo)==null?void 0:Q.maxPrice)&&("sFixD"in e?e.sFixD:$(P))((Le=e.positionInfo)==null?void 0:Le.maxPrice,6)),1)):(u(),_("div",ds,m(((ge=e.positionInfo)==null?void 0:ge.minPrice)&&("sFixD"in e?e.sFixD:$(P))(1/((Fe=e.positionInfo)==null?void 0:Fe.minPrice),6)),1))])):z("",!0),H=="Current Price"?(u(),_("div",{key:2,class:Te(["current-price current-price-direct",e.currentPriceResever<Number(("sFixD"in e?e.sFixD:$(P))(1/((Re=e.positionInfo)==null?void 0:Re.maxPrice),6))?"current-price-left":e.currentPriceResever>Number(("sFixD"in e?e.sFixD:$(P))(1/((Ie=e.positionInfo)==null?void 0:Ie.minPrice),6))?"current-price-right":""])},[o("div",null,m(H),1),o("div",null,[(e.needReverse?!e.direct:e.direct)?(u(),_(oo,{key:0},[Ve(m(("addCommom"in e?e.addCommom:$(N))(("decimalUi"in e?e.decimalUi:$(Ue))((Se=e.positionInfo)==null?void 0:Se.price,6))),1)],64)):(u(),_(oo,{key:1},[Ve(m(("addCommom"in e?e.addCommom:$(N))(("decimalUi"in e?e.decimalUi:$(Ue))(1/((qe=e.positionInfo)==null?void 0:qe.price),6))),1)],64))])],2)):z("",!0)]}),_:1},8,["value","class","min","max","marks"]))])])])])}const en=Ee(Dt,[["render",vs],["__scopeId","data-v-44da997b"]]),ms=He({components:{Modal:Vo},props:{positionInfo:{type:Object,default:()=>({})}},setup(e){const s=k(()=>{var X,T;const J=Math.ceil(((X=e.positionInfo)==null?void 0:X.poolUSD)/((T=e.positionInfo)==null?void 0:T.quoteUSD)*100);return console.log(J,"Pool Capacity Ratio"),Number(J)});return{sFixD:P,addCommom:N,ratio:s}}});const qo=e=>(ze("data-v-78a51262"),e=e(),Je(),e),cs=qo(()=>o("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[o("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),ps={class:"deposit-slider"},fs={class:"info-block"},gs=qo(()=>o("div",{class:"leabl"},"Current Deposit：",-1)),ys={class:"text"},bs={class:"info-block"},ks=qo(()=>o("div",{class:"leabl"},"Max Capacity：",-1)),hs={class:"text"};function _s(e,s,J,X,T,C){const c=no("Modal");return u(),G(c,{width:"440px",visible:!0,footer:null,title:"Vault Capacity",onCancel:s[0]||(s[0]=S=>e.$emit("onClose"))},{closeIcon:be(()=>[cs]),default:be(()=>{var S,w,i,t;return[o("div",ps,[o("div",{class:"current-deposit",style:Ao({width:`${e.ratio>100?100:e.ratio}%`})},null,4)]),o("div",fs,[gs,o("div",ys,m(("addCommom"in e?e.addCommom:$(N))(("sFixD"in e?e.sFixD:$(P))((S=e.positionInfo)==null?void 0:S.currentDeposit,2)))+" "+m((w=e.positionInfo)==null?void 0:w.quoteCoinInfo.symbol),1)]),o("div",bs,[ks,o("div",hs,m(("addCommom"in e?e.addCommom:$(N))(("sFixD"in e?e.sFixD:$(P))((i=e.positionInfo)==null?void 0:i.quoteUSD,2)))+" "+m((t=e.positionInfo)==null?void 0:t.quoteCoinInfo.symbol),1)])]}),_:1})}const on=Ee(ms,[["render",_s],["__scopeId","data-v-78a51262"]]),ws=He({components:{AutoPoolV2PoolCapacity:on},setup(){const e=xe(),s=k(()=>e),J=Qe(),X=k(()=>J),T=Ke(),C=h();Ce(()=>[X.value.positionInfoObj,T.params.id],([i,t])=>{console.log(i,"##positionInfoObj"),i&&!Ze(i)&&t&&(C.value=i[t],console.log(C.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const c=k(()=>{var i;return(i=C.value)==null?void 0:i.needReverse}),S=i=>{var t;return console.log(i,"info##"),(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((t=s.value.tokensObj[i==null?void 0:i.address])==null?void 0:t.logo_url)||uo("/image/coins/sui-unknown.png")},w=h(!1);return{needReverse:c,positionInfo:C,getCoinIcon:S,addCommom:N,isShowModal:w}}});const As=e=>(ze("data-v-ad8a33e9"),e=e(),Je(),e),Is={class:"pool-composition"},$s={class:"pool-composition-top"},Cs=As(()=>o("span",null,"Vault Composition",-1)),Ss={class:"pool-composition-bottom"},Ps={class:"token-ratio"},Ts={class:"before-coin"},Ns={alt:""},Rs={class:"after-coin"},qs={alt:""},Bs={class:"token-num"},Ds={class:"num-box"},Us={class:"num-box"};function Ls(e,s,J,X,T,C){var i,t,q,p,n,v,r,y,I,d,D,F,V,x,de,ae,b,g,Z,te,se,ve,j,ee,ke,he,ce,O,H;const c=fo,S=on,w=No("image");return u(),_("div",Is,[o("div",$s,[Cs,Number((i=e.positionInfo)==null?void 0:i.quoteUSD)>0?(u(),_("div",{key:0,class:"pool-capacity",onClick:s[0]||(s[0]=fe=>e.isShowModal=!0)},"Vault Capacity")):z("",!0)]),o("div",Ss,[o("div",Ps,[o("div",Ts,[o("div",null,[W(c,{address:e.needReverse?(n=(p=e.positionInfo)==null?void 0:p.token_b)==null?void 0:n.address:(q=(t=e.positionInfo)==null?void 0:t.token_a)==null?void 0:q.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),Ye(o("img",Ns,null,512),[[w,e.needReverse?e.getCoinIcon((r=e.positionInfo)==null?void 0:r.token_b):e.getCoinIcon((v=e.positionInfo)==null?void 0:v.token_a)]])]),o("span",null,m((y=e.positionInfo)==null?void 0:y.poolCoinARatio)+"%",1)]),o("div",Rs,[o("span",null,m((I=e.positionInfo)==null?void 0:I.poolCoinBRatio)+"%",1),o("div",null,[Ye(o("img",qs,null,512),[[w,e.needReverse?e.getCoinIcon((D=e.positionInfo)==null?void 0:D.token_a):e.getCoinIcon((d=e.positionInfo)==null?void 0:d.token_b)]]),W(c,{address:e.needReverse?(de=(x=e.positionInfo)==null?void 0:x.token_a)==null?void 0:de.address:(V=(F=e.positionInfo)==null?void 0:F.token_b)==null?void 0:V.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),o("div",Bs,[o("div",{class:"token-a-bg",style:Ao({width:`${(ae=e.positionInfo)==null?void 0:ae.poolCoinARatio}%`})},null,4),o("div",{class:"token-b-bg",style:Ao({width:`${(b=e.positionInfo)==null?void 0:b.poolCoinBRatio}%`})},null,4),o("div",Ds,[o("div",null,m(("addCommom"in e?e.addCommom:$(N))((g=e.positionInfo)==null?void 0:g.poolCoinANum))+" "+m(e.needReverse?(ve=(se=e.positionInfo)==null?void 0:se.token_b)==null?void 0:ve.symbol:(te=(Z=e.positionInfo)==null?void 0:Z.token_a)==null?void 0:te.symbol),1),o("div",null,"$"+m(("addCommom"in e?e.addCommom:$(N))((j=e.positionInfo)==null?void 0:j.poolCoinAUSD)),1)]),o("div",Us,[o("div",null,m(("addCommom"in e?e.addCommom:$(N))((ee=e.positionInfo)==null?void 0:ee.poolCoinBNum))+" "+m(e.needReverse?(O=(ce=e.positionInfo)==null?void 0:ce.token_a)==null?void 0:O.symbol:(he=(ke=e.positionInfo)==null?void 0:ke.token_b)==null?void 0:he.symbol),1),o("div",null,"$"+m(("addCommom"in e?e.addCommom:$(N))((H=e.positionInfo)==null?void 0:H.poolCoinBUSD)),1)])])]),e.isShowModal?(u(),G(S,{key:0,"position-info":e.positionInfo,onOnClose:s[1]||(s[1]=fe=>e.isShowModal=!1)},null,8,["position-info"])):z("",!0)])}const nn=Ee(ws,[["render",Ls],["__scopeId","data-v-ad8a33e9"]]),Fs=He({setup(){const e=xe(),s=k(()=>e),J=Qe(),X=k(()=>J),T=Ke(),C=h();Ce(()=>[X.value.positionInfoObj,T.params.id],([t,q])=>{console.log(t,"##positionInfoObj"),t&&!Ze(t)&&q&&(C.value=t[q],console.log(C.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const c=k(()=>{var t;return(t=C.value)==null?void 0:t.needReverse}),S=t=>{var q;return console.log(t,"info##"),(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((q=s.value.tokensObj[t==null?void 0:t.address])==null?void 0:q.logo_url)||uo("/image/coins/sui-unknown.png")},w=Ro(),i=k(()=>w);return{needReverse:c,positionInfo:C,getCoinIcon:S,addCommom:N,wallet:i}}});const vo=e=>(ze("data-v-61c3efe6"),e=e(),Je(),e),Os={class:"my-liquidity"},Ms={class:"my-liquidity-top"},Vs=vo(()=>o("div",null,"My Liquidity",-1)),Es=vo(()=>o("p",null,"My share of pool",-1)),Ws={class:"my-liquidity-bottom"},js={class:"lp-token"},Hs=vo(()=>o("div",null,[o("span",null,"LP Token Balance ")],-1)),zs={class:"lp-balance"},Js={class:"token-num-content"},Xs={class:"token-num token-a-num"},Zs={class:"logo"},Qs=["src"],Gs={class:"text"},Ys={class:"lp-logo"},Ks=["src"],xs=vo(()=>o("div",null,"Pooled Assets",-1)),el={class:"token-num"},ol={class:"logo"},nl=["src"],tl={class:"text"},sl=vo(()=>o("div",{class:"token-num-content-bg"},null,-1));function ll(e,s,J,X,T,C){var S,w,i,t,q,p,n,v,r,y,I,d,D,F,V,x,de,ae,b,g,Z,te,se,ve,j,ee,ke,he,ce;const c=fo;return u(),_("div",Os,[o("div",Ms,[Vs,o("div",null,[Es,o("p",null,m(e.wallet.connected?(S=e.positionInfo)==null?void 0:S.myShare:"--")+"%",1)])]),o("div",Ws,[o("div",js,[Hs,o("div",null,[o("span",zs,m(e.wallet.connected?("addCommom"in e?e.addCommom:$(N))((w=e.positionInfo)==null?void 0:w.myLiquidity):"--")+" LP",1),o("span",null,m(e.wallet.connected?((i=e.positionInfo)==null?void 0:i.myLiquidityUSD)!=="<0.01"?`$${("addCommom"in e?e.addCommom:$(N))((t=e.positionInfo)==null?void 0:t.myLiquidityUSD)}`:"<$0.01":"--"),1)])]),o("div",Js,[o("div",Xs,[o("div",Zs,[o("img",{src:e.needReverse?e.getCoinIcon((p=e.positionInfo)==null?void 0:p.token_b):e.getCoinIcon((q=e.positionInfo)==null?void 0:q.token_a),alt:""},null,8,Qs),W(c,{address:e.needReverse?(y=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:y.address:(v=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:v.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),o("div",Gs,[o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:$(N))((I=e.positionInfo)==null?void 0:I.amountA):"--")+" "+m(e.needReverse?(V=(F=e.positionInfo)==null?void 0:F.token_b)==null?void 0:V.symbol:(D=(d=e.positionInfo)==null?void 0:d.token_a)==null?void 0:D.symbol),1),o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:$(N))((x=e.positionInfo)==null?void 0:x.myAmountAUSD):"--"),1)])]),o("div",Ys,[o("img",{src:e.getCoinIcon((de=e.positionInfo)==null?void 0:de.lpInfo),alt:""},null,8,Ks),xs]),o("div",el,[o("div",ol,[o("img",{src:e.needReverse?e.getCoinIcon((b=e.positionInfo)==null?void 0:b.token_a):e.getCoinIcon((ae=e.positionInfo)==null?void 0:ae.token_b),alt:""},null,8,nl),W(c,{address:e.needReverse?(se=(te=e.positionInfo)==null?void 0:te.token_a)==null?void 0:se.address:(Z=(g=e.positionInfo)==null?void 0:g.token_b)==null?void 0:Z.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),o("div",tl,[o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:$(N))((ve=e.positionInfo)==null?void 0:ve.amountB):"--")+" "+m(e.needReverse?(he=(ke=e.positionInfo)==null?void 0:ke.token_a)==null?void 0:he.symbol:(ee=(j=e.positionInfo)==null?void 0:j.token_b)==null?void 0:ee.symbol),1),o("div",null,m(e.wallet.connected?("addCommom"in e?e.addCommom:$(N))((ce=e.positionInfo)==null?void 0:ce.myAmountBUSD):"--"),1)])]),sl])])])}const tn=Ee(Fs,[["render",ll],["__scopeId","data-v-61c3efe6"]]),il=""+globalThis.__publicAssetsURL("image/icon-tips-error@2x.png");const al={},sn=e=>(ze("data-v-fcbc716b"),e=e(),Je(),e),ul={class:"status"},rl=sn(()=>o("img",{src:il,alt:""},null,-1)),dl=sn(()=>o("span",null,"Rebalancing is in processing. New deposits and withdraws are paused and will be back in minutes. ",-1)),vl=[rl,dl];function ml(e,s){return u(),_("div",ul,vl)}const ln=Ee(al,[["render",ml],["__scopeId","data-v-fcbc716b"]]),cl=He({components:{AutoPoolAddModal:Go,AutoPoolV2PoolStatus:ln},setup(){const e=Ro(),s=h(!1),J=go(),X=k(()=>J),T=k(()=>X.value.chainName),C=k(()=>e),c=Qe(),S=k(()=>c),w=xe(),i=k(()=>w),t=h(),q=Ke(),p=h(!1),n=h(!1);Ce(()=>[S.value.positionInfoObj,q.params.id],([A,M])=>{A&&!Ze(A)&&M&&(t.value=A[M],console.log(t.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const v=k(()=>{var A,M;return console.log((A=t.value)==null?void 0:A.needReverse,"##positionInfo.value?.needReverse"),(M=t.value)==null?void 0:M.needReverse}),r=h(),y=h(),I=h(),d=h(),D=h(!0),F=k(()=>C.value.assets&&r.value&&C.value.assets[r.value.address]?Mo(C.value.assets[r.value.address].balance,r.value.decimals):0),V=k(()=>C.value.assets&&y.value&&C.value.assets[y.value.address]?Mo(C.value.assets[y.value.address].balance,y.value.decimals):0),x=A=>{A==="fromCoin"?(D.value=!0,I.value=F.value>0?r.value.symbol=="SUI"?new a(Number(F.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(F.value)).sub(new a(.05)).toString():String(F.value):""):(D.value=!1,d.value=V.value>0?y.value.symbol=="SUI"?new a(Number(V.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(V.value)).sub(new a(.05)).toString():String(V.value):"")},de=A=>{A==="fromCoin"?(D.value=!0,I.value=F.value>0?P(new a(Number(F.value)).div(2).toString(),r.value.decimals).toString():""):(D.value=!1,d.value=V.value>0?P(new a(Number(V.value)).div(2).toString(),y.value.decimals).toString():"")},ae=k(()=>T.value?Jo(T.value):{}),b=k(()=>S.value.slippage),g=h("--"),Z=h("--"),te=A=>{const M=new a(t.value.autoPoolPositionInfo.liquidity),R=new a(A.toString());if(M.toNumber()>0&&R.toNumber()>0){const L=R.add(M);console.log("totalLiquidity:",R.div(L).mul(100).toString());const Pe=R.div(L).mul(100).toNumber(),ye=_n(Pe),_e=ye==-1?2:ye+2,Ae=P(R.div(L).mul(100).toNumber(),_e);console.log(t.value.decimals,"##positionInfo.value.decimal");const l=new a(1).div(new a(Math.pow(10,t.value.lpInfo.decimals))).toString();console.log(Ae,l,"###288"),Number(Ae)<Number(l)?g.value=`<${l}`:g.value=Ae}else R.toNumber()>0&&M.toNumber()<=0?g.value="100":g.value="--"},se=A=>{if(t.value.total_supply==0){Z.value="";return}const M=new a(A.toString()),R=new a(b.value).div(100);console.log(R.toString(),"#slippageNum");const L=$o.get_lp_amount_by_liquidity({liquidity:t.value.liquidity,total_supply:t.value.total_supply},A.toString()),Pe=new a(Math.pow(10,t.value.lpInfo.decimals)),ye=new a(L).div(Pe).toString(),_e=new a(ye).mul(R);console.log(L,_e.toString(),"###409");const Ae=new a(ye).sub(_e);console.log(Ae.toString(),"##minLp"),console.log(M.toString(),L,ye,"lpDecimalNum##"),Z.value=P(Ae.toString(),t.value.decimals)},ve=h(!1),j=h(!1),ee=h(""),ke=h(),he=h(!1),ce=h(!1),O=async()=>{if(console.log(ue.value,oe.value,"isOnlyA.value||isOnlyB.value"),console.log(t.value,"positionInfo.value###432"),!t.value)return;console.log(I.value,d.value,"####updateAmounts"),n.value=!1,he.value=!0;const A=t.value.autoPoolPositionInfo.tick_lower_index,M=t.value.autoPoolPositionInfo.tick_upper_index,R=je.sqrtPriceX64ToTickIndex(new pe(t.value.current_sqrt_price));je.tickIndexToSqrtPriceX64(A),je.tickIndexToSqrtPriceX64(M),R<A&&(v.value?ve.value=!0:j.value=!0),R>M&&(v.value?j.value=!0:ve.value=!0);let L;if(console.log(I.value||d.value,"#fromCoinAmount.value || toCoinAmount.value"),I.value||d.value){D.value?L=new a(I.value).mul(Math.pow(10,r.value.decimals)).toString():L=new a(d.value).mul(Math.pow(10,y.value.decimals)).toString();let Pe,ye=D.value;if(console.log("执行##"),console.log(R,A,M,"###520"),ue.value||oe.value){const Y=new a(1);if(console.log(Y.toString(),L,"decimalNum###"),new a(L).lte(Y))return n.value=!0,!1;console.log(v.value?D.value:!D.value,"#needReverse.value?fixedFromCoin.value:!fixedFromCoin.value"),console.log(L,"##coinAmount"),console.log("1106###needReverse.value####",v.value),console.log("1106###calculateDepositSwapAmount###params###",{lowerTick:A,upperTick:M,curSqrtPrice:new pe(t.value.current_sqrt_price),fix_amount_a:ye,input_amount:L,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number(b.value)/100,decimals:ue.value?r.value.decimals:y.value.decimals,use_Haedal_stake:t.value.supportHaedalStake&&oe.value,shouldRequestStake:!1});const U=await to.calculateDepositSwapAmount({lowerTick:A,upperTick:M,curSqrtPrice:new pe(t.value.current_sqrt_price),fix_amount_a:ye,input_amount:L,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,clmm_pool:t.value.address,slippage:Number(b.value)/100,decimals:ue.value?r.value.decimals:y.value.decimals,request_id:L,use_Haedal_stake:t.value.supportHaedalStake&&oe.value,shouldRequestStake:!1});if(console.log(U,"###swapResult"),console.log("1106###calculateDepositSwapAmount###result###",U),U=="HaedalStakeSuiAmountError"){p.value=!1,ce.value=!0;return}else if(U){if(U.request_id!==L)return;ce.value=!1,p.value=t.value.supportHaedalStake?!1:U.is_exceed,Pe=new pe(U.afterSqrtPrice),L=U.fixAmountA===ye?new pe(new a(L).sub(U.swapInAmount).toString()):new pe(U.swapOutAmount),ke.value={swap_amount:U.swapInAmount,route_obj:U.route_obj,a2b:ye,input_amount:L},ye=U.fixAmountA;const re=t.value.token_a.decimals,le=t.value.token_b.decimals,ie=new a(U.swapInAmount).div(new a(Math.pow(10,re))).toString(),ne=P(new a(U.swapOutAmountLimit).div(new a(Math.pow(10,le))).toString(),le),E=v.value?t.value.token_b.symbol:t.value.token_a.symbol,K=v.value?t.value.token_a.symbol:t.value.token_b.symbol;ee.value=`To deposit ${N(ue.value?I.value:d.value)} ${ue.value?E:K},
          ${N(ie)} ${ue.value?E:K}  will be traded for ${N(ne)} ${ue.value?K:E} added to the pool.`}else Pe=t.value.current_sqrt_price,L=new pe(L)}else p.value=!1,Pe=t.value.current_sqrt_price,L=new pe(L),ee.value="";console.log(ke,"##swapParams");let _e,Ae,l;const B=ae.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:r.value,tokenB:y.value,lowerTick:A,upperTick:M,coinAmount:L,iscoinA:ye,roundUp:!0,slippage:Number(b.value)/100,curSqrtPrice:new pe(Pe)});console.log("amount#",B),_e=B.liquidityAmount,Ae=B.tokenMaxA,l=B.tokenMaxB,!ue.value&&!oe.value&&(D.value?d.value=Number(l)>0?l:"":I.value=Number(Ae)>0?Ae:""),console.log(_e.toString(),"liquidityAmount###"),te(_e),se(_e),he.value=!1}};Ce(()=>t.value,A=>{A&&!Ze(A)&&(r.value=A==null?void 0:A.token_a,y.value=A==null?void 0:A.token_b,ve.value=!1,j.value=!1,O())},{immediate:!0});const H=k(()=>i.value.RATES),fe=k(()=>{var A,M,R,L,Pe,ye,_e,Ae,l,B;if((M=H.value[(A=r.value)==null?void 0:A.address])!=null&&M.price&&((L=H.value[(R=y.value)==null?void 0:R.address])!=null&&L.price)){console.log((ye=H.value[(Pe=r.value)==null?void 0:Pe.address])==null?void 0:ye.price,"RATES.value[fromCoin.value?.address]?.price");const Y=new a(I.value||0).mul(new a((Ae=H.value[(_e=r.value)==null?void 0:_e.address])==null?void 0:Ae.price)),U=new a(d.value||0).mul(new a((B=H.value[(l=y.value)==null?void 0:l.address])==null?void 0:B.price));return Y.add(U).toNumber()}else return"--"});Ce(()=>I.value,ro((A,M)=>{console.log(A,"##newVal"),A?O():(g.value="--",d.value="",Z.value="--")},500),{immediate:!0}),Ce(()=>d.value,ro((A,M)=>{A?O():(I.value="",g.value="--",Z.value="--")},500),{immediate:!0});const{t:me,locale:we}=Co(),f=k(()=>{var A,M;if(ue.value||oe.value){const R=ue.value?I.value:d.value,L=ue.value?r.value:y.value;if((A=H.value[L==null?void 0:L.address])!=null&&A.price)return new a(R||0).mul(new a((M=H.value[L==null?void 0:L.address])==null?void 0:M.price)).toNumber()}return 0}),Q=k(()=>{const A=Number(I.value)>Number(F.value),M=Number(d.value)>Number(V.value);return!I.value&&!d.value?me("button.enterAmount"):A?me("button.insufficientBalance",{name:r.value.symbol}):M?me("button.insufficientBalance",{name:y.value.symbol}):p.value?me("button.insufficientLiquidity"):Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(fe.value)>Number(t.value.remainingTokenUSD)?"Exceeded the max capacity":n.value?me("button.enterAmount"):ce.value?"Maximum 1 SUI":(console.log(f.value),"Add Liquidity")}),Le=k(()=>{const A=Number(I.value)>Number(F.value),M=Number(d.value)>Number(V.value);return!!(!I.value&&!d.value||A||M||I.value<=0&&d.value<=0||p.value||mo.value!=="STATUS_RUNNING"||(console.log(fe.value,t.value.quoteUSD,"positionInfo.value.quoteUSD#"),Number(t.value.remainingTokenUSD)!==0&&Number(t.value.quoteUSD)>0&&Number(fe.value)>Number(t.value.remainingTokenUSD))||n.value||t.value.supportHaedalStake&&!oe.value&&f.value>1e4||!t.value.supportHaedalStake&&f.value>1e4||ce.value)}),ge=h(!0),{setIsShowSuccess:Fe,setIsShowRejected:Re,setIsShowWaiting:Ie,setTransactionDesc:Se,setTransactionTxid:qe,setPositiomNum:eo}=J,to=zo("Sui"),so=async()=>{var l,B;s.value=!1,ge.value=!0,qe("");const A=`${N(I.value)} ${(l=r.value)==null?void 0:l.symbol}`,M=`${N(d.value)} ${(B=y.value)==null?void 0:B.symbol}`;Se(`Deposit ${I.value>0?A:""} ${d.value>0&&I.value>0?"and":""} ${d.value>0?M:""}`),Ie(!0);const R=D.value,L=t.value.autoPoolPositionInfo.tick_lower_index,Pe=t.value.autoPoolPositionInfo.tick_upper_index,ye=je.sqrtPriceX64ToTickIndex(new pe(t.value.current_sqrt_price));let _e;D.value?_e=new a(I.value).mul(Math.pow(10,r.value.decimals)).toString():_e=new a(d.value).mul(Math.pow(10,y.value.decimals)).toString();const Ae=t.value.rewarderInfo.map(Y=>Y.coinAddress);console.log("1109###deposit###positionInfo###",t);try{const Y={lowerTick:L,upperTick:Pe,coinAmount:_e,fix_amount_a:R,slippage:Number(b.value)/100,curSqrtPrice:new pe(t.value.current_sqrt_price),id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coinTypeA,coinTypeB:t.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:Ae,swapParams:ke.value,isOnlyA:ue.value,isOnlyB:oe.value,currentTickIndex:ye,decimal_b:t.value.coinB.decimals,request_id:_e,use_Haedal_stake:t.value.supportHaedalStake&&oe.value,shouldRequestStake:!0,farming_pool:t.value.autoPoolPositionInfo.pool_id};console.log("1106###deposit###params###",Y);const U=await to.deposit(Y);console.log(U,"===>payloadAdd11111");const re=await C.value.currentWallet.signAndExecuteTransactionBlock(U);let le=ae.value.handleTx(re);if(console.log("toAdd###tx###",le),le&&le.hash){qe(le.hash),Ie(!1),Fe(!0),console.log(t,"===>positionInfo");const ie={title:"Supplied",desc:`Deposit ${I.value>0?A:""} ${d.value>0&&I.value>0?"and":""} ${d.value>0?M:""}`,hash:le.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${I.value>0?A:""} ${d.value>0&&I.value>0?"and":""} ${d.value>0?M:""}`};T.value!=="Aptos"&&(ie.res=le.res),ae.value.showTransitionPending(ie),await ae.value.watchTransaction(ie)&&setTimeout(()=>{c.updatePositionItem(t.value.id),ae.value.getAccount(C.value.address)},1e3),eo()}else Ie(!1),Re(!0);I.value="",d.value="",ge.value=!1}catch(Y){I.value="",d.value="",console.log("addError###",Y),ge.value=!1,Ie(!1),Re(!0)}},ue=h(!1),oe=h(!1),ko=A=>{I.value="",d.value="",ee.value="",A=="only-a-b"?(ue.value=!1,oe.value=!1):A=="only-a"?(ue.value=!0,oe.value=!1):(oe.value=!0,ue.value=!1)},mo=k(()=>S.value.currentAutoPoolStatus),co=h(),ho=()=>{co.value=window.setInterval(()=>{(I.value||d.value)&&O()},2e4)};po(()=>{ho()}),Po(()=>{window.clearInterval(co.value)});const _o=pn(fn,{style:{fontSize:"20px",color:"#75C8FF"},spin:!0});return{currentAutoPoolStatus:mo,wallet:C,positionInfo:t,isShowAddModal:s,needReverse:v,fromCoin:r,toCoin:y,fromCoinAmount:I,toCoinAmount:d,fromCoinBlance:F,toCoinBlance:V,fixedFromCoin:D,maxBtnSelect:x,halfBtnSelect:de,totalAmountUSD:fe,addCommom:N,shareOfPool:g,minimumReceivedLP:Z,addLiquidityBtnText:Q,addLiquidityBtnDisabled:Le,toAdd:so,showToCoinLock:j,showFromCoinLock:ve,isOnlyA:ue,isOnlyB:oe,onlyToken:ko,onlyText:ee,onlyTokenUSD:f,calculateLoading:he,indicator:_o}}}),an="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAAAXNSR0IArs4c6QAAArpJREFUWEftmE2IjWEUx3//JGzkoywslBULNjaUlCyIFQmJfCaZbCzQZDEsJmFhI5J8RpJkVsRCSmpsbFiYnSxmoXxkMyQd93CmXtd77/u8753Fs5i3bk13zvOc3/2fj+c8r8j8UeZ8TAL2GqHGCprZVGApsBxYAMyJjzN9js8H4BXwRtLPJrC1Ac1sNrAdWA3MSHQ61rJ/DtyV9CVxzR+zZMBQbBuwEZhWcPLVFQI+hWr+L1dzbig8q2D7AxgC7qUqmgQYqp1oKbAonP0CngLPWmqOSLIyVczM9/c1a4C1wJSwGwEGU9SsBDSzhcBAKOL7DwPXJY3WCZWZzQf2AitinSt+UtL7bvt0BQzlzgecq3RT0oM6YO22ZrYZ2B3p5ZBHuinZETBy7nSEyOHOSHrZC9z4WjNbCRwPSA93f6ec7Aa4E/Ci8OdGr8p1UHJPfO9Fc7vsx5cCRmivRLUOSxqsUs7MDgPrwu6JpAsJa7zwPCe9ug+UhboTYF+rwa4HvFr7UgqiIaAXzsWo7seS/O9/nv8AI/fuRBMuXdShpdRW0Pcxs3ExvJnvaM/FMsBlreQ9FRBHJb2rClU4mgfMDNtvkj4mrlsMnAvbAUmvi+vKAA8BGwA/IXZ1asIpzlNsopnfAvzEeSTpUhWgt5YlwAtJZ1Oc9GpjZseAVcBbSf1VgJcBT94hSVdTnZuZDw/+w/xxRz4cJD1mtj/O+FFJB6sA7wPTWyPUNUkPkzz8TfZGRRL5uwnYB3yXtCVnwDFJW6sAm4a4FwVrhbhRkfQY4lpF0qjNNAVs0maaNupGITaz2o3aL0P5HnVt52N+w0IA+s0t33ErIPMdWAPQczHfkb8Q6jwvTePHTdbXzgKkF02eF/cCpOdknq8+itNFti+P2ufCbF+/pQ6wE2VX+fJoohw13WcSsKly4+t+A+qQnDjIFuc0AAAAAElFTkSuQmCC";const We=e=>(ze("data-v-0e59644b"),e=e(),Je(),e),pl={class:"auto-pool-add"},fl={class:"auto-pool-add-content"},gl={class:"liquidity-action-tab"},yl=We(()=>o("div",{class:"increase tab-active"},"Add",-1)),bl={class:"only-token"},kl=We(()=>o("div",null,"Deposit Amounts",-1)),hl=We(()=>o("span",null," You can also choose to deposit in only one asset type. In that case, the vault will convert your asset to the required propositions using Cetus. Please note that trading fees & slippage will be applied. When slippage is involved, a certain amount of post-swap dust (no loss of funds) will be returned to you. ",-1)),_l=We(()=>o("img",{src:an,alt:""},null,-1)),wl=We(()=>o("span",null," You can also choose to deposit in only one asset type. In that case, the vault will convert your asset to the required propositions using Cetus. Please note that trading fees & slippage will be applied. When slippage is involved, a certain amount of post-swap dust (no loss of funds) will be returned to you. ",-1)),Al=We(()=>o("img",{src:an,alt:""},null,-1)),Il={key:0,class:"card-item"},$l={key:1,class:"card-item"},Cl=We(()=>o("span",null,"Pool Closed",-1)),Sl={key:0,class:"add-info"},Pl={key:0,class:"only-text"},Tl={class:"total-amount"},Nl=We(()=>o("span",null,"Total Amount",-1)),Rl={key:0},ql={class:"total-amount"},Bl=We(()=>o("span",null,"Share of Pool",-1)),Dl={key:0},Ul={class:"total-amount"},Ll=We(()=>o("span",null,"Minimum Received LP",-1)),Fl={key:0},Ol={key:1,class:"add-info only-add-info"},Ml=We(()=>o("div",{class:"only-text"},"Single-asset deposit can't be higher than $10,000 at a time.",-1)),Vl=[Ml];function El(e,s,J,X,T,C){var n,v,r,y,I,d,D,F,V,x,de,ae,b,g,Z,te,se,ve,j,ee,ke,he,ce;const c=gn,S=Zo,w=Qo,i=no("AutoPoolV2PoolStatus"),t=So,q=Ho,p=Go;return u(),_("div",pl,[o("div",fl,[o("div",gl,[yl,o("div",{class:"remove",onClick:s[0]||(s[0]=jo(O=>e.$emit("changeCurrentTab"),["stop"]))},"Remove")]),o("div",bl,[kl,o("div",null,[o("div",{class:Te(["only-a-b",!e.isOnlyA&&!e.isOnlyB?"active-only":""]),onClick:s[1]||(s[1]=O=>e.onlyToken("only-a-b"))},[o("span",null,m(e.needReverse?(y=(r=e.positionInfo)==null?void 0:r.token_b)==null?void 0:y.symbol:(v=(n=e.positionInfo)==null?void 0:n.token_a)==null?void 0:v.symbol)+" + "+m(e.needReverse?(F=(D=e.positionInfo)==null?void 0:D.token_a)==null?void 0:F.symbol:(d=(I=e.positionInfo)==null?void 0:I.token_b)==null?void 0:d.symbol),1)],2),o("div",{class:Te(["only-a",e.isOnlyA?"active-only":""]),onClick:s[2]||(s[2]=O=>e.onlyToken("only-a"))},[o("span",null,m(e.needReverse?(ae=(de=e.positionInfo)==null?void 0:de.token_b)==null?void 0:ae.symbol:(x=(V=e.positionInfo)==null?void 0:V.token_a)==null?void 0:x.symbol)+" only",1),W(c,{placement:"bottom","arrow-point-at-center":""},{title:be(()=>[hl]),default:be(()=>[_l]),_:1})],2),o("div",{class:Te(["only-b",e.isOnlyB?"active-only":""]),onClick:s[3]||(s[3]=O=>e.onlyToken("only-b"))},[o("span",null,m(e.needReverse?(te=(Z=e.positionInfo)==null?void 0:Z.token_a)==null?void 0:te.symbol:(g=(b=e.positionInfo)==null?void 0:b.token_b)==null?void 0:g.symbol)+" only",1),W(c,{placement:"bottom","arrow-point-at-center":""},{title:be(()=>[wl]),default:be(()=>[Al]),_:1})],2)])]),o("div",{class:Te(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(u(),_("div",Il,[W(S,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":s[4]||(s[4]=O=>e.fromCoinAmount=O),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[5]||(s[5]=O=>e.maxBtnSelect("fromCoin")),onOnHalf:s[6]||(s[6]=O=>e.halfBtnSelect("fromCoin")),onOnInput:s[7]||(s[7]=O=>{e.fromCoinAmount=O}),onOnFocus:s[8]||(s[8]=()=>{e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.isOnlyA?(u(),G(w,{key:0})):z("",!0)])):z("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(u(),_("div",$l,[W(S,{modelValue:e.toCoinAmount,"onUpdate:modelValue":s[9]||(s[9]=O=>e.toCoinAmount=O),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[10]||(s[10]=O=>e.maxBtnSelect("toCoin")),onOnHalf:s[11]||(s[11]=O=>e.halfBtnSelect("toCoin")),onOnInput:s[12]||(s[12]=O=>{e.toCoinAmount=O}),onOnFocus:s[13]||(s[13]=()=>{e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.isOnlyB?(u(),G(w,{key:0})):z("",!0)])):z("",!0)],2)]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(u(),G(i,{key:0})):z("",!0),(se=e.positionInfo)!=null&&se.is_pause?(u(),G(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:be(()=>[Cl]),_:1})):e.wallet.connected?(u(),G(t,{key:2,class:"big-btn liquidity-btn",disabled:e.addLiquidityBtnDisabled,onClick:s[14]||(s[14]=O=>e.isShowAddModal=!0)},{default:be(()=>[o("span",null,m(e.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(u(),G(t,{key:3,class:"big-btn liquidity-btn",onClick:s[15]||(s[15]=O=>e.wallet.setIsShowWalletModal(!0))},{default:be(()=>[o("span",null,m(e.$t("button.connectWallet")),1)]),_:1})),(((ve=e.positionInfo)==null?void 0:ve.quoteUSD)==0||Number((j=e.positionInfo)==null?void 0:j.remainingTokenUSD)>Number(e.totalAmountUSD))&&(Number(e.fromCoinAmount)>0||Number(e.toCoinAmount)>0)?(u(),_(oo,{key:4},[e.onlyTokenUSD<=1e4?(u(),_("div",Sl,[e.onlyText&&(e.isOnlyA&&e.fromCoinAmount>0||e.isOnlyB&&e.toCoinAmount>0)?(u(),_("div",Pl,m(e.onlyText),1)):z("",!0),o("div",Tl,[Nl,e.calculateLoading?(u(),G(q,{key:1,paragraph:!1,active:""})):(u(),_("span",Rl,m(Number(e.totalAmountUSD)>0&&Number(e.totalAmountUSD)<.01?"<$0.01":`$${("addCommom"in e?e.addCommom:$(N))(e.totalAmountUSD,2)}`),1))]),o("div",ql,[Bl,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(u(),_("span",Dl,m(e.shareOfPool)+"%",1)):(u(),G(q,{key:1,paragraph:!1,active:""}))]),o("div",Ul,[Ll,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(u(),_("span",Fl,m(("addCommom"in e?e.addCommom:$(N))(e.minimumReceivedLP))+" "+m(e.needReverse?(ee=e.toCoin)==null?void 0:ee.symbol:(ke=e.fromCoin)==null?void 0:ke.symbol)+"-"+m(e.needReverse?(he=e.fromCoin)==null?void 0:he.symbol:(ce=e.toCoin)==null?void 0:ce.symbol),1)):(u(),G(q,{key:1,paragraph:!1,active:""}))])])):e.positionInfo.supportHaedalStake&&!e.isOnlyB&&e.onlyTokenUSD>1e4||!e.positionInfo.supportHaedalStake&&e.onlyTokenUSD>1e4?(u(),_("div",Ol,Vl)):z("",!0)],64)):z("",!0),e.isShowAddModal?(u(),G(p,{key:5,"pool-info":e.positionInfo,"from-coin":e.needReverse?e.positionInfo.token_b:e.positionInfo.token_a,"to-coin":e.needReverse?e.positionInfo.token_a:e.positionInfo.token_b,"from-coin-amount":e.needReverse?e.toCoinAmount:e.fromCoinAmount,"to-coin-amount":e.needReverse?e.fromCoinAmount:e.toCoinAmount,"total-amount":e.totalAmountUSD,"share-of-pool":e.shareOfPool,"minimum-received-l-p":e.minimumReceivedLP,"is-only-a":e.isOnlyA,"is-only-b":e.isOnlyB,onOnClose:s[16]||(s[16]=O=>e.isShowAddModal=!1),onToAdd:e.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):z("",!0)])}const Wl=Ee(cl,[["render",El],["__scopeId","data-v-0e59644b"]]),jl=He({components:{AutoPoolRemoveModal:Yo,AutoPoolV2PoolStatus:ln},setup(){const e=Ro(),s=k(()=>e),J=go(),X=k(()=>J),T=k(()=>p.value.slippage),C=k(()=>X.value.chainName),c=wn(),S=k(()=>c),w=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],i=h(25),t=Ke(),q=Qe(),p=k(()=>q),n=k(()=>(console.log(p.value.positionInfoObj[t.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),p.value.positionInfoObj[t.params.id])),v=k(()=>{var l;return(l=n.value)==null?void 0:l.needReverse}),r=h(),y=h(),I=h(!1),d=h(),D=k(()=>{var l;return(l=n.value)==null?void 0:l.myLiquidity}),F=h(!0),V=k(()=>C.value?Jo(C.value):{}),x=h(),de=h(),ae=zo("Sui"),b=h(""),g=h(""),Z=h("--"),te=h(!1),se=h(!1),ve=h(),j=h(!0),ee=h(),ke=xe(),he=k(()=>ke),ce=k(()=>he.value.RATES),O=h(!1),H=async()=>{if(F.value||!n.value)return;de.value=!1,O.value=!0;const l=n.value.autoPoolPositionInfo.tick_lower_index,B=n.value.autoPoolPositionInfo.tick_upper_index,Y=je.sqrtPriceX64ToTickIndex(new pe(n.value.current_sqrt_price));Y<l&&(v.value?te.value=!0:se.value=!0),Y>B&&(v.value?se.value=!0:te.value=!0);let U;if(console.log(b.value||g.value,"#fromCoinAmount.value || toCoinAmount.value"),b.value||g.value){j.value?U=new a(b.value).mul(Math.pow(10,r.value.decimals)).toString():U=new a(g.value).mul(Math.pow(10,y.value.decimals)).toString();let re,le=j.value;if(f.value||Q.value){f.value?Number(b.value)/Number(R.value):Number(g.value)/Number(R.value);const K=await ae.calculateRemoveSwapAmount({lowerTick:l,upperTick:B,curSqrtPrice:new pe(n.value.current_sqrt_price),fix_amount_a:le,receiveAmount:U,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(T.value)/100,decimals:f.value?r.value.decimals:y.value.decimals,liquidity:b.value==R.value||g.value==R.value?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:U});if(console.log(K,"###swapResult"),K){if(K.request_id!==U)return;x.value=K.is_exceed,U=new pe(K.swapOutAmount),re=n.value.current_sqrt_price,ve.value={swap_amount:K.swapInAmount,liquidity:K.liquidity,a2b:!le,route_obj:K.route_obj},le=!le;const Me=n.value.token_a.decimals,Oe=n.value.token_b.decimals,Ne=new a(K.swapInAmount).div(new a(Math.pow(10,Me))).toString(),lo=P(new a(K.swapOutAmountLimit).div(new a(Math.pow(10,Oe))).toString(),Oe),$e=v.value?n.value.token_b.symbol:n.value.token_a.symbol,Be=v.value?n.value.token_a.symbol:n.value.token_b.symbol;ee.value=b.value==R.value||g.value==R.value?`To withdraw ${N(f.value?b.value:g.value)} ${f.value?$e:Be},
          ${N(f.value?n.value.amountB:n.value.amountA)} ${f.value?Be:$e} 
           in the pool will be traded for ${Ne} ${f.value?$e:Be}`:`To withdraw ${N(f.value?b.value:g.value)} ${f.value?$e:Be},
          ${N(Ne)} ${f.value?Be:$e}  in the pool will be traded for ${N(lo)} ${f.value?$e:Be}`}else{de.value=!0,ee.value="";return}}else x.value=!1,re=n.value.current_sqrt_price,U=new pe(U);console.log(re,"##curSqrtPrice"),console.log("执行了吗##");const{liquidityAmount:ie,tokenMaxA:ne,tokenMaxB:E}=V.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:r.value,tokenB:y.value,lowerTick:l,upperTick:B,coinAmount:U,iscoinA:le,roundUp:!1,slippage:Number(T.value)/100,curSqrtPrice:new pe(re)});if(console.log(n.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(E.toString(),ne.toString(),n.value,"###323"),!f.value&&!Q.value&&(j.value?g.value=Number(E)>0?E:"":b.value=Number(ne)>0?ne:""),(f.value||Q.value)&&(Number(b.value)>=Number(R.value)||Number(g.value)>=Number(R.value))){console.log("执行这里了吗"),d.value=n.value.myLiquidity;const K=new a(100);Z.value=new a(n.value.myLiquidity).mul(new a(Math.pow(10,n.value.lpInfo.decimals))).toString(),fe.value=ie.toString(),i.value=K.toNumber()}else{console.log("执行这里了吗1");const K=$o.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},ie.toString()),Me=new a(K).div(new a(Math.pow(10,n.value.lpInfo.decimals))).toString();console.log(Me,D.value,ie.toString(),n.value.liquidity,n.value.total_supply,"##lpBalance.value");const Oe=new a(Me).div(new a(D.value)).mul(100);console.log(Me,D.value,Oe.toNumber(),"lp##"),d.value=new a(D.value).mul(Oe.div(100)).toString(),Z.value=K,fe.value=ie.toString(),i.value=Oe.toNumber()}O.value=!1}},fe=h(),me=k(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountA}),we=k(()=>{var l;return(l=n==null?void 0:n.value)==null?void 0:l.amountB}),f=h(!1),Q=h(!1),Le=k(()=>{var le,ie,ne,E;const l=(ie=ce.value[(le=r==null?void 0:r.value)==null?void 0:le.address])==null?void 0:ie.price,B=(E=ce.value[(ne=y==null?void 0:y.value)==null?void 0:ne.address])==null?void 0:E.price;console.log(l,B,b.value,g.value,"####totalWithdraw");let Y=b.value!=="--"&&b.value!==""?b.value:0,U=g.value!=="--"&&g.value!==""?g.value:0,re;return l&&B&&(f.value||Q.value?re=new a(f.value?Y:U).mul(new a(f.value?l:B)).toString():(re=new a(Y).mul(new a(l)).add(new a(U).mul(new a(B))).toString(),console.log(re,"result##"))),re>0&&re<.01?"<$0.01":`$${N(P(re,2))}`}),ge=async l=>{var Me,Oe,Ne,lo,$e,Be,wo,Bo,Do,Uo,Lo;if(!F.value)return;F.value=!0,de.value=!1,(Oe=(Me=n.value)==null?void 0:Me.token_a)==null||Oe.decimals,(lo=(Ne=n.value)==null?void 0:Ne.token_b)==null||lo.decimals;const B=($e=n.value)==null?void 0:$e.tick_lower_index,Y=(Be=n.value)==null?void 0:Be.tick_upper_index;je.tickIndexToSqrtPriceX64(B),je.tickIndexToSqrtPriceX64(Y);const U=(Bo=(wo=n.value)==null?void 0:wo.autoPoolPositionInfo)==null?void 0:Bo.tick_lower_index,re=(Uo=(Do=n.value)==null?void 0:Do.autoPoolPositionInfo)==null?void 0:Uo.tick_upper_index,le=je.sqrtPriceX64ToTickIndex(new pe((Lo=n==null?void 0:n.value)==null?void 0:Lo.current_sqrt_price));le<U&&(v.value?te.value=!0:se.value=!0),le>re&&(v.value?se.value=!0:te.value=!0);let ie="",ne,E;console.log(l.value,"##item.value"),console.log(E,"##coinAmount");let K=j.value;if(console.log("执行##"),f.value||Q.value&&!te.value&&!se.value){if(f.value){const Ge=new a(R.value).mul(Math.pow(10,r.value.decimals)).mul(l.value).toString();console.log(Ge,"##amount"),E=P(Ge,0),b.value=P(new a(R.value).mul(l.value).toString(),r.value.decimals)}if(Q.value){const Ge=new a(R.value).mul(l.value).mul(Math.pow(10,y.value.decimals)).toString();E=P(Ge,0),g.value=P(new a(R.value).mul(l.value).toString(),y.value.decimals)}console.log(b.value,"##fromCoinAmount.value");const De=await ae.calculateRemoveSwapAmount({lowerTick:B,upperTick:Y,curSqrtPrice:new pe(n.value.current_sqrt_price),fix_amount_a:K,receiveAmount:E,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address,slippage:Number(T.value)/100,decimals:f.value?r.value.decimals:y.value.decimals,liquidity:l.value==1?n.value.positionLiquidity:"",maxLiquidity:n.value.positionLiquidity,request_id:E});if(console.log(De,"###swapResult536"),De){if(De.request_id!==E)return;x.value=De.is_exceed,E=new pe(De.swapOutAmount),n.value.current_sqrt_price,ve.value={swap_amount:De.swapInAmount,liquidity:De.liquidity,route_obj:De.route_obj,a2b:!K},K=!K;const Ge=n.value.token_a.decimals,Fo=n.value.token_b.decimals,un=new a(De.swapInAmount).div(new a(Math.pow(10,Ge))).toString(),Oo=P(new a(De.swapOutAmountLimit).div(new a(Math.pow(10,Fo))).toString(),Fo),io=v.value?n.value.token_b.symbol:n.value.token_a.symbol,ao=v.value?n.value.token_a.symbol:n.value.token_b.symbol;ee.value=l.value==1?`To withdraw ${N(f.value?b.value:g.value)} ${f.value?io:ao},
          ${N(f.value?n.value.amountB:n.value.amountA)} ${f.value?ao:io}  in the pool will be traded for ${N(Oo)} ${f.value?io:ao}`:`To withdraw ${N(f.value?b.value:g.value)} ${f.value?io:ao},
          ${N(un)} ${f.value?ao:io}  in the pool will be traded for ${N(Oo)} ${f.value?io:ao}`,ie=De.liquidity}else n.value.current_sqrt_price,E=new pe(E),ee.value="",de.value=!0;console.log(ne,"result###"),Z.value=new a(n.value.myLiquidity).mul(new a(l.value)).toString(),console.log(n.value,n.value.liquidity,ie,Z.value,"###positionInfo.value.liquidity"),console.log(Z.value,"##lpTokenAmount.value"),d.value=new a(Z.value),fe.value=ie}else{x.value=!1;const De=new a(me.value).mul(Math.pow(10,r.value.decimals)).mul(l.value).toString();E=P(De,0),b.value=P(new a(me.value).mul(l.value).toString(),r.value.decimals);const Ge=new a(we.value).mul(l.value).mul(Math.pow(10,y.value.decimals)).toString();E=P(Ge,0),g.value=P(new a(we.value).mul(l.value).toString(),y.value.decimals),n.value.current_sqrt_price,E=new pe(E),l.value!==1?ne=new a(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(l.value).toString():ne=new a(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),d.value=new a(ne).div(Math.pow(10,n.value.lpInfo.decimals)),ie=$o.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},ne),Z.value=P(ne,0),fe.value=P(ie,0),console.log(ie,"###newLiquidity525")}};Ce(i,ro((l,B)=>{l!==B&&(Number(l)>100?i.value=100:l&&n.value?(console.log("687===>"),i.value=l,ge({value:i.value/100})):(b.value="",g.value=""))},300)),Ce(()=>b.value,ro((l,B)=>{l?H():!f.value&&!Q.value&&(g.value="",i.value=0)},500),{immediate:!0}),Ce(()=>g.value,ro((l,B)=>{l?H():!f.value&&!Q.value&&(b.value="",i.value=0)},500),{immediate:!0});const Fe=To(),{setIsShowSuccess:Re,setIsShowRejected:Ie,setIsShowWaiting:Se,setTransactionDesc:qe,setTransactionTxid:eo,setPositiomNum:to,setTransactionDescText:so}=J,ue=h(!1),{t:oe}=Co(),ko=async()=>{var Me,Oe;ue.value=!0,eo("");const l=Number(b.value)>0?`${N(b.value,r.value.decimals)} ${r.value.symbol}`:"",B=Number(g.value)>0?`${N(g.value,y.value.decimals)} ${y.value.symbol}`:"";console.log(l,B,"###transactionDescTo"),qe(oe("tips.removeLiquidiyText",{from:v.value?B:l,and:Number(b.value)>0&&Number(g.value)>0?"and":"",to:v.value?l:B})),Se(!0);const Y=oe("modal.removeLiquidityText2");so(Y);const U=n.value.autoPoolPositionInfo.tick_lower_index,re=n.value.autoPoolPositionInfo.tick_upper_index,le=je.tickIndexToSqrtPriceX64(U),ie=je.tickIndexToSqrtPriceX64(re),ne=n.value.rewarderInfo.map(Ne=>Ne.coinAddress);console.log(Z.value,"##lpTokenAmount.value431");let E;j.value?E=new a(b.value).mul(Math.pow(10,r.value.decimals)).toString():E=new a(g.value).mul(Math.pow(10,y.value.decimals)).toString(),console.log();const K={lowerSqrtPrice:le,upperSqrtPrice:ie,lpTokenAmount:Z.value,liquidity:fe.value,curSqrtPrice:new pe(n.value.object.current_sqrt_price),slippage:Number(T.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.clmm_pool_id,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coinTypeA,coinTypeB:n.value.autoPoolPositionInfo.coinTypeB,rewarder_coin_types:ne,swapParams:ve.value,fix_amount_a:j.value,isOnlyA:!te.value&&!se.value?f.value:!1,isOnlyB:!se.value&&!te.value?Q.value:!1,lowerTick:U,upperTick:re,receiveAmount:E,sliderVal:i.value,positionInfo:n.value,maxLiquidity:n.value.positionLiquidity,farming_pool:n.value.autoPoolPositionInfo.pool_id};try{const Ne=await ae.remove(K);console.log(Ne,"移除流动性payload");const lo=await s.value.currentWallet.signAndExecuteTransactionBlock(Ne);let $e=V.value.handleTx(lo);if(console.log("0331###remove###tx####",$e),$e&&$e.hash){eo($e.hash),Se(!1),Re(!0);const Be={title:oe("common.removeLiquidity"),desc:"",hash:$e.hash,descTransactions:`Remove ${l} ${Number(b.value)>0&&Number(g.value)>0?"and":""} ${B} from the pool`,sender:s.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${b.value} ${(Me=r.value)==null?void 0:Me.symbol} and ${g.value} ${(Oe=y.value)==null?void 0:Oe.symbol}`};Be.res=$e.res,V.value.showTransitionPending(Be),await V.value.watchTransaction(Be)&&(b.value="",g.value="",d.value="",i.value=0,setTimeout(()=>{q.updatePositionItem(n.value.id),V.value.getAccount(s.value.address)},1e3),Number(i.value)==100&&t.name=="auto-pool-detail"&&Fe.push("/vaults"))}else Se(!1),Ie(!0);ue.value=!1}catch(Ne){console.log("Remove error",Ne),ue.value=!1,Se(!1),Ie(!0)}};Ce(()=>n.value,(l,B)=>{l&&!Ze(l)&&(r.value=l==null?void 0:l.token_a,y.value=l==null?void 0:l.token_b,console.log("触发###"),(!B||B&&B.address!==l.address)&&(i.value=i.value>0?i.value:25,ge({value:i.value/100})),B&&B.current_sqrt_price!==l.current_sqrt_price&&(F.value?ge({value:i.value/100}):H()))},{immediate:!0});const mo=k(()=>{const l=Number(d.value)>Number(D.value);return!b.value&&!g.value||!d.value||d.value<=0||!b.value&&f.value||!g.value&&Q.value?oe("button.enterAmount"):l?"Invalid Amount":x.value?oe("button.insufficientLiquidity"):de.value?oe("button.enterAmount"):(console.log(b.value,R.value,g.value,"856##"),f.value&&Number(b.value)>Number(R.value)||Q.value&&Number(g.value)>Number(R.value)?"Invalid Amount":oe("button.remove"))}),co=k(()=>{const l=Number(d.value)>Number(D.value);return!!(!b.value&&!g.value||Number(b.value)<=0&&f.value||Number(g.value)<=0&&Q.value||!d.value||d.value<=0||l||x.value||ye.value!=="STATUS_RUNNING"||de.value||f.value&&Number(b.value)>Number(R.value)||Q.value&&Number(g.value)>Number(R.value))}),ho=l=>(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||uo("/image/coins/sui-unknown.png"),_o=l=>{b.value="",g.value="",F.value=!0,ee.value="",l=="only-a"?(f.value=!f.value,Q.value=!1,j.value=!0):(Q.value=!Q.value,f.value=!1,j.value=!1)},A=l=>{F.value=!0,i.value=100,l==="fromCoin"?j.value=!0:j.value=!1},M=l=>{F.value=!0,i.value=50,l==="fromCoin"?j.value=!0:j.value=!1},R=h(),L=async()=>{const l=n.value.token_a.decimals,B=n.value.token_b.decimals,Y=new a(me.value).mul(new a(Math.pow(10,l))).toNumber(),U=new a(we.value).mul(new a(Math.pow(10,B))).toNumber(),re=f.value?U:Y,le=f.value?y.value.address===n.value.token_a.address:r.value.address===n.value.token_a.address;try{const ie=await S.value.swapRouterContract.getSwapRouter(f.value?y:r,f.value?r:y,re,!0,Number(T.value)/100,"",void 0,[{pool_id:n.value.address,tick_lower:n.value.autoPoolPositionInfo.tick_lower_index,tick_upper:n.value.autoPoolPositionInfo.tick_upper_index,delta_liquidity:Number(n.value.positionLiquidity),is_increase:!1}]),ne=new a(ie.amountOut);R.value=ne.sub(ne.mul(Number(T.value)/100)).add(new a(f.value?me.value:we.value)).toString()}catch{if(f.value||Q.value){console.log(re,"##receiveAmount");let ne=await V.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:le,byAmountIn:!0,amount:re});console.log(ne,ne.estimatedAmountOut,l,B,"##preSwapRes");const E=new a(ne.estimatedAmountOut);R.value=E.sub(E.mul(Number(T.value)/100)).add(new a(f.value?me.value:we.value)).toString(),console.log("转换之后数量:",ne.estimatedAmountOut),console.log("转换之后滑点数量:",E.mul(Number(T.value)/100).toNumber()),console.log("原有数量减滑点数量:",E.sub(E.mul(Number(T.value)/100)).toNumber()),console.log("fromCoin原有数量:",me.value),console.log(R.value,"###onlyTokenBalance.value"),f.value?b.value=P(new a(R.value).mul(i.value/100).toString(),r.value.decimals):g.value=P(new a(R.value).mul(i.value/100).toString(),y.value.decimals),ge({value:i.value/100})}}ge({value:i.value/100})};Ce(()=>[f.value,Q.value,me.value,we.value],([l,B])=>{l||B?L():ge({value:i.value/100})},{immediate:!0});const Pe=l=>`${l}%`,ye=k(()=>p.value.currentAutoPoolStatus),_e=h(),Ae=()=>{_e.value=window.setInterval(()=>{(b.value||g.value)&&!F.value?H():ge({value:i.value/100})},2e4)};return po(()=>{Ae()}),Po(()=>{window.clearInterval(_e.value)}),{removeLiquidityBtnText:mo,removeLiquidityBtnDisabled:co,wallet:s,ratioArr:w,positionInfo:n,isShowRemoveModal:I,needReverse:v,fromCoin:r,toCoin:y,lpAmount:d,lpBalance:D,sliderVal:i,sFixD:P,isSlider:F,fromCoinAmount:b,toCoinAmount:g,setPercent:ge,toRemove:ko,addCommom:N,getCoinIcon:ho,isOnlyA:f,isOnlyB:Q,onlyToken:_o,fixedFromCoin:j,maxBtnSelect:A,halfBtnSelect:M,fromCoinBlance:me,toCoinBlance:we,showFromCoinLock:te,showToCoinLock:se,removeText:ee,onlyTokenBalance:R,totalWithdraw:Le,formatter:Pe,currentAutoPoolStatus:ye,calculateLoading:O}}});const bo=e=>(ze("data-v-fdd2898d"),e=e(),Je(),e),Hl={class:"auto-pool-add"},zl={class:"auto-pool-add-content"},Jl={class:"liquidity-action-tab"},Xl=bo(()=>o("div",{class:"remove tab-active"},"Remove",-1)),Zl={key:0,class:"card-item"},Ql={key:1,class:"card-item"},Gl={class:"remove-ratio"},Yl={class:"remove-ratio-select"},Kl={key:0,class:"ratio"},xl={key:1,class:"ratio"},ei={class:"ratio-list"},oi=["onClick"],ni=bo(()=>o("span",null,"Pool Closed",-1)),ti={key:4,class:"remove-info"},si={key:0,class:"remove-text total-amount"},li={class:"total-amount"},ii=bo(()=>o("span",null,"Total Withdraw",-1)),ai={key:0},ui={class:"total-amount"},ri=bo(()=>o("span",null,"LP Burn Amount",-1)),di={key:0};function vi(e,s,J,X,T,C){var n,v,r,y,I;const c=Zo,S=Qo,w=Wo,i=no("AutoPoolV2PoolStatus"),t=So,q=Ho,p=Yo;return u(),_("div",Hl,[o("div",zl,[o("div",Jl,[o("div",{class:"increase",onClick:s[0]||(s[0]=jo(d=>e.$emit("changeCurrentTab"),["stop"]))},"Add"),Xl]),o("div",{class:Te(e.needReverse?"card-container reverse":"card-container")},[(e.needReverse?!e.isOnlyA:!e.isOnlyB)?(u(),_("div",Zl,[W(c,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":s[1]||(s[1]=d=>e.fromCoinAmount=d),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.isOnlyA?e.onlyTokenBalance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:s[2]||(s[2]=d=>e.maxBtnSelect("fromCoin")),onOnHalf:s[3]||(s[3]=d=>e.halfBtnSelect("fromCoin")),onOnInput:s[4]||(s[4]=d=>{e.isSlider=!1,e.fromCoinAmount=d}),onOnFocus:s[5]||(s[5]=()=>{e.isSlider=!1,e.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(u(),G(S,{key:0})):z("",!0)])):z("",!0),(e.needReverse?!e.isOnlyB:!e.isOnlyA)?(u(),_("div",Ql,[W(c,{modelValue:e.toCoinAmount,"onUpdate:modelValue":s[6]||(s[6]=d=>e.toCoinAmount=d),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.isOnlyB?e.onlyTokenBalance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","amount-leabl":"Available","has-arrow":!1,onOnMax:s[7]||(s[7]=d=>e.maxBtnSelect("toCoin")),onOnHalf:s[8]||(s[8]=d=>e.halfBtnSelect("toCoin")),onOnInput:s[9]||(s[9]=d=>{e.isSlider=!1,e.toCoinAmount=d}),onOnFocus:s[10]||(s[10]=()=>{e.isSlider=!1,e.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(u(),G(S,{key:0})):z("",!0)])):z("",!0)],2),o("div",Gl,[o("div",Yl,[Number(e.lpBalance)>=Number(e.lpAmount)?(u(),_("div",Kl,m(e.sliderVal>0&&Number(("sFixD"in e?e.sFixD:$(P))(e.sliderVal,2))<.01?"<0.01":("sFixD"in e?e.sFixD:$(P))(e.sliderVal,2))+"% ",1)):(u(),_("div",xl,"--")),o("div",ei,[(u(!0),_(oo,null,Eo(e.ratioArr,(d,D)=>(u(),_("div",{key:D,class:Te(["ratio-item",e.sliderVal==d.value?"ratio-item-active":""]),onClick:()=>{e.isSlider=!0,e.sliderVal=d.value}},m(d.name),11,oi))),128))])]),W(w,{value:e.sliderVal,"onUpdate:value":s[11]||(s[11]=d=>e.sliderVal=d),"tip-formatter":e.formatter,onChange:s[12]||(s[12]=d=>e.isSlider=!0)},null,8,["value","tip-formatter"])])]),e.currentAutoPoolStatus=="STATUS_REBALANCING"?(u(),G(i,{key:0})):z("",!0),(n=e.positionInfo)!=null&&n.is_pause?(u(),G(t,{key:1,class:"big-btn liquidity-btn",disabled:!0},{default:be(()=>[ni]),_:1})):e.wallet.connected?(u(),G(t,{key:2,class:"big-btn liquidity-btn",disabled:e.removeLiquidityBtnDisabled,onClick:s[13]||(s[13]=d=>e.toRemove())},{default:be(()=>[o("span",null,m(e.removeLiquidityBtnText),1)]),_:1},8,["disabled"])):(u(),G(t,{key:3,class:"big-btn liquidity-btn",onClick:s[14]||(s[14]=d=>e.wallet.setIsShowWalletModal(!0))},{default:be(()=>[o("span",null,m(e.$t("button.connectWallet")),1)]),_:1})),e.removeLiquidityBtnDisabled?z("",!0):(u(),_("div",ti,[e.removeText&&(e.isOnlyA&&Number(e.fromCoinAmount)>0||e.isOnlyB&&Number(e.toCoinAmount)>0)?(u(),_("div",si,m(e.removeText),1)):z("",!0),o("div",li,[ii,e.calculateLoading?(u(),G(q,{key:1,paragraph:!1,active:""})):(u(),_("span",ai,m(e.totalWithdraw),1))]),o("div",ui,[ri,(e.fromCoinAmount||e.toCoinAmount)&&!e.calculateLoading?(u(),_("span",di,m(("addCommom"in e?e.addCommom:$(N))(("sFixD"in e?e.sFixD:$(P))(e.lpAmount,e.positionInfo.decimals)))+" "+m(e.needReverse?(v=e.toCoin)==null?void 0:v.symbol:(r=e.fromCoin)==null?void 0:r.symbol)+"-"+m(e.needReverse?(y=e.fromCoin)==null?void 0:y.symbol:(I=e.toCoin)==null?void 0:I.symbol),1)):(u(),G(q,{key:1,paragraph:!1,active:""}))])])),e.isShowRemoveModal?(u(),G(p,{key:5,"pool-info":e.positionInfo,"from-coin":e.positionInfo.token_a,"to-coin":e.positionInfo.token_b,onOnClose:s[15]||(s[15]=d=>e.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):z("",!0)])}const mi=Ee(jl,[["render",vi],["__scopeId","data-v-fdd2898d"]]),ci=He({components:{AutoPoolV2Info:xo,AutoPoolV2PositionRange:en,AutoPoolV2PoolComposition:nn,AutoPoolV2PoolLiquidity:tn,AutoPoolV2PoolAdd:Wl,AutoPoolV2PoolRemove:mi},setup(){const e=Qe();xe();const s=go(),J=k(()=>s),X=k(()=>e),T=Ke(),C=h();Ce(()=>[X.value.positionInfoObj,T.params.id],([i,t])=>{i&&!Ze(i)&&t&&(C.value=i[t],console.log(C.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const c=async()=>{console.log("重新获取数据"),e.getAutoPoolAPY(),e.getVault(T.params.id,"refresh")},S=h();Ce(()=>T.query.action,i=>{i&&(S.value=i)},{immediate:!0}),po(()=>{e.getVault(T.params.id,!1)}),k(()=>J.value.chainName),To();const w=k(()=>X.value.autoPoolLoading);return{clickRefresh:c,currentTab:S,positionInfo:C,autoPoolLoading:w}}});const pi={class:"auto-pool-detail-v2"},fi={class:"detail-top"},gi={class:"detail-bottom pc-detail"},yi={class:"detail-bottom-left"},bi={class:"detail-bottom-right"},ki={class:"h5-detail"},hi={key:0,class:"loading-global"};function _i(e,s,J,X,T,C){const c=En,S=xo,w=en,i=nn,t=tn,q=no("AutoPoolV2PoolAdd"),p=no("AutoPoolV2PoolRemove"),n=yn;return u(),_("div",pi,[o("div",fi,[W(c,{"pool-info":e.positionInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"]),W(S)]),o("div",gi,[o("div",yi,[W(w),W(i),W(t)]),o("div",bi,[e.currentTab=="deposit"?(u(),G(q,{key:0,onChangeCurrentTab:s[0]||(s[0]=v=>e.currentTab="remove")})):(u(),G(p,{key:1,onChangeCurrentTab:s[1]||(s[1]=v=>e.currentTab="deposit")}))])]),o("div",ki,[e.currentTab=="deposit"?(u(),G(q,{key:0,onChangeCurrentTab:s[2]||(s[2]=v=>e.currentTab="remove")})):(u(),G(p,{key:1,onChangeCurrentTab:s[3]||(s[3]=v=>e.currentTab="deposit")})),W(w),W(i),W(t)]),e.autoPoolLoading?(u(),_("div",hi,[W(n)])):z("",!0)])}const zi=Ee(ci,[["render",_i],["__scopeId","data-v-5f6b7979"]]);export{zi as default};
