import{_ as ce}from"./new-position-title.cc03a0d6.js";import{_ as Go}from"./token-warning.109f8ec7.js";import{_ as me}from"./status-block.82b8d10b.js";import{u as No,g as ve,a as P,d as To,c as Oo,p as Jo,b as Zo,s as po,e as no,T as $o,f as pe,h as fe,C as Ko}from"./pool.2865e333.js";import{u as ko,a as Do}from"./sha256.4a30d400.js";import{i as Io}from"./import-icon.de3e6c66.js";import{u as jo,a as xo}from"./autoPool.3e5268e3.js";import{a as fo,l as c,r as L,m as _o,q as so,e as bo,s as Lo,o as _,f as O,h as e,t as H,i as W,v as r,j as ro,x as Mo,u as F,p as Co,k as So,M as oe,y as Uo,z as ee,c as J,w as io,B as Xo,A as ne,C as Yo,D as _e,L as be,I as he,S as te,E as ge,b as se,F as ye,G as $e,H as Ie,J as ke}from"./entry.b1f3177f.js";import{_ as Ce}from"./assets-card.4de1d172.js";import{_ as Se}from"./coin-lock.c98233c1.js";import{D as $}from"./decimal.0e8aa3f1.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./decimal.633e31ee.js";import{V as Qo}from"./index.9fc92916.js";import"./back.3bb0ff2e.js";import"./swap-setting.8a30c079.js";/* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.ed7da898.js";const we=fo({setup(){const o=ko(),n=c(()=>o),T=No(),A=c(()=>T),N=c(()=>n.value.theme),I=i=>{var l;return(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((l=A.value.tokensObj[i==null?void 0:i.address])==null?void 0:l.logo_url)||(N.value==="default"?Io("/image/coins/unknown.png"):Io("/image/coins/sui-unknown.png"))},g=L(!0),v=jo(),b=c(()=>v),h=_o(),s=L();so(()=>[b.value.positionInfoObj,h.params.id],([i,l])=>{i&&!Oo(i)&&l&&(s.value=i[l],console.log(s.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const t=c(()=>{var i;return(i=s.value)==null?void 0:i.needReverse}),u=c(()=>{var i,l;return b.value.apyObj&&((l=b.value.apyObj[(i=s.value)==null?void 0:i.id])==null?void 0:l.tvl)||"--"}),a=c(()=>{var i,l;return b.value.apyObj&&((l=b.value.apyObj[(i=s.value)==null?void 0:i.id])==null?void 0:l.apr)||"--"});return{positionInfo:s,tvl:u,store:n,indexStore:o,needReverse:t,getCoinIcon:I,getExplorerUrl:ve,addCommom:P,decimalUi:To,direct:g,apy:a}}});const Bo=o=>(Co("data-v-36444486"),o=o(),So(),o),Ae={class:"auto-position-info"},Pe={class:"pool-info"},Re={class:"left"},qe={class:"coin-a"},Te={alt:""},Ne={class:"coin-b"},Le={alt:""},Be={class:"position-name"},Me={key:0,class:"pool-fee"},Oe=Bo(()=>e("span",null,"Fee tier",-1)),De={class:"right"},je={class:"price-info"},Ue={class:"current-price"},Fe=Bo(()=>e("span",null,"Current Price",-1)),We={class:"coin-rate"},Ee=Bo(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),Xe=Bo(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ze=[Ee,Xe],He={key:0},Ve={key:1},Ye={class:"apy-and-tvl"},Ge={class:"apy"},Je=Bo(()=>e("div",{class:"apy-title"},"APY",-1)),Ke={class:"apy-text"},Qe={class:"tvl"},Ze=Bo(()=>e("div",{class:"tvl-title"},"TVL",-1)),xe={class:"tvl-text"};function on(o,n,T,A,N,I){var h,s,t,u,a,i,l,d,k,y,w,V,R,C,E,q,D,Y,G,S,j,K,X,eo,Q,lo,to,co,vo,Po,p,U,ao;const g=Go,v=me,b=Lo("image");return _(),O("div",Ae,[e("div",Pe,[e("div",Re,[e("div",qe,[H(e("img",Te,null,512),[[b,o.needReverse?o.getCoinIcon((s=o.positionInfo)==null?void 0:s.token_b):o.getCoinIcon((h=o.positionInfo)==null?void 0:h.token_a)]]),W(g,{address:o.needReverse?(i=(a=o.positionInfo)==null?void 0:a.token_b)==null?void 0:i.address:(u=(t=o.positionInfo)==null?void 0:t.token_a)==null?void 0:u.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Ne,[H(e("img",Le,null,512),[[b,o.needReverse?o.getCoinIcon((d=o.positionInfo)==null?void 0:d.token_a):o.getCoinIcon((l=o.positionInfo)==null?void 0:l.token_b)]]),W(g,{address:o.needReverse?(V=(w=o.positionInfo)==null?void 0:w.token_a)==null?void 0:V.address:(y=(k=o.positionInfo)==null?void 0:k.token_b)==null?void 0:y.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Be,r(o.needReverse?(C=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:C.symbol:(q=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:q.symbol)+" - "+r(o.needReverse?(Y=(D=o.positionInfo)==null?void 0:D.token_a)==null?void 0:Y.symbol:(S=(G=o.positionInfo)==null?void 0:G.token_b)==null?void 0:S.symbol),1),(j=o.positionInfo)!=null&&j.fee?(_(),O("div",Me,[Oe,ro(" "+r(((K=o.positionInfo)==null?void 0:K.fee)*100)+"% ",1)])):Mo("",!0)]),e("div",De,[W(v,{"current-status":(X=o.positionInfo)==null?void 0:X.currentStatus},null,8,["current-status"])])]),e("div",je,[e("div",Ue,[e("div",null,[Fe,e("div",We,[e("div",{onClick:n[0]||(n[0]=mo=>o.direct=!o.direct)},ze)])]),(o.needReverse?!o.direct:o.direct)?(_(),O("div",He,[ro(r(("addCommom"in o?o.addCommom:F(P))(("decimalUi"in o?o.decimalUi:F(To))((eo=o.positionInfo)==null?void 0:eo.price,6)))+"   ",1),e("span",null,r((lo=(Q=o.positionInfo)==null?void 0:Q.token_b)==null?void 0:lo.symbol)+" per "+r((co=(to=o.positionInfo)==null?void 0:to.token_a)==null?void 0:co.symbol),1)])):(_(),O("div",Ve,[ro(r(("addCommom"in o?o.addCommom:F(P))(("decimalUi"in o?o.decimalUi:F(To))(1/((vo=o.positionInfo)==null?void 0:vo.price),6)))+"   ",1),e("span",null,r((p=(Po=o.positionInfo)==null?void 0:Po.token_a)==null?void 0:p.symbol)+" per "+r((ao=(U=o.positionInfo)==null?void 0:U.token_b)==null?void 0:ao.symbol),1)]))]),e("div",Ye,[e("div",Ge,[Je,e("div",Ke,r(o.apy),1)]),e("div",Qe,[Ze,e("div",xe,"$"+r(("addCommom"in o?o.addCommom:F(P))(o.tvl,2)),1)])])])])}const ie=bo(we,[["render",on],["__scopeId","data-v-36444486"]]),en=fo({setup(){const o=jo(),n=c(()=>o),T=_o(),A=c(()=>(console.log(n.value.positionInfoObj[T.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),n.value.positionInfoObj[T.params.id])),N=c(()=>{var v;return(v=A.value)==null?void 0:v.needReverse}),I=Do(),g=c(()=>I);return{positionInfo:A,needReverse:N,addCommom:P,wallet:g}}});const wo=o=>(Co("data-v-5d18256e"),o=o(),So(),o),nn={class:"auto-position-liquidity"},tn={class:"my-liquidity"},sn={class:"left"},ln=wo(()=>e("div",null,"My Liquidity",-1)),an={key:0},un={key:1},dn={class:"right"},rn=wo(()=>e("div",null,"My share",-1)),cn={key:0},mn={key:1},vn={class:"my-liquidity-info"},pn={class:"lp-info"},fn={class:"lp-bg"},_n={alt:""},bn={key:0,class:"lp-num"},hn={key:1,class:"lp-num"},gn=wo(()=>e("div",{class:"assets-pooled-title"}," Pooled Assets ",-1)),yn={class:"assets-pooled"},$n={alt:""},In={key:0},kn={key:1},Cn=wo(()=>e("p",null,"--",-1)),Sn=wo(()=>e("p",null,"--",-1)),wn=[Cn,Sn],An={alt:""},Pn={key:0},Rn={key:1},qn=wo(()=>e("p",null,"--",-1)),Tn=wo(()=>e("p",null,"--",-1)),Nn=[qn,Tn];function Ln(o,n,T,A,N,I){var v,b,h,s,t,u,a,i,l,d,k,y,w,V,R,C,E,q,D,Y,G,S,j,K,X,eo,Q,lo,to,co;const g=Lo("image");return _(),O("div",nn,[e("div",tn,[e("div",sn,[ln,(v=o.wallet)!=null&&v.connected?(_(),O("div",an,"$"+r(("addCommom"in o?o.addCommom:F(P))((b=o.positionInfo)==null?void 0:b.myLiquidityUSD)),1)):(_(),O("div",un,"--"))]),e("div",dn,[rn,(h=o.wallet)!=null&&h.connected?(_(),O("div",cn,r((s=o.positionInfo)==null?void 0:s.myShare)+"%",1)):(_(),O("div",mn,"--%"))])]),e("div",vn,[e("div",pn,[e("div",fn,[H(e("img",_n,null,512),[[g,(u=(t=o.positionInfo)==null?void 0:t.lpInfo)==null?void 0:u.logo_url]])]),(a=o.wallet)!=null&&a.connected?(_(),O("div",bn,r(("addCommom"in o?o.addCommom:F(P))((i=o.positionInfo)==null?void 0:i.myLiquidity))+" LP",1)):(_(),O("div",hn,"-- LP"))]),gn,e("div",yn,[e("div",null,[H(e("img",$n,null,512),[[g,o.needReverse?(d=(l=o.positionInfo)==null?void 0:l.token_b)==null?void 0:d.logo_url:(y=(k=o.positionInfo)==null?void 0:k.token_a)==null?void 0:y.logo_url]]),(w=o.wallet)!=null&&w.connected?(_(),O("div",In,[e("p",null,"$"+r(("addCommom"in o?o.addCommom:F(P))((V=o.positionInfo)==null?void 0:V.myAmountAUSD)),1),e("p",null,r(("addCommom"in o?o.addCommom:F(P))((R=o.positionInfo)==null?void 0:R.amountA))+" "+r(o.needReverse?(E=(C=o.positionInfo)==null?void 0:C.token_b)==null?void 0:E.symbol:(D=(q=o.positionInfo)==null?void 0:q.token_a)==null?void 0:D.symbol),1)])):(_(),O("div",kn,wn))]),e("div",null,[H(e("img",An,null,512),[[g,o.needReverse?(G=(Y=o.positionInfo)==null?void 0:Y.token_a)==null?void 0:G.logo_url:(j=(S=o.positionInfo)==null?void 0:S.token_b)==null?void 0:j.logo_url]]),(K=o.wallet)!=null&&K.connected?(_(),O("div",Pn,[e("p",null,"$"+r(("addCommom"in o?o.addCommom:F(P))((X=o.positionInfo)==null?void 0:X.myAmountBUSD)),1),e("p",null,r(("addCommom"in o?o.addCommom:F(P))((eo=o.positionInfo)==null?void 0:eo.amountB))+" "+r(o.needReverse?(lo=(Q=o.positionInfo)==null?void 0:Q.token_a)==null?void 0:lo.symbol:(co=(to=o.positionInfo)==null?void 0:to.token_b)==null?void 0:co.symbol),1)])):(_(),O("div",Rn,Nn))])])])])}const le=bo(en,[["render",Ln],["__scopeId","data-v-5d18256e"]]),Bn=fo({components:{Modal:oe},props:{poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},totalAmount:{type:String,default:""},shareOfPool:{type:String,default:""},minimumReceivedLP:{type:String,default:""}},setup(o,n){const{t:T}=Uo(),A=c(()=>{var u,a,i;return((u=o==null?void 0:o.poolInfo)==null?void 0:u.needReverse)||((i=(a=o==null?void 0:o.poolInfo)==null?void 0:a.poolInfo)==null?void 0:i.needReverse)}),N=No(),I=c(()=>N),g=ko(),v=c(()=>g),b=u=>{var a;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((a=I.value.tokensObj[u==null?void 0:u.address])==null?void 0:a.logo_url)||(v.value.theme==="default"?Io("/image/coins/unknown.png"):Io("/image/coins/sui-unknown.png"))},h=_o(),s=L(!1),t=()=>{n.emit("toAdd")};return console.log(o,"props451"),{needReverse:A,getCoinIcon:b,addCommom:P,t:T,route:h,checked:s,decimalUi:To,clickSubmit:t}}});const Fo=o=>(Co("data-v-bb911124"),o=o(),So(),o),Mn=Fo(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),On={class:"modal-content"},Dn={class:"pool-info"},jn={class:"left"},Un={alt:""},Fn={alt:""},Wn={class:"pool-name"},En={class:"right"},Xn={class:"coin-info"},zn={class:"from-coin-info"},Hn={class:"left"},Vn={class:"coin-amount"},Yn={class:"coin-symbol"},Gn={class:"right"},Jn={class:"to-coin-info"},Kn={class:"left"},Qn={class:"coin-amount"},Zn={class:"coin-symbol"},xn={class:"right"},ot=Fo(()=>e("div",{class:"to-swap-logo"},null,-1)),et={class:"add-info"},nt={class:"total-amount"},tt=Fo(()=>e("span",null,"Total Amount",-1)),st={class:"total-amount"},it=Fo(()=>e("span",null,"Share of Pool",-1)),lt={class:"total-amount"},at=Fo(()=>e("span",null,"Minimum Received LP",-1));function ut(o,n,T,A,N,I){const g=Go,v=Xo,b=ee("Modal"),h=Lo("image");return _(),J(b,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:n[0]||(n[0]=s=>o.$emit("onClose"))},{closeIcon:io(()=>[Mn]),default:io(()=>{var s,t,u,a,i,l,d,k,y,w,V,R,C,E,q,D,Y,G,S,j,K,X,eo,Q;return[e("div",On,[e("div",Dn,[e("div",jn,[e("div",null,[H(e("img",Un,null,512),[[h,o.needReverse?(a=(u=o.poolInfo)==null?void 0:u.token_b)==null?void 0:a.logo_url:(t=(s=o.poolInfo)==null?void 0:s.token_a)==null?void 0:t.logo_url]]),W(g,{address:o.needReverse?(k=(d=o.poolInfo)==null?void 0:d.token_b)==null?void 0:k.address:(l=(i=o.poolInfo)==null?void 0:i.token_a)==null?void 0:l.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[H(e("img",Fn,null,512),[[h,o.needReverse?(R=(V=o.poolInfo)==null?void 0:V.token_a)==null?void 0:R.logo_url:(w=(y=o.poolInfo)==null?void 0:y.token_b)==null?void 0:w.logo_url]]),W(g,{address:o.needReverse?(D=(q=o.poolInfo)==null?void 0:q.token_a)==null?void 0:D.address:(E=(C=o.poolInfo)==null?void 0:C.token_b)==null?void 0:E.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",Wn,[e("span",null,r(o.needReverse?(j=(S=o.poolInfo)==null?void 0:S.token_b)==null?void 0:j.symbol:(G=(Y=o.poolInfo)==null?void 0:Y.token_a)==null?void 0:G.symbol),1),ro(" - "),e("span",null,r(o.needReverse?(Q=(eo=o.poolInfo)==null?void 0:eo.token_a)==null?void 0:Q.symbol:(X=(K=o.poolInfo)==null?void 0:K.token_b)==null?void 0:X.symbol),1)])]),e("div",En,[ro(" Fee tier "),e("span",null,r(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),e("div",Xn,[e("div",zn,[e("div",Hn,[e("div",Vn,r(("addCommom"in o?o.addCommom:F(P))(o.fromCoinAmount)||0),1),e("div",Yn,r(o.fromCoin&&o.fromCoin.symbol),1)]),e("div",Gn,[H(e("img",null,null,512),[[h,o.fromCoin&&o.fromCoin.logoURI||o.getCoinIcon(o.fromCoin)]]),W(g,{address:o.fromCoin&&o.fromCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])])]),e("div",Jn,[e("div",Kn,[e("div",Qn,r(("addCommom"in o?o.addCommom:F(P))(o.toCoinAmount)||0),1),e("div",Zn,r(o.toCoin&&o.toCoin.symbol),1)]),e("div",xn,[H(e("img",null,null,512),[[h,o.toCoin&&o.toCoin.logoURI||o.getCoinIcon(o.toCoin)]]),W(g,{address:o.toCoin&&o.toCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),ot])]),e("div",et,[e("div",nt,[tt,e("span",null,"$"+r(("addCommom"in o?o.addCommom:F(P))(o.totalAmount)),1)]),e("div",st,[it,e("span",null,r(o.shareOfPool)+"%",1)]),e("div",lt,[at,e("span",null,r(("addCommom"in o?o.addCommom:F(P))(o.minimumReceivedLP))+" "+r(o.fromCoin.symbol)+"-"+r(o.toCoin.symbol),1)])])]),W(v,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:io(()=>[ro(" Add Liquidity ")]),_:1},8,["onClick"])]}),_:1})}const ae=bo(Bn,[["render",ut],["__scopeId","data-v-bb911124"]]),dt=fo({components:{AutoPoolAddModal:ae},setup(){const o=Do(),n=L(!1),T=ko(),A=c(()=>T),N=c(()=>A.value.chainName),I=c(()=>o),g=jo(),v=c(()=>g),b=No(),h=c(()=>b),s=L(),t=_o();so(()=>[v.value.positionInfoObj,t.params.id],([m,f])=>{m&&!Oo(m)&&f&&(s.value=m[f],console.log(s.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const u=c(()=>{var m,f;return console.log((m=s.value)==null?void 0:m.needReverse,"##positionInfo.value?.needReverse"),(f=s.value)==null?void 0:f.needReverse}),a=L(),i=L(),l=L(),d=L(),k=L(!0),y=c(()=>I.value.assets&&a.value&&I.value.assets[a.value.address]?Jo(I.value.assets[a.value.address].balance,a.value.decimals):0),w=c(()=>I.value.assets&&i.value&&I.value.assets[i.value.address]?Jo(I.value.assets[i.value.address].balance,i.value.decimals):0),V=m=>{m==="fromCoin"?(k.value=!0,l.value=y.value>0?a.value.symbol=="SUI"?new $(Number(y.value)).sub(new $(.05)).lt(new $(0))?"0":new $(Number(y.value)).sub(new $(.05)).toString():String(y.value):""):(k.value=!1,d.value=w.value>0?i.value.symbol=="SUI"?new $(Number(w.value)).sub(new $(.05)).lt(new $(0))?"0":new $(Number(w.value)).sub(new $(.05)).toString():String(w.value):"")},R=m=>{m==="fromCoin"?(k.value=!0,l.value=y.value>0?po(new $(Number(y.value)).div(2).toString(),a.value.decimals).toString():""):(k.value=!1,d.value=w.value>0?po(new $(Number(w.value)).div(2).toString(),i.value.decimals).toString():"")},C=c(()=>N.value?Zo(N.value):{}),E=c(()=>A.value.slippage),q=L("--"),D=L("--"),Y=m=>{const f=new $(s.value.autoPoolPositionInfo.liquidity),B=new $(m.toString());if(f.toNumber()>0&&B.toNumber()>0){const M=B.add(f);console.log("totalLiquidity:",f.toString(),"liqididty:",B.toString(),B.div(f).mul(100).toString());const z=To(pe(B.div(M).mul(100).toNumber(),2),2);console.log(s.value.decimals,"##positionInfo.value.decimal");const Z=1/Math.pow(10,s.value.decimals);console.log(z,Z,"###288"),Number(z)<Z?q.value=`<${Z}`:q.value=z}else B.toNumber()>0&&f.toNumber()<=0?q.value="100":q.value="--"},G=m=>{const f=new $(m.toString());console.log(m.toString(),"##liquidityAmount.toString()");const B=f.mul(new $(E.value).div(100)),M=new $(Math.pow(10,s.value.lpInfo.decimals));D.value=po(f.minus(B).div(M).toString(),s.value.decimals)},S=L(!1),j=L(!1),K=()=>{if(console.log(s.value,"238##"),!s.value)return;const m=s.value.autoPoolPositionInfo.tick_lower_index,f=s.value.autoPoolPositionInfo.tick_upper_index;console.log(s.value,"###467");const B=$o.sqrtPriceX64ToTickIndex(new no(s.value.current_sqrt_price));console.log(m,B,f,"###324"),B<m&&(u.value?S.value=!0:j.value=!0),B>f&&(u.value?j.value=!0:S.value=!0);let M;if(l.value||d.value){if(k.value){const x=new $(l.value).mul(Math.pow(10,a.value.decimals)).toString();M=new no(x)}else{const x=new $(d.value).mul(Math.pow(10,i.value.decimals)).toString();M=new no(x)}const{liquidityAmount:z,tokenMaxA:Z,tokenMaxB:oo,tokenMaxAOrigin:uo,tokenMaxBOrigin:yo}=C.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:a.value,tokenB:i.value,lowerTick:m,upperTick:f,coinAmount:M,iscoinA:k.value,roundUp:!0,slippage:Number(E.value)/100,curSqrtPrice:new no(s.value.current_sqrt_price)});console.log(s.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(oo.toString(),Z.toString(),s.value,"###323"),k.value?d.value=Number(oo)>0?oo:"":l.value=Number(Z)>0?Z:"",Y(z),G(z)}};so(()=>s.value,m=>{m&&!Oo(m)&&(a.value=m==null?void 0:m.token_a,i.value=m==null?void 0:m.token_b,S.value=!1,j.value=!1,K())},{immediate:!0});const X=c(()=>h.value.RATES),eo=c(()=>{var m,f,B,M,z,Z,oo,uo,yo,x;if((f=X.value[(m=a.value)==null?void 0:m.address])!=null&&f.price&&((M=X.value[(B=i.value)==null?void 0:B.address])!=null&&M.price)){console.log((Z=X.value[(z=a.value)==null?void 0:z.address])==null?void 0:Z.price,"RATES.value[fromCoin.value?.address]?.price");const Eo=new $(l.value||0).mul(new $((uo=X.value[(oo=a.value)==null?void 0:oo.address])==null?void 0:uo.price)),Ho=new $(d.value||0).mul(new $((x=X.value[(yo=i.value)==null?void 0:yo.address])==null?void 0:x.price));return po(Eo.add(Ho).toString(),2)}else return"--"});so(l,(m,f)=>{m&&K(),m==""&&(q.value="--",d.value="",D.value="--")}),so(d,(m,f)=>{m&&K(),m==""&&(l.value="",q.value="--",D.value="--")});const{t:Q,locale:lo}=Uo(),to=c(()=>{const m=Number(l.value)>Number(y.value),f=Number(d.value)>Number(w.value);return!l.value&&!d.value?Q("button.enterAmount"):m?Q("button.insufficientBalance",{name:a.value.symbol}):f?Q("button.insufficientBalance",{name:i.value.symbol}):"Add Liquidity"}),co=c(()=>{const m=Number(l.value)>Number(y.value),f=Number(d.value)>Number(w.value);return!!(!l.value&&!d.value||m||f)}),vo=L(!0),{setIsShowSuccess:Po,setIsShowRejected:p,setIsShowWaiting:U,setTransactionDesc:ao,setTransactionTxid:mo,setPositiomNum:ho}=T,go=xo("Sui");return{wallet:I,positionInfo:s,isShowAddModal:n,needReverse:u,fromCoin:a,toCoin:i,fromCoinAmount:l,toCoinAmount:d,fromCoinBlance:y,toCoinBlance:w,fixedFromCoin:k,maxBtnSelect:V,halfBtnSelect:R,totalAmountUSD:eo,addCommom:P,shareOfPool:q,minimumReceivedLP:D,addLiquidityBtnText:to,addLiquidityBtnDisabled:co,toAdd:async()=>{var uo,yo;n.value=!1,vo.value=!0,mo("");const m=`${P(l.value)} ${(uo=a.value)==null?void 0:uo.symbol}`,f=`${P(d.value)} ${(yo=i.value)==null?void 0:yo.symbol}`;ao(`Deposit ${l.value>0?m:""} ${d.value>0&&l.value>0?"and":""} ${d.value>0?f:""}`),U(!0);const B=k.value,M=s.value.autoPoolPositionInfo.tick_lower_index,z=s.value.autoPoolPositionInfo.tick_upper_index;let Z;if(k.value){const x=new $(l.value).mul(Math.pow(10,a.value.decimals)).toString();Z=new no(x)}else{const x=new $(d.value).mul(Math.pow(10,i.value.decimals)).toString();Z=new no(x)}const oo=s.value.rewarderInfo.map(x=>x.coinAddress);try{const x={lowerTick:M,upperTick:z,coinAmount:Z,fix_amount_a:B,slippage:Number(E.value)/100,curSqrtPrice:new no(s.value.current_sqrt_price),id:s.value.id,clmm_pool:s.value.autoPoolPositionInfo.pool,lp_token_type:s.value.lp_token_type,coinTypeA:s.value.autoPoolPositionInfo.coin_type_a,coinTypeB:s.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:oo},Eo=await go.deposit(x);console.log(Eo,"===>payloadAdd11111");const Ho=await I.value.currentWallet.signAndExecuteTransactionBlock(Eo);let qo=C.value.handleTx(Ho);if(console.log("toAdd###tx###",qo),qo&&qo.hash){mo(qo.hash),U(!1),Po(!0),console.log(s,"===>positionInfo");const Vo={title:"Supplied",desc:`Deposit ${l.value>0?m:""} ${d.value>0&&l.value>0?"and":""} ${d.value>0?f:""}`,hash:qo.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${l.value>0?m:""} ${d.value>0&&l.value>0?"and":""} ${d.value>0?f:""}`};N.value!=="Aptos"&&(Vo.res=qo.res),C.value.showTransitionPending(Vo),await C.value.watchTransaction(Vo)&&setTimeout(()=>{g.updatePositionItem(s.value.id),C.value.getAccount(I.value.address)},1e3),ho()}else U(!1),p(!0);l.value="",d.value="",vo.value=!1}catch(x){l.value="",d.value="",console.log("addError###",x),vo.value=!1,U(!1),p(!0)}},showToCoinLock:j,showFromCoinLock:S}}});const Wo=o=>(Co("data-v-9dfe31b0"),o=o(),So(),o),rt={class:"auto-pool-add"},ct={class:"auto-pool-add-content"},mt={class:"liquidity-action-tab"},vt=Wo(()=>e("div",{class:"increase tab-active"},"Add",-1)),pt={class:"card-item"},ft={class:"card-item"},_t={class:"add-info"},bt={class:"total-amount"},ht=Wo(()=>e("span",null,"Total Amount",-1)),gt={class:"total-amount"},yt=Wo(()=>e("span",null,"Share of Pool",-1)),$t={class:"total-amount"},It=Wo(()=>e("span",null,"Minimum Received LP",-1)),kt=Wo(()=>e("span",null,"Pool Closed",-1));function Ct(o,n,T,A,N,I){var s,t,u,a,i;const g=Ce,v=Se,b=Xo,h=ae;return _(),O("div",rt,[e("div",ct,[e("div",mt,[vt,e("div",{class:"remove",onClick:n[0]||(n[0]=ne(l=>o.$emit("changeCurrentTab"),["stop"]))},"Remove")]),e("div",{class:Yo(o.needReverse?"card-container reverse":"card-container")},[e("div",pt,[W(g,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":n[1]||(n[1]=l=>o.fromCoinAmount=l),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[2]||(n[2]=l=>o.maxBtnSelect("fromCoin")),onOnHalf:n[3]||(n[3]=l=>o.halfBtnSelect("fromCoin")),onOnInput:n[4]||(n[4]=l=>{o.fromCoinAmount=l}),onOnFocus:n[5]||(n[5]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock?(_(),J(v,{key:0,"from-coin":o.fromCoin,"to-coin":o.toCoin},null,8,["from-coin","to-coin"])):Mo("",!0)]),e("div",ft,[W(g,{modelValue:o.toCoinAmount,"onUpdate:modelValue":n[6]||(n[6]=l=>o.toCoinAmount=l),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[7]||(n[7]=l=>o.maxBtnSelect("toCoin")),onOnHalf:n[8]||(n[8]=l=>o.halfBtnSelect("toCoin")),onOnInput:n[9]||(n[9]=l=>{o.toCoinAmount=l}),onOnFocus:n[10]||(n[10]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock?(_(),J(v,{key:0,"from-coin":o.fromCoin,"to-coin":o.toCoin},null,8,["from-coin","to-coin"])):Mo("",!0)])],2),e("div",_t,[e("div",bt,[ht,e("span",null,"$"+r(("addCommom"in o?o.addCommom:F(P))(o.totalAmountUSD)),1)]),e("div",gt,[yt,e("span",null,r(o.shareOfPool)+"%",1)]),e("div",$t,[It,e("span",null,r(("addCommom"in o?o.addCommom:F(P))(o.minimumReceivedLP))+" "+r(o.needReverse?(s=o.toCoin)==null?void 0:s.symbol:(t=o.fromCoin)==null?void 0:t.symbol)+"-"+r(o.needReverse?(u=o.fromCoin)==null?void 0:u.symbol:(a=o.toCoin)==null?void 0:a.symbol),1)])])]),(i=o.positionInfo)!=null&&i.is_pause?(_(),J(b,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:io(()=>[kt]),_:1})):o.wallet.connected?(_(),J(b,{key:1,class:"big-btn liquidity-btn",disabled:o.addLiquidityBtnDisabled,onClick:n[11]||(n[11]=l=>o.isShowAddModal=!0)},{default:io(()=>[e("span",null,r(o.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(_(),J(b,{key:2,class:"big-btn",onClick:n[12]||(n[12]=l=>o.wallet.setIsShowWalletModal(!0))},{default:io(()=>[e("span",null,r(o.$t("button.connectWallet")),1)]),_:1})),o.isShowAddModal?(_(),J(h,{key:3,"pool-info":o.positionInfo,"from-coin":o.needReverse?o.positionInfo.token_b:o.positionInfo.token_a,"to-coin":o.needReverse?o.positionInfo.token_a:o.positionInfo.token_b,"from-coin-amount":o.needReverse?o.toCoinAmount:o.fromCoinAmount,"to-coin-amount":o.needReverse?o.fromCoinAmount:o.toCoinAmount,"total-amount":o.totalAmountUSD,"share-of-pool":o.shareOfPool,"minimum-received-l-p":o.minimumReceivedLP,onOnClose:n[13]||(n[13]=l=>o.isShowAddModal=!1),onToAdd:o.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","onToAdd"])):Mo("",!0)])}const ue=bo(dt,[["render",Ct],["__scopeId","data-v-9dfe31b0"]]),St=fo({props:{inputValue:{type:String,default:""},balance:{type:String,default:""},lpDecimals:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},inputDisabled:{type:Boolean,default:!1},positionInfo:{default:()=>({})}},setup(o,n){const{t:T,locale:A}=Uo(),N=ko(),I=c(()=>N),g=c(()=>new $(Number(o.balance)).div(2)),v=_e(be,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function b(){this.$emit("onSelect")}const h=y=>{const w=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${o.lpDecimals&&o.lpDecimals}})?).*$`);y.target.value=y.target.value.replace(w,"$1")},s=Do(),t=c(()=>s),u=No(),a=c(()=>u),i=c(()=>a.value.tokensWarningObj);so(()=>a.value.RATES,y=>{y&&console.log(y,"price====>")},{immediate:!0});const l=c(()=>a.value.tokensObj),d=c(()=>I.value.theme);return{route:_o(),theme:d,tokensObj:l,pool:a,halfBalance:g,t:T,addCommom:P,store:I,wallet:t,indicator:v,inputChange:h,importIcon:Io,selectCoin:b,formatNumber:fe,tokensWarningObj:i,checkNullObj:Oo}}});const wt=o=>(Co("data-v-e3f5f448"),o=o(),So(),o),At={class:"card"},Pt={class:"top"},Rt={key:1,class:"input-div"},qt={key:0},Tt={class:"left"},Nt={class:"loading-token"},Lt={class:"lp-bg"},Bt={alt:""},Mt={class:"bottom"},Ot=wt(()=>e("div",null,null,-1)),Dt={class:"top"},jt={class:"right"},Ut={class:"balance"};function Ft(o,n,T,A,N,I){var h,s;const g=he,v=te,b=Lo("image");return _(),O("div",At,[e("div",Pt,[o.inputDisabled?(_(),O("div",Rt,[o.inputValue?(_(),O("span",qt,r(o.inputValue),1)):(_(),J(v,{key:1,indicator:o.indicator},null,8,["indicator"]))])):(_(),J(g,{key:0,value:o.inputValue=="InsufficientLiquidity"?"":o.inputValue,placeholder:"0.0",disabled:o.inputDisabled,onChange:o.inputChange,onInput:n[0]||(n[0]=t=>o.$emit("onInput",t.target.value)),onFocus:n[1]||(n[1]=t=>o.$emit("onFocus"))},null,8,["value","disabled","onChange"])),e("div",Tt,[e("div",Nt,[e("div",Lt,[H(e("img",Bt,null,512),[[b,(s=(h=o.positionInfo)==null?void 0:h.lpInfo)==null?void 0:s.logo_url]])]),e("p",null,r(o.fromCoin.symbol)+" - "+r(o.toCoin.symbol),1)])])]),e("div",Mt,[Ot,e("div",Dt,[e("div",jt,[ro(r(o.$t("common.balance"))+" ",1),e("span",Ut,r(o.wallet.connected?("addCommom"in o?o.addCommom:F(P))(o.balance,o.lpDecimals):"0"),1)])])])])}const Wt=bo(St,[["render",Ft],["__scopeId","data-v-e3f5f448"]]),Et=fo({components:{Modal:oe},props:{title:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"11111111111"},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},isIncrease:{type:Boolean,default:!1},fixedFromCoin:{type:Boolean,default:!0},currentPriceTab:{type:String,default:""},currentPrice:{type:String,default:""},currentPriceReverse:{type:String,default:""},showFromCoinLock:{type:Boolean,default:!1},showToCoinLock:{type:Boolean,default:!1},currentDirect:{type:Boolean,default:!0},positionTotalAmount:{type:Number,default:0},tickLower:{type:Number,default:0},tickUpper:{type:Number,default:0},isCreate:{type:Boolean,default:!1}},setup(o,n){const{t:T}=Uo(),A=c(()=>{var u,a,i;return((u=o==null?void 0:o.poolInfo)==null?void 0:u.needReverse)||((i=(a=o==null?void 0:o.poolInfo)==null?void 0:a.poolInfo)==null?void 0:i.needReverse)}),N=No(),I=c(()=>N),g=ko(),v=c(()=>g),b=u=>{var a;return(u==null?void 0:u.logoURI)||(u==null?void 0:u.logo_url)||((a=I.value.tokensObj[u==null?void 0:u.address])==null?void 0:a.logo_url)||(v.value.theme==="default"?Io("/image/coins/unknown.png"):Io("/image/coins/sui-unknown.png"))},h=_o(),s=L(!1),t=()=>{n.emit("toAdd")};return console.log(o,"props451"),{needReverse:A,getCoinIcon:b,addCommom:P,t:T,route:h,checked:s,decimalUi:To,clickSubmit:t}}});const Ao=o=>(Co("data-v-6d964534"),o=o(),So(),o),Xt=Ao(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),zt={class:"modal-content"},Ht={class:"pool-info"},Vt={class:"left"},Yt={alt:""},Gt={alt:""},Jt={class:"pool-name"},Kt={class:"right"},Qt={class:"lp-info"},Zt=Ao(()=>e("div",{class:"lp-num"},[e("p",null,"1,126,122.123456"),e("span",null,"USDT-USDC LP")],-1)),xt={class:"lp-bg"},os={alt:""},es={alt:""},ns={class:"est-receive"},ts=Ao(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),ss={class:"token-a"},is=Ao(()=>e("div",null,"0.941824",-1)),ls={alt:""},as=Ao(()=>e("span",null,"USDT",-1)),us={class:"token-a"},ds=Ao(()=>e("div",null,"0.941824",-1)),rs={alt:""},cs=Ao(()=>e("span",null,"USDC",-1));function ms(o,n,T,A,N,I){const g=Go,v=Xo,b=ee("Modal"),h=Lo("image");return _(),J(b,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:n[0]||(n[0]=s=>o.$emit("onClose"))},{closeIcon:io(()=>[Xt]),default:io(()=>{var s,t,u,a,i,l,d,k,y,w,V,R,C,E,q,D,Y,G,S,j,K,X,eo,Q;return[e("div",zt,[e("div",Ht,[e("div",Vt,[e("div",null,[H(e("img",Yt,null,512),[[h,o.needReverse?(a=(u=o.poolInfo)==null?void 0:u.token_b)==null?void 0:a.logo_url:(t=(s=o.poolInfo)==null?void 0:s.token_a)==null?void 0:t.logo_url]]),W(g,{address:o.needReverse?(k=(d=o.poolInfo)==null?void 0:d.token_b)==null?void 0:k.address:(l=(i=o.poolInfo)==null?void 0:i.token_a)==null?void 0:l.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[H(e("img",Gt,null,512),[[h,o.needReverse?(R=(V=o.poolInfo)==null?void 0:V.token_a)==null?void 0:R.logo_url:(w=(y=o.poolInfo)==null?void 0:y.token_b)==null?void 0:w.logo_url]]),W(g,{address:o.needReverse?(D=(q=o.poolInfo)==null?void 0:q.token_a)==null?void 0:D.address:(E=(C=o.poolInfo)==null?void 0:C.token_b)==null?void 0:E.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",Jt,[e("span",null,r(o.needReverse?(j=(S=o.poolInfo)==null?void 0:S.token_b)==null?void 0:j.symbol:(G=(Y=o.poolInfo)==null?void 0:Y.token_a)==null?void 0:G.symbol),1),ro(" - "),e("span",null,r(o.needReverse?(Q=(eo=o.poolInfo)==null?void 0:eo.token_a)==null?void 0:Q.symbol:(X=(K=o.poolInfo)==null?void 0:K.token_b)==null?void 0:X.symbol),1)])]),e("div",Kt,[ro(" Fee tier "),e("span",null,r(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),e("div",Qt,[Zt,e("div",xt,[H(e("img",os,null,512),[[h,o.needReverse?o.poolInfo.token_b.logo_url:o.poolInfo.token_a.logo_url]]),H(e("img",es,null,512),[[h,o.needReverse?o.poolInfo.token_a.logo_url:o.poolInfo.token_b.logo_url]])])]),e("div",ns,[ts,e("div",ss,[is,e("div",null,[H(e("img",ls,null,512),[[h,"1"]]),as])]),e("div",us,[ds,e("div",null,[H(e("img",rs,null,512),[[h,"1"]]),cs])])])]),W(v,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:io(()=>[ro(r(o.isIncrease?"Increase Liquidity":o.title==o.$t("button.addLiquidity")?"Add Liquidity":"Create and Add Liquidity"),1)]),_:1},8,["onClick"])]}),_:1})}const de=bo(Et,[["render",ms],["__scopeId","data-v-6d964534"]]),vs=fo({components:{AutoPoolRemoveModal:de},setup(){const o=Do(),n=c(()=>o),T=ko(),A=c(()=>T),N=c(()=>A.value.slippage),I=c(()=>A.value.chainName),g=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],v=L(25),b=_o(),h=jo(),s=c(()=>h),t=c(()=>(console.log(s.value.positionInfoObj[b.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),s.value.positionInfoObj[b.params.id])),u=c(()=>{var p;return(p=t.value)==null?void 0:p.needReverse}),a=L(),i=L(),l=L(!1),d=L(),k=c(()=>{var p;return(p=t.value)==null?void 0:p.myLiquidity}),y=L(!0),w=c(()=>I.value?Zo(I.value):{}),V=xo("Sui"),R=L("--"),C=L("--"),E=()=>{if(y.value||!t.value)return;if(!d.value){R.value="--",C.value="--",v.value=0;return}if(Number(d.value)>Number(k.value))return;if(Number(d.value)*Math.pow(10,t.value.decimals)==Number(k.value)){v.value=100,D({value:1}),y.value=!0;return}console.log(t.value,"##lpBalance.value");const p=new $(d.value).mul(Math.pow(10,t.value.lpInfo.decimals)).toString(),U=new $(d.value).div(new $(k.value)).mul(100),ao=t.value.tick_lower_index,mo=t.value.tick_upper_index,ho=t.value.token_a.decimals,go=t.value.token_b.decimals,Ro=$o.tickIndexToSqrtPriceX64(ao),m=$o.tickIndexToSqrtPriceX64(mo);console.log(t.value.object.current_sqrt_price,"##positionInfo.value.object.current_sqrt_price"),console.log(p.toString(),t.value.total_supply,"amount.toString");const f=Qo.get_share_liquidity_by_amount({liquidity:t.value.liquidity,total_supply:t.value.total_supply},p.toString());console.log(f,"###liquidity");const B=Ko.getCoinAmountFromLiquidity(new no(f),new no(t.value.object.current_sqrt_price),Ro,m,!1),M=new $(B.coinA.toString()).div(Math.pow(10,ho)).toString(),z=new $(B.coinB.toString()).div(Math.pow(10,go)).toString();R.value=Number(M)>0?M:"--",C.value=Number(z)>0?z:"--",console.log(U.toString(),"##ratio"),v.value=U.toNumber(),q.value=po(p,0)},q=L(),D=p=>{if(!y.value)return;y.value=!0;const U=t.value.token_a.decimals,ao=t.value.token_b.decimals,mo=t.value.tick_lower_index,ho=t.value.tick_upper_index,go=$o.tickIndexToSqrtPriceX64(mo),Ro=$o.tickIndexToSqrtPriceX64(ho);let m="",f;console.log(t.value,"positionInfo.value.myLiquidity###"),p.value!==1?f=new $(t.value.myLiquidity).mul(Math.pow(10,t.value.lpInfo.decimals)).mul(p.value).toString():f=new $(t.value.myLiquidity).mul(Math.pow(10,t.value.lpInfo.decimals)).toString(),d.value=new $(f).div(Math.pow(10,t.value.lpInfo.decimals)),q.value=f,m=Qo.get_share_liquidity_by_amount({liquidity:t.value.liquidity,total_supply:t.value.total_supply},f),console.log(t.value.myLiquidity,"##positionInfo.value.myLiquidity"),console.log(q.value,"###liquidityVal.value");const B=Ko.getCoinAmountFromLiquidity(new no(m),new no(t.value.object.current_sqrt_price),go,Ro,!0),M=new $(B.coinA.toString()).div(Math.pow(10,U)).toString(),z=new $(B.coinB.toString()).div(Math.pow(10,ao)).toString();console.log(M,z,"amountA121212"),R.value=Number(M)>0?M:"--",C.value=Number(z)>0?z:"--"};so(v,ge((p,U)=>{p!==U&&(Number(p)>100?v.value=100:p&&t.value?(console.log("687===>"),v.value=p,D({value:v.value/100})):(R.value="--",C.value="--"))},300)),so(()=>d.value,p=>{E()},{immediate:!0});const Y=se(),{setIsShowSuccess:G,setIsShowRejected:S,setIsShowWaiting:j,setTransactionDesc:K,setTransactionTxid:X,setPositiomNum:eo,setTransactionDescText:Q}=T,lo=L(!1),{t:to}=Uo(),co=async()=>{var f,B;lo.value=!0,X("");const p=Number(R.value)>0?`${P(R.value,a.value.decimals)} ${a.value.symbol}`:"",U=Number(C.value)>0?`${P(C.value,i.value.decimals)} ${i.value.symbol}`:"";console.log(p,U,"###transactionDescTo"),K(to("tips.removeLiquidiyText",{from:u.value?U:p,and:Number(R.value)>0&&Number(C.value)>0?"and":"",to:u.value?p:U})),j(!0);const ao=to("modal.removeLiquidityText2");Q(ao);const mo=t.value.autoPoolPositionInfo.tick_lower_index,ho=t.value.autoPoolPositionInfo.tick_upper_index,go=$o.tickIndexToSqrtPriceX64(mo),Ro=$o.tickIndexToSqrtPriceX64(ho),m=t.value.rewarderInfo.map(M=>M.coinAddress);console.log(new no(q.value),"##liquidityVal.value");try{const M={lowerSqrtPrice:go,upperSqrtPrice:Ro,lpTokenAmount:new no(q.value),curSqrtPrice:new no(t.value.object.current_sqrt_price),slippage:Number(N.value)/100,id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.pool,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coin_type_a,coinTypeB:t.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:m},z=await V.remove(M),Z=await n.value.currentWallet.signAndExecuteTransactionBlock(z);let oo=w.value.handleTx(Z);if(console.log("0331###remove###tx####",oo),oo&&oo.hash){X(oo.hash),j(!1),G(!0);const uo={title:to("common.removeLiquidity"),desc:"",hash:oo.hash,descTransactions:`Remove ${p} ${Number(R.value)>0&&Number(C.value)>0?"and":""} ${U} from the pool`,sender:n.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${R.value} ${(f=a.value)==null?void 0:f.symbol} and ${C.value} ${(B=i.value)==null?void 0:B.symbol}`};uo.res=oo.res,w.value.showTransitionPending(uo),await w.value.watchTransaction(uo)&&(R.value="",C.value="",d.value="",v.value=0,setTimeout(()=>{h.updatePositionItem(t.value.id),w.value.getAccount(n.value.address)},1e3),Number(v.value)==100&&b.name=="auto-pool-detail"&&Y.push("/pool/auto"))}else j(!1),S(!0);lo.value=!1}catch(M){console.log("Remove error",M),lo.value=!1,j(!1),S(!0)}};so(()=>t.value,(p,U)=>{p&&!Oo(p)&&(a.value=p==null?void 0:p.token_a,i.value=p==null?void 0:p.token_b,console.log("触发###"),(!U||U&&U.address!==p.address)&&D({value:v.value/100}))},{immediate:!0});const vo=c(()=>{const p=Number(d.value)>Number(k.value);return!d.value||d.value<=0?to("button.enterAmount"):p?"Invalid Amount":to("button.remove")}),Po=c(()=>{const p=Number(d.value)>Number(k.value);return!!(!d.value||d.value<=0||p)});return{removeLiquidityBtnText:vo,removeLiquidityBtnDisabled:Po,wallet:n,ratioArr:g,positionInfo:t,isShowRemoveModal:l,needReverse:u,fromCoin:a,toCoin:i,lpAmount:d,lpBalance:k,sliderVal:v,sFixD:po,isSlider:y,fromCoinAmount:R,toCoinAmount:C,setPercent:D,toRemove:co,addCommom:P}}});const zo=o=>(Co("data-v-f8155afb"),o=o(),So(),o),ps={class:"auto-pool-add"},fs={class:"auto-pool-add-content"},_s={class:"liquidity-action-tab"},bs=zo(()=>e("div",{class:"remove tab-active"},"Remove",-1)),hs={class:"card-item"},gs={class:"remove-ratio"},ys=zo(()=>e("div",{class:"remove-ratio-title"},"Amount",-1)),$s={class:"remove-ratio-select"},Is={key:0,class:"ratio"},ks={key:1,class:"ratio"},Cs={class:"ratio-list"},Ss=["onClick"],ws={class:"est-receive"},As=zo(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),Ps={class:"token-a"},Rs={alt:""},qs={class:"token-a"},Ts={alt:""},Ns=zo(()=>e("span",null,"Pool Closed",-1));function Ls(o,n,T,A,N,I){var t,u,a,i,l,d,k,y,w,V,R,C,E,q,D,Y,G;const g=Wt,v=Ie,b=Xo,h=de,s=Lo("image");return _(),O("div",ps,[e("div",fs,[e("div",_s,[e("div",{class:"increase",onClick:n[0]||(n[0]=ne(S=>o.$emit("changeCurrentTab"),["stop"]))},"Add"),bs]),e("div",{class:Yo(o.needReverse?"card-container reverse":"card-container")},[e("div",hs,[W(g,{modelValue:o.lpAmount,"onUpdate:modelValue":n[1]||(n[1]=S=>o.lpAmount=S),"input-value":o.lpAmount,balance:o.lpBalance,"from-coin":o.needReverse?o.toCoin:o.fromCoin,"to-coin":o.needReverse?o.fromCoin:o.toCoin,"position-info":o.positionInfo,onOnInput:n[2]||(n[2]=S=>{o.isSlider=!1,o.lpAmount=S})},null,8,["modelValue","input-value","balance","from-coin","to-coin","position-info"])])],2),e("div",gs,[ys,e("div",$s,[Number(o.lpBalance)>=Number(o.lpAmount)?(_(),O("div",Is,r(o.sliderVal>0&&Number(("sFixD"in o?o.sFixD:F(po))(o.sliderVal,2))<.01?"<0.01":("sFixD"in o?o.sFixD:F(po))(o.sliderVal,2))+"% ",1)):(_(),O("div",ks,"--")),e("div",Cs,[(_(!0),O(ye,null,$e(o.ratioArr,(S,j)=>(_(),O("div",{key:j,class:Yo(["ratio-item",o.sliderVal==S.value?"ratio-item-active":""]),onClick:()=>{o.isSlider=!0,o.sliderVal=S.value}},r(S.name),11,Ss))),128))])]),W(v,{value:o.sliderVal,"onUpdate:value":n[3]||(n[3]=S=>o.sliderVal=S)},null,8,["value"])]),e("div",ws,[As,e("div",Ps,[e("div",null,r(("addCommom"in o?o.addCommom:F(P))(o.fromCoinAmount)),1),e("div",null,[H(e("img",Rs,null,512),[[s,o.needReverse?(u=(t=o.positionInfo)==null?void 0:t.token_b)==null?void 0:u.logo_url:(i=(a=o.positionInfo)==null?void 0:a.token_a)==null?void 0:i.logo_url]]),e("span",null,r(o.needReverse?(d=(l=o.positionInfo)==null?void 0:l.token_b)==null?void 0:d.symbol:(y=(k=o.positionInfo)==null?void 0:k.token_a)==null?void 0:y.symbol),1)])]),e("div",qs,[e("div",null,r(("addCommom"in o?o.addCommom:F(P))(o.toCoinAmount)),1),e("div",null,[H(e("img",Ts,null,512),[[s,o.needReverse?(V=(w=o.positionInfo)==null?void 0:w.token_a)==null?void 0:V.logo_url:(C=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:C.logo_url]]),e("span",null,r(o.needReverse?(q=(E=o.positionInfo)==null?void 0:E.token_a)==null?void 0:q.symbol:(Y=(D=o.positionInfo)==null?void 0:D.token_b)==null?void 0:Y.symbol),1)])])])]),(G=o.positionInfo)!=null&&G.is_pause?(_(),J(b,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:io(()=>[Ns]),_:1})):o.wallet.connected?(_(),J(b,{key:1,class:"big-btn liquidity-btn",disabled:o.removeLiquidityBtnDisabled,onClick:o.toRemove},{default:io(()=>[e("span",null,r(o.removeLiquidityBtnText),1)]),_:1},8,["disabled","onClick"])):(_(),J(b,{key:2,class:"big-btn",onClick:n[4]||(n[4]=S=>o.wallet.setIsShowWalletModal(!0))},{default:io(()=>[e("span",null,r(o.$t("button.connectWallet")),1)]),_:1})),o.isShowRemoveModal?(_(),J(h,{key:3,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,onOnClose:n[5]||(n[5]=S=>o.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):Mo("",!0)])}const re=bo(vs,[["render",Ls],["__scopeId","data-v-f8155afb"]]),Bs=fo({components:{AutoPoolAdd:ue,AutoPositionInfo:ie,AutoPositionLiquidity:le,AutoPoolRemove:re},setup(){const o=L("add"),n=Do(),T=c(()=>n),A=jo(),N=c(()=>A),I=No(),g=c(()=>I);so(()=>g.value.poolConfigList,a=>{a&&a.length>0&&A.getAutoPoolList()},{immediate:!0}),so(()=>[T.value.address,N.value.autoPoolList,g.value.poolConfigList],([a,i,l])=>{a&&i&&i.length>0&&l&&l.length>0&&A.getMyAutoPoolPosition()},{immediate:!0});const v=_o(),b=c(()=>(console.log(N.value.positionInfoObj[v.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),N.value.positionInfoObj[v.params.id]));so(()=>v.query.action,a=>{a&&(o.value=a)},{immediate:!0});const h=se();so(()=>T.value.address,a=>{a||h.push("/pool/auto")},{immediate:!0});const s=ko(),t=c(()=>s);return{currentTab:o,positionInfo:b,clickRefresh:()=>{A.getAutoPoolAPY(),A.getAutoPoolList(),I.setPoolConfigList(t.value.chainName,t.value.filterCoinsObj)}}}});const Ms={class:"auto-increase-liquidity"},Os={class:"auto-increase-liquidity-content pc-content"},Ds={class:"left"},js={class:"right"},Us={class:"auto-increase-liquidity-content h5-content"},Fs={class:"left"},Ws={class:"right"},Es={class:"loading-global"};function Xs(o,n,T,A,N,I){const g=ce,v=ie,b=le,h=ue,s=re,t=te;return _(),O("div",Ms,[W(g,{onClickRefresh:o.clickRefresh},null,8,["onClickRefresh"]),e("div",Os,[e("div",Ds,[W(v),W(b)]),e("div",js,[o.currentTab=="add"?(_(),J(h,{key:0,onChangeCurrentTab:n[0]||(n[0]=u=>o.currentTab="remove")})):(_(),J(s,{key:1,onChangeCurrentTab:n[1]||(n[1]=u=>o.currentTab="add")}))])]),e("div",Us,[e("div",Fs,[W(v),o.currentTab=="add"?(_(),J(h,{key:0,onChangeCurrentTab:n[2]||(n[2]=u=>o.currentTab="remove")})):(_(),J(s,{key:1,onChangeCurrentTab:n[3]||(n[3]=u=>o.currentTab="add")}))]),e("div",Ws,[W(b)])]),H(e("div",Es,[W(t)],512),[[ke,!o.positionInfo]])])}const pi=bo(Bs,[["render",Xs],["__scopeId","data-v-26327692"]]);export{pi as default};
