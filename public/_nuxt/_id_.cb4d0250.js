import{_ as Re}from"./new-position-title.940a16dd.js";import{_ as le}from"./token-warning.7d79848e.js";import{_ as pe}from"./auto-pool-apy-tips.650abb66.js";import{u as Mo,a as M,g as xo,c as No,d as se,s as vo,p as ve,b as fe,e as Y,T as Ho,f as Te}from"./pool.08f6d229.js";import{u as ie,a as ye}from"./sha256.c37c9cf6.js";import{u as Lo,a as _e}from"./autoPool.b617310c.js";import{i as Yo}from"./import-icon.de3e6c66.js";import{a as Do,l as _,m as Uo,r as I,q as go,e as Fo,s as de,o as y,f as O,h as e,t as So,i as E,v,j as te,x as io,u as D,p as Go,k as Zo,y as me,z as be,A as he,C as re,c as _o,w as zo,B as ge,D as qe,b as Be,F as Oe,E as Ne,G as Me,H as ce}from"./entry.ba1f590e.js";import{_ as ke}from"./assets-card.26851ce3.js";import{_ as Ie}from"./coin-lock.7f98bb4d.js";import{_ as we,a as Ce}from"./auto-pool-remove-modal.fe4c5236.js";import{D as u}from"./decimal.0e8aa3f1.js";/* empty css              *//* empty css              */import"./decimal.633e31ee.js";import{V as ue}from"./index.a8f0e2b0.js";import"./back.1a5b5c64.js";import"./swap-setting.9320225d.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./img-lock_2x.a28135f4.js";import"./img-lock_2x.4173d247.js";const Le=Do({components:{AutoPoolApyTips:pe},setup(){const o=ie(),s=_(()=>o),G=Mo(),W=_(()=>G),j=Lo(),w=_(()=>j),$=_(()=>s.value.theme),b=Uo(),i=I();go(()=>[w.value.positionInfoObj,b.params.id],([l,r])=>{l&&!No(l)&&r&&(i.value=l[r],console.log(i.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const m=_(()=>{var l;return(l=i.value)==null?void 0:l.needReverse}),a=l=>{var r;return(l==null?void 0:l.logoURI)||(l==null?void 0:l.logo_url)||((r=W.value.tokensObj[l==null?void 0:l.address])==null?void 0:r.logo_url)||($.value==="default"?Yo("/image/coins/unknown.png"):Yo("/image/coins/sui-unknown.png"))},n=_(()=>{var l,r;return w.value.apyObj&&((r=w.value.apyObj[(l=i.value)==null?void 0:l.id])==null?void 0:r.tvl)||"--"}),C=_(()=>{var l,r;return w.value.apyObj&&((r=w.value.apyObj[(l=i.value)==null?void 0:l.id])==null?void 0:r.apr)||"--"});return{positionInfo:i,needReverse:m,getCoinIcon:a,tvl:n,apy:C,addCommom:M,getExplorerUrl:xo}}});const ko=o=>(Go("data-v-bb664738"),o=o(),Zo(),o),De={class:"auto-pool-v2-info"},Ue={class:"pool-info"},Fe={class:"left"},Ve={class:"coin-a"},Ee={alt:""},We={class:"coin-b"},je={alt:""},Xe={class:"position-name"},He={key:0,class:"pool-fee"},ze=ko(()=>e("span",null,"Fee tier",-1)),Ye={class:"vault-address"},Ge=ko(()=>e("span",null,"Vault Address",-1)),Ze=["href"],Je=ko(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),Ke=[Je],Qe={class:"pool-address"},xe=ko(()=>e("span",null,"Pool Address",-1)),on=["href"],en=ko(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),nn=[en],tn={class:"apy-and-tvl"},sn={class:"apy"},ln=ko(()=>e("div",{class:"apy-title"},"APY",-1)),an={class:"apy-text"},un={class:"tvl"},rn=ko(()=>e("div",{class:"tvl-title"},"TVL",-1)),dn={class:"tvl-text"},vn={class:"pool-info h5-pool-info"},mn={class:"left"},cn={class:"coin-a"},pn={alt:""},fn={class:"coin-b"},yn={alt:""},_n={class:"position-name"},bn={key:0,class:"pool-fee"},hn=ko(()=>e("span",null,"Fee tier",-1)),gn={class:"left"},kn={class:"vault-address"},In=ko(()=>e("span",null,"Vault Address",-1)),wn=["href"],Cn=ko(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),$n=[Cn],An={class:"pool-address"},Sn=ko(()=>e("span",null,"Pool Address",-1)),Pn=["href"],Rn=ko(()=>e("svg",{class:"icon","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-icon-link"})],-1)),Tn=[Rn],qn={class:"apy-and-tvl"},Bn={class:"apy"},On=ko(()=>e("div",{class:"apy-title"},"APY",-1)),Nn={class:"apy-text"},Mn={class:"tvl"},Ln=ko(()=>e("div",{class:"tvl-title"},"TVL",-1)),Dn={class:"tvl-text"};function Un(o,s,G,W,j,w){var m,a,n,C,l,r,p,d,A,S,R,X,h,f,g,U,H,K,q,k,Q,mo,no,to,z,so,co,L,ao,Vo,Io,Eo,Po,wo,Co,Ro,To,Wo,jo,lo,po,Ko,c,P,Z,F,uo,x;const $=le,b=pe,i=de("image");return y(),O("div",De,[e("div",Ue,[e("div",Fe,[e("div",Ve,[So(e("img",Ee,null,512),[[i,o.needReverse?o.getCoinIcon((a=o.positionInfo)==null?void 0:a.token_b):o.getCoinIcon((m=o.positionInfo)==null?void 0:m.token_a)]]),E($,{address:o.needReverse?(r=(l=o.positionInfo)==null?void 0:l.token_b)==null?void 0:r.address:(C=(n=o.positionInfo)==null?void 0:n.token_a)==null?void 0:C.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",We,[So(e("img",je,null,512),[[i,o.needReverse?o.getCoinIcon((d=o.positionInfo)==null?void 0:d.token_a):o.getCoinIcon((p=o.positionInfo)==null?void 0:p.token_b)]]),E($,{address:o.needReverse?(X=(R=o.positionInfo)==null?void 0:R.token_a)==null?void 0:X.address:(S=(A=o.positionInfo)==null?void 0:A.token_b)==null?void 0:S.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Xe,v(o.needReverse?(f=(h=o.positionInfo)==null?void 0:h.token_b)==null?void 0:f.symbol:(U=(g=o.positionInfo)==null?void 0:g.token_a)==null?void 0:U.symbol)+" - "+v(o.needReverse?(K=(H=o.positionInfo)==null?void 0:H.token_a)==null?void 0:K.symbol:(k=(q=o.positionInfo)==null?void 0:q.token_b)==null?void 0:k.symbol),1),(Q=o.positionInfo)!=null&&Q.fee?(y(),O("div",He,[ze,te(" "+v(((mo=o.positionInfo)==null?void 0:mo.fee)*100)+"% ",1)])):io("",!0),e("div",Ye,[Ge,e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:D(xo))("poolAddress",(no=o.positionInfo)==null?void 0:no.id),target:"_blank"},Ke,8,Ze)]),e("div",Qe,[xe,e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:D(xo))("poolAddress",(to=o.positionInfo)==null?void 0:to.id),target:"_blank"},nn,8,on)])]),e("div",tn,[e("div",sn,[ln,e("div",an,[te(v(o.apy)+" ",1),E(b)])]),e("div",un,[rn,e("div",dn,"$"+v(("addCommom"in o?o.addCommom:D(M))(o.tvl,2)),1)])])]),e("div",vn,[e("div",mn,[e("div",cn,[So(e("img",pn,null,512),[[i,o.needReverse?o.getCoinIcon((so=o.positionInfo)==null?void 0:so.token_b):o.getCoinIcon((z=o.positionInfo)==null?void 0:z.token_a)]]),E($,{address:o.needReverse?(Vo=(ao=o.positionInfo)==null?void 0:ao.token_b)==null?void 0:Vo.address:(L=(co=o.positionInfo)==null?void 0:co.token_a)==null?void 0:L.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",fn,[So(e("img",yn,null,512),[[i,o.needReverse?o.getCoinIcon((Eo=o.positionInfo)==null?void 0:Eo.token_a):o.getCoinIcon((Io=o.positionInfo)==null?void 0:Io.token_b)]]),E($,{address:o.needReverse?(Ro=(Co=o.positionInfo)==null?void 0:Co.token_a)==null?void 0:Ro.address:(wo=(Po=o.positionInfo)==null?void 0:Po.token_b)==null?void 0:wo.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",_n,v(o.needReverse?(Wo=(To=o.positionInfo)==null?void 0:To.token_b)==null?void 0:Wo.symbol:(lo=(jo=o.positionInfo)==null?void 0:jo.token_a)==null?void 0:lo.symbol)+" - "+v(o.needReverse?(Ko=(po=o.positionInfo)==null?void 0:po.token_a)==null?void 0:Ko.symbol:(P=(c=o.positionInfo)==null?void 0:c.token_b)==null?void 0:P.symbol),1),(Z=o.positionInfo)!=null&&Z.fee?(y(),O("div",bn,[hn,te(" "+v(((F=o.positionInfo)==null?void 0:F.fee)*100)+"% ",1)])):io("",!0)]),e("div",gn,[e("div",kn,[In,e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:D(xo))("poolAddress",(uo=o.positionInfo)==null?void 0:uo.id),target:"_blank"},$n,8,wn)]),e("div",An,[Sn,e("a",{href:("getExplorerUrl"in o?o.getExplorerUrl:D(xo))("poolAddress",(x=o.positionInfo)==null?void 0:x.id),target:"_blank"},Tn,8,Pn)])]),e("div",qn,[e("div",Bn,[On,e("div",Nn,[te(v(o.apy)+" ",1),E(b)])]),e("div",Mn,[Ln,e("div",Dn,"$"+v(("addCommom"in o?o.addCommom:D(M))(o.tvl,2)),1)])])])])}const $e=Fo(Le,[["render",Un],["__scopeId","data-v-bb664738"]]),Fn=Do({setup(){const o=I(!0),s=Mo(),G=_(()=>s),W=Lo(),j=_(()=>W),w=Uo(),$=I();go(()=>[j.value.positionInfoObj,w.params.id],([m,a])=>{m&&!No(m)&&a&&($.value=m[a],console.log($.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const b=_(()=>{var m;return(m=$.value)==null?void 0:m.needReverse});return{direct:o,positionInfo:$,needReverse:b,getCoinIcon:m=>{var a;return(m==null?void 0:m.logoURI)||(m==null?void 0:m.logo_url)||((a=G.value.tokensObj[m==null?void 0:m.address])==null?void 0:a.logo_url)||Yo("/image/coins/sui-unknown.png")},decimalUi:se,addCommom:M,sFixD:vo}}}),Vn=""+globalThis.__publicAssetsURL("sui-image/icon_currentprice@2x.png");const $o=o=>(Go("data-v-9f746a5c"),o=o(),Zo(),o),En={class:"v2-position-range"},Wn={class:"position-range-top"},jn=$o(()=>e("div",null,"Position Range",-1)),Xn={class:"base-coin"},Hn={key:0},zn={alt:""},Yn={key:1},Gn={alt:""},Zn={key:2},Jn={key:3},Kn=$o(()=>e("p",null,"Base coin",-1)),Qn={class:"coin-rate"},xn=$o(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),ot=$o(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),et=[xn,ot],nt={class:"position-range-bottom"},tt={class:"current-price"},st=$o(()=>e("div",{class:"current-price-title"},"Current Price",-1)),lt={key:0,class:"current-price-text"},it={key:1,class:"current-price-text"},at={class:"price-range"},ut=$o(()=>e("div",{class:"price-range-bg"},[e("div",{class:"price-range-border"})],-1)),rt=$o(()=>e("img",{src:Vn,alt:""},null,-1)),dt={class:"min-price"},vt=$o(()=>e("div",null,"Min Price",-1)),mt={class:"max-price"},ct=$o(()=>e("div",null,"Max Price",-1));function pt(o,s,G,W,j,w){var i,m,a,n,C,l,r,p,d,A,S,R,X,h,f,g,U,H,K,q,k,Q,mo,no,to,z;const $=le,b=de("image");return y(),O("div",En,[e("div",Wn,[jn,e("div",Xn,[o.needReverse?(y(),O("div",Yn,[So(e("img",Gn,null,512),[[b,o.direct?o.getCoinIcon((p=o.positionInfo)==null?void 0:p.token_b):o.getCoinIcon((r=o.positionInfo)==null?void 0:r.token_a)]]),E($,{address:o.direct?(R=(S=o.positionInfo)==null?void 0:S.token_b)==null?void 0:R.address:(A=(d=o.positionInfo)==null?void 0:d.token_a)==null?void 0:A.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])):(y(),O("div",Hn,[So(e("img",zn,null,512),[[b,o.direct?o.getCoinIcon((i=o.positionInfo)==null?void 0:i.token_a):o.getCoinIcon((m=o.positionInfo)==null?void 0:m.token_b)]]),E($,{address:o.direct?(n=(a=o.positionInfo)==null?void 0:a.token_a)==null?void 0:n.address:(l=(C=o.positionInfo)==null?void 0:C.token_b)==null?void 0:l.address,"style-params":{width:"10px",height:"10px",right:"0",bottom:"0"}},null,8,["address"])])),o.needReverse?(y(),O("span",Jn,v(o.direct?(H=(U=o.positionInfo)==null?void 0:U.token_b)==null?void 0:H.symbol:(q=(K=o.positionInfo)==null?void 0:K.token_a)==null?void 0:q.symbol),1)):(y(),O("span",Zn,v(o.direct?(h=(X=o.positionInfo)==null?void 0:X.token_a)==null?void 0:h.symbol:(g=(f=o.positionInfo)==null?void 0:f.token_b)==null?void 0:g.symbol),1)),Kn,e("div",Qn,[e("div",{onClick:s[0]||(s[0]=so=>o.direct=!o.direct)},et)])])]),e("div",nt,[e("div",tt,[st,(o.needReverse?!o.direct:o.direct)?(y(),O("div",lt,v(("addCommom"in o?o.addCommom:D(M))(("decimalUi"in o?o.decimalUi:D(se))((k=o.positionInfo)==null?void 0:k.price,6))),1)):(y(),O("div",it,v(("addCommom"in o?o.addCommom:D(M))(("decimalUi"in o?o.decimalUi:D(se))(1/((Q=o.positionInfo)==null?void 0:Q.price),6))),1))]),e("div",at,[ut,rt,e("div",dt,[vt,e("div",null,v(((mo=o.positionInfo)==null?void 0:mo.minPrice)&&("sFixD"in o?o.sFixD:D(vo))((no=o.positionInfo)==null?void 0:no.minPrice,6)),1)]),e("div",mt,[ct,e("div",null,v(((to=o.positionInfo)==null?void 0:to.maxPrice)&&("sFixD"in o?o.sFixD:D(vo))((z=o.positionInfo)==null?void 0:z.maxPrice,6)),1)])])])])}const Ae=Fo(Fn,[["render",pt],["__scopeId","data-v-9f746a5c"]]),ft=Do({setup(){const o=Mo(),s=_(()=>o),G=Lo(),W=_(()=>G),j=Uo(),w=I();return go(()=>[W.value.positionInfoObj,j.params.id],([i,m])=>{console.log(i,"##positionInfoObj"),i&&!No(i)&&m&&(w.value=i[m],console.log(w.value,"##positionInfo.value"))},{immediate:!0,deep:!0}),{needReverse:_(()=>{var i;return(i=w.value)==null?void 0:i.needReverse}),positionInfo:w,getCoinIcon:i=>{var m;return console.log(i,"info##"),(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((m=s.value.tokensObj[i==null?void 0:i.address])==null?void 0:m.logo_url)||Yo("/image/coins/sui-unknown.png")},addCommom:M}}});const yt=o=>(Go("data-v-9cce4a47"),o=o(),Zo(),o),_t={class:"pool-composition"},bt=yt(()=>e("div",{class:"pool-composition-top"},"Pool Composition",-1)),ht={class:"pool-composition-bottom"},gt={class:"token-ratio"},kt={class:"before-coin"},It={alt:""},wt={class:"after-coin"},Ct={alt:""},$t={class:"token-num"},At={class:"num-box"},St={class:"num-box"};function Pt(o,s,G,W,j,w){var i,m,a,n,C,l,r,p,d,A,S,R,X,h,f,g,U,H,K,q,k,Q,mo,no,to,z,so,co;const $=le,b=de("image");return y(),O("div",_t,[bt,e("div",ht,[e("div",gt,[e("div",kt,[e("div",null,[E($,{address:o.needReverse?(n=(a=o.positionInfo)==null?void 0:a.token_a)==null?void 0:n.address:(m=(i=o.positionInfo)==null?void 0:i.token_b)==null?void 0:m.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"]),So(e("img",It,null,512),[[b,o.needReverse?o.getCoinIcon((l=o.positionInfo)==null?void 0:l.token_b):o.getCoinIcon((C=o.positionInfo)==null?void 0:C.token_a)]])]),e("span",null,v((r=o.positionInfo)==null?void 0:r.poolCoinARatio)+"%",1)]),e("div",wt,[e("span",null,v((p=o.positionInfo)==null?void 0:p.poolCoinBRatio)+"%",1),e("div",null,[So(e("img",Ct,null,512),[[b,o.needReverse?o.getCoinIcon((A=o.positionInfo)==null?void 0:A.token_a):o.getCoinIcon((d=o.positionInfo)==null?void 0:d.token_b)]]),E($,{address:o.needReverse?(h=(X=o.positionInfo)==null?void 0:X.token_a)==null?void 0:h.address:(R=(S=o.positionInfo)==null?void 0:S.token_b)==null?void 0:R.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])])])]),e("div",$t,[e("div",{class:"token-a-bg",style:me({width:`${(f=o.positionInfo)==null?void 0:f.poolCoinARatio}%`})},null,4),e("div",{class:"token-b-bg",style:me({width:`${(g=o.positionInfo)==null?void 0:g.poolCoinBRatio}%`})},null,4),e("div",At,[e("div",null,v(("addCommom"in o?o.addCommom:D(M))((U=o.positionInfo)==null?void 0:U.poolCoinANum))+" "+v(o.needReverse?(k=(q=o.positionInfo)==null?void 0:q.token_b)==null?void 0:k.symbol:(K=(H=o.positionInfo)==null?void 0:H.token_a)==null?void 0:K.symbol),1),e("div",null,"$"+v(("addCommom"in o?o.addCommom:D(M))((Q=o.positionInfo)==null?void 0:Q.poolCoinBUSD)),1)]),e("div",St,[e("div",null,v(("addCommom"in o?o.addCommom:D(M))((mo=o.positionInfo)==null?void 0:mo.poolCoinBNum))+" "+v(o.needReverse?(so=(z=o.positionInfo)==null?void 0:z.token_a)==null?void 0:so.symbol:(to=(no=o.positionInfo)==null?void 0:no.token_b)==null?void 0:to.symbol),1),e("div",null,"$"+v(("addCommom"in o?o.addCommom:D(M))((co=o.positionInfo)==null?void 0:co.poolCoinBUSD)),1)])])])])}const Se=Fo(ft,[["render",Pt],["__scopeId","data-v-9cce4a47"]]),Rt=Do({setup(){const o=Mo(),s=_(()=>o),G=Lo(),W=_(()=>G),j=Uo(),w=I();return go(()=>[W.value.positionInfoObj,j.params.id],([i,m])=>{console.log(i,"##positionInfoObj"),i&&!No(i)&&m&&(w.value=i[m],console.log(w.value,"##positionInfo.value"))},{immediate:!0,deep:!0}),{needReverse:_(()=>{var i;return(i=w.value)==null?void 0:i.needReverse}),positionInfo:w,getCoinIcon:i=>{var m;return console.log(i,"info##"),(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((m=s.value.tokensObj[i==null?void 0:i.address])==null?void 0:m.logo_url)||Yo("/image/coins/sui-unknown.png")},addCommom:M}}});const oe=o=>(Go("data-v-a43ff183"),o=o(),Zo(),o),Tt={class:"my-liquidity"},qt={class:"my-liquidity-top"},Bt=oe(()=>e("div",null,"My Liquidity",-1)),Ot=oe(()=>e("p",null,"My share of pool",-1)),Nt={class:"my-liquidity-bottom"},Mt={class:"lp-token"},Lt=oe(()=>e("div",null,[e("span",null,"LP Token Balance ")],-1)),Dt={class:"lp-balance"},Ut={class:"token-num-content"},Ft={class:"token-num token-a-num"},Vt={class:"logo"},Et=["src"],Wt={class:"text"},jt={class:"lp-logo"},Xt=["src"],Ht=oe(()=>e("div",null,"Pooled Assets",-1)),zt={class:"token-num"},Yt={class:"logo"},Gt=["src"],Zt={class:"text"},Jt=oe(()=>e("div",{class:"token-num-content-bg"},null,-1));function Kt(o,s,G,W,j,w){var b,i,m,a,n,C,l,r,p,d,A,S,R,X,h,f,g,U,H,K,q,k,Q,mo,no,to,z,so;const $=le;return y(),O("div",Tt,[e("div",qt,[Bt,e("div",null,[Ot,e("p",null,v((b=o.positionInfo)==null?void 0:b.myShare)+"%",1)])]),e("div",Nt,[e("div",Mt,[Lt,e("div",null,[e("span",Dt,v(("addCommom"in o?o.addCommom:D(M))((i=o.positionInfo)==null?void 0:i.myLiquidity))+" LP",1),e("span",null,"$"+v(("addCommom"in o?o.addCommom:D(M))((m=o.positionInfo)==null?void 0:m.myLiquidityUSD)),1)])]),e("div",Ut,[e("div",Ft,[e("div",Vt,[e("img",{src:o.needReverse?o.getCoinIcon((n=o.positionInfo)==null?void 0:n.token_b):o.getCoinIcon((a=o.positionInfo)==null?void 0:a.token_a),alt:""},null,8,Et),E($,{address:o.needReverse?(p=(r=o.positionInfo)==null?void 0:r.token_a)==null?void 0:p.address:(l=(C=o.positionInfo)==null?void 0:C.token_b)==null?void 0:l.address,"style-params":{width:"14px",height:"14px",left:"18px",bottom:"0"}},null,8,["address"])]),e("div",Wt,[e("div",null,v(("addCommom"in o?o.addCommom:D(M))((d=o.positionInfo)==null?void 0:d.amountA))+" "+v(o.needReverse?(X=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:X.symbol:(S=(A=o.positionInfo)==null?void 0:A.token_a)==null?void 0:S.symbol),1),e("div",null,v(("addCommom"in o?o.addCommom:D(M))((h=o.positionInfo)==null?void 0:h.myAmountAUSD)),1)])]),e("div",jt,[e("img",{src:o.getCoinIcon((f=o.positionInfo)==null?void 0:f.lpInfo),alt:""},null,8,Xt),Ht]),e("div",zt,[e("div",Yt,[e("img",{src:o.needReverse?o.getCoinIcon((U=o.positionInfo)==null?void 0:U.token_a):o.getCoinIcon((g=o.positionInfo)==null?void 0:g.token_b),alt:""},null,8,Gt),E($,{address:o.needReverse?(k=(q=o.positionInfo)==null?void 0:q.token_a)==null?void 0:k.address:(K=(H=o.positionInfo)==null?void 0:H.token_b)==null?void 0:K.address,"style-params":{width:"14px",height:"14px",right:"0",bottom:"0"}},null,8,["address"])]),e("div",Zt,[e("div",null,v(("addCommom"in o?o.addCommom:D(M))((Q=o.positionInfo)==null?void 0:Q.amountB))+" "+v(o.needReverse?(z=(to=o.positionInfo)==null?void 0:to.token_a)==null?void 0:z.symbol:(no=(mo=o.positionInfo)==null?void 0:mo.token_b)==null?void 0:no.symbol),1),e("div",null,v(("addCommom"in o?o.addCommom:D(M))((so=o.positionInfo)==null?void 0:so.myAmountBUSD)),1)])]),Jt])])])}const Pe=Fo(Rt,[["render",Kt],["__scopeId","data-v-a43ff183"]]),Qt=Do({components:{AutoPoolAddModal:we},setup(){const o=ye(),s=I(!1),G=ie(),W=_(()=>G),j=_(()=>W.value.chainName),w=_(()=>o),$=Lo(),b=_(()=>$),i=Mo(),m=_(()=>i),a=I(),n=Uo();go(()=>[b.value.positionInfoObj,n.params.id],([c,P])=>{c&&!No(c)&&P&&(a.value=c[P],console.log(a.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const C=_(()=>{var c,P;return console.log((c=a.value)==null?void 0:c.needReverse,"##positionInfo.value?.needReverse"),(P=a.value)==null?void 0:P.needReverse}),l=I(),r=I(),p=I(),d=I(),A=I(!0),S=_(()=>w.value.assets&&l.value&&w.value.assets[l.value.address]?ve(w.value.assets[l.value.address].balance,l.value.decimals):0),R=_(()=>w.value.assets&&r.value&&w.value.assets[r.value.address]?ve(w.value.assets[r.value.address].balance,r.value.decimals):0),X=c=>{c==="fromCoin"?(A.value=!0,p.value=S.value>0?l.value.symbol=="SUI"?new u(Number(S.value)).sub(new u(.05)).lt(new u(0))?"0":new u(Number(S.value)).sub(new u(.05)).toString():String(S.value):""):(A.value=!1,d.value=R.value>0?r.value.symbol=="SUI"?new u(Number(R.value)).sub(new u(.05)).lt(new u(0))?"0":new u(Number(R.value)).sub(new u(.05)).toString():String(R.value):"")},h=c=>{c==="fromCoin"?(A.value=!0,p.value=S.value>0?vo(new u(Number(S.value)).div(2).toString(),l.value.decimals).toString():""):(A.value=!1,d.value=R.value>0?vo(new u(Number(R.value)).div(2).toString(),r.value.decimals).toString():"")},f=_(()=>j.value?fe(j.value):{}),g=_(()=>W.value.slippage),U=I("--"),H=I("--"),K=c=>{const P=new u(a.value.autoPoolPositionInfo.liquidity),Z=new u(c.toString());if(P.toNumber()>0&&Z.toNumber()>0){const F=Z.add(P);console.log("totalLiquidity:",Z.div(F).mul(100).toString());const uo=Z.div(F).mul(100).toNumber(),x=Te(uo),fo=x==-1?2:x+2,bo=vo(Z.div(F).mul(100).toNumber(),fo);console.log(a.value.decimals,"##positionInfo.value.decimal");const ho=new u(1).div(new u(Math.pow(10,a.value.lpInfo.decimals))).toString();console.log(bo,ho,"###288"),Number(bo)<Number(ho)?U.value=`<${ho}`:U.value=bo}else Z.toNumber()>0&&P.toNumber()<=0?U.value="100":U.value="--"},q=c=>{const P=new u(c.toString());console.log(c.toString(),"##liquidityAmount.toString()");const Z=P.mul(new u(g.value).div(100)),F=new u(Math.pow(10,a.value.lpInfo.decimals));console.log(P.minus(Z).div(F).toString(),"##liquidity.minus(minimum).div(decimals).toString()"),H.value=vo(P.minus(Z).div(F).toString(),a.value.lpInfo.decimals)},k=I(!1),Q=I(!1),mo=I(""),no=I(),to=async()=>{if(!a.value)return;const c=a.value.autoPoolPositionInfo.tick_lower_index,P=a.value.autoPoolPositionInfo.tick_upper_index,Z=Ho.sqrtPriceX64ToTickIndex(new Y(a.value.current_sqrt_price));Z<c&&(C.value?k.value=!0:Q.value=!0),Z>P&&(C.value?Q.value=!0:k.value=!0);let F;if(console.log(p.value||d.value,"#fromCoinAmount.value || toCoinAmount.value"),p.value||d.value){A.value?F=new u(p.value).mul(Math.pow(10,l.value.decimals)).toString():F=new u(d.value).mul(Math.pow(10,r.value.decimals)).toString();let uo,x=A.value;if(console.log("执行##"),lo.value||po.value){console.log(C.value?A.value:!A.value,"#needReverse.value?fixedFromCoin.value:!fixedFromCoin.value");const t=await Wo.calculateDepositSwapAmount({lowerTick:c,upperTick:P,curSqrtPrice:new Y(a.value.current_sqrt_price),fix_amount_a:x,input_amount:F,coinTypeA:a.value.autoPoolPositionInfo.coin_type_a,coinTypeB:a.value.autoPoolPositionInfo.coin_type_b,clmm_pool:a.value.address});if(console.log(t,"###swapResult"),t){uo=new Y(t.afterSqrtPrice),F=new Y(t.swapOutAmount),uo=a.value.current_sqrt_price,no.value={swap_amount:t.swapInAmount,a2b:x},x=!x;const T=a.value.token_a.decimals,J=a.value.token_b.decimals,B=new u(t.swapInAmount).div(new u(Math.pow(10,T))).toString(),V=new u(t.swapOutAmount).div(new u(Math.pow(10,J))).toString(),N=C.value?a.value.token_b.symbol:a.value.token_a.symbol,eo=C.value?a.value.token_a.symbol:a.value.token_b.symbol;mo.value=`To deposit ${lo.value?p.value:d.value} ${lo.value?N:eo}, 
          ${B} ${lo.value?N:eo}  will be traded for ${V} ${lo.value?eo:N} added to the pool.`}else uo=a.value.current_sqrt_price,F=new Y(F)}else uo=a.value.current_sqrt_price,F=new Y(F);console.log(no,"##swapParams");const{liquidityAmount:fo,tokenMaxA:bo,tokenMaxB:ho}=f.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:l.value,tokenB:r.value,lowerTick:c,upperTick:P,coinAmount:F,iscoinA:x,roundUp:!0,slippage:Number(g.value)/100,curSqrtPrice:new Y(uo)});console.log(a.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(ho.toString(),bo.toString(),a.value,"###323"),!lo.value&&!po.value&&(A.value?d.value=Number(ho)>0?ho:"":p.value=Number(bo)>0?bo:""),K(fo),q(fo)}};go(()=>a.value,c=>{c&&!No(c)&&(l.value=c==null?void 0:c.token_a,r.value=c==null?void 0:c.token_b,k.value=!1,Q.value=!1,to())},{immediate:!0});const z=_(()=>m.value.RATES),so=_(()=>{var c,P,Z,F,uo,x,fo,bo,ho,t;if((P=z.value[(c=l.value)==null?void 0:c.address])!=null&&P.price&&((F=z.value[(Z=r.value)==null?void 0:Z.address])!=null&&F.price)){console.log((x=z.value[(uo=l.value)==null?void 0:uo.address])==null?void 0:x.price,"RATES.value[fromCoin.value?.address]?.price");const T=new u(p.value||0).mul(new u((bo=z.value[(fo=l.value)==null?void 0:fo.address])==null?void 0:bo.price)),J=new u(d.value||0).mul(new u((t=z.value[(ho=r.value)==null?void 0:ho.address])==null?void 0:t.price));return se(T.add(J).toString(),2)}else return"--"});go(()=>p.value,(c,P)=>{c?to():(U.value="--",d.value="",H.value="--")},{immediate:!0}),go(()=>d.value,(c,P)=>{c?to():(p.value="",U.value="--",H.value="--")},{immediate:!0});const{t:co,locale:L}=be(),ao=_(()=>{const c=Number(p.value)>Number(S.value),P=Number(d.value)>Number(R.value);return!p.value&&!d.value?co("button.enterAmount"):c?co("button.insufficientBalance",{name:l.value.symbol}):P?co("button.insufficientBalance",{name:r.value.symbol}):"Add Liquidity"}),Vo=_(()=>{const c=Number(p.value)>Number(S.value),P=Number(d.value)>Number(R.value);return!!(!p.value&&!d.value||c||P||p.value<=0&&d.value<=0)}),Io=I(!0),{setIsShowSuccess:Eo,setIsShowRejected:Po,setIsShowWaiting:wo,setTransactionDesc:Co,setTransactionTxid:Ro,setPositiomNum:To}=G,Wo=_e("Sui"),jo=async()=>{var bo,ho;s.value=!1,Io.value=!0,Ro("");const c=`${M(p.value)} ${(bo=l.value)==null?void 0:bo.symbol}`,P=`${M(d.value)} ${(ho=r.value)==null?void 0:ho.symbol}`;Co(`Deposit ${p.value>0?c:""} ${d.value>0&&p.value>0?"and":""} ${d.value>0?P:""}`),wo(!0);const Z=A.value,F=a.value.autoPoolPositionInfo.tick_lower_index,uo=a.value.autoPoolPositionInfo.tick_upper_index;let x;A.value?x=new u(p.value).mul(Math.pow(10,l.value.decimals)).toString():x=new u(d.value).mul(Math.pow(10,r.value.decimals)).toString();const fo=a.value.rewarderInfo.map(t=>t.coinAddress);try{const t={lowerTick:F,upperTick:uo,coinAmount:x,fix_amount_a:Z,slippage:Number(g.value)/100,curSqrtPrice:new Y(a.value.current_sqrt_price),id:a.value.id,clmm_pool:a.value.autoPoolPositionInfo.pool,lp_token_type:a.value.lp_token_type,coinTypeA:a.value.autoPoolPositionInfo.coin_type_a,coinTypeB:a.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:fo,swapParams:no.value,isOnlyA:lo.value,isOnlyB:po.value},T=await Wo.deposit(t);console.log(T,"===>payloadAdd11111");const J=await w.value.currentWallet.signAndExecuteTransactionBlock(T);let B=f.value.handleTx(J);if(console.log("toAdd###tx###",B),B&&B.hash){Ro(B.hash),wo(!1),Eo(!0),console.log(a,"===>positionInfo");const V={title:"Supplied",desc:`Deposit ${p.value>0?c:""} ${d.value>0&&p.value>0?"and":""} ${d.value>0?P:""}`,hash:B.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deposit ${p.value>0?c:""} ${d.value>0&&p.value>0?"and":""} ${d.value>0?P:""}`};j.value!=="Aptos"&&(V.res=B.res),f.value.showTransitionPending(V),await f.value.watchTransaction(V)&&setTimeout(()=>{$.updatePositionItem(a.value.id),f.value.getAccount(w.value.address)},1e3),To()}else wo(!1),Po(!0);p.value="",d.value="",Io.value=!1}catch(t){p.value="",d.value="",console.log("addError###",t),Io.value=!1,wo(!1),Po(!0)}},lo=I(!1),po=I(!1);return{wallet:w,positionInfo:a,isShowAddModal:s,needReverse:C,fromCoin:l,toCoin:r,fromCoinAmount:p,toCoinAmount:d,fromCoinBlance:S,toCoinBlance:R,fixedFromCoin:A,maxBtnSelect:X,halfBtnSelect:h,totalAmountUSD:so,addCommom:M,shareOfPool:U,minimumReceivedLP:H,addLiquidityBtnText:ao,addLiquidityBtnDisabled:Vo,toAdd:jo,showToCoinLock:Q,showFromCoinLock:k,isOnlyA:lo,isOnlyB:po,onlyToken:c=>{p.value="",d.value="",c=="only-a"?(lo.value=!lo.value,po.value=!1):(po.value=!po.value,lo.value=!1)},onlyText:mo}}});const Jo=o=>(Go("data-v-dc1ac74a"),o=o(),Zo(),o),xt={class:"auto-pool-add"},os={class:"auto-pool-add-content"},es={class:"liquidity-action-tab"},ns=Jo(()=>e("div",{class:"increase tab-active"},"Add",-1)),ts={class:"only-token"},ss=Jo(()=>e("div",null,"Deposit Amounts",-1)),ls={key:0},is={key:0},as={key:0,class:"card-item"},us={key:1,class:"card-item"},rs=Jo(()=>e("span",null,"Pool Closed",-1)),ds={class:"add-info"},vs={key:0,class:"only-text"},ms={class:"total-amount"},cs=Jo(()=>e("span",null,"Total Amount",-1)),ps={class:"total-amount"},fs=Jo(()=>e("span",null,"Share of Pool",-1)),ys={class:"total-amount"},_s=Jo(()=>e("span",null,"Minimum Received LP",-1));function bs(o,s,G,W,j,w){var a,n,C,l,r,p,d,A,S,R,X,h,f;const $=ke,b=Ie,i=ge,m=we;return y(),O("div",xt,[e("div",os,[e("div",es,[ns,e("div",{class:"remove",onClick:s[0]||(s[0]=he(g=>o.$emit("changeCurrentTab"),["stop"]))},"Remove")]),e("div",ts,[ss,e("div",null,[e("div",{class:"only-a",onClick:s[1]||(s[1]=g=>o.onlyToken("only-a"))},[e("p",null,[o.isOnlyA?(y(),O("span",ls)):io("",!0)]),e("span",null,v(o.needReverse?(l=(C=o.positionInfo)==null?void 0:C.token_b)==null?void 0:l.symbol:(n=(a=o.positionInfo)==null?void 0:a.token_a)==null?void 0:n.symbol)+" only",1)]),e("div",{class:"only-b",onClick:s[2]||(s[2]=g=>o.onlyToken("only-b"))},[e("p",null,[o.isOnlyB?(y(),O("span",is)):io("",!0)]),e("span",null,v(o.needReverse?(A=(d=o.positionInfo)==null?void 0:d.token_a)==null?void 0:A.symbol:(p=(r=o.positionInfo)==null?void 0:r.token_b)==null?void 0:p.symbol)+" only",1)])])]),e("div",{class:re(o.needReverse?"card-container reverse":"card-container")},[(o.needReverse?!o.isOnlyA:!o.isOnlyB)?(y(),O("div",as,[E($,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":s[3]||(s[3]=g=>o.fromCoinAmount=g),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:s[4]||(s[4]=g=>o.maxBtnSelect("fromCoin")),onOnHalf:s[5]||(s[5]=g=>o.halfBtnSelect("fromCoin")),onOnInput:s[6]||(s[6]=g=>{o.fromCoinAmount=g}),onOnFocus:s[7]||(s[7]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock?(y(),_o(b,{key:0})):io("",!0)])):io("",!0),(o.needReverse?!o.isOnlyB:!o.isOnlyA)?(y(),O("div",us,[E($,{modelValue:o.toCoinAmount,"onUpdate:modelValue":s[8]||(s[8]=g=>o.toCoinAmount=g),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:s[9]||(s[9]=g=>o.maxBtnSelect("toCoin")),onOnHalf:s[10]||(s[10]=g=>o.halfBtnSelect("toCoin")),onOnInput:s[11]||(s[11]=g=>{o.toCoinAmount=g}),onOnFocus:s[12]||(s[12]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock?(y(),_o(b,{key:0})):io("",!0)])):io("",!0)],2)]),(S=o.positionInfo)!=null&&S.is_pause?(y(),_o(i,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:zo(()=>[rs]),_:1})):o.wallet.connected?(y(),_o(i,{key:1,class:"big-btn liquidity-btn",disabled:o.addLiquidityBtnDisabled,onClick:s[13]||(s[13]=g=>o.isShowAddModal=!0)},{default:zo(()=>[e("span",null,v(o.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(y(),_o(i,{key:2,class:"big-btn",onClick:s[14]||(s[14]=g=>o.wallet.setIsShowWalletModal(!0))},{default:zo(()=>[e("span",null,v(o.$t("button.connectWallet")),1)]),_:1})),e("div",ds,[o.fromCoinAmount||o.toCoinAmount?(y(),O("div",vs,v(o.onlyText),1)):io("",!0),e("div",ms,[cs,e("span",null,"$"+v(("addCommom"in o?o.addCommom:D(M))(o.totalAmountUSD)),1)]),e("div",ps,[fs,e("span",null,v(o.shareOfPool)+"%",1)]),e("div",ys,[_s,e("span",null,v(("addCommom"in o?o.addCommom:D(M))(o.minimumReceivedLP))+" "+v(o.needReverse?(R=o.toCoin)==null?void 0:R.symbol:(X=o.fromCoin)==null?void 0:X.symbol)+"-"+v(o.needReverse?(h=o.fromCoin)==null?void 0:h.symbol:(f=o.toCoin)==null?void 0:f.symbol),1)])]),o.isShowAddModal?(y(),_o(m,{key:3,"pool-info":o.positionInfo,"from-coin":o.needReverse?o.positionInfo.token_b:o.positionInfo.token_a,"to-coin":o.needReverse?o.positionInfo.token_a:o.positionInfo.token_b,"from-coin-amount":o.needReverse?o.toCoinAmount:o.fromCoinAmount,"to-coin-amount":o.needReverse?o.fromCoinAmount:o.toCoinAmount,"total-amount":o.totalAmountUSD,"share-of-pool":o.shareOfPool,"minimum-received-l-p":o.minimumReceivedLP,"is-only-a":o.isOnlyA,"is-only-b":o.isOnlyB,onOnClose:s[15]||(s[15]=g=>o.isShowAddModal=!1),onToAdd:o.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","is-only-a","is-only-b","onToAdd"])):io("",!0)])}const hs=Fo(Qt,[["render",bs],["__scopeId","data-v-dc1ac74a"]]),gs=Do({components:{AutoPoolRemoveModal:Ce},setup(){const o=ye(),s=_(()=>o),G=ie(),W=_(()=>G),j=_(()=>W.value.slippage),w=_(()=>W.value.chainName),$=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],b=I(25),i=Uo(),m=Lo(),a=_(()=>m),n=_(()=>(console.log(a.value.positionInfoObj[i.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),a.value.positionInfoObj[i.params.id])),C=_(()=>{var t;return(t=n.value)==null?void 0:t.needReverse}),l=I(),r=I(),p=I(!1),d=I(),A=_(()=>{var t;return(t=n.value)==null?void 0:t.myLiquidity}),S=I(!0),R=_(()=>w.value?fe(w.value):{}),X=_e("Sui"),h=I(""),f=I(""),g=I("--"),U=I(!1),H=I(!1),K=I(),q=I(!0),k=I(),Q=Mo(),mo=_(()=>Q),no=_(()=>mo.value.RATES),to=async()=>{if(S.value||!n.value)return;const t=n.value.autoPoolPositionInfo.tick_lower_index,T=n.value.autoPoolPositionInfo.tick_upper_index,J=Ho.sqrtPriceX64ToTickIndex(new Y(n.value.current_sqrt_price));J<t&&(C.value?U.value=!0:H.value=!0),J>T&&(C.value?H.value=!0:U.value=!0);let B;if(console.log(h.value||f.value,"#fromCoinAmount.value || toCoinAmount.value"),h.value||f.value){q.value?B=new u(h.value).mul(Math.pow(10,l.value.decimals)).toString():B=new u(f.value).mul(Math.pow(10,r.value.decimals)).toString();let V,N=q.value;if(console.log("执行##"),L.value||ao.value){const oo=await X.calculateRemoveSwapAmount({lowerTick:t,upperTick:T,curSqrtPrice:new Y(n.value.current_sqrt_price),fix_amount_a:N,receiveAmount:B,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address});if(console.log(oo,"###swapResult"),oo){V=new Y(oo.afterSqrtPrice),B=new Y(oo.swapOutAmount),V=n.value.current_sqrt_price,K.value={swap_amount:oo.swapInAmount,liquidity:oo.liquidity,a2b:!N},N=!N;const Bo=n.value.token_a.decimals,Oo=n.value.token_b.decimals,Ao=new u(oo.swapInAmount).div(new u(Math.pow(10,Bo))).toString(),Qo=new u(oo.swapOutAmount).div(new u(Math.pow(10,Oo))).toString(),ne=C.value?n.value.token_b.symbol:n.value.token_a.symbol,ae=C.value?n.value.token_a.symbol:n.value.token_b.symbol;k.value=`To withdraw ${L.value?h.value:f.value} ${L.value?ne:ae}, 
          ${Qo} ${L.value?ae:ne}  in the pool will be traded for ${Ao} ${L.value?ne:ae}`}else V=n.value.current_sqrt_price,B=new Y(B)}else V=n.value.current_sqrt_price,B=new Y(B);console.log("执行了吗##");const{liquidityAmount:eo,tokenMaxA:ro,tokenMaxB:yo}=R.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:l.value,tokenB:r.value,lowerTick:t,upperTick:T,coinAmount:B,iscoinA:N,roundUp:!1,slippage:Number(j.value)/100,curSqrtPrice:new Y(V)});console.log(n.value.current_sqrt_price,"##positionInfo.value.current_sqrt_price"),console.log(yo.toString(),ro.toString(),n.value,"###323"),!L.value&&!ao.value&&(q.value?f.value=Number(yo)>0?yo:"":h.value=Number(ro)>0?ro:"");const qo=ue.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},eo.toString());d.value=new u(qo).div(new u(Math.pow(10,n.value.lpInfo.decimals))).toString();const Xo=new u(d.value).div(new u(A.value)).mul(100);g.value=qo,z.value=eo.toString(),b.value=Xo.toNumber()}},z=I(),so=_(()=>{var t;return(t=n==null?void 0:n.value)==null?void 0:t.amountA}),co=_(()=>{var t;return(t=n==null?void 0:n.value)==null?void 0:t.amountB}),L=I(!1),ao=I(!1),Vo=_(()=>{var B,V,N,eo;const t=(V=no.value[(B=l==null?void 0:l.value)==null?void 0:B.address])==null?void 0:V.price,T=(eo=no.value[(N=r==null?void 0:r.value)==null?void 0:N.address])==null?void 0:eo.price;let J;return t&&T&&(L.value||ao.value?J=new u(L.value?h.value||0:f.value||0).mul(new u(L.value?t:T)).toString():(J=new u(h.value||0).mul(new u(t)).add(new u(f.value||0).mul(new u(T))).toString(),console.log(J,"result##"))),J>0&&J<.01?"<$0.01":`$${M(vo(J,2))}`}),Io=async t=>{if(!S.value)return;S.value=!0,n.value.token_a.decimals,n.value.token_b.decimals;const T=n.value.tick_lower_index,J=n.value.tick_upper_index;Ho.tickIndexToSqrtPriceX64(T),Ho.tickIndexToSqrtPriceX64(J);let B="",V,N;console.log(t.value,"##item.value"),console.log(N,"##coinAmount");let eo=q.value;if(console.log("执行##"),L.value||ao.value){if(L.value){const yo=new u(fo.value).mul(Math.pow(10,l.value.decimals)).mul(t.value).toString();console.log(yo,"##amount"),N=vo(yo,0),h.value=new u(fo.value).mul(t.value).toString()}if(ao.value){const yo=new u(fo.value).mul(t.value).mul(Math.pow(10,r.value.decimals)).toString();N=vo(yo,0),f.value=new u(fo.value).mul(t.value).toString()}const ro=await X.calculateRemoveSwapAmount({lowerTick:T,upperTick:J,curSqrtPrice:new Y(n.value.current_sqrt_price),fix_amount_a:eo,receiveAmount:N,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,clmm_pool:n.value.address});if(console.log(ro,"###swapResult"),ro){new Y(ro.afterSqrtPrice),N=new Y(ro.swapOutAmount),n.value.current_sqrt_price,K.value={swap_amount:ro.swapInAmount,liquidity:ro.liquidity,a2b:!eo},eo=!eo;const yo=n.value.token_a.decimals,qo=n.value.token_b.decimals,Xo=new u(ro.swapInAmount).div(new u(Math.pow(10,yo))).toString(),oo=new u(ro.swapOutAmount).div(new u(Math.pow(10,qo))).toString(),Bo=C.value?n.value.token_b.symbol:n.value.token_a.symbol,Oo=C.value?n.value.token_a.symbol:n.value.token_b.symbol;k.value=`To withdraw ${L.value?h.value:f.value} ${L.value?Bo:Oo}, 
          ${Xo} ${L.value?Bo:Oo}  in the pool will be traded for ${oo} ${L.value?Oo:Bo}`,B=ro.liquidity}else n.value.current_sqrt_price,N=new Y(N);g.value=ue.get_lp_amount_by_liquidity({liquidity:n.value.liquidity,total_supply:n.value.total_supply},B),d.value=new u(g.value).div(Math.pow(10,n.value.lpInfo.decimals)),z.value=B}else{const ro=new u(so.value).mul(Math.pow(10,l.value.decimals)).mul(t.value).toString();N=vo(ro,0),h.value=new u(so.value).mul(t.value).toString();const yo=new u(co.value).mul(t.value).mul(Math.pow(10,r.value.decimals)).toString();N=vo(yo,0),f.value=new u(co.value).mul(t.value).toString(),n.value.current_sqrt_price,N=new Y(N),t.value!==1?V=new u(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).mul(t.value).toString():V=new u(n.value.myLiquidity).mul(Math.pow(10,n.value.lpInfo.decimals)).toString(),d.value=new u(V).div(Math.pow(10,n.value.lpInfo.decimals)),B=ue.get_share_liquidity_by_amount({liquidity:n.value.liquidity,total_supply:n.value.total_supply},V),g.value=vo(V,0),z.value=vo(B,0)}};go(b,qe((t,T)=>{t!==T&&(Number(t)>100?b.value=100:t&&n.value?(console.log("687===>"),b.value=t,Io({value:b.value/100})):(h.value="--",f.value="--"))},300)),go(()=>h.value,(t,T)=>{t?to():f.value=""},{immediate:!0}),go(()=>f.value,(t,T)=>{t?to():h.value=""},{immediate:!0});const Eo=Be(),{setIsShowSuccess:Po,setIsShowRejected:wo,setIsShowWaiting:Co,setTransactionDesc:Ro,setTransactionTxid:To,setPositiomNum:Wo,setTransactionDescText:jo}=G,lo=I(!1),{t:po}=be(),Ko=async()=>{var qo,Xo;lo.value=!0,To("");const t=Number(h.value)>0?`${M(h.value,l.value.decimals)} ${l.value.symbol}`:"",T=Number(f.value)>0?`${M(f.value,r.value.decimals)} ${r.value.symbol}`:"";console.log(t,T,"###transactionDescTo"),Ro(po("tips.removeLiquidiyText",{from:C.value?T:t,and:Number(h.value)>0&&Number(f.value)>0?"and":"",to:C.value?t:T})),Co(!0);const J=po("modal.removeLiquidityText2");jo(J);const B=n.value.autoPoolPositionInfo.tick_lower_index,V=n.value.autoPoolPositionInfo.tick_upper_index,N=Ho.tickIndexToSqrtPriceX64(B),eo=Ho.tickIndexToSqrtPriceX64(V),ro=n.value.rewarderInfo.map(oo=>oo.coinAddress);console.log(z.value,g.value,"##liquidityVal.value");let yo;q.value?yo=new u(h.value).mul(Math.pow(10,l.value.decimals)).toString():yo=new u(f.value).mul(Math.pow(10,r.value.decimals)).toString();try{const oo={lowerSqrtPrice:N,upperSqrtPrice:eo,lpTokenAmount:new Y(g.value),liquidity:new Y(z.value),curSqrtPrice:new Y(n.value.object.current_sqrt_price),slippage:Number(j.value)/100,id:n.value.id,clmm_pool:n.value.autoPoolPositionInfo.pool,lp_token_type:n.value.lp_token_type,coinTypeA:n.value.autoPoolPositionInfo.coin_type_a,coinTypeB:n.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:ro,swapParams:K.value,fix_amount_a:q.value,isOnlyA:L.value,isOnlyB:ao.value,lowerTick:B,upperTick:V,receiveAmount:yo},Bo=await X.remove(oo),Oo=await s.value.currentWallet.signAndExecuteTransactionBlock(Bo);let Ao=R.value.handleTx(Oo);if(console.log("0331###remove###tx####",Ao),Ao&&Ao.hash){To(Ao.hash),Co(!1),Po(!0);const Qo={title:po("common.removeLiquidity"),desc:"",hash:Ao.hash,descTransactions:`Remove ${t} ${Number(h.value)>0&&Number(f.value)>0?"and":""} ${T} from the pool`,sender:s.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${h.value} ${(qo=l.value)==null?void 0:qo.symbol} and ${f.value} ${(Xo=r.value)==null?void 0:Xo.symbol}`};Qo.res=Ao.res,R.value.showTransitionPending(Qo),await R.value.watchTransaction(Qo)&&(h.value="",f.value="",d.value="",b.value=0,setTimeout(()=>{m.updatePositionItem(n.value.id),R.value.getAccount(s.value.address)},1e3),Number(b.value)==100&&i.name=="auto-pool-detail"&&Eo.push("/pool/auto"))}else Co(!1),wo(!0);lo.value=!1}catch(oo){console.log("Remove error",oo),lo.value=!1,Co(!1),wo(!0)}};go(()=>n.value,(t,T)=>{t&&!No(t)&&(l.value=t==null?void 0:t.token_a,r.value=t==null?void 0:t.token_b,console.log("触发###"),(!T||T&&T.address!==t.address)&&Io({value:b.value/100}))},{immediate:!0});const c=_(()=>{const t=Number(d.value)>Number(A.value);return!d.value||d.value<=0?po("button.enterAmount"):t?"Invalid Amount":po("button.remove")}),P=_(()=>{const t=Number(d.value)>Number(A.value);return!!(!d.value||d.value<=0||t)}),Z=t=>(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||Yo("/image/coins/sui-unknown.png"),F=t=>{h.value="",f.value="",S.value=!0,t=="only-a"?(L.value=!L.value,ao.value=!1,q.value=!0):(ao.value=!ao.value,L.value=!1,q.value=!1)},uo=t=>{S.value=!0,b.value=100,t==="fromCoin"?q.value=!0:q.value=!1},x=t=>{S.value=!0,b.value=50,t==="fromCoin"?q.value=!0:q.value=!1},fo=I(),bo=async()=>{const t=q.value,T=n.value.token_a.decimals,J=n.value.token_b.decimals,B=new u(so.value).mul(new u(Math.pow(10,T))).toString(),V=new u(co.value).mul(new u(Math.pow(10,J))).toString(),N=L.value?V:B;if(L.value||ao.value){console.log(N,"##receiveAmount");let eo=await R.value.preSwap({pool:{address:n.value.address,coinA:n.value.token_a,coinB:n.value.token_b},a2b:t,byAmountIn:q.value,amount:q.value?so.value:co.value});console.log(eo,"##preSwapRes"),fo.value=new u(eo.estimatedAmountOut).add(new u(L.value?co.value:so.value)).toString(),Io({value:b.value/100})}};return go(()=>[L.value,ao.value,h.value,f.value],([t,T])=>{(t||T)&&bo()},{immediate:!0}),{removeLiquidityBtnText:c,removeLiquidityBtnDisabled:P,wallet:s,ratioArr:$,positionInfo:n,isShowRemoveModal:p,needReverse:C,fromCoin:l,toCoin:r,lpAmount:d,lpBalance:A,sliderVal:b,sFixD:vo,isSlider:S,fromCoinAmount:h,toCoinAmount:f,setPercent:Io,toRemove:Ko,addCommom:M,getCoinIcon:Z,isOnlyA:L,isOnlyB:ao,onlyToken:F,fixedFromCoin:q,maxBtnSelect:uo,halfBtnSelect:x,fromCoinBlance:so,toCoinBlance:co,showFromCoinLock:U,showToCoinLock:H,removeText:k,onlyTokenBalance:fo,totalWithdraw:Vo,formatter:t=>`${t}%`}}});const ee=o=>(Go("data-v-71ce3a51"),o=o(),Zo(),o),ks={class:"auto-pool-add"},Is={class:"auto-pool-add-content"},ws={class:"liquidity-action-tab"},Cs=ee(()=>e("div",{class:"remove tab-active"},"Remove",-1)),$s={class:"only-token"},As=ee(()=>e("div",null,"Deposit Amounts",-1)),Ss={key:0},Ps={key:0},Rs={key:0,class:"card-item"},Ts={key:1,class:"card-item"},qs={class:"remove-ratio"},Bs={class:"remove-ratio-select"},Os={key:0,class:"ratio"},Ns={key:1,class:"ratio"},Ms={class:"ratio-list"},Ls=["onClick"],Ds=ee(()=>e("span",null,"Pool Closed",-1)),Us={class:"remove-info"},Fs={key:0,class:"remove-text"},Vs={class:"total-amount"},Es=ee(()=>e("span",null,"Total Withdraw",-1)),Ws={class:"total-amount"},js=ee(()=>e("span",null,"LP Burn Amount",-1)),Xs={key:0},Hs={key:1};function zs(o,s,G,W,j,w){var n,C,l,r,p,d,A,S,R,X,h,f,g,U,H,K,q;const $=ke,b=Ie,i=Me,m=ge,a=Ce;return y(),O("div",ks,[e("div",Is,[e("div",ws,[e("div",{class:"increase",onClick:s[0]||(s[0]=he(k=>o.$emit("changeCurrentTab"),["stop"]))},"Add"),Cs]),e("div",$s,[As,e("div",null,[e("div",{class:"only-a",onClick:s[1]||(s[1]=k=>o.onlyToken("only-a"))},[e("p",null,[o.isOnlyA?(y(),O("span",Ss)):io("",!0)]),e("span",null,v(o.needReverse?(r=(l=o.positionInfo)==null?void 0:l.token_b)==null?void 0:r.symbol:(C=(n=o.positionInfo)==null?void 0:n.token_a)==null?void 0:C.symbol)+" only",1)]),e("div",{class:"only-b",onClick:s[2]||(s[2]=k=>o.onlyToken("only-b"))},[e("p",null,[o.isOnlyB?(y(),O("span",Ps)):io("",!0)]),e("span",null,v(o.needReverse?(S=(A=o.positionInfo)==null?void 0:A.token_a)==null?void 0:S.symbol:(d=(p=o.positionInfo)==null?void 0:p.token_b)==null?void 0:d.symbol)+" only",1)])])]),e("div",{class:re(o.needReverse?"card-container reverse":"card-container")},[(o.needReverse?!o.isOnlyA:!o.isOnlyB)?(y(),O("div",Rs,[E($,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":s[3]||(s[3]=k=>o.fromCoinAmount=k),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.isOnlyA?o.onlyTokenBalance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,"amount-leabl":"Available",onOnMax:s[4]||(s[4]=k=>o.maxBtnSelect("fromCoin")),onOnHalf:s[5]||(s[5]=k=>o.halfBtnSelect("fromCoin")),onOnInput:s[6]||(s[6]=k=>{o.isSlider=!1,o.fromCoinAmount=k}),onOnFocus:s[7]||(s[7]=()=>{o.isSlider=!1,o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showFromCoinLock?(y(),_o(b,{key:0})):io("",!0)])):io("",!0),(o.needReverse?!o.isOnlyB:!o.isOnlyA)?(y(),O("div",Ts,[E($,{modelValue:o.toCoinAmount,"onUpdate:modelValue":s[8]||(s[8]=k=>o.toCoinAmount=k),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.isOnlyB?o.onlyTokenBalance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,"amount-leabl":"Available",onOnMax:s[9]||(s[9]=k=>o.maxBtnSelect("toCoin")),onOnHalf:s[10]||(s[10]=k=>o.halfBtnSelect("toCoin")),onOnInput:s[11]||(s[11]=k=>{o.isSlider=!1,o.toCoinAmount=k}),onOnFocus:s[12]||(s[12]=()=>{o.isSlider=!1,o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),o.showToCoinLock?(y(),_o(b,{key:0})):io("",!0)])):io("",!0)],2),e("div",qs,[e("div",Bs,[Number(o.lpBalance)>=Number(o.lpAmount)?(y(),O("div",Os,v(o.sliderVal>0&&Number(("sFixD"in o?o.sFixD:D(vo))(o.sliderVal,2))<.01?"<0.01":("sFixD"in o?o.sFixD:D(vo))(o.sliderVal,2))+"% ",1)):(y(),O("div",Ns,"--")),e("div",Ms,[(y(!0),O(Oe,null,Ne(o.ratioArr,(k,Q)=>(y(),O("div",{key:Q,class:re(["ratio-item",o.sliderVal==k.value?"ratio-item-active":""]),onClick:()=>{o.isSlider=!0,o.sliderVal=k.value}},v(k.name),11,Ls))),128))])]),E(i,{value:o.sliderVal,"onUpdate:value":s[13]||(s[13]=k=>o.sliderVal=k),"tip-formatter":o.formatter},null,8,["value","tip-formatter"])])]),(R=o.positionInfo)!=null&&R.is_pause?(y(),_o(m,{key:0,class:"big-btn liquidity-btn",disabled:!0},{default:zo(()=>[Ds]),_:1})):o.wallet.connected?(y(),_o(m,{key:1,class:"big-btn liquidity-btn",disabled:o.removeLiquidityBtnDisabled,onClick:o.toRemove},{default:zo(()=>[e("span",null,v(o.removeLiquidityBtnText),1)]),_:1},8,["disabled","onClick"])):(y(),_o(m,{key:2,class:"big-btn",onClick:s[14]||(s[14]=k=>o.wallet.setIsShowWalletModal(!0))},{default:zo(()=>[e("span",null,v(o.$t("button.connectWallet")),1)]),_:1})),e("div",Us,[o.isOnlyA||o.isOnlyB?(y(),O("div",Fs,v(o.removeText),1)):io("",!0),e("div",Vs,[Es,e("span",null,v(o.totalWithdraw),1)]),e("div",Ws,[js,o.fromCoinAmount||o.toCoinAmount?(y(),O("span",Xs,v(("addCommom"in o?o.addCommom:D(M))(o.lpAmount))+" "+v(o.needReverse?(X=o.toCoin)==null?void 0:X.symbol:(h=o.fromCoin)==null?void 0:h.symbol)+"-"+v(o.needReverse?(f=o.fromCoin)==null?void 0:f.symbol:(g=o.toCoin)==null?void 0:g.symbol),1)):(y(),O("span",Hs,v(("addCommom"in o?o.addCommom:D(M))(o.lpAmount))+" "+v(o.needReverse?(U=o.toCoin)==null?void 0:U.symbol:(H=o.fromCoin)==null?void 0:H.symbol)+"-"+v(o.needReverse?(K=o.fromCoin)==null?void 0:K.symbol:(q=o.toCoin)==null?void 0:q.symbol),1))])]),o.isShowRemoveModal?(y(),_o(a,{key:3,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,onOnClose:s[15]||(s[15]=k=>o.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):io("",!0)])}const Ys=Fo(gs,[["render",zs],["__scopeId","data-v-71ce3a51"]]),Gs=Do({components:{AutoPoolV2Info:$e,AutoPoolV2PositionRange:Ae,AutoPoolV2PoolComposition:Se,AutoPoolV2PoolLiquidity:Pe,AutoPoolV2PoolAdd:hs,AutoPoolV2PoolRemove:Ys},setup(){const o=Lo(),s=Mo(),G=ie(),W=_(()=>G),j=()=>{o.getAutoPoolAPY(),o.getAutoPoolList(),s.setPoolConfigList(W.value.chainName,W.value.filterCoinsObj)},w=I(),$=Uo();return go(()=>$.query.action,b=>{b&&(w.value=b)},{immediate:!0}),{clickRefresh:j,currentTab:w}}});const Zs={class:"auto-pool-detail-v2"},Js={class:"detail-top"},Ks={class:"detail-bottom pc-detail"},Qs={class:"detail-bottom-left"},xs={class:"detail-bottom-right"},ol={class:"h5-detail"};function el(o,s,G,W,j,w){const $=Re,b=$e,i=Ae,m=Se,a=Pe,n=ce("AutoPoolV2PoolAdd"),C=ce("AutoPoolV2PoolRemove");return y(),O("div",Zs,[e("div",Js,[E($,{onClickRefresh:o.clickRefresh},null,8,["onClickRefresh"]),E(b)]),e("div",Ks,[e("div",Qs,[E(i),E(m),E(a)]),e("div",xs,[o.currentTab=="add"?(y(),_o(n,{key:0,onChangeCurrentTab:s[0]||(s[0]=l=>o.currentTab="remove")})):(y(),_o(C,{key:1,onChangeCurrentTab:s[1]||(s[1]=l=>o.currentTab="add")}))])]),e("div",ol,[o.currentTab=="add"?(y(),_o(n,{key:0,onChangeCurrentTab:s[2]||(s[2]=l=>o.currentTab="remove")})):(y(),_o(C,{key:1,onChangeCurrentTab:s[3]||(s[3]=l=>o.currentTab="add")})),E(i),E(m),E(a)])])}const Al=Fo(Gs,[["render",el],["__scopeId","data-v-b226cf01"]]);export{Al as default};
