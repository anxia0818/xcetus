import{m as co,e as uo,s as U,a as F,u as mo,d as eo,o as bo,c as oo}from"./pool.5a57375c.js";import{a as E,l as u,r as H,e as q,o as n,f as t,h as s,v as m,u as v,c as T,w as j,B as lo,j as R,p as K,k as X,z as ao,i as y,s as po,t as Y,x as N,b as fo,A as io,F as B,E as G,P as Eo,N as Po,M as yo,S as qo,J as Wo,q as So,H as Vo,Q as Ho}from"./entry.4f0b5ffa.js";import{a as Z,u as _o}from"./sha256.e0a8c675.js";import{u as so}from"./farms.db690f88.js";import{i as ho}from"./import-icon.de3e6c66.js";/* empty css              *//* empty css              *//* empty css              */import{_ as To}from"./img-connect-wallet_2x.0c65d803.js";import{_ as Lo}from"./img-no-Positions_2x.b0323339.js";import{_ as Jo}from"./upgrade-loading.668610db.js";import"./decimal.0bdeb344.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const zo=E({setup(){const o=Z(),l=u(()=>o),_=so(),c=u(()=>_),f=u(()=>c.value.totalRwadrdUsd),a=u(()=>c.value.farmsPositionList),i=u(()=>c.value.farmsAllPositionLoading),r=_o(),g=co("Sui"),p=uo("Sui"),{setIsShowSuccess:k,setIsShowRejected:h,setIsShowWaiting:$,setTransactionDesc:e,setTransactionTxid:d}=r,M=H(!1);return{wallet:l,farms:c,totalRwadrdUsd:f,sFixD:U,claimAllPoolReward:async Q=>{M.value=!0,console.log(a.value,"farmsRewardObj###");const J=[];a.value.forEach(D=>{console.log(Q,D,"#position"),D.positionSource=="farming"&&J.push({pool_id:D.pool_id,position_nft_id:D.id})}),console.log(JSON.stringify(J),"##params"),d(""),e("Claim Rewards"),$(!0);try{const D=await g.batchHarvest(J),O=await l.value.currentWallet.signAndExecuteTransactionBlock(D);console.log("0221###sui swap res###",O);let P=p.handleTx(O);if(P&&P.hash){d(P.hash),$(!1),k(!0);let A={res:P.res,title:"Stake",hash:P.hash};p.showTransitionPending(A),await p.watchTransaction(A)&&setTimeout(()=>{_.getFarmsPoolList()},4e3)}else $(!1),h(!0);M.value=!1}catch(D){console.log("Claim all error",D),$(!1),h(!0),M.value=!1}},loading:M,addCommom:F,farmsAllPositionLoading:i}}});const ko=o=>(K("data-v-4a7c23f3"),o=o(),X(),o),Qo={class:"farms-banner-bg"},Go={class:"farms-banner"},Ko={class:"farms-banner-center"},Xo=ko(()=>s("div",{class:"title"},"Farms",-1)),Yo=ko(()=>s("div",{class:"desc"},"Stake Liquidity position to earn more rewards.",-1)),Zo={class:"claim-rewards"},xo={class:"claim-title"},os=ko(()=>s("span",null,"Claimed Rewards",-1)),ss={key:0},ns={key:1},es={class:"claim-content"};function ts(o,l,_,c,f,a){const i=lo;return n(),t("div",Qo,[s("div",Go,[s("div",Ko,[Xo,Yo,s("div",Zo,[s("div",xo,[os,o.wallet.address?(n(),t("span",ss,"$"+m(("addCommom"in o?o.addCommom:v(F))(("sFixD"in o?o.sFixD:v(U))(o.totalRwadrdUsd||0,2))),1)):(n(),t("span",ns,"--"))]),s("div",es,[o.wallet.address?(n(),T(i,{key:0,class:"claim-btn",loading:o.loading,disabled:Number(o.totalRwadrdUsd)==0||o.farmsAllPositionLoading,onClick:o.claimAllPoolReward},{default:j(()=>[R("Claim All")]),_:1},8,["loading","disabled","onClick"])):(n(),T(i,{key:1,class:"claim-btn",onClick:l[0]||(l[0]=r=>o.wallet.setIsShowWalletModal(!0))},{default:j(()=>[R("Connect")]),_:1}))])])])])])}const Co=q(zo,[["render",ts],["__scopeId","data-v-4a7c23f3"]]),as=E({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=H(!0);return{sFixD:U,direct:o}}}),jo=""+globalThis.__publicAssetsURL("sui-image/range.png");const vo=o=>(K("data-v-99c4cf44"),o=o(),X(),o),is={class:"range"},ls={key:0},rs=vo(()=>s("img",{src:jo,alt:""},null,-1)),ds={class:"per"},cs={key:1},us=vo(()=>s("img",{src:jo,alt:""},null,-1)),ms={class:"per"},ps=vo(()=>s("div",null,[s("svg",{class:"icon icon-up","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),_s=vo(()=>s("div",null,[s("svg",{class:"icon icon-down","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),fs=[ps,_s];function hs(o,l,_,c,f,a){var i,r,g,p;return n(),t("div",is,[o.direct?(n(),t("p",ls,[s("span",null,m(("sFixD"in o?o.sFixD:v(U))(o.poolInfo.minPrice,6)),1),rs,s("span",null,m(("sFixD"in o?o.sFixD:v(U))(o.poolInfo.maxPrice,6)),1),s("span",ds,m((i=o.poolInfo.coinB)==null?void 0:i.symbol)+" per "+m((r=o.poolInfo.coinA)==null?void 0:r.symbol),1)])):(n(),t("p",cs,[s("span",null,m(o.poolInfo.maxPrice!=="∞"?("sFixD"in o?o.sFixD:v(U))(1/o.poolInfo.maxPrice,6):"0"),1),us,s("span",null,m(o.poolInfo.minPrice!=="0"?("sFixD"in o?o.sFixD:v(U))(1/o.poolInfo.minPrice,6):"∞"),1),s("span",ms,m((g=o.poolInfo.coinA)==null?void 0:g.symbol)+" per "+m((p=o.poolInfo.coinB)==null?void 0:p.symbol),1)])),s("div",{class:"icon-change",onClick:l[0]||(l[0]=ao(k=>o.direct=!o.direct,["stop"]))},fs)])}const wo=q(as,[["render",hs],["__scopeId","data-v-99c4cf44"]]),vs=E({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=H(!0);return{sFixD:U,direct:o}}});const gs=o=>(K("data-v-14f67ada"),o=o(),X(),o),$s={class:"valid-range"},bs=gs(()=>s("div",{class:"title"},"Valid Range",-1));function ys(o,l,_,c,f,a){const i=wo;return n(),t("div",$s,[bs,y(i,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const ks=q(vs,[["render",ys],["__scopeId","data-v-14f67ada"]]),ws=E({props:{poolInfo:{type:Object,default:()=>({})}},setup(){return{}}});const Is={class:"pool"},Ss={class:"pool-info"},Ps={class:"token-logo"},Ts={alt:""},Ls={alt:""},Cs={class:"token-symbol"},js={class:"symbol"},Us={class:"fee-rate"};function Os(o,l,_,c,f,a){var g,p,k,h;const i=ks,r=po("image");return n(),t("div",Is,[s("div",Ss,[s("div",Ps,[Y(s("img",Ts,null,512),[[r,(g=o.poolInfo.coinA)==null?void 0:g.logo_url]]),Y(s("img",Ls,null,512),[[r,(p=o.poolInfo.coinB)==null?void 0:p.logo_url]])]),s("div",Cs,[s("div",js,m((k=o.poolInfo.coinA)==null?void 0:k.symbol)+" - "+m((h=o.poolInfo.coinB)==null?void 0:h.symbol),1),s("div",Us,m(o.poolInfo.fee),1)])]),y(i,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const Uo=q(ws,[["render",Os],["__scopeId","data-v-c027f63c"]]),Rs=E({props:{currentTab:{type:String,default:""},rewardInfo:{type:Object,default:()=>({})}},setup(){const o=mo(),l=u(()=>o);return{sFixD:U,addCommom:F,getCoinIcon:c=>{var f;return((f=l.value.tokensObj[c])==null?void 0:f.logo_url)||ho("/image/coins/sui-unknown.png")}}}});const As={key:0,class:"rewards-day"},Fs={class:"rewards-day-box"},Ds={alt:""};function Bs(o,l,_,c,f,a){const i=po("image");return o.rewardInfo.allocate_point>0||o.currentTab=="Ended"?(n(),t("div",As,[s("div",null,[s("div",Fs,[Y(s("img",Ds,null,512),[[i,o.getCoinIcon(o.rewardInfo.reward_coin)]]),s("span",null,m(("addCommom"in o?o.addCommom:v(F))(("sFixD"in o?o.sFixD:v(U))(o.rewardInfo.emission_per_day,4))),1)])])])):N("",!0)}const Oo=q(Rs,[["render",Bs],["__scopeId","data-v-416b96fb"]]),Ns=E({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){console.log(o.positionInfo,"props.positionInfo");const l=mo(),_=u(()=>l);return{addCommom:F,decimalUi:eo,fixD:bo,getCoinIcon:f=>{var a;return((a=_.value.tokensObj[f])==null?void 0:a.logo_url)||ho("/image/coins/sui-unknown.png")}}}});const Ms={class:"hover-rewarder"},Es={class:"rewarder-info"},qs={class:"left-rewarder"},Ws={alt:""},Vs={class:"right-rewarder"},Hs={class:"amount"},Js={key:0,class:"amount-usd"},zs={key:1,class:"amount-usd"},Qs={class:"rewarder-info"},Gs={class:"left-rewarder"},Ks={alt:""},Xs={class:"right-rewarder"},Ys={class:"amount"},Zs={key:0,class:"amount-usd"},xs={key:1,class:"amount-usd"};function on(o,l,_,c,f,a){const i=po("image");return n(),t("div",Ms,[s("div",Es,[s("div",qs,[Y(s("img",Ws,null,512),[[i,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinB.address:o.positionInfo.coinA.address)]]),s("span",null,m(o.positionInfo.needReverse?o.positionInfo.coinB.symbol:o.positionInfo.coinA.symbol),1)]),s("div",Vs,[s("div",Hs,m(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:v(F))(("decimalUi"in o?o.decimalUi:v(eo))(o.positionInfo.amountB,o.positionInfo.coinB.decimals)):("addCommom"in o?o.addCommom:v(F))(("decimalUi"in o?o.decimalUi:v(eo))(o.positionInfo.amountA,o.positionInfo.coinA.decimals))),1),o.positionInfo.needReverse?(n(),t("div",zs,m(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("fixD"in o?o.fixD:v(bo))(o.positionInfo.amountBUsd,2):"<$0.01"),1)):(n(),t("div",Js,m(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("fixD"in o?o.fixD:v(bo))(o.positionInfo.amountAUsd,2):"<$0.01"),1))])]),s("div",Qs,[s("div",Gs,[Y(s("img",Ks,null,512),[[i,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinA.address:o.positionInfo.coinB.address)]]),s("span",null,m(o.positionInfo.needReverse?o.positionInfo.coinA.symbol:o.positionInfo.coinB.symbol),1)]),s("div",Xs,[s("div",Ys,m(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:v(F))(("decimalUi"in o?o.decimalUi:v(eo))(o.positionInfo.amountA,o.positionInfo.coinA.decimals)):("addCommom"in o?o.addCommom:v(F))(("decimalUi"in o?o.decimalUi:v(eo))(o.positionInfo.amountB,o.positionInfo.coinB.decimals))),1),o.positionInfo.needReverse?(n(),t("div",xs,m(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("addCommom"in o?o.addCommom:v(F))(("decimalUi"in o?o.decimalUi:v(eo))(o.positionInfo.amountAUsd,2)):"<$0.01"),1)):(n(),t("div",Zs,m(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("addCommom"in o?o.addCommom:v(F))(("decimalUi"in o?o.decimalUi:v(eo))(o.positionInfo.amountBUsd,2)):"<$0.01"),1))])])])}const Ro=q(Ns,[["render",on],["__scopeId","data-v-d01301e5"]]),sn=E({components:{FarmsPositionAmountTips:Ro},props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const l=Z(),_=u(()=>l);console.log(o.positionInfo,"positionInfo#");const c=so(),f=u(()=>c),a=uo("Sui"),i=co("Sui"),r=H(!1),g=_o();u(()=>g);const p=fo(),{setIsShowSuccess:k,setIsShowRejected:h,setIsShowWaiting:$,setTransactionDesc:e,setTransactionTxid:d}=g,M=async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,d(""),e(`Stake ${o.positionInfo.name}`),$(!0);const b={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},w=o.positionInfo.farmsPoolId;try{const L=await i.farmsDeposit(b,w),I=await _.value.currentWallet.signAndExecuteTransactionBlock(L);console.log("0221###sui swap res###",I);let C=a.handleTx(I);if(C&&C.hash){d(C.hash),$(!1),k(!0);let S={res:C.res,title:"Staked",hash:C.hash};a.showTransitionPending(S),await a.watchTransaction(S)&&setTimeout(()=>{c.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),r.value=!1},2e3)}else $(!1),h(!0)}catch(L){console.log("farmsDeposit error",L),$(!1),h(!0),r.value=!1}},W=async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,d(""),e(`Unstake ${o.positionInfo.name}`),$(!0);const b=o.positionInfo.farmsPoolId,w=o.positionInfo.id;try{const L=await i.farmsWithdraw(b,w),I=await _.value.currentWallet.signAndExecuteTransactionBlock(L);console.log("0221###sui swap res###",I);let C=a.handleTx(I);if(console.log(C,"unStaketx##"),C&&C.hash){d(C.hash),$(!1),k(!0);let S={res:C.res,title:"Unstaked",hash:C.hash};a.showTransitionPending(S),await a.watchTransaction(S)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),c.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),r.value=!1},2e3)}else $(!1),h(!0)}catch(L){console.log("farmsDeposit error",L),$(!1),h(!0),r.value=!1}},Q=async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,d(""),e("Claim rewards"),$(!0);const b={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const w=await i.harvestFarms(b),L=await _.value.currentWallet.signAndExecuteTransactionBlock(w);console.log("0221###sui swap res###",L);let I=a.handleTx(L);if(I&&I.hash){d(I.hash),$(!1),k(!0);let C={title:"Claim",res:I.res,hash:I.hash};a.showTransitionPending(C),await a.watchTransaction(C)&&setTimeout(()=>{c.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else $(!1),h(!0);r.value=!1}catch(w){console.log("farmsDeposit error",w),$(!1),h(!0),r.value=!1}},J=u(()=>f.value.farmsRewardObj),D=mo(),O=u(()=>D);return{sFixD:U,stake:M,loading:r,unStake:W,router:p,claim:Q,farmsRewardObj:J,getCoinIcon:b=>{var w;return((w=O.value.tokensObj[b])==null?void 0:w.logo_url)||ho("/image/coins/sui-unknown.png")},toPositionDetails:b=>{console.log("toPositionDetails:",b),b.positionSource=="clmm"?p.push(`/new-position-detail?collect=${b.collectionName}&&token=${b.tokenName}&&address=${b.pool}&pos=${b.pos_object_id}`):p.push(`/new-position-detail?position_nft_id=${b.id}&positionSource=farming`)}}}}),Ao=""+globalThis.__publicAssetsURL("sui-image/position-active.png");const go=o=>(K("data-v-d4ade2de"),o=o(),X(),o),nn={class:"farms-position-item"},en=go(()=>s("thead",null,[s("tr",null,[s("th"),s("th",null,"Liquidity"),s("th",null,"Share"),s("th",null,"Earnings"),s("th")])],-1)),tn={class:"position-info"},an={key:0,class:"status-bg"},ln=go(()=>s("img",{src:Ao,alt:""},null,-1)),rn=[ln],dn={class:"status-text"},cn={class:"name-range"},un=go(()=>s("span",null,"Details",-1)),mn=go(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),pn=[un,mn],_n={class:"liquidity"},fn={class:"apr"},hn={class:"rewards-day-box"},vn={alt:""},gn={key:1,class:"rewards-day"},$n={class:"action-btn"};function bn(o,l,_,c,f,a){const i=wo,r=Ro,g=lo,p=Eo,k=po("image");return n(),t("div",nn,[s("table",null,[en,s("tbody",null,[s("tr",null,[s("td",null,[s("div",tn,[s("div",{class:io(["position-status",o.positionInfo.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionInfo.positionStatus=="Active"?(n(),t("div",an,rn)):N("",!0),s("div",dn,m(o.positionInfo.positionStatus),1)],2),s("div",cn,[s("span",null,m(o.positionInfo.name),1),y(i,{"pool-info":o.positionInfo},null,8,["pool-info"])]),s("div",{class:"details",onClick:l[0]||(l[0]=h=>o.toPositionDetails(o.positionInfo))},pn)])]),s("td",null,[s("div",_n,[y(r,{"position-info":o.positionInfo},null,8,["position-info"]),s("span",null,m(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("sFixD"in o?o.sFixD:v(U))(o.positionInfo.positionUSD,2)}`),1)])]),s("td",null,[s("div",fn,m(o.positionInfo.positionShare>0&&o.positionInfo.positionShare<.01?"<0.01":("sFixD"in o?o.sFixD:v(U))(o.positionInfo.positionShare||0,2))+"%",1)]),s("td",null,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),t(B,{key:0},G(o.positionInfo.rewards,h=>(n(),t("div",{key:h.rewarder_type,class:"rewards-day"},[s("div",null,[s("div",hn,[Y(s("img",vn,null,512),[[k,o.getCoinIcon(h.rewarder_type)]]),s("span",null,m(h.rewarderAmount),1)])])]))),128)):(n(),t("div",gn,"--"))]),s("td",null,[s("div",$n,[o.positionInfo.positionSource=="clmm"?(n(),t(B,{key:0},[o.positionInfo&&o.positionInfo.positionStatus!=="Active"?(n(),T(p,{key:0},{title:j(()=>[R("Farming rewards are only available for active positions.")]),default:j(()=>[y(g,{class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:j(()=>[R("Stake")]),_:1},8,["loading","disabled","onClick"])]),_:1})):(n(),T(g,{key:1,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:j(()=>[R("Stake")]),_:1},8,["loading","disabled","onClick"]))],64)):(n(),T(g,{key:1,class:"unstake-btn",onClick:o.unStake},{default:j(()=>[R("Unstake")]),_:1},8,["onClick"])),o.positionInfo.positionSource=="clmm"?(n(),T(g,{key:2,class:"claim-btn",disabled:!0},{default:j(()=>[R("↑ Claim")]),_:1})):(n(),T(g,{key:3,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0,onClick:o.claim},{default:j(()=>[R("↑ Claim")]),_:1},8,["disabled","onClick"]))])])])])])])}const Fo=q(sn,[["render",bn],["__scopeId","data-v-d4ade2de"]]),yn=E({props:{noDataImg:{type:String,default:""},desc:{type:String,default:""},type:{type:String,default:""},addLiquidityUrl:{type:String,default:""}},setup(){return{walletStore:Z()}}});const kn={class:"no-data"},wn=["src"],In={key:0,class:"desc"};function Sn(o,l,_,c,f,a){const i=lo;return n(),t("div",kn,[s("img",{src:o.noDataImg,alt:""},null,8,wn),o.desc?(n(),t("div",In,m(o.desc),1)):N("",!0),o.type=="addLiquidity"?(n(),T(i,{key:1,class:"add-liquidity-btn",onClick:l[0]||(l[0]=r=>o.addLiquidityUrl?o.$router.push(o.addLiquidityUrl):"")},{default:j(()=>[R("Add Liquidity")]),_:1})):N("",!0),o.type=="connectWallet"?(n(),T(i,{key:2,class:"add-liquidity-btn",onClick:l[1]||(l[1]=r=>o.walletStore.setIsShowWalletModal(!0))},{default:j(()=>[R("Connect Wallet")]),_:1})):N("",!0)])}const Do=q(yn,[["render",Sn],["__scopeId","data-v-130f9462"]]),Pn=E({components:{FarmsPositionItem:Fo},props:{currentTab:{type:String,default:""}},setup(o){const l=H({}),_=Z(),c=u(()=>_),f=so(),a=u(()=>f),i=u(()=>(console.log(a.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?c.value.address?a.value.myFarmsPoolList:[]:o.currentTab=="Ended"?a.value.farmsPoolList.filter(I=>I.status=="Ended"):a.value.farmsPoolList.filter(I=>I.status=="Live"))),r=I=>{l.value[I.clmm_pool_id]?l.value[I.clmm_pool_id]=!1:(l.value[I.clmm_pool_id]=!0,console.log("执行了吗"),f.getPositionByPool(c.value.address,I.clmm_pool_id,I.id))},g=u(()=>a.value.farmsPositionObj),p=u(()=>(console.log(a.value.farmsLoadingObj,"##farms.value.farmsLoadingObj"),a.value.farmsLoadingObj)),k=u(()=>a.value.farmsUserUsd),h=u(()=>(console.log(a.value.farmsRewardObj,"##farmsRewardObj"),a.value.farmsRewardObj)),$=u(()=>a.value.farmsPositionList),e=u(()=>a.value.farmsAllPositionLoading),d=fo(),M=_o(),W=co("Sui"),Q=uo("Sui"),{setIsShowSuccess:J,setIsShowRejected:D,setIsShowWaiting:O,setTransactionDesc:P,setTransactionTxid:A}=M,b=async I=>{console.log($.value,"farmsRewardObj###");const C=[];$.value.forEach(S=>{console.log(I,S,"#position"),I==S.clmm_pool_id&&C.push({pool_id:S.pool_id,position_nft_id:S.id})}),console.log(JSON.stringify(C),"##params"),A(""),P("Claim rewards"),O(!0);try{const S=await W.batchHarvest(C),x=await c.value.currentWallet.signAndExecuteTransactionBlock(S);console.log("0221###sui swap res###",x);let V=Q.handleTx(x);if(V&&V.hash){A(V.hash),O(!1),J(!0);let ro={res:V.res,title:"Claim",hash:V.hash};Q.showTransitionPending(ro),await Q.watchTransaction(ro)&&setTimeout(()=>{f.getFarmsPoolList()},4e3)}else O(!1),D(!0)}catch(S){console.log("Claim all error",S),O(!1),D(!0)}},w=u(()=>M),L=u(()=>w.value.addressLpTokens);return console.log(L.value,"addressLpTokens:"),{wallet:c,walletStore:_,farmsPoolList:i,openMore:r,openMoreObj:l,checkNullObj:oo,router:d,farmsPositionObj:g,farmsLoadingObj:p,farmsUserUsd:k,sFixD:U,farmsRewardObj:h,claimPoolReward:b,farmsAllPositionLoading:e,addCommom:F,addressLpTokens:L}}});const no=o=>(K("data-v-9ff4494b"),o=o(),X(),o),Tn={class:"farms-table"},Ln=no(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")])],-1)),Cn={key:0},jn=["onClick"],Un={class:"staked-tvl"},On={class:"apr"},Rn={key:0,class:"my-staked"},An={key:0,class:"my-staked-loading"},Fn={class:"position-usd"},Dn={key:0,class:"position-num"},Bn={key:1,class:"my-staked"},Nn=no(()=>s("div",{class:"position-usd"},"--",-1)),Mn=[Nn],En={class:"earned"},qn={key:0,class:"my-staked-loading"},Wn=no(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),Vn={key:0},Hn={key:1},Jn={key:2},zn={key:2},Qn={class:"actions"},Gn={class:"actions-btn"},Kn=["onClick"],Xn=no(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Yn=[Xn],Zn={colspan:"7",style:{padding:"0 16px 16px"}},xn={key:0,class:"farm-position-list"},oe={key:0,class:"farm-position-loading"},se={key:1,class:"farm-position-list"},ne=no(()=>s("tr",{style:{height:"8px"}},null,-1)),ee={key:1},te={colspan:"7"},ae={key:0,class:"no-data"},ie=no(()=>s("img",{src:To,alt:""},null,-1)),le={key:1,class:"no-data"},re=no(()=>s("img",{src:Lo,alt:""},null,-1)),de=no(()=>s("span",null,"No farms found",-1)),ce=[re,de];function ue(o,l,_,c,f,a){const i=Uo,r=Oo,g=yo,p=lo,k=qo,h=Fo,$=Do;return n(),t("div",Tn,[s("table",null,[Ln,o.farmsPoolList.length>0?(n(),t("tbody",Cn,[(n(!0),t(B,null,G(o.farmsPoolList,e=>(n(),t(B,{key:e.id},[s("tr",{onClick:d=>o.openMore(e)},[s("td",null,[y(i,{"pool-info":e},null,8,["pool-info"])]),s("td",null,[s("div",Un,"$"+m(("addCommom"in o?o.addCommom:v(F))(o.addressLpTokens&&o.addressLpTokens[e.clmm_pool_id]&&o.addressLpTokens[e.clmm_pool_id].stable_farming&&o.addressLpTokens[e.clmm_pool_id].stable_farming.tvl,2)),1)]),s("td",null,[s("div",On,[s("span",null,m(("sFixD"in o?o.sFixD:v(U))(o.addressLpTokens&&o.addressLpTokens[e.clmm_pool_id]&&o.addressLpTokens[e.clmm_pool_id].stable_farming&&o.addressLpTokens[e.clmm_pool_id].stable_farming.apr*100,2))+"%",1)])]),s("td",null,[(n(!0),t(B,null,G(e.rewarders,d=>(n(),T(r,{key:d.reward_coin,"reward-info":d,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))]),s("td",null,[o.wallet.address?(n(),t("div",Rn,[o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",An,[y(g,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),t(B,{key:1},[s("div",Fn," $"+m(("sFixD"in o?o.sFixD:v(U))(o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].positionNum?(n(),t("div",Dn,m(o.farmsUserUsd[e.clmm_pool_id].positionNum)+" "+m(o.farmsUserUsd[e.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):N("",!0)],64))])):(n(),t("div",Bn,Mn))]),s("td",null,[s("div",En,[o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",qn,[y(g,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[e.clmm_pool_id]&&o.farmsRewardObj[e.clmm_pool_id].amountUsd?(n(),t(B,{key:1},[Wn,o.farmsRewardObj[e.clmm_pool_id].amountUsd>.01?(n(),t("span",Vn,"$"+m(("addCommom"in o?o.addCommom:v(F))(("sFixD"in o?o.sFixD:v(U))(o.farmsRewardObj[e.clmm_pool_id].amountUsd||0,2))),1)):o.farmsRewardObj[e.clmm_pool_id].amountUsd>0&&o.farmsRewardObj[e.clmm_pool_id].amountUsd<.01?(n(),t("span",Hn,"$<0.01")):(n(),t("span",Jn,"0"))],64)):(n(),t("span",zn,"--"))])]),s("td",null,[s("div",Qn,[s("div",Gn,[y(p,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[e.clmm_pool_id]||o.farmsRewardObj[e.clmm_pool_id].amountUsd<=0,onClick:ao(d=>o.claimPoolReward(e.clmm_pool_id),["stop"])},{default:j(()=>[R("Claim")]),_:2},1032,["disabled","onClick"]),y(p,{class:"add-liquidity-btn",onClick:ao(d=>o.router.push(`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`),["stop"])},{default:j(()=>[R("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more",onClick:ao(d=>o.openMore(e),["stop"])},[(n(),t("svg",{class:io(["arrow-icon",o.openMoreObj[e.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},Yn,2))],8,Kn)])])],8,jn),Y(s("tr",null,[s("td",Zn,[o.wallet.address?(n(),t("div",xn,[!("checkNullObj"in o?o.checkNullObj:v(oo))(o.farmsLoadingObj)&&(o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading)?(n(),t("div",oe,[y(k)])):o.farmsPositionObj[e.clmm_pool_id]&&o.farmsPositionObj[e.clmm_pool_id].length>0?(n(!0),t(B,{key:1},G(o.farmsPositionObj[e.clmm_pool_id],d=>(n(),T(h,{key:d.clmm_pool_id,"current-tab":o.currentTab,"position-info":{...d,clmm_pool_id:e.clmm_pool_id}},null,8,["current-tab","position-info"]))),128)):(n(),T($,{key:2,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`},null,8,["add-liquidity-url"]))])):(n(),t("div",se,[y($,{"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"})]))])],512),[[Po,!("checkNullObj"in o?o.checkNullObj:v(oo))(o.openMoreObj)&&o.openMoreObj[e==null?void 0:e.clmm_pool_id]]]),ne],64))),128))])):(n(),t("tbody",ee,[s("tr",null,[s("td",te,[!o.wallet.connected&&o.currentTab=="My Farms"?(n(),t("div",ae,[ie,y(p,{class:"connect-wallet",onClick:l[0]||(l[0]=e=>o.wallet.setIsShowWalletModal(!0))},{default:j(()=>[R(m(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(n(),t("div",le,ce)):N("",!0)])])]))])])}const Bo=q(Pn,[["render",ue],["__scopeId","data-v-9ff4494b"]]),me=E({props:{currentTab:{type:String,default:""}},setup(){const o=H(!1),l=Z(),_=u(()=>l),c=so(),f=u(()=>c),a=u(()=>f.value.farmsPoolList);return{isShowMore:o,wallet:_,walletStore:l,farmsPoolList:a}}});const pe=o=>(K("data-v-6ff18114"),o=o(),X(),o),_e={class:"farms-table"},fe=pe(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")])],-1)),he={class:"pool"},ve={class:"staked-tvl"},ge={class:"apr"},$e={class:"rewards-day"},be={class:"my-staked"},ye={class:"earned"},ke={class:"actions"};function we(o,l,_,c,f,a){const i=yo;return n(),t("div",_e,[s("table",null,[fe,s("tbody",null,[(n(),t(B,null,G(4,(r,g)=>s("tr",{key:g},[s("td",null,[s("div",he,[y(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),y(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",ve,[y(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",ge,[s("span",null,[y(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),s("td",null,[s("div",$e,[y(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",be,[y(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",ye,[y(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",ke,[y(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])])),64))])])])}const Ie=q(me,[["render",we],["__scopeId","data-v-6ff18114"]]),Se=E({props:{positionStatus:{type:String,default:"Active"},positionInfo:{type:Object,default:()=>({})}},setup(){return{}}});const Pe=o=>(K("data-v-882c76c0"),o=o(),X(),o),Te={class:"position-info"},Le={key:0,class:"status-bg"},Ce=Pe(()=>s("img",{src:Ao,alt:""},null,-1)),je=[Ce],Ue={class:"status-text"},Oe={class:"name-range"};function Re(o,l,_,c,f,a){const i=wo;return n(),t("div",Te,[s("div",{class:io(["position-status",o.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionStatus=="Active"?(n(),t("div",Le,je)):N("",!0),s("div",Ue,m(o.positionStatus),1)],2),s("div",Oe,[s("span",null,m(o.positionInfo.name),1),o.positionStatus=="Active"?(n(),T(i,{key:0,"pool-info":o.positionInfo},null,8,["pool-info"])):N("",!0)])])}const Ae=q(Se,[["render",Re],["__scopeId","data-v-882c76c0"]]),Fe=E({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const l=mo(),_=u(()=>l),c=fo(),f=O=>{var P;return((P=_.value.tokensObj[O])==null?void 0:P.logo_url)||ho("/image/coins/sui-unknown.png")},a=uo("Sui"),i=co("Sui"),r=H(!1),g=_o(),p=Z(),k=so(),h=u(()=>p),{setIsShowSuccess:$,setIsShowRejected:e,setIsShowWaiting:d,setTransactionDesc:M,setTransactionTxid:W}=g;return{getCoinIcon:f,router:c,claim:async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,W(""),M("Claim rewards"),d(!0);const O={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const P=await i.harvestFarms(O),A=await h.value.currentWallet.signAndExecuteTransactionBlock(P);console.log("0221###sui swap res###",A);let b=a.handleTx(A);if(b&&b.hash){W(b.hash),d(!1),$(!0);let w={title:"Claim",res:b.res,hash:b.hash};a.showTransitionPending(w),await a.watchTransaction(w)&&setTimeout(()=>{k.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else d(!1),e(!0);r.value=!1}catch(P){console.log("farmsDeposit error",P),d(!1),e(!0),r.value=!1}},unStake:async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,W(""),M(`Unstake ${o.positionInfo.name}`),d(!0);const O=o.positionInfo.farmsPoolId,P=o.positionInfo.id;try{const A=await i.farmsWithdraw(O,P),b=await h.value.currentWallet.signAndExecuteTransactionBlock(A);console.log("0221###sui swap res###",b);let w=a.handleTx(b);if(w&&w.hash){W(w.hash),d(!1),$(!0);let L={res:w.res,title:"Unstaked",hash:w.hash};a.showTransitionPending(L),await a.watchTransaction(L)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),k.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),r.value=!1},2e3)}else d(!1),e(!0)}catch(A){console.log("farmsDeposit error",A),d(!1),e(!0),r.value=!1}},loading:r,stake:async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,W(""),M(`Stake ${o.positionInfo.name}`),d(!0);const O={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},P=o.positionInfo.farmsPoolId;try{const A=await i.farmsDeposit(O,P),b=await h.value.currentWallet.signAndExecuteTransactionBlock(A);console.log("0221###sui swap res###",b);let w=a.handleTx(b);if(w&&w.hash){W(w.hash),d(!1),$(!0);let L={res:w.res,title:"Staked",hash:w.hash};a.showTransitionPending(L),await a.watchTransaction(L)&&setTimeout(()=>{k.getPositionByPool(h.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),r.value=!1},2e3)}else d(!1),e(!0)}catch(A){console.log("farmsDeposit error",A),d(!1),e(!0),r.value=!1}}}}});const De=o=>(K("data-v-062a508d"),o=o(),X(),o),Be={class:"farms-position"},Ne={class:"farms-position-box"},Me=Wo('<div class="position-info-block" data-v-062a508d><div class="block-item" data-v-062a508d><div class="leabl" data-v-062a508d>Liquidity</div><div class="text" data-v-062a508d>~$33.57</div></div><div class="block-item" data-v-062a508d><div class="leabl" data-v-062a508d>Share</div><div class="text" data-v-062a508d>0.00007%</div></div></div>',1),Ee={class:"earnings"},qe={class:"block-item"},We=De(()=>s("div",{class:"leabl"},"Earnings",-1)),Ve={class:"text"},He={key:0},Je={alt:""},ze={key:1,class:"rewards-day"},Qe={class:"unstake-btn-box"};function Ge(o,l,_,c,f,a){const i=Ae,r=lo,g=po("image");return n(),t("div",Be,[s("div",Ne,[y(i,{"position-info":o.positionInfo},null,8,["position-info"])]),Me,s("div",Ee,[s("div",qe,[We,s("div",Ve,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),t(B,{key:0},G(o.positionInfo.rewards,p=>(n(),t("div",{key:p.rewarder_type,class:"rewards-day"},[p.rewarderAmount>0?(n(),t("div",He,[Y(s("img",Je,null,512),[[g,o.getCoinIcon(p.rewarder_type)]]),s("span",null,m(p.rewarderAmount),1)])):N("",!0)]))),128)):(n(),t("div",ze,"--"))])]),o.positionInfo.positionSource=="clmm"?(n(),T(r,{key:0,class:"add-liquidity-btn claim-btn",onClick:l[0]||(l[0]=p=>o.router.push(`/new-position-detail?collect=${o.positionInfo.collectionName}&&token=${o.positionInfo.tokenName}&&address=${o.positionInfo.pool}&pos=${o.positionInfo.pos_object_id}`))},{default:j(()=>[R("+ Add liquidity")]),_:1})):(n(),T(r,{key:1,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0,onClick:o.claim},{default:j(()=>[R("↑ Claim")]),_:1},8,["disabled","onClick"]))]),s("div",Qe,[s("div",null,[o.positionInfo.positionSource=="clmm"?(n(),T(r,{key:0,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:j(()=>[R("Stake")]),_:1},8,["loading","disabled","onClick"])):(n(),T(r,{key:1,class:"unstake-btn",onClick:o.unStake},{default:j(()=>[R("Unstake")]),_:1},8,["onClick"]))])])])}const No=q(Fe,[["render",Ge],["__scopeId","data-v-062a508d"]]),Ke=E({components:{FarmsH5Position:No},props:{currentTab:{type:String,default:""}},setup(o){const l=H(!1),_=Z(),c=u(()=>_),f=so(),a=u(()=>f),i=u(()=>(console.log(a.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?c.value.address?a.value.myFarmsPoolList:[]:o.currentTab=="Ended"?a.value.farmsPoolList.filter(S=>S.status=="Ended"):a.value.farmsPoolList.filter(S=>S.status=="Live"))),r=u(()=>a.value.farmsUserUsd),g=u(()=>(console.log(a.value.farmsRewardObj,"##farmsRewardObj"),a.value.farmsRewardObj)),p=u(()=>a.value.farmsPositionObj),k=u(()=>a.value.farmsPoolListLoading),h=u(()=>a.value.farmsPositionList),$=u(()=>(console.log(a.value.farmsLoadingObj,"##farms.value.farmsLoadingObj"),a.value.farmsLoadingObj)),e=u(()=>a.value.farmsAllPositionLoading),d=H({}),M=S=>{d.value[S.clmm_pool_id]?d.value[S.clmm_pool_id]=!1:(d.value[S.clmm_pool_id]=!0,console.log("执行了吗"),f.getPositionByPool(c.value.address,S.clmm_pool_id,S.id))},W=_o(),Q=co("Sui"),J=uo("Sui"),{setIsShowSuccess:D,setIsShowRejected:O,setIsShowWaiting:P,setTransactionDesc:A,setTransactionTxid:b}=W,w=async S=>{console.log(h.value,"farmsRewardObj###");const x=[];h.value.forEach(V=>{console.log(S,V,"#position"),S==V.clmm_pool_id&&x.push({pool_id:V.pool_id,position_nft_id:V.id})}),console.log(JSON.stringify(x),"##params"),b(""),A("Claim rewards"),P(!0);try{const V=await Q.batchHarvest(x),ro=await c.value.currentWallet.signAndExecuteTransactionBlock(V);console.log("0221###sui swap res###",ro);let to=J.handleTx(ro);if(to&&to.hash){b(to.hash),P(!1),D(!0);let Io={res:to.res,title:"Claim",hash:to.hash};J.showTransitionPending(Io),await J.watchTransaction(Io)&&setTimeout(()=>{f.getFarmsPoolList()},4e3)}else P(!1),O(!0)}catch(V){console.log("Claim all error",V),P(!1),O(!0)}},L=fo(),I=u(()=>W),C=u(()=>I.value.addressLpTokens);return{isShowMore:l,wallet:c,farmsPoolList:i,farmsUserUsd:r,sFixD:U,farmsRewardObj:g,farmsPositionObj:p,openMore:M,checkNullObj:oo,openMoreObj:d,farmsPoolListLoading:k,claimPoolReward:w,router:L,addCommom:F,farmsLoadingObj:$,farmsAllPositionLoading:e,addressLpTokens:C}}});const z=o=>(K("data-v-31b89283"),o=o(),X(),o),Xe={key:0,class:"farms-pool-list"},Ye={class:"farms-block"},Ze={class:"item-block"},xe=z(()=>s("div",{class:"leabl"},"Staked TVL",-1)),ot={class:"text"},st={class:"item-block apr"},nt=z(()=>s("div",{class:"leabl"},"APR",-1)),et={class:"text"},tt={class:"item-block"},at=z(()=>s("div",{class:"leabl"},"Rewards / day",-1)),it={class:"text"},lt={class:"item-block my-staked"},rt=z(()=>s("div",{class:"leabl"},"My Staked",-1)),dt={key:0,class:"text"},ct={class:"position-usd"},ut={key:0,class:"position-num"},mt={key:1,class:"text"},pt=z(()=>s("div",{class:"position-usd"},"--",-1)),_t=[pt],ft={class:"item-block"},ht=z(()=>s("div",{class:"leabl"},"Earned",-1)),vt={class:"text earned-box"},gt={class:"earned"},$t={key:0,class:"my-staked-loading"},bt=z(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),yt={key:0},kt={key:1},wt={key:2},It={key:2},St={class:"add-liquidity-box"},Pt=["onClick"],Tt=z(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Lt=[Tt],Ct={key:1,class:"upgrade-loading"},jt={key:2,class:"no-data"},Ut=z(()=>s("img",{src:To,alt:""},null,-1)),Ot={key:3,class:"no-data"},Rt=z(()=>s("img",{src:Lo,alt:""},null,-1)),At=z(()=>s("span",null,"No Data",-1)),Ft=[Rt,At];function Dt(o,l,_,c,f,a){const i=Uo,r=Oo,g=yo,p=lo,k=No,h=Do,$=Jo;return n(),t(B,null,[o.farmsPoolListLoading?o.farmsPoolListLoading?(n(),t("div",Ct,[y($,{type:"poolsCard",loading:!0})])):N("",!0):(n(),t("div",Xe,[(n(!0),t(B,null,G(o.farmsPoolList,e=>(n(),t("div",{key:e.id,class:"farms-item"},[y(i,{"pool-info":e},null,8,["pool-info"]),s("div",Ye,[s("div",Ze,[xe,s("div",ot,"$"+m(("addCommom"in o?o.addCommom:v(F))(o.addressLpTokens&&o.addressLpTokens[e.clmm_pool_id]&&o.addressLpTokens[e.clmm_pool_id].stable_farming&&o.addressLpTokens[e.clmm_pool_id].stable_farming.tvl,2)),1)]),s("div",st,[nt,s("div",et,m(("sFixD"in o?o.sFixD:v(U))(o.addressLpTokens&&o.addressLpTokens[e.clmm_pool_id]&&o.addressLpTokens[e.clmm_pool_id].stable_farming&&o.addressLpTokens[e.clmm_pool_id].stable_farming.apr*100,2))+"%",1)]),s("div",tt,[at,s("div",it,[(n(!0),t(B,null,G(e.rewarders,d=>(n(),T(r,{key:d.reward_coin,"reward-info":d,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("div",lt,[rt,o.wallet.address?(n(),t("div",dt,[s("div",ct," $"+m(("sFixD"in o?o.sFixD:v(U))(o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].positionNum?(n(),t("div",ut,m(o.farmsUserUsd[e.clmm_pool_id].positionNum)+" "+m(o.farmsUserUsd[e.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):N("",!0)])):(n(),t("div",mt,_t))]),s("div",ft,[ht,s("div",vt,[s("div",gt,[o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",$t,[y(g,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[e.clmm_pool_id]&&o.farmsRewardObj[e.clmm_pool_id].amountUsd?(n(),t(B,{key:1},[bt,o.farmsRewardObj[e.clmm_pool_id].amountUsd>.01?(n(),t("span",yt,"$"+m(("addCommom"in o?o.addCommom:v(F))(("sFixD"in o?o.sFixD:v(U))(o.farmsRewardObj[e.clmm_pool_id].amountUsd||0,2))),1)):o.farmsRewardObj[e.clmm_pool_id].amountUsd>0&&o.farmsRewardObj[e.clmm_pool_id].amountUsd<.01?(n(),t("span",kt,"$<0.01")):(n(),t("span",wt,"0"))],64)):(n(),t("span",It,"--"))]),y(p,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[e.clmm_pool_id]||o.farmsRewardObj[e.clmm_pool_id].amountUsd<=0,onClick:ao(d=>o.claimPoolReward(e.clmm_pool_id),["stop"])},{default:j(()=>[R("Claim")]),_:2},1032,["disabled","onClick"])])])]),s("div",St,[y(p,{class:"add-liquidity-btn",onClick:ao(d=>o.router.push(`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`),["stop"])},{default:j(()=>[R("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more-btn",onClick:d=>o.openMore(e)},[(n(),t("svg",{class:io(["arrow-icon",!("checkNullObj"in o?o.checkNullObj:v(oo))(o.openMoreObj)&&o.openMoreObj[e==null?void 0:e.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},Lt,2))],8,Pt),(n(!0),t(B,null,G(o.farmsPositionObj[e.clmm_pool_id],d=>Y((n(),T(k,{key:d.clmm_pool_id,"position-info":{...d,clmm_pool_id:e.clmm_pool_id}},null,8,["position-info"])),[[Po,!("checkNullObj"in o?o.checkNullObj:v(oo))(o.openMoreObj)&&o.openMoreObj[e==null?void 0:e.clmm_pool_id]]])),128)),o.farmsPositionObj&&o.farmsPositionObj[e.clmm_pool_id]&&o.farmsPositionObj[e.clmm_pool_id].length==0?(n(),T(h,{key:0,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`},null,8,["add-liquidity-url"])):N("",!0),o.wallet.address?N("",!0):(n(),T(h,{key:1,"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"},null,8,["no-data-img"]))]))),128))])),!o.wallet.connected&&o.currentTab=="My Farms"?(n(),t("div",jt,[Ut,y(p,{class:"connect-wallet",onClick:l[0]||(l[0]=e=>o.wallet.setIsShowWalletModal(!0))},{default:j(()=>[R(m(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(n(),t("div",Ot,Ft)):N("",!0)],64)}const Mo=q(Ke,[["render",Dt],["__scopeId","data-v-31b89283"]]),Bt=E({setup(o,l){const _=["Live","Ended","My Farms"],c=H("Live"),f=H("APR"),a=H(!1),i=so(),r=u(()=>i),g=Z(),p=u(()=>g),k=u(()=>c.value=="My Farms"?p.value.address?r.value.myFarmsPoolList:[]:c.value=="Ended"?r.value.farmsPoolList.filter(d=>d.status=="Ended"):r.value.farmsPoolList.filter(d=>d.status=="Live"));return{tabList:_,currentTab:c,sortValue:f,clickRefresh:()=>{a.value=!0,i.getFarmsPoolList(),setTimeout(()=>{a.value=!1},1e3)},isRefresh:a,farmsPoolList:k,getListNum:d=>k.value.length,changeTab:d=>{c.value=d,l.emit("changeTab",d)}}}});const $o=o=>(K("data-v-03cfc602"),o=o(),X(),o),Nt={class:"farms-tab"},Mt={class:"tab-left"},Et=["onClick"],qt={key:0},Wt={class:"tab-right"},Vt={class:"sort-select"},Ht={class:"sort-select-box"},Jt=$o(()=>s("div",null,"Sort by",-1)),zt=$o(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),Qt=$o(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),Gt={class:"sort-list"},Kt={class:"refresh"},Xt=$o(()=>s("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),Yt=[Xt];function Zt(o,l,_,c,f,a){return n(),t("div",Nt,[s("div",Mt,[(n(!0),t(B,null,G(o.tabList,i=>(n(),t("div",{key:i,class:io(["tab-item",o.currentTab==i?"tab-item-active":""]),onClick:r=>o.changeTab(i)},[s("span",null,m(i=="Ended"?"Finished":i),1),o.currentTab==i&&o.getListNum(i)?(n(),t("p",qt,m(o.getListNum(i)),1)):N("",!0)],10,Et))),128))]),s("div",Wt,[s("div",Vt,[s("div",Ht,[Jt,s("div",null,[s("span",null,m(o.sortValue),1),zt,Qt])]),s("div",Gt,[s("div",{class:"sort-item",onClick:l[0]||(l[0]=i=>o.sortValue="APR")},"APR"),s("div",{class:"sort-item",onClick:l[1]||(l[1]=i=>o.sortValue="TVL")},"TVL")])]),s("div",Kt,[(n(),t("svg",{"aria-hidden":"true",class:io(["refresh-icon",o.isRefresh?"refreshing":""]),onClick:l[2]||(l[2]=(...i)=>o.clickRefresh&&o.clickRefresh(...i))},Yt,2))])])])}const xt=q(Bt,[["render",Zt],["__scopeId","data-v-03cfc602"]]),oa=E({components:{FarmsBanner:Co,FarmsTabs:xt,FarmsTable:Bo,FarmsH5List:Mo},setup(){const o=so(),l=u(()=>o),_=u(()=>l.value.farmsPoolListLoading),c=u(()=>l.value.farmsPoolList),f=Z(),a=u(()=>f),i=mo(),r=u(()=>i);So(()=>[a.value.address,c.value,r.value.tokensObj,r.value.RATES],([p,k,h,$])=>{p&&k.length>0&&!oo(h)&&!oo($)&&o.getPositionByAllPool(p)},{immediate:!0}),Vo(()=>{o.getFarmsPoolList()}),So(()=>a.value.address,p=>{p||o.logOut()},{immediate:!0});const g=H("Live");return{farmsPoolListLoading:_,currentTab:g}}});const sa={class:"farm-container"},na={class:"farm-container-center"};function ea(o,l,_,c,f,a){const i=Co,r=Ho("FarmsTabs"),g=Bo,p=Ie,k=Mo;return n(),t("div",sa,[y(i),s("div",na,[y(r,{onChangeTab:l[0]||(l[0]=h=>{o.currentTab=h})}),o.farmsPoolListLoading?(n(),T(p,{key:1,"current-tab":o.currentTab},null,8,["current-tab"])):(n(),T(g,{key:0,"current-tab":o.currentTab},null,8,["current-tab"])),y(k,{"current-tab":o.currentTab},null,8,["current-tab"])])])}const $a=q(oa,[["render",ea],["__scopeId","data-v-ae3e898e"]]);export{$a as default};
