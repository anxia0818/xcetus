import{_ as oe}from"./token-warning.67cfe0a7.js";import{a as K,i as ne,u as se,h as B,D as pe,f as be,b as ve,p as _e}from"./pool.98fa8225.js";import{a as te,l as ae,m as b,a1 as he,a2 as le,A as E,e as ie,o as a,f as i,h as t,c as T,t as c,x as Z,i as I,w as f,s as O,j as z,u as w,I as fe,J as de,a9 as ke,S as ge,B as ye,p as re,k as ue,M as $e,r as A,v as we,aa as Ce,K as H,E as Se,a3 as Le,F as x,q as ee,D as Te,ab as Ie}from"./entry.0db31a46.js";/* empty css              *//* empty css              *//* empty css              */import{i as C}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as Oe,a as je}from"./img-no-Positions_2x.035883e0.js";const Ne=te({components:{TokenWarning:oe},props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,d){const{t:l,locale:q}=ae(),M=K(),_=b(()=>M),k=b(()=>new pe(Number(e.balance)).div(2)),m=he(le,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function S(){this.$emit("onSelect")}const g=n=>{const v=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(h==null?void 0:h.value)&&(h==null?void 0:h.value)}})?).*$`);n.target.value=n.target.value.replace(v,"$1")},L=ne(),p=b(()=>L),s=se(),r=b(()=>s);let y={};E(()=>r.value.RATES,n=>{n&&(y=n)},{immediate:!0});const P=b(()=>be(Number(e.inputValue)*Number(y&&y[e.address]&&y[e.address].price),2)),j=b(()=>{var n,v;return r.value.tokensObj&&e.address&&r.value.tokensObj[e.address]&&((n=r.value.tokensObj[e.address])==null?void 0:n.labels)&&((v=r.value.tokensObj[e.address])==null?void 0:v.labels[0])}),h=b(()=>{var n;return r.value.tokensObj&&e.address&&r.value.tokensObj[e.address]&&((n=r.value.tokensObj[e.address])==null?void 0:n.decimals)}),R=b(()=>{var n,v;return e.coinIcon||((v=(n=r==null?void 0:r.value)==null?void 0:n.tokensObj[e.address])==null?void 0:v.logo_url)||(_.value.theme==="default"?C("/image/coins/unknown.png"):C("/image/coins/sui-unknown.png"))}),U=b(()=>r.value.tokensObj);return{currentIcon:R,tokensObj:U,pool:r,halfBalance:k,coinLabels:j,t:l,addCommom:B,store:_,wallet:p,indicator:m,inputChange:g,importIcon:C,selectCoin:S,amountPirce:P,coinDecimals:h}}});const Ae=e=>(re("data-v-380babac"),e=e(),ue(),e),Be={class:"card"},De={class:"top"},Me={key:1,class:"input-div"},Pe={key:0},Re={class:"loading-token"},Ve=["src"],Fe={key:0},ze=Ae(()=>t("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ee=[ze],Ze={class:"bottom"},qe={key:0,class:"amount-price"},Ue={key:1},We={class:"top"},He={class:"right"},Ke={class:"balance"};function Je(e,d,l,q,M,_){const k=fe,m=de,S=ke,g=oe,L=ge,p=ye;return a(),i("div",Be,[t("div",De,[e.inputDisabled?(a(),i("div",Me,[e.inputValue?(a(),i("span",Pe,c(e.inputValue),1)):(a(),T(m,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(a(),T(k,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:d[0]||(d[0]=s=>e.$emit("onInput",s.target.value)),onFocus:d[1]||(d[1]=s=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),t("div",{class:Z(["left",e.hasArrow?"":"nohands"]),onClick:d[2]||(d[2]=s=>e.hasArrow&&!e.pool.isTokenLoading?e.selectCoin():"")},[t("div",Re,[e.pool.isTokenLoading?(a(),T(S,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):(a(),i("img",{key:1,src:e.currentIcon},null,8,Ve)),I(g,{address:e.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),I(L,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:f(()=>[t("div",null,[t("p",null,c(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(a(),i("p",Fe,c(e.coinLabels),1)):O("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(a(),i("svg",{key:0,class:Z(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},Ee,2)):O("",!0)],2)]),t("div",Ze,[e.inputValue&&e.amountPirce!="--"?(a(),i("div",qe," $"+c(e.amountPirce),1)):(a(),i("div",Ue)),t("div",We,[t("div",He,[z(c(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),t("span",Ke,c(e.wallet.connected?("addCommom"in e?e.addCommom:w(B))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(a(),T(p,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:w(B))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:d[3]||(d[3]=s=>e.$emit("onHalf"))},{default:f(()=>[z(c("Half"))]),_:1},8,["disabled"])):O("",!0),e.havemax&&e.wallet.connected?(a(),T(p,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:w(B))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:d[4]||(d[4]=s=>e.$emit("onMax"))},{default:f(()=>[z(c(e.$t("button.max")),1)]),_:1},8,["disabled"])):O("",!0)])])])])}const Vo=ie(Ne,[["render",Je],["__scopeId","data-v-380babac"]]);const Ge=te({components:{Modal:$e,LoadingOutlined:le},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""}},setup(e,d){const{t:l,locale:q}=ae(),M=ne(),_=b(()=>M),k=se(),m=b(()=>k),S=K(),g=b(()=>S),L=A([l("tab.all"),l("tab.native"),l("tab.layerZero"),l("tab.wormhole"),l("tab.celer")]),p=A(l("tab.all")),s=A(l("tab.all")),r=K(),y=b(()=>r.chainName),P=A([]),j=A(null);we(()=>{});const h=A(!1);E(p,n=>{n!==l("tab.all")&&(h.value=!1),n==l("tab.all")?s.value=l("tab.all"):n==l("tab.layerZero")?s.value=l("tab.layerZero"):n==l("tab.wormhole")?s.value=l("tab.wormhole"):n==l("tab.celer")?s.value=l("tab.celer"):n==l("tab.native")&&(s.value=l("tab.native")),R(j.value)});const R=async n=>{var J,G,Q,X,Y;let v=[],N=m.value.tokens;if(!(g.value.chainName&&N&&N[0]&&g.value.chainName.toLowerCase().includes((J=N[0])==null?void 0:J.chain))){P.value=[];return}let W=N;if(n&&n.split("::")&&n.split("::").length==3&&y.value=="Sui"){const u=ve("Sui");try{const o=m.value.tokensObj[n]||await u.getTokenBySymbol(m.value.tokens,n);o&&((G=N.filter($=>($==null?void 0:$.address)===(o==null?void 0:o.address)))==null?void 0:G.length)<1&&(k.setNewTokens({[n]:o}),W=N.concat(o))}catch{}}for(const u of Object.keys(W)){let o=Ce(W[u]);const $=_.value.assets[o.address]&&_.value.assets[o.address].balance?_e(_.value.assets&&_.value.assets[o.address].balance,o.decimals):0;e.lastSelectCoin&&o&&o.address===e.lastSelectCoin?o.unusable=!0:o.unusable=!1;const ce=((Q=m.value.tokensObj[o.address])==null?void 0:Q.labels)&&((X=m.value.tokensObj[o.address])==null?void 0:X.labels[0]),me=m.value.tokensObj[o.address]?(Y=m.value.tokensObj[o.address])==null?void 0:Y.name:o.name;o={...o,balance:$,labels:ce,name:me,sort:o.symbol=="APT"||o.symbol=="SUI"?1:-1},v.push(o)}let V;_.value.address?V=v.sort((u,o)=>o.coin_priority>u.coin_priority?1:-1).sort((u,o)=>o.balance-u.balance):V=v.sort((u,o)=>o.coin_priority>u.coin_priority?1:-1);let F=[];if(n){const u=V.filter(o=>o.symbol.toLowerCase().indexOf(n.toLowerCase())!==-1||o.address.toLowerCase().indexOf(n.toLowerCase())!==-1);p.value!==l("tab.all")?F=u.filter($=>p.value==l("tab.native")?!$.labels:$.labels&&$.labels.toLowerCase()==p.value.toLowerCase()):F=u}else p.value!==l("tab.all")?F=V.filter(o=>p.value==l("tab.native")?!o.labels:o.labels&&o.labels.toLowerCase()==p.value.toLowerCase()):F=V;P.value=F.sort((u,o)=>o.sort-u.sort).sort((u,o)=>o.unusable-u.unusable)},U=n=>{d.emit("onSelect",n),d.emit("onClose")};return E(()=>[j.value,h.value],([n,v])=>{R(n)},{immediate:!0}),E(()=>m.value.tokens,n=>{n&&R(j.value)},{immediate:!0}),{pools:m,t:l,chainName:y,tabList:L,currentTab:p,addCommom:B,tokenList:P,importIcon:C,keyword:j,wallet:_,toSelect:U,store:g,isShowAll:h}}}),Qe=""+globalThis.__publicAssetsURL("image/warning@2x.png");const D=e=>(re("data-v-20cbdee5"),e=e(),ue(),e),Xe=D(()=>t("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ye={class:"coin-select-modal"},xe={class:"search-input"},eo=["placeholder"],oo=D(()=>t("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),no=[oo],so={key:0,class:"tab-list"},to=["onClick"],ao={class:"item"},lo=D(()=>t("div",{class:"line"},null,-1)),io={class:"coin-list-box"},ro={key:0,class:"coin-list"},uo=["onClick"],co={class:"left"},mo=["src"],po=["src"],bo={class:"name-box"},vo=D(()=>t("img",{src:Qe,alt:""},null,-1)),_o={class:"balance-box"},ho={class:"balance"},fo={key:0},ko={key:1},go={key:2},yo=D(()=>t("p",null,null,-1)),$o={key:1,class:"no-data"},wo={key:0,class:"token-loading"},Co={key:1,class:"no-data-content"},So={key:0,src:Oe},Lo={key:1,src:je},To=D(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-information"})],-1));function Io(e,d,l,q,M,_){const k=Te,m=H("loading-outlined"),S=Ie,g=de,L=H("vue-scroll"),p=H("Modal");return a(),T(p,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:d[2]||(d[2]=s=>e.$emit("onClose"))},{closeIcon:f(()=>[Xe]),default:f(()=>[t("div",Ye,[t("div",xe,[Se(t("input",{"onUpdate:modelValue":d[0]||(d[0]=s=>e.keyword=s),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,eo),[[Le,e.keyword]]),e.keyword?(a(),i("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:d[1]||(d[1]=s=>e.keyword="")},no)):O("",!0)]),e.chainName!=="Sui"?(a(),i("div",so,[(a(!0),i(x,null,ee(e.tabList,(s,r)=>(a(),i("div",{key:r,class:Z(["item-container",e.currentTab==s?"item-container-active item-container":"item-container"]),onClick:y=>e.currentTab=s},[t("div",ao,c(s),1)],10,to))),128))])):O("",!0),lo,t("div",io,[I(L,null,{default:f(()=>[e.tokenList&&e.tokenList.length>0?(a(),i("ul",ro,[(a(!0),i(x,null,ee(e.tokenList,(s,r)=>(a(),i("li",{key:r,class:Z(s.unusable?"unusable":""),onClick:y=>e.toSelect(s)},[t("div",co,[s.isChinaToken?(a(),i("img",{key:1,src:e.store.theme=="default"?("importIcon"in e?e.importIcon:w(C))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:w(C))("/image/coins/sui-unknown.png"),alt:""},null,8,po)):(a(),i("img",{key:0,src:s.icon||s.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:w(C))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:w(C))("/image/coins/sui-unknown.png"))},null,8,mo)),t("div",bo,[t("span",null,[z(c(s.symbol)+" ",1),s.isSelfBuilt?(a(),T(k,{key:0,placement:"right","arrow-point-at-center":""},{title:f(()=>[t("span",null,c(e.t("newAdd.notCetusTokenList")),1)]),default:f(()=>[vo]),_:1})):O("",!0)]),t("p",null,c(s.name)+" "+c(s.labels?`(${s.labels})`:""),1)])]),t("div",_o,[t("div",ho,[e.wallet.loading?(a(),i("div",fo,[I(S,null,{default:f(()=>[I(m)]),_:1})])):s.balance&&e.wallet.connected?(a(),i("div",ko,c(("addCommom"in e?e.addCommom:w(B))(s.balance,s.decimals)),1)):(a(),i("div",go,"0"))]),yo])],10,uo))),128))])):(a(),i("div",$o,[e.pools.isTokenLoading?(a(),i("div",wo,[I(g)])):(a(),i("div",Co,[e.store.theme=="default"?(a(),i("img",So)):(a(),i("img",Lo)),t("p",null,c(e.t("newAdd.noTokensFound")),1),t("div",null,[z(c(e.t("newAdd.enterCoinType"))+" ",1),I(k,{placement:"bottom","arrow-point-at-center":""},{title:f(()=>[t("span",null,c(e.t("newAdd.uniqueIdOfCoin")),1)]),default:f(()=>[To]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const Fo=ie(Ge,[["render",Io],["__scopeId","data-v-20cbdee5"]]);export{Vo as _,Fo as a};
