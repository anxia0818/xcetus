import{_ as wa}from"./back.620c946a.js";import{_ as Ca,a as _a}from"./token-warning-modal.da85a98d.js";import{_ as $a,a as Pa}from"./network-tips.660f5e9a.js";import{u as en,a as vt,c as $t,D,b as Ko,f as Vn,d as Fe,e as _t,g as Be,h as fn,n as Lo,t as Po,_ as Wn,i as qo,j as Ia,s as jn,p as qi,k as Aa}from"./pool.582e2795.js";import{a as ct,r as L,v as uo,z as Sa,m as te,A as Ce,b as Yo,e as dt,o as b,f as I,h as d,t as C,c as be,s as O,x as Ne,p as jt,k as Dt,C as co,j as He,i as ke,w as Ie,u as ye,F as Ft,D as br,I as kr,S as wr,B as fo,E as Ta,G as Na,H as Ui,q as wn,J as Cr,M as Go,K as Qo,l as _r}from"./entry.61eead50.js";import{i as ze}from"./import-icon.de3e6c66.js";import{_ as Ma,a as Ra}from"./coin-select.816cf231.js";import{_ as $r,a as Pr,b as La}from"./add-liquidity.86ec3032.js";/* empty css              *//* empty css              *//* empty css              */import{_ as qa}from"./apr-tab.44ffb972.js";import{_ as Ua}from"./apr-tips.0acc9a0e.js";/* empty css              */import{p as Oa}from"./precision.a7a6c57b.js";import{_ as Ba}from"./status-block.84a5d31b.js";import{_ as Jo}from"./icon-arrow_2x.948aedb2.js";import{_ as Zo}from"./icon-arrow_2x.4ffddb8e.js";import{_ as Ir}from"./coin-pair-name.a90f4c39.js";import{u as Fa}from"./notifi.2b0cf348.js";/* empty css              */import"./icon-selected_3x.350736e2.js";import"./token-warning.6f857edc.js";import"./img-no-Positions_2x.14abf3ef.js";import"./c-switch.e73d4029.js";import"./index.27af1500.js";const Ea=ct({props:{poolInfo:{type:Object,default:()=>({})}},setup(e,t){const n=L(!1),o=L(null),i=L(0),r=L(20),a=en(),s=vt(),l=L(!1);uo(()=>{}),Sa(()=>{clearInterval(o.value)});const u=()=>{o.value=setInterval(()=>{var A;l.value||i.value<r.value&&(i.value+=1,i.value===r.value&&((A=e==null?void 0:e.poolInfo)!=null&&A.poolAddress&&a.updateCurrentPools(e.poolInfo.poolAddress,s.chainName),i.value=0))},1e3)},f=te(()=>s.slippage),h=()=>{t.emit("clearAll")},v=()=>{i.value=0,t.emit("clickRefresh")};Ce(()=>e.poolInfo,A=>{A&&!o.value&&u()},{immediate:!0});const _=Yo();return{clickRefresh:v,isShowSwapSetting:n,countdown:i,autoRefreshTime:r,slippage:f,clearAll:h,checkNullObj:$t,router:_}}});const ja=e=>(jt("data-v-489002ff"),e=e(),Dt(),e),Da={class:"title"},Ha={class:"left"},Xa=ja(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-a-icon-setslippage"})],-1)),za={class:"deposit-progress"};function Va(e,t,n,o,i,r){var l,u;const a=Ca,s=$a;return b(),I("div",Da,[d("div",Ha,[d("span",null,C(e.poolInfo?e.$t("common.concentratedLiquidity"):(u=(l=e.$route)==null?void 0:l.query)!=null&&u.action?e.$t("newAdd.createClmmPool"):e.$t("common.concentratedLiquidity")),1)]),d("div",{class:Ne(["right title-right deposit-setting",e.poolInfo?"havePoolInfo":"noPoolInfo"])},[d("div",{class:"slippage-icon",onClick:t[0]||(t[0]=f=>e.isShowSwapSetting=!0)},[Xa,d("span",null,C(e.slippage)+"%",1)]),d("div",za,[e.poolInfo?(b(),be(a,{key:0,loading:e.refresh,"auto-refresh-time":e.autoRefreshTime,countdown:e.countdown,onClickRefresh:e.clickRefresh},null,8,["loading","auto-refresh-time","countdown","onClickRefresh"])):O("",!0)])],2),e.isShowSwapSetting?(b(),be(s,{key:0,onOnClose:t[1]||(t[1]=f=>e.isShowSwapSetting=!1)})):O("",!0)])}const Wa=dt(Ea,[["render",Va],["__scopeId","data-v-489002ff"]]);const Ka=ct({props:{coinIcon:{type:String,default:""},coin:{type:Object,default:()=>({})}},setup(e){const t=vt(),n=te(()=>t),o=L(""),i=L(""),r=L(""),a=en(),s=te(()=>a);Ce(()=>[e.coin,s.value.tokensObj],([u,f])=>{var h;u?(i.value=f&&f[u.address]&&((h=f[u.address])==null?void 0:h.labels),o.value=u.name,r.value=u.symbol):(i.value="",o.value="",r.value="")},{immediate:!0,deep:!0});const l=te(()=>{var u,f,h;return e.coinIcon||((h=(f=s==null?void 0:s.value)==null?void 0:f.tokensObj[(u=e.coin)==null?void 0:u.address])==null?void 0:h.logo_url)||(n.value.theme==="default"?ze("/image/coins/unknown.png"):ze("/image/coins/sui-unknown.png"))});return{store:n,importIcon:ze,coinName:o,coinLabels:i,coinSymbol:r,currentIcon:l}}}),Ya=e=>(jt("data-v-2ae0911a"),e=e(),Dt(),e),Ga={class:"coin-block"},Qa=["src"],Ja={class:"coin-info"},Za={class:"symbol"},xa={key:0,class:"name"},es=Ya(()=>d("div",null,[d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-icon_on"})])],-1));function ts(e,t,n,o,i,r){return b(),I("div",Ga,[d("div",null,[d("img",{src:e.currentIcon},null,8,Qa),d("div",Ja,[d("div",Za,C(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinName?(b(),I("div",xa,C(e.coin.name)+" "+C(e.coinLabels?`(${e.coinLabels})`:""),1)):O("",!0)])]),es])}const ns=dt(Ka,[["render",ts],["__scopeId","data-v-2ae0911a"]]),os=ct({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})}},setup(){const e=vt();return{storeIndex:te(()=>e)}}});const is={class:"unilateral"},rs={key:0,src:$r,alt:""},as={key:1,src:Pr,alt:""},ss={key:2};function ls(e,t,n,o,i,r){return b(),I("div",is,[d("div",null,[e.storeIndex.theme=="default"?(b(),I("img",rs)):(b(),I("img",as)),e.fromCoin&&e.toCoin&&e.poolInfo?(b(),I("p",ss,C(e.$t("tips.marketprice")),1)):O("",!0)])])}const us=dt(os,[["render",ls],["__scopeId","data-v-d81a96c0"]]),cs=ct({props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},poolInfo:{type:Object,default:()=>({})},showfromCoinLock:{type:Boolean,default:!1},showtoCoinLock:{type:Boolean,default:!1}},setup(){const e=vt();return{storeIndex:te(()=>e)}}});const ds={class:"create-pool-lock"},fs={key:0,src:$r,alt:""},ms={key:1,src:Pr,alt:""};function ps(e,t,n,o,i,r){return b(),I("div",ds,[d("div",null,[e.storeIndex.theme=="default"?(b(),I("img",fs)):(b(),I("img",ms))])])}const vs=dt(cs,[["render",ps],["__scopeId","data-v-5d070e17"]]);D.config({precision:64,rounding:D.ROUND_DOWN,toExpNeg:-64,toExpPos:64});const hs=ct({props:{minPrice:{type:String,default:""},maxPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fixedFromCoin:{type:Boolean,default:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},slippage:{type:Number,default:0},currentPrice:{type:Number,default:0},currentPriceReverse:{type:Number,default:0},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""}},setup(e){const t=L(""),n=L(""),o=vt(),i=te(()=>o),r=en(),a=te(()=>r),s=te(()=>i.value.chainName?Ko(i.value.chainName):{});console.log(e,"props====>");const l=co(),u=async()=>{var oe;if(!e.minPrice&&!e.maxPrice)return;const{TickUtil:v,TickMath:_,getNearestTickByTick:A}=s.value,ue=e.poolInfo.token_a.decimals,g=e.poolInfo.token_b.decimals;let N,P,y,m,w,B,K,J=1,fe=1;const ne=e.poolInfo.current_tick_index;let T=a.value.poolPriceConfigObj&&a.value.poolPriceConfigObj[e.poolInfo.address]&&a.value.poolPriceConfigObj[e.poolInfo.address].recommend_ranges||{};if(e.poolInfo.token_a.address.toLowerCase()===e.fromCoin.address.toLowerCase()&&e.poolInfo.token_b.address.toLowerCase()===e.toCoin.address.toLowerCase()?K=!0:K=!1,e.minPrice==="0"&&e.maxPrice==="∞"?(y=v.getMinIndex(e.poolInfo.tickSpacing),m=v.getMaxIndex(e.poolInfo.tickSpacing),_.tickIndexToSqrtPriceX64(y),_.tickIndexToSqrtPriceX64(m)):e.currentPriceTab=="custom"||(oe=l==null?void 0:l.query)!=null&&oe.action?(K?(N=Number(e.minPrice),P=Number(e.maxPrice)):(N=1/Number(e.maxPrice),P=1/Number(e.minPrice)),console.log(N,"min===>"),w=_.priceToTickIndex(new D(N),ue,g),B=_.priceToTickIndex(new D(P),ue,g),N==0&&(w=-443636),console.log(w,"===>minTick"),console.log(e.poolInfo.tickSpacing,"===>props.poolInfo.tickSpacing"),y=A(w,Number(e.poolInfo.tickSpacing)),m=A(B,Number(e.poolInfo.tickSpacing)),console.log(y,m,"===>tick_upper"),_.priceToSqrtPriceX64(new D(N),ue,g),_.priceToSqrtPriceX64(new D(P),ue,g)):(y=T&&T[e.currentPriceTab]&&T[e.currentPriceTab].lower,m=T&&T[e.currentPriceTab]&&T[e.currentPriceTab].upper,_.tickIndexToSqrtPriceX64(y),_.tickIndexToSqrtPriceX64(m)),e.maxPrice==="∞"||ne>y&&ne<m){let de;if(e.fixedFromCoin){const ve=new D(1).mul(Math.pow(10,e.fromCoin.decimals)).toString();de=new _t(ve)}else{const ve=new D(1).mul(Math.pow(10,e.toCoin.decimals)).toString();de=new _t(ve)}const{tokenMaxA:ie,tokenMaxB:re}=await s.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:e.poolInfo.token_a,tokenB:e.poolInfo.token_b,lowerTick:y,upperTick:m,coinAmount:de,iscoinA:K?e.fixedFromCoin:!e.fixedFromCoin,roundUp:!0,slippage:Number(e.slippage)/100,curSqrtPrice:new _t(e.poolInfo.current_sqrt_price)});K?e.fixedFromCoin?fe=Number(re)>0?re:"":J=Number(ie)>0?ie:"":e.fixedFromCoin?fe=ie:J=re}else ne>=m?K?(fe=1,J=0):(J=1,fe=0):ne<=y&&(K?(fe=0,J=1):(fe=1,J=0));const ee=J?Number(J):0,F=fe?Number(fe):0,G=F+Number(K?ee*e.currentPrice:ee*e.currentPriceReverse),we=((K?e.currentPrice*ee:e.currentPriceReverse*ee)/G*100).toFixed(0),V=(F/G*100).toFixed(0);t.value=we,n.value=V};Ce(()=>[e.poolInfo,e.minPrice,e.maxPrice],([v,_,A])=>{console.log("0421####ratio###watch###poolInfo###",v),console.log("0421####ratio###watch###minPrice###",_),console.log("0421####ratio###watch###maxPrice###",A),_&&A&&v&&!$t(v)&&(_!=="0"||A!=="0")?u():(console.log("0421####ratio###watch###clear###"),t.value="",n.value="")},{immediate:!0,deep:!0});let f={};Ce(()=>a.value.RATES,v=>{v&&(f=v)},{immediate:!0});const h=te(()=>{const v=Vn(Number(e.fromCoinAmount)*Number(f&&f[e.fromCoin.address]&&f[e.fromCoin.address].price),2),_=Vn(Number(e.toCoinAmount)*Number(f&&f[e.toCoin.address]&&f[e.toCoin.address].price),2);return v!=="--"&&_!=="--"?Number(v)+Number(_):"--"});return console.log(h.value,"totalAmount351"),{fromCoinRatio:t,toCoinRatio:n,totalAmount:h,fixD:Vn,addCommom:Fe}}});const gs=e=>(jt("data-v-b913527f"),e=e(),Dt(),e),ys={class:"deposit-ratio"},bs={class:"lebal"},ks=gs(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-icon-information"})],-1)),ws={key:0,class:"text"},Cs={key:1},_s={key:0,class:"deposit-ratio totalAmount"},$s={class:"lebal"},Ps={class:"text"};function Is(e,t,n,o,i,r){const a=br;return b(),I(Ft,null,[d("div",ys,[d("div",bs,[He(C(e.$t("newAdd.depositRatio"))+" ",1),ke(a,{placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[d("span",null,C(e.$t("newAdd.depositRatioTips")),1)]),default:Ie(()=>[ks]),_:1})]),e.currentPriceTab!=="full range"?(b(),I("div",ws,C(e.fromCoinRatio!=="--"?e.fromCoinRatio+"%":"--")+" "+C(e.fromCoinRatio!=="--"?e.fromCoin&&e.fromCoin.symbol:"")+" / "+C(e.toCoinRatio!=="--"?e.toCoinRatio+"%":"--")+" "+C(e.toCoinRatio!=="--"?e.toCoin&&e.toCoin.symbol:""),1)):(b(),I("div",Cs," 50% "+C(e.fromCoin&&e.fromCoin.symbol)+" / 50% "+C(e.toCoin&&e.toCoin.symbol),1))]),e.fromCoinAmount&&e.toCoinAmount&&e.totalAmount!==0&&e.totalAmount!=="--"?(b(),I("div",_s,[d("div",$s,C(e.$t("newAdd.totalAmount")),1),d("div",Ps,"$"+C(("addCommom"in e?e.addCommom:ye(Fe))(("fixD"in e?e.fixD:ye(Vn))(e.totalAmount,2),2)),1)])):O("",!0)],64)}const As=dt(hs,[["render",Is],["__scopeId","data-v-b913527f"]]),Ss=ct({props:{clickClear:{type:Boolean,default:!1},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},intPrice:{type:String,default:""}},setup(e,t){const n=L("");return{inpValue:n,changecurrentPrice:i=>{var a,s;console.log(i.target.value,"e.target.value"),console.log((a=e.fromCoin)==null?void 0:a.decimals,"==>props.fromCoin?.decimals");const r=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(s=e.fromCoin)==null?void 0:s.decimals}})?).*$`);i.target.value=i.target.value.replace(r,"$1"),n.value=i.target.value,console.log(n.value,"===>inpValue.value"),t.emit("changecurrentPrice",n.value)}}}});const Ts={class:"set-init-price"},Ns={class:"init-price-tips"};function Ms(e,t,n,o,i,r){var s,l,u,f;const a=kr;return b(),I("div",Ts,[ke(a,{type:"text",placeholder:"0.0",value:e.intPrice,disabled:!((l=(s=e.$route)==null?void 0:s.query)!=null&&l.fee),onChange:e.changecurrentPrice},null,8,["value","disabled","onChange"]),d("div",Ns,C((u=e.toCoin)==null?void 0:u.symbol)+" per "+C((f=e.fromCoin)==null?void 0:f.symbol),1)])}const Rs=dt(Ss,[["render",Ms],["__scopeId","data-v-699ba284"]]),Ls=-443636;function Oi(e,t){const n=qs(e),o=(n-Ls)%t;return o>t/2?n-o+t:n-o}const Ar=new D("1.0001");function qs(e){return e.log(Ar).toDP(0,D.ROUND_HALF_UP).toNumber()}function Bi(e){return Ar.pow(e)}const Us=ct({props:{inputValue:{type:String,default:""},pType:{type:String,required:!0},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},defaultMaxPrice:{type:String,default:""},defaultMinPrice:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},emits:["onInput"],setup(e,t){const n=L(""),o=L("");let i=L(""),r=L("");const a=co(),s=()=>{if(Number.isNaN(n.value)||Number(n.value)!==0&&!n.value||!e.poolInfo.tickSpacing)return;const v=Oi(new D(n.value.toString()),Number(f.value.tickSpacing)),_=Bi(v+Number(f.value.tickSpacing));if(e.pType=="Min"&&Number(_.toString())>=Number(r.value.toString()))return;const A=_.toString();t.emit("onInput",A)},l=()=>{if(Number.isNaN(n.value)||!n.value||!e.poolInfo.tickSpacing)return;const v=Oi(new D(n.value),Number(f.value.tickSpacing)),_=Bi(v-Number(f.value.tickSpacing)),A=_.toString();e.pType=="Max"&&Number(_)<=Number(i.value)||t.emit("onInput",A)},u=v=>{let _=v.toString().replace(/[^\d.]/g,"");const A=/^\d+(\.\d+)?$/;_.split(".").length>2&&!A.exec(_)&&(_=_.substr(0,_.length-1)),o.value=String(_),console.log(_,"v===>"),(Be(_,6)>0||String(_)=="0")&&t.emit("onInput",_.toString())};Ce(()=>e.defaultMinPrice,(v,_)=>{v!==_&&(console.log(e.defaultMinPrice,"props.defaultMinPrice===>"),i.value=e.defaultMinPrice,console.log(i.value,"props.minPrice.value===>"))},{immediate:!0}),Ce(()=>e.defaultMaxPrice,(v,_)=>{v!==_&&(r.value=e.defaultMaxPrice)},{immediate:!0}),Ce(()=>o.value,v=>{console.log(v,"=sdajlaksjdkldas")},{immediate:!0}),Ce(()=>[e.inputValue,a.query.action],([v])=>{if(console.log(v,"==>newValue"),v&&v!=="0"&&v!=="∞"){n.value=v;const A=v.toString().split(".")[1];o.value=v!=="0"&&v!=="∞"&&A&&A.length>6?Be(v.toString(),6):v.toString()}else(v=="0"||v=="∞"||a.query.action)&&(o.value=v);console.log(o.value,"===> oValue.value")},{immediate:!0});const f=L({});Ce(()=>e.poolInfo,(v,_)=>{v&&(f.value=v)},{immediate:!0});const h=L("");return Ce(()=>e.currentPriceTab,v=>{h.value=v},{immediate:!0}),console.log(e,"props=======>"),{addPrice:s,minusPrice:l,oValue:o,changeValue:u,isDisabled:h,route:a}}});const Os={class:"set-price-item"},Bs={class:"title"},Fs={class:"input-box"},Es={class:"minus-btn"},js=["disabled"],Ds={class:"plus-btn"};function Hs(e,t,n,o,i,r){const a=kr,s=wr;return b(),I("div",Os,[d("div",Bs,C(e.pType=="Max"?e.$t("common.maxPrice"):e.pType=="Min"?e.$t("common.minPrice"):""),1),ke(s,{loading:e.loading,active:"",paragraph:!1},{default:Ie(()=>[d("div",Fs,[d("a",Es,[d("div",{class:Ne(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"reductionDis":"reduction"),disabled:e.isDisabled!=="Custom",onClick:t[0]||(t[0]=(...l)=>e.minusPrice&&e.minusPrice(...l))},null,10,js)]),ke(a,{id:"pValu",value:e.oValue,"onUpdate:value":t[1]||(t[1]=l=>e.oValue=l),disabled:e.route.query.action&&!e.intPrice,autocomplete:"off",placeholder:"0",onChange:t[2]||(t[2]=l=>e.changeValue(l.target.value))},null,8,["value","disabled"]),d("a",Ds,[d("div",{class:Ne(!e.fromCoin&&!e.toCoin||e.poolInfo&&!e.poolInfo.tickSpacing&&!e.$route.query.action?"addDis":"add"),onClick:t[3]||(t[3]=(...l)=>e.addPrice&&e.addPrice(...l))},null,2)])])]),_:1},8,["loading"]),d("p",{class:Ne(["per-text",!e.toCoin&&!e.fromCoin?"per-text-disabled":""])},C(e.toCoin&&e.toCoin.symbol)+" per "+C(e.fromCoin&&e.fromCoin.symbol),3)])}const Fi=dt(Us,[["render",Hs],["__scopeId","data-v-8eabf3d7"]]),Xs=ct({props:{min:{type:String,default:""},max:{type:String,default:""},defaultMinPrice:{type:String,default:""},defaultMaxPrice:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},dirction:{type:Boolean,default:!0},invalidPriceRange:{type:Boolean,default:!1},poolInfo:{type:Object,default:()=>({})},currentPriceTab:{type:String,default:""},loading:{type:Boolean,default:!1},intPrice:{type:String,default:""}},setup(e,t){let n=L(""),o=L(""),i=L(),r=L(!1),a=L(!1);const s=L({}),l=vt(),u=te(()=>l);uo(()=>{n.value=e.min,o.value=e.max}),Ce(()=>e.currentPriceTab,(g,N)=>{g!==N&&(i.value=e.currentPriceTab)},{immediate:!0}),Ce(()=>e.min,(g,N)=>{g!==N&&(n.value=g,console.log(e.min,"===> props.min"))}),Ce(()=>e.max,(g,N)=>{g!==N&&(o.value=g)}),Ce(()=>e.poolInfo,(g,N)=>{g&&(s.value=g)},{immediate:!0});const f=L("");Ce(()=>e.intPrice,g=>{console.log(e.intPrice,"===>props.intPrice"),f.value=g},{immediate:!0,deep:!0});const h=g=>{console.log(g,"val===>"),n.value=g,t.emit("onChangeMinPrice",g)},v=g=>{o.value=g,t.emit("onChangeMaxPrice",g)};Ce(r,(g,N)=>{g!==N&&t.emit("onChangeFullRange",g)});const _=()=>{n.value=e.defaultMinPrice,o.value=e.defaultMaxPrice,a.value=!1,r.value=!1},A=()=>{a.value=!1,n.value="0",o.value="∞"};return Ce(r,(g,N)=>{g!==N&&t.emit("onChangeFullRange",g)}),{store:u,changeMinPrice:h,changeMaxPrice:v,importIcon:ze,resetPrice:_,changeShowUnderStand:()=>{r.value=!r.value,r.value?a.value=!0:_(),a.value||(n.value=e.defaultMinPrice,o.value=e.defaultMaxPrice)},showUnderStand:a,minPrice:n,maxPrice:o,understand:A,isRadio:r,initPirce:f}}});const zs={class:"set-price"},Vs={class:"card-container"},Ws={key:0,class:"card"},Ks=["src"],Ys={key:1,class:"understand"},Gs={class:"left"},Qs={class:"right"};function Js(e,t,n,o,i,r){const a=Fi,s=Fi,l=fo;return b(),I("div",zs,[d("div",Vs,[e.showUnderStand?(b(),I("div",Ys,[d("div",Gs,[d("p",null,C(e.$t("common.lowerEfficiency")),1),d("p",null,C(e.$t("common.lowerEfficiencyTips")),1)]),d("div",Qs,[ke(l,{onClick:e.understand},{default:Ie(()=>[He(C(e.$t("common.understand")),1)]),_:1},8,["onClick"])])])):(b(),I("div",Ws,[ke(a,{value:e.minPrice,"onUpdate:value":t[0]||(t[0]=u=>e.minPrice=u),"input-value":e.minPrice,"p-type":"Min","default-max-price":e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"current-price-tab":e.currentPriceTab,"int-price":e.initPirce,onOnInput:e.changeMinPrice,onAddValue:e.changeMinPrice,onDelValue:e.changeMinPrice},null,8,["value","input-value","default-max-price","from-coin","to-coin","dirction","pool-info","loading","current-price-tab","int-price","onOnInput","onAddValue","onDelValue"]),ke(s,{value:e.maxPrice,"onUpdate:value":t[1]||(t[1]=u=>e.maxPrice=u),"input-value":e.maxPrice,"p-type":"Max","default-min-price":e.minPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,dirction:e.dirction,"pool-info":e.poolInfo,loading:e.loading,"int-price":e.initPirce,"current-price-tab":e.currentPriceTab,onOnInput:e.changeMaxPrice,onAddValue:e.changeMaxPrice,onDelValue:e.changeMaxPrice},null,8,["value","input-value","default-min-price","from-coin","to-coin","dirction","pool-info","loading","int-price","current-price-tab","onOnInput","onAddValue","onDelValue"]),d("img",{src:("importIcon"in e?e.importIcon:ye(ze))("/image/lmg-line@2x.png"),alt:""},null,8,Ks)]))])])}const Zs=dt(Xs,[["render",Js],["__scopeId","data-v-01a6f14e"]]);function Kn(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function xs(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Sr(e){let t,n,o;e.length!==2?(t=Kn,n=(s,l)=>Kn(e(s),l),o=(s,l)=>e(s)-l):(t=e===Kn||e===xs?e:el,n=e,o=e);function i(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const h=u+f>>>1;n(s[h],l)<0?u=h+1:f=h}while(u<f)}return u}function r(s,l,u=0,f=s.length){if(u<f){if(t(l,l)!==0)return f;do{const h=u+f>>>1;n(s[h],l)<=0?u=h+1:f=h}while(u<f)}return u}function a(s,l,u=0,f=s.length){const h=i(s,l,u,f-1);return h>u&&o(s[h-1],l)>-o(s[h],l)?h-1:h}return{left:i,center:a,right:r}}function el(){return 0}function tl(e){return e===null?NaN:+e}const nl=Sr(Kn),ol=nl.right;Sr(tl).center;const il=ol;class Ei extends Map{constructor(t,n=sl){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[o,i]of t)this.set(o,i)}get(t){return super.get(ji(this,t))}has(t){return super.has(ji(this,t))}set(t,n){return super.set(rl(this,t),n)}delete(t){return super.delete(al(this,t))}}function ji({_intern:e,_key:t},n){const o=t(n);return e.has(o)?e.get(o):n}function rl({_intern:e,_key:t},n){const o=t(n);return e.has(o)?e.get(o):(e.set(o,n),n)}function al({_intern:e,_key:t},n){const o=t(n);return e.has(o)&&(n=e.get(o),e.delete(o)),n}function sl(e){return e!==null&&typeof e=="object"?e.valueOf():e}const ll=Math.sqrt(50),ul=Math.sqrt(10),cl=Math.sqrt(2);function Zn(e,t,n){const o=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(o)),r=o/Math.pow(10,i),a=r>=ll?10:r>=ul?5:r>=cl?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/a,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*a,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?Zn(e,t,n*2):[s,l,u]}function dl(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const o=t<e,[i,r,a]=o?Zn(t,e,n):Zn(e,t,n);if(!(r>=i))return[];const s=r-i+1,l=new Array(s);if(o)if(a<0)for(let u=0;u<s;++u)l[u]=(r-u)/-a;else for(let u=0;u<s;++u)l[u]=(r-u)*a;else if(a<0)for(let u=0;u<s;++u)l[u]=(i+u)/-a;else for(let u=0;u<s;++u)l[u]=(i+u)*a;return l}function Uo(e,t,n){return t=+t,e=+e,n=+n,Zn(e,t,n)[2]}function fl(e,t,n){t=+t,e=+e,n=+n;const o=t<e,i=o?Uo(t,e,n):Uo(e,t,n);return(o?-1:1)*(i<0?1/-i:i)}function ml(e,t){let n;if(t===void 0)for(const o of e)o!=null&&(n<o||n===void 0&&o>=o)&&(n=o);else{let o=-1;for(let i of e)(i=t(i,++o,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function pl(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var o=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,r=new Array(i);++o<i;)r[o]=e+o*n;return r}var vl={value:()=>{}};function xo(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Yn(n)}function Yn(e){this._=e}function hl(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",i=n.indexOf(".");if(i>=0&&(o=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Yn.prototype=xo.prototype={constructor:Yn,on:function(e,t){var n=this._,o=hl(e+"",n),i,r=-1,a=o.length;if(arguments.length<2){for(;++r<a;)if((i=(e=o[r]).type)&&(i=gl(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++r<a;)if(i=(e=o[r]).type)n[i]=Di(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Di(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Yn(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),o=0,i,r;o<i;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(r=this._[e],o=0,i=r.length;o<i;++o)r[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],i=0,r=o.length;i<r;++i)o[i].value.apply(t,n)}};function gl(e,t){for(var n=0,o=e.length,i;n<o;++n)if((i=e[n]).name===t)return i.value}function Di(e,t,n){for(var o=0,i=e.length;o<i;++o)if(e[o].name===t){e[o]=vl,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var Oo="http://www.w3.org/1999/xhtml";const Hi={svg:"http://www.w3.org/2000/svg",xhtml:Oo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mo(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Hi.hasOwnProperty(t)?{space:Hi[t],local:e}:e}function yl(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Oo&&t.documentElement.namespaceURI===Oo?t.createElement(e):t.createElementNS(n,e)}}function bl(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Tr(e){var t=mo(e);return(t.local?bl:yl)(t)}function kl(){}function ei(e){return e==null?kl:function(){return this.querySelector(e)}}function wl(e){typeof e!="function"&&(e=ei(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,s=o[i]=new Array(a),l,u,f=0;f<a;++f)(l=r[f])&&(u=e.call(l,l.__data__,f,r))&&("__data__"in l&&(u.__data__=l.__data__),s[f]=u);return new ht(o,this._parents)}function Cl(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function _l(){return[]}function Nr(e){return e==null?_l:function(){return this.querySelectorAll(e)}}function $l(e){return function(){return Cl(e.apply(this,arguments))}}function Pl(e){typeof e=="function"?e=$l(e):e=Nr(e);for(var t=this._groups,n=t.length,o=[],i=[],r=0;r<n;++r)for(var a=t[r],s=a.length,l,u=0;u<s;++u)(l=a[u])&&(o.push(e.call(l,l.__data__,u,a)),i.push(l));return new ht(o,i)}function Mr(e){return function(){return this.matches(e)}}function Rr(e){return function(t){return t.matches(e)}}var Il=Array.prototype.find;function Al(e){return function(){return Il.call(this.children,e)}}function Sl(){return this.firstElementChild}function Tl(e){return this.select(e==null?Sl:Al(typeof e=="function"?e:Rr(e)))}var Nl=Array.prototype.filter;function Ml(){return Array.from(this.children)}function Rl(e){return function(){return Nl.call(this.children,e)}}function Ll(e){return this.selectAll(e==null?Ml:Rl(typeof e=="function"?e:Rr(e)))}function ql(e){typeof e!="function"&&(e=Mr(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,s=o[i]=[],l,u=0;u<a;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&s.push(l);return new ht(o,this._parents)}function Lr(e){return new Array(e.length)}function Ul(){return new ht(this._enter||this._groups.map(Lr),this._parents)}function xn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}xn.prototype={constructor:xn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ol(e){return function(){return e}}function Bl(e,t,n,o,i,r){for(var a=0,s,l=t.length,u=r.length;a<u;++a)(s=t[a])?(s.__data__=r[a],o[a]=s):n[a]=new xn(e,r[a]);for(;a<l;++a)(s=t[a])&&(i[a]=s)}function Fl(e,t,n,o,i,r,a){var s,l,u=new Map,f=t.length,h=r.length,v=new Array(f),_;for(s=0;s<f;++s)(l=t[s])&&(v[s]=_=a.call(l,l.__data__,s,t)+"",u.has(_)?i[s]=l:u.set(_,l));for(s=0;s<h;++s)_=a.call(e,r[s],s,r)+"",(l=u.get(_))?(o[s]=l,l.__data__=r[s],u.delete(_)):n[s]=new xn(e,r[s]);for(s=0;s<f;++s)(l=t[s])&&u.get(v[s])===l&&(i[s]=l)}function El(e){return e.__data__}function jl(e,t){if(!arguments.length)return Array.from(this,El);var n=t?Fl:Bl,o=this._parents,i=this._groups;typeof e!="function"&&(e=Ol(e));for(var r=i.length,a=new Array(r),s=new Array(r),l=new Array(r),u=0;u<r;++u){var f=o[u],h=i[u],v=h.length,_=Dl(e.call(f,f&&f.__data__,u,o)),A=_.length,ue=s[u]=new Array(A),g=a[u]=new Array(A),N=l[u]=new Array(v);n(f,h,ue,g,N,_,t);for(var P=0,y=0,m,w;P<A;++P)if(m=ue[P]){for(P>=y&&(y=P+1);!(w=g[y])&&++y<A;);m._next=w||null}}return a=new ht(a,o),a._enter=s,a._exit=l,a}function Dl(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Hl(){return new ht(this._exit||this._groups.map(Lr),this._parents)}function Xl(e,t,n){var o=this.enter(),i=this,r=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?r.remove():n(r),o&&i?o.merge(i).order():i}function zl(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,i=n.length,r=o.length,a=Math.min(i,r),s=new Array(i),l=0;l<a;++l)for(var u=n[l],f=o[l],h=u.length,v=s[l]=new Array(h),_,A=0;A<h;++A)(_=u[A]||f[A])&&(v[A]=_);for(;l<i;++l)s[l]=n[l];return new ht(s,this._parents)}function Vl(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],i=o.length-1,r=o[i],a;--i>=0;)(a=o[i])&&(r&&a.compareDocumentPosition(r)^4&&r.parentNode.insertBefore(a,r),r=a);return this}function Wl(e){e||(e=Kl);function t(h,v){return h&&v?e(h.__data__,v.__data__):!h-!v}for(var n=this._groups,o=n.length,i=new Array(o),r=0;r<o;++r){for(var a=n[r],s=a.length,l=i[r]=new Array(s),u,f=0;f<s;++f)(u=a[f])&&(l[f]=u);l.sort(t)}return new ht(i,this._parents).order()}function Kl(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Yl(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Gl(){return Array.from(this)}function Ql(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length;i<r;++i){var a=o[i];if(a)return a}return null}function Jl(){let e=0;for(const t of this)++e;return e}function Zl(){return!this.node()}function xl(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var i=t[n],r=0,a=i.length,s;r<a;++r)(s=i[r])&&e.call(s,s.__data__,r,i);return this}function eu(e){return function(){this.removeAttribute(e)}}function tu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function nu(e,t){return function(){this.setAttribute(e,t)}}function ou(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function iu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function ru(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function au(e,t){var n=mo(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?tu:eu:typeof t=="function"?n.local?ru:iu:n.local?ou:nu)(n,t))}function qr(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function su(e){return function(){this.style.removeProperty(e)}}function lu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function uu(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function cu(e,t,n){return arguments.length>1?this.each((t==null?su:typeof t=="function"?uu:lu)(e,t,n??"")):mn(this.node(),e)}function mn(e,t){return e.style.getPropertyValue(t)||qr(e).getComputedStyle(e,null).getPropertyValue(t)}function du(e){return function(){delete this[e]}}function fu(e,t){return function(){this[e]=t}}function mu(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function pu(e,t){return arguments.length>1?this.each((t==null?du:typeof t=="function"?mu:fu)(e,t)):this.node()[e]}function Ur(e){return e.trim().split(/^|\s+/)}function ti(e){return e.classList||new Or(e)}function Or(e){this._node=e,this._names=Ur(e.getAttribute("class")||"")}Or.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Br(e,t){for(var n=ti(e),o=-1,i=t.length;++o<i;)n.add(t[o])}function Fr(e,t){for(var n=ti(e),o=-1,i=t.length;++o<i;)n.remove(t[o])}function vu(e){return function(){Br(this,e)}}function hu(e){return function(){Fr(this,e)}}function gu(e,t){return function(){(t.apply(this,arguments)?Br:Fr)(this,e)}}function yu(e,t){var n=Ur(e+"");if(arguments.length<2){for(var o=ti(this.node()),i=-1,r=n.length;++i<r;)if(!o.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?gu:t?vu:hu)(n,t))}function bu(){this.textContent=""}function ku(e){return function(){this.textContent=e}}function wu(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Cu(e){return arguments.length?this.each(e==null?bu:(typeof e=="function"?wu:ku)(e)):this.node().textContent}function _u(){this.innerHTML=""}function $u(e){return function(){this.innerHTML=e}}function Pu(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Iu(e){return arguments.length?this.each(e==null?_u:(typeof e=="function"?Pu:$u)(e)):this.node().innerHTML}function Au(){this.nextSibling&&this.parentNode.appendChild(this)}function Su(){return this.each(Au)}function Tu(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Nu(){return this.each(Tu)}function Mu(e){var t=typeof e=="function"?e:Tr(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Ru(){return null}function Lu(e,t){var n=typeof e=="function"?e:Tr(e),o=t==null?Ru:typeof t=="function"?t:ei(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function qu(){var e=this.parentNode;e&&e.removeChild(this)}function Uu(){return this.each(qu)}function Ou(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Bu(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Fu(e){return this.select(e?Bu:Ou)}function Eu(e){return arguments.length?this.property("__data__",e):this.node().__data__}function ju(e){return function(t){e.call(this,t,this.__data__)}}function Du(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Hu(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,i=t.length,r;n<i;++n)r=t[n],(!e.type||r.type===e.type)&&r.name===e.name?this.removeEventListener(r.type,r.listener,r.options):t[++o]=r;++o?t.length=o:delete this.__on}}}function Xu(e,t,n){return function(){var o=this.__on,i,r=ju(t);if(o){for(var a=0,s=o.length;a<s;++a)if((i=o[a]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=r,i.options=n),i.value=t;return}}this.addEventListener(e.type,r,n),i={type:e.type,name:e.name,value:t,listener:r,options:n},o?o.push(i):this.__on=[i]}}function zu(e,t,n){var o=Du(e+""),i,r=o.length,a;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,f;l<u;++l)for(i=0,f=s[l];i<r;++i)if((a=o[i]).type===f.type&&a.name===f.name)return f.value}return}for(s=t?Xu:Hu,i=0;i<r;++i)this.each(s(o[i],t,n));return this}function Er(e,t,n){var o=qr(e),i=o.CustomEvent;typeof i=="function"?i=new i(t,n):(i=o.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Vu(e,t){return function(){return Er(this,e,t)}}function Wu(e,t){return function(){return Er(this,e,t.apply(this,arguments))}}function Ku(e,t){return this.each((typeof t=="function"?Wu:Vu)(e,t))}function*Yu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],i=0,r=o.length,a;i<r;++i)(a=o[i])&&(yield a)}var jr=[null];function ht(e,t){this._groups=e,this._parents=t}function Sn(){return new ht([[document.documentElement]],jr)}function Gu(){return this}ht.prototype=Sn.prototype={constructor:ht,select:wl,selectAll:Pl,selectChild:Tl,selectChildren:Ll,filter:ql,data:jl,enter:Ul,exit:Hl,join:Xl,merge:zl,selection:Gu,order:Vl,sort:Wl,call:Yl,nodes:Gl,node:Ql,size:Jl,empty:Zl,each:xl,attr:au,style:cu,property:pu,classed:yu,text:Cu,html:Iu,raise:Su,lower:Nu,append:Mu,insert:Lu,remove:Uu,clone:Fu,datum:Eu,on:zu,dispatch:Ku,[Symbol.iterator]:Yu};function It(e){return typeof e=="string"?new ht([[document.querySelector(e)]],[document.documentElement]):new ht([[e]],jr)}function Qu(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Xi(e,t){if(e=Qu(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Bo={capture:!0,passive:!1};function Fo(e){e.preventDefault(),e.stopImmediatePropagation()}function Ju(e){var t=e.document.documentElement,n=It(e).on("dragstart.drag",Fo,Bo);"onselectstart"in t?n.on("selectstart.drag",Fo,Bo):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Zu(e,t){var n=e.document.documentElement,o=It(e).on("dragstart.drag",null);t&&(o.on("click.drag",Fo,Bo),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function ni(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Dr(e,t){var n=Object.create(e.prototype);for(var o in t)n[o]=t[o];return n}function Tn(){}var Pn=.7,eo=1/Pn,dn="\\s*([+-]?\\d+)\\s*",In="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Tt="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",xu=/^#([0-9a-f]{3,8})$/,ec=new RegExp(`^rgb\\(${dn},${dn},${dn}\\)$`),tc=new RegExp(`^rgb\\(${Tt},${Tt},${Tt}\\)$`),nc=new RegExp(`^rgba\\(${dn},${dn},${dn},${In}\\)$`),oc=new RegExp(`^rgba\\(${Tt},${Tt},${Tt},${In}\\)$`),ic=new RegExp(`^hsl\\(${In},${Tt},${Tt}\\)$`),rc=new RegExp(`^hsla\\(${In},${Tt},${Tt},${In}\\)$`),zi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ni(Tn,Zt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Vi,formatHex:Vi,formatHex8:ac,formatHsl:sc,formatRgb:Wi,toString:Wi});function Vi(){return this.rgb().formatHex()}function ac(){return this.rgb().formatHex8()}function sc(){return Hr(this).formatHsl()}function Wi(){return this.rgb().formatRgb()}function Zt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=xu.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Ki(t):n===3?new ut(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Dn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Dn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=ec.exec(e))?new ut(t[1],t[2],t[3],1):(t=tc.exec(e))?new ut(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nc.exec(e))?Dn(t[1],t[2],t[3],t[4]):(t=oc.exec(e))?Dn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ic.exec(e))?Qi(t[1],t[2]/100,t[3]/100,1):(t=rc.exec(e))?Qi(t[1],t[2]/100,t[3]/100,t[4]):zi.hasOwnProperty(e)?Ki(zi[e]):e==="transparent"?new ut(NaN,NaN,NaN,0):null}function Ki(e){return new ut(e>>16&255,e>>8&255,e&255,1)}function Dn(e,t,n,o){return o<=0&&(e=t=n=NaN),new ut(e,t,n,o)}function lc(e){return e instanceof Tn||(e=Zt(e)),e?(e=e.rgb(),new ut(e.r,e.g,e.b,e.opacity)):new ut}function Eo(e,t,n,o){return arguments.length===1?lc(e):new ut(e,t,n,o??1)}function ut(e,t,n,o){this.r=+e,this.g=+t,this.b=+n,this.opacity=+o}ni(ut,Eo,Dr(Tn,{brighter(e){return e=e==null?eo:Math.pow(eo,e),new ut(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Pn:Math.pow(Pn,e),new ut(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ut(Jt(this.r),Jt(this.g),Jt(this.b),to(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Yi,formatHex:Yi,formatHex8:uc,formatRgb:Gi,toString:Gi}));function Yi(){return`#${Qt(this.r)}${Qt(this.g)}${Qt(this.b)}`}function uc(){return`#${Qt(this.r)}${Qt(this.g)}${Qt(this.b)}${Qt((isNaN(this.opacity)?1:this.opacity)*255)}`}function Gi(){const e=to(this.opacity);return`${e===1?"rgb(":"rgba("}${Jt(this.r)}, ${Jt(this.g)}, ${Jt(this.b)}${e===1?")":`, ${e})`}`}function to(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Jt(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Qt(e){return e=Jt(e),(e<16?"0":"")+e.toString(16)}function Qi(e,t,n,o){return o<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new At(e,t,n,o)}function Hr(e){if(e instanceof At)return new At(e.h,e.s,e.l,e.opacity);if(e instanceof Tn||(e=Zt(e)),!e)return new At;if(e instanceof At)return e;e=e.rgb();var t=e.r/255,n=e.g/255,o=e.b/255,i=Math.min(t,n,o),r=Math.max(t,n,o),a=NaN,s=r-i,l=(r+i)/2;return s?(t===r?a=(n-o)/s+(n<o)*6:n===r?a=(o-t)/s+2:a=(t-n)/s+4,s/=l<.5?r+i:2-r-i,a*=60):s=l>0&&l<1?0:a,new At(a,s,l,e.opacity)}function cc(e,t,n,o){return arguments.length===1?Hr(e):new At(e,t,n,o??1)}function At(e,t,n,o){this.h=+e,this.s=+t,this.l=+n,this.opacity=+o}ni(At,cc,Dr(Tn,{brighter(e){return e=e==null?eo:Math.pow(eo,e),new At(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Pn:Math.pow(Pn,e),new At(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*t,i=2*n-o;return new ut(Io(e>=240?e-240:e+120,i,o),Io(e,i,o),Io(e<120?e+240:e-120,i,o),this.opacity)},clamp(){return new At(Ji(this.h),Hn(this.s),Hn(this.l),to(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=to(this.opacity);return`${e===1?"hsl(":"hsla("}${Ji(this.h)}, ${Hn(this.s)*100}%, ${Hn(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Ji(e){return e=(e||0)%360,e<0?e+360:e}function Hn(e){return Math.max(0,Math.min(1,e||0))}function Io(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const oi=e=>()=>e;function dc(e,t){return function(n){return e+n*t}}function fc(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(o){return Math.pow(e+o*t,n)}}function mc(e){return(e=+e)==1?Xr:function(t,n){return n-t?fc(t,n,e):oi(isNaN(t)?n:t)}}function Xr(e,t){var n=t-e;return n?dc(e,n):oi(isNaN(e)?t:e)}const no=function e(t){var n=mc(t);function o(i,r){var a=n((i=Eo(i)).r,(r=Eo(r)).r),s=n(i.g,r.g),l=n(i.b,r.b),u=Xr(i.opacity,r.opacity);return function(f){return i.r=a(f),i.g=s(f),i.b=l(f),i.opacity=u(f),i+""}}return o.gamma=e,o}(1);function pc(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,o=t.slice(),i;return function(r){for(i=0;i<n;++i)o[i]=e[i]*(1-r)+t[i]*r;return o}}function vc(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function hc(e,t){var n=t?t.length:0,o=e?Math.min(n,e.length):0,i=new Array(o),r=new Array(n),a;for(a=0;a<o;++a)i[a]=po(e[a],t[a]);for(;a<n;++a)r[a]=t[a];return function(s){for(a=0;a<o;++a)r[a]=i[a](s);return r}}function gc(e,t){var n=new Date;return e=+e,t=+t,function(o){return n.setTime(e*(1-o)+t*o),n}}function Pt(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function yc(e,t){var n={},o={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=po(e[i],t[i]):o[i]=t[i];return function(r){for(i in n)o[i]=n[i](r);return o}}var jo=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ao=new RegExp(jo.source,"g");function bc(e){return function(){return e}}function kc(e){return function(t){return e(t)+""}}function zr(e,t){var n=jo.lastIndex=Ao.lastIndex=0,o,i,r,a=-1,s=[],l=[];for(e=e+"",t=t+"";(o=jo.exec(e))&&(i=Ao.exec(t));)(r=i.index)>n&&(r=t.slice(n,r),s[a]?s[a]+=r:s[++a]=r),(o=o[0])===(i=i[0])?s[a]?s[a]+=i:s[++a]=i:(s[++a]=null,l.push({i:a,x:Pt(o,i)})),n=Ao.lastIndex;return n<t.length&&(r=t.slice(n),s[a]?s[a]+=r:s[++a]=r),s.length<2?l[0]?kc(l[0].x):bc(t):(t=l.length,function(u){for(var f=0,h;f<t;++f)s[(h=l[f]).i]=h.x(u);return s.join("")})}function po(e,t){var n=typeof t,o;return t==null||n==="boolean"?oi(t):(n==="number"?Pt:n==="string"?(o=Zt(t))?(t=o,no):zr:t instanceof Zt?no:t instanceof Date?gc:vc(t)?pc:Array.isArray(t)?hc:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?yc:Pt)(e,t)}function wc(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var Zi=180/Math.PI,Do={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Vr(e,t,n,o,i,r){var a,s,l;return(a=Math.sqrt(e*e+t*t))&&(e/=a,t/=a),(l=e*n+t*o)&&(n-=e*l,o-=t*l),(s=Math.sqrt(n*n+o*o))&&(n/=s,o/=s,l/=s),e*o<t*n&&(e=-e,t=-t,l=-l,a=-a),{translateX:i,translateY:r,rotate:Math.atan2(t,e)*Zi,skewX:Math.atan(l)*Zi,scaleX:a,scaleY:s}}var Xn;function Cc(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Do:Vr(t.a,t.b,t.c,t.d,t.e,t.f)}function _c(e){return e==null||(Xn||(Xn=document.createElementNS("http://www.w3.org/2000/svg","g")),Xn.setAttribute("transform",e),!(e=Xn.transform.baseVal.consolidate()))?Do:(e=e.matrix,Vr(e.a,e.b,e.c,e.d,e.e,e.f))}function Wr(e,t,n,o){function i(u){return u.length?u.pop()+" ":""}function r(u,f,h,v,_,A){if(u!==h||f!==v){var ue=_.push("translate(",null,t,null,n);A.push({i:ue-4,x:Pt(u,h)},{i:ue-2,x:Pt(f,v)})}else(h||v)&&_.push("translate("+h+t+v+n)}function a(u,f,h,v){u!==f?(u-f>180?f+=360:f-u>180&&(u+=360),v.push({i:h.push(i(h)+"rotate(",null,o)-2,x:Pt(u,f)})):f&&h.push(i(h)+"rotate("+f+o)}function s(u,f,h,v){u!==f?v.push({i:h.push(i(h)+"skewX(",null,o)-2,x:Pt(u,f)}):f&&h.push(i(h)+"skewX("+f+o)}function l(u,f,h,v,_,A){if(u!==h||f!==v){var ue=_.push(i(_)+"scale(",null,",",null,")");A.push({i:ue-4,x:Pt(u,h)},{i:ue-2,x:Pt(f,v)})}else(h!==1||v!==1)&&_.push(i(_)+"scale("+h+","+v+")")}return function(u,f){var h=[],v=[];return u=e(u),f=e(f),r(u.translateX,u.translateY,f.translateX,f.translateY,h,v),a(u.rotate,f.rotate,h,v),s(u.skewX,f.skewX,h,v),l(u.scaleX,u.scaleY,f.scaleX,f.scaleY,h,v),u=f=null,function(_){for(var A=-1,ue=v.length,g;++A<ue;)h[(g=v[A]).i]=g.x(_);return h.join("")}}}var $c=Wr(Cc,"px, ","px)","deg)"),Pc=Wr(_c,", ",")",")"),pn=0,Cn=0,kn=0,Kr=1e3,oo,_n,io=0,xt=0,vo=0,An=typeof performance=="object"&&performance.now?performance:Date,Yr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ii(){return xt||(Yr(Ic),xt=An.now()+vo)}function Ic(){xt=0}function ro(){this._call=this._time=this._next=null}ro.prototype=Gr.prototype={constructor:ro,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ii():+n)+(t==null?0:+t),!this._next&&_n!==this&&(_n?_n._next=this:oo=this,_n=this),this._call=e,this._time=n,Ho()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ho())}};function Gr(e,t,n){var o=new ro;return o.restart(e,t,n),o}function Ac(){ii(),++pn;for(var e=oo,t;e;)(t=xt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--pn}function xi(){xt=(io=An.now())+vo,pn=Cn=0;try{Ac()}finally{pn=0,Tc(),xt=0}}function Sc(){var e=An.now(),t=e-io;t>Kr&&(vo-=t,io=e)}function Tc(){for(var e,t=oo,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:oo=n);_n=e,Ho(o)}function Ho(e){if(!pn){Cn&&(Cn=clearTimeout(Cn));var t=e-xt;t>24?(e<1/0&&(Cn=setTimeout(xi,e-An.now()-vo)),kn&&(kn=clearInterval(kn))):(kn||(io=An.now(),kn=setInterval(Sc,Kr)),pn=1,Yr(xi))}}function er(e,t,n){var o=new ro;return t=t==null?0:+t,o.restart(i=>{o.stop(),e(i+t)},t,n),o}var Nc=xo("start","end","cancel","interrupt"),Mc=[],Qr=0,tr=1,Xo=2,Gn=3,nr=4,zo=5,Qn=6;function ho(e,t,n,o,i,r){var a=e.__transition;if(!a)e.__transition={};else if(n in a)return;Rc(e,n,{name:t,index:o,group:i,on:Nc,tween:Mc,time:r.time,delay:r.delay,duration:r.duration,ease:r.ease,timer:null,state:Qr})}function ri(e,t){var n=St(e,t);if(n.state>Qr)throw new Error("too late; already scheduled");return n}function Nt(e,t){var n=St(e,t);if(n.state>Gn)throw new Error("too late; already running");return n}function St(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Rc(e,t,n){var o=e.__transition,i;o[t]=n,n.timer=Gr(r,0,n.time);function r(u){n.state=tr,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var f,h,v,_;if(n.state!==tr)return l();for(f in o)if(_=o[f],_.name===n.name){if(_.state===Gn)return er(a);_.state===nr?(_.state=Qn,_.timer.stop(),_.on.call("interrupt",e,e.__data__,_.index,_.group),delete o[f]):+f<t&&(_.state=Qn,_.timer.stop(),_.on.call("cancel",e,e.__data__,_.index,_.group),delete o[f])}if(er(function(){n.state===Gn&&(n.state=nr,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Xo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Xo){for(n.state=Gn,i=new Array(v=n.tween.length),f=0,h=-1;f<v;++f)(_=n.tween[f].value.call(e,e.__data__,n.index,n.group))&&(i[++h]=_);i.length=h+1}}function s(u){for(var f=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=zo,1),h=-1,v=i.length;++h<v;)i[h].call(e,f);n.state===zo&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=Qn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function Vo(e,t){var n=e.__transition,o,i,r=!0,a;if(n){t=t==null?null:t+"";for(a in n){if((o=n[a]).name!==t){r=!1;continue}i=o.state>Xo&&o.state<zo,o.state=Qn,o.timer.stop(),o.on.call(i?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[a]}r&&delete e.__transition}}function Lc(e){return this.each(function(){Vo(this,e)})}function qc(e,t){var n,o;return function(){var i=Nt(this,e),r=i.tween;if(r!==n){o=n=r;for(var a=0,s=o.length;a<s;++a)if(o[a].name===t){o=o.slice(),o.splice(a,1);break}}i.tween=o}}function Uc(e,t,n){var o,i;if(typeof n!="function")throw new Error;return function(){var r=Nt(this,e),a=r.tween;if(a!==o){i=(o=a).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}r.tween=i}}function Oc(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=St(this.node(),n).tween,i=0,r=o.length,a;i<r;++i)if((a=o[i]).name===e)return a.value;return null}return this.each((t==null?qc:Uc)(n,e,t))}function ai(e,t,n){var o=e._id;return e.each(function(){var i=Nt(this,o);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return St(i,o).value[t]}}function Jr(e,t){var n;return(typeof t=="number"?Pt:t instanceof Zt?no:(n=Zt(t))?(t=n,no):zr)(e,t)}function Bc(e){return function(){this.removeAttribute(e)}}function Fc(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ec(e,t,n){var o,i=n+"",r;return function(){var a=this.getAttribute(e);return a===i?null:a===o?r:r=t(o=a,n)}}function jc(e,t,n){var o,i=n+"",r;return function(){var a=this.getAttributeNS(e.space,e.local);return a===i?null:a===o?r:r=t(o=a,n)}}function Dc(e,t,n){var o,i,r;return function(){var a,s=n(this),l;return s==null?void this.removeAttribute(e):(a=this.getAttribute(e),l=s+"",a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,s)))}}function Hc(e,t,n){var o,i,r;return function(){var a,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(a=this.getAttributeNS(e.space,e.local),l=s+"",a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,s)))}}function Xc(e,t){var n=mo(e),o=n==="transform"?Pc:Jr;return this.attrTween(e,typeof t=="function"?(n.local?Hc:Dc)(n,o,ai(this,"attr."+e,t)):t==null?(n.local?Fc:Bc)(n):(n.local?jc:Ec)(n,o,t))}function zc(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Vc(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Wc(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&Vc(e,r)),n}return i._value=t,i}function Kc(e,t){var n,o;function i(){var r=t.apply(this,arguments);return r!==o&&(n=(o=r)&&zc(e,r)),n}return i._value=t,i}function Yc(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=mo(e);return this.tween(n,(o.local?Wc:Kc)(o,t))}function Gc(e,t){return function(){ri(this,e).delay=+t.apply(this,arguments)}}function Qc(e,t){return t=+t,function(){ri(this,e).delay=t}}function Jc(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Gc:Qc)(t,e)):St(this.node(),t).delay}function Zc(e,t){return function(){Nt(this,e).duration=+t.apply(this,arguments)}}function xc(e,t){return t=+t,function(){Nt(this,e).duration=t}}function ed(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Zc:xc)(t,e)):St(this.node(),t).duration}function td(e,t){if(typeof t!="function")throw new Error;return function(){Nt(this,e).ease=t}}function nd(e){var t=this._id;return arguments.length?this.each(td(t,e)):St(this.node(),t).ease}function od(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Nt(this,e).ease=n}}function id(e){if(typeof e!="function")throw new Error;return this.each(od(this._id,e))}function rd(e){typeof e!="function"&&(e=Mr(e));for(var t=this._groups,n=t.length,o=new Array(n),i=0;i<n;++i)for(var r=t[i],a=r.length,s=o[i]=[],l,u=0;u<a;++u)(l=r[u])&&e.call(l,l.__data__,u,r)&&s.push(l);return new Et(o,this._parents,this._name,this._id)}function ad(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,i=n.length,r=Math.min(o,i),a=new Array(o),s=0;s<r;++s)for(var l=t[s],u=n[s],f=l.length,h=a[s]=new Array(f),v,_=0;_<f;++_)(v=l[_]||u[_])&&(h[_]=v);for(;s<o;++s)a[s]=t[s];return new Et(a,this._parents,this._name,this._id)}function sd(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function ld(e,t,n){var o,i,r=sd(t)?ri:Nt;return function(){var a=r(this,e),s=a.on;s!==o&&(i=(o=s).copy()).on(t,n),a.on=i}}function ud(e,t){var n=this._id;return arguments.length<2?St(this.node(),n).on.on(e):this.each(ld(n,e,t))}function cd(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function dd(){return this.on("end.remove",cd(this._id))}function fd(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ei(e));for(var o=this._groups,i=o.length,r=new Array(i),a=0;a<i;++a)for(var s=o[a],l=s.length,u=r[a]=new Array(l),f,h,v=0;v<l;++v)(f=s[v])&&(h=e.call(f,f.__data__,v,s))&&("__data__"in f&&(h.__data__=f.__data__),u[v]=h,ho(u[v],t,n,v,u,St(f,n)));return new Et(r,this._parents,t,n)}function md(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Nr(e));for(var o=this._groups,i=o.length,r=[],a=[],s=0;s<i;++s)for(var l=o[s],u=l.length,f,h=0;h<u;++h)if(f=l[h]){for(var v=e.call(f,f.__data__,h,l),_,A=St(f,n),ue=0,g=v.length;ue<g;++ue)(_=v[ue])&&ho(_,t,n,ue,v,A);r.push(v),a.push(f)}return new Et(r,a,t,n)}var pd=Sn.prototype.constructor;function vd(){return new pd(this._groups,this._parents)}function hd(e,t){var n,o,i;return function(){var r=mn(this,e),a=(this.style.removeProperty(e),mn(this,e));return r===a?null:r===n&&a===o?i:i=t(n=r,o=a)}}function Zr(e){return function(){this.style.removeProperty(e)}}function gd(e,t,n){var o,i=n+"",r;return function(){var a=mn(this,e);return a===i?null:a===o?r:r=t(o=a,n)}}function yd(e,t,n){var o,i,r;return function(){var a=mn(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),mn(this,e))),a===l?null:a===o&&l===i?r:(i=l,r=t(o=a,s))}}function bd(e,t){var n,o,i,r="style."+t,a="end."+r,s;return function(){var l=Nt(this,e),u=l.on,f=l.value[r]==null?s||(s=Zr(t)):void 0;(u!==n||i!==f)&&(o=(n=u).copy()).on(a,i=f),l.on=o}}function kd(e,t,n){var o=(e+="")=="transform"?$c:Jr;return t==null?this.styleTween(e,hd(e,o)).on("end.style."+e,Zr(e)):typeof t=="function"?this.styleTween(e,yd(e,o,ai(this,"style."+e,t))).each(bd(this._id,e)):this.styleTween(e,gd(e,o,t),n).on("end.style."+e,null)}function wd(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Cd(e,t,n){var o,i;function r(){var a=t.apply(this,arguments);return a!==i&&(o=(i=a)&&wd(e,a,n)),o}return r._value=t,r}function _d(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Cd(e,t,n??""))}function $d(e){return function(){this.textContent=e}}function Pd(e){return function(){var t=e(this);this.textContent=t??""}}function Id(e){return this.tween("text",typeof e=="function"?Pd(ai(this,"text",e)):$d(e==null?"":e+""))}function Ad(e){return function(t){this.textContent=e.call(this,t)}}function Sd(e){var t,n;function o(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Ad(i)),t}return o._value=e,o}function Td(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Sd(e))}function Nd(){for(var e=this._name,t=this._id,n=xr(),o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],s=a.length,l,u=0;u<s;++u)if(l=a[u]){var f=St(l,t);ho(l,e,n,u,a,{time:f.time+f.delay+f.duration,delay:0,duration:f.duration,ease:f.ease})}return new Et(o,this._parents,e,n)}function Md(){var e,t,n=this,o=n._id,i=n.size();return new Promise(function(r,a){var s={value:a},l={value:function(){--i===0&&r()}};n.each(function(){var u=Nt(this,o),f=u.on;f!==e&&(t=(e=f).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),i===0&&r()})}var Rd=0;function Et(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function xr(){return++Rd}var Ot=Sn.prototype;Et.prototype={constructor:Et,select:fd,selectAll:md,selectChild:Ot.selectChild,selectChildren:Ot.selectChildren,filter:rd,merge:ad,selection:vd,transition:Nd,call:Ot.call,nodes:Ot.nodes,node:Ot.node,size:Ot.size,empty:Ot.empty,each:Ot.each,on:ud,attr:Xc,attrTween:Yc,style:kd,styleTween:_d,text:Id,textTween:Td,remove:dd,tween:Oc,delay:Jc,duration:ed,ease:nd,easeVarying:id,end:Md,[Symbol.iterator]:Ot[Symbol.iterator]};function Ld(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var qd={time:null,delay:0,duration:250,ease:Ld};function Ud(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Od(e){var t,n;e instanceof Et?(t=e._id,e=e._name):(t=xr(),(n=qd).time=ii(),e=e==null?null:e+"");for(var o=this._groups,i=o.length,r=0;r<i;++r)for(var a=o[r],s=a.length,l,u=0;u<s;++u)(l=a[u])&&ho(l,e,t,u,a,n||Ud(l,t));return new Et(o,this._parents,e,t)}Sn.prototype.interrupt=Lc;Sn.prototype.transition=Od;const So=e=>()=>e;function Bd(e,{sourceEvent:t,target:n,selection:o,mode:i,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:o,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:r}})}function Fd(e){e.stopImmediatePropagation()}function To(e){e.preventDefault(),e.stopImmediatePropagation()}var or={name:"drag"},No={name:"space"},ln={name:"handle"},un={name:"center"};const{abs:ir,max:xe,min:et}=Math;function rr(e){return[+e[0],+e[1]]}function ar(e){return[rr(e[0]),rr(e[1])]}var Jn={name:"x",handles:["w","e"].map(ao),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},Mo={name:"y",handles:["n","s"].map(ao),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},Bt={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},sr={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},lr={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},Ed={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},jd={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function ao(e){return{type:e}}function Dd(e){return!e.ctrlKey&&!e.button}function Hd(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function Xd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Ro(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function zd(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Vd(){return Wd(Jn)}function Wd(e){var t=Hd,n=Dd,o=Xd,i=!0,r=xo("start","brush","end"),a=6,s;function l(g){var N=g.property("__brush",ue).selectAll(".overlay").data([ao("overlay")]);N.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",Bt.overlay).merge(N).each(function(){var y=Ro(this).extent;It(this).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1])}),g.selectAll(".selection").data([ao("selection")]).enter().append("rect").attr("class","selection").attr("cursor",Bt.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var P=g.selectAll(".handle").data(e.handles,function(y){return y.type});P.exit().remove(),P.enter().append("rect").attr("class",function(y){return"handle handle--"+y.type}).attr("cursor",function(y){return Bt[y.type]}),g.each(u).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",v).filter(o).on("touchstart.brush",v).on("touchmove.brush",_).on("touchend.brush touchcancel.brush",A).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}l.move=function(g,N,P){g.tween?g.on("start.brush",function(y){f(this,arguments).beforestart().start(y)}).on("interrupt.brush end.brush",function(y){f(this,arguments).end(y)}).tween("brush",function(){var y=this,m=y.__brush,w=f(y,arguments),B=m.selection,K=e.input(typeof N=="function"?N.apply(this,arguments):N,m.extent),J=po(B,K);function fe(ne){m.selection=ne===1&&K===null?null:J(ne),u.call(y),w.brush()}return B!==null&&K!==null?fe:fe(1)}):g.each(function(){var y=this,m=arguments,w=y.__brush,B=e.input(typeof N=="function"?N.apply(y,m):N,w.extent),K=f(y,m).beforestart();Vo(y),w.selection=B===null?null:B,u.call(y),K.start(P).brush(P).end(P)})},l.clear=function(g,N){l.move(g,null,N)};function u(){var g=It(this),N=Ro(this).selection;N?(g.selectAll(".selection").style("display",null).attr("x",N[0][0]).attr("y",N[0][1]).attr("width",N[1][0]-N[0][0]).attr("height",N[1][1]-N[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(P){return P.type[P.type.length-1]==="e"?N[1][0]-a/2:N[0][0]-a/2}).attr("y",function(P){return P.type[0]==="s"?N[1][1]-a/2:N[0][1]-a/2}).attr("width",function(P){return P.type==="n"||P.type==="s"?N[1][0]-N[0][0]+a:a}).attr("height",function(P){return P.type==="e"||P.type==="w"?N[1][1]-N[0][1]+a:a})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function f(g,N,P){var y=g.__brush.emitter;return y&&(!P||!y.clean)?y:new h(g,N,P)}function h(g,N,P){this.that=g,this.args=N,this.state=g.__brush,this.active=0,this.clean=P}h.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,N){return this.starting?(this.starting=!1,this.emit("start",g,N)):this.emit("brush",g),this},brush:function(g,N){return this.emit("brush",g,N),this},end:function(g,N){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,N)),this},emit:function(g,N,P){var y=It(this.that).datum();r.call(g,this.that,new Bd(g,{sourceEvent:N,target:l,selection:e.output(this.state.selection),mode:P,dispatch:r}),y)}};function v(g){if(s&&!g.touches||!n.apply(this,arguments))return;var N=this,P=g.target.__data__.type,y=(i&&g.metaKey?P="overlay":P)==="selection"?or:i&&g.altKey?un:ln,m=e===Mo?null:Ed[P],w=e===Jn?null:jd[P],B=Ro(N),K=B.extent,J=B.selection,fe=K[0][0],ne,T,ee=K[0][1],F,G,we=K[1][0],V,oe,de=K[1][1],ie,re,ve=0,Z=0,W,ft=m&&w&&i&&g.shiftKey,X,Ke,Ee=Array.from(g.touches||[g],x=>{const Me=x.identifier;return x=Xi(x,N),x.point0=x.slice(),x.identifier=Me,x});Vo(N);var mt=f(N,arguments,!0).beforestart();if(P==="overlay"){J&&(W=!0);const x=[Ee[0],Ee[1]||Ee[0]];B.selection=J=[[ne=e===Mo?fe:et(x[0][0],x[1][0]),F=e===Jn?ee:et(x[0][1],x[1][1])],[V=e===Mo?we:xe(x[0][0],x[1][0]),ie=e===Jn?de:xe(x[0][1],x[1][1])]],Ee.length>1&&Oe(g)}else ne=J[0][0],F=J[0][1],V=J[1][0],ie=J[1][1];T=ne,G=F,oe=V,re=ie;var gt=It(N).attr("pointer-events","none"),at=gt.selectAll(".overlay").attr("cursor",Bt[P]);if(g.touches)mt.moved=Je,mt.ended=yt;else{var Ht=It(g.view).on("mousemove.brush",Je,!0).on("mouseup.brush",yt,!0);i&&Ht.on("keydown.brush",bt,!0).on("keyup.brush",je,!0),Ju(g.view)}u.call(N),mt.start(g,y.name);function Je(x){for(const Me of x.changedTouches||[x])for(const tt of Ee)tt.identifier===Me.identifier&&(tt.cur=Xi(Me,N));if(ft&&!X&&!Ke&&Ee.length===1){const Me=Ee[0];ir(Me.cur[0]-Me[0])>ir(Me.cur[1]-Me[1])?Ke=!0:X=!0}for(const Me of Ee)Me.cur&&(Me[0]=Me.cur[0],Me[1]=Me.cur[1]);W=!0,To(x),Oe(x)}function Oe(x){const Me=Ee[0],tt=Me.point0;var U;switch(ve=Me[0]-tt[0],Z=Me[1]-tt[1],y){case No:case or:{m&&(ve=xe(fe-ne,et(we-V,ve)),T=ne+ve,oe=V+ve),w&&(Z=xe(ee-F,et(de-ie,Z)),G=F+Z,re=ie+Z);break}case ln:{Ee[1]?(m&&(T=xe(fe,et(we,Ee[0][0])),oe=xe(fe,et(we,Ee[1][0])),m=1),w&&(G=xe(ee,et(de,Ee[0][1])),re=xe(ee,et(de,Ee[1][1])),w=1)):(m<0?(ve=xe(fe-ne,et(we-ne,ve)),T=ne+ve,oe=V):m>0&&(ve=xe(fe-V,et(we-V,ve)),T=ne,oe=V+ve),w<0?(Z=xe(ee-F,et(de-F,Z)),G=F+Z,re=ie):w>0&&(Z=xe(ee-ie,et(de-ie,Z)),G=F,re=ie+Z));break}case un:{m&&(T=xe(fe,et(we,ne-ve*m)),oe=xe(fe,et(we,V+ve*m))),w&&(G=xe(ee,et(de,F-Z*w)),re=xe(ee,et(de,ie+Z*w)));break}}oe<T&&(m*=-1,U=ne,ne=V,V=U,U=T,T=oe,oe=U,P in sr&&at.attr("cursor",Bt[P=sr[P]])),re<G&&(w*=-1,U=F,F=ie,ie=U,U=G,G=re,re=U,P in lr&&at.attr("cursor",Bt[P=lr[P]])),B.selection&&(J=B.selection),X&&(T=J[0][0],oe=J[1][0]),Ke&&(G=J[0][1],re=J[1][1]),(J[0][0]!==T||J[0][1]!==G||J[1][0]!==oe||J[1][1]!==re)&&(B.selection=[[T,G],[oe,re]],u.call(N),mt.brush(x,y.name))}function yt(x){if(Fd(x),x.touches){if(x.touches.length)return;s&&clearTimeout(s),s=setTimeout(function(){s=null},500)}else Zu(x.view,W),Ht.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);gt.attr("pointer-events","all"),at.attr("cursor",Bt.overlay),B.selection&&(J=B.selection),zd(J)&&(B.selection=null,u.call(N)),mt.end(x,y.name)}function bt(x){switch(x.keyCode){case 16:{ft=m&&w;break}case 18:{y===ln&&(m&&(V=oe-ve*m,ne=T+ve*m),w&&(ie=re-Z*w,F=G+Z*w),y=un,Oe(x));break}case 32:{(y===ln||y===un)&&(m<0?V=oe-ve:m>0&&(ne=T-ve),w<0?ie=re-Z:w>0&&(F=G-Z),y=No,at.attr("cursor",Bt.selection),Oe(x));break}default:return}To(x)}function je(x){switch(x.keyCode){case 16:{ft&&(X=Ke=ft=!1,Oe(x));break}case 18:{y===un&&(m<0?V=oe:m>0&&(ne=T),w<0?ie=re:w>0&&(F=G),y=ln,Oe(x));break}case 32:{y===No&&(x.altKey?(m&&(V=oe-ve*m,ne=T+ve*m),w&&(ie=re-Z*w,F=G+Z*w),y=un):(m<0?V=oe:m>0&&(ne=T),w<0?ie=re:w>0&&(F=G),y=ln),at.attr("cursor",Bt[P]),Oe(x));break}default:return}To(x)}}function _(g){f(this,arguments).moved(g)}function A(g){f(this,arguments).ended(g)}function ue(){var g=this.__brush||{selection:null};return g.extent=ar(t.apply(this,arguments)),g.dim=e,g}return l.extent=function(g){return arguments.length?(t=typeof g=="function"?g:So(ar(g)),l):t},l.filter=function(g){return arguments.length?(n=typeof g=="function"?g:So(!!g),l):n},l.touchable=function(g){return arguments.length?(o=typeof g=="function"?g:So(!!g),l):o},l.handleSize=function(g){return arguments.length?(a=+g,l):a},l.keyModifiers=function(g){return arguments.length?(i=!!g,l):i},l.on=function(){var g=r.on.apply(r,arguments);return g===r?l:g},l}function Kd(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function so(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,o=e.slice(0,n);return[o.length>1?o[0]+o.slice(2):o,+e.slice(n+1)]}function vn(e){return e=so(Math.abs(e)),e?e[1]:NaN}function Yd(e,t){return function(n,o){for(var i=n.length,r=[],a=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>o&&(s=Math.max(1,o-l)),r.push(n.substring(i-=s,i+s)),!((l+=s+1)>o));)s=e[a=(a+1)%e.length];return r.reverse().join(t)}}function Gd(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Qd=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function lo(e){if(!(t=Qd.exec(e)))throw new Error("invalid format: "+e);var t;return new si({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}lo.prototype=si.prototype;function si(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}si.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Jd(e){e:for(var t=e.length,n=1,o=-1,i;n<t;++n)switch(e[n]){case".":o=i=n;break;case"0":o===0&&(o=n),i=n;break;default:if(!+e[n])break e;o>0&&(o=0);break}return o>0?e.slice(0,o)+e.slice(i+1):e}var ea;function Zd(e,t){var n=so(e,t);if(!n)return e+"";var o=n[0],i=n[1],r=i-(ea=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=o.length;return r===a?o:r>a?o+new Array(r-a+1).join("0"):r>0?o.slice(0,r)+"."+o.slice(r):"0."+new Array(1-r).join("0")+so(e,Math.max(0,t+r-1))[0]}function ur(e,t){var n=so(e,t);if(!n)return e+"";var o=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+o:o.length>i+1?o.slice(0,i+1)+"."+o.slice(i+1):o+new Array(i-o.length+2).join("0")}const cr={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Kd,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>ur(e*100,t),r:ur,s:Zd,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function dr(e){return e}var fr=Array.prototype.map,mr=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function xd(e){var t=e.grouping===void 0||e.thousands===void 0?dr:Yd(fr.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",o=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",r=e.numerals===void 0?dr:Gd(fr.call(e.numerals,String)),a=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(h){h=lo(h);var v=h.fill,_=h.align,A=h.sign,ue=h.symbol,g=h.zero,N=h.width,P=h.comma,y=h.precision,m=h.trim,w=h.type;w==="n"?(P=!0,w="g"):cr[w]||(y===void 0&&(y=12),m=!0,w="g"),(g||v==="0"&&_==="=")&&(g=!0,v="0",_="=");var B=ue==="$"?n:ue==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",K=ue==="$"?o:/[%p]/.test(w)?a:"",J=cr[w],fe=/[defgprs%]/.test(w);y=y===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,y)):Math.max(0,Math.min(20,y));function ne(T){var ee=B,F=K,G,we,V;if(w==="c")F=J(T)+F,T="";else{T=+T;var oe=T<0||1/T<0;if(T=isNaN(T)?l:J(Math.abs(T),y),m&&(T=Jd(T)),oe&&+T==0&&A!=="+"&&(oe=!1),ee=(oe?A==="("?A:s:A==="-"||A==="("?"":A)+ee,F=(w==="s"?mr[8+ea/3]:"")+F+(oe&&A==="("?")":""),fe){for(G=-1,we=T.length;++G<we;)if(V=T.charCodeAt(G),48>V||V>57){F=(V===46?i+T.slice(G+1):T.slice(G))+F,T=T.slice(0,G);break}}}P&&!g&&(T=t(T,1/0));var de=ee.length+T.length+F.length,ie=de<N?new Array(N-de+1).join(v):"";switch(P&&g&&(T=t(ie+T,ie.length?N-F.length:1/0),ie=""),_){case"<":T=ee+T+F+ie;break;case"=":T=ee+ie+T+F;break;case"^":T=ie.slice(0,de=ie.length>>1)+ee+T+F+ie.slice(de);break;default:T=ie+ee+T+F;break}return r(T)}return ne.toString=function(){return h+""},ne}function f(h,v){var _=u((h=lo(h),h.type="f",h)),A=Math.max(-8,Math.min(8,Math.floor(vn(v)/3)))*3,ue=Math.pow(10,-A),g=mr[8+A/3];return function(N){return _(ue*N)+g}}return{format:u,formatPrefix:f}}var zn,ta,na;ef({thousands:",",grouping:[3],currency:["$",""]});function ef(e){return zn=xd(e),ta=zn.format,na=zn.formatPrefix,zn}function tf(e){return Math.max(0,-vn(Math.abs(e)))}function nf(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(vn(t)/3)))*3-vn(Math.abs(e)))}function of(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,vn(t)-vn(e))+1}function li(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const pr=Symbol("implicit");function oa(){var e=new Ei,t=[],n=[],o=pr;function i(r){let a=e.get(r);if(a===void 0){if(o!==pr)return o;e.set(r,a=t.push(r)-1)}return n[a%n.length]}return i.domain=function(r){if(!arguments.length)return t.slice();t=[],e=new Ei;for(const a of r)e.has(a)||e.set(a,t.push(a)-1);return i},i.range=function(r){return arguments.length?(n=Array.from(r),i):n.slice()},i.unknown=function(r){return arguments.length?(o=r,i):o},i.copy=function(){return oa(t,n).unknown(o)},li.apply(i,arguments),i}function ia(){var e=oa().unknown(void 0),t=e.domain,n=e.range,o=0,i=1,r,a,s=!1,l=0,u=0,f=.5;delete e.unknown;function h(){var v=t().length,_=i<o,A=_?i:o,ue=_?o:i;r=(ue-A)/Math.max(1,v-l+u*2),s&&(r=Math.floor(r)),A+=(ue-A-r*(v-l))*f,a=r*(1-l),s&&(A=Math.round(A),a=Math.round(a));var g=pl(v).map(function(N){return A+r*N});return n(_?g.reverse():g)}return e.domain=function(v){return arguments.length?(t(v),h()):t()},e.range=function(v){return arguments.length?([o,i]=v,o=+o,i=+i,h()):[o,i]},e.rangeRound=function(v){return[o,i]=v,o=+o,i=+i,s=!0,h()},e.bandwidth=function(){return a},e.step=function(){return r},e.round=function(v){return arguments.length?(s=!!v,h()):s},e.padding=function(v){return arguments.length?(l=Math.min(1,u=+v),h()):l},e.paddingInner=function(v){return arguments.length?(l=Math.min(1,v),h()):l},e.paddingOuter=function(v){return arguments.length?(u=+v,h()):u},e.align=function(v){return arguments.length?(f=Math.max(0,Math.min(1,v)),h()):f},e.copy=function(){return ia(t(),[o,i]).round(s).paddingInner(l).paddingOuter(u).align(f)},li.apply(h(),arguments)}function rf(e){return function(){return e}}function af(e){return+e}var vr=[0,1];function cn(e){return e}function Wo(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:rf(isNaN(t)?NaN:.5)}function sf(e,t){var n;return e>t&&(n=e,e=t,t=n),function(o){return Math.max(e,Math.min(t,o))}}function lf(e,t,n){var o=e[0],i=e[1],r=t[0],a=t[1];return i<o?(o=Wo(i,o),r=n(a,r)):(o=Wo(o,i),r=n(r,a)),function(s){return r(o(s))}}function uf(e,t,n){var o=Math.min(e.length,t.length)-1,i=new Array(o),r=new Array(o),a=-1;for(e[o]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<o;)i[a]=Wo(e[a],e[a+1]),r[a]=n(t[a],t[a+1]);return function(s){var l=il(e,s,1,o)-1;return r[l](i[l](s))}}function cf(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function df(){var e=vr,t=vr,n=po,o,i,r,a=cn,s,l,u;function f(){var v=Math.min(e.length,t.length);return a!==cn&&(a=sf(e[0],e[v-1])),s=v>2?uf:lf,l=u=null,h}function h(v){return v==null||isNaN(v=+v)?r:(l||(l=s(e.map(o),t,n)))(o(a(v)))}return h.invert=function(v){return a(i((u||(u=s(t,e.map(o),Pt)))(v)))},h.domain=function(v){return arguments.length?(e=Array.from(v,af),f()):e.slice()},h.range=function(v){return arguments.length?(t=Array.from(v),f()):t.slice()},h.rangeRound=function(v){return t=Array.from(v),n=wc,f()},h.clamp=function(v){return arguments.length?(a=v?!0:cn,f()):a!==cn},h.interpolate=function(v){return arguments.length?(n=v,f()):n},h.unknown=function(v){return arguments.length?(r=v,h):r},function(v,_){return o=v,i=_,f()}}function ff(){return df()(cn,cn)}function mf(e,t,n,o){var i=fl(e,t,n),r;switch(o=lo(o??",f"),o.type){case"s":{var a=Math.max(Math.abs(e),Math.abs(t));return o.precision==null&&!isNaN(r=nf(i,a))&&(o.precision=r),na(o,a)}case"":case"e":case"g":case"p":case"r":{o.precision==null&&!isNaN(r=of(i,Math.max(Math.abs(e),Math.abs(t))))&&(o.precision=r-(o.type==="e"));break}case"f":case"%":{o.precision==null&&!isNaN(r=tf(i))&&(o.precision=r-(o.type==="%")*2);break}}return ta(o)}function pf(e){var t=e.domain;return e.ticks=function(n){var o=t();return dl(o[0],o[o.length-1],n??10)},e.tickFormat=function(n,o){var i=t();return mf(i[0],i[i.length-1],n??10,o)},e.nice=function(n){n==null&&(n=10);var o=t(),i=0,r=o.length-1,a=o[i],s=o[r],l,u,f=10;for(s<a&&(u=a,a=s,s=u,u=i,i=r,r=u);f-- >0;){if(u=Uo(a,s,n),u===l)return o[i]=a,o[r]=s,t(o);if(u>0)a=Math.floor(a/u)*u,s=Math.ceil(s/u)*u;else if(u<0)a=Math.ceil(a*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function ra(){var e=ff();return e.copy=function(){return cf(e,ra())},li.apply(e,arguments),pf(e)}function $n(e,t,n){this.k=e,this.x=t,this.y=n}$n.prototype={constructor:$n,scale:function(e){return e===1?this:new $n(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new $n(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};$n.prototype;function hr(e,t,n){const o=new D(10).pow(t-n);return new D(1.0001).pow(e).mul(o)}const vf=ct({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""}},setup(e,t){const n=L(1),o=L(""),i=L(""),r=te(()=>{var m,w,B;return h.sqrtPriceX64ToPrice((m=e.poolInfo)==null?void 0:m.current_sqrt_price,(w=e.poolInfo)==null?void 0:w.coinA.decimals,(B=e.poolInfo)==null?void 0:B.coinB.decimals).toString()}),a=te(()=>{let m=0;return e.direction?m=(Number(e.minPrice)/Number(r.value)-1)*100:m=(Number(e.minPrice)/Number(1/Number(r.value))-1)*100,m=m>0&&m<.1?.1:m,m=m<0&&m>-.1?-.1:m,m}),s=te(()=>{let m=0;return e.direction?m=(Number(e.maxPrice)/Number(r.value)-1)*100:m=(Number(e.maxPrice)/Number(1/Number(r.value))-1)*100,m=m>0&&m<.1?.1:m,m=m<0&&m>-.1?-.1:m,m}),l=vt(),u=te(()=>l),f=te(()=>u.value.chainName?Ko(u.value.chainName):{}),{TickMath:h,getNearestTickByTick:v}=f.value,_=()=>{const m=n.value/2;n.value=m,g(e.poolInfo,m)},A=()=>{const m=n.value*2;n.value=m,g(e.poolInfo,m)},ue=(m=[])=>{let w=6;const B=Math.abs(Number(m[0])-Number(m[m.length-1]));return B>=6?w=0:B>=1?w=1:B>=.1?w=2:B>=.01?w=3:B>=.001?w=4:B>=1e-4?w=5:B>=1e-5?w=6:B>=1e-6?w=7:B>=1e-7&&(w=8),w},g=(m,w=1)=>{if(m&&m.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const B=Number(e.poolInfo.current_tick_index);console.log("0117###dataProcessing###currentTick###",B),console.log("0117###dataProcessing###minPrice###",e.minPrice),console.log("0117###dataProcessing###maxPrice###",e.maxPrice),console.log("0117###dataProcessing###poolInfo###",e.poolInfo);let K=B+100*w,J=B-100*w,fe,ne;e.maxPrice==="∞"?ne=0:e.direction?ne=h.priceToTickIndex(new D(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):ne=h.priceToTickIndex(new D(1/Number(e.minPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals),e.minPrice==="0"?fe=0:e.direction?fe=h.priceToTickIndex(new D(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):fe=h.priceToTickIndex(new D(1/Number(e.maxPrice)),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals);let T=0;if(e.currentPriceTab!=="full range"){if(B>=fe&&B<=ne){const Z=B-fe,W=ne-B;T=Math.max(Math.abs(Z),Math.abs(W))}else B<fe?T=Math.abs(ne-B):T=Math.abs(B-fe);K=B+T+100*w,J=B-T-100*w}else{const Z=(Math.abs(B)>5e3,2e4);K=B+Z*w,J=B-Z*w}J<-443636&&(J=-443636),K>443636&&(K=443636);const ee=new D(m.liquidity).div(Math.pow(10,8)).toString(),F=e.tickList;console.log("0117####drawChart####tick_info_array####",F);const G=[],we=[];let V={};for(let Z=0;Z<F.length;Z++){if(V=F[Z],V.index<=B&&V.index>=J){if(G.length<1&&Z!==0){const W=F[Z-1];G.unshift({...W,index:J})}G.unshift(V)}else if(V.index>B&&V.index<=K&&(we.push(V),G.length<1&&Z!==0)){const W=F[Z-1];G.push({...W,index:J})}if(V.index>K){const W=F[Z];if(we.push({...W,index:K}),G.length<1&&Z!==0){const ft=F[Z-1];G.push({...ft,index:J})}break}}let oe="0";for(let Z=G.length-1;Z>=0;Z--)oe=new D(oe).plus(new D(G[Z].liquidityNet.toString()).div(Math.pow(10,8))).toString(),G[Z].liquityAmount=oe;let de=ee;for(let Z=0;Z<we.length;Z++)de=new D(de).plus(new D(we[Z].liquidityNet.toString()).div(Math.pow(10,8))).toString(),we[Z].liquityAmount=de;let ie=[];const re=F&&F.length>0?{index:B,liquityAmount:Number(ee)}:{index:B,liquityAmount:0};(G.length>0||we.length>0)&&(ie=[...G.reverse(),re,...we],e.direction||(ie=ie.reverse()));const ve=[];F.forEach(Z=>{ve.push({...Z,liquidityGross:Z.liquidityGross.toString(),liquidityNet:Z.liquidityNet.toString()})}),console.log("0117####drawChart####testTickInfoArray####",ve),console.log("0117####drawChart####currentLiquity####",ee),P(ie,J,K,fe,ne,B)}};let N=L(!1);uo(()=>{document.body.clientWidth<750?N.value=!1:N.value=!0,window.onresize=()=>{document.body.clientWidth<750?N.value=!1:N.value=!0,g(e.poolInfo,n.value)}});const P=(m,w,B,K,J,fe)=>{console.log("0117####drawChart####chartData####",m),console.log("0117####drawChart####tickMin####",w),console.log("0117####drawChart####tickMax####",B),console.log("0117####drawChart####minPriceTick####",K),console.log("0117####drawChart####maxPriceTick####",J),console.log("0117####drawChart####currentTick####",fe),console.log("0117####drawChart####props.direction####",e.direction),console.log("0518###newd3###props.before7dContractPriceLowest###",e.before7dContractPriceLowest),console.log("0518###newd3###props.before7dContractPriceHighest###",e.before7dContractPriceHighest);let ne,T;e.direction?(ne=e.before7dContractPriceLowest?h.priceToTickIndex(new D(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",T=e.before7dContractPriceHighest?h.priceToTickIndex(new D(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(ne=e.before7dContractPriceLowest?h.priceToTickIndex(new D(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",T=e.before7dContractPriceHighest?h.priceToTickIndex(new D(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const ee={top:30,right:35,bottom:20,left:55};let F,G;N.value?(F=460-ee.left-ee.right,G=205-ee.top-ee.bottom):(F=340-ee.left-ee.right,G=205-ee.top-ee.bottom);const we=B-w,V=parseInt(String(we/4));let oe=[w+V/4,w+V,w+2*V,B-V,B-V/4];const de=w,ie=B,re=F/(ie-de);e.currentPriceTab==="full range"&&(oe=[w,w+2*V,B]),console.log("0117####drawChart####xArr####",oe),console.log("0117####drawChart####utickMin####",de),console.log("0117####drawChart####utickMax####",ie),console.log("0117####drawChart####unit####",re);const ve=oe.map(U=>e.direction?hr(U,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new D(1).div(hr(U,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),Z=ue(ve);It("#chart").selectAll("*").remove();const W=It("#chart").attr("width",F+ee.left+ee.right).attr("height",G+ee.top+ee.bottom).append("g").attr("transform",`translate(${ee.left},${ee.right})`),ft=ml(m,function(U){return Number(Math.abs(U.liquityAmount))})||0,X=ra().range([0,G]).domain([ft,0]);ia().rangeRound([0,F]).padding(.1);const Ee=W.append("g").attr("id","barsBox").selectAll("rect").data(m).enter().append("rect");u.value.theme=="default"?Ee.attr("x",function(U,Q){return Q===0?0:e.direction?Math.abs(U.index-de)*re:Math.abs(ie-U.index)*re}).attr("y",function(U,Q){return e.direction?Q===m.length-1?0:X(U.liquityAmount):Q===m.length-1?0:X(m[Q+1].liquityAmount)}).attr("width",function(U,Q){return Q===0&&m.length===1&&U.liquityAmount>0?F:(e.direction,Q!==m.length-1?Math.abs(m[Q+1].index-U.index)*re:0)}).attr("height",function(U,Q){return Q===0&&m.length===1&&U.liquityAmount>0?G:e.direction?Q===m.length-1?0:G-X(U.liquityAmount):Q===m.length-1?0:G-X(m[Q+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):Ee.attr("x",function(U,Q){return Q===0?0:e.direction?Math.abs(U.index-de)*re:Math.abs(ie-U.index)*re}).attr("y",function(U,Q){return e.direction?Q===m.length-1?0:X(Math.abs(U.liquityAmount)):Q===m.length-1?0:X(Math.abs(m[Q+1].liquityAmount))}).attr("width",function(U,Q){return Q===0&&m.length===1&&U.liquityAmount>0?F:(e.direction,Q!==m.length-1?Math.abs(m[Q+1].index-U.index)*re:0)}).attr("height",function(U,Q){if(Q===0&&m.length===1&&U.liquityAmount>0)return G;if(e.direction)return Q===m.length-1?0:Number(U.liquityAmount)?G-X(Math.abs(U.liquityAmount)):0;{if(Q===m.length-1)return 0;const nt=G-X(Math.abs(m[Q+1].liquityAmount));return Number(m[Q+1].liquityAmount)?nt:0}}).attr("fill","#407497").attr("class","bars").attr("stroke-width",1).attr("stroke","#407497");const mt=W.append("g");mt.append("line").attr("x1",0).attr("y1",155).attr("x2",F).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const gt=mt.append("g");let at=0;if(e.direction){for(let U=0;U<oe.length;U++){const Q=Be(ve[U],Z)||"0";console.log("0423####price####",Q),ve.push(Q);const nt=Math.abs(oe[U]-de)*re;let Re=0;for(let k=0;k<Q.length;k++)Q[k]==="1"?Re+=4.02:Q[k]==="."?Re+=2.64:Q[k]==="7"?Re+=5.48:Re+=6;console.log(nt,"x=>>>"),gt.append("text").text(Q).attr("x",nt-Re/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}at=Math.abs(fe-de)*re}else{for(let U=oe.length-1;U>=0;U--){const Q=Be(ve[U],Z)||0;ve.push(Q);const nt=Math.abs(oe[U]-ie)*re;let Re=0;for(let k=0;k<Q.length;k++)Q[k]==="1"?Re+=4.02:Q[k]==="."?Re+=2.64:Q[k]==="7"?Re+=5.48:Re+=6;gt.append("text").text(Q).attr("x",nt-Re/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}at=Math.abs(fe-ie)*re}(u.value.theme=="default"?W.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):W.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+at+", 0)");let Je,Oe,yt,bt;e.direction?(Je=K<de?-100:Math.abs(K-de)*re,Oe=J<de?-100:Math.abs(J-de)*re,yt=ne<de?-100:Math.abs(ne-de)*re,bt=T<de?-100:Math.abs(T-de)*re):(Oe=K<de?-100:Math.abs(ie-K)*re,Je=J<de?-100:Math.abs(ie-J)*re,bt=ne<de?-100:Math.abs(ie-ne)*re,yt=T<de?-100:Math.abs(ie-T)*re),e.minPrice==="0"&&(Je=0),e.maxPrice==="∞"&&(Oe=F),N.value?o.value=F-Je+60+"px":o.value=F-Je+52+"px",i.value=Oe+74+"px",ne&&yt<F&&W.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+yt+", 0)"),T&&bt<F&&W.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+bt+", 0)");const je=W.append("g").attr("id","left-handle"),x=W.append("g").attr("id","right-handle");u.value.theme=="default"?(je.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),je.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),je.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),je.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),x.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),x.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),x.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),x.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):(je.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),je.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),je.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),je.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),x.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),x.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),x.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),x.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),je.attr("transform","translate("+Je+", 0)"),x.attr("transform","translate("+Oe+", 0)");const Me=Vd().extent([[0,0],[F,G]]).handleSize(30).on("end",tt);W.append("g").attr("class","brush").call(Me).call(Me.move,[Je,Oe]);function tt(U){if(!U.sourceEvent||!U.selection)return;je.attr("transform","translate("+U.selection[0]+", 0)"),x.attr("transform","translate("+U.selection[1]+", 0)"),N.value?o.value=F-U.selection[0]+60+"px":o.value=F-U.selection[0]+52+"px",i.value=U.selection[1]+74+"px";let Q,nt,Re=0,k=0;e.direction?(Re=v(U.selection[0]/re+de,Number(e.poolInfo.tickSpacing)),Q=h.tickIndexToPrice(Re,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),k=v(U.selection[1]/re+de,Number(e.poolInfo.tickSpacing)),nt=h.tickIndexToPrice(k,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()):(k=v(ie-U.selection[0]/re,Number(e.poolInfo.tickSpacing)),Q=1/h.tickIndexToPrice(k,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber(),Re=v(ie-U.selection[1]/re,Number(e.poolInfo.tickSpacing)),nt=1/h.tickIndexToPrice(Re,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toNumber()),t.emit("onChangeMinPrice",String(Be(String(Q),6))),t.emit("onChangeMaxPrice",String(Be(String(nt),6)))}u.value.theme=="default"?It(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):It(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632")};L(""),Ce(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab],([m,w,B,K])=>{console.log(m,w,B,B>w,"poolInfo && minPrice && maxPrice && (maxPrice > minPrice)"),m&&w&&B&&(B=="∞"||Number(B)>Number(w))&&g(m,n.value)},{immediate:!0});const y=L(!0);return Ce(()=>e.chartLoading,(m,w)=>{m!==w&&(y.value=m)},{immediate:!0,deep:!0}),{store:u,loading:y,zoomOut:_,zoomIn:A,rangeSizeLower:a,rangeSizeUpper:s,rangeSizeLowerPosition:o,rangeSizeUpperPosition:i,decimalFormat:fn,numberformat:Lo}}});const hf=e=>(jt("data-v-ba1fb2b2"),e=e(),Dt(),e),gf={class:"chart-box"},yf={class:"chart"},bf={class:"zoom"},kf=hf(()=>d("svg",{id:"chart"},null,-1));function wf(e,t,n,o,i,r){return b(),I("div",gf,[Ta(d("div",yf,[d("div",bf,[d("div",{class:"amplification",onClick:t[0]||(t[0]=(...a)=>e.zoomOut&&e.zoomOut(...a))}),d("div",{class:"narrow",onClick:t[1]||(t[1]=(...a)=>e.zoomIn&&e.zoomIn(...a))})]),e.currentPriceTab!=="full range"?(b(),I("div",{key:0,class:"range-size range-size-lower",style:Ui({right:e.rangeSizeLowerPosition})},C(("numberformat"in e?e.numberformat:ye(Lo))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):O("",!0),e.currentPriceTab!=="full range"?(b(),I("div",{key:1,class:"range-size range-size-upper",style:Ui({left:e.rangeSizeUpperPosition})},C(("numberformat"in e?e.numberformat:ye(Lo))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):O("",!0),kf],512),[[Na,!e.loading]])])}const Cf=dt(vf,[["render",wf],["__scopeId","data-v-ba1fb2b2"]]),_f=ct({props:{poolInfo:{type:Object,default:()=>({})},aprRewardsParameter:{type:Number,default:30},label:{type:Boolean,default:!0}},setup(e,t){const n=L(""),o=L(""),i=L(""),r=vt(),a=te(()=>r);console.log(e,"props124====>");const s=en(),l=te(()=>s),u=(y,m)=>y&&m?Oa.plus(Po(y),Po(m)):y>0?y:0,f=y=>{let m=0;return y&&y.forEach(w=>{m+=Po(String(w))}),String(m)},h=L([]),v=L([]),_=L(""),A=L(""),ue=L(!0);Ce(()=>[a.value.newTopPoolsObj,e.poolInfo,l.value.tokensObj,e.aprRewardsParameter],async([y,m,w])=>{var B;if(y&&m&&w){const K=y[m==null?void 0:m.poolAddress];if(K){console.log(K,"===>stats"),n.value=K&&K.apr_7day&&K.apr_7day.replace("%","")||"0",A.value=f(K&&K.rewarder_apr),_.value=u(K&&K.apr_7day,K&&f(K.rewarder_apr)),console.log(e.poolInfo,"===>props.poolInfo"),console.log(_.value,"===> rewardApr.value"),o.value=Fe(K.tvl_in_usd,2),i.value=Fe(K.vol_in_usd_24h,2);const J=m&&e.poolInfo.rewarder_infos||[],fe=[];for(let T=0;T<J.length;T++){const ee=J[T];if(w[ee.coinAddress]){const F=w[ee.coinAddress].decimals,G=fn(ee.emissionsEveryDay/Math.pow(10,F),4),we=Number(G)>0?Fe(G):G,V=fn(Number(G)*((B=l.value.RATES[ee.coinAddress])==null?void 0:B.price),4);fe.push({...ee,logoUrl:w[ee.coinAddress].logoURI,day:we,dayUSD:V,symbol:w[ee.coinAddress].symbol,rewarder_display:m&&m[`rewarder_display${T+1}`]?m[`rewarder_display${T+1}`]:!1})}}console.log(fe,"mockArr206===>"),h.value=fe.filter(T=>T.rewarder_display);const ne=[];fe.forEach((T,ee)=>{w[T.coinAddress]&&ne.push({...T,symbol:w[T.coinAddress].symbol,rewarderApr:K.rewarder_apr[ee]&&K.rewarder_apr[ee].replace("%","")})}),v.value=ne.filter(T=>T.rewarder_display)}else n.value="0",o.value="--",i.value="--",_.value=="0";console.log(v.value,"===>rewarderArr.value"),ue.value=!1}},{immediate:!0,deep:!0});const g=()=>{t.emit("reviseValue")},N=y=>{var m;return(y==null?void 0:y.logoURI)||(y==null?void 0:y.logo_url)||((m=l.value.tokensObj[y==null?void 0:y.address])==null?void 0:m.logo_url)||(a.value.theme==="default"?ze("/image/coins/unknown.png"):ze("/image/coins/sui-unknown.png"))},P=te(()=>l.value.tokensObj);return console.log(P.value,"==>tokensObj"),console.log(e.poolInfo,"props.poolInfo====>"),{tokensObj:P,rewarderInfo:h,rewarderArr:v,rewardApr:_,rewardAprList:A,apr:n,liquidityTvl:o,vol24:i,addCommom:Fe,reviseValue:g,loading:ue,getCoinIcon:N,store:r}}});const go=e=>(jt("data-v-44b1eaa2"),e=e(),Dt(),e),$f={key:0,class:"pool-info"},Pf=go(()=>d("use",{"xlink:href":"#icon-icon_on"},null,-1)),If=[Pf],Af={key:0,class:"info-block-container"},Sf={class:"info-block"},Tf={class:"coin-tips"},Nf={class:"left"},Mf=["src"],Rf={class:"address"},Lf={key:0,class:"pool-warning"},qf=go(()=>d("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Uf=[qf],Of={class:"info-block"},Bf={class:"coin-tips"},Ff={class:"left"},Ef=["src"],jf={class:"address"},Df={key:0,class:"pool-warning"},Hf=go(()=>d("use",{"xlink:href":"#icon-icon-copy"},null,-1)),Xf=[Hf],zf={class:"info-block"},Vf={class:"leabl"},Wf={class:"text"},Kf={class:"apr-hover-content"},Yf={class:"info-block"},Gf={class:"leabl"},Qf={class:"text"},Jf={class:"info-block"},Zf={class:"leabl"},xf={class:"text"},em={class:"info-block"},tm={class:"leabl"},nm={class:"text"},om={key:1,class:"pool-rewards-info"},im={class:"rewards-list-all"},rm=go(()=>d("div",{class:"icon-sign"},null,-1)),am=["src"],sm={class:"rewards-value"};function lm(e,t,n,o,i,r){const a=Ua,s=Cr;return e.poolInfo?(b(),I("div",$f,[e.loading?(b(),be(s,{key:1})):(b(),I(Ft,{key:0},[d("div",{class:Ne(e.label?"pool-info-border pool-info-title":"pool-info-title")},[He(C(e.$t("newAdd.poolInfo"))+" ",1),(b(),I("svg",{class:Ne(e.label?"show-icon icon":"icon"),"aria-hidden":"true",onClick:t[0]||(t[0]=l=>e.reviseValue())},If,2))],2),e.label?(b(),I("div",Af,[d("div",Sf,[d("div",Tf,[d("div",Nf,[d("img",{src:e.getCoinIcon(e.poolInfo.token_a),alt:""},null,8,Mf),d("div",Rf,C(e.poolInfo.token_a.address),1),e.tokensObj&&e.poolInfo&&e.poolInfo.coin_a_address&&e.tokensObj[e.poolInfo.coin_a_address]&&e.tokensObj[e.poolInfo.coin_a_address].isSelfBuilt?(b(),I("div",Lf)):O("",!0),(b(),I("svg",{class:"icon","aria-hidden":"true",onClick:t[1]||(t[1]=l=>e.store.copy(e.poolInfo.token_a.address&&e.poolInfo.token_a.address))},Uf))])])]),d("div",Of,[d("div",Bf,[d("div",Ff,[d("img",{src:e.getCoinIcon(e.poolInfo.token_b),alt:""},null,8,Ef),d("div",jf,C(e.poolInfo.token_b.address),1),e.tokensObj&&e.poolInfo&&e.poolInfo.coin_b_address&&e.tokensObj[e.poolInfo.coin_b_address]&&e.tokensObj[e.poolInfo.coin_b_address].isSelfBuilt?(b(),I("div",Df)):O("",!0),(b(),I("svg",{class:"icon","aria-hidden":"true",onClick:t[2]||(t[2]=l=>e.store.copy(e.poolInfo.token_b.address&&e.poolInfo.token_b.address))},Xf))])])]),d("div",zf,[d("div",Vf,C(e.$t("common.apr")),1),d("div",Wf,[He(C(e.poolInfo.is_display_rewarder?e.rewardApr>0&&e.rewardApr<.01?"<0.01":("addCommom"in e?e.addCommom:ye(Fe))(e.rewardApr,2):e.apr>0&&e.apr<.01?"<0.01":("addCommom"in e?e.addCommom:ye(Fe))(e.apr,2))+"% ",1),d("div",Kf,[ke(a,{"l-item":{apr:e.apr,aprTotal:e.rewardApr,rewarder_apr:e.rewardAprList,is_display_rewarder:e.poolInfo.is_display_rewarder},"rewarder-info":e.rewarderArr},null,8,["l-item","rewarder-info"])])])]),d("div",Yf,[d("div",Gf,C(e.$t("common.liquidity")),1),d("div",Qf,"$"+C(e.liquidityTvl),1)]),d("div",Jf,[d("div",Zf,C(e.$t("common.volume24h")),1),d("div",xf,"$"+C(e.vol24),1)]),d("div",em,[d("div",tm,C(e.$t("newAdd.tickSpacing")),1),d("div",nm,C(e.poolInfo&&e.poolInfo.tick_spacing),1)])])):O("",!0),e.poolInfo.is_display_rewarder&&e.label&&e.rewarderInfo&&e.rewarderInfo.length>0?(b(),I("div",om,[He(C("Farming Bonus")+" "),d("div",im,[(b(!0),I(Ft,null,wn(e.rewarderInfo,l=>(b(),I("div",{key:l,class:Ne(["rewards-list",l.day==0?"rewards-none":""])},[rm,d("img",{src:l.logoUrl,alt:""},null,8,am),d("div",sm,[d("p",null,C(l.day)+" "+C(l.symbol)+" / "+C(e.$t("newAdd.day"))+" ",1)])],2))),128))])])):O("",!0)],64))])):O("",!0)}const um=dt(_f,[["render",lm],["__scopeId","data-v-44b1eaa2"]]),cm=ct({components:{Modal:Go},props:{poolInfo:{type:Object,required:!0}},setup(e){const t=L({}),n=vt(),o=te(()=>n),i=te(()=>o.value.chainName),r=te(()=>Wn[i.value]);let a=L(!0);const s=en(),l=te(()=>s),u=Yo(),f=te(()=>e.poolInfo.needReverse);return Ce(()=>l.value.currentPositionInfo,v=>{console.log(v,"==>newVal111111"),v&&(t.value=v)},{immediate:!0}),{getExplorerUrl:qo,addCommom:Fe,router:u,pools:l,positionInfo:t,decimalFormat:fn,rateChange:a,config:r,importIcon:ze,store:o,chainName:i,checkNullObj:$t,needReverse:f,getCoinIcon:v=>{var _;return(v==null?void 0:v.logoURI)||(v==null?void 0:v.logo_url)||((_=l.value.tokensObj[v==null?void 0:v.address])==null?void 0:_.logo_url)||(o.value.theme==="default"?ze("/image/coins/unknown.png"):ze("/image/coins/sui-unknown.png"))},decimalUi:Be}}});const yo=e=>(jt("data-v-799a9818"),e=e(),Dt(),e),dm=yo(()=>d("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),fm={class:"rejected-container"},mm={class:"coin-pair"},pm=yo(()=>d("use",{"xlink:href":"#icon-icon-copy"},null,-1)),vm=[pm],hm=["href"],gm=yo(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-icon-jump"})],-1)),ym=[gm],bm={class:"coin-pair"},km=["src"],wm=["src"],Cm={class:"fee"},_m={class:"status"},$m={class:"min-and-max"},Pm={key:0},Im={class:"text"},Am={key:0,src:Jo,alt:""},Sm={key:1,src:Zo,alt:""},Tm={class:"text"},Nm={key:1},Mm={class:"text"},Rm={key:0,src:Jo,alt:""},Lm={key:1,src:Zo,alt:""},qm={class:"text"},Um=yo(()=>d("use",{"xlink:href":"#icon-a-icon-change2"},null,-1)),Om=[Um];function Bm(e,t,n,o,i,r){const a=wr,s=Ba,l=fo,u=Qo("Modal");return b(),be(u,{visible:!0,class:"transiaction-rejected",centered:"",title:e.$t("newAdd.openPositionSuccessful"),width:"340px",footer:null,onCancel:t[3]||(t[3]=f=>e.$emit("onClose"))},{closeIcon:Ie(()=>[dm]),default:Ie(()=>[d("div",fm,[ke(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ie(()=>[d("div",mm,[He(C(e.positionInfo.tokenName)+" ",1),(b(),I("svg",{class:"icon","aria-hidden":"true",onClick:t[0]||(t[0]=f=>e.store.copy(e.positionInfo.nftHash))},vm)),d("a",{href:e.chainName==="Aptos"?("getExplorerUrl"in e?e.getExplorerUrl:ye(qo))("nftAddress",e.positionInfo.nftHash):("getExplorerUrl"in e?e.getExplorerUrl:ye(qo))("nftAddress",e.positionInfo.pos_object_id),target:"_blank"},ym,8,hm)])]),_:1},8,["loading"]),d("div",{class:Ne(["left",`position-status-${e.positionInfo&&e.positionInfo.currentStatus&&e.positionInfo.currentStatus.toLowerCase()}`])},[ke(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ie(()=>{var f,h,v,_,A,ue,g,N,P,y,m,w;return[d("div",bm,[d("div",null,[d("img",{src:e.getCoinIcon(e.needReverse?(h=e.positionInfo)==null?void 0:h.token_b:(f=e.positionInfo)==null?void 0:f.token_a)},null,8,km),d("img",{src:e.getCoinIcon(e.needReverse?(_=e.positionInfo)==null?void 0:_.token_a:(v=e.positionInfo)==null?void 0:v.token_b)},null,8,wm)]),d("span",null,C(e.needReverse?(N=(g=e.positionInfo)==null?void 0:g.token_b)==null?void 0:N.symbol:(ue=(A=e.positionInfo)==null?void 0:A.token_a)==null?void 0:ue.symbol)+" - "+C(e.needReverse?(w=(m=e.positionInfo)==null?void 0:m.token_a)==null?void 0:w.symbol:(y=(P=e.positionInfo)==null?void 0:P.token_b)==null?void 0:y.symbol),1)]),d("div",Cm,C(e.$t("common.fee"))+" "+C(e.positionInfo.fee*100)+"%",1)]}),_:1},8,["loading"])],2),d("div",_m,[ke(s,{"current-status":e.positionInfo.currentStatus||""},null,8,["current-status"])]),ke(a,{loading:e.pools.currentPositionLoading,active:"",paragraph:!1},{default:Ie(()=>{var f,h,v,_,A,ue,g,N;return[d("div",$m,[(e.needReverse?!e.rateChange:e.rateChange)?(b(),I("div",Pm,[d("div",Im,C(("addCommom"in e?e.addCommom:ye(Fe))(("decimalUi"in e?e.decimalUi:ye(Be))(String(e.positionInfo&&e.positionInfo.minPrice),6))),1),e.store.theme=="default"?(b(),I("img",Am)):(b(),I("img",Sm)),d("div",Tm,C(e.positionInfo&&e.positionInfo.maxPrice.indexOf("∞")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in e?e.addCommom:ye(Fe))(("decimalUi"in e?e.decimalUi:ye(Be))(String(e.positionInfo&&e.positionInfo.maxPrice),6)))+" "+C((h=(f=e.positionInfo)==null?void 0:f.token_b)==null?void 0:h.symbol)+" per "+C((_=(v=e.positionInfo)==null?void 0:v.token_a)==null?void 0:_.symbol),1)])):(b(),I("div",Nm,[d("div",Mm,C(("addCommom"in e?e.addCommom:ye(Fe))(("decimalUi"in e?e.decimalUi:ye(Be))(String(1/Number(e.positionInfo&&e.positionInfo.maxPrice)),6))),1),e.store.theme=="default"?(b(),I("img",Rm)):(b(),I("img",Lm)),d("div",qm,C(e.positionInfo&&e.positionInfo.maxPrice.indexOf("∞")>-1||e.positionInfo&&e.positionInfo.maxPrice.indexOf("+")>-1?"∞":("addCommom"in e?e.addCommom:ye(Fe))(("decimalUi"in e?e.decimalUi:ye(Be))(String(1/Number(e.positionInfo&&e.positionInfo.minPrice)),6)))+" "+C((ue=(A=e.positionInfo)==null?void 0:A.token_a)==null?void 0:ue.symbol)+" per "+C((N=(g=e.positionInfo)==null?void 0:g.token_b)==null?void 0:N.symbol),1)])),(b(),I("svg",{class:"icon-change","aria-hidden":"true",onClick:t[1]||(t[1]=P=>e.rateChange=!e.rateChange)},Om))])]}),_:1},8,["loading"])]),ke(l,{disabled:("checkNullObj"in e?e.checkNullObj:ye($t))(e.positionInfo),onClick:t[2]||(t[2]=f=>e.router.push(`/position-detail?collect=${e.positionInfo.collectionName}&&token=${e.positionInfo.tokenName}&&address=${e.positionInfo.pool}&pos=${e.positionInfo.pos_object_id}`))},{default:Ie(()=>[He(C(e.$t("newAdd.viewDetail")),1)]),_:1},8,["disabled"])]),_:1},8,["title"])}const Fm=dt(cm,[["render",Bm],["__scopeId","data-v-799a9818"]]),Em=ct({components:{Modal:Go},setup(){const e=vt(),t=te(()=>e);return{importIcon:ze,store:t}}}),jm=""+new URL("img-Creat-success_2x.b6f0a395.png",import.meta.url).href,Dm=""+new URL("img-Creat-success.9734ad6f.png",import.meta.url).href;const Hm=e=>(jt("data-v-d7a9ceb3"),e=e(),Dt(),e),Xm=Hm(()=>d("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),zm={class:"create-success-container"},Vm={key:0,src:jm,alt:""},Wm={key:1,src:Dm,alt:""},Km={class:"waiting-title"};function Ym(e,t,n,o,i,r){const a=Qo("Modal");return b(),be(a,{visible:!0,class:"",centered:"",title:"",width:"400px",footer:null,onCancel:t[0]||(t[0]=s=>e.$emit("onClose"))},{closeIcon:Ie(()=>[Xm]),default:Ie(()=>[d("div",zm,[e.store.theme=="default"?(b(),I("img",Vm)):(b(),I("img",Wm)),d("p",Km,C(e.$t("newAdd.createPoolSuccessText")),1)])]),_:1})}const Gm=dt(Em,[["render",Ym],["__scopeId","data-v-d7a9ceb3"]]),Qm=ct({components:{Modal:Go,CoinPairName:Ir},props:{fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},currentPrice:{type:String,default:""},needReverse:{type:Boolean,default:!1},direct:{type:Boolean,default:!0}},setup(e,t){const{t:n}=_r(),o=co(),i=vt(),r=te(()=>i),a=en(),s=te(()=>a);return{t:n,route:o,decimalFormat:fn,addCommom:Fe,store:r,createPool:()=>{t.emit("createPool")},importIcon:ze,getCoinIcon:f=>{var h;return(f==null?void 0:f.logoURI)||(f==null?void 0:f.logo_url)||((h=s.value.tokensObj[f==null?void 0:f.address])==null?void 0:h.logo_url)||(r.value.theme==="default"?ze("/image/coins/unknown.png"):ze("/image/coins/sui-unknown.png"))},decimalUi:Be}}});const Jm=e=>(jt("data-v-c2dff1a4"),e=e(),Dt(),e),Zm=Jm(()=>d("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),xm={class:"create-pool-content"},ep={class:"top"},tp={class:"coin-pair-box"},np={class:"induction info"},op={class:"item"},ip={class:"induction-text"},rp={class:"induction-value"},ap={class:"item"},sp={class:"induction-text"},lp={class:"induction-value"},up={class:"item"},cp={class:"induction-text"},dp={class:"induction-value"},fp={class:"min-and-max"},mp={class:"text"},pp={key:0,src:Jo,alt:""},vp={key:1,src:Zo,alt:""},hp={class:"text"},gp={class:"deposit-amount"},yp={class:"deposit-amount-title"},bp={class:"bottom"},kp=["src"],wp=["src"];function Cp(e,t,n,o,i,r){const a=Ir,s=fo,l=Qo("Modal");return b(),be(l,{width:"440px",visible:!0,footer:null,title:e.$t("newAdd.preview"),class:"add-liquidity-modal",onCancel:t[0]||(t[0]=u=>e.$emit("onClose"))},{closeIcon:Ie(()=>[Zm]),default:Ie(()=>{var u,f;return[d("div",xm,[d("div",ep,[d("div",tp,[ke(a,{"from-coin":e.fromCoin,"to-coin":e.toCoin},null,8,["from-coin","to-coin"])]),d("div",np,[d("div",op,[d("span",ip,C(e.$t("common.feeTier")),1),d("span",rp,C(((f=(u=e.route)==null?void 0:u.query)==null?void 0:f.fee)*100)+" %",1)]),d("div",ap,[d("span",sp,C(e.$t("newAdd.initialPrice")),1),d("span",lp,C(e.currentPrice)+" "+C((e.needReverse?!e.direct:e.direct)?e.toCoin.symbol:e.fromCoin.symbol)+" per "+C((e.needReverse?!e.direct:e.direct)?e.fromCoin.symbol:e.toCoin.symbol),1)]),d("div",up,[d("span",cp,C(e.$t("newAdd.priceRange")),1),d("span",dp,[d("div",fp,[d("div",mp,C(("decimalUi"in e?e.decimalUi:ye(Be))(e.minPrice,6)),1),e.store.theme=="default"?(b(),I("img",pp)):(b(),I("img",vp)),d("div",hp,C(e.maxPrice&&String(e.maxPrice).indexOf("+")>-1?"∞":("decimalUi"in e?e.decimalUi:ye(Be))(e.maxPrice,6)),1)])])])])]),d("div",gp,[d("div",yp,C(e.$t("newAdd.depositAmount")),1),d("div",bp,[d("div",null,[d("img",{src:e.getCoinIcon(e.fromCoin)},null,8,kp),d("p",null,C((e.needReverse?!e.direct:e.direct)?e.fromCoinAmount?e.fromCoinAmount:0:e.toCoinAmount?e.toCoinAmount:0),1),d("span",null,C(e.fromCoin.symbol),1)]),d("div",null,[d("img",{src:e.getCoinIcon(e.toCoin)},null,8,wp),d("p",null,C((e.needReverse?!e.direct:e.direct)?e.toCoinAmount?e.toCoinAmount:0:e.fromCoinAmount?e.fromCoinAmount:0),1),d("span",null,C(e.toCoin.symbol),1)])])])]),ke(s,{class:"big-btn liquidity-btn",onClick:e.createPool},{default:Ie(()=>[He(C(e.$t("newAdd.createAndAddLiquidity")),1)]),_:1},8,["onClick"])]}),_:1},8,["title"])}const _p=dt(Qm,[["render",Cp],["__scopeId","data-v-c2dff1a4"]]),$p={1e-4:2,5e-4:10,.002:60,.006:200},Pp={1e-4:2,5e-4:10,.0025:60,.01:200},Ip=ct({setup(){let e=L(!1);const{t,locale:n}=_r(),o=Ia(),i=te(()=>o),r=vt(),a=L(0),s=L(!1),l=L(!1),u=L(!1),f=L("fromCoin"),h=L(""),v=L(""),_=L(!1),A=L(!0),ue=L(!1),g=L(!0),N=L(!1),P=L(""),y=L(""),m=L(""),w=L(""),B=L(""),K=L(""),J=L(!1),fe=L(!1),ne=L(!1),T=L(""),ee=L(0),F=L(!0),G=L(!1),we=L([]),V=L(""),oe=L(30),de=L("30D"),ie=L("Estimated APR"),re=L([{time:"24H",num:24},{time:"7D",num:7},{time:"30D",num:30}]),ve=L(!0),Z=vt(),W=te(()=>Z),ft=te(()=>{var c;return!!((c=q==null?void 0:q.query)!=null&&c.action&&(!k.value||!$.value||!T.value))}),X=te(()=>W.value.chainName?Ko(W.value.chainName):{}),Ke=te(()=>{var c;return(c=W.value)==null?void 0:c.filterCreatePoolCoin}),Ee=c=>{console.log(c,"====>>>>item",c.num,oe.value),st.updateCurrentPools(ae.value.poolAddress,W.value.chainName),de.value=c.time,oe.value=c.num},mt=()=>{console.log("reviseValue==>"),ve.value=!ve.value},gt=L([]),at=()=>{a.value=0,st.updateCurrentPools(ae.value.poolAddress,W.value.chainName),wt(),ui()},Ht=te(()=>Number(m.value)>0&&Number(w.value)>0&&Number(m.value)>Number(w.value)),Je=c=>{ue.value=c,m.value="0",w.value="∞"},Oe=te(()=>{if(z.value.poolConfigList&&k.value&&$.value){const c=z.value.poolConfigList.filter(S=>{var R,H,E,Y;return S.token_a.address.toUpperCase()===((R=k.value.address)==null?void 0:R.toUpperCase())&&S.token_b.address.toUpperCase()===((H=$.value.address)==null?void 0:H.toUpperCase())||S.token_b.address.toUpperCase()===((E=k.value.address)==null?void 0:E.toUpperCase())&&S.token_a.address.toUpperCase()===((Y=$.value.address)==null?void 0:Y.toUpperCase())});console.log(c,"===>info");const p=[];return c.forEach(S=>{p.push(Number(S.fee))}),console.log(p,"===>>result"),p}else return[]}),yt=te(()=>{if(z.value.poolConfigList&&k.value&&$.value){const c=z.value.poolConfigList.filter(R=>{var Y,me,ce,se;const H=R.coin_a_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":R.coin_a_address,E=R.coin_b_address=="0x0000000000000000000000000000000000000000000000000000000000000002::sui::SUI"?"0x2::sui::SUI":R.coin_b_address;return console.log(R,"p===>1334"),H.toUpperCase()===((Y=k.value.address)==null?void 0:Y.toUpperCase())&&E.toUpperCase()===((me=$.value.address)==null?void 0:me.toUpperCase())||E.toUpperCase()===((ce=k.value.address)==null?void 0:ce.toUpperCase())&&H.toUpperCase()===((se=$.value.address)==null?void 0:se.toUpperCase())}),p={};let S=new D(0);return console.log(c,"info===>"),c.forEach(R=>{S=S.add(new D(R.object.liquidity))}),c.forEach(R=>{const H=new D(R.object.liquidity),E=H.gt(0)?new D(H).div(S).mul(100).toString():0;p[R.fee]={rateText:(E>0&&E<.01?"<0.01":E==0?0:jn(E,2))+"% select",rate:E}}),console.log(p,"===>1356"),console.log(S.toString(),"totalTvl.toString()"),p}}),bt=te(()=>[{label:.01+"% "+t("common.feeTier"),title:.01+"% ",fee:1e-4,text:t("newAdd.bestVeryStablePairs")},{label:.05+"% "+t("common.feeTier"),title:.05+"% ",fee:5e-4,text:t("newAdd.bestStablePairs")},W.value.chainName=="Aptos"?{label:.2+"% "+t("common.feeTier"),title:.2+"% ",fee:.002,text:t("newAdd.bestMostPairs")}:{label:.25+"% "+t("common.feeTier"),title:.25+"% ",fee:.0025,text:t("newAdd.bestMostPairs")},W.value.chainName=="Aptos"?{label:.6+"% "+t("common.feeTier"),title:.6+"% ",fee:.006,text:t("newAdd.besteExoticPairs")}:{label:"1% "+t("common.feeTier"),title:"1% ",fee:.01,text:t("newAdd.besteExoticPairs")}]),je=te(()=>r.slippage),x=te(()=>!k.value||!$.value),Me=te(()=>{var c,p;return!P.value&&!y.value?(console.log("addLiquidityBtnDisabled11111"),!0):Number(P.value)>Number(Ze.value)||Number(y.value)>Number(lt.value)?(console.log("addLiquidityBtnDisabled22222"),!0):tt.value!==t("button.addLiquidity")&&tt.value!==t("newAdd.preview")?(console.log("addLiquidityBtnDisabled33333###",tt.value),!0):ae.value&&ae.value&&ae.value.is_pause?(console.log("addLiquidityBtnDisabled44444"),!0):(c=q==null?void 0:q.query)!=null&&c.action&&!j.value&&!((p=j.value)!=null&&p.currentPrice)?(console.log("addLiquidityBtnDisabled55555"),!0):!!(Number(P.value)<=0&&Number(y.value)<=0||ne.value)}),tt=te(()=>{var c,p,S;return ae.value&&ae.value.is_pause?"Pool Closed":!k.value||!$.value?t("modal.selectTokenModalTitle"):mi.value=="Sui"&&!Oe.value.includes(1e-4)&&!Oe.value.includes(5e-4)&&!Oe.value.includes(.0025)&&!Oe.value.includes(.01)&&!Ke.value[k==null?void 0:k.value.address]&&!Ke.value[(c=$.value)==null?void 0:c.address]?"Invalid Pool":(q.query.action||q.query.actions)&&!T.value&&Wn[W.value.chainName].hasCreatePool?(console.log("addLiquidityBtnDisabled11111"),"Select fee tier"):x.value?t("modal.selectTokenModalTitle"):!Wn[W.value.chainName].hasCreatePool&&!ae.value?t("button.poolNotFound"):Number(P.value)>Number(Ze.value)?t("button.insufficientBalance",{name:k.value.symbol}):Number(y.value)>Number(lt.value)?t("button.insufficientBalance",{name:$.value.symbol}):N.value?t("modal.selectTokenModalTitle"):(console.log(ae.value,"==>poolInfo.value"),console.log(!ae.value&&((p=q==null?void 0:q.query)==null?void 0:p.action),"===>!poolInfo.value && route?.query?.action"),!ae.value&&k.value&&$.value&&((S=q==null?void 0:q.query)==null?void 0:S.action)=="create-pool"?t("newAdd.preview"):w.value!=="∞"&&Number(m.value)>=Number(w.value)?t("newAdd.invalidRange"):!Number(P.value)&&!Number(y.value)?t("button.enterAmount"):t("button.addLiquidity"))}),U=te(()=>{var c,p,S;return!ae.value||$t(W.value.addressHistTokens)||!W.value.addressHistTokens[(c=ae.value)==null?void 0:c.poolAddress]?null:Object.fromEntries((S=W.value.addressHistTokens[(p=ae.value)==null?void 0:p.poolAddress])==null?void 0:S.data.map(R=>[R.key,R.value]))}),Q=te(()=>A.value?U.value&&Be(oe.value==7?U.value.before_7_d_contract_price_lowest:oe.value==24?U.value.before_24_h_contract_price_lowest:U.value.before_30_d_contract_price_lowest,6)||0:U.value&&Be(new D(1).div(oe.value==7?U.value.before_7_d_contract_price_highest:oe.value==24?U.value.before_24_h_contract_price_highest:U.value.before_30_d_contract_price_highest).toString(),6)||0),nt=te(()=>A.value?U.value&&Be(oe.value==7?U.value.before_7_d_contract_price_highest:oe.value==24?U.value.before_24_h_contract_price_highest:U.value.before_30_d_contract_price_highest,6)||0:(U.value&&Be(1/Number(oe.value==7?U.value.before_7_d_contract_price_lowest:oe.value==24?U.value.before_24_h_contract_price_lowest:U.value.before_30_d_contract_price_lowest),6))==1/0?0:U.value&&Be(1/Number(oe.value==7?U.value.before_7_d_contract_price_lowest:oe.value==24?U.value.before_24_h_contract_price_lowest:U.value.before_30_d_contract_price_lowest),6)||0),Re=Yo(),k=L(),$=L();uo(()=>{document.body.clientWidth<750?(ve.value=!1,e.value=!1):(ve.value=!0,e.value=!0)});const Nn=c=>{console.log("价格变动==>"),console.log(pt.value,"==>priceConfigObj.value"),c!==m.value&&V.value=="full range"?(En({key:"custom",...pt.value.custom}),console.log(pt.value.custom.min,"priceConfigObj.value[custom].min")):(V.value!=="full range"&&V.value!=="custom"&&(V.value="custom"),m.value=c)},Mn=c=>{c!==w.value&&V.value=="full range"?En({key:"custom",...pt.value.custom}):(V.value!=="full range"&&V.value!=="custom"&&(V.value="custom"),w.value=c)},Rn=()=>{var p;if(q.query.action)A.value=!A.value,j.value&&Co(Be(1/j.value.currentPrice,(p=$==null?void 0:$.value)==null?void 0:p.decimals));else if(F.value=!0,F.value=!1,A.value=!A.value,m.value!==""&&w.value!==""&&m.value!=="0"&&w.value!=="∞"){const S=m.value,R=w.value;m.value=String(1/Number(R)),w.value=String(1/Number(S));const H=B.value,E=K.value;B.value=String(1/Number(E)),K.value=String(1/Number(H)),G.value=!1}const c=k.value;k.value=$.value,$.value=c,g.value?P.value=y.value:y.value=P.value};Ce([m,w],([c,p])=>{console.log(c,p,"==>minPrice,maxPrice"),Number(c)!==0&&Number(p)!==0&&wt(),p!=="∞"&&Number(c)!==0&&Number(p)!==0&&Number(c)>=Number(p)?ne.value=!0:ne.value=!1,Number(c)==0&&Number(p)==0&&Ye.value&&(ne.value=!0,console.log("价格区间错误"))});const Wt=L(!1),Kt=L(!1),Ln=c=>{var p,S,R,H,E,Y,me,ce,se;f.value=c,c==="fromCoin"?(h.value=((p=$.value)==null?void 0:p.address)||"",v.value=((S=k.value)==null?void 0:S.address)||"",((R=q==null?void 0:q.query)==null?void 0:R.action)=="create-pool"&&((H=q==null?void 0:q.query)==null?void 0:H.from)==="pool"?Kt.value=!0:Kt.value=!1,Wt.value=!1):(h.value=((E=k.value)==null?void 0:E.address)||"",v.value=((Y=$.value)==null?void 0:Y.address)||"",((me=q==null?void 0:q.query)==null?void 0:me.action)=="create-pool"&&((ce=q==null?void 0:q.query)==null?void 0:ce.from)==="pool"&&!Ke[(se=k.value)==null?void 0:se.address]?(console.log("0515###这里这里##fromCoin.value###",k.value),Wt.value=!0):Wt.value=!1,Kt.value=!1),_.value=!0},Le=L(null),qe=L(null),hn=L({}),gn=L({}),qn=c=>{var p,S,R,H;N.value=!1,f.value==="fromCoin"?(((p=k.value)==null?void 0:p.address)===((S=Le.value)==null?void 0:S.address)?($.value&&c.address.toLowerCase()===($==null?void 0:$.value.address.toLowerCase())&&($.value=null,qe.value=null,T.value=""),k.value=c):(k.value&&c.address.toLowerCase()===(k==null?void 0:k.value.address.toLowerCase())&&(k.value=null,Le.value=null,T.value=""),$.value=c),Le.value=c,q.query.action||(q.query.fee="")):(((R=$.value)==null?void 0:R.address)===((H=qe.value)==null?void 0:H.address)?(k.value&&c.address.toLowerCase()===(k==null?void 0:k.value.address.toLowerCase())&&(k.value=null,Le.value=null,T.value=""),$.value=c):($.value&&c.address.toLowerCase()===($==null?void 0:$.value.address.toLowerCase())&&($.value=null,qe.value=null,T.value=""),k.value=c),qe.value=c,q.query.action||(q.query.fee="")),Co(""),_.value=!1},Un=c=>{c==="fromCoin"?(g.value=!0,W.value.chainName==="Aptos"?P.value=Number(Ze.value)>0?k.value.symbol=="APT"?new D(Number(Ze.value)).sub(new D(.1)).lt(new D(0))?"0":new D(Number(Ze.value)).sub(new D(.1)).toString():String(Ze.value):"":P.value=Number(Ze.value)>0?k.value.symbol=="SUI"?new D(Number(Ze.value)).sub(new D(.05)).lt(new D(0))?"0":new D(Number(Ze.value)).sub(new D(.05)).toString():String(Ze.value):""):(g.value=!1,W.value.chainName==="Aptos"?y.value=Number(lt.value)>0?$.value.symbol=="APT"?new D(Number(lt.value)).sub(new D(.1)).lt(new D(0))?"0":new D(Number(lt.value)).sub(new D(.1)).toString():String(lt.value):"":y.value=Number(lt.value)>0?$.value.symbol=="SUI"?new D(Number(lt.value)).sub(new D(.05)).lt(new D(0))?"0":new D(Number(lt.value)).sub(new D(.05)).toString():String(lt.value):"")},On=c=>{c==="fromCoin"?(g.value=!0,P.value=Number(Ze.value)>0?jn(new D(Number(Ze.value)).div(2).toString(),k.value.decimals).toString():""):(g.value=!1,y.value=Number(lt.value)>0?jn(new D(Number(lt.value)).div(2).toString(),$.value.decimals).toString():"")};Ce(P,(c,p)=>{console.log(P,"===>fromCoinAmount"),c==""&&g.value&&(y.value=""),c&&g.value&&wt()}),Ce(y,(c,p)=>{console.log(c,"===>>>>newValsda"),c==""&&!g.value&&(P.value=""),c&&!g.value&&wt()});const Bn=()=>{k.value=null,$.value=null,m.value="0",w.value="0",P.value="",y.value="",N.value=!0,T.value="",J.value=!1,Ae.value=!0,Se.value=!0,F.value=!1},tn=L(!1),{setIsShowSuccess:Rt,setIsShowRejected:Lt,setIsShowWaiting:ot,setTransactionDesc:nn,setTransactionTxid:qt,setPositiomNum:on}=r,q=co(),st=en(),Yt=te(()=>Wn[W.value.chainName].hasCreatePool);Ce(()=>[T.value,q.query.action,k.value,$.value,q.query.actions,Yt.value],([c,p,S,R,H,E])=>{!c&&(p=="create-pool"||H=="new-position")&&S&&R&&E?(J.value=!0,F.value=!1):(!S||!R)&&(J.value=!1)},{immediate:!0});const z=te(()=>st);Ce(()=>z.value.tokens,async c=>{if(c&&c.length>0){const p=c;if(q&&q.query&&q.query.tokena&&(console.log("0410###deposite###watch###route.query.tokena####",q.query.tokena),q.query.tokena)){const S=await X.value.getTokenBySymbol(p,q.query.tokena);k.value=S,Le.value=S}if(q&&q.query&&q.query.tokenb&&q.query.tokenb){const S=await X.value.getTokenBySymbol(p,q.query.tokenb);$.value=S,qe.value=S}}},{immediate:!0});const Ut=L({}),Ae=L(!1),Se=L(!1),rn=L(),an=L(),Ye=L(),kt=L(),wt=async()=>{var De,$e,it,Ve,Ue,We;if(!m.value&&!w.value)return!1;if(!P.value&&!y.value&&!m.value&&!w.value)return;const c=ae.value?ae.value:j.value;if(console.log(c,"===>poolInfos"),$t(c))return;console.log("添加流动性预计算=====>");const{TickUtil:p,TickMath:S,getNearestTickByTick:R}=X.value,H=c==null?void 0:c.token_a.decimals,E=c==null?void 0:c.token_b.decimals;let Y,me,ce,se,le,he,_e,Te,ge=c.current_tick_index,pe;if(c.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&c.token_b.address.toLowerCase()===$.value.address.toLowerCase()?pe=!0:pe=!1,console.log(pe,"=====>directs"),console.log("currentTickIndex####",ge),console.log("currentTickIndex####",ge),console.log("currentTickIndex####",ge),m.value==="0"&&w.value==="∞"?(ce=p.getMinIndex(Number(c.tickSpacing)),se=p.getMaxIndex(Number(c.tickSpacing)),le=S.tickIndexToSqrtPriceX64(ce),he=S.tickIndexToSqrtPriceX64(se)):V.value=="custom"||q.query.action?(console.log(pe,"===>directs1866"),pe?(Y=Number(m.value),me=Number(w.value)):(Y=1/Number(w.value),me=1/Number(m.value)),console.log("0518###pre###directs###",pe),console.log("0518###pre###minPrice###",m.value),console.log("0518###pre###maxPrice###",w.value),console.log("0518###pre###poolInfos###",c),console.log("0518###pre###decimalsA###",H),console.log("0518###pre###decimalsB###",E),console.log("0518###pre###currentTickIndex###",ge),console.log(Y,me,"min max1875"),console.log(m.value,w.value,"===>maxPrice.value"),_e=Y==0?-443636:S.priceToTickIndex(new D(Y),H,E),Te=S.priceToTickIndex(new D(me),H,E),ce=R(_e,Number(c.tickSpacing)),se=R(Te,Number(c.tickSpacing)),le=S.priceToSqrtPriceX64(new D(Y),H,E),he=S.priceToSqrtPriceX64(new D(me),H,E),console.log(ce,"===>tick_lower"),console.log(se,"===>tick_upper"),console.log("0518###pre###tick_lower###",ce),console.log("0518###pre###tick_upper###",se)):(ce=(De=pt.value[V.value])==null?void 0:De.lower,se=($e=pt.value[V.value])==null?void 0:$e.upper,le=S.tickIndexToSqrtPriceX64(ce),he=S.tickIndexToSqrtPriceX64(se)),w.value!=="∞"&&ce>=se){Ae.value=!0,P.value="",Se.value=!0,y.value="";return}if(console.log(se,ge,ce,"1922"),w.value==="∞"||ge>ce&&ge<se){Ae.value=!1,Se.value=!1;let Xe;if(P.value||y.value){if(g.value){const zt=new D(P.value).mul(Math.pow(10,k.value.decimals)).toString();Xe=new _t(zt)}else{const zt=new D(y.value).mul(Math.pow(10,$.value.decimals)).toString();Xe=new _t(zt)}console.log(pe,"======>directs");const{liquidityAmount:Pe,tokenMaxA:rt,tokenMaxB:Ge,tokenMaxAOrigin:Qe,tokenMaxBOrigin:Ct}=X.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:c.token_a,tokenB:c.token_b,lowerTick:ce,upperTick:se,coinAmount:Xe,iscoinA:pe?g.value:!g.value,roundUp:!0,slippage:Number(je.value)/100,curSqrtPrice:new _t(c.current_sqrt_price)});Ut.value={liquidityAmount:Pe,tokenMaxA:rt,tokenMaxB:Ge,tokenMaxAOrigin:Qe,tokenMaxBOrigin:Ct},console.log(Pe,rt,Ge,Qe,Ct,"preAdd"),pe?g.value?y.value=Number(Ge)>0?Ge:"":P.value=Number(rt)>0?rt:"":g.value?y.value=rt:P.value=Ge}}else if(ge>=se){if(pe?P.value="":y.value="",Ae.value=pe,Se.value=!pe,(it=q==null?void 0:q.query)!=null&&it.action&&(Ae.value=!0,Se.value=!0),P.value||y.value){let Xe;if(pe){const Pe=new D(y.value).mul(Math.pow(10,(Ve=$.value)==null?void 0:Ve.decimals)).toString();Xe=new _t(Pe),Ut.value={liquidityAmount:X.value.estimateLiquidityForCoinB(le,he,Xe),tokenMaxA:0,tokenMaxB:y.value}}else{const Pe=new D(P.value).mul(Math.pow(10,(Ue=k.value)==null?void 0:Ue.decimals)).toString();Xe=new _t(Pe),Ut.value={liquidityAmount:X.value.estimateLiquidityForCoinB(le,he,Xe),tokenMaxA:0,tokenMaxB:P.value}}}}else if(ge<=ce){if(Ae.value=!pe,Se.value=pe,(We=q==null?void 0:q.query)!=null&&We.action&&(Ae.value=!0,Se.value=!0),pe?y.value="":P.value="",P.value||y.value){let Xe;if(pe){const Pe=new D(P.value).mul(Math.pow(10,k.value.decimals)).toString();Xe=new _t(Pe),console.log(le,"minPriceX64===>"),console.log(he,"maxPriceX64===>maxPriceX64"),console.log(Pe,"===>amount"),Ut.value={liquidityAmount:X.value.estimateLiquidityForCoinA(le,he,Xe),tokenMaxA:P.value,tokenMaxB:0}}else{const Pe=new D(y.value).mul(Math.pow(10,$.value.decimals)).toString();Xe=new _t(Pe),Ut.value={liquidityAmount:X.value.estimateLiquidityForCoinA(le,he,Xe),tokenMaxA:y.value,tokenMaxB:0}}}}else Ae.value=!0,P.value="",Se.value=!0,y.value=""},Xt=L(0);Ce(()=>q.query,c=>{c&&c.fee&&(Xt.value=c.fee,T.value=Number(c.fee)*100+"% "+t("common.feeTier"))},{immediate:!0,deep:!0});const M=te(()=>{var H,E,Y,me,ce;const c=(H=q==null?void 0:q.query)==null?void 0:H.fee,p=(E=q==null?void 0:q.query)==null?void 0:E.tokena,S=(Y=q==null?void 0:q.query)==null?void 0:Y.tokenb;let R=null;console.log("0501###basePoolInfo###tokena###",p),console.log("0501###basePoolInfo###tokenb###",S),console.log("0501###basePoolInfo###fromCoin###",(me=k==null?void 0:k.value)==null?void 0:me.address),console.log("0501###basePoolInfo###toCoin###",(ce=$==null?void 0:$.value)==null?void 0:ce.address),console.log("0501###basePoolInfo###fee###",c),console.log(z.value.poolConfigList,"===>pools.value.poolConfigList");for(let se=0;se<z.value.poolConfigList.length;se++){const le=z.value.poolConfigList[se];console.log(le,"p===>"),!p||!S?R={}:(le.token_a.address.toUpperCase()===(p==null?void 0:p.toUpperCase())&&le.token_b.address.toUpperCase()===(S==null?void 0:S.toUpperCase())||le.token_b.address.toUpperCase()===(p==null?void 0:p.toUpperCase())&&le.token_a.address.toUpperCase()===(S==null?void 0:S.toUpperCase()))&&(R=le)}return console.log("0501###baseInfo###",R),R}),ae=te(()=>{var p,S,R,H,E,Y,me,ce,se,le,he,_e,Te;const c=(p=q==null?void 0:q.query)==null?void 0:p.fee;if(k.value&&$.value){let ge=null;if(c)for(const De in z.value.poolsObj){const $e=z.value.poolsObj[De];($e.token_a.address.toUpperCase()===((R=(S=k==null?void 0:k.value)==null?void 0:S.address)==null?void 0:R.toUpperCase())&&$e.token_b.address.toUpperCase()===((E=(H=$==null?void 0:$.value)==null?void 0:H.address)==null?void 0:E.toUpperCase())&&Number($e.fee)==Number(Xt.value)||$e.token_b.address.toUpperCase()===((Y=k==null?void 0:k.value.address)==null?void 0:Y.toUpperCase())&&$e.token_a.address.toUpperCase()===((ce=(me=$==null?void 0:$.value)==null?void 0:me.address)==null?void 0:ce.toUpperCase())&&Number($e.fee)==Number(Xt.value))&&(ge=$e)}const pe=[];if(!((se=q==null?void 0:q.query)!=null&&se.action)&&(!c||!ge)){for(const De in z.value.poolsObj){const $e=z.value.poolsObj[De];($e.token_a.address.toUpperCase()===((le=k==null?void 0:k.value.address)==null?void 0:le.toUpperCase())&&$e.token_b.address.toUpperCase()===((he=$.value.address)==null?void 0:he.toUpperCase())||$e.token_b.address.toUpperCase()===((_e=k==null?void 0:k.value.address)==null?void 0:_e.toUpperCase())&&$e.token_a.address.toUpperCase()===((Te=$.value.address)==null?void 0:Te.toUpperCase()))&&pe.push($e)}console.log(pe,"result2408===>"),pe&&pe.length>0&&(ge=pe.sort((De,$e)=>{const it=De.coinAmountA+De.coinAmountB;return $e.coinAmountA+$e.coinAmountB-it})[0]),console.log(pe,"result===>2351")}return ge&&!$t(ge)?ge:null}return null}),Gt=te(()=>{var R,H;const c=(R=k==null?void 0:k.value)==null?void 0:R.address,p=(H=$==null?void 0:$.value)==null?void 0:H.address;let S=null;for(let E=0;E<z.value.poolConfigList.length;E++){const Y=z.value.poolConfigList[E];!c||!p?S={}:(Y.token_a.address.toUpperCase()===(c==null?void 0:c.toUpperCase())&&Y.token_b.address.toUpperCase()===(p==null?void 0:p.toUpperCase())||Y.token_b.address.toUpperCase()===(c==null?void 0:c.toUpperCase())&&Y.token_a.address.toUpperCase()===(p==null?void 0:p.toUpperCase()))&&(S=Y)}return console.log("0501###baseInfo###",S),S});Ce(()=>[M.value,ae.value,z.value.recommendRangesObj],(c,p)=>{var S,R,H,E,Y;c[0]&&!c[1]&&c[2]&&!$t(c[2])&&(!p||c[0]&&((S=c[0])==null?void 0:S.address)!==p[0]&&((R=p[0])!=null&&R.address))&&(H=c[0])!=null&&H.address&&!((E=q==null?void 0:q.query)!=null&&E.action)&&st.setSinglePool(c[0],c[2][(Y=c[0])==null?void 0:Y.address],W.value.chainName)},{immediate:!0,deep:!0});const pt=L({}),Fn=async(c,p)=>{var S,R,H,E;if(console.log("deposit##poolInfoWatch###value####",c),c){const{TickMath:Y,getNearestTickByTick:me}=X.value;p&&(F.value=!0),c.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&c.token_b.address.toLowerCase()===$.value.address.toLowerCase()?A.value=!0:A.value=!1,G.value=!0;const ce=c.token_a.decimals,se=c.token_b.decimals;Ae.value=!1,Se.value=!1,T.value=c.fee*100+"% "+t("common.feeTier");const le=c.current_tick_index;Ye.value=Y.sqrtPriceX64ToPrice(c.current_sqrt_price,ce,se).toString(),kt.value=String(1/Ye.value);const he=await X.value.getTicks(c);if(we.value=he?X.value.getTickDataFromUrlData(he):[],p){let _e=z.value.poolPriceConfigObj&&z.value.poolPriceConfigObj[c.address]&&z.value.poolPriceConfigObj[c.address].recommend_ranges||{};const Te=z.value.poolPriceConfigObj&&z.value.poolPriceConfigObj[c.address]&&z.value.poolPriceConfigObj[c.address].type||"",ge=le-Number(Te=="unstable"?Number(c.tickSpacing)*2:Number(c.tickSpacing)*3),pe=le+Number(Te=="unstable"?Number(c.tickSpacing)*2:Number(c.tickSpacing)*3),De=(R=(S=ae==null?void 0:ae.value)==null?void 0:S.token_a)==null?void 0:R.decimals,$e=(E=(H=ae==null?void 0:ae.value)==null?void 0:H.token_b)==null?void 0:E.decimals,it=X.value.TickMath.tickIndexToPrice(ge,De,$e).toString(),Ve=X.value.TickMath.tickIndexToPrice(pe,De,$e).toString();_e["full range"]={lower:-443636,upper:443636},_e.custom={lower:ge,upper:pe,minPrice:it,maxPrice:Ve};const Ue=[];for(let We in _e)_e[We]&&Ue.push({..._e[We],key:We});gt.value=Ue,Te?c.isSelfBuilt?V.value="custom":Te=="stable"?V.value="suggested":V.value="passive":V.value="custom",pt.value=_e,En({key:V.value,..._e[V.value]}),console.log(gt,"===>currentPriceTabList")}F.value=!1}else F.value=!1},yn=te(()=>st.getPoolInfoSuccess);Ce(()=>ae.value,(c,p)=>{var S,R,H,E,Y,me,ce,se,le,he,_e,Te,ge;console.log("0419###poolInfo###watch###",c),console.log("0419###poolInfo###pools.value.poolsObj###",z.value.poolsObj),c?((!p||c.poolAddress!==p.poolAddress||c.current_sqrt_price!==p.current_sqrt_price)&&Fn(c,!p||c.poolAddress!==p.poolAddress),(S=q==null?void 0:q.query)!=null&&S.action&&Re.push(`/deposit?poolAddress=${c==null?void 0:c.address}&tokena=${(R=k==null?void 0:k.value)==null?void 0:R.address}&tokenb=${(H=$==null?void 0:$.value)==null?void 0:H.address}&fee=${c==null?void 0:c.fee}`)):((E=q==null?void 0:q.query)==null?void 0:E.actions)=="new-position"||(!Gt.value&&Yt.value&&((Y=k==null?void 0:k.value)!=null&&Y.address||(me=$==null?void 0:$.value)!=null&&me.address)?(T.value="",m.value="0",w.value="0",Ae.value=!1,Se.value=!1,F.value=!1,Ye.value="",kt.value="",console.log("0501####333333",k==null?void 0:k.value),Re.push(`/deposit?action=create-pool&tokena=${(ce=k==null?void 0:k.value)==null?void 0:ce.address}&tokenb=${(se=$==null?void 0:$.value)==null?void 0:se.address}&from=${(le=q==null?void 0:q.query)==null?void 0:le.from}`)):Yt.value&&!c&&!((he=q==null?void 0:q.query)!=null&&he.action)&&yn.value&&!M.value?(T.value="",m.value="0",w.value="0",Ae.value=!1,Se.value=!1,F.value=!1,Ye.value="",kt.value="",console.log("0501####222222"),Re.push(`/deposit?action=create-pool&tokena=${(_e=k==null?void 0:k.value)==null?void 0:_e.address}&tokenb=${(Te=$==null?void 0:$.value)==null?void 0:Te.address}&from=${(ge=q==null?void 0:q.query)==null?void 0:ge.from}`)):(Ae.value=!1,Se.value=!1,F.value=!1,Ye.value="",kt.value="")),console.log(!M.value,"===>getPoolInfoSuccess.value&& !basePoolInfo.value")},{immediate:!0});const Ze=te(()=>i.value.assets&&k.value&&i.value.assets[k.value.address]?qi(i.value.assets[k.value.address].balance,k.value.decimals):"0"),lt=te(()=>i.value.assets&&$.value&&i.value.assets[$.value.address]?qi(i.value.assets[$.value.address].balance,$.value.decimals):"0"),ui=async()=>{console.log("0412###resetTickList####");const c=await X.value.getTicks(ae.value);console.log("0412###resetTickList###result####",c);const p=c?X.value.getTickDataFromUrlData(c):[];we.value=p,console.log("0412###resetTickList###tickList####",p)},la=Fa(),bo=te(()=>z.value.currentPositionInfo),ua=async c=>{var le,he,_e,Te,ge,pe,De,$e,it,Ve;console.log(ae.value,"===> poolInfo.value"),tn.value=!1,z.value.currentPositionInfo={},qt(""),nn(t("tips.increaseLiquiditySuccess",{from:Ae.value?"":`${P.value} ${(le=k.value)==null?void 0:le.symbol}`,and:!Ae.value&&!Se.value?"and":"",to:Se.value?"":`${y.value} ${(he=$.value)==null?void 0:he.symbol}`})),ot(!0);const p=A.value?g.value:!g.value;let S,R,H,E,Y,me;const ce=ae.value.token_a.decimals,se=ae.value.token_b.decimals;m.value==="0"&&w.value==="∞"?(H=X.value.TickUtil.getMinIndex(Number(ae.value.tickSpacing)),E=X.value.TickUtil.getMaxIndex(Number(ae.value.tickSpacing))):V.value=="custom"?(A.value?(S=Number(m.value),R=Number(w.value)):(S=1/Number(w.value),R=1/Number(m.value)),Y=S==0?-443636:X.value.TickMath.priceToTickIndex(new D(S),ce,se),me=X.value.TickMath.priceToTickIndex(new D(R),ce,se),H=X.value.getNearestTickByTick(Y,Number(ae.value.tickSpacing)),E=X.value.getNearestTickByTick(me,Number(ae.value.tickSpacing))):(H=pt.value[V.value].lower,E=pt.value[V.value].upper);try{const Ue=await X.value.getAddLiquidityTransactionPayload({pool:{poolAddress:ae.value.poolAddress,token_a:ae.value.token_a,token_b:ae.value.token_b},amount:g.value?P.value:y.value,fix_amount_a:p,tick_lower:H,tick_upper:E,index:0,slippage:Number(je.value)/100,roundUp:!0});let We;if(W.value.chainName==="Aptos")We=await i.value.currentWallet.signAndSubmitTransaction(Ue);else{const Xe=await i.value.currentWallet.signAndExecuteTransactionBlock(Ue);We=X.value.handleTx(Xe)}if(console.log("0410###tx###",We),We&&We.hash){qt(We.hash),ot(!1),Rt(!0);const Xe=ci();let Pe;ae.value.needReverse?ae.value.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&ae.value.token_b.address.toLowerCase()===$.value.address.toLowerCase()?Pe=!1:Pe=!0:ae.value.token_a.address.toLowerCase()===k.value.address.toLowerCase()&&ae.value.token_b.address.toLowerCase()===$.value.address.toLowerCase()?Pe=!0:Pe=!1,console.log(Pe,"===>directs");const rt={title:"Supplied",desc:t("tips.addLiquiditySuccessText",{from:Ae.value?"":`${P.value} ${(_e=k.value)==null?void 0:_e.symbol}`,and:!Ae.value&&!Se.value?"and":"",to:Se.value?"":`${y.value} ${(Te=$.value)==null?void 0:Te.symbol}`}),hash:We.hash,tit:"Position Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:Pe?(ge=k.value)==null?void 0:ge.address:(pe=$.value)==null?void 0:pe.address,numa:Pe?P.value:y.value,logoa:Pe?z.value.tokensObj&&k.value&&k.value.address&&z.value.tokensObj[k.value.address]&&z.value.tokensObj[k.value.address].logoURI:z.value.tokensObj&&$.value&&$.value.address&&z.value.tokensObj[$.value.address]&&z.value.tokensObj[$.value.address].logoURI,tokenb:Pe?($e=$.value)==null?void 0:$e.address:(De=k.value)==null?void 0:De.address,numb:Pe?y.value:P.value,logob:Pe?z.value.tokensObj&&$.value&&$.value.address&&z.value.tokensObj[$.value.address]&&z.value.tokensObj[$.value.address].logoURI:z.value.tokensObj&&k.value&&k.value.address&&z.value.tokensObj[k.value.address]&&z.value.tokensObj[k.value.address].logoURI},text:`Deopsit ${Ae.value?"":`${P.value} ${(it=k.value)==null?void 0:it.symbol}`} ${!Ae.value&&!Se.value?"and":""} ${Se.value?"":`${y.value} ${(Ve=$.value)==null?void 0:Ve.symbol}`}`};W.value.chainName!=="Aptos"&&(rt.res=We.res),X.value.showTransitionPending(rt);const Ge=await X.value.watchTransaction(rt,!0);if(Ge.status){if(Rt(!1),z.value.setCurrentPositionLoading(!0),l.value=!0,W.value.chainName==="Aptos")console.log(Ge.nftInfo,"===> watchInfo.nftInfo"),await z.value.setCurrentPositionInfo(Ge.nftInfo[0].data.id.creator,Ge.nftInfo[0].data.id.collection,Ge.nftInfo[0].data.name,W.value.chainName),c&&await la.subscribePosition({pool_address:bo.value.poolAddress,position_index:bo.value.index},bo.value.nftHash);else{const Qe=Ge.nftInfo,Ct=await Aa(2e3);await z.value.setCurrentPositionInfo(Qe==null?void 0:Qe.pool,"","",W.value.chainName,Qe==null?void 0:Qe.position)}setTimeout(()=>{st.updateCurrentPools(ae.value.poolAddress,W.value.chainName),X.value.getAccount(i.value.address)},3e3),setTimeout(async()=>{ui()},3e3)}on()}else ot(!1),Lt(!0);P.value="",y.value=""}catch(Ue){P.value="",y.value="",console.log("0330###Add liquidity Error###",Ue),ot(!1),Lt(!0)}},ca=c=>{switch(c){case"active":return t("newAdd.activeTips");case"passive":return t("newAdd.passiveTips");case"full range":return t("newAdd.fullRangTips");case"suggested":return t("newAdd.suggestedTips");case"custom":return t("newAdd.customTips")}},da=c=>{switch(c){case"suggested":return t("newAdd.suggested");case"active":return t("newAdd.active");case"passive":return t("newAdd.conservative");case"full range":return t("newAdd.fullRange");case"custom":return t("newAdd.custom")}},En=c=>{console.log("priceTab====>",c),console.log("priceTab###poolInfo###",ae.value),V.value=c.key.toLowerCase();const p=ae.value.token_a.decimals,S=ae.value.token_b.decimals,{lower:R,upper:H}=c,E=X.value.TickMath.tickIndexToPrice(R,p,S).toString(),Y=X.value.TickMath.tickIndexToPrice(H,p,S).toString();if(c.key=="full range"){rn.value=R,an.value=H,Je(!0),wt();return}console.log(A.value,"===>direct.value"),A.value?(B.value=String(E),m.value=String(E),K.value=String(Y),w.value=String(Y),rn.value=R,an.value=H,wt()):(B.value=String(1/Number(Y)),m.value=String(1/Number(Y)),K.value=String(1/Number(E)),w.value=String(1/Number(E)),rn.value=X.value.TickMath.priceToTickIndex(new D(1/Number(Y)),p,S),an.value=X.value.TickMath.priceToTickIndex(new D(1/Number(E)),p,S),wt())},fa=te(()=>z.value.tokensObj&&k.value.address&&z.value.tokensObj[k.value.address]&&z.value.tokensObj[k.value.address].logoURI),ma=te(()=>z.value.tokensObj&&$.value.address&&z.value.tokensObj[$.value.address]&&z.value.tokensObj[$.value.address].logoURI),ci=()=>{var S,R,H,E,Y,me,ce,se;let c=null;const p=z.value.poolConfigList;for(let le=0;le<p.length;le++){const he=p[le];if(he.token_a.address.toUpperCase()===((R=(S=k==null?void 0:k.value)==null?void 0:S.address)==null?void 0:R.toUpperCase())&&he.token_b.address.toUpperCase()===((E=(H=$==null?void 0:$.value)==null?void 0:H.address)==null?void 0:E.toUpperCase())||he.token_b.address.toUpperCase()===((me=(Y=k==null?void 0:k.value)==null?void 0:Y.address)==null?void 0:me.toUpperCase())&&he.token_a.address.toUpperCase()===((se=(ce=$==null?void 0:$.value)==null?void 0:ce.address)==null?void 0:se.toUpperCase())){c=he;break}}return c},pa=c=>{var S,R,H,E,Y,me,ce,se,le,he;const p=ci();if(p&&(Le.value=p.needReverse?p==null?void 0:p.token_b:p==null?void 0:p.token_a,qe.value=p.needReverse?p==null?void 0:p.token_a:p==null?void 0:p.token_b,k.value=p.needReverse?p==null?void 0:p.token_b:p==null?void 0:p.token_a,$.value=p.needReverse?p==null?void 0:p.token_a:p==null?void 0:p.token_b,A.value=k.value.address===((S=p==null?void 0:p.token_a)==null?void 0:S.address)),Oe.value.includes(c.fee))T.value=c.label,Xt.value=c.fee,Re.push(`/deposit?tokena=${p?p.needReverse?(H=p==null?void 0:p.token_b)==null?void 0:H.address:(R=p==null?void 0:p.token_a)==null?void 0:R.address:k.value.address}&tokenb=${p?p.needReverse?(Y=p==null?void 0:p.token_a)==null?void 0:Y.address:(E=p==null?void 0:p.token_b)==null?void 0:E.address:$.value.address}&fee=${c.fee}`),m.value="0",w.value="0";else{if(console.log(Ke[k.value.address],"filterCreatePoolCoin[fromCoin.value.address]"),console.log(Ke[$.value.address],"filterCreatePoolCoin[toCoin.value.address]"),console.log(Ke.value,"filterCreatePoolCoin===>"),W.value.chainName!=="Aptos"&&!Ke.value[k.value.address]&&!Ke.value[$.value.address])return;Xt.value=c.fee,T.value=c.label,ae.value&&(m.value="",w.value=""),Re.push(`/deposit?action=create-pool&tokena=${p?p.needReverse?(ce=p==null?void 0:p.token_b)==null?void 0:ce.address:(me=p==null?void 0:p.token_a)==null?void 0:me.address:k.value.address}&tokenb=${p?p.needReverse?(le=p==null?void 0:p.token_a)==null?void 0:le.address:(se=p==null?void 0:p.token_b)==null?void 0:se.address:$.value.address}&fee=${c.fee}&from=${(he=q==null?void 0:q.query)==null?void 0:he.from}`),p||(A.value=!0)}},sn=L(!1),va=()=>{ae.value?tn.value=!0:sn.value=!0},j=L(null),ko=L(""),wo=L(""),Co=c=>{var me,ce,se,le,he,_e,Te,ge,pe,De,$e,it;if(c?(ko.value=c,Ye.value=c,kt.value=c,wo.value=kt.value,F.value=!1):(ko.value="",Ye.value="",kt.value="",wo.value=""),!((me=Le.value)!=null&&me.address)||!((ce=qe.value)!=null&&ce.address))return;let p=!1;const S=z.value.poolConfigList;let R=null;for(let Ve=0;Ve<S.length;Ve++){const Ue=S[Ve];if(Ue.token_a.address.toUpperCase()===((le=(se=Le==null?void 0:Le.value)==null?void 0:se.address)==null?void 0:le.toUpperCase())&&Ue.token_b.address.toUpperCase()===((_e=(he=qe==null?void 0:qe.value)==null?void 0:he.address)==null?void 0:_e.toUpperCase())){p=Ue.needReverse,R=Ue;break}else if(Ue.token_b.address.toUpperCase()===((ge=(Te=Le==null?void 0:Le.value)==null?void 0:Te.address)==null?void 0:ge.toUpperCase())&&Ue.token_a.address.toUpperCase()===((De=(pe=qe==null?void 0:qe.value)==null?void 0:pe.address)==null?void 0:De.toUpperCase())){p=Ue.needReverse,R=Ue;break}}const H=A.value;let E=!1;X.value.getIsSortedSymbols(($e=Le.value)==null?void 0:$e.address,(it=qe.value)==null?void 0:it.address)&&(E=!0);const Y=W.value.chainName=="Aptos"?$p:Pp;if(k.value&&$.value&&c){const Ve=R?R==null?void 0:R.token_a.decimals:E?qe.value.decimals:Le.value.decimals,Ue=R?R==null?void 0:R.token_b.decimals:E?Le.value.decimals:qe.value.decimals,We=c&&X.value.TickMath.priceToSqrtPriceX64(H?new D(c):new D(1/c),Ve,Ue),Xe=c&&X.value.TickMath.priceToSqrtPriceX64(new D(1).div(c),k.value.decimals,$.value.decimals),Pe=X.value.TickMath.priceToTickIndex(H?new D(c):new D(1).div(c),Ve,Ue,Y[q.query.fee]),rt=Pe-Y[q.query.fee]*5,Ge=Pe+Y[q.query.fee]*5,Qe=X.value.TickMath.tickIndexToPrice(rt,Ve,Ue).toString(),Ct=X.value.TickMath.tickIndexToPrice(Ge,Ve,Ue).toString();H?(m.value=Qe,w.value=Ct,B.value=Qe,K.value=Ct):(m.value=String(1/Ct),w.value=String(1/Qe),B.value=String(1/Ct),K.value=String(1/Qe)),console.log("0518###c####createPoolFromCoin.value####",Le.value),console.log("0518###c####createPoolToCoin.value####",qe.value),console.log("0518###c####createPoolNeedReverse####",E);const zt={token_a:R?R.token_a:E?qe.value:Le.value,token_b:R?R.token_b:E?Le.value:qe.value,isCreate:!0,tickSpacing:Y[q.query.fee],currentPrice:c,current_sqrt_price:We,tick_lower:rt,tick_upper:Ge,current_tick_index:Pe,currentPriceReverse:fn(String(1/c),6),reverse_current_sqrt_price:Xe,needReverse:p};j.value=zt,wt()}else j.value=null,m.value="",w.value=""},ha=async()=>{var se,le,he,_e;if(W.value.chainName!=="Aptos"){di();return}sn.value=!1;let c,p,S,R,H,E;const Y=Le.value.decimals,me=qe.value.decimals;qt(""),nn(t("tips.increaseLiquiditySuccess",{from:Ae.value?"":`${P.value} ${(se=k.value)==null?void 0:se.symbol}`,and:!Ae.value&&!Se.value?"and":"",to:Se.value?"":`${y.value} ${(le=$.value)==null?void 0:le.symbol}`})),ot(!0),m.value==="0"&&w.value==="∞"?(S=X.value.TickUtil.getMinIndex(Number(j.value.tickSpacing)),R=X.value.TickUtil.getMaxIndex(Number(j.value.tickSpacing))):(A.value?(c=Number(m.value),p=Number(w.value)):(c=1/Number(w.value),p=1/Number(m.value)),H=c==0?-443636:X.value.TickMath.priceToTickIndex(new D(c),Y,me),E=X.value.TickMath.priceToTickIndex(new D(p),Y,me),S=X.value.getNearestTickByTick(H,Number(j.value.tickSpacing)),R=X.value.getNearestTickByTick(E,Number(j.value.tickSpacing)));const ce=A.value?g.value:!g.value;try{const Te=await X.value.getCreatPoolTransactionPayload({coinTypeA:Le.value.address,coinTypeB:qe.value.address,tick_spacing:Number(j.value.tickSpacing),initialize_sqrt_price:new _t(j.value.current_sqrt_price),uri:"",current_tick_index:j.value.current_tick_index,max_amount_a:A.value?P.value:y.value,max_amount_b:A.value?y.value:P.value,tick_lower:S,tick_upper:R,slippage:Number(je.value)/100,decimalsA:Y,decimalsB:me,fix_amount_a:ce,liquidityInput:Ut.value});let ge;if(console.log(JSON.stringify(Te),"===>creatPoolPayload"),W.value.chainName==="Aptos")ge=await i.value.currentWallet.signAndSubmitTransaction(Te);else{const pe=await i.value.currentWallet.signAndExecuteTransactionBlock(Te);ge=X.value.handleTx(pe)}if(ge&&ge.hash){qt(ge.hash),ot(!1),Rt(!0);const pe={title:"Created pool",desc:"Pool created successfully ",hash:ge.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(he=k.value)==null?void 0:he.address}`,numa:Ae.value?"":`- ${P.value}`,logoa:z.value.tokensObj&&k.value&&k.value.address&&z.value.tokensObj[k.value.address]&&z.value.tokensObj[k.value.address].logoURI,tokenb:`${(_e=$.value)==null?void 0:_e.address}`,numb:Se.value?"":`- ${y.value}`,logob:z.value.tokensObj&&$.value&&$.value.address&&z.value.tokensObj[$.value.address]&&z.value.tokensObj[$.value.address].logoURI},text:"Pool created successfully"};W.value.chainName!=="Aptos"&&(pe.res=ge.res),X.value.showTransitionPending(pe),(await X.value.watchTransaction(pe,!0)).status&&(Rt(!1),s.value=!0,setTimeout(()=>{st.setPoolConfigList(W.value.chainName,W.value.filterCoinsObj),X.value.getAccount(i.value.address)},1e3)),on()}else ot(!1),Lt(!0);P.value="",y.value=""}catch(Te){st.setPoolConfigList(W.value.chainName,W.value.filterCoinsObj),sn.value=!1,console.log(Te,"error===>"),P.value="",y.value="",ot(!1),Lt(!0)}},di=async()=>{var Te,ge,pe,De,$e,it,Ve,Ue,We,Xe,Pe,rt,Ge,Qe,Ct,zt,pi,vi,hi,gi,yi,bi,ki,wi,Ci,_i,$i,Pi,Ii,Ai,Si,Ti,Ni,Mi,Ri,Li;sn.value=!1;let c=!1;X.value.getIsSortedSymbols(Le.value.address,qe.value.address)&&(c=!0),qt("");const p=Ae.value?"":`${P.value} ${(Te=k.value)==null?void 0:Te.symbol}`,S=Se.value?"":`${y.value} ${(ge=$.value)==null?void 0:ge.symbol}`;console.log("0424###createPoolFromCoin###",Le.value),console.log("0424###createPoolToCoin###",qe.value),console.log("0424###needReverse###",c),console.log("0424###createPoolInfo?.value?.needReverse###",(pe=j==null?void 0:j.value)==null?void 0:pe.needReverse),nn(t("tips.increaseLiquiditySuccess",{from:!c&&!((De=j==null?void 0:j.value)!=null&&De.needReverse)||c&&(($e=j==null?void 0:j.value)!=null&&$e.needReverse)?p:S,and:!Ae.value&&!Se.value?"and":"",to:!c&&!((it=j==null?void 0:j.value)!=null&&it.needReverse)||c&&((Ve=j==null?void 0:j.value)!=null&&Ve.needReverse)?S:p})),ot(!0);let R="",H="",E="",Y="",me="",ce="",se=0,le=0,he=!1,_e;if(c||(Ue=j==null?void 0:j.value)!=null&&Ue.needReverse){const Vt=c&&!((We=j==null?void 0:j.value)!=null&&We.needReverse);R=Vt?(Ge=(rt=j==null?void 0:j.value)==null?void 0:rt.token_b)==null?void 0:Ge.address:(Pe=(Xe=j==null?void 0:j.value)==null?void 0:Xe.token_a)==null?void 0:Pe.address,H=Vt?(pi=(zt=j==null?void 0:j.value)==null?void 0:zt.token_a)==null?void 0:pi.address:(Ct=(Qe=j==null?void 0:j.value)==null?void 0:Qe.token_b)==null?void 0:Ct.address,E=Vt?(yi=(gi=j==null?void 0:j.value)==null?void 0:gi.token_b)==null?void 0:yi.decimals:(hi=(vi=j==null?void 0:j.value)==null?void 0:vi.token_a)==null?void 0:hi.decimals,Y=Vt?(Ci=(wi=j==null?void 0:j.value)==null?void 0:wi.token_a)==null?void 0:Ci.decimals:(ki=(bi=j==null?void 0:j.value)==null?void 0:bi.token_b)==null?void 0:ki.decimals,(_i=j==null?void 0:j.value)!=null&&_i.needReverse?(me=A.value?P.value:y.value,ce=A.value?y.value:P.value,se=A.value?Number(m.value):1/Number(w.value),le=A.value?Number(w.value):1/Number(m.value),he=A.value?g.value:!g.value,_e=A.value?Ye.value:1/Number(Ye.value)):(me=A.value?y.value:P.value,ce=A.value?P.value:y.value,se=A.value?1/Number(w.value):Number(m.value),le=A.value?1/Number(m.value):Number(w.value),he=A.value?!g.value:g.value,_e=A.value?1/Number(Ye.value):Ye.value)}else R=(Pi=($i=j==null?void 0:j.value)==null?void 0:$i.token_a)==null?void 0:Pi.address,H=(Ai=(Ii=j==null?void 0:j.value)==null?void 0:Ii.token_b)==null?void 0:Ai.address,E=(Ti=(Si=j==null?void 0:j.value)==null?void 0:Si.token_a)==null?void 0:Ti.decimals,Y=(Mi=(Ni=j==null?void 0:j.value)==null?void 0:Ni.token_b)==null?void 0:Mi.decimals,me=A.value?P.value:y.value,ce=A.value?y.value:P.value,se=A.value?Number(m.value):1/Number(w.value),le=A.value?Number(w.value):1/Number(m.value),he=A.value?g.value:!g.value,_e=A.value?Ye.value:1/Number(Ye.value);try{console.log("0501###toCreatePool###params###",{coinTypeA:R,coinTypeB:H,decimalsA:E,decimalsB:Y,amountA:me,amountB:ce,minPrice:se,maxPrice:le,fix_amount_a:he,tick_spacing:Number(j.value.tickSpacing),slippage:Number(je.value)/100,price:_e});const Vt=await X.value.getCreatPoolTransactionPayload({coinTypeA:R,coinTypeB:H,decimalsA:E,decimalsB:Y,amountA:me,amountB:ce,minPrice:se,maxPrice:le,fix_amount_a:he,tick_spacing:Number(j.value.tickSpacing),slippage:Number(je.value)/100,price:_e}),ka=await i.value.currentWallet.signAndExecuteTransactionBlock(Vt),bn=X.value.handleTx(ka);if(bn&&bn.hash){qt(bn.hash),ot(!1),Rt(!0);const $o={title:"Created pool",desc:"Pool created successfully ",hash:bn.hash,tit:"Pool Created",icon:"icon-icon-Position-Created",tokenInfo:{tokena:`${(Ri=k.value)==null?void 0:Ri.address}`,numa:Ae.value?"":`- ${P.value}`,logoa:z.value.tokensObj&&k.value&&k.value.address&&z.value.tokensObj[k.value.address]&&z.value.tokensObj[k.value.address].logoURI,tokenb:`${(Li=$.value)==null?void 0:Li.address}`,numb:Se.value?"":`- ${y.value}`,logob:z.value.tokensObj&&$.value&&$.value.address&&z.value.tokensObj[$.value.address]&&z.value.tokensObj[$.value.address].logoURI},text:"Pool created successfully"};W.value.chainName!=="Aptos"&&($o.res=bn.res),X.value.showTransitionPending($o),(await X.value.watchTransaction($o,!0)).status&&(Rt(!1),s.value=!0,setTimeout(()=>{st.setPoolConfigList(W.value.chainName,W.value.filterCoinsObj),X.value.getAccount(i.value.address)},1e3)),on()}else ot(!1),Lt(!0);P.value="",y.value=""}catch(Vt){console.log("0407###createPool###error##",Vt),sn.value=!1,st.setPoolConfigList(W.value.chainName,W.value.filterCoinsObj),P.value="",y.value="",ot(!1),Lt(!0)}},ga=te(()=>{var c,p,S,R,H,E;return((c=k.value)==null?void 0:c.isSelfBuilt)||((p=$.value)==null?void 0:p.isSelfBuilt)||((R=z.value.tokensObj[(S=k.value)==null?void 0:S.address])==null?void 0:R.isSelfBuilt)||((E=z.value.tokensObj[(H=$.value)==null?void 0:H.address])==null?void 0:E.isSelfBuilt)}),ya=c=>{var p;return(c==null?void 0:c.logoURI)||(c==null?void 0:c.logo_url)||((p=z.value.tokensObj[c==null?void 0:c.address])==null?void 0:p.logo_url)||(W.value.theme==="default"?ze("/image/coins/unknown.png"):ze("/image/coins/sui-unknown.png"))},_o=(c,p)=>{console.log(f.value,"===>currentCoinKey.value"),console.log(c);const S=localStorage.getItem(c.address);console.log(z.value.tokensObj,"===>pools.value.tokensObj"),console.log(S,"===>coinLocak"),z.value.tokensObj&&z.value.tokensObj[c.address]&&z.value.tokensObj[c.address].isSelfBuilt&&!S&&(p=="fromCoin"&&(hn.value=c),p=="toCoin"&&(gn.value=c),fi.value=!0)};Ce(()=>[k.value,$.value],([c,p])=>{c&&!$t(c)&&_o(c,"fromCoin"),p&&!$t(p)&&_o(p,"toCoin")},{immediate:!0});const fi=L(!1),ba=()=>{Re.push("/pools")},mi=te(()=>W.value.chainName);return Ce(()=>[W.value.chainName,W.value.filterCoinsObj],([c,p])=>{c&&p&&st.setPoolConfigList(c,p)},{immediate:!0}),Ce(()=>[Oe.value,Ke.value,k.value,$.value],([c,p,S,R])=>{console.log(c.value,"==>isCreatePool.value"),console.log(p.value,"===>filterCreatePoolCoin.value"),console.log(S,"===>fromCoin"),console.log(R,"===>toCoin"),c&&p&&!c.includes(1e-4)&&!c.includes(5e-4)&&!c.includes(.0025)&&!c.includes(.01)&&!p[S==null?void 0:S.address]&&!p[R==null?void 0:R.address]&&(T.value="")},{immediate:!0}),{warningToCoin:gn,warningFromCoin:hn,getTokenSource:_o,closeTokenWarning:ba,isShowTokenWarning:fi,chainName:mi,hasCreatePool:Yt,isCreateSuccess:s,intPriceReverse:wo,isShowMask:ft,isPc:e,intPrice:ko,createPoolToCoin:qe,createPoolFromCoin:Le,getPoolInfoSuccess:yn,toCreatePool:ha,createPoolInfo:j,changecurrentPrice:Co,isShowCreatePoolModal:sn,addOrCreate:va,halfBtnSelect:On,selectFee:pa,isViewDetail:l,addCommom:Fe,decimalUi:Be,fromCoinUrl:fa,toCoinUrl:ma,t,wallet:i,toAdd:ua,chartLoading:F,currentTick:ee,tickList:we,poolInfo:ae,storeIndex:W,importIcon:ze,addLiquidityBtnText:tt,slippage:je,countdown:a,loading:u,fromCoin:k,toCoin:$,openCoinSelect:Ln,onCoinSelect:qn,existingCoins:h,lastSelectCoin:v,currentCoinKey:f,showCoinSelect:_,fromCoinAmount:P,toCoinAmount:y,maxBtnSelect:Un,fixedFromCoin:g,isShowLiquidityModal:tn,direct:A,toggle:Rn,edit:J,inputValue:T,feeTierList:bt,minPrice:m,maxPrice:w,invalidPriceRange:Ht,defaultMinPrice:B,defaultMaxPrice:K,priceRangeChangeMin:Nn,priceRangeChangeMax:Mn,toFullRange:Je,clearAll:Bn,clickClear:N,positionError:ne,positionTips:fe,router:Re,clickRefresh:at,fromCoinBlance:Ze,toCoinBlance:lt,showToCoinLock:Se,showFromCoinLock:Ae,currentPriceReverse:kt,currentPrice:Ye,getPirceText:ca,currentPriceTab:V,currentPriceTabList:gt,getPirceKey:da,priceTab:En,aprRewardsParameter:oe,aprRewardsDateList:re,aprTab:Ee,reviseValue:mt,label:ve,aprTitle:ie,isCreatePool:Oe,before7dContractPriceLowest:Q,before7dContractPriceHighest:nt,aprRewardsTime:de,addLiquidityBtnDisabled:Me,checkNullObj:$t,sFixD:jn,toCreateSuiPool:di,isSelfBuilt:ga,getCoinIcon:ya,isCreatePoolToCoin:Wt,isCreatePoolFromCoin:Kt,filterCreatePoolCoin:Ke,poolTvl:yt}}}),gr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAAJFBMVEVHcEwlW04mW04oXlEmW04SHx4jR0B2/9wQFBMVJyVk17szaV2jJaSaAAAABHRSTlMA8K8m/cUwkQAAAL5JREFUSMdjYMAKmBWFDBgIAUMXF2GCilQy2pyQ+Swu2EBHhyNIkgnIdMCjyCUUCMJgilxDMUFKRpsblBmCU9EUFxdPgooiU9ymElSEBEYVDR1FkaumElYUVp46qmjAFTGruE0lqMgQkaGnpYFAdvk2MJ2JpEgFUTQsL0cGVUiKRKCFDLGKiLKOKIdTGASjSYWWiogqMEYL1lFFWJoRTgYEFU0Bt6QIKEoBt6SwN43QWlJEKSKx4UZ+ExDUmAQAo9rc9CAs4WAAAAAASUVORK5CYII=",yr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABIBAMAAACnw650AAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAeUExURUdwTANNcARNcAdKcgEdMQRNcBM8V3bI/2Gq2ihWdudYHvAAAAAEdFJOUwDwryb9xTCRAAAAuklEQVRIx2NgwAqYFYUMGAgBw9BQYYKKVFPcgpD5rKHYgItLIEiSCcgMwKMIiFxcXGGKQlwwQWqKWxiU6YpTEdCEEIKKXFLDXAgrQjJ0VNHQUdRBhCK38pRRRQOuiFk1jLAiQ0SGdksDgczyaWA6BUmRKqJoaC9HBhVIikShhQyxioiyjiiHUxgEo0mFloqIKjBGC9ZRRViaEUEGBBW5gltSBBSFgltS2JtGaC0pohSR2HAjvwkIakwCANqYbmgtLE7YAAAAAElFTkSuQmCC",aa=""+new URL("img-no-data_2x.e925467a.png",import.meta.url).href,sa=""+new URL("img-no-data_2x.8bc9afa2.png",import.meta.url).href;const Mt=e=>(jt("data-v-cdd5b65c"),e=e(),Dt(),e),Ap={class:"pools-container"},Sp={key:0,class:"content pc-content"},Tp={class:"content-left"},Np={class:"content-left-bg"},Mp={class:"content-left-title"},Rp={key:0,class:"pool-warning"},Lp={class:"coin-select"},qp={key:0,class:"icon","aria-hidden":"true"},Up=Mt(()=>d("use",{"xlink:href":"#icon-edit"},null,-1)),Op=[Up],Bp={key:0,class:"fee-container"},Fp=["onClick"],Ep={key:0,class:"icon fee-disabled","aria-hidden":"true"},jp=Mt(()=>d("use",{"xlink:href":"#icon-icon-disable"},null,-1)),Dp=[jp],Hp={key:1},Xp={key:2},zp={key:0},Vp={key:1,class:"text-active"},Wp={class:"deposit-title"},Kp={class:"card-container"},Yp={class:"card-item"},Gp={class:"card-item"},Qp={key:0,class:"icon","aria-hidden":"true"},Jp=Mt(()=>d("use",{"xlink:href":"#icon-icon-add"},null,-1)),Zp=[Jp],xp={class:"pc-network"},ev={class:"content-right"},tv={key:0,class:"initPrice-mask"},nv={class:"content-right-title"},ov=Mt(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-icon-information"})],-1)),iv={class:"content-right-bg"},rv={key:1,class:"price-tab"},av=["onClick"],sv={key:2,class:"create-pool-tips"},lv={key:3,class:"set-price-range"},uv={key:0},cv={key:1,class:"coin"},dv={key:2,class:"coin"},fv={key:3,class:"no-price"},mv=["src"],pv=["src"],vv={key:6,class:"position-tips"},hv=["src"],gv={class:"tips"},yv={key:7,class:"position-tips"},bv=["src"],kv={class:"error"},wv={key:8,class:"d3-chart-box"},Cv={key:9,class:"day-7-price-range"},_v=Mt(()=>d("i",null,null,-1)),$v={class:"gray"},Pv={key:11,class:"create-pool-tips"},Iv={key:12,class:"create-pool-warning"},Av={key:1,class:"no-data"},Sv={key:0,src:aa,alt:""},Tv={key:1,src:sa,alt:""},Nv={key:1,class:"content h5-content"},Mv={class:"content-left"},Rv={class:"content-left-bg"},Lv={class:"content-left-title"},qv={key:0,class:"pool-warning"},Uv={class:"coin-select"},Ov={key:0,class:"icon","aria-hidden":"true"},Bv=Mt(()=>d("use",{"xlink:href":"#icon-edit"},null,-1)),Fv=[Bv],Ev={key:0,class:"fee-container"},jv=["onClick"],Dv={key:0},Hv={key:1},Xv={key:0},zv={key:1,class:"text-active"},Vv={class:"content-right"},Wv={key:0,class:"initPrice-mask"},Kv={class:"content-right-title"},Yv=Mt(()=>d("svg",{class:"icon","aria-hidden":"true"},[d("use",{"xlink:href":"#icon-icon-information"})],-1)),Gv={class:"content-right-bg"},Qv={key:1,class:"price-tab"},Jv=["onClick"],Zv={key:2,class:"create-pool-tips"},xv={key:3,class:"set-price-range"},eh={key:0},th={key:1,class:"coin"},nh={key:2,class:"coin"},oh={key:3,class:"no-price"},ih=["src"],rh=["src"],ah={key:6,class:"position-tips"},sh=["src"],lh={class:"tips"},uh={key:7,class:"position-tips"},ch=["src"],dh={class:"error"},fh={key:8,class:"d3-chart-box"},mh={key:9,class:"day-7-price-range"},ph=Mt(()=>d("i",null,null,-1)),vh={class:"gray"},hh={key:11,class:"create-pool-tips"},gh={key:1,class:"no-data"},yh={key:0,src:aa,alt:""},bh={key:1,src:sa,alt:""},kh={key:0,class:"icon","aria-hidden":"true"},wh=Mt(()=>d("use",{"xlink:href":"#icon-icon-add"},null,-1)),Ch=[wh],_h={class:"pc-network"},$h={class:"new-right"},Ph={class:"deposit-title"},Ih={class:"card-container"},Ah={class:"card-item"},Sh={class:"card-item"},Th={key:0,class:"icon","aria-hidden":"true"},Nh=Mt(()=>d("use",{"xlink:href":"#icon-icon-add"},null,-1)),Mh=[Nh],Rh={class:"h5-network"};function Lh(e,t,n,o,i,r){var ee,F,G,we,V,oe,de,ie,re,ve,Z,W,ft,X,Ke,Ee,mt,gt,at,Ht,Je,Oe,yt,bt,je,x,Me,tt,U,Q,nt,Re,k,$,Nn,Mn,Rn,Wt,Kt,Ln,Le,qe,hn,gn,qn,Un,On,Bn,tn,Rt,Lt,ot,nn,qt,on,q,st,Yt,z,Ut,Ae,Se,rn,an,Ye,kt,wt,Xt;const a=wa,s=Wa,l=br,u=ns,f=Ma,h=us,v=vs,_=As,A=fo,ue=Pa,g=Rs,N=Zs,P=Cf,y=Cr,m=qa,w=um,B=Ra,K=La,J=Fm,fe=Gm,ne=_p,T=_a;return b(),I("div",Ap,[ke(a,{url:"/pools"}),ke(s,{"pool-info":e.poolInfo,onClearAll:e.clearAll,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClearAll","onClickRefresh"]),e.isPc?(b(),I("div",Sp,[d("div",Tp,[d("div",Np,[d("div",Mp,[He(C(e.$t("common.selectPool"))+" ",1),ke(l,{placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[d("span",null,C(e.t("newAdd.poolWarning")),1)]),default:Ie(()=>[e.isSelfBuilt?(b(),I("div",Rp)):O("",!0)]),_:1})]),d("div",Lp,[ke(u,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.logoURI:e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b.symbol:e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_b:e.poolInfo.token_a:e.createPoolFromCoin,onClick:t[0]||(t[0]=M=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),ke(u,{"coin-icon":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.logoURI:e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a.symbol:e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.needReverse?e.poolInfo.token_a:e.poolInfo.token_b:e.createPoolToCoin,onClick:t[1]||(t[1]=M=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),d("div",{class:Ne(["pool-fee",e.edit?"pool-fee-edit":""])},[d("div",{class:"pool-fee-header",onClick:t[2]||(t[2]=M=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[d("span",{class:Ne(e.inputValue?"":"fee-span")},C(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(b(),I("svg",qp,Op)):O("",!0)]),e.edit?(b(),I("div",Bp,[(b(!0),I(Ft,null,wn(e.feeTierList,(M,ae)=>{var Gt,pt,Fn,yn,Ze;return b(),I("div",{key:ae,class:Ne(["fee-item",[e.inputValue&&e.inputValue==M.label?"fee-item-active":"",e.isCreatePool.includes(M.fee)&&e.$route.query.action?" pool-created":" pool-not-created",e.chainName!=="Aptos"&&!e.isCreatePool.includes(M.fee)&&!e.filterCreatePoolCoin[(Gt=e.fromCoin)==null?void 0:Gt.address]&&!e.filterCreatePoolCoin[(pt=e.toCoin)==null?void 0:pt.address]?"disabled":""]]),onClick:lt=>e.selectFee(M)},[e.chainName!=="Aptos"&&!e.isCreatePool.includes(M.fee)&&!e.filterCreatePoolCoin[(Fn=e.fromCoin)==null?void 0:Fn.address]&&!e.filterCreatePoolCoin[(yn=e.toCoin)==null?void 0:yn.address]?(b(),I("svg",Ep,Dp)):O("",!0),e.$route.query.action=="create-pool"?(b(),I("div",Hp,[d("p",null,C(M.title),1),d("p",{class:Ne(e.isCreatePool&&e.isCreatePool.includes(M.fee)?"text-default":"text-theme")},C(e.isCreatePool&&e.isCreatePool.includes(M.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(b(),I("div",Xp,[d("p",{class:Ne(e.isCreatePool&&e.isCreatePool.includes(M.fee)?"text-active":"text-default")},C(M.title),3),e.isCreatePool&&!e.isCreatePool.includes(M.fee)?(b(),I("p",zp,C(e.$t("newAdd.notCreated")),1)):O("",!0),e.isCreatePool&&e.isCreatePool.includes(M.fee)?(b(),I("p",Vp,C(e.poolTvl&&e.poolTvl[M.fee]&&((Ze=e.poolTvl[M.fee])==null?void 0:Ze.rateText)),1)):O("",!0)])),d("span",null,C(M.text),1)],10,Fp)}),128))])):O("",!0)],2),d("div",Wp,C(e.$t("newAdd.depositAmounts")),1),d("div",Kp,[d("div",Yp,[ke(f,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[3]||(t[3]=M=>e.fromCoinAmount=M),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[4]||(t[4]=M=>e.maxBtnSelect("fromCoin")),onOnHalf:t[5]||(t[5]=M=>e.halfBtnSelect("fromCoin")),onOnInput:t[6]||(t[6]=M=>{e.fromCoinAmount=M,e.fixedFromCoin=!0}),onOnSelect:t[7]||(t[7]=M=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&e.$route.query.action!=="create-pool"?(b(),be(h,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):O("",!0)]),d("div",Gp,[ke(f,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[8]||(t[8]=M=>e.toCoinAmount=M),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[9]||(t[9]=M=>e.maxBtnSelect("toCoin")),onOnHalf:t[10]||(t[10]=M=>e.halfBtnSelect("toCoin")),onOnInput:t[11]||(t[11]=M=>{e.toCoinAmount=M,e.fixedFromCoin=!1}),onOnSelect:t[12]||(t[12]=M=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&e.$route.query.action!=="create-pool"?(b(),be(h,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):O("",!0)]),((F=(ee=e.$route)==null?void 0:ee.query)==null?void 0:F.action)=="create-pool"&&(e.showToCoinLock||e.showFromCoinLock)?(b(),be(v,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):O("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(b(),I("img",{key:1,class:"add",src:gr,alt:"",onClick:t[13]||(t[13]=(...M)=>e.toggle&&e.toggle(...M))})):O("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(b(),I("img",{key:2,class:"add",src:yr,alt:"",onClick:t[14]||(t[14]=(...M)=>e.toggle&&e.toggle(...M))})):O("",!0)]),e.poolInfo?(b(),be(_,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):O("",!0)]),ke(A,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:t[15]||(t[15]=M=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ie(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")?(b(),I("svg",Qp,Zp)):O("",!0),d("span",null,C(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),d("div",xp,[ke(ue)])]),d("div",ev,[e.isShowMask?(b(),I("div",tv)):O("",!0),d("div",nv,[He(C((G=e.$route)!=null&&G.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(b(),be(l,{key:0,placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[d("span",null,C(e.$t("newAdd.selectRangeTips")),1)]),default:Ie(()=>[ov]),_:1})):O("",!0)]),d("div",iv,[!((V=(we=e.$route)==null?void 0:we.query)!=null&&V.action)&&e.poolInfo||(de=(oe=e.$route)==null?void 0:oe.query)!=null&&de.action?(b(),I(Ft,{key:0},[(re=(ie=e.$route)==null?void 0:ie.query)!=null&&re.action&&!e.poolInfo?(b(),be(g,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):O("",!0),e.poolInfo?(b(),I("div",rv,[(b(!0),I(Ft,null,wn(e.currentPriceTabList,M=>(b(),I("div",{key:M,class:Ne(["price-item",{"price-item-active":M.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:ae=>e.priceTab(M)},[ke(l,{placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[d("span",null,C(e.getPirceText(M.key)),1)]),default:Ie(()=>[He(" "+C(e.getPirceKey(M.key)),1)]),_:2},1024)],10,av))),128))])):O("",!0),(Z=(ve=e.$route)==null?void 0:ve.query)!=null&&Z.action&&!e.poolInfo?(b(),I("div",sv,C(e.$t("newAdd.createPoolInitialText")),1)):O("",!0),!e.poolInfo&&((ft=(W=e.$route)==null?void 0:W.query)!=null&&ft.action)?(b(),I("div",lv,C(e.$t("common.setPriceRange")),1)):O("",!0),e.poolInfo||(Ke=(X=e.$route)==null?void 0:X.query)!=null&&Ke.action?(b(),I("div",{key:4,class:Ne(["current-price",(mt=(Ee=e.$route)==null?void 0:Ee.query)!=null&&mt.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(b(),I("span",uv,C(e.$t("common.currentPrice")),1)):O("",!0),e.fromCoin&&e.toCoin&&e.direct?(b(),I("div",cv,[d("span",null,C(e.$t("common.currentPrice")),1),He(" "+C(("addCommom"in e?e.addCommom:ye(Fe))(("decimalUi"in e?e.decimalUi:ye(Be))(e.currentPrice,6),6))+" "+C((gt=e.toCoin)==null?void 0:gt.symbol)+" per "+C((at=e.fromCoin)==null?void 0:at.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(b(),I("div",dv,[d("span",null,C(e.$t("common.currentPrice")),1),He(" "+C(("addCommom"in e?e.addCommom:ye(Fe))(("decimalUi"in e?e.decimalUi:ye(Be))(e.currentPriceReverse,6),6))+" "+C((Ht=e.toCoin)==null?void 0:Ht.symbol)+" per "+C((Je=e.fromCoin)==null?void 0:Je.symbol),1)])):(b(),I("div",fv,"0.0")),e.fromCoin&&e.toCoin?(b(),I("div",{key:4,class:Ne(e.poolInfo&&((Oe=e.poolInfo)!=null&&Oe.needReverse)||e.createPoolInfo&&((yt=e.createPoolInfo)!=null&&yt.needReverse)?"toggle reverse":"toggle")},[d("div",{class:Ne(e.direct?"item active-item":"item"),onClick:t[16]||(t[16]=M=>e.direct?"":e.toggle())},[d("img",{src:e.getCoinIcon(e.direct?e.fromCoin:e.toCoin),alt:""},null,8,mv),He(" "+C(e.direct?(bt=e.fromCoin)==null?void 0:bt.symbol:(je=e.toCoin)==null?void 0:je.symbol),1)],2),d("div",{class:Ne(e.direct?"item ":"item active-item"),onClick:t[17]||(t[17]=M=>e.direct?e.toggle():"")},[d("img",{src:e.getCoinIcon(e.direct?e.toCoin:e.fromCoin),alt:""},null,8,pv),He(" "+C(e.direct?(x=e.toCoin)==null?void 0:x.symbol:(Me=e.fromCoin)==null?void 0:Me.symbol),1)],2)],2)):O("",!0)],2)):O("",!0),e.poolInfo||(U=(tt=e.$route)==null?void 0:tt.query)!=null&&U.action?(b(),be(N,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,"int-price":e.intPrice,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","int-price","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):O("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(b(),I("div",vv,[d("img",{src:("importIcon"in e?e.importIcon:ye(ze))("/image/icon-tips@2x.png"),alt:""},null,8,hv),d("p",gv,C(e.$t("tips.positionTips")),1)])):O("",!0),e.positionError&&(e.poolInfo||(nt=(Q=e.$route)==null?void 0:Q.query)!=null&&nt.action)&&(Number(e.minPrice)||Number(e.maxPrice))?(b(),I("div",yv,[d("img",{src:("importIcon"in e?e.importIcon:ye(ze))("/image/icon-tips-error@2x.png"),alt:""},null,8,bv),d("p",kv,C(e.$t("tips.positionError")),1)])):O("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(b(),I("div",wv,[e.fromCoin&&e.toCoin&&e.poolInfo?(b(),be(P,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):O("",!0),e.chartLoading?(b(),be(y,{key:1})):O("",!0)])):O("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(b(),I("div",Cv,[_v,d("span",$v,C(e.aprRewardsTime)+" Price Range",1),d("span",null,C(("addCommom"in e?e.addCommom:ye(Fe))(e.before7dContractPriceLowest,6))+" - "+C(("addCommom"in e?e.addCommom:ye(Fe))(e.before7dContractPriceHighest,6)),1)])):O("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(b(),be(m,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):O("",!0),(k=(Re=e.$route)==null?void 0:Re.query)!=null&&k.action&&!e.poolInfo&&!e.showFromCoinLock&&!e.showToCoinLock?(b(),I("div",Pv,C(e.$t("newAdd.createPoolText")),1)):O("",!0),((Nn=($=e.$route)==null?void 0:$.query)==null?void 0:Nn.action)=="create-pool"&&(e.showFromCoinLock||e.showToCoinLock)&&Number(e.maxPrice)>Number(e.minPrice)?(b(),I("div",Iv,"To create a new pool, the initial price you set must be within your price range. ")):O("",!0)],64)):(b(),I("div",Av,[e.storeIndex.theme=="default"?(b(),I("img",Sv)):(b(),I("img",Tv)),d("p",null,C(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&e.$route.query.action!=="create-pool"?(b(),be(w,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):O("",!0)])])):O("",!0),e.isPc?O("",!0):(b(),I("div",Nv,[d("div",Mv,[d("div",Rv,[d("div",Lv,[He(C(e.$t("common.selectPool"))+" ",1),ke(l,{placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[d("span",null,C(e.t("newAdd.poolWarning")),1)]),default:Ie(()=>[e.poolInfo&&e.isSelfBuilt?(b(),I("div",qv)):O("",!0)]),_:1})]),d("div",Uv,[ke(u,{"coin-icon":e.poolInfo?e.poolInfo.token_a.logoURI:e.createPoolFromCoin?e.createPoolFromCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_a.symbol:e.createPoolFromCoin&&e.createPoolFromCoin.symbol,coin:e.poolInfo?e.poolInfo.token_a:e.createPoolFromCoin,onClick:t[18]||(t[18]=M=>e.openCoinSelect("fromCoin"))},null,8,["coin-icon","coin-name","coin"]),ke(u,{"coin-icon":e.poolInfo?e.poolInfo.token_b.logoURI:e.createPoolToCoin?e.createPoolToCoin.logoURI:"","coin-name":e.poolInfo?e.poolInfo.token_b.symbol:e.createPoolToCoin&&e.createPoolToCoin.symbol,coin:e.poolInfo?e.poolInfo.token_b:e.createPoolToCoin,onClick:t[19]||(t[19]=M=>e.openCoinSelect("toCoin"))},null,8,["coin-icon","coin-name","coin"])]),d("div",{class:Ne(["pool-fee",e.edit?"pool-fee-edit":""])},[d("div",{class:"pool-fee-header",onClick:t[20]||(t[20]=M=>e.hasCreatePool?e.clickClear||!e.fromCoin||!e.toCoin?"":e.edit=!e.edit:"")},[d("span",{class:Ne(e.inputValue?"":"fee-span")},C(e.inputValue?e.inputValue:e.$t("newAdd.selectFeeTier")),3),e.hasCreatePool?(b(),I("svg",Ov,Fv)):O("",!0)]),e.edit?(b(),I("div",Ev,[e.getPoolInfoSuccess?(b(!0),I(Ft,{key:1},wn(e.feeTierList,(M,ae)=>{var Gt;return b(),I("div",{key:ae,class:Ne(["fee-item",[e.inputValue&&e.inputValue==M.label?"fee-item-active":"",e.isCreatePool&&e.isCreatePool.length>0&&e.isCreatePool.includes(M.fee)&&e.$route.query.action?" pool-created":" pool-not-created"]]),onClick:pt=>e.selectFee(M)},[e.$route.query.action=="create-pool"?(b(),I("div",Dv,[d("p",null,C(M.title),1),d("p",{class:Ne(e.isCreatePool.includes(M.fee)?"text-default":"text-theme")},C(e.isCreatePool.includes(M.fee)?e.$t("newAdd.alreadyCreated"):e.$t("newAdd.notCreated")),3)])):(b(),I("div",Hv,[d("p",{class:Ne(e.isCreatePool.includes(M.fee)?"text-active":"text-default")},C(M.title),3),e.isCreatePool&&!e.isCreatePool.includes(M.fee)?(b(),I("p",Xv,C(e.$t("newAdd.notCreated")),1)):O("",!0),e.isCreatePool&&e.isCreatePool.includes(M.fee)?(b(),I("p",zv,C(e.poolTvl&&e.poolTvl[M.fee]&&((Gt=e.poolTvl[M.fee])==null?void 0:Gt.rateText)),1)):O("",!0)])),d("span",null,C(M.text),1)],10,jv)}),128)):(b(),be(y,{key:0}))])):O("",!0)],2)]),d("div",Vv,[e.isShowMask?(b(),I("div",Wv)):O("",!0),d("div",Kv,[He(C((Mn=e.$route)!=null&&Mn.query.action?e.$t("newAdd.setInitialPrice"):e.$t("newAdd.selectRange"))+" ",1),e.poolInfo?(b(),be(l,{key:0,placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[d("span",null,C(e.$t("newAdd.selectRangeTips")),1)]),default:Ie(()=>[Yv]),_:1})):O("",!0)]),d("div",Gv,[!((Wt=(Rn=e.$route)==null?void 0:Rn.query)!=null&&Wt.action)&&e.poolInfo||(Ln=(Kt=e.$route)==null?void 0:Kt.query)!=null&&Ln.action?(b(),I(Ft,{key:0},[(qe=(Le=e.$route)==null?void 0:Le.query)!=null&&qe.action&&!e.poolInfo?(b(),be(g,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"click-clear":e.clickClear,"int-price":e.intPrice,onChangecurrentPrice:e.changecurrentPrice},null,8,["from-coin","to-coin","click-clear","int-price","onChangecurrentPrice"])):O("",!0),e.poolInfo?(b(),I("div",Qv,[(b(!0),I(Ft,null,wn(e.currentPriceTabList,M=>(b(),I("div",{key:M,class:Ne(["price-item",{"price-item-active":M.key==e.currentPriceTab,"price-stable":e.poolInfo.type=="stable"}]),onClick:ae=>e.priceTab(M)},[ke(l,{placement:"bottom","arrow-point-at-center":""},{title:Ie(()=>[d("span",null,C(e.getPirceText(M.key)),1)]),default:Ie(()=>[He(" "+C(e.getPirceKey(M.key)),1)]),_:2},1024)],10,Jv))),128))])):O("",!0),(gn=(hn=e.$route)==null?void 0:hn.query)!=null&&gn.action&&!e.poolInfo?(b(),I("div",Zv,C(e.$t("newAdd.createPoolInitialText")),1)):O("",!0),!e.poolInfo&&((Un=(qn=e.$route)==null?void 0:qn.query)!=null&&Un.action)?(b(),I("div",xv,C(e.$t("common.setPriceRange")),1)):O("",!0),e.poolInfo||(Bn=(On=e.$route)==null?void 0:On.query)!=null&&Bn.action?(b(),I("div",{key:4,class:Ne(["current-price",(Rt=(tn=e.$route)==null?void 0:tn.query)!=null&&Rt.action&&!e.createPoolInfo&&!e.poolInfo&&!e.inputValue?"create-pool-price":""])},[!e.fromCoin||!e.toCoin?(b(),I("span",eh,C(e.$t("common.currentPrice")),1)):O("",!0),e.fromCoin&&e.toCoin&&e.direct?(b(),I("div",th,[d("span",null,C(e.$t("common.currentPrice")),1),He(" "+C(("addCommom"in e?e.addCommom:ye(Fe))(("decimalUi"in e?e.decimalUi:ye(Be))(e.currentPrice,6),6))+" "+C((Lt=e.toCoin)==null?void 0:Lt.symbol)+" per "+C((ot=e.fromCoin)==null?void 0:ot.symbol),1)])):e.fromCoin&&e.toCoin&&!e.direct?(b(),I("div",nh,[d("span",null,C(e.$t("common.currentPrice")),1),He(" "+C(("addCommom"in e?e.addCommom:ye(Fe))(("decimalUi"in e?e.decimalUi:ye(Be))(e.currentPriceReverse,6),6))+" "+C((nn=e.toCoin)==null?void 0:nn.symbol)+" per "+C((qt=e.fromCoin)==null?void 0:qt.symbol),1)])):(b(),I("div",oh,"0.0")),e.fromCoin&&e.toCoin?(b(),I("div",{key:4,class:Ne(e.poolInfo&&((on=e.poolInfo)!=null&&on.needReverse)||e.createPoolInfo&&((q=e.createPoolInfo)!=null&&q.needReverse)?"toggle reverse":"toggle")},[d("div",{class:Ne(e.direct?"item active-item":"item"),onClick:t[21]||(t[21]=M=>e.direct?"":e.toggle())},[d("img",{src:e.getCoinIcon(e.direct?e.fromCoin:e.toCoin),alt:""},null,8,ih),He(" "+C(e.direct?(st=e.fromCoin)==null?void 0:st.symbol:(Yt=e.toCoin)==null?void 0:Yt.symbol),1)],2),d("div",{class:Ne(e.direct?"item ":"item active-item"),onClick:t[22]||(t[22]=M=>e.direct?e.toggle():"")},[d("img",{src:e.getCoinIcon(e.direct?e.toCoin:e.fromCoin),alt:""},null,8,rh),He(" "+C(e.direct?(z=e.toCoin)==null?void 0:z.symbol:(Ut=e.fromCoin)==null?void 0:Ut.symbol),1)],2)],2)):O("",!0)],2)):O("",!0),e.poolInfo||(Se=(Ae=e.$route)==null?void 0:Ae.query)!=null&&Se.action?(b(),be(N,{key:5,min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direct,"invalid-price-range":e.invalidPriceRange,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo?e.poolInfo:e.createPoolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax,onOnChangeFullRange:e.toFullRange},null,8,["min","max","from-coin","to-coin","direct","invalid-price-range","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice","onOnChangeFullRange"])):O("",!0),e.positionTips&&!e.clickClear&&e.poolInfo?(b(),I("div",ah,[d("img",{src:("importIcon"in e?e.importIcon:ye(ze))("/image/icon-tips@2x.png"),alt:""},null,8,sh),d("p",lh,C(e.$t("tips.positionTips")),1)])):O("",!0),e.positionError&&(e.poolInfo||(an=(rn=e.$route)==null?void 0:rn.query)!=null&&an.action)?(b(),I("div",uh,[d("img",{src:("importIcon"in e?e.importIcon:ye(ze))("/image/icon-tips-error@2x.png"),alt:""},null,8,ch),d("p",dh,C(e.$t("tips.positionError")),1)])):O("",!0),e.fromCoin&&e.toCoin&&e.poolInfo?(b(),I("div",fh,[e.fromCoin&&e.toCoin&&e.poolInfo?(b(),be(P,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direct,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):O("",!0),e.chartLoading?(b(),be(y,{key:1})):O("",!0)])):O("",!0),e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(b(),I("div",mh,[ph,d("span",vh,C(e.aprRewardsTime)+" Price Range",1),d("span",null,C(("addCommom"in e?e.addCommom:ye(Fe))(e.before7dContractPriceLowest,6))+" - "+C(("addCommom"in e?e.addCommom:ye(Fe))(e.before7dContractPriceHighest,6)),1)])):O("",!0),e.poolInfo&&!e.isSelfBuilt&&Number(e.minPrice)<Number(e.maxPrice)||e.poolInfo&&!e.isSelfBuilt&&e.maxPrice=="∞"?(b(),be(m,{key:10,"apr-title":e.aprTitle,"apr-rewards-date-list":e.aprRewardsDateList,"apr-rewards-parameter":e.aprRewardsParameter,"name-tab":"deposit","from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,onAprTab:e.aprTab},null,8,["apr-title","apr-rewards-date-list","apr-rewards-parameter","from-coin","to-coin","pool-info","min-price","max-price","onAprTab"])):O("",!0),(kt=(Ye=e.$route)==null?void 0:Ye.query)!=null&&kt.action&&!e.poolInfo?(b(),I("div",hh,C(e.$t("newAdd.createPoolText")),1)):O("",!0)],64)):(b(),I("div",gh,[e.storeIndex.theme=="default"?(b(),I("img",yh)):(b(),I("img",bh)),d("p",null,C(e.$t("newAdd.positionAppear")),1)]))]),e.poolInfo&&!e.isSelfBuilt?(b(),be(w,{key:1,"apr-rewards-parameter":e.aprRewardsParameter,"pool-info":e.poolInfo,label:e.label,onReviseValue:e.reviseValue},null,8,["apr-rewards-parameter","pool-info","label","onReviseValue"])):O("",!0)]),ke(A,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn",onClick:t[23]||(t[23]=M=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ie(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")&&e.addLiquidityBtnText!==e.$t("modal.selectTokenModalTitle")?(b(),I("svg",kh,Ch)):O("",!0),d("span",null,C(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),d("div",_h,[ke(ue)])]),d("div",$h,[d("div",Ph,C(e.$t("newAdd.depositAmounts")),1),d("div",Ih,[d("div",Ah,[ke(f,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":t[24]||(t[24]=M=>e.fromCoinAmount=M),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:t[25]||(t[25]=M=>e.maxBtnSelect("fromCoin")),onOnHalf:t[26]||(t[26]=M=>e.halfBtnSelect("fromCoin")),onOnInput:t[27]||(t[27]=M=>{e.fromCoinAmount=M,e.fixedFromCoin=!0}),onOnSelect:t[28]||(t[28]=M=>e.openCoinSelect("fromCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock?(b(),be(h,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):O("",!0)]),d("div",Sh,[ke(f,{modelValue:e.toCoinAmount,"onUpdate:modelValue":t[29]||(t[29]=M=>e.toCoinAmount=M),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:t[30]||(t[30]=M=>e.maxBtnSelect("toCoin")),onOnHalf:t[31]||(t[31]=M=>e.halfBtnSelect("toCoin")),onOnInput:t[32]||(t[32]=M=>{e.toCoinAmount=M,e.fixedFromCoin=!1}),onOnSelect:t[33]||(t[33]=M=>e.openCoinSelect("toCoin"))},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock?(b(),be(h,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo||e.createPoolInfo},null,8,["from-coin","to-coin","pool-info"])):O("",!0)]),(Xt=(wt=e.$route)==null?void 0:wt.query)!=null&&Xt.action&&!e.poolInfo&&(!e.createPoolInfo||!e.createPoolInfo.currentPrice)?(b(),be(v,{key:0,"show-to-coin-lock":e.showToCoinLock,"showfrom-coin-lock":e.showFromCoinLock},null,8,["show-to-coin-lock","showfrom-coin-lock"])):O("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme=="default"?(b(),I("img",{key:1,class:"add",src:gr,alt:"",onClick:t[34]||(t[34]=(...M)=>e.toggle&&e.toggle(...M))})):O("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.storeIndex.theme!=="default"?(b(),I("img",{key:2,class:"add",src:yr,alt:"",onClick:t[35]||(t[35]=(...M)=>e.toggle&&e.toggle(...M))})):O("",!0)]),e.poolInfo||e.createPoolInfo?(b(),be(_,{key:0,"min-price":e.minPrice,"max-price":e.maxPrice,"pool-info":e.poolInfo||e.createPoolInfo,"fixed-from-coin":e.fixedFromCoin,"from-coin":e.fromCoin,"to-coin":e.toCoin,"current-price-tab":e.currentPriceTab,slippage:e.slippage,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount},null,8,["min-price","max-price","pool-info","fixed-from-coin","from-coin","to-coin","current-price-tab","slippage","current-price","current-price-reverse","from-coin-amount","to-coin-amount"])):O("",!0)])])),ke(A,{disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,class:"big-btn h5-btn",onClick:t[36]||(t[36]=M=>e.wallet.connected?e.addOrCreate():e.wallet.setIsShowWalletModal(!0))},{default:Ie(()=>[e.addLiquidityBtnText!==e.$t("newAdd.preview")?(b(),I("svg",Th,Mh)):O("",!0),d("span",null,C(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),d("div",Rh,[ke(ue)]),e.showCoinSelect?(b(),be(B,{key:2,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,"is-create-pool-to-coin":e.isCreatePoolToCoin,"is-create-pool-from-coin":e.isCreatePoolFromCoin,onOnSelect:e.onCoinSelect,onOnClose:t[37]||(t[37]=M=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","is-create-pool-to-coin","is-create-pool-from-coin","onOnSelect"])):O("",!0),e.isShowLiquidityModal?(b(),be(K,{key:3,"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"pool-info":e.poolInfo,"current-direct":e.direct,onToAdd:e.toAdd,onOnClose:t[38]||(t[38]=M=>e.isShowLiquidityModal=!1)},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","min-price","max-price","current-price","current-price-reverse","pool-info","current-direct","onToAdd"])):O("",!0),e.isViewDetail?(b(),be(J,{key:4,"pool-info":e.poolInfo,onOnClose:t[39]||(t[39]=M=>e.isViewDetail=!1)},null,8,["pool-info"])):O("",!0),e.isCreateSuccess?(b(),be(fe,{key:5,onOnClose:t[40]||(t[40]=M=>e.isCreateSuccess=!1)})):O("",!0),e.isShowCreatePoolModal&&e.fromCoin&&e.toCoin?(b(),be(ne,{key:6,"from-coin":e.createPoolFromCoin,"to-coin":e.createPoolToCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price":e.createPoolInfo.currentPrice,"need-reverse":e.createPoolInfo.needReverse,direct:e.direct,onOnClose:t[41]||(t[41]=M=>e.isShowCreatePoolModal=!1),onCreatePool:e.toCreatePool},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","min-price","max-price","current-price","need-reverse","direct","onCreatePool"])):O("",!0),e.chainName=="Sui"&&e.isShowTokenWarning?(b(),be(T,{key:7,"from-coin":e.warningFromCoin,"to-coin":e.warningToCoin,onClose:e.closeTokenWarning,onClickContinue:t[42]||(t[42]=M=>e.isShowTokenWarning=!1)},null,8,["from-coin","to-coin","onClose"])):O("",!0)])}const s0=dt(Ip,[["render",Lh],["__scopeId","data-v-cdd5b65c"]]);export{s0 as default};
