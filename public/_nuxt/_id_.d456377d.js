import{_ as ce}from"./new-position-title.b8ddec3b.js";import{_ as Ho}from"./token-warning.7da2b012.js";import{_ as me}from"./status-block.159354ff.js";import{u as qo,g as ve,a as y,d as Mo,c as To,p as Yo,b as Qo,s as vo,e as lo,f as pe,h as fe,T as Ro,C as Ko}from"./pool.d87fe413.js";import{u as Lo,a as Oo}from"./sha256.850281d4.js";import{i as Io}from"./import-icon.de3e6c66.js";import{u as Do,a as Zo}from"./autoPool.98f41d17.js";import{a as bo,l as d,r as N,m as go,q as oo,e as $o,s as Bo,o as h,f as B,h as e,t as F,i as E,v as u,j as po,x as Go,u as j,p as ko,k as Co,M as Vo,y as Uo,z as xo,c as eo,w as fo,B as Fo,A as oe,C as zo,D as _e,L as he,I as be,S as ee,E as ge,b as ne,F as $e,G as ye,H as Ie,J as ke}from"./entry.22d1dc40.js";import{_ as Ce}from"./assets-card.53d426a3.js";import{D as $}from"./decimal.0e8aa3f1.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import"./decimal.633e31ee.js";import"./back.e58c691d.js";import"./swap-setting.9c2766e1.js";/* empty css              */import"./index.6bd0ebf3.js";/* empty css              */const Se=bo({setup(){const o=Lo(),n=d(()=>o),q=qo(),w=d(()=>q),P=d(()=>n.value.theme),I=i=>{var v;return(i==null?void 0:i.logoURI)||(i==null?void 0:i.logo_url)||((v=w.value.tokensObj[i==null?void 0:i.address])==null?void 0:v.logo_url)||(P.value==="default"?Io("/image/coins/unknown.png"):Io("/image/coins/sui-unknown.png"))},p=N(!0),m=Do(),b=d(()=>m),f=go(),s=N();oo(()=>[b.value.positionInfoObj,f.params.id],([i,v])=>{i&&!To(i)&&v&&(s.value=i[v],console.log(s.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const t=d(()=>{var i;return(i=s.value)==null?void 0:i.needReverse}),a=d(()=>{var i;return(i=b.value.apyObj[s.value.id])==null?void 0:i.tvl}),l=d(()=>{var i;return(i=b.value.apyObj[s.value.id])==null?void 0:i.apr});return{positionInfo:s,tvl:a,store:n,indexStore:o,needReverse:t,getCoinIcon:I,getExplorerUrl:ve,addCommom:y,decimalUi:Mo,direct:p,apy:l}}});const No=o=>(ko("data-v-5bc85e30"),o=o(),Co(),o),Ae={class:"auto-position-info"},we={class:"pool-info"},Pe={class:"left"},Re={class:"coin-a"},Te={alt:""},qe={class:"coin-b"},Le={alt:""},Be={class:"position-name"},Ne={key:0,class:"pool-fee"},Me=No(()=>e("span",null,"Fee tier",-1)),Oe={class:"right"},De={class:"price-info"},Ue={class:"current-price"},je=No(()=>e("span",null,"Current Price",-1)),Fe={class:"coin-rate"},Ee=No(()=>e("div",null,[e("svg",{class:"icon icon-up","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),We=No(()=>e("div",null,[e("svg",{class:"icon icon-down","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),Xe=[Ee,We],ze={key:0},He={key:1},Ge={class:"apy-and-tvl"},Je={class:"apy"},Ye=No(()=>e("div",{class:"apy-title"},"APY",-1)),Ke={class:"apy-text"},Qe={class:"tvl"},Ze=No(()=>e("div",{class:"tvl-title"},"TVL",-1)),Ve={class:"tvl-text"};function xe(o,n,q,w,P,I){var f,s,t,a,l,i,v,r,k,g,A,H,R,C,W,O,M,G,T,z,D,Q,J,no,Z,ao,V,_o,mo,so,_,U,to;const p=Ho,m=me,b=Bo("image");return h(),B("div",Ae,[e("div",we,[e("div",Pe,[e("div",Re,[F(e("img",Te,null,512),[[b,o.needReverse?o.getCoinIcon((s=o.positionInfo)==null?void 0:s.token_b):o.getCoinIcon((f=o.positionInfo)==null?void 0:f.token_a)]]),E(p,{address:o.needReverse?(i=(l=o.positionInfo)==null?void 0:l.token_b)==null?void 0:i.address:(a=(t=o.positionInfo)==null?void 0:t.token_a)==null?void 0:a.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",qe,[F(e("img",Le,null,512),[[b,o.needReverse?o.getCoinIcon((r=o.positionInfo)==null?void 0:r.token_a):o.getCoinIcon((v=o.positionInfo)==null?void 0:v.token_b)]]),E(p,{address:o.needReverse?(H=(A=o.positionInfo)==null?void 0:A.token_a)==null?void 0:H.address:(g=(k=o.positionInfo)==null?void 0:k.token_b)==null?void 0:g.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"4px"}},null,8,["address"])]),e("div",Be,u(o.needReverse?(C=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:C.symbol:(O=(W=o.positionInfo)==null?void 0:W.token_a)==null?void 0:O.symbol)+" - "+u(o.needReverse?(G=(M=o.positionInfo)==null?void 0:M.token_a)==null?void 0:G.symbol:(z=(T=o.positionInfo)==null?void 0:T.token_b)==null?void 0:z.symbol),1),(D=o.positionInfo)!=null&&D.fee?(h(),B("div",Ne,[Me,po(" "+u(((Q=o.positionInfo)==null?void 0:Q.fee)*100)+"% ",1)])):Go("",!0)]),e("div",Oe,[E(m,{"current-status":(J=o.positionInfo)==null?void 0:J.currentStatus},null,8,["current-status"])])]),e("div",De,[e("div",Ue,[e("div",null,[je,e("div",Fe,[e("div",{onClick:n[0]||(n[0]=uo=>o.direct=!o.direct)},Xe)])]),(o.needReverse?!o.direct:o.direct)?(h(),B("div",ze,[po(u(("addCommom"in o?o.addCommom:j(y))(("decimalUi"in o?o.decimalUi:j(Mo))((no=o.positionInfo)==null?void 0:no.price,6)))+"   ",1),e("span",null,u((ao=(Z=o.positionInfo)==null?void 0:Z.token_b)==null?void 0:ao.symbol)+" per "+u((_o=(V=o.positionInfo)==null?void 0:V.token_a)==null?void 0:_o.symbol),1)])):(h(),B("div",He,[po(u(("addCommom"in o?o.addCommom:j(y))(("decimalUi"in o?o.decimalUi:j(Mo))(1/((mo=o.positionInfo)==null?void 0:mo.price),6)))+"   ",1),e("span",null,u((_=(so=o.positionInfo)==null?void 0:so.token_a)==null?void 0:_.symbol)+" per "+u((to=(U=o.positionInfo)==null?void 0:U.token_b)==null?void 0:to.symbol),1)]))]),e("div",Ge,[e("div",Je,[Ye,e("div",Ke,u(o.apy),1)]),e("div",Qe,[Ze,e("div",Ve,"$"+u(("addCommom"in o?o.addCommom:j(y))(o.tvl,2)),1)])])])])}const te=$o(Se,[["render",xe],["__scopeId","data-v-5bc85e30"]]),on=bo({setup(){const o=Do(),n=d(()=>o),q=go(),w=d(()=>(console.log(n.value.positionInfoObj[q.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),n.value.positionInfoObj[q.params.id])),P=d(()=>{var m;return(m=w.value)==null?void 0:m.needReverse}),I=Oo(),p=d(()=>I);return{positionInfo:w,needReverse:P,addCommom:y,wallet:p}}});const So=o=>(ko("data-v-b1d5e482"),o=o(),Co(),o),en={class:"auto-position-liquidity"},nn={class:"my-liquidity"},tn={class:"left"},sn=So(()=>e("div",null,"My Liquidity",-1)),ln={key:0},an={key:1},un={class:"right"},dn=So(()=>e("div",null,"My share",-1)),rn={key:0},cn={key:1},mn={class:"my-liquidity-info"},vn={class:"lp-info"},pn={class:"lp-bg"},fn={alt:""},_n={alt:""},hn={key:0,class:"lp-num"},bn={key:1,class:"lp-num"},gn=So(()=>e("div",{class:"assets-pooled-title"}," Pooled Assets ",-1)),$n={class:"assets-pooled"},yn={alt:""},In={key:0},kn={key:1},Cn=So(()=>e("p",null,"--",-1)),Sn=So(()=>e("p",null,"--",-1)),An=[Cn,Sn],wn={alt:""},Pn={key:0},Rn={key:1},Tn=So(()=>e("p",null,"--",-1)),qn=So(()=>e("p",null,"--",-1)),Ln=[Tn,qn];function Bn(o,n,q,w,P,I){var m,b,f,s,t,a,l,i,v,r,k,g,A,H,R,C,W,O,M,G,T,z,D,Q,J,no,Z,ao,V,_o,mo,so,_,U,to,uo;const p=Bo("image");return h(),B("div",en,[e("div",nn,[e("div",tn,[sn,(m=o.wallet)!=null&&m.connected?(h(),B("div",ln,"$"+u(("addCommom"in o?o.addCommom:j(y))((b=o.positionInfo)==null?void 0:b.myLiquidityUSD)),1)):(h(),B("div",an,"--"))]),e("div",un,[dn,(f=o.wallet)!=null&&f.connected?(h(),B("div",rn,u((s=o.positionInfo)==null?void 0:s.myShare)+"%",1)):(h(),B("div",cn,"--%"))])]),e("div",mn,[e("div",vn,[e("div",pn,[F(e("img",fn,null,512),[[p,o.needReverse?(a=(t=o.positionInfo)==null?void 0:t.token_b)==null?void 0:a.logo_url:(i=(l=o.positionInfo)==null?void 0:l.token_a)==null?void 0:i.logo_url]]),F(e("img",_n,null,512),[[p,o.needReverse?(r=(v=o.positionInfo)==null?void 0:v.token_a)==null?void 0:r.logo_url:(g=(k=o.positionInfo)==null?void 0:k.token_b)==null?void 0:g.logo_url]])]),(A=o.wallet)!=null&&A.connected?(h(),B("div",hn,u(("addCommom"in o?o.addCommom:j(y))((H=o.positionInfo)==null?void 0:H.myLiquidity))+" LP",1)):(h(),B("div",bn,"-- LP"))]),gn,e("div",$n,[e("div",null,[F(e("img",yn,null,512),[[p,o.needReverse?(C=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:C.logo_url:(O=(W=o.positionInfo)==null?void 0:W.token_a)==null?void 0:O.logo_url]]),(M=o.wallet)!=null&&M.connected?(h(),B("div",In,[e("p",null,"$"+u(("addCommom"in o?o.addCommom:j(y))((G=o.positionInfo)==null?void 0:G.myAmountAUSD)),1),e("p",null,u(("addCommom"in o?o.addCommom:j(y))((T=o.positionInfo)==null?void 0:T.amountA))+" "+u(o.needReverse?(D=(z=o.positionInfo)==null?void 0:z.token_b)==null?void 0:D.symbol:(J=(Q=o.positionInfo)==null?void 0:Q.token_a)==null?void 0:J.symbol),1)])):(h(),B("div",kn,An))]),e("div",null,[F(e("img",wn,null,512),[[p,o.needReverse?(Z=(no=o.positionInfo)==null?void 0:no.token_a)==null?void 0:Z.logo_url:(V=(ao=o.positionInfo)==null?void 0:ao.token_b)==null?void 0:V.logo_url]]),(_o=o.wallet)!=null&&_o.connected?(h(),B("div",Pn,[e("p",null,"$"+u(("addCommom"in o?o.addCommom:j(y))((mo=o.positionInfo)==null?void 0:mo.myAmountBUSD)),1),e("p",null,u(("addCommom"in o?o.addCommom:j(y))((so=o.positionInfo)==null?void 0:so.amountB))+" "+u(o.needReverse?(U=(_=o.positionInfo)==null?void 0:_.token_a)==null?void 0:U.symbol:(uo=(to=o.positionInfo)==null?void 0:to.token_b)==null?void 0:uo.symbol),1)])):(h(),B("div",Rn,Ln))])])])])}const se=$o(on,[["render",Bn],["__scopeId","data-v-b1d5e482"]]),Nn=bo({components:{Modal:Vo},props:{poolInfo:{type:Object,default:()=>({})},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:""},toCoinAmount:{type:String,default:""},totalAmount:{type:String,default:""},shareOfPool:{type:String,default:""},minimumReceivedLP:{type:String,default:""}},setup(o,n){const{t:q}=Uo(),w=d(()=>{var a,l,i;return((a=o==null?void 0:o.poolInfo)==null?void 0:a.needReverse)||((i=(l=o==null?void 0:o.poolInfo)==null?void 0:l.poolInfo)==null?void 0:i.needReverse)}),P=qo(),I=d(()=>P),p=Lo(),m=d(()=>p),b=a=>{var l;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((l=I.value.tokensObj[a==null?void 0:a.address])==null?void 0:l.logo_url)||(m.value.theme==="default"?Io("/image/coins/unknown.png"):Io("/image/coins/sui-unknown.png"))},f=go(),s=N(!1),t=()=>{n.emit("toAdd")};return console.log(o,"props451"),{needReverse:w,getCoinIcon:b,addCommom:y,t:q,route:f,checked:s,decimalUi:Mo,clickSubmit:t}}});const jo=o=>(ko("data-v-bb911124"),o=o(),Co(),o),Mn=jo(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),On={class:"modal-content"},Dn={class:"pool-info"},Un={class:"left"},jn={alt:""},Fn={alt:""},En={class:"pool-name"},Wn={class:"right"},Xn={class:"coin-info"},zn={class:"from-coin-info"},Hn={class:"left"},Gn={class:"coin-amount"},Jn={class:"coin-symbol"},Yn={class:"right"},Kn={class:"to-coin-info"},Qn={class:"left"},Zn={class:"coin-amount"},Vn={class:"coin-symbol"},xn={class:"right"},ot=jo(()=>e("div",{class:"to-swap-logo"},null,-1)),et={class:"add-info"},nt={class:"total-amount"},tt=jo(()=>e("span",null,"Total Amount",-1)),st={class:"total-amount"},it=jo(()=>e("span",null,"Share of Pool",-1)),lt={class:"total-amount"},at=jo(()=>e("span",null,"Minimum Received LP",-1));function ut(o,n,q,w,P,I){const p=Ho,m=Fo,b=xo("Modal"),f=Bo("image");return h(),eo(b,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:n[0]||(n[0]=s=>o.$emit("onClose"))},{closeIcon:fo(()=>[Mn]),default:fo(()=>{var s,t,a,l,i,v,r,k,g,A,H,R,C,W,O,M,G,T,z,D,Q,J,no,Z;return[e("div",On,[e("div",Dn,[e("div",Un,[e("div",null,[F(e("img",jn,null,512),[[f,o.needReverse?(l=(a=o.poolInfo)==null?void 0:a.token_b)==null?void 0:l.logo_url:(t=(s=o.poolInfo)==null?void 0:s.token_a)==null?void 0:t.logo_url]]),E(p,{address:o.needReverse?(k=(r=o.poolInfo)==null?void 0:r.token_b)==null?void 0:k.address:(v=(i=o.poolInfo)==null?void 0:i.token_a)==null?void 0:v.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[F(e("img",Fn,null,512),[[f,o.needReverse?(R=(H=o.poolInfo)==null?void 0:H.token_a)==null?void 0:R.logo_url:(A=(g=o.poolInfo)==null?void 0:g.token_b)==null?void 0:A.logo_url]]),E(p,{address:o.needReverse?(M=(O=o.poolInfo)==null?void 0:O.token_a)==null?void 0:M.address:(W=(C=o.poolInfo)==null?void 0:C.token_b)==null?void 0:W.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",En,[e("span",null,u(o.needReverse?(D=(z=o.poolInfo)==null?void 0:z.token_b)==null?void 0:D.symbol:(T=(G=o.poolInfo)==null?void 0:G.token_a)==null?void 0:T.symbol),1),po(" - "),e("span",null,u(o.needReverse?(Z=(no=o.poolInfo)==null?void 0:no.token_a)==null?void 0:Z.symbol:(J=(Q=o.poolInfo)==null?void 0:Q.token_b)==null?void 0:J.symbol),1)])]),e("div",Wn,[po(" Fee tier "),e("span",null,u(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),e("div",Xn,[e("div",zn,[e("div",Hn,[e("div",Gn,u(("addCommom"in o?o.addCommom:j(y))(o.fromCoinAmount)||0),1),e("div",Jn,u(o.fromCoin&&o.fromCoin.symbol),1)]),e("div",Yn,[F(e("img",null,null,512),[[f,o.fromCoin&&o.fromCoin.logoURI||o.getCoinIcon(o.fromCoin)]]),E(p,{address:o.fromCoin&&o.fromCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])])]),e("div",Kn,[e("div",Qn,[e("div",Zn,u(("addCommom"in o?o.addCommom:j(y))(o.toCoinAmount)||0),1),e("div",Vn,u(o.toCoin&&o.toCoin.symbol),1)]),e("div",xn,[F(e("img",null,null,512),[[f,o.toCoin&&o.toCoin.logoURI||o.getCoinIcon(o.toCoin)]]),E(p,{address:o.toCoin&&o.toCoin.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),ot])]),e("div",et,[e("div",nt,[tt,e("span",null,"$"+u(("addCommom"in o?o.addCommom:j(y))(o.totalAmount)),1)]),e("div",st,[it,e("span",null,u(o.shareOfPool)+"%",1)]),e("div",lt,[at,e("span",null,u(("addCommom"in o?o.addCommom:j(y))(o.minimumReceivedLP))+" "+u(o.fromCoin.symbol)+"-"+u(o.toCoin.symbol),1)])])]),E(m,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:fo(()=>[po(" Add Liquidity ")]),_:1},8,["onClick"])]}),_:1})}const ie=$o(Nn,[["render",ut],["__scopeId","data-v-bb911124"]]),dt=bo({components:{AutoPoolAddModal:ie},setup(){const o=Oo(),n=N(!1),q=Lo(),w=d(()=>q),P=d(()=>w.value.chainName),I=d(()=>o),p=Do(),m=d(()=>p),b=qo(),f=d(()=>b),s=N(),t=go();oo(()=>[m.value.positionInfoObj,t.params.id],([c,S])=>{c&&!To(c)&&S&&(s.value=c[S],console.log(s.value,"##positionInfo.value"))},{immediate:!0,deep:!0});const a=d(()=>{var c,S;return console.log((c=s.value)==null?void 0:c.needReverse,"##positionInfo.value?.needReverse"),(S=s.value)==null?void 0:S.needReverse}),l=N(),i=N();oo(()=>s.value,c=>{c&&!To(c)&&(l.value=c==null?void 0:c.token_a,i.value=c==null?void 0:c.token_b)},{immediate:!0});const v=N(),r=N(),k=N(!0),g=d(()=>I.value.assets&&l.value&&I.value.assets[l.value.address]?Yo(I.value.assets[l.value.address].balance,l.value.decimals):0),A=d(()=>I.value.assets&&i.value&&I.value.assets[i.value.address]?Yo(I.value.assets[i.value.address].balance,i.value.decimals):0),H=c=>{c==="fromCoin"?(k.value=!0,v.value=g.value>0?l.value.symbol=="SUI"?new $(Number(g.value)).sub(new $(.05)).lt(new $(0))?"0":new $(Number(g.value)).sub(new $(.05)).toString():String(g.value):""):(k.value=!1,r.value=A.value>0?i.value.symbol=="SUI"?new $(Number(A.value)).sub(new $(.05)).lt(new $(0))?"0":new $(Number(A.value)).sub(new $(.05)).toString():String(A.value):"")},R=c=>{c==="fromCoin"?(k.value=!0,v.value=g.value>0?vo(new $(Number(g.value)).div(2).toString(),l.value.decimals).toString():""):(k.value=!1,r.value=A.value>0?vo(new $(Number(A.value)).div(2).toString(),i.value.decimals).toString():"")},C=d(()=>P.value?Qo(P.value):{}),W=d(()=>w.value.slippage),O=N("--"),M=N("--"),G=c=>{const S=new $(s.value.autoPoolPositionInfo.liquidity),L=new $(c.toString());console.log("totalLiquidity:",S.toString(),"liqididty:",L.toString(),L.div(S).mul(100).toString()),O.value=pe(L.div(S).mul(100).toNumber(),2)},T=c=>{const S=new $(c.toString());console.log(c.toString(),"##liquidityAmount.toString()");const L=S.mul(new $(W.value).div(100)),Y=new $(Math.pow(10,s.value.lpInfo.decimals));M.value=vo(S.minus(L).div(Y).toString(),s.value.decimals)},z=()=>{if(console.log(s.value,"238##"),!s.value||!v.value&&!r.value)return;const c=s.value.autoPoolPositionInfo.tick_lower_index,S=s.value.autoPoolPositionInfo.tick_upper_index;let L;if(v.value||r.value){if(k.value){const ro=new $(v.value).mul(Math.pow(10,l.value.decimals)).toString();L=new lo(ro)}else{const ro=new $(r.value).mul(Math.pow(10,i.value.decimals)).toString();L=new lo(ro)}const{liquidityAmount:Y,tokenMaxA:K,tokenMaxB:X,tokenMaxAOrigin:ho,tokenMaxBOrigin:io}=C.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:l.value,tokenB:i.value,lowerTick:c,upperTick:S,coinAmount:L,iscoinA:k.value,roundUp:!0,slippage:Number(W.value)/100,curSqrtPrice:new lo(s.value.current_sqrt_price)});console.log(X.toString(),K.toString(),s.value,"###323"),k.value?r.value=Number(X)>0?X:"":v.value=Number(K)>0?K:"",G(Y),T(Y)}},D=d(()=>f.value.RATES),Q=d(()=>{var c,S,L,Y,K,X,ho,io,ro,yo;if((S=D.value[(c=l.value)==null?void 0:c.address])!=null&&S.price&&((Y=D.value[(L=i.value)==null?void 0:L.address])!=null&&Y.price)){console.log((X=D.value[(K=l.value)==null?void 0:K.address])==null?void 0:X.price,"RATES.value[fromCoin.value?.address]?.price");const co=new $(v.value||0).mul(new $((io=D.value[(ho=l.value)==null?void 0:ho.address])==null?void 0:io.price)),x=new $(r.value||0).mul(new $((yo=D.value[(ro=i.value)==null?void 0:ro.address])==null?void 0:yo.price));return vo(co.add(x).toString(),6)}else return"--"});oo(v,(c,S)=>{c&&z(),c==""&&(O.value="--",r.value="",M.value="--")}),oo(r,(c,S)=>{c&&z(),c==""&&(v.value="",O.value="--",M.value="--")});const{t:J,locale:no}=Uo(),Z=d(()=>{const c=Number(v.value)>Number(g.value),S=Number(r.value)>Number(A.value);return!v.value&&!r.value?J("button.enterAmount"):c?J("button.insufficientBalance",{name:l.value.symbol}):S?J("button.insufficientBalance",{name:i.value.symbol}):"Add Liquidity"}),ao=d(()=>{const c=Number(v.value)>Number(g.value),S=Number(r.value)>Number(A.value);return!!(!v.value&&!r.value||c||S)}),V=N(!0),{setIsShowSuccess:_o,setIsShowRejected:mo,setIsShowWaiting:so,setTransactionDesc:_,setTransactionTxid:U,setPositiomNum:to}=q,uo=Zo("Sui");return{wallet:I,positionInfo:s,isShowAddModal:n,needReverse:a,fromCoin:l,toCoin:i,fromCoinAmount:v,toCoinAmount:r,fromCoinBlance:g,toCoinBlance:A,fixedFromCoin:k,maxBtnSelect:H,halfBtnSelect:R,totalAmountUSD:Q,addCommom:y,shareOfPool:O,minimumReceivedLP:M,addLiquidityBtnText:Z,addLiquidityBtnDisabled:ao,toAdd:async()=>{var io,ro,yo,co;n.value=!1,V.value=!0,U("");const c=`${y(v.value)} ${(io=l.value)==null?void 0:io.symbol}`,S=`${y(r.value)} ${(ro=i.value)==null?void 0:ro.symbol}`;_(`Deposit ${c} and ${S}`),so(!0);const L=k.value,Y=s.value.autoPoolPositionInfo.tick_lower_index,K=s.value.autoPoolPositionInfo.tick_upper_index;let X;if(k.value){const x=new $(v.value).mul(Math.pow(10,l.value.decimals)).toString();X=new lo(x)}else{const x=new $(r.value).mul(Math.pow(10,i.value.decimals)).toString();X=new lo(x)}const ho=s.value.rewarderInfo.map(x=>x.coinAddress);try{const x={lowerTick:Y,upperTick:K,coinAmount:X,fix_amount_a:L,slippage:Number(W.value)/100,curSqrtPrice:new lo(s.value.current_sqrt_price),id:s.value.id,clmm_pool:s.value.autoPoolPositionInfo.pool,lp_token_type:s.value.lp_token_type,coinTypeA:s.value.autoPoolPositionInfo.coin_type_a,coinTypeB:s.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:ho},Wo=await uo.deposit(x);console.log(Wo,"===>payloadAdd11111");const re=await I.value.currentWallet.signAndExecuteTransactionBlock(Wo);let Po=C.value.handleTx(re);if(console.log("toAdd###tx###",Po),Po&&Po.hash){U(Po.hash),so(!1),_o(!0),console.log(s,"===>positionInfo");const Xo={title:"Supplied",desc:`Deposit ${c} and ${S}`,hash:Po.hash,tit:"Liquidity Increased",icon:"icon-icon-Increased",text:`Deopsit ${v.value} ${(yo=l.value)==null?void 0:yo.symbol} and ${r.value} ${(co=i.value)==null?void 0:co.symbol}`};P.value!=="Aptos"&&(Xo.res=Po.res),C.value.showTransitionPending(Xo),await C.value.watchTransaction(Xo)&&setTimeout(()=>{p.updatePositionItem(s.value.address),C.value.getAccount(I.value.address)},1e3),to()}else so(!1),mo(!0);v.value="",r.value="",V.value=!1}catch(x){v.value="",r.value="",console.log("addError###",x),V.value=!1,so(!1),mo(!0)}}}}});const Eo=o=>(ko("data-v-ddd9d97e"),o=o(),Co(),o),rt={class:"auto-pool-add"},ct={class:"auto-pool-add-content"},mt={class:"liquidity-action-tab"},vt=Eo(()=>e("div",{class:"increase tab-active"},"Add",-1)),pt={class:"card-item"},ft={class:"card-item"},_t={class:"add-info"},ht={class:"total-amount"},bt=Eo(()=>e("span",null,"Total Amount",-1)),gt={class:"total-amount"},$t=Eo(()=>e("span",null,"Share of Pool",-1)),yt={class:"total-amount"},It=Eo(()=>e("span",null,"Minimum Received LP",-1));function kt(o,n,q,w,P,I){var f,s;const p=Ce,m=Fo,b=ie;return h(),B("div",rt,[e("div",ct,[e("div",mt,[vt,e("div",{class:"remove",onClick:n[0]||(n[0]=oe(t=>o.$emit("changeCurrentTab"),["stop"]))},"Remove")]),e("div",{class:zo(o.needReverse?"card-container reverse":"card-container")},[e("div",pt,[E(p,{modelValue:o.fromCoinAmount,"onUpdate:modelValue":n[1]||(n[1]=t=>o.fromCoinAmount=t),"input-value":o.fromCoinAmount,"coin-symbol":o.fromCoin?o.fromCoin.symbol:null,"coin-name":o.fromCoin?o.fromCoin.name:null,balance:o.fromCoinBlance,"coin-icon":o.fromCoin?o.fromCoin.logoURI:"",address:o.fromCoin?o.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:n[2]||(n[2]=t=>o.maxBtnSelect("fromCoin")),onOnHalf:n[3]||(n[3]=t=>o.halfBtnSelect("fromCoin")),onOnInput:n[4]||(n[4]=t=>{o.fromCoinAmount=t}),onOnFocus:n[5]||(n[5]=()=>{o.fixedFromCoin=!0})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])]),e("div",ft,[E(p,{modelValue:o.toCoinAmount,"onUpdate:modelValue":n[6]||(n[6]=t=>o.toCoinAmount=t),"input-value":o.toCoinAmount,"coin-symbol":o.toCoin?o.toCoin.symbol:null,"coin-name":o.toCoin?o.toCoin.name:null,balance:o.toCoinBlance,"swap-direct":"To","coin-icon":o.toCoin?o.toCoin.logoURI:"",address:o.toCoin?o.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:n[7]||(n[7]=t=>o.maxBtnSelect("toCoin")),onOnHalf:n[8]||(n[8]=t=>o.halfBtnSelect("toCoin")),onOnInput:n[9]||(n[9]=t=>{o.toCoinAmount=t}),onOnFocus:n[10]||(n[10]=()=>{o.fixedFromCoin=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"])])],2),e("div",_t,[e("div",ht,[bt,e("span",null,"$"+u(("addCommom"in o?o.addCommom:j(y))(o.totalAmountUSD)),1)]),e("div",gt,[$t,e("span",null,u(o.shareOfPool)+"%",1)]),e("div",yt,[It,e("span",null,u(("addCommom"in o?o.addCommom:j(y))(o.minimumReceivedLP))+" "+u((f=o.fromCoin)==null?void 0:f.symbol)+"-"+u((s=o.toCoin)==null?void 0:s.symbol),1)])])]),o.wallet.connected?(h(),eo(m,{key:0,class:"big-btn liquidity-btn",disabled:o.addLiquidityBtnDisabled,onClick:n[11]||(n[11]=t=>o.isShowAddModal=!0)},{default:fo(()=>[e("span",null,u(o.addLiquidityBtnText),1)]),_:1},8,["disabled"])):(h(),eo(m,{key:1,class:"big-btn",onClick:n[12]||(n[12]=t=>o.wallet.setIsShowWalletModal(!0))},{default:fo(()=>[e("span",null,u(o.$t("button.connectWallet")),1)]),_:1})),o.isShowAddModal?(h(),eo(b,{key:2,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,"from-coin-amount":o.fromCoinAmount,"to-coin-amount":o.toCoinAmount,"total-amount":o.totalAmountUSD,"share-of-pool":o.shareOfPool,"minimum-received-l-p":o.minimumReceivedLP,onOnClose:n[13]||(n[13]=t=>o.isShowAddModal=!1),onToAdd:o.toAdd},null,8,["pool-info","from-coin","to-coin","from-coin-amount","to-coin-amount","total-amount","share-of-pool","minimum-received-l-p","onToAdd"])):Go("",!0)])}const le=$o(dt,[["render",kt],["__scopeId","data-v-ddd9d97e"]]),Ct=bo({props:{inputValue:{type:String,default:""},balance:{type:String,default:""},lpDecimals:{type:String,default:""},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},inputDisabled:{type:Boolean,default:!1}},setup(o,n){const{t:q,locale:w}=Uo(),P=Lo(),I=d(()=>P),p=d(()=>new $(Number(o.balance)).div(2)),m=_e(he,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function b(){this.$emit("onSelect")}const f=g=>{const A=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${o.lpDecimals&&o.lpDecimals}})?).*$`);g.target.value=g.target.value.replace(A,"$1")},s=Oo(),t=d(()=>s),a=qo(),l=d(()=>a),i=d(()=>l.value.tokensWarningObj);oo(()=>l.value.RATES,g=>{g&&console.log(g,"price====>")},{immediate:!0});const v=d(()=>l.value.tokensObj),r=d(()=>I.value.theme);return{route:go(),theme:r,tokensObj:v,pool:l,halfBalance:p,t:q,addCommom:y,store:I,wallet:t,indicator:m,inputChange:f,importIcon:Io,selectCoin:b,formatNumber:fe,tokensWarningObj:i,checkNullObj:To}}});const ae=o=>(ko("data-v-84de2193"),o=o(),Co(),o),St={class:"card"},At={class:"top"},wt={key:1,class:"input-div"},Pt={key:0},Rt={class:"left"},Tt={class:"loading-token"},qt={class:"lp-bg"},Lt={alt:""},Bt={alt:""},Nt=ae(()=>e("p",null,"LP",-1)),Mt={class:"bottom"},Ot=ae(()=>e("div",null,null,-1)),Dt={class:"top"},Ut={class:"right"},jt={class:"balance"};function Ft(o,n,q,w,P,I){const p=be,m=ee,b=Bo("image");return h(),B("div",St,[e("div",At,[o.inputDisabled?(h(),B("div",wt,[o.inputValue?(h(),B("span",Pt,u(o.inputValue),1)):(h(),eo(m,{key:1,indicator:o.indicator},null,8,["indicator"]))])):(h(),eo(p,{key:0,value:o.inputValue=="InsufficientLiquidity"?"":o.inputValue,placeholder:"0.0",disabled:o.inputDisabled,onChange:o.inputChange,onInput:n[0]||(n[0]=f=>o.$emit("onInput",f.target.value)),onFocus:n[1]||(n[1]=f=>o.$emit("onFocus"))},null,8,["value","disabled","onChange"])),e("div",Rt,[e("div",Tt,[e("div",qt,[F(e("img",Lt,null,512),[[b,o.fromCoin.logo_url]]),F(e("img",Bt,null,512),[[b,o.toCoin.logo_url]])]),Nt])])]),e("div",Mt,[Ot,e("div",Dt,[e("div",Ut,[po(u(o.$t("common.balance"))+" ",1),e("span",jt,u(o.wallet.connected?("addCommom"in o?o.addCommom:j(y))(o.balance,o.lpDecimals):"0"),1)])])])])}const Et=$o(Ct,[["render",Ft],["__scopeId","data-v-84de2193"]]),Wt=bo({components:{Modal:Vo},props:{title:{type:String,default:""},poolInfo:{type:Object,default:()=>({})},fromCoinAmount:{type:String,default:"1245566.008946"},toCoinAmount:{type:String,default:"11111111111"},fromCoin:{type:Object,default:()=>({})},toCoin:{type:Object,default:()=>({})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},isIncrease:{type:Boolean,default:!1},fixedFromCoin:{type:Boolean,default:!0},currentPriceTab:{type:String,default:""},currentPrice:{type:String,default:""},currentPriceReverse:{type:String,default:""},showFromCoinLock:{type:Boolean,default:!1},showToCoinLock:{type:Boolean,default:!1},currentDirect:{type:Boolean,default:!0},positionTotalAmount:{type:Number,default:0},tickLower:{type:Number,default:0},tickUpper:{type:Number,default:0},isCreate:{type:Boolean,default:!1}},setup(o,n){const{t:q}=Uo(),w=d(()=>{var a,l,i;return((a=o==null?void 0:o.poolInfo)==null?void 0:a.needReverse)||((i=(l=o==null?void 0:o.poolInfo)==null?void 0:l.poolInfo)==null?void 0:i.needReverse)}),P=qo(),I=d(()=>P),p=Lo(),m=d(()=>p),b=a=>{var l;return(a==null?void 0:a.logoURI)||(a==null?void 0:a.logo_url)||((l=I.value.tokensObj[a==null?void 0:a.address])==null?void 0:l.logo_url)||(m.value.theme==="default"?Io("/image/coins/unknown.png"):Io("/image/coins/sui-unknown.png"))},f=go(),s=N(!1),t=()=>{n.emit("toAdd")};return console.log(o,"props451"),{needReverse:w,getCoinIcon:b,addCommom:y,t:q,route:f,checked:s,decimalUi:Mo,clickSubmit:t}}});const Ao=o=>(ko("data-v-6d964534"),o=o(),Co(),o),Xt=Ao(()=>e("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[e("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),zt={class:"modal-content"},Ht={class:"pool-info"},Gt={class:"left"},Jt={alt:""},Yt={alt:""},Kt={class:"pool-name"},Qt={class:"right"},Zt={class:"lp-info"},Vt=Ao(()=>e("div",{class:"lp-num"},[e("p",null,"1,126,122.123456"),e("span",null,"USDT-USDC LP")],-1)),xt={class:"lp-bg"},os={alt:""},es={alt:""},ns={class:"est-receive"},ts=Ao(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),ss={class:"token-a"},is=Ao(()=>e("div",null,"0.941824",-1)),ls={alt:""},as=Ao(()=>e("span",null,"USDT",-1)),us={class:"token-a"},ds=Ao(()=>e("div",null,"0.941824",-1)),rs={alt:""},cs=Ao(()=>e("span",null,"USDC",-1));function ms(o,n,q,w,P,I){const p=Ho,m=Fo,b=xo("Modal"),f=Bo("image");return h(),eo(b,{width:"440px",visible:!0,footer:null,title:"Add Liquidity",onCancel:n[0]||(n[0]=s=>o.$emit("onClose"))},{closeIcon:fo(()=>[Xt]),default:fo(()=>{var s,t,a,l,i,v,r,k,g,A,H,R,C,W,O,M,G,T,z,D,Q,J,no,Z;return[e("div",zt,[e("div",Ht,[e("div",Gt,[e("div",null,[F(e("img",Jt,null,512),[[f,o.needReverse?(l=(a=o.poolInfo)==null?void 0:a.token_b)==null?void 0:l.logo_url:(t=(s=o.poolInfo)==null?void 0:s.token_a)==null?void 0:t.logo_url]]),E(p,{address:o.needReverse?(k=(r=o.poolInfo)==null?void 0:r.token_b)==null?void 0:k.address:(v=(i=o.poolInfo)==null?void 0:i.token_a)==null?void 0:v.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",null,[F(e("img",Yt,null,512),[[f,o.needReverse?(R=(H=o.poolInfo)==null?void 0:H.token_a)==null?void 0:R.logo_url:(A=(g=o.poolInfo)==null?void 0:g.token_b)==null?void 0:A.logo_url]]),E(p,{address:o.needReverse?(M=(O=o.poolInfo)==null?void 0:O.token_a)==null?void 0:M.address:(W=(C=o.poolInfo)==null?void 0:C.token_b)==null?void 0:W.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"])]),e("div",Kt,[e("span",null,u(o.needReverse?(D=(z=o.poolInfo)==null?void 0:z.token_b)==null?void 0:D.symbol:(T=(G=o.poolInfo)==null?void 0:G.token_a)==null?void 0:T.symbol),1),po(" - "),e("span",null,u(o.needReverse?(Z=(no=o.poolInfo)==null?void 0:no.token_a)==null?void 0:Z.symbol:(J=(Q=o.poolInfo)==null?void 0:Q.token_b)==null?void 0:J.symbol),1)])]),e("div",Qt,[po(" Fee tier "),e("span",null,u(o.poolInfo&&o.poolInfo.fee*100)+"%",1)])]),e("div",Zt,[Vt,e("div",xt,[F(e("img",os,null,512),[[f,o.needReverse?o.poolInfo.token_b.logo_url:o.poolInfo.token_a.logo_url]]),F(e("img",es,null,512),[[f,o.needReverse?o.poolInfo.token_a.logo_url:o.poolInfo.token_b.logo_url]])])]),e("div",ns,[ts,e("div",ss,[is,e("div",null,[F(e("img",ls,null,512),[[f,"1"]]),as])]),e("div",us,[ds,e("div",null,[F(e("img",rs,null,512),[[f,"1"]]),cs])])])]),E(m,{class:"big-btn liquidity-btn",onClick:o.clickSubmit},{default:fo(()=>[po(u(o.isIncrease?"Increase Liquidity":o.title==o.$t("button.addLiquidity")?"Add Liquidity":"Create and Add Liquidity"),1)]),_:1},8,["onClick"])]}),_:1})}const ue=$o(Wt,[["render",ms],["__scopeId","data-v-6d964534"]]),vs=bo({components:{AutoPoolRemoveModal:ue},setup(){const o=Oo(),n=d(()=>o),q=Lo(),w=d(()=>q),P=d(()=>w.value.slippage),I=d(()=>w.value.chainName),p=[{name:"25%",value:25},{name:"50%",value:50},{name:"75%",value:75},{name:"MAX",value:100}],m=N(25),b=go(),f=Do(),s=d(()=>f),t=d(()=>(console.log(s.value.positionInfoObj[b.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),s.value.positionInfoObj[b.params.id])),a=d(()=>{var _;return(_=t.value)==null?void 0:_.needReverse}),l=N(),i=N(),v=N(!1),r=N(),k=d(()=>{var _;return(_=t.value)==null?void 0:_.myLiquidity}),g=N(!0),A=d(()=>I.value?Qo(I.value):{}),H=Zo("Sui"),R=N("--"),C=N("--"),W=()=>{if(g.value||!t.value)return;if(!r.value){R.value="--",C.value="--",m.value=0;return}if(Number(r.value)>Number(k.value))return;if(Number(r.value)*Math.pow(10,t.value.decimals)==Number(k.value)){m.value=100,M({value:1}),g.value=!0;return}console.log(t.value,"##lpBalance.value");const _=new $(r.value).mul(Math.pow(10,t.value.lpInfo.decimals)).toString(),U=new $(r.value).div(new $(k.value)).mul(100),to=t.value.autoPoolPositionInfo.tick_lower_index,uo=t.value.autoPoolPositionInfo.tick_upper_index,wo=t.value.token_a.decimals,c=t.value.token_b.decimals,S=Ro.tickIndexToSqrtPriceX64(to),L=Ro.tickIndexToSqrtPriceX64(uo);console.log(t.value.object.current_sqrt_price,"##positionInfo.value.object.current_sqrt_price");const Y=Ko.getCoinAmountFromLiquidity(new lo(_),new lo(t.value.object.current_sqrt_price),S,L,!1),K=new $(Y.coinA.toString()).div(Math.pow(10,wo)).toString(),X=new $(Y.coinB.toString()).div(Math.pow(10,c)).toString();R.value=Number(K)>0?K:"--",C.value=Number(X)>0?X:"--",console.log(U.toString(),"##ratio"),m.value=U.toNumber(),O.value=vo(_,0)},O=N(),M=_=>{if(!g.value)return;g.value=!0;const U=t.value.token_a.decimals,to=t.value.token_b.decimals,uo=t.value.tick_lower_index,wo=t.value.tick_upper_index,c=Ro.tickIndexToSqrtPriceX64(uo),S=Ro.tickIndexToSqrtPriceX64(wo);let L="";console.log(t.value,"positionInfo.value.myLiquidity###"),_.value!==1?L=new $(t.value.myLiquidity).mul(Math.pow(10,t.value.lpInfo.decimals)).mul(_.value).toString():L=new $(t.value.myLiquidity).mul(Math.pow(10,t.value.lpInfo.decimals)).toString(),L=vo(L,0)||"0",O.value=vo(L,0),r.value=new $(L).div(Math.pow(10,t.value.lpInfo.decimals));const Y=Ko.getCoinAmountFromLiquidity(new lo(L),new lo(t.value.object.current_sqrt_price),c,S,!1),K=new $(Y.coinA.toString()).div(Math.pow(10,U)).toString(),X=new $(Y.coinB.toString()).div(Math.pow(10,to)).toString();console.log(K,X,"amountA121212"),R.value=Number(K)>0?K:"--",C.value=Number(X)>0?X:"--"};oo(m,ge((_,U)=>{_!==U&&(Number(_)>100?m.value=100:_&&t.value?(console.log("687===>"),m.value=_,M({value:m.value/100})):(R.value="--",C.value="--"))},300)),oo(()=>r.value,_=>{W()},{immediate:!0});const G=ne(),{setIsShowSuccess:T,setIsShowRejected:z,setIsShowWaiting:D,setTransactionDesc:Q,setTransactionTxid:J,setPositiomNum:no,setTransactionDescText:Z}=q,ao=N(!1),{t:V}=Uo(),_o=async()=>{var Y,K,X,ho;ao.value=!0,J("");const _=y(R.value,l.value.decimals)==0?"":`${y(R.value,l.value.decimals)} ${l.value.symbol}`,U=y(C.value,i.value.decimals)==0?"":`${y(C.value,i.value.decimals)} ${i.value.symbol}`;Q(V("tips.removeLiquidiyText",{from:a.value?U:_,and:y(R.value,l.value.decimals)==0||y(C.value,i.value.decimals)==0?"":"and",to:a.value?_:U})),D(!0);const to=V("modal.removeLiquidityText2");Z(to);const uo=t.value.autoPoolPositionInfo.tick_lower_index,wo=t.value.autoPoolPositionInfo.tick_upper_index,c=Ro.tickIndexToSqrtPriceX64(uo),S=Ro.tickIndexToSqrtPriceX64(wo),L=t.value.rewarderInfo.map(io=>io.coinAddress);try{const io={lowerSqrtPrice:c,upperSqrtPrice:S,lpTokenAmount:new lo(O.value),curSqrtPrice:new lo(t.value.object.current_sqrt_price),slippage:P.value,id:t.value.id,clmm_pool:t.value.autoPoolPositionInfo.pool,lp_token_type:t.value.lp_token_type,coinTypeA:t.value.autoPoolPositionInfo.coin_type_a,coinTypeB:t.value.autoPoolPositionInfo.coin_type_b,rewarder_coin_types:L},ro=await H.remove(io),yo=await n.value.currentWallet.signAndExecuteTransactionBlock(ro);let co=A.value.handleTx(yo);if(console.log("0331###remove###tx####",co),co&&co.hash){J(co.hash),D(!1),T(!0);const x={title:V("common.removeLiquidity"),desc:"",hash:co.hash,descTransactions:`Remove ${y(R.value)} ${(Y=l.value)==null?void 0:Y.symbol} and ${y(C.value)} ${(K=i.value)==null?void 0:K.symbol} 
             from the pool`,sender:n.value.address,chainName:"Sui",tit:"Liquidity Removed",icon:"icon-icon-Removed",text:`Withdraw ${R.value} ${(X=l.value)==null?void 0:X.symbol} and ${C.value} ${(ho=i.value)==null?void 0:ho.symbol}`};x.res=co.res,A.value.showTransitionPending(x),await A.value.watchTransaction(x)&&(R.value="",C.value="",r.value="",m.value=0,setTimeout(()=>{f.updatePositionItem(t.value.address),A.value.getAccount(n.value.address)},1e3),Number(m.value)==100&&b.name=="auto-pool-detail"&&G.push("/pool/auto"))}else D(!1),z(!0);ao.value=!1}catch(io){console.log("Remove error",io),ao.value=!1,D(!1),z(!0)}};oo(()=>t.value,(_,U)=>{_&&!To(_)&&(l.value=_==null?void 0:_.token_a,i.value=_==null?void 0:_.token_b,console.log("触发###"),(!U||U&&U.address!==_.address)&&M({value:m.value/100}))},{immediate:!0});const mo=d(()=>{const _=Number(r.value)>Number(k.value);return!r.value||r.value<=0?V("button.enterAmount"):_?"Invalid Amount":V("button.remove")}),so=d(()=>{const _=Number(r.value)>Number(k.value);return!!(!r.value||r.value<=0||_)});return{removeLiquidityBtnText:mo,removeLiquidityBtnDisabled:so,wallet:n,ratioArr:p,positionInfo:t,isShowRemoveModal:v,needReverse:a,fromCoin:l,toCoin:i,lpAmount:r,lpBalance:k,sliderVal:m,sFixD:vo,isSlider:g,fromCoinAmount:R,toCoinAmount:C,setPercent:M,toRemove:_o,addCommom:y}}});const Jo=o=>(ko("data-v-6cc36978"),o=o(),Co(),o),ps={class:"auto-pool-add"},fs={class:"auto-pool-add-content"},_s={class:"liquidity-action-tab"},hs=Jo(()=>e("div",{class:"remove tab-active"},"Remove",-1)),bs={class:"card-item"},gs={class:"remove-ratio"},$s=Jo(()=>e("div",{class:"remove-ratio-title"},"Amount",-1)),ys={class:"remove-ratio-select"},Is={key:0,class:"ratio"},ks={key:1,class:"ratio"},Cs={class:"ratio-list"},Ss=["onClick"],As={class:"est-receive"},ws=Jo(()=>e("div",{class:"est-receive-title"},"Estimated Receive",-1)),Ps={class:"token-a"},Rs={alt:""},Ts={class:"token-a"},qs={alt:""};function Ls(o,n,q,w,P,I){var t,a,l,i,v,r,k,g,A,H,R,C,W,O,M,G;const p=Et,m=Ie,b=Fo,f=ue,s=Bo("image");return h(),B("div",ps,[e("div",fs,[e("div",_s,[e("div",{class:"increase",onClick:n[0]||(n[0]=oe(T=>o.$emit("changeCurrentTab"),["stop"]))},"Add"),hs]),e("div",{class:zo(o.needReverse?"card-container reverse":"card-container")},[e("div",bs,[E(p,{modelValue:o.lpAmount,"onUpdate:modelValue":n[1]||(n[1]=T=>o.lpAmount=T),"input-value":o.lpAmount,balance:o.lpBalance,"from-coin":o.needReverse?o.toCoin:o.fromCoin,"to-coin":o.needReverse?o.fromCoin:o.toCoin,onOnInput:n[2]||(n[2]=T=>{o.isSlider=!1,o.lpAmount=T})},null,8,["modelValue","input-value","balance","from-coin","to-coin"])])],2),e("div",gs,[$s,e("div",ys,[Number(o.lpBalance)>=Number(o.lpAmount)?(h(),B("div",Is,u(o.sliderVal>0&&Number(("sFixD"in o?o.sFixD:j(vo))(o.sliderVal,2))<.01?"<0.01":("sFixD"in o?o.sFixD:j(vo))(o.sliderVal,2))+"% ",1)):(h(),B("div",ks,"--")),e("div",Cs,[(h(!0),B($e,null,ye(o.ratioArr,(T,z)=>(h(),B("div",{key:z,class:zo(["ratio-item",o.sliderVal==T.value?"ratio-item-active":""]),onClick:()=>{o.isSlider=!0,o.sliderVal=T.value}},u(T.name),11,Ss))),128))])]),E(m,{value:o.sliderVal,"onUpdate:value":n[3]||(n[3]=T=>o.sliderVal=T)},null,8,["value"])]),e("div",As,[ws,e("div",Ps,[e("div",null,u(("addCommom"in o?o.addCommom:j(y))(o.fromCoinAmount)),1),e("div",null,[F(e("img",Rs,null,512),[[s,o.needReverse?(a=(t=o.positionInfo)==null?void 0:t.token_b)==null?void 0:a.logo_url:(i=(l=o.positionInfo)==null?void 0:l.token_a)==null?void 0:i.logo_url]]),e("span",null,u(o.needReverse?(r=(v=o.positionInfo)==null?void 0:v.token_b)==null?void 0:r.symbol:(g=(k=o.positionInfo)==null?void 0:k.token_a)==null?void 0:g.symbol),1)])]),e("div",Ts,[e("div",null,u(("addCommom"in o?o.addCommom:j(y))(o.toCoinAmount)),1),e("div",null,[F(e("img",qs,null,512),[[s,o.needReverse?(H=(A=o.positionInfo)==null?void 0:A.token_a)==null?void 0:H.logo_url:(C=(R=o.positionInfo)==null?void 0:R.token_b)==null?void 0:C.logo_url]]),e("span",null,u(o.needReverse?(O=(W=o.positionInfo)==null?void 0:W.token_a)==null?void 0:O.symbol:(G=(M=o.positionInfo)==null?void 0:M.token_b)==null?void 0:G.symbol),1)])])])]),o.wallet.connected?(h(),eo(b,{key:0,class:"big-btn liquidity-btn",disabled:o.removeLiquidityBtnDisabled,onClick:o.toRemove},{default:fo(()=>[e("span",null,u(o.removeLiquidityBtnText),1)]),_:1},8,["disabled","onClick"])):(h(),eo(b,{key:1,class:"big-btn",onClick:n[4]||(n[4]=T=>o.wallet.setIsShowWalletModal(!0))},{default:fo(()=>[e("span",null,u(o.$t("button.connectWallet")),1)]),_:1})),o.isShowRemoveModal?(h(),eo(f,{key:2,"pool-info":o.positionInfo,"from-coin":o.positionInfo.token_a,"to-coin":o.positionInfo.token_b,onOnClose:n[5]||(n[5]=T=>o.isShowRemoveModal=!1)},null,8,["pool-info","from-coin","to-coin"])):Go("",!0)])}const de=$o(vs,[["render",Ls],["__scopeId","data-v-6cc36978"]]),Bs=bo({components:{AutoPoolAdd:le,AutoPositionInfo:te,AutoPositionLiquidity:se,AutoPoolRemove:de},setup(){const o=N("add"),n=Oo(),q=d(()=>n),w=Do(),P=d(()=>w),I=qo(),p=d(()=>I);oo(()=>p.value.poolConfigList,s=>{s&&s.length>0&&w.getAutoPoolList()},{immediate:!0}),oo(()=>[q.value.address,P.value.autoPoolList,p.value.poolConfigList],([s,t,a])=>{s&&t&&t.length>0&&a&&a.length>0&&w.getMyAutoPoolPosition()},{immediate:!0}),oo(()=>[P.value.positionInfoList,p.value.RATES],(s,t)=>{s[0]&&s[0].length>0&&s[1]&&!To(s[1])&&(console.log("执行了吗##"),w.getUserPositionUSD())},{immediate:!0});const m=go(),b=d(()=>(console.log(P.value.positionInfoObj[m.params.id],"autoPool.value.positionInfoObj[route.params.id]###"),P.value.positionInfoObj[m.params.id]));oo(()=>m.query.action,s=>{s&&(o.value=s)},{immediate:!0});const f=ne();return oo(()=>q.value.address,s=>{s||f.push("/pool/auto")},{immediate:!0}),{currentTab:o,positionInfo:b}}});const Ns={class:"auto-increase-liquidity"},Ms={class:"auto-increase-liquidity-content pc-content"},Os={class:"left"},Ds={class:"right"},Us={class:"auto-increase-liquidity-content h5-content"},js={class:"left"},Fs={class:"right"},Es={class:"loading-global"};function Ws(o,n,q,w,P,I){const p=ce,m=te,b=se,f=le,s=de,t=ee;return h(),B("div",Ns,[E(p),e("div",Ms,[e("div",Os,[E(m),E(b)]),e("div",Ds,[o.currentTab=="add"?(h(),eo(f,{key:0,onChangeCurrentTab:n[0]||(n[0]=a=>o.currentTab="remove")})):(h(),eo(s,{key:1,onChangeCurrentTab:n[1]||(n[1]=a=>o.currentTab="add")}))])]),e("div",Us,[e("div",js,[E(m),o.currentTab=="add"?(h(),eo(f,{key:0,onChangeCurrentTab:n[2]||(n[2]=a=>o.currentTab="remove")})):(h(),eo(s,{key:1,onChangeCurrentTab:n[3]||(n[3]=a=>o.currentTab="add")}))]),e("div",Fs,[E(b)])]),F(e("div",Es,[E(t)],512),[[ke,!o.positionInfo]])])}const ri=$o(Bs,[["render",Ws],["__scopeId","data-v-5177e56c"]]);export{ri as default};
