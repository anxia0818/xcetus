import{j as Qt,n as ft,d as he,e as kt,u as qt,a as Ne,c as Ae,s as gt,T as at,G as Yt,b as He,l as St,p as It}from"./pool.65129fc8.js";import{a as tt,r as L,l as $,H as Mt,q as Te,e as ot,o as N,f as K,t as $t,N as Vt,h as r,O as pt,v as me,u as pe,x as V,c as Ge,p as wt,k as _t,S as Bt,y as Ft,m as yt,K as Rt,s as eo,F as ht,E as At,i as Xe,A as dt,w as lt,j as Ct,P as Ot,a0 as to,b as oo,B as io}from"./entry.04873a7d.js";/* empty css              */import{s as ut,m as no,l as ao,b as ro,a as lo}from"./transform.c672907f.js";import{D as a}from"./decimal.0bdeb344.js";import{u as Pt,a as so}from"./sha256.58fa61bf.js";import{d as Ut,_ as jt,c as xt,a as zt,b as uo}from"./new-liquidity-title.5abdbc12.js";import{i as bt}from"./import-icon.de3e6c66.js";/* empty css              */import{positionError as Ve,fromCoin as w,toCoin as b,tickList as Ye,minPrice as O,maxPrice as I,currentPrice as et,currentPriceReverse as rt,direction as qe,currentPriceTab as H,defaultMinPrice as mt,defaultMaxPrice as vt,toggle as Ht,isInputTotalAmount as De,priceConfigObj as Qe,fromCoinAmount as _,toCoinAmount as C,fixedFromCoin as Pe,resetTickList as Lt,resetData as co}from"./data.49463fad.js";import{_ as mo}from"./coin-lock.b7a4496a.js";import{_ as vo}from"./coin-select.f5862442.js";import{_ as fo}from"./viewDetail.bfe16833.js";import{a as go}from"./new-add-or-create.ed693679.js";import{u as po}from"./farms.8ad31e0f.js";import{u as ho}from"./notifi.3e2cc2cb.js";import{_ as bo,a as ko}from"./icon-Add-Liquidity_2x.0acb06cb.js";import"./img-lock_2x.a28135f4.js";import"./lock.c2d39829.js";/* empty css              *//* empty css              */import"./token-warning.ef6c9e52.js";import"./swap-setting.acccde0b.js";/* empty css              */import"./icon-error_2x.3f5ea973.js";import"./img-lock_2x.ec1447bd.js";import"./img-no-Positions_2x.bfaee455.js";import"./img-no-Positions_2x.14007c3e.js";import"./status-block.c21b8fd4.js";import"./icon-arrow_2x.948aedb2.js";import"./icon-arrow_2x.4ffddb8e.js";import"./useWhale.4488906e.js";function Nt(e,d,le){const oe=new a(10).pow(d-le);return new a(1.0001).pow(e).mul(oe)}const wo=tt({props:{poolInfo:{type:Object,default:()=>({chartLoading:!1,token_a:{decimal:6},token_b:{decimal:6},currentLiquity:"50000000"})},minPrice:{type:String,default:""},maxPrice:{type:String,default:""},direction:{type:Boolean,default:!0},tickList:{type:Array,default:()=>[]},currentTick:{type:Number,default:0},chartLoading:{type:Boolean,default:!1},currentPriceTab:{type:String,default:""},before7dContractPriceLowest:{type:String,default:""},before7dContractPriceHighest:{type:String,default:""},zoom:{type:Number,default:1}},setup(e,d){const le=L(""),oe=L(""),A=$(()=>{var n,l,m,X,j,Y;return console.log(e.poolInfo,"===>props.poolInfo"),(n=e.poolInfo)!=null&&n.current_sqrt_price&&((l=e.poolInfo)!=null&&l.coinA.decimals)&&((m=e.poolInfo)!=null&&m.coinB.decimals)?i.sqrtPriceX64ToPrice((X=e.poolInfo)==null?void 0:X.current_sqrt_price,(j=e.poolInfo)==null?void 0:j.coinA.decimals,(Y=e.poolInfo)==null?void 0:Y.coinB.decimals).toString():"0"}),ie=$(()=>{let n=0;return e.direction?n=(Number(e.minPrice)/Number(A.value)-1)*100:n=(Number(e.minPrice)/Number(1/Number(A.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),B=$(()=>{let n=0;return e.direction?n=(Number(e.maxPrice)/Number(A.value)-1)*100:n=(Number(e.maxPrice)/Number(1/Number(A.value))-1)*100,n=n>0&&n<.1?.1:n,n=n<0&&n>-.1?-.1:n,n}),U=Pt(),T=$(()=>U),ee=$(()=>T.value.chainName?kt(T.value.chainName):{}),{TickMath:i,getNearestTickByTick:y}=ee.value,Q=(n=[])=>{let l=6;const m=Math.abs(Number(n[0])-Number(n[n.length-1]));return m>=6?l=0:m>=1?l=1:m>=.1?l=2:m>=.01?l=3:m>=.001?l=4:m>=1e-4?l=5:m>=1e-5?l=6:m>=1e-6?l=7:m>=1e-7&&(l=8),l},be=(n,l=1)=>{if(n&&n.token_a&&!e.chartLoading&&e.minPrice&&e.maxPrice){const m=Number(e.poolInfo.current_tick_index);console.log("0117###dataProcessing###currentTick###",m),console.log("0117###dataProcessing###props.poolInfo###",e.poolInfo),console.log("0117###dataProcessing###minPrice###",e.minPrice),console.log("0117###dataProcessing###maxPrice###",e.maxPrice),console.log("0117###dataProcessing###poolInfo###",e.poolInfo);let X=m+100*l,j=m-100*l,Y,ce;if(e.maxPrice==="∞")ce=ee.value.TickUtil.getMaxIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?ce=i.priceToTickIndex(new a(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):ce=i.priceToTickIndex(new a(1).div(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{ce=443636}if(e.minPrice==="0")Y=ee.value.TickUtil.getMinIndex(Number(e.poolInfo.tickSpacing));else try{e.direction?Y=i.priceToTickIndex(new a(e.minPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):Y=i.priceToTickIndex(new a(1).div(e.maxPrice),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)}catch{Y=-443636}let ye=0;if(e.currentPriceTab!=="full range"){if(m>=Y&&m<=ce){const P=m-Y,ae=ce-m;ye=Math.max(Math.abs(P),Math.abs(ae))}else m<Y?ye=Math.abs(ce-m):ye=Math.abs(m-Y);X=m+ye+100*l,j=m-ye-100*l}else{const P=(Math.abs(m)>5e3,2e4);X=m+P*l,j=m-P*l}j<-443636&&(j=-443636),X>443636&&(X=443636);const h=new a(n.liquidity).div(Math.pow(10,8)).toString(),S=e.tickList;console.log("0117####drawChart####tick_info_array####",S);const F=[],ke=[];let k={};for(let P=0;P<S.length;P++){if(k=S[P],k.index<=m&&k.index>=j){if(F.length<1&&P!==0){const ae=S[P-1];F.unshift({...ae,index:j,source:"left"})}F.unshift(k)}else if(k.index>m&&k.index<=X&&(ke.push(k),F.length<1&&P!==0)){const ae=S[P-1];F.push({...ae,index:j,source:"left"})}if(k.index>X){const ae=S[P];if(ke.push({...ae,index:X,source:"right"}),F.length<1&&P!==0){const Je=S[P-1];F.push({...Je,index:j,source:"left"})}break}}let q="0";for(let P=F.length-1;P>=0;P--)q=new a(q).plus(new a(F[P].liquidityNet.toString()).div(Math.pow(10,8))).toString(),F[P].liquityAmount=q;let E=h;for(let P=0;P<ke.length;P++)E=new a(E).plus(new a(ke[P].liquidityNet.toString()).div(Math.pow(10,8))).toString(),ke[P].liquityAmount=E;let D=[];const M=S&&S.length>0?{index:m,liquityAmount:Number(h)}:{index:m,liquityAmount:0};(F.length>0||ke.length>0)&&(D=[...F.reverse(),M,...ke],e.direction||(D=D.reverse()));const xe=[];S.forEach(P=>{xe.push({...P,liquidityGross:P.liquidityGross.toString(),liquidityNet:P.liquidityNet.toString()})}),console.log("0117####drawChart####testTickInfoArray####",xe),console.log("0117####drawChart####currentLiquity####",h),console.log(D,"###chartData"),g(D,j,X,Y,ce,m)}};let Se=L(!1);const ne=L(!1);Mt(()=>{const n=document.body.clientWidth;ne.value=!0,n<750?Se.value=!1:Se.value=!0,window.onresize=()=>{document.body.clientWidth<750?Se.value=!1:Se.value=!0,console.log("这里执行了吗"),be(e.poolInfo,e.zoom)}});const g=(n,l,m,X,j,Y)=>{console.log("0117####drawChart####chartData####",n),console.log("0117####drawChart####tickMin####",l),console.log("0117####drawChart####tickMax####",m),console.log("0117####drawChart####minPriceTick####",X),console.log("0117####drawChart####maxPriceTick####",j),console.log("0117####drawChart####currentTick####",Y),console.log("0117####drawChart####props.direction####",e.direction),console.log("0518###newd3###props.before7dContractPriceLowest###",e.before7dContractPriceLowest),console.log("0518###newd3###props.before7dContractPriceHighest###",e.before7dContractPriceHighest);let ce,ye;e.direction?(ce=e.before7dContractPriceLowest?i.priceToTickIndex(new a(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",ye=e.before7dContractPriceHighest?i.priceToTickIndex(new a(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):""):(ce=e.before7dContractPriceLowest?i.priceToTickIndex(new a(1).div(e.before7dContractPriceLowest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"",ye=e.before7dContractPriceHighest?i.priceToTickIndex(new a(1).div(e.before7dContractPriceHighest),e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals):"");const h={top:30,right:35,bottom:20,left:80};let S,F;Se.value?(S=460-h.left-h.right,F=205-h.top-h.bottom):(S=340-h.left-h.right,F=205-h.top-h.bottom);const ke=m-l,k=parseInt(String(ke/4));let q=[l+k/4,l+k,l+2*k,m-k,m-k/4];const E=l,D=m,M=S/(D-E);e.currentPriceTab==="full range"&&(q=[l,l+2*k,m]),console.log("0117####drawChart####xArr####",q),console.log("0117####drawChart####utickMin####",E),console.log("0117####drawChart####utickMax####",D),console.log("0117####drawChart####unit####",M);const xe=q.map(s=>e.direction?Nt(s,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString():new a(1).div(Nt(s,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals)).toString()),P=Q(xe);ut("#chart").selectAll("*").remove();const ae=ut("#chart").attr("width",S+h.left+h.right).attr("height",F+h.top+h.bottom).append("g").attr("transform",`translate(${h.left},${h.right})`),Je=no(n,function(s){return Number(Math.abs(s.liquityAmount))})||0,Me=ao().range([0,F]).domain([Je,0]);ro().rangeRound([0,S]).padding(.1);const it=ae.append("g").attr("id","barsBox").selectAll("rect").data(n).enter().append("rect");T.value.theme=="default"?it.attr("x",function(s,u){return u===0?0:e.direction?Math.abs(s.index-E)*M:Math.abs(D-s.index)*M}).attr("y",function(s,u){return e.direction?u===n.length-1?0:Me(s.liquityAmount):u===n.length-1?0:Me(n[u+1].liquityAmount)}).attr("width",function(s,u){return u===0&&n.length===1&&s.liquityAmount>0?S:(e.direction,u!==n.length-1?Math.abs(n[u+1].index-s.index)*M:0)}).attr("height",function(s,u){return u===0&&n.length===1&&s.liquityAmount>0?F:e.direction?u===n.length-1?0:F-Me(s.liquityAmount):u===n.length-1?0:F-Me(n[u+1].liquityAmount)}).attr("fill","#279477").attr("class","bars").attr("stroke-width",1).attr("stroke","#279477"):it.attr("x",function(s,u){return u===0?0:e.direction?Math.abs(s.index-E)*M:Math.abs(D-s.index)*M}).attr("y",function(s,u){return e.direction?u===n.length-1?0:Me(Math.abs(s.liquityAmount)):u===n.length-1?0:Me(Math.abs(n[u+1].liquityAmount))}).attr("width",function(s,u){return u===0&&n.length===1&&s.liquityAmount>0?S:(e.direction,u!==n.length-1?Math.abs(n[u+1].index-s.index)*M:0)}).attr("height",function(s,u){if(u===0&&n.length===1&&s.liquityAmount>0)return F;if(e.direction)return u===n.length-1?0:Number(s.liquityAmount)?F-Me(Math.abs(s.liquityAmount)):0;{if(u===n.length-1)return 0;const Fe=F-Me(Math.abs(n[u+1].liquityAmount));return Number(n[u+1].liquityAmount)?Fe:0}}).attr("fill",function(s,u){return"#417494"}).attr("class","bars").attr("stroke-width",1).attr("stroke",function(s,u){return"#417494"});const t=ae.append("g");t.append("line").attr("x1",0).attr("y1",155).attr("x2",S).attr("y2",155).attr("stroke-width",1).attr("stroke","#50535D");const v=t.append("g");let f=0;if(e.direction){for(let s=0;s<q.length;s++){const u=he(xe[s],P)||"0";console.log("0423####price####",u),xe.push(u);const Fe=Math.abs(q[s]-E)*M;let de=0;for(let fe=0;fe<u.length;fe++)u[fe]==="1"?de+=4.02:u[fe]==="."?de+=2.64:u[fe]==="7"?de+=5.48:de+=6;console.log(Fe,"x=>>>"),v.append("text").text(u).attr("x",Fe-de/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}f=Math.abs(Y-E)*M}else{for(let s=q.length-1;s>=0;s--){const u=he(xe[s],P)||0;xe.push(u);const Fe=Math.abs(q[s]-D)*M;let de=0;for(let fe=0;fe<u.length;fe++)u[fe]==="1"?de+=4.02:u[fe]==="."?de+=2.64:u[fe]==="7"?de+=5.48:de+=6;v.append("text").text(u).attr("x",Fe-de/2).attr("y",168).attr("fill","rgba(255, 255, 255, 0.5").style("font-size","10")}f=Math.abs(Y-D)*M}console.log(Y,D,M,"######currentPricePositon"),(T.value.theme=="default"?ae.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#68FFD8"):ae.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",2).attr("stroke","#76C8FF")).attr("transform","translate("+f+", 0)");let W,Z,ve,ze;e.direction?(W=X<E?-100:parseInt(String(Math.abs(X-E)*M)),Z=j<E?-100:parseInt(String(Math.abs(j-E)*M)),ve=ce<E?-100:Math.abs(ce-E)*M,ze=ye<E?-100:Math.abs(ye-E)*M):(Z=X<E?-100:Math.abs(D-X)*M,W=j<E?-100:Math.abs(D-j)*M,ze=ce>D?-100:Math.abs(D-ce)*M,ve=ye>D?-100:Math.abs(D-ye)*M),e.minPrice==="0"&&(W=0),e.maxPrice==="∞"&&(Z=S),console.log(W,"==>minPriceTickX"),Se.value,le.value=S-W+87+"px",oe.value=Z+98+"px",ce&&ve<S&&ae.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+ve+", 0)"),ye&&ze<S&&ae.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-width",1).attr("stroke-dasharray","5, 5").attr("stroke","rgba(255, 255, 255, 0.5)").attr("transform","translate("+ze+", 0)");const $e=ae.append("g").attr("id","left-handle"),Be=ae.append("g").attr("id","right-handle");T.value.theme=="default"?($e.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),$e.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 20) rotate(180)"),$e.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",6).attr("fill","#68FFD8"),$e.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",4.5).attr("fill","#68FFD8"),Be.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#68FFD8"),Be.append("path").attr("d","M0 0 L12 0 L12 20 L0 20 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),Be.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",6).attr("fill","#68FFD8"),Be.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",4.5).attr("fill","#68FFD8")):($e.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),$e.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(-1, 24) rotate(180)"),$e.append("rect").attr("width",1).attr("height",7).attr("x",-9).attr("y",8).attr("fill","#76C8FF"),$e.append("rect").attr("width",1).attr("height",10).attr("x",-7).attr("y",6.5).attr("fill","#76C8FF"),Be.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",155).attr("stroke-dasharray","5, 5").attr("stroke-width",2).attr("stroke","#76C8FF"),Be.append("path").attr("d","M0 0 L12 0 L12 24 L0 24 Z").attr("fill","#333").attr("stroke","#333").attr("transform","translate(1, 0)"),Be.append("rect").attr("width",1).attr("height",7).attr("x",7).attr("y",8).attr("fill","#76C8FF"),Be.append("rect").attr("width",1).attr("height",10).attr("x",5).attr("y",6.5).attr("fill","#76C8FF")),console.log("0525###d3###select###minPriceTickX###",W),console.log("0525###d3###select###maxPriceTickX###",Z),$e.attr("transform","translate("+W+", 0)"),Be.attr("transform","translate("+Z+", 0)");const Ue=lo().extent([[0,0],[S,F]]).handleSize(30).on("end",We);ae.append("g").attr("class","brush").call(Ue).call(Ue.move,[W,Z]);function We(s){if(!s.sourceEvent||!s.selection)return;$e.attr("transform","translate("+s.selection[0]+", 0)"),Be.attr("transform","translate("+s.selection[1]+", 0)"),Se.value,le.value=S-s.selection[0]+87+"px",oe.value=s.selection[1]+74+"px";let u,Fe;console.log("0525###d3###select###e.selection[0]###",s.selection[0]),console.log("0525###d3###select###e.selection[0]###",s.selection[1]),console.log("0525###d3###select###props.direction###",e.direction),console.log("0525###d3###select###width###",S),console.log("0525###d3###select###unit###",M),console.log("0525###d3###select###utickMin###",E),console.log("0525###d3###select###utickMax###",D),console.log("0525###d3###select###props.poolInfo###",e.poolInfo);let de=0,fe=0;e.direction?(de=y(parseInt(String(s.selection[0]/M+E)),Number(e.poolInfo.tickSpacing)),u=i.tickIndexToPrice(de,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),fe=y(parseInt(String(s.selection[1]/M+E)),Number(e.poolInfo.tickSpacing)),Fe=i.tickIndexToPrice(fe,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),console.log("1114###d3###select###minTick###",de),console.log("1114###d3###select###maxTick###",fe),console.log("1114###d3###select###minPrice###",u),console.log("1114###d3###select###maxPrice###",Fe)):(fe=y(D-s.selection[0]/M,Number(e.poolInfo.tickSpacing)),u=1/i.tickIndexToPrice(fe,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString(),de=y(D-s.selection[1]/M,Number(e.poolInfo.tickSpacing)),Fe=1/i.tickIndexToPrice(de,e.poolInfo.token_a.decimals,e.poolInfo.token_b.decimals).toString()),d.emit("onChangeMinPrice",String(he(String(u),6))),d.emit("onChangeMaxPrice",String(he(String(Fe),6)))}T.value.theme=="default"?ut(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#15322C"):ut(".selection").attr("stroke","rgba(255, 255, 255, 0)").attr("fill","#152632"),console.log("画完了##")};return L(""),Te(()=>[e.poolInfo,e.minPrice,e.maxPrice,e.currentPriceTab,e.zoom,e.tickList],([n,l,m,X,j,Y])=>{console.log(n,l,m,m>l,j,"poolInfo && minPrice && maxPrice && (maxPrice > minPrice)"),n&&l&&m&&(n!=null&&n.liquidity)&&(X!=="Custom"||console.log("绘制"),be(n,j))},{immediate:!0}),console.log(e,"props===>"),{store:T,loading:ne,rangeSizeLower:ie,rangeSizeUpper:B,rangeSizeLowerPosition:le,rangeSizeUpperPosition:oe,decimalFormat:Qt,numberformat:ft}}});const _o=e=>(wt("data-v-60bd7ae2"),e=e(),_t(),e),yo={class:"chart-box"},Co={class:"chart"},Po=_o(()=>r("svg",{id:"chart"},null,-1));function To(e,d,le,oe,A,ie){const B=Bt;return N(),K("div",yo,[$t(r("div",Co,[e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="∞"?(N(),K("div",{key:0,class:"range-size range-size-lower",style:pt({right:e.rangeSizeLowerPosition})},me(("numberformat"in e?e.numberformat:pe(ft))(e.rangeSizeLower.toFixed(1),1))+"% ",5)):V("",!0),e.currentPriceTab!=="full range"&&e.minPrice!=="0"&&e.maxPrice!=="∞"?(N(),K("div",{key:1,class:"range-size range-size-upper",style:pt({left:e.rangeSizeUpperPosition})},me(("numberformat"in e?e.numberformat:pe(ft))(e.rangeSizeUpper.toFixed(1),1))+"% ",5)):V("",!0),Po],512),[[Vt,!e.chartLoading]]),e.chartLoading?(N(),Ge(B,{key:0})):V("",!0)])}const Xt=ot(wo,[["render",To],["__scopeId","data-v-60bd7ae2"]]),So=tt({props:{lever:{type:String,default:""}},setup(){return{}}});const Io=e=>(wt("data-v-619778e2"),e=e(),_t(),e),Ao={class:"lever"},Lo=Io(()=>r("div",{class:"lever-title"},"Leverage",-1)),No={class:"lever-text"};function qo(e,d,le,oe,A,ie){return N(),K("div",Ao,[Lo,r("div",No,me(e.lever),1)])}const Mo=ot(So,[["render",qo],["__scopeId","data-v-619778e2"]]),$o=tt({components:{NewLiquidityD3Chart:Xt,NewLiquidityPrice:Ut},setup(){const{t:e,locale:d}=Ft(),le=L("liquidity"),oe=Pt(),A=$(()=>oe),ie=$(()=>A.value.chainName),B=qt(),U=$(()=>B),T=$(()=>A.value.chainName?kt(A.value.chainName):{});Mt(()=>{Ve.value=!1});const ee=yt(),i=$(()=>{let t=null;for(let v=0;v<U.value.poolConfigList.length;v++){const f=U.value.poolConfigList[v];f.address==ee.query.poolAddress&&(t=f)}return console.log(t,"===>basePoolInfo"),t}),y=$(()=>{let t=null;for(const v in U.value.poolsObj){const f=U.value.poolsObj[v];f.address==ee.query.poolAddress&&(console.log(f,"p===>"),t=f)}return t}),Q=L(),be=L(!0),Se=async(t,v)=>{if(console.log(be.value,"==>chartLoading.value"),be.value=!0,v){Ye.value=[],g.value=[];const f=t.token_a.decimals,R=t.token_b.decimals;console.log(t,"pool===>1111"),console.log("poolPrice###pool.current_tick_index####",t.current_tick_index);const W=at.tickIndexToPrice(t.current_tick_index,f,R);console.log("poolPrice###",W.toString()),et.value=at.sqrtPriceX64ToPrice(t==null?void 0:t.current_sqrt_price,f,R).toString(),console.log(et.value,"##currentPrice.value"),rt.value=new a(1).div(at.sqrtPriceX64ToPrice(t==null?void 0:t.current_sqrt_price,f,R)).toString(),console.log(rt.value,"##currentPriceReverse.value"),w.value=t.needReverse?t.token_b:t.token_a,b.value=t.needReverse?t.token_a:t.token_b,Q.value=t.needReverse,t.token_a.address.toLowerCase()===w.value.address.toLowerCase()&&t.token_b.address.toLowerCase()===b.value.address.toLowerCase()?qe.value=!0:qe.value=!1,console.log(t,"187===>"),console.log(t,"###pool===>");let Z={poolAddress:t.address,coinTypeA:t.coin_a_address,coinTypeB:t.coin_b_address};const ve=await T.value.getTicks(Z);Ye.value=ve?T.value.getTickDataFromUrlData(ve):[],console.log(Ye.value,"===>chartLoadingtickList.value"),be.value=!1,l(t)}},ne=t=>{const v=t.token_a.decimals,f=t.token_b.decimals;console.log(t,"pool===>1111"),console.log("poolPrice###pool.current_tick_index####",t.current_tick_index),et.value=at.sqrtPriceX64ToPrice(t==null?void 0:t.current_sqrt_price,v,f).toString(),rt.value=new a(1).div(at.sqrtPriceX64ToPrice(t==null?void 0:t.current_sqrt_price,v,f)).toString()},g=L([]),n=L(),l=t=>{const v=t.token_a.decimals,f=t.token_b.decimals;let R=U.value.poolPriceConfigObj&&U.value.poolPriceConfigObj[t.address]&&U.value.poolPriceConfigObj[t.address].recommend_ranges||{};const W=U.value.poolPriceConfigObj&&U.value.poolPriceConfigObj[t.address]&&U.value.poolPriceConfigObj[t.address].type||"";console.log(R,"===>priceConfigList");let Z,ve;const ze=Yt(t.current_tick_index,t.tickSpacing);n.value=t.current_tick_index,console.log(ze,t.tickSpacing,"==>pool.tickSpacing"),Z=ze-Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3),ve=ze+Number(t.type=="unstable"?Number(t.tickSpacing)*2:Number(t.tickSpacing)*3);const $e=T.value.TickMath.tickIndexToPrice(Z,v,f).toString(),Be=T.value.TickMath.tickIndexToPrice(ve,v,f).toString();R["full range"]={lower:T.value.TickUtil.getMinIndex(Number(y.value.tickSpacing)),upper:T.value.TickUtil.getMaxIndex(Number(y.value.tickSpacing))},R.custom={lower:Z,upper:ve,minPrice:$e,maxPrice:Be};const Ue=[];for(let We in R)R[We]&&(console.log(We,"j==>"),Ue.push({...R[We],key:We}));console.log(Ue,"priceList"),console.log(t,"###pool.type 504"),W&&Ue&&Ue.length>2?t.isSelfBuilt?H.value="custom":W=="stable"?H.value="suggested":H.value="passive":H.value="custom",g.value=Ue,Qe.value=R,j({key:H.value,...R[H.value]})},m=L(""),X=L(""),j=t=>{console.log("priceTab====>",t),console.log("priceTab###poolInfo###",y.value),H.value=t.key.toLowerCase();const v=y.value.token_a.decimals,f=y.value.token_b.decimals,{lower:R,upper:W}=t;De.value=!1;const Z=T.value.TickMath.tickIndexToPrice(R,v,f).toString(),ve=T.value.TickMath.tickIndexToPrice(W,v,f).toString();if(t.key=="full range"){m.value=R,X.value=W,Y();return}console.log(qe.value,"===>direct.value"),qe.value?(mt.value=String(Z),O.value=String(Z),vt.value=String(ve),I.value=String(ve),m.value=R,X.value=W):(mt.value=String(1/Number(ve)),O.value=String(1/Number(ve)),vt.value=String(1/Number(Z)),I.value=String(1/Number(Z)),m.value=T.value.TickMath.priceToTickIndex(new a(1/Number(ve)),v,f),X.value=T.value.TickMath.priceToTickIndex(new a(1/Number(Z)),v,f)),console.log(O.value,I.value,"===>111")},Y=t=>{O.value="0",I.value="∞"};Te(()=>y.value,(t,v)=>{console.log(v,"===>oldVal"),console.log(t,"===>newVal"),(!v&&t&&!Ae(t)||v&&t&&v.address!==t.address)&&(console.log("池子信息"),Se(t,!v||t.address!==v.address)),t&&!Ae(t)&&ne(t)},{immediate:!0}),Rt(()=>{w.value=L(),b.value=L(),Ye.value=[]}),Te(()=>[i.value,y.value,U.value.recommendRangesObj],(t,v)=>{var f,R;console.log(t,"===>newValue369"),console.log(v,"===>oldValue369"),(!v||t[0]&&t[1]&&t[2]&&!Ae(t[0])&&!Ae(t[1]&&!Ae(t[2]))||((f=t[0])==null?void 0:f.address)!==((R=v[0])==null?void 0:R.address))&&t[0]&&t[2]&&!Ae(t[0])&&!Ae(t[2])&&(console.log(t[0],t[2],"======>374"),B.setSinglePool(t[0],t[2],ie.value))},{immediate:!0,deep:!0});const ce=t=>{if(ie.value=="Sui")switch(t){case"passive":return"/sui-image/icon_ conservative@2x.png";case"active":return"/sui-image/icon_active@2x.png";case"full range":return"/sui-image/icon_fullrange@2x.png";case"custom":return"/sui-image/icon_costom@2x.png";case"suggested":return"/sui-image/icon_stabel@2x.png"}else switch(t){case"passive":return"/image/icon_ conservative@2x.png";case"active":return"/image/icon_active@2x.png";case"full range":return"/image/icon_fullrange@2x.png";case"custom":return"/image/icon_costom@2x.png";case"suggested":return"/image/icon_stabel@2x.png"}},ye=t=>{switch(t){case"suggested":return e("newAdd.suggested");case"active":return e("newAdd.active");case"passive":return e("newAdd.conservative");case"full range":return e("newAdd.fullRange");case"custom":return e("newAdd.custom")}},h=t=>{var f,R;const v=U.value.poolPriceConfigObj&&U.value.poolPriceConfigObj[(f=y.value)==null?void 0:f.address]&&U.value.poolPriceConfigObj[(R=y.value)==null?void 0:R.address].type||"";if(console.log(v,t,"==>poolType"),g.value.length>2)if(v=="unstable")switch(t){case"active":return{top:"35%"};case"passive":return{top:"10%"};case"full range":return{top:"60%"};case"custom":return{top:"85%"}}else switch(t){case"suggested":return{top:"23%"};case"full range":return{top:"48%"};case"custom":return{top:"73%"}}else if(v=="unstable")switch(t){case"active":return{top:"35%"};case"passive":return{top:"10%"};case"full range":return{top:"60%"};case"custom":return{top:"85%"}}else switch(t){case"full range":return{top:"35%"};case"custom":return{top:"60%"}}},S=L(1),F=()=>{const t=S.value/2;S.value=t},ke=()=>{const t=S.value*2;S.value=t};console.log(g.value,"==>priceTablList");const k=$(()=>{var t,v,f;return!y.value||Ae(A.value.addressHistTokens)||!A.value.addressHistTokens[(t=y.value)==null?void 0:t.poolAddress]?null:Object.fromEntries((f=A.value.addressHistTokens[(v=y.value)==null?void 0:v.poolAddress])==null?void 0:f.data.map(R=>[R.key,R.value]))}),q=L(30),E=L("30D"),D=$(()=>qe.value?k.value&&he(q.value==7?k.value.before_7_d_contract_price_lowest:q.value==24?k.value.before_24_h_contract_price_lowest:k.value.before_30_d_contract_price_lowest,6)||0:k.value&&he(new a(1).div(q.value==7?k.value.before_7_d_contract_price_highest:q.value==24?k.value.before_24_h_contract_price_highest:k.value.before_30_d_contract_price_highest).toString(),6)||0),M=$(()=>qe.value?k.value&&he(q.value==7?k.value.before_7_d_contract_price_highest:q.value==24?k.value.before_24_h_contract_price_highest:k.value.before_30_d_contract_price_highest,6)||0:(k.value&&he(1/Number(q.value==7?k.value.before_7_d_contract_price_lowest:q.value==24?k.value.before_24_h_contract_price_lowest:k.value.before_30_d_contract_price_lowest),6))==1/0?0:k.value&&he(1/Number(q.value==7?k.value.before_7_d_contract_price_lowest:q.value==24?k.value.before_24_h_contract_price_lowest:k.value.before_30_d_contract_price_lowest),6)||0),xe=$(()=>{const t=Number(O.value),v=Number(I.value);if(O.value=="0"&&I.value=="∞"||H.value=="full range")return"1x";if(O.value==I.value||H.value=="full range")return"--";if(O.value&&I.value&&O.value!=="0"&&I.value!=="∞"){const f=gt(1/(1-Number((t/v)**.25)),2);return Number(f)>0?f+"x":"--"}else return 1}),P=$(()=>{var t,v,f,R,W,Z;return((t=w.value)==null?void 0:t.isSelfBuilt)||((v=b.value)==null?void 0:v.isSelfBuilt)||((R=U.value.tokensObj[(f=w.value)==null?void 0:f.address])==null?void 0:R.isSelfBuilt)||((Z=U.value.tokensObj[(W=b.value)==null?void 0:W.address])==null?void 0:Z.isSelfBuilt)}),ae=(t,v)=>{console.log(t,"####0731 priceRangeChangeMin"),t!==O.value&&H.value=="full range"?(console.log(g.value,"===>priceTablList"),j({key:"custom",...g.value.custom})):H.value!=="full range"&&H.value!=="custom"?(H.value="custom",O.value=t):O.value=t},Je=(t,v)=>{console.log(t,"###priceRangeChangeMax maxPirce"),t!==I.value&&H.value=="full range"?j({key:"custom",...g.value.custom}):H.value!=="full range"&&H.value!=="custom"?(H.value="custom",t=="0"?I.value="∞":I.value=t):t=="0"?I.value="∞":I.value=t};return console.log(O.value,I.value,"683==>"),Te(()=>[O.value,I.value],([t,v])=>{console.log(t,v,"minmax new-liquidity-left")},{deep:!0,immediate:!0}),{positionError:Ve,getCoinIcon:t=>{var v;return(t==null?void 0:t.logoURI)||(t==null?void 0:t.logo_url)||((v=U.value.tokensObj[t==null?void 0:t.address])==null?void 0:v.logo_url)||(A.value.theme==="default"?bt("/image/coins/unknown.png"):bt("/image/coins/sui-unknown.png"))},chainName:ie,store:A,currentTab:le,currentPrice:et,currentPriceReverse:rt,fromCoin:w,toCoin:b,direction:qe,needReverse:Q,addCommom:Ne,decimalUi:he,priceTablList:g,currentPriceTab:H,sliderStyle:h,poolInfo:y,tickList:Ye,getPriceTabImage:ce,getPriceTabText:ye,defaultMinPrice:mt,defaultMaxPrice:vt,minPrice:O,maxPrice:I,currentTick:n,chartLoading:be,zoomOut:F,zoomIn:ke,zoom:S,priceTab:j,before7dContractPriceLowest:D,before7dContractPriceHighest:M,aprRewardsTime:E,lever:xe,aprRewardsParameter:q,isSelfBuilt:P,priceRangeChangeMin:ae,priceRangeChangeMax:Je,toggle:Ht,getPirceTabTips:t=>{switch(t){case"active":return e("newAdd.activeTips");case"passive":return e("newAdd.passiveTips");case"full range":return e("newAdd.fullRangTips");case"suggested":return e("newAdd.suggestedTips");case"custom":return e("newAdd.customTips")}},timeList:[{label:"24H",value:24},{label:"7D",value:7},{label:"30D",value:30}]}}});const Bo={class:"new-liquidity-left"},Fo=r("span",{class:"selectRange"},"Select Range",-1),Ro={class:"price-info"},Oo={class:"left"},Uo={class:"base-coin"},jo={class:"base-coin-title"},xo=r("span",null,"Base coin",-1),zo=r("svg",{class:"icon icon-up","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-exchange_up1"})],-1),Ho=r("svg",{class:"icon icon-down","aria-hidden":"true"},[r("use",{"xlink:href":"#icon-exchange_down1"})],-1),Xo=[zo,Ho],Eo={class:"base-coin-bottom"},Do={alt:""},Wo={class:"current-price"},Zo=r("div",{class:"current-price-title"},"Current Price",-1),Go={key:0,class:"from-pre-to"},Ko={class:"right"},Jo={class:"price-range"},Qo={class:"left"},Yo={class:"price-slider"},Vo={class:"slider"},ei=r("div",{class:"slider-ratio-content"},null,-1),ti=[ei],oi={class:"price-tab-list"},ii=["onClick"],ni=["src"],ai={class:"right"},ri={class:"price-zoom"},li={class:"current-price"},si=r("div",{class:"current-price-title"},"Current Price",-1),ui={key:0,class:"from-pre-to"},ci={class:"price-zoom-right"},di={class:"leverage"},mi=r("div",{class:"left"},null,-1),vi={class:"right"},fi={class:"right-time"},gi={key:0,class:"day-7-price-range"},pi=r("i",null,null,-1),hi={class:"gray"},bi={class:"time-list"},ki=["onClick"],wi={class:"right-price-h5"},_i={class:"apr-leverage"},yi={key:0,class:"position-tips"},Ci=["src"],Pi={class:"error"};function Ti(e,d,le,oe,A,ie){var y,Q,be,Se,ne,g,n;const B=Ot,U=Xt,T=Mo,ee=Ut,i=eo("image");return N(),K("div",Bo,[Fo,r("div",Ro,[r("div",Oo,[r("div",Uo,[r("div",jo,[xo,r("div",{class:"change-price",onClick:d[0]||(d[0]=(...l)=>e.toggle&&e.toggle(...l))},Xo)]),r("div",Eo,[$t(r("img",Do,null,512),[[i,e.getCoinIcon(e.fromCoin)]]),r("span",null,me((y=e.fromCoin)==null?void 0:y.symbol),1)])]),r("div",Wo,[Zo,r("div",null,[r("span",null,me(e.poolInfo?e.direction?("addCommom"in e?e.addCommom:pe(Ne))(("decimalUi"in e?e.decimalUi:pe(he))(e.currentPrice,6)):("addCommom"in e?e.addCommom:pe(Ne))(("decimalUi"in e?e.decimalUi:pe(he))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(N(),K("span",Go,me((Q=e.toCoin)==null?void 0:Q.symbol)+" per "+me((be=e.fromCoin)==null?void 0:be.symbol),1)):V("",!0)])])]),r("div",Ko,[e.currentTab=="liquidity"?(N(),K("div",{key:0,class:"zoom-out",onClick:d[1]||(d[1]=(...l)=>e.zoomOut&&e.zoomOut(...l))}," + ")):V("",!0),e.currentTab=="liquidity"?(N(),K("div",{key:1,class:"zoom-in",onClick:d[2]||(d[2]=(...l)=>e.zoomIn&&e.zoomIn(...l))}," - ")):V("",!0)])]),r("div",Jo,[r("div",Qo,[r("div",Yo,[r("div",Vo,[r("div",{class:"slider-ratio",style:pt(e.sliderStyle(e.currentPriceTab))},ti,4)])]),r("div",oi,[(N(!0),K(ht,null,At(e.priceTablList,l=>(N(),K("div",{key:l.key,class:dt(["price-tab-item",e.currentPriceTab==l.key?"price-tab-item-active":""]),onClick:m=>e.priceTab(l)},[Xe(B,{placement:"bottom","arrow-point-at-center":""},{title:lt(()=>[Ct(me(e.getPirceTabTips(l.key)),1)]),default:lt(()=>[r("img",{src:e.getPriceTabImage(l.key),alt:""},null,8,ni),r("span",null,me(e.getPriceTabText(l.key)),1)]),_:2},1024)],10,ii))),128))])]),r("div",ai,[r("div",ri,[r("div",li,[si,r("div",null,[r("span",null,me(e.poolInfo?e.direction&&!e.needReverse?("addCommom"in e?e.addCommom:pe(Ne))(("decimalUi"in e?e.decimalUi:pe(he))(e.currentPrice,6)):("addCommom"in e?e.addCommom:pe(Ne))(("decimalUi"in e?e.decimalUi:pe(he))(e.currentPriceReverse,6)):"--"),1),e.fromCoin&&e.toCoin?(N(),K("span",ui,me(e.direction&&!e.needReverse?`${(Se=e.fromCoin)==null?void 0:Se.symbol} per ${(ne=e.toCoin)==null?void 0:ne.symbol}`:`${(g=e.toCoin)==null?void 0:g.symbol} per ${(n=e.fromCoin)==null?void 0:n.symbol}`),1)):V("",!0)])]),r("div",ci,[e.currentTab=="liquidity"?(N(),K("div",{key:0,class:"zoom-out",onClick:d[3]||(d[3]=(...l)=>e.zoomOut&&e.zoomOut(...l))}," + ")):V("",!0),e.currentTab=="liquidity"?(N(),K("div",{key:1,class:"zoom-in",onClick:d[4]||(d[4]=(...l)=>e.zoomIn&&e.zoomIn(...l))}," - ")):V("",!0)])]),e.poolInfo?(N(),Ge(U,{key:0,"pool-info":e.poolInfo,"min-price":e.minPrice,"max-price":e.maxPrice,direction:e.direction,"current-price-tab":e.currentPriceTab,"tick-list":e.tickList,"current-tick":e.currentTick,"chart-loading":e.chartLoading,zoom:e.zoom,"before7d-contract-price-lowest":e.before7dContractPriceLowest,"before7d-contract-price-highest":e.before7dContractPriceHighest,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["pool-info","min-price","max-price","direction","current-price-tab","tick-list","current-tick","chart-loading","zoom","before7d-contract-price-lowest","before7d-contract-price-highest","onOnChangeMinPrice","onOnChangeMaxPrice"])):V("",!0)])]),r("div",di,[mi,r("div",vi,[r("div",fi,[e.poolInfo&&(e.before7dContractPriceLowest||e.before7dContractPriceHighest)?(N(),K("div",gi,[pi,r("span",hi,me(e.aprRewardsParameter==7?"7D":e.aprRewardsParameter==24?"24H":"30D")+" Price Range",1),r("span",null,me(("addCommom"in e?e.addCommom:pe(Ne))(("decimalUi"in e?e.decimalUi:pe(he))(e.before7dContractPriceLowest,6)))+" - "+me(("addCommom"in e?e.addCommom:pe(Ne))(("decimalUi"in e?e.decimalUi:pe(he))(e.before7dContractPriceHighest,6))),1)])):V("",!0),r("div",bi,[(N(!0),K(ht,null,At(e.timeList,l=>(N(),K("div",{key:l.value,class:dt(["time-item",l.value==e.aprRewardsParameter?"time-item-active":""]),onClick:m=>e.aprRewardsParameter=l.value},me(l.label),11,ki))),128))])]),r("div",wi,[r("span",null,me(("addCommom"in e?e.addCommom:pe(Ne))(("decimalUi"in e?e.decimalUi:pe(he))(e.before7dContractPriceLowest,6)))+" - "+me(("addCommom"in e?e.addCommom:pe(Ne))(("decimalUi"in e?e.decimalUi:pe(he))(e.before7dContractPriceHighest,6))),1)])])]),r("div",{class:dt(["apr-and-price",e.positionError&&e.poolInfo?"padding-apr-and-price":""])},[r("div",_i,[Xe(T,{lever:e.lever},null,8,["lever"])]),Xe(ee,{min:e.minPrice,max:e.maxPrice,"from-coin":e.fromCoin,"to-coin":e.toCoin,direct:e.direction,"default-min-price":e.defaultMinPrice,"default-max-price":e.defaultMaxPrice,"pool-info":e.poolInfo,loading:e.chartLoading,"current-price-tab":e.currentPriceTab,onOnChangeMinPrice:e.priceRangeChangeMin,onOnChangeMaxPrice:e.priceRangeChangeMax},null,8,["min","max","from-coin","to-coin","direct","default-min-price","default-max-price","pool-info","loading","current-price-tab","onOnChangeMinPrice","onOnChangeMaxPrice"]),e.positionError&&e.poolInfo?(N(),K("div",yi,[r("img",{src:("importIcon"in e?e.importIcon:pe(bt))("/image/icon-tips-error@2x.png"),alt:""},null,8,Ci),r("p",Pi,me(e.$t("tips.positionError")),1)])):V("",!0)],2)])}const Et=ot($o,[["render",Ti]]),Si=tt({props:{poolInfo:{type:Object,default:()=>({})},isActive:{type:Boolean,default:!0}},setup(e,d){const le=po(),oe=L(!1),A=L(),ie=L(!0),B=$(()=>le),U=$(()=>B.value.farmsPoolList.filter(i=>i.status=="Live"));Te(()=>e.poolInfo,i=>{i&&!Ae(i)&&le.getFarmsPoolList()},{immediate:!0});const T=i=>{const y=i.filter(Q=>{var be;return Q.status=="Live"&&Q.clmm_pool_id==((be=e.poolInfo)==null?void 0:be.poolAddress)});y&&y.length>0&&(oe.value=!0,A.value=y[0],d.emit("sendFarmsPoolInfo",ie.value&&e.isActive?A.value:"")),console.log(y,"##isFarmingPool")};return Te(()=>U.value,i=>{i&&i.length>0&&T(i)},{immediate:!0}),Te(()=>e.isActive,i=>{console.log(e.isActive,"##props.isActive"),i||d.emit("sendFarmsPoolInfo",ie.value&&e.isActive?A.value:"")},{immediate:!0}),{isShowAutoStake:oe,changeIsOpen:()=>{ie.value=!ie.value,d.emit("sendFarmsPoolInfo",ie.value&&e.isActive?A.value:"")},isOpen:ie}}}),Ii=""+globalThis.__publicAssetsURL("sui-image/farming_huo.png"),Ai=""+globalThis.__publicAssetsURL("sui-image/icon_sel@2x.png");const Tt=e=>(wt("data-v-26841f53"),e=e(),_t(),e),Li={key:0,class:"farms-auto-stake"},Ni=Tt(()=>r("img",{class:"farms-icon",src:Ii,alt:""},null,-1)),qi=Tt(()=>r("div",{class:"desc"},"Automatically stake your position into the farm to enjoy higher yield.",-1)),Mi={key:0,src:Ai,alt:""},$i=Tt(()=>r("div",{class:"check-box"},null,-1));function Bi(e,d,le,oe,A,ie){const B=Ot;return e.isShowAutoStake?(N(),K("div",Li,[Ni,qi,e.isActive?(N(),K("div",{key:0,class:"check-box-active",onClick:d[0]||(d[0]=(...U)=>e.changeIsOpen&&e.changeIsOpen(...U))},[e.isOpen?(N(),K("img",Mi)):V("",!0)])):(N(),Ge(B,{key:1,"overlay-style":{"min-width":"200px"}},to({default:lt(()=>[$i]),_:2},[e.isActive?void 0:{name:"title",fn:lt(()=>[Ct("Farming rewards only available for active positions.")]),key:"0"}]),1024))])):V("",!0)}const Fi=ot(Si,[["render",Bi],["__scopeId","data-v-26841f53"]]),Ri=tt({components:{NewLiquidityTitle:jt,NewLiquidityAssetsCard:xt,NewLiquidityDepositRatio:zt},setup(){const{t:e,locale:d}=Ft(),le=Pt(),oe=$(()=>le),A=$(()=>oe.value.chainName),ie=qt(),B=$(()=>ie),U=so(),T=$(()=>U),ee=yt(),i=$(()=>{let o=null;for(const c in B.value.poolsObj){const p=B.value.poolsObj[c];p.address==ee.query.poolAddress&&(console.log(p,"p===>"),o=p)}return o}),y=L(!1),Q=L(!1),be=$(()=>oe.value.theme),Se=async(o,c)=>{w.value=o.needReverse?o.token_b:o.token_a,b.value=o.needReverse?o.token_a:o.token_b,_.value="",C.value=""},ne=$(()=>T.value.assets&&w.value&&T.value.assets[w.value.address]?It(T.value.assets[w.value.address].balance,w.value.decimals):"0"),g=$(()=>T.value.assets&&b.value&&T.value.assets[b.value.address]?It(T.value.assets[b.value.address].balance,b.value.decimals):"0"),n=o=>{o==="fromCoin"?(Pe.value=!0,A.value==="Aptos"?_.value=Number(ne.value)>0?w.value.symbol=="APT"?new a(Number(ne.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(ne.value)).sub(new a(.1)).toString():String(ne.value):"":_.value=Number(ne.value)>0?w.value.symbol=="SUI"?new a(Number(ne.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(ne.value)).sub(new a(.05)).toString():String(ne.value):""):(Pe.value=!1,A.value==="Aptos"?C.value=Number(g.value)>0?b.value.symbol=="APT"?new a(Number(g.value)).sub(new a(.1)).lt(new a(0))?"0":new a(Number(g.value)).sub(new a(.1)).toString():String(g.value):"":C.value=Number(g.value)>0?b.value.symbol=="SUI"?new a(Number(g.value)).sub(new a(.05)).lt(new a(0))?"0":new a(Number(g.value)).sub(new a(.05)).toString():String(g.value):"")},l=o=>{o==="fromCoin"?(Pe.value=!0,_.value=Number(ne.value)>0?gt(new a(Number(ne.value)).div(2).toString(),w.value.decimals).toString():""):(Pe.value=!1,C.value=Number(g.value)>0?gt(new a(Number(g.value)).div(2).toString(),b.value.decimals).toString():"")},m=L(),X=L(),j=L(),Y=L(!1),ce=o=>{var c,p,se,x;m.value=o,o==="fromCoin"?(X.value=((c=b.value)==null?void 0:c.address)||"",j.value=ee.query.actions=="new-position"?(p=w.value)==null?void 0:p.address:i.value.needReverse?i.value.token_b.address:i.value.token_a.address):(X.value=((se=w.value)==null?void 0:se.address)||"",j.value=ee.query.actions=="new-position"?(x=b.value)==null?void 0:x.address:i.value.needReverse?i.value.token_a.address:i.value.token_b.address),Y.value=!0,console.log(Y.value,"==>showCoinSelect.value ")},ye=o=>{var se,x,re,ue,te,J,G,we;const c=i.value.needReverse?i.value.token_b:i.value.token_a,p=i.value.needReverse?i.value.token_a:i.value.token_b;m.value==="fromCoin"?(((se=w.value)==null?void 0:se.address)===(c==null?void 0:c.address)||!((x=w.value)!=null&&x.address)?(b.value&&o.address.toLowerCase()===((re=b)==null?void 0:re.value.address.toLowerCase())&&(b.value=null),w.value=o):(w.value&&o.address.toLowerCase()===((ue=w)==null?void 0:ue.value.address.toLowerCase())&&(w.value=null),b.value=o),ee.query.action||(ee.query.fee="")):((te=b.value)==null?void 0:te.address)===(p==null?void 0:p.address)||!((J=b.value)!=null&&J.address)?(w.value&&o.address.toLowerCase()===((G=w)==null?void 0:G.value.address.toLowerCase())&&(w.value=null),b.value=o):(b.value&&o.address.toLowerCase()===((we=b)==null?void 0:we.value.address.toLowerCase())&&(b.value=null),w.value=o),Y.value=!1},h=$(()=>oe.value.chainName?kt(oe.value.chainName):{}),S=$(()=>oe.value.slippage),F=L(),ke=async()=>{var je,Ie,Re,Oe;if(De.value)return console.log("跳出"),!1;if(!O.value&&!I.value)return!1;if(!_.value&&!C.value&&!O.value&&!I.value)return;const o=i.value||{};if(Ae(o))return;const{TickUtil:c,TickMath:p,getNearestTickByTick:se}=h.value,x=o==null?void 0:o.token_a.decimals,re=o==null?void 0:o.token_b.decimals;let ue,te,J,G,we,Le,Ee,Ze,ge=o==null?void 0:o.current_tick_index,z;if(o.token_a.address.toLowerCase()===w.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===b.value.address.toLowerCase()?z=!0:z=!1,O.value==="0"&&I.value==="∞")J=c.getMinIndex(Number(o.tickSpacing)),G=c.getMaxIndex(Number(o.tickSpacing)),we=p.tickIndexToSqrtPriceX64(J),Le=p.tickIndexToSqrtPriceX64(G),console.log(J,G,"#######updateAmounts 513");else if(H.value=="custom"){console.log(z,"===>directs1866"),z?(ue=O.value,te=I.value):(ue=I.value!=="∞"?new a(1).div(I.value).toString():1/0,te=new a(1).div(O.value).toString());try{Ee=new a(ue).equals(new a(0))?-443636:p.priceToTickIndex(new a(ue),x,re)}catch{Ee=-443636}try{Ze=p.priceToTickIndex(new a(te),x,re)}catch{Ze=443636}console.log("1113###updateAmounts###min###",ue),console.log("1113###updateAmounts###max###",te),console.log("1113###updateAmounts###minTick###",Ee),console.log("1113###updateAmounts###maxTick###",Ze),J=se(Ee,Number(o.tickSpacing),!0),G=se(Ze,Number(o.tickSpacing),!0),console.log("1113###updateAmounts###tick_lower###",J),console.log("1113###updateAmounts###tick_upper###",G);try{we=p.priceToSqrtPriceX64(new a(ue),x,re)}catch{(te===1/0||te==="∞")&&(we=p.tickIndexToSqrtPriceX64(c.getMinIndex(Number(o.tickSpacing))))}try{Le=p.priceToSqrtPriceX64(new a(te),x,re)}catch{console.log("0523###test###max###",te),(te===1/0||te==="∞")&&(console.log("0523###test###max###11111"),Le=p.tickIndexToSqrtPriceX64(c.getMaxIndex(Number(o.tickSpacing))))}console.log("0518###pre###tick_lower###",J,G,ge),console.log("0518###pre###tick_upper###",G)}else J=(je=Qe.value[H.value])==null?void 0:je.lower,G=(Ie=Qe.value[H.value])==null?void 0:Ie.upper,we=p.tickIndexToSqrtPriceX64(J),Le=p.tickIndexToSqrtPriceX64(G);if(console.log("1116###updateAmounts###tick_lower####",J),console.log("1116###updateAmounts###tick_upper####",G),console.log("1116###updateAmounts###currentTickIndex####",ge),I.value!=="∞"&&J>=G){y.value=!0,_.value="",Q.value=!0,C.value="";return}if(console.log(G,ge,J,"1922"),I.value==="∞"||ge>=J&&ge<G){y.value=!1,Q.value=!1;let _e;if(_.value||C.value){if(Pe.value){const ct=new a(_.value).mul(Math.pow(10,w.value.decimals)).toString();_e=new He(ct)}else{const ct=new a(C.value).mul(Math.pow(10,b.value.decimals)).toString();_e=new He(ct)}console.log(z,"======>directs"),p.tickIndexToSqrtPriceX64(i.value.current_tick_index);const{liquidityAmount:Ce,tokenMaxA:Ke,tokenMaxB:nt,tokenMaxAOrigin:Kt,tokenMaxBOrigin:Jt}=h.value.estLiquidityAndcoinAmountFromOneAmounts({tokenA:o.token_a,tokenB:o.token_b,lowerTick:J,upperTick:G,coinAmount:_e,iscoinA:z?Pe.value:!Pe.value,roundUp:!0,slippage:Number(S.value)/100,curSqrtPrice:new He(i.value.current_sqrt_price)});F.value={liquidityAmount:Ce,tokenMaxA:Ke,tokenMaxB:nt,tokenMaxAOrigin:Kt,tokenMaxBOrigin:Jt},console.log(Ke,nt,"preAdd"),z?Pe.value?C.value=Number(nt)>0?nt:"":_.value=Number(Ke)>0?Ke:"":Pe.value?C.value=Ke:_.value=nt}}else if(ge>=G){if(z?_.value="":C.value="",y.value=z,Q.value=!z,_.value||C.value){let _e;if(z){const Ce=new a(C.value).mul(Math.pow(10,(Re=b.value)==null?void 0:Re.decimals)).toString();_e=new He(Ce),F.value={liquidityAmount:h.value.estimateLiquidityForCoinB(we,Le,_e),tokenMaxA:0,tokenMaxB:C.value}}else{const Ce=new a(_.value).mul(Math.pow(10,(Oe=w.value)==null?void 0:Oe.decimals)).toString();_e=new He(Ce),F.value={liquidityAmount:h.value.estimateLiquidityForCoinB(we,Le,_e),tokenMaxA:0,tokenMaxB:_.value}}}}else if(ge<J){if(y.value=!z,Q.value=z,z?C.value="":_.value="",_.value||C.value){let _e;if(z){const Ce=new a(_.value).mul(Math.pow(10,w.value.decimals)).toString();_e=new He(Ce),F.value={liquidityAmount:h.value.estimateLiquidityForCoinA(we,Le,_e),tokenMaxA:_.value,tokenMaxB:0}}else{const Ce=new a(C.value).mul(Math.pow(10,b.value.decimals)).toString();_e=new He(Ce),F.value={liquidityAmount:h.value.estimateLiquidityForCoinA(we,Le,_e),tokenMaxA:C.value,tokenMaxB:0}}}}else y.value=!0,_.value="",Q.value=!0,C.value=""};Te(()=>i.value,(o,c)=>{console.log(c,"===>oldVal"),console.log(o,"===>newVal"),(!c&&o&&!Ae(o)||c&&o&&c.address!==o.address)&&(console.log("池子信息"),Se(o,!c||o.address!==c.address)),o&&!Ae(o)&&ke()},{immediate:!0}),Te(_,(o,c)=>{console.log(_,"===>fromCoinAmount"),o==""&&Pe.value&&(C.value=""),o&&Pe.value&&!De.value&&ke()}),Te(C,(o,c)=>{console.log(o,"===>>>>newValsda"),o==""&&!Pe.value&&(_.value=""),o&&!Pe.value&&!De.value&&ke()}),Te(()=>qe.value,(o,c)=>{ke()}),Te(()=>[w.value,b.value],([o,c])=>{o&&c&&(y.value=!1,Q.value=!1)});const k=L("--"),q=$(()=>B.value.RATES),E=()=>{const o=q.value&&q.value[w.value.address]&&q.value[w.value.address].price,c=q.value&&q.value[b.value.address]&&q.value[b.value.address].price;if(o&&c){const p=new a(_.value>0?_.value:0).mul(o),se=new a(C.value>0?C.value:0).mul(c),x=p.add(se).toNumber();k.value=x>0&&x<.01?"<$0.01":"$"+Ne(x,2)}else k.value="--"};Te(()=>[_.value,C.value,De.value],([o,c,p])=>{(o||c)&&!p?E():(!o||!c)&&!p&&(k.value="--")},{immediate:!0}),Te(()=>k,o=>{console.log(o,"71911111")},{immediate:!0});const D=L(),M=async()=>{var z,je;if(!O.value&&!I.value)return!1;if(!_.value&&!C.value&&!O.value&&!I.value)return;const o=i.value;if(Ae(o))return;const{TickUtil:c,TickMath:p,getNearestTickByTick:se}=h.value,x=o==null?void 0:o.token_a.decimals,re=o==null?void 0:o.token_b.decimals;let ue,te,J,G,we,Le,Ee;if(o.token_a.address.toLowerCase()===w.value.address.toLowerCase()&&o.token_b.address.toLowerCase()===b.value.address.toLowerCase()?Ee=!0:Ee=!1,O.value==="0"&&I.value==="∞")J=c.getMinIndex(Number(o.tickSpacing)),G=c.getMaxIndex(Number(o.tickSpacing));else if(H.value=="custom"){Ee?(ue=Number(O.value),te=Number(I.value)):(ue=new a(1).div(I.value).toString(),te=new a(1).div(O.value).toString());try{we=ue==0?-443636:p.priceToTickIndex(new a(ue),x,re)}catch{we=-443636}try{Le=p.priceToTickIndex(new a(te),x,re)}catch{Le=443636}J=se(we,Number(o.tickSpacing),!0),G=se(Le,Number(o.tickSpacing),!0)}else J=(z=Qe.value[H.value])==null?void 0:z.lower,G=(je=Qe.value[H.value])==null?void 0:je.upper;const Ze=q.value[o==null?void 0:o.token_a.address].price,ge=q.value[o==null?void 0:o.token_b.address].price;qe.value?new He(o.current_sqrt_price):new He(1/o.current_sqrt_price),console.log(qe.value,"===>direction.value"),console.log(o,"poolInfos===>"),console.log(J,G,"####tick_lower tick_upper 889"),console.log(k.value,"liquidityTotalAmount.value");try{const{amountA:Ie,amountB:Re,tokenAmountsInfo:Oe}=await h.value.estCoinAmountsFromTotalAmount({lowerTick:J,upperTick:G,decimalsA:x,decimalsB:re,curSqrtPrice:new He(o.current_sqrt_price),totalAmount:k.value.replace(/[^\d.]/g,""),tokenPriceA:Ze,tokenPriceB:ge});console.log(Ie,Re,"###estCoinAmountsFromTotalAmount 844"),console.log(o.needReverse,qe.value,"===>849"),D.value=Oe,o.needReverse?qe.value?(_.value=Ie,C.value=Re):(_.value=Re,C.value=Ie):(_.value=Ie,C.value=Re)}catch(Ie){console.log(Ie,"e===>")}};Te([O,I],([o,c])=>{console.log(o,c,"==>minPrice,maxPrice"),De.value?De.value&&M():ke(),c!=="∞"&&Number(o)!==0&&Number(c)!==0&&Number(o)>=Number(c)?Ve.value=!0:Ve.value=!1,Number(o)==0&&Number(c)==0&&et.value&&(Ve.value=!0,console.log("价格区间错误"))},{deep:!0,immediate:!0});const xe=o=>{console.log(o,"e");const c=o.replace(/[^\d.]/g,""),p="$"+Ne(c);De.value=!0,k.value=p,c>0?M():(_.value="",C.value="")},P=L(!1),{setTransactionTxid:ae,setTransactionDesc:Je,setIsShowWaiting:Me,setIsShowSuccess:st,setPositiomNum:it,setIsShowRejected:t}=le,v=ho(),f=$(()=>B.value.currentPositionInfo),R=L(!1),W=L(!0),Z=L(),ve=o=>{console.log(o,"getFarmsPoolInfo:"),Z.value=o,o||(W.value=!1)},ze=async o=>{var we,Le,Ee,Ze;console.log(i.value,"===> poolInfo.value"),console.log(Z.value,"##farmPoolInfo"),P.value=!1,B.value.currentPositionInfo={},ae(""),Je(e("tips.increaseLiquiditySuccess",{from:y.value?"":`${Ne(_.value)} ${(we=w.value)==null?void 0:we.symbol}`,and:!y.value&&!Q.value?"and":"",to:Q.value?"":`${Ne(C.value)} ${(Le=b.value)==null?void 0:Le.symbol}`})),Me(!0);const c=qe.value?Pe.value:!Pe.value;let p,se,x,re,ue,te;const J=i.value.token_a.decimals,G=i.value.token_b.decimals;if(O.value==="0"&&I.value==="∞")x=h.value.TickUtil.getMinIndex(Number(i.value.tickSpacing)),re=h.value.TickUtil.getMaxIndex(Number(i.value.tickSpacing));else if(H.value=="custom"){qe.value?(p=O.value,se=I.value):(p=new a(1).div(I.value).toString(),se=new a(1).div(O.value).toString()),console.log("0519###toAdd###min###",p),console.log("0519###toAdd###max###",se),console.log("0519###toAdd###minPrice.value###",O.value),console.log("0519###toAdd###maxPrice.value###",I.value);try{ue=p==0?h.value.TickUtil.getMinIndex(Number(i.value.tickSpacing)):h.value.TickMath.priceToTickIndex(new a(p),J,G)}catch{ue=h.value.TickUtil.getMinIndex(Number(i.value.tickSpacing))}try{te=h.value.TickMath.priceToTickIndex(new a(se),J,G)}catch{te=h.value.TickUtil.getMaxIndex(Number(i.value.tickSpacing))}x=h.value.getNearestTickByTick(ue,Number(i.value.tickSpacing),!0),re=h.value.getNearestTickByTick(te,Number(i.value.tickSpacing),!0)}else x=Qe.value[H.value].lower,re=Qe.value[H.value].upper;console.log(x,re,"####tick_lower tick_upper 889"),console.log(i.value,"==>poolInfo.value.curSqrtPrice"),console.log("1202###Add###tick_lower####",x),console.log("1202###Add###tick_upper####",re),console.log("1202###Add###poolInfo.value####",i.value);try{let ge;De.value?ge=await h.value.getCreateAddLiquidityPayload({pool:i.value,curSqrtPrice:new He(i.value.current_sqrt_price),tickLower:x,tickUpper:re,slippage:Number(S.value)/100,tokenAmounts:D.value}):ge=await h.value.getAddLiquidityTransactionPayload({pool:{poolAddress:i.value.poolAddress,token_a:i.value.token_a,token_b:i.value.token_b},amount:Pe.value?_.value:C.value,fix_amount_a:c,tick_lower:x,tick_upper:re,index:0,slippage:Number(S.value)/100,roundUp:!0,collect_fee:!1,curSqrtPrice:new He(i.value.current_sqrt_price),farmPoolInfo:Z.value}),console.log(ge,"payload===?");let z;if(A.value==="Aptos")z=await T.value.currentWallet.signAndSubmitTransaction(ge);else{const je=await T.value.currentWallet.signAndExecuteTransactionBlock(ge);z=h.value.handleTx(je)}if(console.log("0410###tx###",z),z&&z.hash){ae(z.hash),Me(!1),st(!0);let je;i.value.needReverse?i.value.token_a.address.toLowerCase()===w.value.address.toLowerCase()&&i.value.token_b.address.toLowerCase()===b.value.address.toLowerCase()?je=!1:je=!0:i.value.token_a.address.toLowerCase()===w.value.address.toLowerCase()&&i.value.token_b.address.toLowerCase()===b.value.address.toLowerCase()?je=!0:je=!1,console.log(je,"===>directs");const Ie={title:"Supplied",desc:e("tips.addLiquiditySuccessText",{from:y.value?"":`${Ne(_.value)} ${(Ee=w.value)==null?void 0:Ee.symbol}`,and:!y.value&&!Q.value?"and":"",to:Q.value?"":`${Ne(C.value)} ${(Ze=b.value)==null?void 0:Ze.symbol}`}),hash:z.hash,tit:"Position Created",icon:"icon-icon-Position-Created"};A.value!=="Aptos"&&(Ie.res=z.res),h.value.showTransitionPending(Ie),console.log(Ie,"toAdd params###");const Re=await h.value.watchTransaction(Ie,!0);if(Re.status){if(st(!1),B.value.setCurrentPositionLoading(!0),R.value=!0,console.log(Re.nftInfo,"===> watchInfo.nftInfo"),A.value==="Aptos"){if(await B.value.setCurrentPositionInfo(Re.nftInfo[0].data.id.creator,Re.nftInfo[0].data.id.collection,Re.nftInfo[0].data.name,A.value),o)try{await v.subscribePosition({pool_address:f.value.poolAddress,position_index:f.value.index},f.value.nftHash)}catch(Oe){console.log(Oe,"e")}}else{const Oe=Re.nftInfo,_e=await St(2e3);if(W.value){let Ce;z.res.events.forEach(Ke=>{Ke.type.indexOf("::pool::DepositEvent")>-1&&(Ce=Ke.parsedJson.wrapped_position_id)}),console.log(Ce,"###farmPositionId"),await B.value.setCurrentPositionInfo("","","","Sui",Ce,"farming")}else await B.value.setCurrentPositionInfo(Oe==null?void 0:Oe.pool,"","",A.value,Oe==null?void 0:Oe.position);if(await St(1e3),console.log("0529###nftInfo###",Oe),console.log("0529###currentPositionInfo.value.index###",f.value),o&&!W.value)try{await v.subscribePosition({pool_address:f.value.poolAddress,position_index:f.value.index},f.value.nftHash)}catch(Ce){console.log(Ce)}else if(o&&W.value)try{await v.subscribePosition({pool_address:f.value.clmm_pool_id,position_index:f.value.name.split("-")[1]},f.value.clmm_position_id)}catch(Ce){console.log(Ce)}}setTimeout(()=>{ie.updateCurrentPools(i.value.poolAddress,A.value),h.value.getAccount(T.value.address)},3e3),setTimeout(async()=>{Lt(h,i)},3e3)}it()}else Me(!1),t(!0);_.value="",C.value=""}catch(ge){_.value="",C.value="",console.log("0330###Add liquidity Error###",ge),Me(!1),t(!0)}},$e=$(()=>!_.value&&!C.value?(console.log("addLiquidityBtnDisabled11111"),!0):Number(_.value)>Number(ne.value)||Number(C.value)>Number(g.value)?(console.log("addLiquidityBtnDisabled22222"),!0):Ue.value!==e("button.addLiquidity")&&Ue.value!==e("newAdd.preview")?(console.log("addLiquidityBtnDisabled33333###",Ue.value),!0):i.value&&i.value&&i.value.is_pause?(console.log("addLiquidityBtnDisabled44444"),!0):Number(_.value)<=0&&Number(C.value)<=0||!y.value&&Number(_.value)==0||!Q.value&&Number(C.value)==0),Be=$(()=>!w.value||!b.value),Ue=$(()=>i.value&&i.value.is_pause?"Pool Closed":!w.value||!b.value||Be.value?e("modal.selectTokenModalTitle"):Number(_.value)>Number(ne.value)?e("button.insufficientBalance",{name:w.value.symbol}):Number(C.value)>Number(g.value)?e("button.insufficientBalance",{name:b.value.symbol}):!Number(_.value)&&!Number(C.value)?e("button.enterAmount"):I.value!=="∞"&&Number(O.value)>=Number(I.value)?e("newAdd.invalidRange"):e("button.addLiquidity")),We=L({}),s=L({}),u=L(!1),Fe=(o,c)=>{console.log(m.value,"===>currentCoinKey.value"),console.log(o);const p=localStorage.getItem(o.address);console.log(B.value.tokensObj,"===>pools.value.tokensObj"),console.log(p,"===>coinLocak"),B.value.tokensObj&&B.value.tokensObj[o.address]&&B.value.tokensObj[o.address].isSelfBuilt&&!p&&(c=="fromCoin"&&(We.value=o),c=="toCoin"&&(s.value=o),u.value=!0)};Te(()=>[w.value,b.value],([o,c])=>{o&&!Ae(o)&&Fe(o,"fromCoin"),c&&!Ae(c)&&Fe(c,"toCoin")},{immediate:!0});const de=oo(),fe=()=>{A.value!=="Aptos"?de.push("/pool/list"):de.push("/pools")},Wt=o=>{De.value,ze(o)},Zt=()=>{ee.query.action!=="create-pool"&&ee.query.actions!=="new-position"&&(Lt(h,i),ke(),ie.updateCurrentPools(i.value.poolAddress,A.value)),ie.setPoolConfigList(A.value,oe.value.filterCoinsObj)},Gt=$(()=>{var p,se,x,re,ue,te;const o=(x=q.value[(se=(p=w)==null?void 0:p.value)==null?void 0:se.address])==null?void 0:x.price,c=(te=q.value[(ue=(re=b)==null?void 0:re.value)==null?void 0:ue.address])==null?void 0:te.price;return!!(o&&c)});return Te(()=>[ee,B.value.tokensObj],([o,c])=>{var p;c&&!Ae(c)&&(b.value||(b.value=B.value.tokensObj[(p=o==null?void 0:o.query)==null?void 0:p.toCoin]))},{immediate:!0,deep:!0}),{positionError:Ve,decimalUi:he,poolInfo:i,fromCoinAmount:_,toCoinAmount:C,fromCoin:w,toCoin:b,theme:be,showFromCoinLock:y,showToCoinLock:Q,fromCoinBlance:ne,toCoinBlance:g,maxBtnSelect:n,halfBtnSelect:l,fixedFromCoin:Pe,openCoinSelect:ce,currentCoinKey:m,existingCoins:X,lastSelectCoin:j,showCoinSelect:Y,onCoinSelect:ye,liquidityTotalAmount:k,toggle:Ht,onInput:xe,isInputTotalAmount:De,isViewDetail:R,addLiquidityBtnDisabled:$e,addLiquidityBtnText:Ue,isShowTokenWarning:u,chainName:A,closeTokenWarning:fe,warningFromCoin:We,warningToCoin:s,isShowLiquidityModal:P,currentPrice:et,currentPriceReverse:rt,currentPriceTab:H,minPrice:O,maxPrice:I,toAdd:ze,direction:qe,wallet:T,getAddLiquidityType:Wt,clickRefresh:Zt,isShowtotalAmount:Gt,isAutoStakeFarming:W,farmPoolInfo:Z,getFarmsPoolInfo:ve}}});const Oi={class:"new-liquidity-right"},Ui={class:"deposit-title"},ji={class:"card-container"},xi={key:0,class:"lock"},zi={class:"card-item"},Hi={class:"card-item"},Xi={key:0,class:"total-amount"},Ei=r("span",null,"Total Amount",-1);function Di(e,d,le,oe,A,ie){const B=jt,U=uo,T=xt,ee=mo,i=zt,y=io,Q=vo,be=fo,Se=go,ne=Fi;return N(),K("div",Oi,[r("div",Ui,[Xe(B,{"pool-info":e.poolInfo,onClickRefresh:e.clickRefresh},null,8,["pool-info","onClickRefresh"])]),r("div",ji,[e.positionError?(N(),K("div",xi,[Xe(U)])):V("",!0),r("div",zi,[Xe(T,{modelValue:e.fromCoinAmount,"onUpdate:modelValue":d[0]||(d[0]=g=>e.fromCoinAmount=g),"input-value":e.fromCoinAmount,"coin-symbol":e.fromCoin?e.fromCoin.symbol:null,"coin-name":e.fromCoin?e.fromCoin.name:null,balance:e.fromCoinBlance,"coin-icon":e.fromCoin?e.fromCoin.logoURI:"",address:e.fromCoin?e.fromCoin.address:"","swap-direct":"From","import-page":"deposit","has-arrow":!1,onOnMax:d[1]||(d[1]=g=>e.maxBtnSelect("fromCoin")),onOnHalf:d[2]||(d[2]=g=>e.halfBtnSelect("fromCoin")),onOnInput:d[3]||(d[3]=g=>{e.fromCoinAmount=g,e.fixedFromCoin=!0,e.isInputTotalAmount=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showFromCoinLock&&!e.positionError?(N(),Ge(ee,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):V("",!0)]),r("div",Hi,[Xe(T,{modelValue:e.toCoinAmount,"onUpdate:modelValue":d[4]||(d[4]=g=>e.toCoinAmount=g),"input-value":e.toCoinAmount,"coin-symbol":e.toCoin?e.toCoin.symbol:null,"coin-name":e.toCoin?e.toCoin.name:null,balance:e.toCoinBlance,"swap-direct":"To","coin-icon":e.toCoin?e.toCoin.logoURI:"",address:e.toCoin?e.toCoin.address:"","import-page":"deposit","has-arrow":!1,onOnMax:d[5]||(d[5]=g=>e.maxBtnSelect("toCoin")),onOnHalf:d[6]||(d[6]=g=>e.halfBtnSelect("toCoin")),onOnInput:d[7]||(d[7]=g=>{e.toCoinAmount=g,e.fixedFromCoin=!1,e.isInputTotalAmount=!1})},null,8,["modelValue","input-value","coin-symbol","coin-name","balance","coin-icon","address"]),e.showToCoinLock&&!e.positionError?(N(),Ge(ee,{key:0,"from-coin":e.fromCoin,"to-coin":e.toCoin,"pool-info":e.poolInfo},null,8,["from-coin","to-coin","pool-info"])):V("",!0)]),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme=="default"?(N(),K("img",{key:1,class:"add",src:bo,alt:"",onClick:d[8]||(d[8]=(...g)=>e.toggle&&e.toggle(...g))})):V("",!0),e.fromCoin&&e.toCoin&&!e.showToCoinLock&&!e.showFromCoinLock&&e.theme!=="default"?(N(),K("img",{key:2,class:"add",src:ko,alt:"",onClick:d[9]||(d[9]=(...g)=>e.toggle&&e.toggle(...g))})):V("",!0)]),e.isShowtotalAmount?(N(),K("div",Xi,[Ei,r("span",null,me(e.liquidityTotalAmount)+" ",1)])):V("",!0),Xe(i,{"from-coin":e.fromCoin,"to-coin":e.toCoin,"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"fixed-from-coin":e.fixedFromCoin,"is-input-total-amount":e.isInputTotalAmount,"min-price":e.minPrice,"max-price":e.maxPrice,"current-price-tab":e.currentPriceTab,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse},null,8,["from-coin","to-coin","from-coin-amount","to-coin-amount","fixed-from-coin","is-input-total-amount","min-price","max-price","current-price-tab","current-price","current-price-reverse"]),Xe(y,{class:"add-liquidity-btn",disabled:e.wallet.connected?e.addLiquidityBtnDisabled:!1,onClick:d[10]||(d[10]=g=>e.wallet.connected?e.isShowLiquidityModal=!0:e.wallet.setIsShowWalletModal(!0))},{default:lt(()=>[Ct(me(e.wallet.connected?e.addLiquidityBtnText:e.$t("button.connectWallet")),1)]),_:1},8,["disabled"]),e.showCoinSelect?(N(),Ge(Q,{key:1,"existing-coins":e.existingCoins,"last-select-coin":e.lastSelectCoin,onOnSelect:e.onCoinSelect,onOnClose:d[11]||(d[11]=g=>e.showCoinSelect=!1)},null,8,["existing-coins","last-select-coin","onOnSelect"])):V("",!0),e.isViewDetail?(N(),Ge(be,{key:2,"pool-info":e.poolInfo,"farm-pool-info":e.farmPoolInfo,"is-auto-stake-farming":e.isAutoStakeFarming,onOnClose:d[12]||(d[12]=g=>e.isViewDetail=!1)},null,8,["pool-info","farm-pool-info","is-auto-stake-farming"])):V("",!0),e.isShowLiquidityModal?(N(),Ge(Se,{key:3,"pool-info":e.poolInfo,title:e.$t("button.addLiquidity"),"from-coin-amount":e.fromCoinAmount,"to-coin-amount":e.toCoinAmount,"from-coin":e.fromCoin,"to-coin":e.toCoin,"fixed-from-coin":e.fixedFromCoin,"current-price":e.currentPrice,"current-price-reverse":e.currentPriceReverse,"current-price-tab":e.currentPriceTab,"min-price":e.minPrice,"max-price":e.maxPrice,"show-from-coin-lock":e.showFromCoinLock,"show-to-coin-lock":e.showToCoinLock,"current-direct":e.direction,"is-increase":!1,onToAdd:e.getAddLiquidityType,onOnClose:d[13]||(d[13]=g=>e.isShowLiquidityModal=!1)},null,8,["pool-info","title","from-coin-amount","to-coin-amount","from-coin","to-coin","fixed-from-coin","current-price","current-price-reverse","current-price-tab","min-price","max-price","show-from-coin-lock","show-to-coin-lock","current-direct","onToAdd"])):V("",!0),e.chainName=="Sui"?(N(),Ge(ne,{key:4,"pool-info":e.poolInfo,"is-active":!e.showFromCoinLock&&!e.showToCoinLock,"is-auto-stake-farming":e.isAutoStakeFarming,onSendFarmsPoolInfo:e.getFarmsPoolInfo},null,8,["pool-info","is-active","is-auto-stake-farming","onSendFarmsPoolInfo"])):V("",!0)])}const Dt=ot(Ri,[["render",Di]]),Wi=tt({components:{NewLiquidityLeft:Et,NewLiquidityRight:Dt},setup(){Rt(()=>{co()});const e=yt();return{tickList:Ye,route:e}}});const Zi={key:0,class:"loading-spin-liquidity loading-global"},Gi={class:"privide-liquidity"};function Ki(e,d,le,oe,A,ie){var ee,i;const B=Bt,U=Et,T=Dt;return N(),K(ht,null,[!e.tickList&&((i=(ee=e.route)==null?void 0:ee.query)!=null&&i.poolAddress)?(N(),K("div",Zi,[Xe(B)])):V("",!0),r("div",Gi,[Xe(U),Xe(T)])],64)}const Ln=ot(Wi,[["render",Ki],["__scopeId","data-v-fc58011a"]]);export{Ln as default};
