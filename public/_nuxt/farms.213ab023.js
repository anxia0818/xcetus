import{m as lo,e as ro,s as A,a as B,u as co,d as no,o as go,c as x}from"./pool.1ed2be8f.js";import{a as M,l as u,r as V,e as E,o as n,f as t,h as s,v as p,u as y,c as T,w as j,B as io,j as O,p as Q,k as G,z as to,i as w,s as uo,t as X,x as N,b as po,A as ao,F as D,E as z,P as Mo,N as Io,M as $o,S as Eo,J as So,q as wo,H as qo,Q as Wo}from"./entry.ebd4a795.js";import{a as Y,u as mo}from"./sha256.1827b649.js";import{u as oo}from"./farms.a27d8c7a.js";import{i as _o}from"./import-icon.de3e6c66.js";/* empty css              *//* empty css              *//* empty css              */import{_ as Po}from"./img-connect-wallet_2x.5b20b48e.js";import{_ as To}from"./img-no-Positions_2x.5865e25e.js";import{_ as Vo}from"./upgrade-loading.59fe9b86.js";import"./decimal.0bdeb344.js";/* empty css              */import"./icon-Amount-for-Sale_2x.b2e65df2.js";const Ho=M({setup(){const o=Y(),l=u(()=>o),_=oo(),c=u(()=>_),h=u(()=>c.value.totalRwadrdUsd),a=u(()=>c.value.farmsPositionList),i=u(()=>c.value.farmsAllPositionLoading),r=mo(),g=lo("Sui"),m=ro("Sui"),{setIsShowSuccess:I,setIsShowRejected:v,setIsShowWaiting:b,setTransactionDesc:e,setTransactionTxid:d}=r,q=V(!1);return{wallet:l,farms:c,totalRwadrdUsd:h,sFixD:A,claimAllPoolReward:async J=>{q.value=!0,console.log(a.value,"farmsRewardObj###");const H=[];a.value.forEach(F=>{console.log(J,F,"#position"),F.positionSource=="farming"&&H.push({pool_id:F.pool_id,position_nft_id:F.id})}),console.log(JSON.stringify(H),"##params"),d(""),e("Claim All"),b(!0);try{const F=await g.batchHarvest(H),U=await l.value.currentWallet.signAndExecuteTransactionBlock(F);console.log("0221###sui swap res###",U);let S=m.handleTx(U);if(S&&S.hash){d(S.hash),b(!1),I(!0);let R={res:S.res,title:"Stake",hash:S.hash};m.showTransitionPending(R),await m.watchTransaction(R)&&setTimeout(()=>{_.getFarmsPoolList()},4e3)}else b(!1),v(!0);q.value=!1}catch(F){console.log("Claim all error",F),b(!1),v(!0),q.value=!1}},loading:q,addCommom:B,farmsAllPositionLoading:i}}});const bo=o=>(Q("data-v-aa2448e1"),o=o(),G(),o),Jo={class:"farms-banner-bg"},zo={class:"farms-banner"},Qo={class:"farms-banner-center"},Go=bo(()=>s("div",{class:"title"},"Farms",-1)),Ko=bo(()=>s("div",{class:"desc"},"Stake Liquidity position to earn more rewards.",-1)),Xo={class:"claim-rewards"},Yo={class:"claim-title"},Zo=bo(()=>s("span",null,"Claimed Rewards",-1)),xo={key:0},os={key:1},ss={class:"claim-content"};function ns(o,l,_,c,h,a){const i=io;return n(),t("div",Jo,[s("div",zo,[s("div",Qo,[Go,Ko,s("div",Xo,[s("div",Yo,[Zo,o.wallet.address?(n(),t("span",xo,"$"+p(("addCommom"in o?o.addCommom:y(B))(("sFixD"in o?o.sFixD:y(A))(o.totalRwadrdUsd||0,2))),1)):(n(),t("span",os,"--"))]),s("div",ss,[o.wallet.address?(n(),T(i,{key:0,class:"claim-btn",loading:o.loading,disabled:Number(o.totalRwadrdUsd)==0||o.farmsAllPositionLoading,onClick:o.claimAllPoolReward},{default:j(()=>[O("Claim All")]),_:1},8,["loading","disabled","onClick"])):(n(),T(i,{key:1,class:"claim-btn",onClick:l[0]||(l[0]=r=>o.wallet.setIsShowWalletModal(!0))},{default:j(()=>[O("Connect")]),_:1}))])])])])])}const Co=E(Ho,[["render",ns],["__scopeId","data-v-aa2448e1"]]),es=M({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=V(!0);return{sFixD:A,direct:o}}}),Lo=""+globalThis.__publicAssetsURL("sui-image/range.png");const fo=o=>(Q("data-v-99c4cf44"),o=o(),G(),o),ts={class:"range"},as={key:0},is=fo(()=>s("img",{src:Lo,alt:""},null,-1)),ls={class:"per"},rs={key:1},ds=fo(()=>s("img",{src:Lo,alt:""},null,-1)),cs={class:"per"},us=fo(()=>s("div",null,[s("svg",{class:"icon icon-up","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_up1"})])],-1)),ms=fo(()=>s("div",null,[s("svg",{class:"icon icon-down","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-exchange_down1"})])],-1)),ps=[us,ms];function _s(o,l,_,c,h,a){var i,r,g,m;return n(),t("div",ts,[o.direct?(n(),t("p",as,[s("span",null,p(("sFixD"in o?o.sFixD:y(A))(o.poolInfo.minPrice,6)),1),is,s("span",null,p(("sFixD"in o?o.sFixD:y(A))(o.poolInfo.maxPrice,6)),1),s("span",ls,p((i=o.poolInfo.coinB)==null?void 0:i.symbol)+" per "+p((r=o.poolInfo.coinA)==null?void 0:r.symbol),1)])):(n(),t("p",rs,[s("span",null,p(o.poolInfo.maxPrice!=="∞"?("sFixD"in o?o.sFixD:y(A))(1/o.poolInfo.maxPrice,6):"0"),1),ds,s("span",null,p(o.poolInfo.minPrice!=="0"?("sFixD"in o?o.sFixD:y(A))(1/o.poolInfo.minPrice,6):"∞"),1),s("span",cs,p((g=o.poolInfo.coinA)==null?void 0:g.symbol)+" per "+p((m=o.poolInfo.coinB)==null?void 0:m.symbol),1)])),s("div",{class:"icon-change",onClick:l[0]||(l[0]=to(I=>o.direct=!o.direct,["stop"]))},ps)])}const yo=E(es,[["render",_s],["__scopeId","data-v-99c4cf44"]]),fs=M({props:{poolInfo:{type:Object,default:()=>({})}},setup(){const o=V(!0);return{sFixD:A,direct:o}}});const hs=o=>(Q("data-v-14f67ada"),o=o(),G(),o),vs={class:"valid-range"},gs=hs(()=>s("div",{class:"title"},"Valid Range",-1));function $s(o,l,_,c,h,a){const i=yo;return n(),t("div",vs,[gs,w(i,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const bs=E(fs,[["render",$s],["__scopeId","data-v-14f67ada"]]),ys=M({props:{poolInfo:{type:Object,default:()=>({})}},setup(){return{}}});const ks={class:"pool"},ws={class:"pool-info"},Is={class:"token-logo"},Ss={alt:""},Ps={alt:""},Ts={class:"token-symbol"},Cs={class:"symbol"},Ls={class:"fee-rate"};function js(o,l,_,c,h,a){var g,m,I,v;const i=bs,r=uo("image");return n(),t("div",ks,[s("div",ws,[s("div",Is,[X(s("img",Ss,null,512),[[r,(g=o.poolInfo.coinA)==null?void 0:g.logo_url]]),X(s("img",Ps,null,512),[[r,(m=o.poolInfo.coinB)==null?void 0:m.logo_url]])]),s("div",Ts,[s("div",Cs,p((I=o.poolInfo.coinA)==null?void 0:I.symbol)+" - "+p((v=o.poolInfo.coinB)==null?void 0:v.symbol),1),s("div",Ls,p(o.poolInfo.fee),1)])]),w(i,{"pool-info":o.poolInfo},null,8,["pool-info"])])}const jo=E(ys,[["render",js],["__scopeId","data-v-c027f63c"]]),Us=M({props:{currentTab:{type:String,default:""},rewardInfo:{type:Object,default:()=>({})}},setup(){const o=co(),l=u(()=>o);return{sFixD:A,addCommom:B,getCoinIcon:c=>{var h;return((h=l.value.tokensObj[c])==null?void 0:h.logo_url)||_o("/image/coins/sui-unknown.png")}}}});const Os={key:0,class:"rewards-day"},Rs={class:"rewards-day-box"},As={alt:""};function Fs(o,l,_,c,h,a){const i=uo("image");return o.rewardInfo.allocate_point>0||o.currentTab=="Ended"?(n(),t("div",Os,[s("div",null,[s("div",Rs,[X(s("img",As,null,512),[[i,o.getCoinIcon(o.rewardInfo.reward_coin)]]),s("span",null,p(("addCommom"in o?o.addCommom:y(B))(("sFixD"in o?o.sFixD:y(A))(o.rewardInfo.emission_per_day,4))),1)])])])):N("",!0)}const Uo=E(Us,[["render",Fs],["__scopeId","data-v-416b96fb"]]),Ds=M({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){console.log(o.positionInfo,"props.positionInfo");const l=co(),_=u(()=>l);return{addCommom:B,decimalUi:no,fixD:go,getCoinIcon:h=>{var a;return((a=_.value.tokensObj[h])==null?void 0:a.logo_url)||_o("/image/coins/sui-unknown.png")}}}});const Bs={class:"hover-rewarder"},Ns={class:"rewarder-info"},Ms={class:"left-rewarder"},Es={alt:""},qs={class:"right-rewarder"},Ws={class:"amount"},Vs={key:0,class:"amount-usd"},Hs={key:1,class:"amount-usd"},Js={class:"rewarder-info"},zs={class:"left-rewarder"},Qs={alt:""},Gs={class:"right-rewarder"},Ks={class:"amount"},Xs={key:0,class:"amount-usd"},Ys={key:1,class:"amount-usd"};function Zs(o,l,_,c,h,a){const i=uo("image");return n(),t("div",Bs,[s("div",Ns,[s("div",Ms,[X(s("img",Es,null,512),[[i,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinB.address:o.positionInfo.coinA.address)]]),s("span",null,p(o.positionInfo.needReverse?o.positionInfo.coinB.symbol:o.positionInfo.coinA.symbol),1)]),s("div",qs,[s("div",Ws,p(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:y(B))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountB,o.positionInfo.coinB.decimals)):("addCommom"in o?o.addCommom:y(B))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountA,o.positionInfo.coinA.decimals))),1),o.positionInfo.needReverse?(n(),t("div",Hs,p(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("fixD"in o?o.fixD:y(go))(o.positionInfo.amountBUsd,2):"<$0.01"),1)):(n(),t("div",Vs,p(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("fixD"in o?o.fixD:y(go))(o.positionInfo.amountAUsd,2):"<$0.01"),1))])]),s("div",Js,[s("div",zs,[X(s("img",Qs,null,512),[[i,o.getCoinIcon(o.positionInfo.needReverse?o.positionInfo.coinA.address:o.positionInfo.coinB.address)]]),s("span",null,p(o.positionInfo.needReverse?o.positionInfo.coinA.symbol:o.positionInfo.coinB.symbol),1)]),s("div",Gs,[s("div",Ks,p(o.positionInfo.needReverse?("addCommom"in o?o.addCommom:y(B))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountA,o.positionInfo.coinA.decimals)):("addCommom"in o?o.addCommom:y(B))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountB,o.positionInfo.coinB.decimals))),1),o.positionInfo.needReverse?(n(),t("div",Ys,p(o.positionInfo.amountAUsd==0?"$0":o.positionInfo.amountAUsd>.01?"$"+("addCommom"in o?o.addCommom:y(B))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountAUsd,2)):"<$0.01"),1)):(n(),t("div",Xs,p(o.positionInfo.amountBUsd==0?"$0":o.positionInfo.amountBUsd>.01?"$"+("addCommom"in o?o.addCommom:y(B))(("decimalUi"in o?o.decimalUi:y(no))(o.positionInfo.amountBUsd,2)):"<$0.01"),1))])])])}const Oo=E(Ds,[["render",Zs],["__scopeId","data-v-d01301e5"]]),xs=M({components:{FarmsPositionAmountTips:Oo},props:{positionInfo:{type:Object,default:()=>({})},currentTab:{type:String,default:""}},setup(o){const l=Y(),_=u(()=>l);console.log(o.positionInfo,"positionInfo#");const c=oo(),h=u(()=>c),a=ro("Sui"),i=lo("Sui"),r=V(!1),g=mo();u(()=>g);const m=po(),{setIsShowSuccess:I,setIsShowRejected:v,setIsShowWaiting:b,setTransactionDesc:e,setTransactionTxid:d}=g,q=async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,d(""),e(`Stake ${o.positionInfo.name}`),b(!0);const k={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},f=o.positionInfo.farmsPoolId;try{const P=await i.farmsDeposit(k,f),$=await _.value.currentWallet.signAndExecuteTransactionBlock(P);console.log("0221###sui swap res###",$);let C=a.handleTx($);if(C&&C.hash){d(C.hash),b(!1),I(!0);let L={res:C.res,title:"Staked",hash:C.hash};a.showTransitionPending(L),await a.watchTransaction(L)&&setTimeout(()=>{c.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),r.value=!1},2e3)}else b(!1),v(!0)}catch(P){console.log("farmsDeposit error",P),b(!1),v(!0),r.value=!1}},W=async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,d(""),e(`Unstake ${o.positionInfo.name}`),b(!0);const k=o.positionInfo.farmsPoolId,f=o.positionInfo.id;try{const P=await i.farmsWithdraw(k,f),$=await _.value.currentWallet.signAndExecuteTransactionBlock(P);console.log("0221###sui swap res###",$);let C=a.handleTx($);if(console.log(C,"unStaketx##"),C&&C.hash){d(C.hash),b(!1),I(!0);let L={res:C.res,title:"Unstaked",hash:C.hash};a.showTransitionPending(L),await a.watchTransaction(L)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),c.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),r.value=!1},2e3)}else b(!1),v(!0)}catch(P){console.log("farmsDeposit error",P),b(!1),v(!0),r.value=!1}},J=async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,d(""),e("Claim rewards"),b(!0);const k={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const f=await i.harvestFarms(k),P=await _.value.currentWallet.signAndExecuteTransactionBlock(f);console.log("0221###sui swap res###",P);let $=a.handleTx(P);if($&&$.hash){d($.hash),b(!1),I(!0);let C={title:"Claim",res:$.res,hash:$.hash};a.showTransitionPending(C),await a.watchTransaction(C)&&setTimeout(()=>{c.getPositionByPool(_.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else b(!1),v(!0);r.value=!1}catch(f){console.log("farmsDeposit error",f),b(!1),v(!0),r.value=!1}},H=u(()=>h.value.farmsRewardObj),F=co(),U=u(()=>F);return{sFixD:A,stake:q,loading:r,unStake:W,router:m,claim:J,farmsRewardObj:H,getCoinIcon:k=>{var f;return((f=U.value.tokensObj[k])==null?void 0:f.logo_url)||_o("/image/coins/sui-unknown.png")},toPositionDetails:k=>{console.log("toPositionDetails:",k),k.positionSource=="clmm"?m.push(`/new-position-detail?collect=${k.collectionName}&&token=${k.tokenName}&&address=${k.pool}&pos=${k.pos_object_id}`):m.push(`/new-position-detail?position_nft_id=${k.id}&positionSource=farming`)}}}}),Ro=""+globalThis.__publicAssetsURL("sui-image/position-active.png");const ho=o=>(Q("data-v-45e90eab"),o=o(),G(),o),on={class:"farms-position-item"},sn=ho(()=>s("thead",null,[s("tr",null,[s("th"),s("th",null,"Liquidity"),s("th",null,"Share"),s("th",null,"Earnings"),s("th")])],-1)),nn={class:"position-info"},en={key:0,class:"status-bg"},tn=ho(()=>s("img",{src:Ro,alt:""},null,-1)),an=[tn],ln={class:"status-text"},rn={class:"name-range"},dn=ho(()=>s("span",null,"Details",-1)),cn=ho(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),un=[dn,cn],mn={class:"liquidity"},pn={class:"apr"},_n={alt:""},fn={key:1,class:"rewards-day"},hn={class:"action-btn"};function vn(o,l,_,c,h,a){const i=yo,r=Oo,g=io,m=Mo,I=uo("image");return n(),t("div",on,[s("table",null,[sn,s("tbody",null,[s("tr",null,[s("td",null,[s("div",nn,[s("div",{class:ao(["position-status",o.positionInfo.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionInfo.positionStatus=="Active"?(n(),t("div",en,an)):N("",!0),s("div",ln,p(o.positionInfo.positionStatus),1)],2),s("div",rn,[s("span",null,p(o.positionInfo.name),1),w(i,{"pool-info":o.positionInfo},null,8,["pool-info"])]),s("div",{class:"details",onClick:l[0]||(l[0]=v=>o.toPositionDetails(o.positionInfo))},un)])]),s("td",null,[s("div",mn,[w(r,{"position-info":o.positionInfo},null,8,["position-info"]),s("span",null,p(o.positionInfo.positionUSD>0&&o.positionInfo.positionUSD<.01?"<$0.01":`~$${("sFixD"in o?o.sFixD:y(A))(o.positionInfo.positionUSD,2)}`),1)])]),s("td",null,[s("div",pn,p(("sFixD"in o?o.sFixD:y(A))(o.positionInfo.positionShare||0,2))+"%",1)]),s("td",null,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),t(D,{key:0},z(o.positionInfo.rewards,v=>(n(),t("div",{key:v.rewarder_type,class:"rewards-day"},[s("div",null,[X(s("img",_n,null,512),[[I,o.getCoinIcon(v.rewarder_type)]]),s("span",null,p(v.rewarderAmount),1)])]))),128)):(n(),t("div",fn,"--"))]),s("td",null,[s("div",hn,[o.positionInfo.positionSource=="clmm"?(n(),t(D,{key:0},[o.positionInfo&&o.positionInfo.positionStatus!=="Active"?(n(),T(m,{key:0},{title:j(()=>[O("Farming rewards are only available for active positions.")]),default:j(()=>[w(g,{class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:j(()=>[O("Stake")]),_:1},8,["loading","disabled","onClick"])]),_:1})):(n(),T(g,{key:1,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:j(()=>[O("Stake")]),_:1},8,["loading","disabled","onClick"]))],64)):(n(),T(g,{key:1,class:"unstake-btn",onClick:o.unStake},{default:j(()=>[O("Unstake")]),_:1},8,["onClick"])),o.positionInfo.positionSource=="clmm"?(n(),T(g,{key:2,class:"claim-btn",disabled:!0},{default:j(()=>[O("↑ Claim")]),_:1})):(n(),T(g,{key:3,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0,onClick:o.claim},{default:j(()=>[O("↑ Claim")]),_:1},8,["disabled","onClick"]))])])])])])])}const Ao=E(xs,[["render",vn],["__scopeId","data-v-45e90eab"]]),gn=M({props:{noDataImg:{type:String,default:""},desc:{type:String,default:""},type:{type:String,default:""},addLiquidityUrl:{type:String,default:""}},setup(){return{walletStore:Y()}}});const $n={class:"no-data"},bn=["src"],yn={key:0,class:"desc"};function kn(o,l,_,c,h,a){const i=io;return n(),t("div",$n,[s("img",{src:o.noDataImg,alt:""},null,8,bn),o.desc?(n(),t("div",yn,p(o.desc),1)):N("",!0),o.type=="addLiquidity"?(n(),T(i,{key:1,class:"add-liquidity-btn",onClick:l[0]||(l[0]=r=>o.addLiquidityUrl?o.$router.push(o.addLiquidityUrl):"")},{default:j(()=>[O("Add Liquidity")]),_:1})):N("",!0),o.type=="connectWallet"?(n(),T(i,{key:2,class:"add-liquidity-btn",onClick:l[1]||(l[1]=r=>o.walletStore.setIsShowWalletModal(!0))},{default:j(()=>[O("Connect Wallet")]),_:1})):N("",!0)])}const Fo=E(gn,[["render",kn],["__scopeId","data-v-130f9462"]]),wn=M({components:{FarmsPositionItem:Ao},props:{currentTab:{type:String,default:""}},setup(o){const l=V({}),_=Y(),c=u(()=>_),h=oo(),a=u(()=>h),i=u(()=>(console.log(a.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?c.value.address?a.value.myFarmsPoolList:[]:o.currentTab=="Ended"?a.value.farmsPoolList.filter(f=>f.status=="Ended"):a.value.farmsPoolList.filter(f=>f.status=="Live"))),r=f=>{l.value[f.clmm_pool_id]?l.value[f.clmm_pool_id]=!1:(l.value[f.clmm_pool_id]=!0,console.log("执行了吗"),h.getPositionByPool(c.value.address,f.clmm_pool_id,f.id))},g=u(()=>a.value.farmsPositionObj),m=u(()=>(console.log(a.value.farmsLoadingObj,"##farms.value.farmsLoadingObj"),a.value.farmsLoadingObj)),I=u(()=>a.value.farmsUserUsd),v=u(()=>(console.log(a.value.farmsRewardObj,"##farmsRewardObj"),a.value.farmsRewardObj)),b=u(()=>a.value.farmsPositionList),e=u(()=>a.value.farmsAllPositionLoading),d=po(),q=mo(),W=lo("Sui"),J=ro("Sui"),{setIsShowSuccess:H,setIsShowRejected:F,setIsShowWaiting:U,setTransactionDesc:S,setTransactionTxid:R}=q;return{wallet:c,walletStore:_,farmsPoolList:i,openMore:r,openMoreObj:l,checkNullObj:x,router:d,farmsPositionObj:g,farmsLoadingObj:m,farmsUserUsd:I,sFixD:A,farmsRewardObj:v,claimPoolReward:async f=>{console.log(b.value,"farmsRewardObj###");const P=[];b.value.forEach($=>{console.log(f,$,"#position"),f==$.clmm_pool_id&&P.push({pool_id:$.pool_id,position_nft_id:$.id})}),console.log(JSON.stringify(P),"##params"),R(""),S("Claim rewards"),U(!0);try{const $=await W.batchHarvest(P),C=await c.value.currentWallet.signAndExecuteTransactionBlock($);console.log("0221###sui swap res###",C);let L=J.handleTx(C);if(L&&L.hash){R(L.hash),U(!1),H(!0);let so={res:L.res,title:"Claim",hash:L.hash};J.showTransitionPending(so),await J.watchTransaction(so)&&setTimeout(()=>{h.getFarmsPoolList()},4e3)}else U(!1),F(!0)}catch($){console.log("Claim all error",$),U(!1),F(!0)}},farmsAllPositionLoading:e,addCommom:B}}});const K=o=>(Q("data-v-0e4e0e1d"),o=o(),G(),o),In={class:"farms-table"},Sn=K(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")])],-1)),Pn={key:0},Tn=["onClick"],Cn=K(()=>s("td",null,[s("div",{class:"staked-tvl"},"$19,885,003.12")],-1)),Ln=K(()=>s("td",null,[s("div",{class:"apr"},[s("span",null,"22.20%")])],-1)),jn={key:0,class:"my-staked"},Un={key:0,class:"my-staked-loading"},On={class:"position-usd"},Rn={key:0,class:"position-num"},An={key:1,class:"my-staked"},Fn=K(()=>s("div",{class:"position-usd"},"--",-1)),Dn=[Fn],Bn={class:"earned"},Nn={key:0,class:"my-staked-loading"},Mn=K(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),En={key:0},qn={key:1},Wn={key:2},Vn={key:2},Hn={class:"actions"},Jn={class:"actions-btn"},zn=["onClick"],Qn=K(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),Gn=[Qn],Kn={colspan:"7",style:{padding:"0 16px 16px"}},Xn={key:0,class:"farm-position-list"},Yn={key:0,class:"farm-position-loading"},Zn={key:1,class:"farm-position-list"},xn=K(()=>s("tr",{style:{height:"8px"}},null,-1)),oe={key:1},se={colspan:"7"},ne={key:0,class:"no-data"},ee=K(()=>s("img",{src:Po,alt:""},null,-1)),te={key:1,class:"no-data"},ae=K(()=>s("img",{src:To,alt:""},null,-1)),ie=K(()=>s("span",null,"No farms found",-1)),le=[ae,ie];function re(o,l,_,c,h,a){const i=jo,r=Uo,g=$o,m=io,I=Eo,v=Ao,b=Fo;return n(),t("div",In,[s("table",null,[Sn,o.farmsPoolList.length>0?(n(),t("tbody",Pn,[(n(!0),t(D,null,z(o.farmsPoolList,e=>(n(),t(D,{key:e.id},[s("tr",{onClick:d=>o.openMore(e)},[s("td",null,[w(i,{"pool-info":e},null,8,["pool-info"])]),Cn,Ln,s("td",null,[(n(!0),t(D,null,z(e.rewarders,d=>(n(),T(r,{key:d.reward_coin,"reward-info":d,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))]),s("td",null,[o.wallet.address?(n(),t("div",jn,[o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",Un,[w(g,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):(n(),t(D,{key:1},[s("div",On," $"+p(("sFixD"in o?o.sFixD:y(A))(o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].positionNum?(n(),t("div",Rn,p(o.farmsUserUsd[e.clmm_pool_id].positionNum)+" "+p(o.farmsUserUsd[e.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):N("",!0)],64))])):(n(),t("div",An,Dn))]),s("td",null,[s("div",Bn,[o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",Nn,[w(g,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[e.clmm_pool_id]&&o.farmsRewardObj[e.clmm_pool_id].amountUsd?(n(),t(D,{key:1},[Mn,o.farmsRewardObj[e.clmm_pool_id].amountUsd>.01?(n(),t("span",En,"$"+p(("addCommom"in o?o.addCommom:y(B))(("sFixD"in o?o.sFixD:y(A))(o.farmsRewardObj[e.clmm_pool_id].amountUsd||0,2))),1)):o.farmsRewardObj[e.clmm_pool_id].amountUsd>0&&o.farmsRewardObj[e.clmm_pool_id].amountUsd<.01?(n(),t("span",qn,"$<0.01")):(n(),t("span",Wn,"0"))],64)):(n(),t("span",Vn,"--"))])]),s("td",null,[s("div",Hn,[s("div",Jn,[w(m,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[e.clmm_pool_id]||o.farmsRewardObj[e.clmm_pool_id].amountUsd<=0,onClick:to(d=>o.claimPoolReward(e.clmm_pool_id),["stop"])},{default:j(()=>[O("Claim")]),_:2},1032,["disabled","onClick"]),w(m,{class:"add-liquidity-btn",onClick:to(d=>o.router.push(`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`),["stop"])},{default:j(()=>[O("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more",onClick:to(d=>o.openMore(e),["stop"])},[(n(),t("svg",{class:ao(["arrow-icon",o.openMoreObj[e.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},Gn,2))],8,zn)])])],8,Tn),X(s("tr",null,[s("td",Kn,[o.wallet.address?(n(),t("div",Xn,[!("checkNullObj"in o?o.checkNullObj:y(x))(o.farmsLoadingObj)&&(o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading)?(n(),t("div",Yn,[w(I)])):o.farmsPositionObj[e.clmm_pool_id]&&o.farmsPositionObj[e.clmm_pool_id].length>0?(n(!0),t(D,{key:1},z(o.farmsPositionObj[e.clmm_pool_id],d=>(n(),T(v,{key:d.clmm_pool_id,"current-tab":o.currentTab,"position-info":{...d,clmm_pool_id:e.clmm_pool_id}},null,8,["current-tab","position-info"]))),128)):(n(),T(b,{key:2,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`},null,8,["add-liquidity-url"]))])):(n(),t("div",Zn,[w(b,{"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"})]))])],512),[[Io,!("checkNullObj"in o?o.checkNullObj:y(x))(o.openMoreObj)&&o.openMoreObj[e==null?void 0:e.clmm_pool_id]]]),xn],64))),128))])):(n(),t("tbody",oe,[s("tr",null,[s("td",se,[!o.wallet.connected&&o.currentTab=="My Farms"?(n(),t("div",ne,[ee,w(m,{class:"connect-wallet",onClick:l[0]||(l[0]=e=>o.wallet.setIsShowWalletModal(!0))},{default:j(()=>[O(p(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(n(),t("div",te,le)):N("",!0)])])]))])])}const Do=E(wn,[["render",re],["__scopeId","data-v-0e4e0e1d"]]),de=M({props:{currentTab:{type:String,default:""}},setup(){const o=V(!1),l=Y(),_=u(()=>l),c=oo(),h=u(()=>c),a=u(()=>h.value.farmsPoolList);return{isShowMore:o,wallet:_,walletStore:l,farmsPoolList:a}}});const ce=o=>(Q("data-v-6ff18114"),o=o(),G(),o),ue={class:"farms-table"},me=ce(()=>s("thead",null,[s("tr",null,[s("th",null,"Pools"),s("th",null,"Staked TVL"),s("th",null,"APR"),s("th",null,"Rewards / day"),s("th",null,"My Staked"),s("th",null,"Earned"),s("th",null,"Actions")])],-1)),pe={class:"pool"},_e={class:"staked-tvl"},fe={class:"apr"},he={class:"rewards-day"},ve={class:"my-staked"},ge={class:"earned"},$e={class:"actions"};function be(o,l,_,c,h,a){const i=$o;return n(),t("div",ue,[s("table",null,[me,s("tbody",null,[(n(),t(D,null,z(4,(r,g)=>s("tr",{key:g},[s("td",null,[s("div",pe,[w(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1}),w(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",_e,[w(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",fe,[s("span",null,[w(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])]),s("td",null,[s("div",he,[w(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",ve,[w(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",ge,[w(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])]),s("td",null,[s("div",$e,[w(i,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])])])),64))])])])}const ye=E(de,[["render",be],["__scopeId","data-v-6ff18114"]]),ke=M({props:{positionStatus:{type:String,default:"Active"},positionInfo:{type:Object,default:()=>({})}},setup(){return{}}});const we=o=>(Q("data-v-882c76c0"),o=o(),G(),o),Ie={class:"position-info"},Se={key:0,class:"status-bg"},Pe=we(()=>s("img",{src:Ro,alt:""},null,-1)),Te=[Pe],Ce={class:"status-text"},Le={class:"name-range"};function je(o,l,_,c,h,a){const i=yo;return n(),t("div",Ie,[s("div",{class:ao(["position-status",o.positionStatus!=="Active"?"position-status-inactive":""])},[o.positionStatus=="Active"?(n(),t("div",Se,Te)):N("",!0),s("div",Ce,p(o.positionStatus),1)],2),s("div",Le,[s("span",null,p(o.positionInfo.name),1),o.positionStatus=="Active"?(n(),T(i,{key:0,"pool-info":o.positionInfo},null,8,["pool-info"])):N("",!0)])])}const Ue=E(ke,[["render",je],["__scopeId","data-v-882c76c0"]]),Oe=M({props:{positionInfo:{type:Object,default:()=>({})}},setup(o){const l=co(),_=u(()=>l),c=po(),h=U=>{var S;return((S=_.value.tokensObj[U])==null?void 0:S.logo_url)||_o("/image/coins/sui-unknown.png")},a=ro("Sui"),i=lo("Sui"),r=V(!1),g=mo(),m=Y(),I=oo(),v=u(()=>m),{setIsShowSuccess:b,setIsShowRejected:e,setIsShowWaiting:d,setTransactionDesc:q,setTransactionTxid:W}=g;return{getCoinIcon:h,router:c,claim:async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,W(""),q("Claim rewards"),d(!0);const U={pool_id:o.positionInfo.farmsPoolId,position_nft_id:o.positionInfo.id};try{const S=await i.harvestFarms(U),R=await v.value.currentWallet.signAndExecuteTransactionBlock(S);console.log("0221###sui swap res###",R);let k=a.handleTx(R);if(k&&k.hash){W(k.hash),d(!1),b(!0);let f={title:"Claim",res:k.res,hash:k.hash};a.showTransitionPending(f),await a.watchTransaction(f)&&setTimeout(()=>{I.getPositionByPool(v.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId)},2e3)}else d(!1),e(!0);r.value=!1}catch(S){console.log("farmsDeposit error",S),d(!1),e(!0),r.value=!1}},unStake:async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,W(""),q(`Unstake ${o.positionInfo.name}`),d(!0);const U=o.positionInfo.farmsPoolId,S=o.positionInfo.id;try{const R=await i.farmsWithdraw(U,S),k=await v.value.currentWallet.signAndExecuteTransactionBlock(R);console.log("0221###sui swap res###",k);let f=a.handleTx(k);if(f&&f.hash){W(f.hash),d(!1),b(!0);let P={res:f.res,title:"Unstaked",hash:f.hash};a.showTransitionPending(P),await a.watchTransaction(P)&&setTimeout(()=>{console.log(o.positionInfo,"##props.positionInfo"),I.getPositionByPool(v.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),r.value=!1},2e3)}else d(!1),e(!0)}catch(R){console.log("farmsDeposit error",R),d(!1),e(!0),r.value=!1}},loading:r,stake:async()=>{console.log(o.positionInfo,"props.positionInfo"),r.value=!0,W(""),q(`Stake ${o.positionInfo.name}`),d(!0);const U={clmm_pool_id:o.positionInfo.clmmPool,clmm_position_id:o.positionInfo.pos_object_id,coinTypeA:o.positionInfo.coin_type_a,coinTypeB:o.positionInfo.coin_type_b},S=o.positionInfo.farmsPoolId;try{const R=await i.farmsDeposit(U,S),k=await v.value.currentWallet.signAndExecuteTransactionBlock(R);console.log("0221###sui swap res###",k);let f=a.handleTx(k);if(f&&f.hash){W(f.hash),d(!1),b(!0);let P={res:f.res,title:"Staked",hash:f.hash};a.showTransitionPending(P),await a.watchTransaction(P)&&setTimeout(()=>{I.getPositionByPool(v.value.address,o.positionInfo.clmm_pool_id,o.positionInfo.farmsPoolId),r.value=!1},2e3)}else d(!1),e(!0)}catch(R){console.log("farmsDeposit error",R),d(!1),e(!0),r.value=!1}}}}});const Re=o=>(Q("data-v-5b370e52"),o=o(),G(),o),Ae={class:"farms-position"},Fe={class:"farms-position-box"},De=So('<div class="position-info-block" data-v-5b370e52><div class="block-item" data-v-5b370e52><div class="leabl" data-v-5b370e52>Liquidity</div><div class="text" data-v-5b370e52>~$33.57</div></div><div class="block-item" data-v-5b370e52><div class="leabl" data-v-5b370e52>Share</div><div class="text" data-v-5b370e52>0.00007%</div></div></div>',1),Be={class:"earnings"},Ne={class:"block-item"},Me=Re(()=>s("div",{class:"leabl"},"Earnings",-1)),Ee={class:"text"},qe={alt:""},We={key:1,class:"rewards-day"},Ve={class:"unstake-btn-box"};function He(o,l,_,c,h,a){const i=Ue,r=io,g=uo("image");return n(),t("div",Ae,[s("div",Fe,[w(i,{"position-info":o.positionInfo},null,8,["position-info"])]),De,s("div",Be,[s("div",Ne,[Me,s("div",Ee,[o.positionInfo.rewards&&o.positionInfo.rewards.length>0?(n(!0),t(D,{key:0},z(o.positionInfo.rewards,m=>(n(),t("div",{key:m.rewarder_type,class:"rewards-day"},[s("div",null,[X(s("img",qe,null,512),[[g,o.getCoinIcon(m.rewarder_type)]]),s("span",null,p(m.rewarderAmount),1)])]))),128)):(n(),t("div",We,"--"))])]),o.positionInfo.positionSource=="clmm"?(n(),T(r,{key:0,class:"add-liquidity-btn claim-btn",onClick:l[0]||(l[0]=m=>o.router.push(`/new-position-detail?collect=${o.positionInfo.collectionName}&&token=${o.positionInfo.tokenName}&&address=${o.positionInfo.pool}&pos=${o.positionInfo.pos_object_id}`))},{default:j(()=>[O("+ Add liquidity")]),_:1})):(n(),T(r,{key:1,class:"claim-btn",disabled:o.positionInfo.positionRewardAmount==0,onClick:o.claim},{default:j(()=>[O("↑ Claim")]),_:1},8,["disabled","onClick"]))]),s("div",Ve,[s("div",null,[o.positionInfo.positionSource=="clmm"?(n(),T(r,{key:0,class:"unstake-btn",loading:o.loading,disabled:o.positionInfo.positionStatus!=="Active",onClick:o.stake},{default:j(()=>[O("Stake")]),_:1},8,["loading","disabled","onClick"])):(n(),T(r,{key:1,class:"unstake-btn",onClick:o.unStake},{default:j(()=>[O("Unstake")]),_:1},8,["onClick"]))])])])}const Bo=E(Oe,[["render",He],["__scopeId","data-v-5b370e52"]]),Je=M({components:{FarmsH5Position:Bo},props:{currentTab:{type:String,default:""}},setup(o){const l=V(!1),_=Y(),c=u(()=>_),h=oo(),a=u(()=>h),i=u(()=>(console.log(a.value.farmsPoolList,"##farms.value.farmsPoolList"),o.currentTab=="My Farms"?c.value.address?a.value.myFarmsPoolList:[]:o.currentTab=="Ended"?a.value.farmsPoolList.filter($=>$.status=="Ended"):a.value.farmsPoolList.filter($=>$.status=="Live"))),r=u(()=>a.value.farmsUserUsd),g=u(()=>(console.log(a.value.farmsRewardObj,"##farmsRewardObj"),a.value.farmsRewardObj)),m=u(()=>a.value.farmsPositionObj),I=u(()=>a.value.farmsPoolListLoading),v=u(()=>a.value.farmsPositionList),b=u(()=>(console.log(a.value.farmsLoadingObj,"##farms.value.farmsLoadingObj"),a.value.farmsLoadingObj)),e=u(()=>a.value.farmsAllPositionLoading),d=V({}),q=$=>{d.value[$.clmm_pool_id]?d.value[$.clmm_pool_id]=!1:(d.value[$.clmm_pool_id]=!0,console.log("执行了吗"),h.getPositionByPool(c.value.address,$.clmm_pool_id,$.id))},W=mo(),J=lo("Sui"),H=ro("Sui"),{setIsShowSuccess:F,setIsShowRejected:U,setIsShowWaiting:S,setTransactionDesc:R,setTransactionTxid:k}=W,f=async $=>{console.log(v.value,"farmsRewardObj###");const C=[];v.value.forEach(L=>{console.log($,L,"#position"),$==L.clmm_pool_id&&C.push({pool_id:L.pool_id,position_nft_id:L.id})}),console.log(JSON.stringify(C),"##params"),k(""),R("Claim rewards"),S(!0);try{const L=await J.batchHarvest(C),so=await c.value.currentWallet.signAndExecuteTransactionBlock(L);console.log("0221###sui swap res###",so);let eo=H.handleTx(so);if(eo&&eo.hash){k(eo.hash),S(!1),F(!0);let ko={res:eo.res,title:"Claim",hash:eo.hash};H.showTransitionPending(ko),await H.watchTransaction(ko)&&setTimeout(()=>{h.getFarmsPoolList()},4e3)}else S(!1),U(!0)}catch(L){console.log("Claim all error",L),S(!1),U(!0)}},P=po();return{isShowMore:l,wallet:c,farmsPoolList:i,farmsUserUsd:r,sFixD:A,farmsRewardObj:g,farmsPositionObj:m,openMore:q,checkNullObj:x,openMoreObj:d,farmsPoolListLoading:I,claimPoolReward:f,router:P,addCommom:B,farmsLoadingObj:b,farmsAllPositionLoading:e}}});const Z=o=>(Q("data-v-a6f2d5a1"),o=o(),G(),o),ze={key:0,class:"farms-pool-list"},Qe={class:"farms-block"},Ge=So('<div class="item-block" data-v-a6f2d5a1><div class="leabl" data-v-a6f2d5a1>Staked TVL</div><div class="text" data-v-a6f2d5a1>$19,885,003.12</div></div><div class="item-block apr" data-v-a6f2d5a1><div class="leabl" data-v-a6f2d5a1>APR</div><div class="text" data-v-a6f2d5a1>22.20%</div></div>',2),Ke={class:"item-block"},Xe=Z(()=>s("div",{class:"leabl"},"Rewards / day",-1)),Ye={class:"text"},Ze={class:"item-block my-staked"},xe=Z(()=>s("div",{class:"leabl"},"My Staked",-1)),ot={key:0,class:"text"},st={class:"position-usd"},nt={key:0,class:"position-num"},et={key:1,class:"text"},tt=Z(()=>s("div",{class:"position-usd"},"--",-1)),at=[tt],it={class:"item-block"},lt=Z(()=>s("div",{class:"leabl"},"Earned",-1)),rt={class:"text earned-box"},dt={class:"earned"},ct={key:0,class:"my-staked-loading"},ut=Z(()=>s("div",{class:"ratio-bg"},[s("div",{class:"ratio"})],-1)),mt={key:0},pt={key:1},_t={key:2},ft={key:2},ht={class:"add-liquidity-box"},vt=["onClick"],gt=Z(()=>s("use",{"xlink:href":"#icon-icon_arrow"},null,-1)),$t=[gt],bt={key:1,class:"upgrade-loading"},yt={key:2,class:"no-data"},kt=Z(()=>s("img",{src:Po,alt:""},null,-1)),wt={key:3,class:"no-data"},It=Z(()=>s("img",{src:To,alt:""},null,-1)),St=Z(()=>s("span",null,"No Data",-1)),Pt=[It,St];function Tt(o,l,_,c,h,a){const i=jo,r=Uo,g=$o,m=io,I=Bo,v=Fo,b=Vo;return n(),t(D,null,[o.farmsPoolListLoading?o.farmsPoolListLoading?(n(),t("div",bt,[w(b,{type:"poolsCard",loading:!0})])):N("",!0):(n(),t("div",ze,[(n(!0),t(D,null,z(o.farmsPoolList,e=>(n(),t("div",{key:e.id,class:"farms-item"},[w(i,{"pool-info":e},null,8,["pool-info"]),s("div",Qe,[Ge,s("div",Ke,[Xe,s("div",Ye,[(n(!0),t(D,null,z(e.rewarders,d=>(n(),T(r,{key:d.reward_coin,"reward-info":d,"current-tab":o.currentTab},null,8,["reward-info","current-tab"]))),128))])]),s("div",Ze,[xe,o.wallet.address?(n(),t("div",ot,[s("div",st," $"+p(("sFixD"in o?o.sFixD:y(A))(o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].amount||0,2)),1),o.farmsUserUsd&&o.farmsUserUsd[e.clmm_pool_id]&&o.farmsUserUsd[e.clmm_pool_id].positionNum?(n(),t("div",nt,p(o.farmsUserUsd[e.clmm_pool_id].positionNum)+" "+p(o.farmsUserUsd[e.clmm_pool_id].positionNum>1?"Positions":"Position"),1)):N("",!0)])):(n(),t("div",et,at))]),s("div",it,[lt,s("div",rt,[s("div",dt,[o.farmsLoadingObj[e.clmm_pool_id]||o.farmsAllPositionLoading?(n(),t("div",ct,[w(g,{class:"upgrade-title-skeleton",loading:!0,active:"",paragraph:!1})])):o.wallet.address&&o.farmsRewardObj&&o.farmsRewardObj[e.clmm_pool_id]&&o.farmsRewardObj[e.clmm_pool_id].amountUsd?(n(),t(D,{key:1},[ut,o.farmsRewardObj[e.clmm_pool_id].amountUsd>.01?(n(),t("span",mt,"$"+p(("addCommom"in o?o.addCommom:y(B))(("sFixD"in o?o.sFixD:y(A))(o.farmsRewardObj[e.clmm_pool_id].amountUsd||0,2))),1)):o.farmsRewardObj[e.clmm_pool_id].amountUsd>0&&o.farmsRewardObj[e.clmm_pool_id].amountUsd<.01?(n(),t("span",pt,"$<0.01")):(n(),t("span",_t,"0"))],64)):(n(),t("span",ft,"--"))]),w(m,{class:"claim-btn",disabled:!o.wallet.address||!o.farmsRewardObj[e.clmm_pool_id]||o.farmsRewardObj[e.clmm_pool_id].amountUsd<=0,onClick:to(d=>o.claimPoolReward(e.clmm_pool_id),["stop"])},{default:j(()=>[O("Claim")]),_:2},1032,["disabled","onClick"])])])]),s("div",ht,[w(m,{class:"add-liquidity-btn",onClick:to(d=>o.router.push(`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`),["stop"])},{default:j(()=>[O("+ Add liquidity")]),_:2},1032,["onClick"])]),s("div",{class:"more-btn",onClick:d=>o.openMore(e)},[(n(),t("svg",{class:ao(["arrow-icon",!("checkNullObj"in o?o.checkNullObj:y(x))(o.openMoreObj)&&o.openMoreObj[e==null?void 0:e.clmm_pool_id]?"open-more":""]),"aria-hidden":"true"},$t,2))],8,vt),(n(!0),t(D,null,z(o.farmsPositionObj[e.clmm_pool_id],d=>X((n(),T(I,{key:d.clmm_pool_id,"position-info":{...d,clmm_pool_id:e.clmm_pool_id}},null,8,["position-info"])),[[Io,!("checkNullObj"in o?o.checkNullObj:y(x))(o.openMoreObj)&&o.openMoreObj[e==null?void 0:e.clmm_pool_id]]])),128)),o.farmsPositionObj&&o.farmsPositionObj[e.clmm_pool_id]&&o.farmsPositionObj[e.clmm_pool_id].length==0?(n(),T(v,{key:0,"no-data-img":"/sui-image/img-no-Positions@2x.png",desc:"No Position Found",type:"addLiquidity","add-liquidity-url":`/liquidity/deposit?poolAddress=${e.clmm_pool_id}`},null,8,["add-liquidity-url"])):N("",!0),o.wallet.address?N("",!0):(n(),T(v,{key:1,"no-data-img":"/sui-image/img-connect-wallet@2x.png",type:"connectWallet"},null,8,["no-data-img"]))]))),128))])),!o.wallet.connected&&o.currentTab=="My Farms"?(n(),t("div",yt,[kt,w(m,{class:"connect-wallet",onClick:l[0]||(l[0]=e=>o.wallet.setIsShowWalletModal(!0))},{default:j(()=>[O(p(o.$t("button.connectWallet")),1)]),_:1})])):o.farmsPoolList.length==0?(n(),t("div",wt,Pt)):N("",!0)],64)}const No=E(Je,[["render",Tt],["__scopeId","data-v-a6f2d5a1"]]),Ct=M({setup(o,l){const _=["Live","Ended","My Farms"],c=V("Live"),h=V("APR"),a=V(!1),i=oo(),r=u(()=>i),g=Y(),m=u(()=>g),I=u(()=>c.value=="My Farms"?m.value.address?r.value.myFarmsPoolList:[]:c.value=="Ended"?r.value.farmsPoolList.filter(d=>d.status=="Ended"):r.value.farmsPoolList.filter(d=>d.status=="Live"));return{tabList:_,currentTab:c,sortValue:h,clickRefresh:()=>{a.value=!0,i.getFarmsPoolList(),setTimeout(()=>{a.value=!1},1e3)},isRefresh:a,farmsPoolList:I,getListNum:d=>I.value.length,changeTab:d=>{c.value=d,l.emit("changeTab",d)}}}});const vo=o=>(Q("data-v-03cfc602"),o=o(),G(),o),Lt={class:"farms-tab"},jt={class:"tab-left"},Ut=["onClick"],Ot={key:0},Rt={class:"tab-right"},At={class:"sort-select"},Ft={class:"sort-select-box"},Dt=vo(()=>s("div",null,"Sort by",-1)),Bt=vo(()=>s("svg",{class:"sort-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_on-pool"})],-1)),Nt=vo(()=>s("svg",{class:"arrow-icon","aria-hidden":"true"},[s("use",{"xlink:href":"#icon-icon_arrow"})],-1)),Mt={class:"sort-list"},Et={class:"refresh"},qt=vo(()=>s("use",{"xlink:href":"#icon-icon-refresh2"},null,-1)),Wt=[qt];function Vt(o,l,_,c,h,a){return n(),t("div",Lt,[s("div",jt,[(n(!0),t(D,null,z(o.tabList,i=>(n(),t("div",{key:i,class:ao(["tab-item",o.currentTab==i?"tab-item-active":""]),onClick:r=>o.changeTab(i)},[s("span",null,p(i=="Ended"?"Finished":i),1),o.currentTab==i&&o.getListNum(i)?(n(),t("p",Ot,p(o.getListNum(i)),1)):N("",!0)],10,Ut))),128))]),s("div",Rt,[s("div",At,[s("div",Ft,[Dt,s("div",null,[s("span",null,p(o.sortValue),1),Bt,Nt])]),s("div",Mt,[s("div",{class:"sort-item",onClick:l[0]||(l[0]=i=>o.sortValue="APR")},"APR"),s("div",{class:"sort-item",onClick:l[1]||(l[1]=i=>o.sortValue="TVL")},"TVL")])]),s("div",Et,[(n(),t("svg",{"aria-hidden":"true",class:ao(["refresh-icon",o.isRefresh?"refreshing":""]),onClick:l[2]||(l[2]=(...i)=>o.clickRefresh&&o.clickRefresh(...i))},Wt,2))])])])}const Ht=E(Ct,[["render",Vt],["__scopeId","data-v-03cfc602"]]),Jt=M({components:{FarmsBanner:Co,FarmsTabs:Ht,FarmsTable:Do,FarmsH5List:No},setup(){const o=oo(),l=u(()=>o),_=u(()=>l.value.farmsPoolListLoading),c=u(()=>l.value.farmsPoolList),h=Y(),a=u(()=>h),i=co(),r=u(()=>i);wo(()=>[a.value.address,c.value,r.value.tokensObj,r.value.RATES],([m,I,v,b])=>{m&&I.length>0&&!x(v)&&!x(b)&&o.getPositionByAllPool(m)},{immediate:!0}),qo(()=>{o.getFarmsPoolList()}),wo(()=>a.value.address,m=>{m||o.logOut()},{immediate:!0});const g=V("Live");return{farmsPoolListLoading:_,currentTab:g}}});const zt={class:"farm-container"},Qt={class:"farm-container-center"};function Gt(o,l,_,c,h,a){const i=Co,r=Wo("FarmsTabs"),g=Do,m=ye,I=No;return n(),t("div",zt,[w(i),s("div",Qt,[w(r,{onChangeTab:l[0]||(l[0]=v=>{o.currentTab=v})}),o.farmsPoolListLoading?(n(),T(m,{key:1,"current-tab":o.currentTab},null,8,["current-tab"])):(n(),T(g,{key:0,"current-tab":o.currentTab},null,8,["current-tab"])),w(I,{"current-tab":o.currentTab},null,8,["current-tab"])])])}const ca=E(Jt,[["render",Gt],["__scopeId","data-v-ae3e898e"]]);export{ca as default};
