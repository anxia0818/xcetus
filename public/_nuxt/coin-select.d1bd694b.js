import{_ as oe}from"./token-warning.b1912a91.js";import{a as K,i as ne,u as se,h as M,D as pe,f as ve,b as be,p as _e}from"./pool.fabe733c.js";import{a as te,l as ae,m as v,a1 as ke,a2 as le,A as E,e as ie,o as a,f as i,h as t,c as O,t as c,x as Z,i as j,w as h,s as N,j as z,u as w,I as he,J as de,a9 as fe,S as ge,B as ye,p as re,k as ue,M as $e,r as D,v as Ce,aa as we,K as H,E as Se,a3 as Le,F as x,q as ee,D as Te,ab as Ie}from"./entry.517e5b8b.js";/* empty css              *//* empty css              *//* empty css              */import{i as S}from"./import-icon.de3e6c66.js";/* empty css              */import{_ as Oe,a as je}from"./img-no-Positions_2x.b3e4e7f0.js";const Ne=te({components:{TokenWarning:oe},props:{inputValue:{type:String,default:""},inputDisabled:{type:Boolean,default:!1},coinName:{type:String,default:""},coinSymbol:{type:String,default:""},balance:{type:Number,default:null},coinIcon:{type:String,default:""},havemax:{type:Boolean,default:!0},hasArrow:{type:Boolean,default:!0},isTotal:{type:Boolean,default:!1},importPage:{type:String,default:""},address:{type:String,default:""}},setup(e,d){const{t:l,locale:q}=ae(),P=K(),_=v(()=>P),f=v(()=>new pe(Number(e.balance)).div(2)),m=ke(le,{style:{fontSize:"12px",color:"#fff",paddingBottom:"3px"},spin:!0});function L(){this.$emit("onSelect")}const g=n=>{const b=new RegExp(`[^\\d-]*(\\d*(?:\\.\\d{0,${(k==null?void 0:k.value)&&(k==null?void 0:k.value)}})?).*$`);n.target.value=n.target.value.replace(b,"$1")},T=ne(),p=v(()=>T),s=se(),r=v(()=>s);let y={};E(()=>r.value.RATES,n=>{n&&(console.log(n,"price====>"),y=n)},{immediate:!0});const I=v(()=>(console.log(e.inputValue,"==>props.inputValue"),console.log(e.coinName,"===>props.coinName"),ve(Number(e.inputValue)*Number(y&&y[e.address]&&y[e.address].price),2))),A=v(()=>{var n,b,$;return console.log((n=r.value.tokensObj[e.address])==null?void 0:n.labels,"===> pool.value.tokensObj[props.address]?.labels"),r.value.tokensObj&&e.address&&r.value.tokensObj[e.address]&&((b=r.value.tokensObj[e.address])==null?void 0:b.labels)&&(($=r.value.tokensObj[e.address])==null?void 0:$.labels[0])}),k=v(()=>{var n;return r.value.tokensObj&&e.address&&r.value.tokensObj[e.address]&&((n=r.value.tokensObj[e.address])==null?void 0:n.decimals)}),V=v(()=>{var n,b;return e.coinIcon||((b=(n=r==null?void 0:r.value)==null?void 0:n.tokensObj[e.address])==null?void 0:b.logo_url)||(_.value.theme==="default"?S("/image/coins/unknown.png"):S("/image/coins/sui-unknown.png"))}),U=v(()=>r.value.tokensObj);return{currentIcon:V,tokensObj:U,pool:r,halfBalance:f,coinLabels:A,t:l,addCommom:M,store:_,wallet:p,indicator:m,inputChange:g,importIcon:S,selectCoin:L,amountPirce:I,coinDecimals:k}}});const Ae=e=>(re("data-v-380babac"),e=e(),ue(),e),Be={class:"card"},De={class:"top"},Me={key:1,class:"input-div"},Re={key:0},Pe={class:"loading-token"},Ve=["src"],Fe={key:0},ze=Ae(()=>t("use",{"xlink:href":"#icon-icon_on"},null,-1)),Ee=[ze],Ze={class:"bottom"},qe={key:0,class:"amount-price"},Ue={key:1},We={class:"top"},He={class:"right"},Ke={class:"balance"};function Je(e,d,l,q,P,_){const f=he,m=de,L=fe,g=oe,T=ge,p=ye;return a(),i("div",Be,[t("div",De,[e.inputDisabled?(a(),i("div",Me,[e.inputValue?(a(),i("span",Re,c(e.inputValue),1)):(a(),O(m,{key:1,indicator:e.indicator},null,8,["indicator"]))])):(a(),O(f,{key:0,value:e.inputValue=="InsufficientLiquidity"?"":e.inputValue,placeholder:"0.0",disabled:e.inputDisabled,onChange:e.inputChange,onInput:d[0]||(d[0]=s=>e.$emit("onInput",s.target.value)),onFocus:d[1]||(d[1]=s=>e.$emit("onFocus"))},null,8,["value","disabled","onChange"])),t("div",{class:Z(["left",e.hasArrow?"":"nohands"]),onClick:d[2]||(d[2]=s=>e.hasArrow&&!e.pool.isTokenLoading?e.selectCoin():"")},[t("div",Pe,[e.pool.isTokenLoading?(a(),O(L,{key:0,active:e.active,size:"small",paragraph:!1},null,8,["active"])):(a(),i("img",{key:1,src:e.currentIcon},null,8,Ve)),j(g,{address:e.address,"style-params":{width:"12px",height:"12px",left:"18px",bottom:"0px"}},null,8,["address"]),j(T,{loading:e.pool.isTokenLoading,class:"loading-token-skeleton",active:"",paragraph:!1},{default:h(()=>[t("div",null,[t("p",null,c(e.coinSymbol?e.coinSymbol:e.$t("modal.selectTokenModalTitle")),1),e.coinLabels?(a(),i("p",Fe,c(e.coinLabels),1)):N("",!0)])]),_:1},8,["loading"])]),e.hasArrow?(a(),i("svg",{key:0,class:Z(["icon",e.pool.isTokenLoading?"loading-drop-icon":""]),"aria-hidden":"true"},Ee,2)):N("",!0)],2)]),t("div",Ze,[e.inputValue&&e.amountPirce!="--"?(a(),i("div",qe," $"+c(e.amountPirce),1)):(a(),i("div",Ue)),t("div",We,[t("div",He,[z(c(e.isTotal?e.$t("common.total"):e.$t("common.balance"))+" ",1),t("span",Ke,c(e.wallet.connected?("addCommom"in e?e.addCommom:w(M))(e.balance,e.coinDecimals):"0"),1),e.havemax&&e.wallet.connected?(a(),O(p,{key:0,disabled:!e.coinName||("addCommom"in e?e.addCommom:w(M))(e.halfBalance,e.coinDecimals)==0,class:"max-btn",onClick:d[3]||(d[3]=s=>e.$emit("onHalf"))},{default:h(()=>[z(c("Half"))]),_:1},8,["disabled"])):N("",!0),e.havemax&&e.wallet.connected?(a(),O(p,{key:1,disabled:!e.coinName||("addCommom"in e?e.addCommom:w(M))(e.balance,e.coinDecimals)==0,class:"max-btn",onClick:d[4]||(d[4]=s=>e.$emit("onMax"))},{default:h(()=>[z(c(e.$t("button.max")),1)]),_:1},8,["disabled"])):N("",!0)])])])])}const Vo=ie(Ne,[["render",Je],["__scopeId","data-v-380babac"]]);const Ge=te({components:{Modal:$e,LoadingOutlined:le},props:{existingCoins:{type:String,default:""},lastSelectCoin:{type:String,default:""}},setup(e,d){const{t:l,locale:q}=ae(),P=ne(),_=v(()=>P),f=se(),m=v(()=>f),L=K(),g=v(()=>L),T=D([l("tab.all"),l("tab.native"),l("tab.layerZero"),l("tab.wormhole"),l("tab.celer")]),p=D(l("tab.all")),s=D(l("tab.all")),r=K(),y=v(()=>r.chainName),I=D([]);console.log(I,"===>tokenList");const A=D(null);Ce(()=>{});const k=D(!1);E(p,n=>{n!==l("tab.all")&&(k.value=!1),n==l("tab.all")?s.value=l("tab.all"):n==l("tab.layerZero")?s.value=l("tab.layerZero"):n==l("tab.wormhole")?s.value=l("tab.wormhole"):n==l("tab.celer")?s.value=l("tab.celer"):n==l("tab.native")&&(s.value=l("tab.native")),V(A.value)});const V=async n=>{var J,G,Q,X,Y;let b=[],$=m.value.tokens;if(!(g.value.chainName&&$&&$[0]&&g.value.chainName.toLowerCase().includes((J=$[0])==null?void 0:J.chain))){I.value=[],console.log("执行");return}let W=$;if(n&&n.split("::")&&n.split("::").length==3&&y.value=="Sui"){const u=be("Sui");try{const o=m.value.tokensObj[n]||await u.getTokenBySymbol(m.value.tokens,n);o&&((G=$.filter(C=>(C==null?void 0:C.address)===(o==null?void 0:o.address)))==null?void 0:G.length)<1&&(f.setNewTokens({[n]:o}),W=$.concat(o))}catch(o){console.log("searchToken##err##",o)}}for(const u of Object.keys(W)){let o=we(W[u]);const C=_.value.assets[o.address]&&_.value.assets[o.address].balance?_e(_.value.assets&&_.value.assets[o.address].balance,o.decimals):0;e.lastSelectCoin&&o&&o.address===e.lastSelectCoin?o.unusable=!0:o.unusable=!1;const ce=((Q=m.value.tokensObj[o.address])==null?void 0:Q.labels)&&((X=m.value.tokensObj[o.address])==null?void 0:X.labels[0]),me=m.value.tokensObj[o.address]?(Y=m.value.tokensObj[o.address])==null?void 0:Y.name:o.name;o={...o,balance:C,labels:ce,name:me,sort:o.symbol=="APT"||o.symbol=="SUI"?1:-1},b.push(o)}let B;_.value.address?B=b.sort((u,o)=>o.coin_priority>u.coin_priority?1:-1).sort((u,o)=>o.balance-u.balance):B=b.sort((u,o)=>o.coin_priority>u.coin_priority?1:-1);let F=[];if(n){console.log(B,"sortResult=====>");const u=B.filter(o=>o.symbol.toLowerCase().indexOf(n.toLowerCase())!==-1||o.address.toLowerCase().indexOf(n.toLowerCase())!==-1);console.log(u,"===>result"),p.value!==l("tab.all")?F=u.filter(C=>p.value==l("tab.native")?!C.labels:C.labels&&C.labels.toLowerCase()==p.value.toLowerCase()):F=u}else console.log(p.value,"===>currentTab.value"),p.value!==l("tab.all")?F=B.filter(o=>p.value==l("tab.native")?!o.labels:o.labels&&o.labels.toLowerCase()==p.value.toLowerCase()):F=B;I.value=F.sort((u,o)=>o.sort-u.sort).sort((u,o)=>o.unusable-u.unusable),console.log(I.value,"tokenList.value===>322")},U=n=>{d.emit("onSelect",n),d.emit("onClose")};return E(()=>[A.value,k.value],([n,b])=>{console.log(n,"===>keyword"),V(n)},{immediate:!0}),E(()=>m.value.tokens,n=>{n&&(console.log(m.value.tokens,"===>pools.value.tokens"),V(A.value))},{immediate:!0}),{pools:m,t:l,chainName:y,tabList:T,currentTab:p,addCommom:M,tokenList:I,importIcon:S,keyword:A,wallet:_,toSelect:U,store:g,isShowAll:k}}}),Qe=""+globalThis.__publicAssetsURL("image/warning@2x.png");const R=e=>(re("data-v-20cbdee5"),e=e(),ue(),e),Xe=R(()=>t("svg",{class:"icon modal-icon-close","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-a-icon-Shutdown"})],-1)),Ye={class:"coin-select-modal"},xe={class:"search-input"},eo=["placeholder"],oo=R(()=>t("use",{"xlink:href":"#icon-a-icon-Shutdown"},null,-1)),no=[oo],so={key:0,class:"tab-list"},to=["onClick"],ao={class:"item"},lo=R(()=>t("div",{class:"line"},null,-1)),io={class:"coin-list-box"},ro={key:0,class:"coin-list"},uo=["onClick"],co={class:"left"},mo=["src"],po=["src"],vo={class:"name-box"},bo=R(()=>t("img",{src:Qe,alt:""},null,-1)),_o={class:"balance-box"},ko={class:"balance"},ho={key:0},fo={key:1},go={key:2},yo=R(()=>t("p",null,null,-1)),$o={key:1,class:"no-data"},Co={key:0,class:"token-loading"},wo={key:1,class:"no-data-content"},So={key:0,src:Oe},Lo={key:1,src:je},To=R(()=>t("svg",{class:"icon","aria-hidden":"true"},[t("use",{"xlink:href":"#icon-icon-information"})],-1));function Io(e,d,l,q,P,_){const f=Te,m=H("loading-outlined"),L=Ie,g=de,T=H("vue-scroll"),p=H("Modal");return a(),O(p,{title:e.$t("modal.selectTokenModalTitle"),class:"select-mod",width:420,centered:"",visible:!0,footer:null,onCancel:d[2]||(d[2]=s=>e.$emit("onClose"))},{closeIcon:h(()=>[Xe]),default:h(()=>[t("div",Ye,[t("div",xe,[Se(t("input",{"onUpdate:modelValue":d[0]||(d[0]=s=>e.keyword=s),onkeyup:"value=value.replace(/[^A-Za-z0-9]+$/g,'')",placeholder:e.$t("inputPlaceholder.selectTokenModalPlaceholder")},null,8,eo),[[Le,e.keyword]]),e.keyword?(a(),i("svg",{key:0,class:"clear-icon icon modal-icon-close","aria-hidden":"true",onClick:d[1]||(d[1]=s=>e.keyword="")},no)):N("",!0)]),e.chainName!=="Sui"?(a(),i("div",so,[(a(!0),i(x,null,ee(e.tabList,(s,r)=>(a(),i("div",{key:r,class:Z(["item-container",e.currentTab==s?"item-container-active item-container":"item-container"]),onClick:y=>e.currentTab=s},[t("div",ao,c(s),1)],10,to))),128))])):N("",!0),lo,t("div",io,[j(T,null,{default:h(()=>[e.tokenList&&e.tokenList.length>0?(a(),i("ul",ro,[(a(!0),i(x,null,ee(e.tokenList,(s,r)=>(a(),i("li",{key:r,class:Z(s.unusable?"unusable":""),onClick:y=>e.toSelect(s)},[t("div",co,[s.isChinaToken?(a(),i("img",{key:1,src:e.store.theme=="default"?("importIcon"in e?e.importIcon:w(S))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:w(S))("/image/coins/sui-unknown.png"),alt:""},null,8,po)):(a(),i("img",{key:0,src:s.icon||s.logo_url||(e.store.theme=="default"?("importIcon"in e?e.importIcon:w(S))("/image/coins/unknown.png"):("importIcon"in e?e.importIcon:w(S))("/image/coins/sui-unknown.png"))},null,8,mo)),t("div",vo,[t("span",null,[z(c(s.symbol)+" ",1),s.isSelfBuilt?(a(),O(f,{key:0,placement:"right","arrow-point-at-center":""},{title:h(()=>[t("span",null,c(e.t("newAdd.notCetusTokenList")),1)]),default:h(()=>[bo]),_:1})):N("",!0)]),t("p",null,c(s.name)+" "+c(s.labels?`(${s.labels})`:""),1)])]),t("div",_o,[t("div",ko,[e.wallet.loading?(a(),i("div",ho,[j(L,null,{default:h(()=>[j(m)]),_:1})])):s.balance&&e.wallet.connected?(a(),i("div",fo,c(("addCommom"in e?e.addCommom:w(M))(s.balance,s.decimals)),1)):(a(),i("div",go,"0"))]),yo])],10,uo))),128))])):(a(),i("div",$o,[e.pools.isTokenLoading?(a(),i("div",Co,[j(g)])):(a(),i("div",wo,[e.store.theme=="default"?(a(),i("img",So)):(a(),i("img",Lo)),t("p",null,c(e.t("newAdd.noTokensFound")),1),t("div",null,[z(c(e.t("newAdd.enterCoinType"))+" ",1),j(f,{placement:"bottom","arrow-point-at-center":""},{title:h(()=>[t("span",null,c(e.t("newAdd.uniqueIdOfCoin")),1)]),default:h(()=>[To]),_:1})])]))]))]),_:1})])])]),_:1},8,["title"])}const Fo=ie(Ge,[["render",Io],["__scopeId","data-v-20cbdee5"]]);export{Vo as _,Fo as a};
